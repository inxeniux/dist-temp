function Pk(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const r in o)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(o,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>o[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ro(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Qk(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var r=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,r.get?r:{enumerable:!0,get:function(){return e[o]}})}),n}var G1={exports:{}},Gu={},B1={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=Symbol.for("react.element"),Ok=Symbol.for("react.portal"),_k=Symbol.for("react.fragment"),qk=Symbol.for("react.strict_mode"),$k=Symbol.for("react.profiler"),ex=Symbol.for("react.provider"),tx=Symbol.for("react.context"),nx=Symbol.for("react.forward_ref"),ox=Symbol.for("react.suspense"),rx=Symbol.for("react.memo"),ix=Symbol.for("react.lazy"),g0=Symbol.iterator;function lx(e){return e===null||typeof e!="object"?null:(e=g0&&e[g0]||e["@@iterator"],typeof e=="function"?e:null)}var S1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V1=Object.assign,R1={};function Fl(e,t,n){this.props=e,this.context=t,this.refs=R1,this.updater=n||S1}Fl.prototype.isReactComponent={};Fl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function W1(){}W1.prototype=Fl.prototype;function af(e,t,n){this.props=e,this.context=t,this.refs=R1,this.updater=n||S1}var gf=af.prototype=new W1;gf.constructor=af;V1(gf,Fl.prototype);gf.isPureReactComponent=!0;var c0=Array.isArray,w1=Object.prototype.hasOwnProperty,cf={current:null},k1={key:!0,ref:!0,__self:!0,__source:!0};function x1(e,t,n){var o,r={},i=null,l=null;if(t!=null)for(o in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)w1.call(t,o)&&!k1.hasOwnProperty(o)&&(r[o]=t[o]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var a=Array(s),c=0;c<s;c++)a[c]=arguments[c+2];r.children=a}if(e&&e.defaultProps)for(o in s=e.defaultProps,s)r[o]===void 0&&(r[o]=s[o]);return{$$typeof:ba,type:e,key:i,ref:l,props:r,_owner:cf.current}}function sx(e,t){return{$$typeof:ba,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uf(e){return typeof e=="object"&&e!==null&&e.$$typeof===ba}function ax(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var u0=/\/+/g;function tI(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ax(""+e.key):t.toString(36)}function Dg(e,t,n,o,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ba:case Ok:l=!0}}if(l)return l=e,r=r(l),e=o===""?"."+tI(l,0):o,c0(r)?(n="",e!=null&&(n=e.replace(u0,"$&/")+"/"),Dg(r,t,n,"",function(c){return c})):r!=null&&(uf(r)&&(r=sx(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(u0,"$&/")+"/")+e)),t.push(r)),1;if(l=0,o=o===""?".":o+":",c0(e))for(var s=0;s<e.length;s++){i=e[s];var a=o+tI(i,s);l+=Dg(i,t,n,a,r)}else if(a=lx(e),typeof a=="function")for(e=a.call(e),s=0;!(i=e.next()).done;)i=i.value,a=o+tI(i,s++),l+=Dg(i,t,n,a,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function qa(e,t,n){if(e==null)return e;var o=[],r=0;return Dg(e,o,"","",function(i){return t.call(n,i,r++)}),o}function gx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $t={current:null},Ug={transition:null},cx={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Ug,ReactCurrentOwner:cf};ke.Children={map:qa,forEach:function(e,t,n){qa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qa(e,function(){t++}),t},toArray:function(e){return qa(e,function(t){return t})||[]},only:function(e){if(!uf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=Fl;ke.Fragment=_k;ke.Profiler=$k;ke.PureComponent=af;ke.StrictMode=qk;ke.Suspense=ox;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cx;ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=V1({},e.props),r=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=cf.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(a in t)w1.call(t,a)&&!k1.hasOwnProperty(a)&&(o[a]=t[a]===void 0&&s!==void 0?s[a]:t[a])}var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){s=Array(a);for(var c=0;c<a;c++)s[c]=arguments[c+2];o.children=s}return{$$typeof:ba,type:e.type,key:r,ref:i,props:o,_owner:l}};ke.createContext=function(e){return e={$$typeof:tx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ex,_context:e},e.Consumer=e};ke.createElement=x1;ke.createFactory=function(e){var t=x1.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:nx,render:e}};ke.isValidElement=uf;ke.lazy=function(e){return{$$typeof:ix,_payload:{_status:-1,_result:e},_init:gx}};ke.memo=function(e,t){return{$$typeof:rx,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=Ug.transition;Ug.transition={};try{e()}finally{Ug.transition=t}};ke.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ke.useCallback=function(e,t){return $t.current.useCallback(e,t)};ke.useContext=function(e){return $t.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return $t.current.useDeferredValue(e)};ke.useEffect=function(e,t){return $t.current.useEffect(e,t)};ke.useId=function(){return $t.current.useId()};ke.useImperativeHandle=function(e,t,n){return $t.current.useImperativeHandle(e,t,n)};ke.useInsertionEffect=function(e,t){return $t.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return $t.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return $t.current.useMemo(e,t)};ke.useReducer=function(e,t,n){return $t.current.useReducer(e,t,n)};ke.useRef=function(e){return $t.current.useRef(e)};ke.useState=function(e){return $t.current.useState(e)};ke.useSyncExternalStore=function(e,t,n){return $t.current.useSyncExternalStore(e,t,n)};ke.useTransition=function(){return $t.current.useTransition()};ke.version="18.2.0";B1.exports=ke;var m=B1.exports;const P=ro(m),mc=Pk({__proto__:null,default:P},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux=m,dx=Symbol.for("react.element"),Ix=Symbol.for("react.fragment"),Cx=Object.prototype.hasOwnProperty,mx=ux.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hx={key:!0,ref:!0,__self:!0,__source:!0};function X1(e,t,n){var o,r={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(o in t)Cx.call(t,o)&&!hx.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:dx,type:e,key:i,ref:l,props:r,_owner:mx.current}}Gu.Fragment=Ix;Gu.jsx=X1;Gu.jsxs=X1;G1.exports=Gu;var g=G1.exports,nm={},J1={exports:{}},Sn={},N1={exports:{}},Y1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,Y){var N=F.length;F.push(Y);e:for(;0<N;){var x=N-1>>>1,H=F[x];if(0<r(H,Y))F[x]=Y,F[N]=H,N=x;else break e}}function n(F){return F.length===0?null:F[0]}function o(F){if(F.length===0)return null;var Y=F[0],N=F.pop();if(N!==Y){F[0]=N;e:for(var x=0,H=F.length,K=H>>>1;x<K;){var T=2*(x+1)-1,j=F[T],J=T+1,z=F[J];if(0>r(j,N))J<H&&0>r(z,j)?(F[x]=z,F[J]=N,x=J):(F[x]=j,F[T]=N,x=T);else if(J<H&&0>r(z,N))F[x]=z,F[J]=N,x=J;else break e}}return Y}function r(F,Y){var N=F.sortIndex-Y.sortIndex;return N!==0?N:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,s=l.now();e.unstable_now=function(){return l.now()-s}}var a=[],c=[],u=1,d=null,I=3,C=!1,f=!1,A=!1,v=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var Y=n(c);Y!==null;){if(Y.callback===null)o(c);else if(Y.startTime<=F)o(c),Y.sortIndex=Y.expirationTime,t(a,Y);else break;Y=n(c)}}function y(F){if(A=!1,b(F),!f)if(n(a)!==null)f=!0,M(Z);else{var Y=n(c);Y!==null&&L(y,Y.startTime-F)}}function Z(F,Y){f=!1,A&&(A=!1,h(S),S=-1),C=!0;var N=I;try{for(b(Y),d=n(a);d!==null&&(!(d.expirationTime>Y)||F&&!R());){var x=d.callback;if(typeof x=="function"){d.callback=null,I=d.priorityLevel;var H=x(d.expirationTime<=Y);Y=e.unstable_now(),typeof H=="function"?d.callback=H:d===n(a)&&o(a),b(Y)}else o(a);d=n(a)}if(d!==null)var K=!0;else{var T=n(c);T!==null&&L(y,T.startTime-Y),K=!1}return K}finally{d=null,I=N,C=!1}}var G=!1,V=null,S=-1,k=5,B=-1;function R(){return!(e.unstable_now()-B<k)}function W(){if(V!==null){var F=e.unstable_now();B=F;var Y=!0;try{Y=V(!0,F)}finally{Y?w():(G=!1,V=null)}}else G=!1}var w;if(typeof p=="function")w=function(){p(W)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,E=X.port2;X.port1.onmessage=W,w=function(){E.postMessage(null)}}else w=function(){v(W,0)};function M(F){V=F,G||(G=!0,w())}function L(F,Y){S=v(function(){F(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){f||C||(f=!0,M(Z))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(F){switch(I){case 1:case 2:case 3:var Y=3;break;default:Y=I}var N=I;I=Y;try{return F()}finally{I=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var N=I;I=F;try{return Y()}finally{I=N}},e.unstable_scheduleCallback=function(F,Y,N){var x=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?x+N:x):N=x,F){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=N+H,F={id:u++,callback:Y,priorityLevel:F,startTime:N,expirationTime:H,sortIndex:-1},N>x?(F.sortIndex=N,t(c,F),n(a)===null&&F===n(c)&&(A?(h(S),S=-1):A=!0,L(y,N-x))):(F.sortIndex=H,t(a,F),f||C||(f=!0,M(Z))),F},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(F){var Y=I;return function(){var N=I;I=Y;try{return F.apply(this,arguments)}finally{I=N}}}})(Y1);N1.exports=Y1;var fx=N1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=m,Gn=fx;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F1=new Set,Ds={};function Ei(e,t){yl(e,t),yl(e+"Capture",t)}function yl(e,t){for(Ds[e]=t,e=0;e<t.length;e++)F1.add(t[e])}var Ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),om=Object.prototype.hasOwnProperty,Ax=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d0={},I0={};function px(e){return om.call(I0,e)?!0:om.call(d0,e)?!1:Ax.test(e)?I0[e]=!0:(d0[e]=!0,!1)}function bx(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yx(e,t,n,o){if(t===null||typeof t>"u"||bx(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function en(e,t,n,o,r,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new en(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new en(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new en(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new en(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new en(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new en(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new en(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new en(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new en(e,5,!1,e.toLowerCase(),null,!1,!1)});var df=/[\-:]([a-z])/g;function If(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(df,If);Et[t]=new en(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(df,If);Et[t]=new en(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(df,If);Et[t]=new en(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new en(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new en(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cf(e,t,n,o){var r=Et.hasOwnProperty(t)?Et[t]:null;(r!==null?r.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yx(t,n,r,o)&&(n=null),o||r===null?px(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,o=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var Do=H1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$a=Symbol.for("react.element"),Oi=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),mf=Symbol.for("react.strict_mode"),rm=Symbol.for("react.profiler"),E1=Symbol.for("react.provider"),K1=Symbol.for("react.context"),hf=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),lm=Symbol.for("react.suspense_list"),ff=Symbol.for("react.memo"),nr=Symbol.for("react.lazy"),L1=Symbol.for("react.offscreen"),C0=Symbol.iterator;function rs(e){return e===null||typeof e!="object"?null:(e=C0&&e[C0]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Object.assign,nI;function vs(e){if(nI===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nI=t&&t[1]||""}return`
`+nI+e}var oI=!1;function rI(e,t){if(!e||oI)return"";oI=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var o=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){o=c}e.call(t.prototype)}else{try{throw Error()}catch(c){o=c}e()}}catch(c){if(c&&o&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=o.stack.split(`
`),l=r.length-1,s=i.length-1;1<=l&&0<=s&&r[l]!==i[s];)s--;for(;1<=l&&0<=s;l--,s--)if(r[l]!==i[s]){if(l!==1||s!==1)do if(l--,s--,0>s||r[l]!==i[s]){var a=`
`+r[l].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=l&&0<=s);break}}}finally{oI=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?vs(e):""}function vx(e){switch(e.tag){case 5:return vs(e.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 2:case 15:return e=rI(e.type,!1),e;case 11:return e=rI(e.type.render,!1),e;case 1:return e=rI(e.type,!0),e;default:return""}}function sm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _i:return"Fragment";case Oi:return"Portal";case rm:return"Profiler";case mf:return"StrictMode";case im:return"Suspense";case lm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K1:return(e.displayName||"Context")+".Consumer";case E1:return(e._context.displayName||"Context")+".Provider";case hf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ff:return t=e.displayName||null,t!==null?t:sm(e.type)||"Memo";case nr:t=e._payload,e=e._init;try{return sm(e(t))}catch{}}return null}function Zx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sm(t);case 8:return t===mf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function M1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gx(e){var t=M1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(l){o=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(l){o=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function eg(e){e._valueTracker||(e._valueTracker=Gx(e))}function T1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=M1(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function hc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function am(e,t){var n=t.checked;return gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function m0(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=Wr(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function j1(e,t){t=t.checked,t!=null&&Cf(e,"checked",t,!1)}function gm(e,t){j1(e,t);var n=Wr(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?cm(e,t.type,n):t.hasOwnProperty("defaultValue")&&cm(e,t.type,Wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function h0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function cm(e,t,n){(t!=="number"||hc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Zs=Array.isArray;function Il(e,t,n,o){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&o&&(e[n].defaultSelected=!0)}else{for(n=""+Wr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,o&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function um(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function f0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(se(92));if(Zs(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Wr(n)}}function z1(e,t){var n=Wr(t.value),o=Wr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function A0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function D1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?D1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var tg,U1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(tg=tg||document.createElement("div"),tg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Us(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bx=["Webkit","ms","Moz","O"];Object.keys(Rs).forEach(function(e){Bx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rs[t]=Rs[e]})});function P1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Rs.hasOwnProperty(e)&&Rs[e]?(""+t).trim():t+"px"}function Q1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=P1(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,r):e[n]=r}}var Sx=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Im(e,t){if(t){if(Sx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function Cm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function Af(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hm=null,Cl=null,ml=null;function p0(e){if(e=Za(e)){if(typeof hm!="function")throw Error(se(280));var t=e.stateNode;t&&(t=Wu(t),hm(e.stateNode,e.type,t))}}function O1(e){Cl?ml?ml.push(e):ml=[e]:Cl=e}function _1(){if(Cl){var e=Cl,t=ml;if(ml=Cl=null,p0(e),t)for(e=0;e<t.length;e++)p0(t[e])}}function q1(e,t){return e(t)}function $1(){}var iI=!1;function eB(e,t,n){if(iI)return e(t,n);iI=!0;try{return q1(e,t,n)}finally{iI=!1,(Cl!==null||ml!==null)&&($1(),_1())}}function Ps(e,t){var n=e.stateNode;if(n===null)return null;var o=Wu(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(se(231,t,typeof n));return n}var fm=!1;if(Ko)try{var is={};Object.defineProperty(is,"passive",{get:function(){fm=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{fm=!1}function Vx(e,t,n,o,r,i,l,s,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ws=!1,fc=null,Ac=!1,Am=null,Rx={onError:function(e){Ws=!0,fc=e}};function Wx(e,t,n,o,r,i,l,s,a){Ws=!1,fc=null,Vx.apply(Rx,arguments)}function wx(e,t,n,o,r,i,l,s,a){if(Wx.apply(this,arguments),Ws){if(Ws){var c=fc;Ws=!1,fc=null}else throw Error(se(198));Ac||(Ac=!0,Am=c)}}function Ki(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function tB(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b0(e){if(Ki(e)!==e)throw Error(se(188))}function kx(e){var t=e.alternate;if(!t){if(t=Ki(e),t===null)throw Error(se(188));return t!==e?null:e}for(var n=e,o=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return b0(r),e;if(i===o)return b0(r),t;i=i.sibling}throw Error(se(188))}if(n.return!==o.return)n=r,o=i;else{for(var l=!1,s=r.child;s;){if(s===n){l=!0,n=r,o=i;break}if(s===o){l=!0,o=r,n=i;break}s=s.sibling}if(!l){for(s=i.child;s;){if(s===n){l=!0,n=i,o=r;break}if(s===o){l=!0,o=i,n=r;break}s=s.sibling}if(!l)throw Error(se(189))}}if(n.alternate!==o)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?e:t}function nB(e){return e=kx(e),e!==null?oB(e):null}function oB(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=oB(e);if(t!==null)return t;e=e.sibling}return null}var rB=Gn.unstable_scheduleCallback,y0=Gn.unstable_cancelCallback,xx=Gn.unstable_shouldYield,Xx=Gn.unstable_requestPaint,At=Gn.unstable_now,Jx=Gn.unstable_getCurrentPriorityLevel,pf=Gn.unstable_ImmediatePriority,iB=Gn.unstable_UserBlockingPriority,pc=Gn.unstable_NormalPriority,Nx=Gn.unstable_LowPriority,lB=Gn.unstable_IdlePriority,Bu=null,ho=null;function Yx(e){if(ho&&typeof ho.onCommitFiberRoot=="function")try{ho.onCommitFiberRoot(Bu,e,void 0,(e.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:Ex,Hx=Math.log,Fx=Math.LN2;function Ex(e){return e>>>=0,e===0?32:31-(Hx(e)/Fx|0)|0}var ng=64,og=4194304;function Gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bc(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,r=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var s=l&~r;s!==0?o=Gs(s):(i&=l,i!==0&&(o=Gs(i)))}else l=n&~r,l!==0?o=Gs(l):i!==0&&(o=Gs(i));if(o===0)return 0;if(t!==0&&t!==o&&!(t&r)&&(r=o&-o,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-$n(t),r=1<<n,o|=e[n],t&=~r;return o}function Kx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lx(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-$n(i),s=1<<l,a=r[l];a===-1?(!(s&n)||s&o)&&(r[l]=Kx(s,t)):a<=t&&(e.expiredLanes|=s),i&=~s}}function pm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sB(){var e=ng;return ng<<=1,!(ng&4194240)&&(ng=64),e}function lI(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ya(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$n(t),e[t]=n}function Mx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-$n(n),i=1<<r;t[r]=0,o[r]=-1,e[r]=-1,n&=~i}}function bf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-$n(n),r=1<<o;r&t|e[o]&t&&(e[o]|=t),n&=~r}}var Te=0;function aB(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gB,yf,cB,uB,dB,bm=!1,rg=[],Ar=null,pr=null,br=null,Qs=new Map,Os=new Map,ar=[],Tx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v0(e,t){switch(e){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Qs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(t.pointerId)}}function ls(e,t,n,o,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Za(t),t!==null&&yf(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function jx(e,t,n,o,r){switch(t){case"focusin":return Ar=ls(Ar,e,t,n,o,r),!0;case"dragenter":return pr=ls(pr,e,t,n,o,r),!0;case"mouseover":return br=ls(br,e,t,n,o,r),!0;case"pointerover":var i=r.pointerId;return Qs.set(i,ls(Qs.get(i)||null,e,t,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,Os.set(i,ls(Os.get(i)||null,e,t,n,o,r)),!0}return!1}function IB(e){var t=Ii(e.target);if(t!==null){var n=Ki(t);if(n!==null){if(t=n.tag,t===13){if(t=tB(n),t!==null){e.blockedOn=t,dB(e.priority,function(){cB(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ym(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);mm=o,n.target.dispatchEvent(o),mm=null}else return t=Za(n),t!==null&&yf(t),e.blockedOn=n,!1;t.shift()}return!0}function Z0(e,t,n){Pg(e)&&n.delete(t)}function zx(){bm=!1,Ar!==null&&Pg(Ar)&&(Ar=null),pr!==null&&Pg(pr)&&(pr=null),br!==null&&Pg(br)&&(br=null),Qs.forEach(Z0),Os.forEach(Z0)}function ss(e,t){e.blockedOn===t&&(e.blockedOn=null,bm||(bm=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,zx)))}function _s(e){function t(r){return ss(r,e)}if(0<rg.length){ss(rg[0],e);for(var n=1;n<rg.length;n++){var o=rg[n];o.blockedOn===e&&(o.blockedOn=null)}}for(Ar!==null&&ss(Ar,e),pr!==null&&ss(pr,e),br!==null&&ss(br,e),Qs.forEach(t),Os.forEach(t),n=0;n<ar.length;n++)o=ar[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<ar.length&&(n=ar[0],n.blockedOn===null);)IB(n),n.blockedOn===null&&ar.shift()}var hl=Do.ReactCurrentBatchConfig,yc=!0;function Dx(e,t,n,o){var r=Te,i=hl.transition;hl.transition=null;try{Te=1,vf(e,t,n,o)}finally{Te=r,hl.transition=i}}function Ux(e,t,n,o){var r=Te,i=hl.transition;hl.transition=null;try{Te=4,vf(e,t,n,o)}finally{Te=r,hl.transition=i}}function vf(e,t,n,o){if(yc){var r=ym(e,t,n,o);if(r===null)hI(e,t,o,vc,n),v0(e,o);else if(jx(r,e,t,n,o))o.stopPropagation();else if(v0(e,o),t&4&&-1<Tx.indexOf(e)){for(;r!==null;){var i=Za(r);if(i!==null&&gB(i),i=ym(e,t,n,o),i===null&&hI(e,t,o,vc,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else hI(e,t,o,null,n)}}var vc=null;function ym(e,t,n,o){if(vc=null,e=Af(o),e=Ii(e),e!==null)if(t=Ki(e),t===null)e=null;else if(n=t.tag,n===13){if(e=tB(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vc=e,null}function CB(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jx()){case pf:return 1;case iB:return 4;case pc:case Nx:return 16;case lB:return 536870912;default:return 16}default:return 16}}var dr=null,Zf=null,Qg=null;function mB(){if(Qg)return Qg;var e,t=Zf,n=t.length,o,r="value"in dr?dr.value:dr.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var l=n-e;for(o=1;o<=l&&t[n-o]===r[i-o];o++);return Qg=r.slice(e,1<o?1-o:void 0)}function Og(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ig(){return!0}function G0(){return!1}function Vn(e){function t(n,o,r,i,l){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ig:G0,this.isPropagationStopped=G0,this}return gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ig)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ig)},persist:function(){},isPersistent:ig}),t}var El={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gf=Vn(El),va=gt({},El,{view:0,detail:0}),Px=Vn(va),sI,aI,as,Su=gt({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==as&&(as&&e.type==="mousemove"?(sI=e.screenX-as.screenX,aI=e.screenY-as.screenY):aI=sI=0,as=e),sI)},movementY:function(e){return"movementY"in e?e.movementY:aI}}),B0=Vn(Su),Qx=gt({},Su,{dataTransfer:0}),Ox=Vn(Qx),_x=gt({},va,{relatedTarget:0}),gI=Vn(_x),qx=gt({},El,{animationName:0,elapsedTime:0,pseudoElement:0}),$x=Vn(qx),e5=gt({},El,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),t5=Vn(e5),n5=gt({},El,{data:0}),S0=Vn(n5),o5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=i5[e])?!!t[e]:!1}function Bf(){return l5}var s5=gt({},va,{key:function(e){if(e.key){var t=o5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Og(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?r5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bf,charCode:function(e){return e.type==="keypress"?Og(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Og(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),a5=Vn(s5),g5=gt({},Su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V0=Vn(g5),c5=gt({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bf}),u5=Vn(c5),d5=gt({},El,{propertyName:0,elapsedTime:0,pseudoElement:0}),I5=Vn(d5),C5=gt({},Su,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),m5=Vn(C5),h5=[9,13,27,32],Sf=Ko&&"CompositionEvent"in window,ws=null;Ko&&"documentMode"in document&&(ws=document.documentMode);var f5=Ko&&"TextEvent"in window&&!ws,hB=Ko&&(!Sf||ws&&8<ws&&11>=ws),R0=String.fromCharCode(32),W0=!1;function fB(e,t){switch(e){case"keyup":return h5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AB(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qi=!1;function A5(e,t){switch(e){case"compositionend":return AB(t);case"keypress":return t.which!==32?null:(W0=!0,R0);case"textInput":return e=t.data,e===R0&&W0?null:e;default:return null}}function p5(e,t){if(qi)return e==="compositionend"||!Sf&&fB(e,t)?(e=mB(),Qg=Zf=dr=null,qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hB&&t.locale!=="ko"?null:t.data;default:return null}}var b5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b5[e.type]:t==="textarea"}function pB(e,t,n,o){O1(o),t=Zc(t,"onChange"),0<t.length&&(n=new Gf("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var ks=null,qs=null;function y5(e){wB(e,0)}function Vu(e){var t=tl(e);if(T1(t))return e}function v5(e,t){if(e==="change")return t}var bB=!1;if(Ko){var cI;if(Ko){var uI="oninput"in document;if(!uI){var k0=document.createElement("div");k0.setAttribute("oninput","return;"),uI=typeof k0.oninput=="function"}cI=uI}else cI=!1;bB=cI&&(!document.documentMode||9<document.documentMode)}function x0(){ks&&(ks.detachEvent("onpropertychange",yB),qs=ks=null)}function yB(e){if(e.propertyName==="value"&&Vu(qs)){var t=[];pB(t,qs,e,Af(e)),eB(y5,t)}}function Z5(e,t,n){e==="focusin"?(x0(),ks=t,qs=n,ks.attachEvent("onpropertychange",yB)):e==="focusout"&&x0()}function G5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vu(qs)}function B5(e,t){if(e==="click")return Vu(t)}function S5(e,t){if(e==="input"||e==="change")return Vu(t)}function V5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var to=typeof Object.is=="function"?Object.is:V5;function $s(e,t){if(to(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!om.call(t,r)||!to(e[r],t[r]))return!1}return!0}function X0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function J0(e,t){var n=X0(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=X0(n)}}function vB(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vB(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ZB(){for(var e=window,t=hc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hc(e.document)}return t}function Vf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function R5(e){var t=ZB(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vB(n.ownerDocument.documentElement,n)){if(o!==null&&Vf(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!e.extend&&i>o&&(r=o,o=i,i=r),r=J0(n,i);var l=J0(n,o);r&&l&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>o?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var W5=Ko&&"documentMode"in document&&11>=document.documentMode,$i=null,vm=null,xs=null,Zm=!1;function N0(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zm||$i==null||$i!==hc(o)||(o=$i,"selectionStart"in o&&Vf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),xs&&$s(xs,o)||(xs=o,o=Zc(vm,"onSelect"),0<o.length&&(t=new Gf("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=$i)))}function lg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var el={animationend:lg("Animation","AnimationEnd"),animationiteration:lg("Animation","AnimationIteration"),animationstart:lg("Animation","AnimationStart"),transitionend:lg("Transition","TransitionEnd")},dI={},GB={};Ko&&(GB=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function Ru(e){if(dI[e])return dI[e];if(!el[e])return e;var t=el[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in GB)return dI[e]=t[n];return e}var BB=Ru("animationend"),SB=Ru("animationiteration"),VB=Ru("animationstart"),RB=Ru("transitionend"),WB=new Map,Y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(e,t){WB.set(e,t),Ei(t,[e])}for(var II=0;II<Y0.length;II++){var CI=Y0[II],w5=CI.toLowerCase(),k5=CI[0].toUpperCase()+CI.slice(1);Hr(w5,"on"+k5)}Hr(BB,"onAnimationEnd");Hr(SB,"onAnimationIteration");Hr(VB,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(RB,"onTransitionEnd");yl("onMouseEnter",["mouseout","mouseover"]);yl("onMouseLeave",["mouseout","mouseover"]);yl("onPointerEnter",["pointerout","pointerover"]);yl("onPointerLeave",["pointerout","pointerover"]);Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function H0(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,wx(o,t,void 0,e),e.currentTarget=null}function wB(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],r=o.event;o=o.listeners;e:{var i=void 0;if(t)for(var l=o.length-1;0<=l;l--){var s=o[l],a=s.instance,c=s.currentTarget;if(s=s.listener,a!==i&&r.isPropagationStopped())break e;H0(r,s,c),i=a}else for(l=0;l<o.length;l++){if(s=o[l],a=s.instance,c=s.currentTarget,s=s.listener,a!==i&&r.isPropagationStopped())break e;H0(r,s,c),i=a}}}if(Ac)throw e=Am,Ac=!1,Am=null,e}function _e(e,t){var n=t[Rm];n===void 0&&(n=t[Rm]=new Set);var o=e+"__bubble";n.has(o)||(kB(t,e,2,!1),n.add(o))}function mI(e,t,n){var o=0;t&&(o|=4),kB(n,e,o,t)}var sg="_reactListening"+Math.random().toString(36).slice(2);function ea(e){if(!e[sg]){e[sg]=!0,F1.forEach(function(n){n!=="selectionchange"&&(x5.has(n)||mI(n,!1,e),mI(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sg]||(t[sg]=!0,mI("selectionchange",!1,t))}}function kB(e,t,n,o){switch(CB(t)){case 1:var r=Dx;break;case 4:r=Ux;break;default:r=vf}n=r.bind(null,t,n,e),r=void 0,!fm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),o?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function hI(e,t,n,o,r){var i=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var l=o.tag;if(l===3||l===4){var s=o.stateNode.containerInfo;if(s===r||s.nodeType===8&&s.parentNode===r)break;if(l===4)for(l=o.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;l=l.return}for(;s!==null;){if(l=Ii(s),l===null)return;if(a=l.tag,a===5||a===6){o=i=l;continue e}s=s.parentNode}}o=o.return}eB(function(){var c=i,u=Af(n),d=[];e:{var I=WB.get(e);if(I!==void 0){var C=Gf,f=e;switch(e){case"keypress":if(Og(n)===0)break e;case"keydown":case"keyup":C=a5;break;case"focusin":f="focus",C=gI;break;case"focusout":f="blur",C=gI;break;case"beforeblur":case"afterblur":C=gI;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=B0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Ox;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=u5;break;case BB:case SB:case VB:C=$x;break;case RB:C=I5;break;case"scroll":C=Px;break;case"wheel":C=m5;break;case"copy":case"cut":case"paste":C=t5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=V0}var A=(t&4)!==0,v=!A&&e==="scroll",h=A?I!==null?I+"Capture":null:I;A=[];for(var p=c,b;p!==null;){b=p;var y=b.stateNode;if(b.tag===5&&y!==null&&(b=y,h!==null&&(y=Ps(p,h),y!=null&&A.push(ta(p,y,b)))),v)break;p=p.return}0<A.length&&(I=new C(I,f,null,n,u),d.push({event:I,listeners:A}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",I&&n!==mm&&(f=n.relatedTarget||n.fromElement)&&(Ii(f)||f[Lo]))break e;if((C||I)&&(I=u.window===u?u:(I=u.ownerDocument)?I.defaultView||I.parentWindow:window,C?(f=n.relatedTarget||n.toElement,C=c,f=f?Ii(f):null,f!==null&&(v=Ki(f),f!==v||f.tag!==5&&f.tag!==6)&&(f=null)):(C=null,f=c),C!==f)){if(A=B0,y="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(A=V0,y="onPointerLeave",h="onPointerEnter",p="pointer"),v=C==null?I:tl(C),b=f==null?I:tl(f),I=new A(y,p+"leave",C,n,u),I.target=v,I.relatedTarget=b,y=null,Ii(u)===c&&(A=new A(h,p+"enter",f,n,u),A.target=b,A.relatedTarget=v,y=A),v=y,C&&f)t:{for(A=C,h=f,p=0,b=A;b;b=Ti(b))p++;for(b=0,y=h;y;y=Ti(y))b++;for(;0<p-b;)A=Ti(A),p--;for(;0<b-p;)h=Ti(h),b--;for(;p--;){if(A===h||h!==null&&A===h.alternate)break t;A=Ti(A),h=Ti(h)}A=null}else A=null;C!==null&&F0(d,I,C,A,!1),f!==null&&v!==null&&F0(d,v,f,A,!0)}}e:{if(I=c?tl(c):window,C=I.nodeName&&I.nodeName.toLowerCase(),C==="select"||C==="input"&&I.type==="file")var Z=v5;else if(w0(I))if(bB)Z=S5;else{Z=G5;var G=Z5}else(C=I.nodeName)&&C.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(Z=B5);if(Z&&(Z=Z(e,c))){pB(d,Z,n,u);break e}G&&G(e,I,c),e==="focusout"&&(G=I._wrapperState)&&G.controlled&&I.type==="number"&&cm(I,"number",I.value)}switch(G=c?tl(c):window,e){case"focusin":(w0(G)||G.contentEditable==="true")&&($i=G,vm=c,xs=null);break;case"focusout":xs=vm=$i=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,N0(d,n,u);break;case"selectionchange":if(W5)break;case"keydown":case"keyup":N0(d,n,u)}var V;if(Sf)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else qi?fB(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(hB&&n.locale!=="ko"&&(qi||S!=="onCompositionStart"?S==="onCompositionEnd"&&qi&&(V=mB()):(dr=u,Zf="value"in dr?dr.value:dr.textContent,qi=!0)),G=Zc(c,S),0<G.length&&(S=new S0(S,e,null,n,u),d.push({event:S,listeners:G}),V?S.data=V:(V=AB(n),V!==null&&(S.data=V)))),(V=f5?A5(e,n):p5(e,n))&&(c=Zc(c,"onBeforeInput"),0<c.length&&(u=new S0("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=V))}wB(d,t)})}function ta(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zc(e,t){for(var n=t+"Capture",o=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ps(e,n),i!=null&&o.unshift(ta(e,i,r)),i=Ps(e,t),i!=null&&o.push(ta(e,i,r))),e=e.return}return o}function Ti(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function F0(e,t,n,o,r){for(var i=t._reactName,l=[];n!==null&&n!==o;){var s=n,a=s.alternate,c=s.stateNode;if(a!==null&&a===o)break;s.tag===5&&c!==null&&(s=c,r?(a=Ps(n,i),a!=null&&l.unshift(ta(n,a,s))):r||(a=Ps(n,i),a!=null&&l.push(ta(n,a,s)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var X5=/\r\n?/g,J5=/\u0000|\uFFFD/g;function E0(e){return(typeof e=="string"?e:""+e).replace(X5,`
`).replace(J5,"")}function ag(e,t,n){if(t=E0(t),E0(e)!==t&&n)throw Error(se(425))}function Gc(){}var Gm=null,Bm=null;function Sm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vm=typeof setTimeout=="function"?setTimeout:void 0,N5=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,Y5=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(e){return K0.resolve(null).then(e).catch(H5)}:Vm;function H5(e){setTimeout(function(){throw e})}function fI(e,t){var n=t,o=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){e.removeChild(r),_s(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);_s(t)}function yr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function L0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Kl=Math.random().toString(36).slice(2),co="__reactFiber$"+Kl,na="__reactProps$"+Kl,Lo="__reactContainer$"+Kl,Rm="__reactEvents$"+Kl,F5="__reactListeners$"+Kl,E5="__reactHandles$"+Kl;function Ii(e){var t=e[co];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Lo]||n[co]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=L0(e);e!==null;){if(n=e[co])return n;e=L0(e)}return t}e=n,n=e.parentNode}return null}function Za(e){return e=e[co]||e[Lo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function tl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function Wu(e){return e[na]||null}var Wm=[],nl=-1;function Fr(e){return{current:e}}function et(e){0>nl||(e.current=Wm[nl],Wm[nl]=null,nl--)}function Pe(e,t){nl++,Wm[nl]=e.current,e.current=t}var wr={},Dt=Fr(wr),ln=Fr(!1),Si=wr;function vl(e,t){var n=e.type.contextTypes;if(!n)return wr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function sn(e){return e=e.childContextTypes,e!=null}function Bc(){et(ln),et(Dt)}function M0(e,t,n){if(Dt.current!==wr)throw Error(se(168));Pe(Dt,t),Pe(ln,n)}function xB(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in t))throw Error(se(108,Zx(e)||"Unknown",r));return gt({},n,o)}function Sc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wr,Si=Dt.current,Pe(Dt,e),Pe(ln,ln.current),!0}function T0(e,t,n){var o=e.stateNode;if(!o)throw Error(se(169));n?(e=xB(e,t,Si),o.__reactInternalMemoizedMergedChildContext=e,et(ln),et(Dt),Pe(Dt,e)):et(ln),Pe(ln,n)}var wo=null,wu=!1,AI=!1;function XB(e){wo===null?wo=[e]:wo.push(e)}function K5(e){wu=!0,XB(e)}function Er(){if(!AI&&wo!==null){AI=!0;var e=0,t=Te;try{var n=wo;for(Te=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}wo=null,wu=!1}catch(r){throw wo!==null&&(wo=wo.slice(e+1)),rB(pf,Er),r}finally{Te=t,AI=!1}}return null}var ol=[],rl=0,Vc=null,Rc=0,Fn=[],En=0,Vi=null,ko=1,xo="";function ti(e,t){ol[rl++]=Rc,ol[rl++]=Vc,Vc=e,Rc=t}function JB(e,t,n){Fn[En++]=ko,Fn[En++]=xo,Fn[En++]=Vi,Vi=e;var o=ko;e=xo;var r=32-$n(o)-1;o&=~(1<<r),n+=1;var i=32-$n(t)+r;if(30<i){var l=r-r%5;i=(o&(1<<l)-1).toString(32),o>>=l,r-=l,ko=1<<32-$n(t)+r|n<<r|o,xo=i+e}else ko=1<<i|n<<r|o,xo=e}function Rf(e){e.return!==null&&(ti(e,1),JB(e,1,0))}function Wf(e){for(;e===Vc;)Vc=ol[--rl],ol[rl]=null,Rc=ol[--rl],ol[rl]=null;for(;e===Vi;)Vi=Fn[--En],Fn[En]=null,xo=Fn[--En],Fn[En]=null,ko=Fn[--En],Fn[En]=null}var yn=null,pn=null,nt=!1,_n=null;function NB(e,t){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function j0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yn=e,pn=yr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yn=e,pn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vi!==null?{id:ko,overflow:xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yn=e,pn=null,!0):!1;default:return!1}}function wm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function km(e){if(nt){var t=pn;if(t){var n=t;if(!j0(e,t)){if(wm(e))throw Error(se(418));t=yr(n.nextSibling);var o=yn;t&&j0(e,t)?NB(o,n):(e.flags=e.flags&-4097|2,nt=!1,yn=e)}}else{if(wm(e))throw Error(se(418));e.flags=e.flags&-4097|2,nt=!1,yn=e}}}function z0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yn=e}function gg(e){if(e!==yn)return!1;if(!nt)return z0(e),nt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sm(e.type,e.memoizedProps)),t&&(t=pn)){if(wm(e))throw YB(),Error(se(418));for(;t;)NB(e,t),t=yr(t.nextSibling)}if(z0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pn=yr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pn=null}}else pn=yn?yr(e.stateNode.nextSibling):null;return!0}function YB(){for(var e=pn;e;)e=yr(e.nextSibling)}function Zl(){pn=yn=null,nt=!1}function wf(e){_n===null?_n=[e]:_n.push(e)}var L5=Do.ReactCurrentBatchConfig;function Qn(e,t){if(e&&e.defaultProps){t=gt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Wc=Fr(null),wc=null,il=null,kf=null;function xf(){kf=il=wc=null}function Xf(e){var t=Wc.current;et(Wc),e._currentValue=t}function xm(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function fl(e,t){wc=e,kf=il=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(on=!0),e.firstContext=null)}function Dn(e){var t=e._currentValue;if(kf!==e)if(e={context:e,memoizedValue:t,next:null},il===null){if(wc===null)throw Error(se(308));il=e,wc.dependencies={lanes:0,firstContext:e}}else il=il.next=e;return t}var Ci=null;function Jf(e){Ci===null?Ci=[e]:Ci.push(e)}function HB(e,t,n,o){var r=t.interleaved;return r===null?(n.next=n,Jf(t)):(n.next=r.next,r.next=n),t.interleaved=n,Mo(e,o)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var or=!1;function Nf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FB(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vr(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Ye&2){var r=o.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),o.pending=t,Mo(e,n)}return r=o.interleaved,r===null?(t.next=t,Jf(o)):(t.next=r.next,r.next=t),o.interleaved=t,Mo(e,n)}function _g(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,bf(e,n)}}function D0(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function kc(e,t,n,o){var r=e.updateQueue;or=!1;var i=r.firstBaseUpdate,l=r.lastBaseUpdate,s=r.shared.pending;if(s!==null){r.shared.pending=null;var a=s,c=a.next;a.next=null,l===null?i=c:l.next=c,l=a;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==l&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=a))}if(i!==null){var d=r.baseState;l=0,u=c=a=null,s=i;do{var I=s.lane,C=s.eventTime;if((o&I)===I){u!==null&&(u=u.next={eventTime:C,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,A=s;switch(I=t,C=n,A.tag){case 1:if(f=A.payload,typeof f=="function"){d=f.call(C,d,I);break e}d=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=A.payload,I=typeof f=="function"?f.call(C,d,I):f,I==null)break e;d=gt({},d,I);break e;case 2:or=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,I=r.effects,I===null?r.effects=[s]:I.push(s))}else C={eventTime:C,lane:I,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=C,a=d):u=u.next=C,l|=I;if(s=s.next,s===null){if(s=r.shared.pending,s===null)break;I=s,s=I.next,I.next=null,r.lastBaseUpdate=I,r.shared.pending=null}}while(1);if(u===null&&(a=d),r.baseState=a,r.firstBaseUpdate=c,r.lastBaseUpdate=u,t=r.shared.interleaved,t!==null){r=t;do l|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);Wi|=l,e.lanes=l,e.memoizedState=d}}function U0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(se(191,r));r.call(o)}}}var EB=new H1.Component().refs;function Xm(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:gt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ku={isMounted:function(e){return(e=e._reactInternals)?Ki(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=_t(),r=Gr(e),i=Jo(o,r);i.payload=t,n!=null&&(i.callback=n),t=vr(e,i,r),t!==null&&(eo(t,e,r,o),_g(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=_t(),r=Gr(e),i=Jo(o,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=vr(e,i,r),t!==null&&(eo(t,e,r,o),_g(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_t(),o=Gr(e),r=Jo(n,o);r.tag=2,t!=null&&(r.callback=t),t=vr(e,r,o),t!==null&&(eo(t,e,o,n),_g(t,e,o))}};function P0(e,t,n,o,r,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,i,l):t.prototype&&t.prototype.isPureReactComponent?!$s(n,o)||!$s(r,i):!0}function KB(e,t,n){var o=!1,r=wr,i=t.contextType;return typeof i=="object"&&i!==null?i=Dn(i):(r=sn(t)?Si:Dt.current,o=t.contextTypes,i=(o=o!=null)?vl(e,r):wr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ku,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function Q0(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&ku.enqueueReplaceState(t,t.state,null)}function Jm(e,t,n,o){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=EB,Nf(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=Dn(i):(i=sn(t)?Si:Dt.current,r.context=vl(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Xm(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&ku.enqueueReplaceState(r,r.state,null),kc(e,n,r,o),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function gs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var o=n.stateNode}if(!o)throw Error(se(147,e));var r=o,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var s=r.refs;s===EB&&(s=r.refs={}),l===null?delete s[i]:s[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function cg(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function O0(e){var t=e._init;return t(e._payload)}function LB(e){function t(h,p){if(e){var b=h.deletions;b===null?(h.deletions=[p],h.flags|=16):b.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function o(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function r(h,p){return h=Br(h,p),h.index=0,h.sibling=null,h}function i(h,p,b){return h.index=b,e?(b=h.alternate,b!==null?(b=b.index,b<p?(h.flags|=2,p):b):(h.flags|=2,p)):(h.flags|=1048576,p)}function l(h){return e&&h.alternate===null&&(h.flags|=2),h}function s(h,p,b,y){return p===null||p.tag!==6?(p=BI(b,h.mode,y),p.return=h,p):(p=r(p,b),p.return=h,p)}function a(h,p,b,y){var Z=b.type;return Z===_i?u(h,p,b.props.children,y,b.key):p!==null&&(p.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===nr&&O0(Z)===p.type)?(y=r(p,b.props),y.ref=gs(h,p,b),y.return=h,y):(y=oc(b.type,b.key,b.props,null,h.mode,y),y.ref=gs(h,p,b),y.return=h,y)}function c(h,p,b,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==b.containerInfo||p.stateNode.implementation!==b.implementation?(p=SI(b,h.mode,y),p.return=h,p):(p=r(p,b.children||[]),p.return=h,p)}function u(h,p,b,y,Z){return p===null||p.tag!==7?(p=Zi(b,h.mode,y,Z),p.return=h,p):(p=r(p,b),p.return=h,p)}function d(h,p,b){if(typeof p=="string"&&p!==""||typeof p=="number")return p=BI(""+p,h.mode,b),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case $a:return b=oc(p.type,p.key,p.props,null,h.mode,b),b.ref=gs(h,null,p),b.return=h,b;case Oi:return p=SI(p,h.mode,b),p.return=h,p;case nr:var y=p._init;return d(h,y(p._payload),b)}if(Zs(p)||rs(p))return p=Zi(p,h.mode,b,null),p.return=h,p;cg(h,p)}return null}function I(h,p,b,y){var Z=p!==null?p.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return Z!==null?null:s(h,p,""+b,y);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $a:return b.key===Z?a(h,p,b,y):null;case Oi:return b.key===Z?c(h,p,b,y):null;case nr:return Z=b._init,I(h,p,Z(b._payload),y)}if(Zs(b)||rs(b))return Z!==null?null:u(h,p,b,y,null);cg(h,b)}return null}function C(h,p,b,y,Z){if(typeof y=="string"&&y!==""||typeof y=="number")return h=h.get(b)||null,s(p,h,""+y,Z);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $a:return h=h.get(y.key===null?b:y.key)||null,a(p,h,y,Z);case Oi:return h=h.get(y.key===null?b:y.key)||null,c(p,h,y,Z);case nr:var G=y._init;return C(h,p,b,G(y._payload),Z)}if(Zs(y)||rs(y))return h=h.get(b)||null,u(p,h,y,Z,null);cg(p,y)}return null}function f(h,p,b,y){for(var Z=null,G=null,V=p,S=p=0,k=null;V!==null&&S<b.length;S++){V.index>S?(k=V,V=null):k=V.sibling;var B=I(h,V,b[S],y);if(B===null){V===null&&(V=k);break}e&&V&&B.alternate===null&&t(h,V),p=i(B,p,S),G===null?Z=B:G.sibling=B,G=B,V=k}if(S===b.length)return n(h,V),nt&&ti(h,S),Z;if(V===null){for(;S<b.length;S++)V=d(h,b[S],y),V!==null&&(p=i(V,p,S),G===null?Z=V:G.sibling=V,G=V);return nt&&ti(h,S),Z}for(V=o(h,V);S<b.length;S++)k=C(V,h,S,b[S],y),k!==null&&(e&&k.alternate!==null&&V.delete(k.key===null?S:k.key),p=i(k,p,S),G===null?Z=k:G.sibling=k,G=k);return e&&V.forEach(function(R){return t(h,R)}),nt&&ti(h,S),Z}function A(h,p,b,y){var Z=rs(b);if(typeof Z!="function")throw Error(se(150));if(b=Z.call(b),b==null)throw Error(se(151));for(var G=Z=null,V=p,S=p=0,k=null,B=b.next();V!==null&&!B.done;S++,B=b.next()){V.index>S?(k=V,V=null):k=V.sibling;var R=I(h,V,B.value,y);if(R===null){V===null&&(V=k);break}e&&V&&R.alternate===null&&t(h,V),p=i(R,p,S),G===null?Z=R:G.sibling=R,G=R,V=k}if(B.done)return n(h,V),nt&&ti(h,S),Z;if(V===null){for(;!B.done;S++,B=b.next())B=d(h,B.value,y),B!==null&&(p=i(B,p,S),G===null?Z=B:G.sibling=B,G=B);return nt&&ti(h,S),Z}for(V=o(h,V);!B.done;S++,B=b.next())B=C(V,h,S,B.value,y),B!==null&&(e&&B.alternate!==null&&V.delete(B.key===null?S:B.key),p=i(B,p,S),G===null?Z=B:G.sibling=B,G=B);return e&&V.forEach(function(W){return t(h,W)}),nt&&ti(h,S),Z}function v(h,p,b,y){if(typeof b=="object"&&b!==null&&b.type===_i&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $a:e:{for(var Z=b.key,G=p;G!==null;){if(G.key===Z){if(Z=b.type,Z===_i){if(G.tag===7){n(h,G.sibling),p=r(G,b.props.children),p.return=h,h=p;break e}}else if(G.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===nr&&O0(Z)===G.type){n(h,G.sibling),p=r(G,b.props),p.ref=gs(h,G,b),p.return=h,h=p;break e}n(h,G);break}else t(h,G);G=G.sibling}b.type===_i?(p=Zi(b.props.children,h.mode,y,b.key),p.return=h,h=p):(y=oc(b.type,b.key,b.props,null,h.mode,y),y.ref=gs(h,p,b),y.return=h,h=y)}return l(h);case Oi:e:{for(G=b.key;p!==null;){if(p.key===G)if(p.tag===4&&p.stateNode.containerInfo===b.containerInfo&&p.stateNode.implementation===b.implementation){n(h,p.sibling),p=r(p,b.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=SI(b,h.mode,y),p.return=h,h=p}return l(h);case nr:return G=b._init,v(h,p,G(b._payload),y)}if(Zs(b))return f(h,p,b,y);if(rs(b))return A(h,p,b,y);cg(h,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,p!==null&&p.tag===6?(n(h,p.sibling),p=r(p,b),p.return=h,h=p):(n(h,p),p=BI(b,h.mode,y),p.return=h,h=p),l(h)):n(h,p)}return v}var Gl=LB(!0),MB=LB(!1),Ga={},fo=Fr(Ga),oa=Fr(Ga),ra=Fr(Ga);function mi(e){if(e===Ga)throw Error(se(174));return e}function Yf(e,t){switch(Pe(ra,t),Pe(oa,e),Pe(fo,Ga),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=dm(t,e)}et(fo),Pe(fo,t)}function Bl(){et(fo),et(oa),et(ra)}function TB(e){mi(ra.current);var t=mi(fo.current),n=dm(t,e.type);t!==n&&(Pe(oa,e),Pe(fo,n))}function Hf(e){oa.current===e&&(et(fo),et(oa))}var rt=Fr(0);function xc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pI=[];function Ff(){for(var e=0;e<pI.length;e++)pI[e]._workInProgressVersionPrimary=null;pI.length=0}var qg=Do.ReactCurrentDispatcher,bI=Do.ReactCurrentBatchConfig,Ri=0,st=null,Bt=null,Wt=null,Xc=!1,Xs=!1,ia=0,M5=0;function Lt(){throw Error(se(321))}function Ef(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!to(e[n],t[n]))return!1;return!0}function Kf(e,t,n,o,r,i){if(Ri=i,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qg.current=e===null||e.memoizedState===null?D5:U5,e=n(o,r),Xs){i=0;do{if(Xs=!1,ia=0,25<=i)throw Error(se(301));i+=1,Wt=Bt=null,t.updateQueue=null,qg.current=P5,e=n(o,r)}while(Xs)}if(qg.current=Jc,t=Bt!==null&&Bt.next!==null,Ri=0,Wt=Bt=st=null,Xc=!1,t)throw Error(se(300));return e}function Lf(){var e=ia!==0;return ia=0,e}function go(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?st.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function Un(){if(Bt===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var t=Wt===null?st.memoizedState:Wt.next;if(t!==null)Wt=t,Bt=e;else{if(e===null)throw Error(se(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Wt===null?st.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function la(e,t){return typeof t=="function"?t(e):t}function yI(e){var t=Un(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var o=Bt,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var l=r.next;r.next=i.next,i.next=l}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var s=l=null,a=null,c=i;do{var u=c.lane;if((Ri&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:e(o,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(s=a=d,l=o):a=a.next=d,st.lanes|=u,Wi|=u}c=c.next}while(c!==null&&c!==i);a===null?l=o:a.next=s,to(o,t.memoizedState)||(on=!0),t.memoizedState=o,t.baseState=l,t.baseQueue=a,n.lastRenderedState=o}if(e=n.interleaved,e!==null){r=e;do i=r.lane,st.lanes|=i,Wi|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vI(e){var t=Un(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var o=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do i=e(i,l.action),l=l.next;while(l!==r);to(i,t.memoizedState)||(on=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,o]}function jB(){}function zB(e,t){var n=st,o=Un(),r=t(),i=!to(o.memoizedState,r);if(i&&(o.memoizedState=r,on=!0),o=o.queue,Mf(PB.bind(null,n,o,e),[e]),o.getSnapshot!==t||i||Wt!==null&&Wt.memoizedState.tag&1){if(n.flags|=2048,sa(9,UB.bind(null,n,o,r,t),void 0,null),wt===null)throw Error(se(349));Ri&30||DB(n,t,r)}return r}function DB(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function UB(e,t,n,o){t.value=n,t.getSnapshot=o,QB(t)&&OB(e)}function PB(e,t,n){return n(function(){QB(t)&&OB(e)})}function QB(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!to(e,n)}catch{return!0}}function OB(e){var t=Mo(e,1);t!==null&&eo(t,e,1,-1)}function _0(e){var t=go();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:e},t.queue=e,e=e.dispatch=z5.bind(null,st,e),[t.memoizedState,e]}function sa(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function _B(){return Un().memoizedState}function $g(e,t,n,o){var r=go();st.flags|=e,r.memoizedState=sa(1|t,n,void 0,o===void 0?null:o)}function xu(e,t,n,o){var r=Un();o=o===void 0?null:o;var i=void 0;if(Bt!==null){var l=Bt.memoizedState;if(i=l.destroy,o!==null&&Ef(o,l.deps)){r.memoizedState=sa(t,n,i,o);return}}st.flags|=e,r.memoizedState=sa(1|t,n,i,o)}function q0(e,t){return $g(8390656,8,e,t)}function Mf(e,t){return xu(2048,8,e,t)}function qB(e,t){return xu(4,2,e,t)}function $B(e,t){return xu(4,4,e,t)}function e2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function t2(e,t,n){return n=n!=null?n.concat([e]):null,xu(4,4,e2.bind(null,t,e),n)}function Tf(){}function n2(e,t){var n=Un();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Ef(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function o2(e,t){var n=Un();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Ef(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function r2(e,t,n){return Ri&21?(to(n,t)||(n=sB(),st.lanes|=n,Wi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,on=!0),e.memoizedState=n)}function T5(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var o=bI.transition;bI.transition={};try{e(!1),t()}finally{Te=n,bI.transition=o}}function i2(){return Un().memoizedState}function j5(e,t,n){var o=Gr(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},l2(e))s2(t,n);else if(n=HB(e,t,n,o),n!==null){var r=_t();eo(n,e,o,r),a2(n,t,o)}}function z5(e,t,n){var o=Gr(e),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(l2(e))s2(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,s=i(l,n);if(r.hasEagerState=!0,r.eagerState=s,to(s,l)){var a=t.interleaved;a===null?(r.next=r,Jf(t)):(r.next=a.next,a.next=r),t.interleaved=r;return}}catch{}finally{}n=HB(e,t,r,o),n!==null&&(r=_t(),eo(n,e,o,r),a2(n,t,o))}}function l2(e){var t=e.alternate;return e===st||t!==null&&t===st}function s2(e,t){Xs=Xc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function a2(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,bf(e,n)}}var Jc={readContext:Dn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},D5={readContext:Dn,useCallback:function(e,t){return go().memoizedState=[e,t===void 0?null:t],e},useContext:Dn,useEffect:q0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$g(4194308,4,e2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $g(4194308,4,e,t)},useInsertionEffect:function(e,t){return $g(4,2,e,t)},useMemo:function(e,t){var n=go();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=go();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=j5.bind(null,st,e),[o.memoizedState,e]},useRef:function(e){var t=go();return e={current:e},t.memoizedState=e},useState:_0,useDebugValue:Tf,useDeferredValue:function(e){return go().memoizedState=e},useTransition:function(){var e=_0(!1),t=e[0];return e=T5.bind(null,e[1]),go().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=st,r=go();if(nt){if(n===void 0)throw Error(se(407));n=n()}else{if(n=t(),wt===null)throw Error(se(349));Ri&30||DB(o,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,q0(PB.bind(null,o,i,e),[e]),o.flags|=2048,sa(9,UB.bind(null,o,i,n,t),void 0,null),n},useId:function(){var e=go(),t=wt.identifierPrefix;if(nt){var n=xo,o=ko;n=(o&~(1<<32-$n(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=ia++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=M5++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U5={readContext:Dn,useCallback:n2,useContext:Dn,useEffect:Mf,useImperativeHandle:t2,useInsertionEffect:qB,useLayoutEffect:$B,useMemo:o2,useReducer:yI,useRef:_B,useState:function(){return yI(la)},useDebugValue:Tf,useDeferredValue:function(e){var t=Un();return r2(t,Bt.memoizedState,e)},useTransition:function(){var e=yI(la)[0],t=Un().memoizedState;return[e,t]},useMutableSource:jB,useSyncExternalStore:zB,useId:i2,unstable_isNewReconciler:!1},P5={readContext:Dn,useCallback:n2,useContext:Dn,useEffect:Mf,useImperativeHandle:t2,useInsertionEffect:qB,useLayoutEffect:$B,useMemo:o2,useReducer:vI,useRef:_B,useState:function(){return vI(la)},useDebugValue:Tf,useDeferredValue:function(e){var t=Un();return Bt===null?t.memoizedState=e:r2(t,Bt.memoizedState,e)},useTransition:function(){var e=vI(la)[0],t=Un().memoizedState;return[e,t]},useMutableSource:jB,useSyncExternalStore:zB,useId:i2,unstable_isNewReconciler:!1};function Sl(e,t){try{var n="",o=t;do n+=vx(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function ZI(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Q5=typeof WeakMap=="function"?WeakMap:Map;function g2(e,t,n){n=Jo(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Yc||(Yc=!0,zm=o),Nm(e,t)},n}function c2(e,t,n){n=Jo(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var r=t.value;n.payload=function(){return o(r)},n.callback=function(){Nm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nm(e,t),typeof o!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function $0(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new Q5;var r=new Set;o.set(t,r)}else r=o.get(t),r===void 0&&(r=new Set,o.set(t,r));r.has(n)||(r.add(n),e=gX.bind(null,e,t,n),t.then(e,e))}function eb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tb(e,t,n,o,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Jo(-1,1),t.tag=2,vr(n,t,1))),n.lanes|=1),e)}var O5=Do.ReactCurrentOwner,on=!1;function Qt(e,t,n,o){t.child=e===null?MB(t,null,n,o):Gl(t,e.child,n,o)}function nb(e,t,n,o,r){n=n.render;var i=t.ref;return fl(t,r),o=Kf(e,t,n,o,i,r),n=Lf(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,To(e,t,r)):(nt&&n&&Rf(t),t.flags|=1,Qt(e,t,o,r),t.child)}function ob(e,t,n,o,r){if(e===null){var i=n.type;return typeof i=="function"&&!_f(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,u2(e,t,i,o,r)):(e=oc(n.type,null,o,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:$s,n(l,o)&&e.ref===t.ref)return To(e,t,r)}return t.flags|=1,e=Br(i,o),e.ref=t.ref,e.return=t,t.child=e}function u2(e,t,n,o,r){if(e!==null){var i=e.memoizedProps;if($s(i,o)&&e.ref===t.ref)if(on=!1,t.pendingProps=o=i,(e.lanes&r)!==0)e.flags&131072&&(on=!0);else return t.lanes=e.lanes,To(e,t,r)}return Ym(e,t,n,o,r)}function d2(e,t,n){var o=t.pendingProps,r=o.children,i=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(sl,mn),mn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pe(sl,mn),mn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,Pe(sl,mn),mn|=o}else i!==null?(o=i.baseLanes|n,t.memoizedState=null):o=n,Pe(sl,mn),mn|=o;return Qt(e,t,r,n),t.child}function I2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ym(e,t,n,o,r){var i=sn(n)?Si:Dt.current;return i=vl(t,i),fl(t,r),n=Kf(e,t,n,o,i,r),o=Lf(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,To(e,t,r)):(nt&&o&&Rf(t),t.flags|=1,Qt(e,t,n,r),t.child)}function rb(e,t,n,o,r){if(sn(n)){var i=!0;Sc(t)}else i=!1;if(fl(t,r),t.stateNode===null)ec(e,t),KB(t,n,o),Jm(t,n,o,r),o=!0;else if(e===null){var l=t.stateNode,s=t.memoizedProps;l.props=s;var a=l.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=sn(n)?Si:Dt.current,c=vl(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==o||a!==c)&&Q0(t,l,o,c),or=!1;var I=t.memoizedState;l.state=I,kc(t,o,l,r),a=t.memoizedState,s!==o||I!==a||ln.current||or?(typeof u=="function"&&(Xm(t,n,u,o),a=t.memoizedState),(s=or||P0(t,n,s,o,I,a,c))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=a),l.props=o,l.state=a,l.context=c,o=s):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{l=t.stateNode,FB(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Qn(t.type,s),l.props=c,d=t.pendingProps,I=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Dn(a):(a=sn(n)?Si:Dt.current,a=vl(t,a));var C=n.getDerivedStateFromProps;(u=typeof C=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==d||I!==a)&&Q0(t,l,o,a),or=!1,I=t.memoizedState,l.state=I,kc(t,o,l,r);var f=t.memoizedState;s!==d||I!==f||ln.current||or?(typeof C=="function"&&(Xm(t,n,C,o),f=t.memoizedState),(c=or||P0(t,n,c,o,I,f,a)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(o,f,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(o,f,a)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=f),l.props=o,l.state=f,l.context=a,o=c):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),o=!1)}return Hm(e,t,n,o,i,r)}function Hm(e,t,n,o,r,i){I2(e,t);var l=(t.flags&128)!==0;if(!o&&!l)return r&&T0(t,n,!1),To(e,t,i);o=t.stateNode,O5.current=t;var s=l&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&l?(t.child=Gl(t,e.child,null,i),t.child=Gl(t,null,s,i)):Qt(e,t,s,i),t.memoizedState=o.state,r&&T0(t,n,!0),t.child}function C2(e){var t=e.stateNode;t.pendingContext?M0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&M0(e,t.context,!1),Yf(e,t.containerInfo)}function ib(e,t,n,o,r){return Zl(),wf(r),t.flags|=256,Qt(e,t,n,o),t.child}var Fm={dehydrated:null,treeContext:null,retryLane:0};function Em(e){return{baseLanes:e,cachePool:null,transitions:null}}function m2(e,t,n){var o=t.pendingProps,r=rt.current,i=!1,l=(t.flags&128)!==0,s;if((s=l)||(s=e!==null&&e.memoizedState===null?!1:(r&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Pe(rt,r&1),e===null)return km(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=o.children,e=o.fallback,i?(o=t.mode,i=t.child,l={mode:"hidden",children:l},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Nu(l,o,0,null),e=Zi(e,o,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Em(n),t.memoizedState=Fm,e):jf(t,l));if(r=e.memoizedState,r!==null&&(s=r.dehydrated,s!==null))return _5(e,t,l,o,s,r,n);if(i){i=o.fallback,l=t.mode,r=e.child,s=r.sibling;var a={mode:"hidden",children:o.children};return!(l&1)&&t.child!==r?(o=t.child,o.childLanes=0,o.pendingProps=a,t.deletions=null):(o=Br(r,a),o.subtreeFlags=r.subtreeFlags&14680064),s!==null?i=Br(s,i):(i=Zi(i,l,n,null),i.flags|=2),i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,l=e.child.memoizedState,l=l===null?Em(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Fm,o}return i=e.child,e=i.sibling,o=Br(i,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function jf(e,t){return t=Nu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ug(e,t,n,o){return o!==null&&wf(o),Gl(t,e.child,null,n),e=jf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _5(e,t,n,o,r,i,l){if(n)return t.flags&256?(t.flags&=-257,o=ZI(Error(se(422))),ug(e,t,l,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=o.fallback,r=t.mode,o=Nu({mode:"visible",children:o.children},r,0,null),i=Zi(i,r,l,null),i.flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,t.mode&1&&Gl(t,e.child,null,l),t.child.memoizedState=Em(l),t.memoizedState=Fm,i);if(!(t.mode&1))return ug(e,t,l,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var s=o.dgst;return o=s,i=Error(se(419)),o=ZI(i,o,void 0),ug(e,t,l,o)}if(s=(l&e.childLanes)!==0,on||s){if(o=wt,o!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|l)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Mo(e,r),eo(o,e,r,-1))}return Of(),o=ZI(Error(se(421))),ug(e,t,l,o)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=cX.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,pn=yr(r.nextSibling),yn=t,nt=!0,_n=null,e!==null&&(Fn[En++]=ko,Fn[En++]=xo,Fn[En++]=Vi,ko=e.id,xo=e.overflow,Vi=t),t=jf(t,o.children),t.flags|=4096,t)}function lb(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),xm(e.return,t,n)}function GI(e,t,n,o,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function h2(e,t,n){var o=t.pendingProps,r=o.revealOrder,i=o.tail;if(Qt(e,t,o.children,n),o=rt.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lb(e,n,t);else if(e.tag===19)lb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Pe(rt,o),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&xc(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),GI(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&xc(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}GI(t,!0,n,null,i);break;case"together":GI(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ec(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function To(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,n=Br(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Br(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function q5(e,t,n){switch(t.tag){case 3:C2(t),Zl();break;case 5:TB(t);break;case 1:sn(t.type)&&Sc(t);break;case 4:Yf(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,r=t.memoizedProps.value;Pe(Wc,o._currentValue),o._currentValue=r;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Pe(rt,rt.current&1),t.flags|=128,null):n&t.child.childLanes?m2(e,t,n):(Pe(rt,rt.current&1),e=To(e,t,n),e!==null?e.sibling:null);Pe(rt,rt.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return h2(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Pe(rt,rt.current),o)break;return null;case 22:case 23:return t.lanes=0,d2(e,t,n)}return To(e,t,n)}var f2,Km,A2,p2;f2=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Km=function(){};A2=function(e,t,n,o){var r=e.memoizedProps;if(r!==o){e=t.stateNode,mi(fo.current);var i=null;switch(n){case"input":r=am(e,r),o=am(e,o),i=[];break;case"select":r=gt({},r,{value:void 0}),o=gt({},o,{value:void 0}),i=[];break;case"textarea":r=um(e,r),o=um(e,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Gc)}Im(n,o);var l;n=null;for(c in r)if(!o.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var s=r[c];for(l in s)s.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ds.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in o){var a=o[c];if(s=r!=null?r[c]:void 0,o.hasOwnProperty(c)&&a!==s&&(a!=null||s!=null))if(c==="style")if(s){for(l in s)!s.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&s[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,s=s?s.__html:void 0,a!=null&&s!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ds.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&_e("scroll",e),i||s===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};p2=function(e,t,n,o){n!==o&&(t.flags|=4)};function cs(e,t){if(!nt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function $5(e,t,n){var o=t.pendingProps;switch(Wf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(t),null;case 1:return sn(t.type)&&Bc(),Mt(t),null;case 3:return o=t.stateNode,Bl(),et(ln),et(Dt),Ff(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(gg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_n!==null&&(Pm(_n),_n=null))),Km(e,t),Mt(t),null;case 5:Hf(t);var r=mi(ra.current);if(n=t.type,e!==null&&t.stateNode!=null)A2(e,t,n,o,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(se(166));return Mt(t),null}if(e=mi(fo.current),gg(t)){o=t.stateNode,n=t.type;var i=t.memoizedProps;switch(o[co]=t,o[na]=i,e=(t.mode&1)!==0,n){case"dialog":_e("cancel",o),_e("close",o);break;case"iframe":case"object":case"embed":_e("load",o);break;case"video":case"audio":for(r=0;r<Bs.length;r++)_e(Bs[r],o);break;case"source":_e("error",o);break;case"img":case"image":case"link":_e("error",o),_e("load",o);break;case"details":_e("toggle",o);break;case"input":m0(o,i),_e("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},_e("invalid",o);break;case"textarea":f0(o,i),_e("invalid",o)}Im(n,i),r=null;for(var l in i)if(i.hasOwnProperty(l)){var s=i[l];l==="children"?typeof s=="string"?o.textContent!==s&&(i.suppressHydrationWarning!==!0&&ag(o.textContent,s,e),r=["children",s]):typeof s=="number"&&o.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&ag(o.textContent,s,e),r=["children",""+s]):Ds.hasOwnProperty(l)&&s!=null&&l==="onScroll"&&_e("scroll",o)}switch(n){case"input":eg(o),h0(o,i,!0);break;case"textarea":eg(o),A0(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=Gc)}o=r,t.updateQueue=o,o!==null&&(t.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=D1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=l.createElement(n,{is:o.is}):(e=l.createElement(n),n==="select"&&(l=e,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):e=l.createElementNS(e,n),e[co]=t,e[na]=o,f2(e,t,!1,!1),t.stateNode=e;e:{switch(l=Cm(n,o),n){case"dialog":_e("cancel",e),_e("close",e),r=o;break;case"iframe":case"object":case"embed":_e("load",e),r=o;break;case"video":case"audio":for(r=0;r<Bs.length;r++)_e(Bs[r],e);r=o;break;case"source":_e("error",e),r=o;break;case"img":case"image":case"link":_e("error",e),_e("load",e),r=o;break;case"details":_e("toggle",e),r=o;break;case"input":m0(e,o),r=am(e,o),_e("invalid",e);break;case"option":r=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},r=gt({},o,{value:void 0}),_e("invalid",e);break;case"textarea":f0(e,o),r=um(e,o),_e("invalid",e);break;default:r=o}Im(n,r),s=r;for(i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="style"?Q1(e,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&U1(e,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Us(e,a):typeof a=="number"&&Us(e,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ds.hasOwnProperty(i)?a!=null&&i==="onScroll"&&_e("scroll",e):a!=null&&Cf(e,i,a,l))}switch(n){case"input":eg(e),h0(e,o,!1);break;case"textarea":eg(e),A0(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Wr(o.value));break;case"select":e.multiple=!!o.multiple,i=o.value,i!=null?Il(e,!!o.multiple,i,!1):o.defaultValue!=null&&Il(e,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Gc)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mt(t),null;case 6:if(e&&t.stateNode!=null)p2(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(se(166));if(n=mi(ra.current),mi(fo.current),gg(t)){if(o=t.stateNode,n=t.memoizedProps,o[co]=t,(i=o.nodeValue!==n)&&(e=yn,e!==null))switch(e.tag){case 3:ag(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ag(o.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[co]=t,t.stateNode=o}return Mt(t),null;case 13:if(et(rt),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nt&&pn!==null&&t.mode&1&&!(t.flags&128))YB(),Zl(),t.flags|=98560,i=!1;else if(i=gg(t),o!==null&&o.dehydrated!==null){if(e===null){if(!i)throw Error(se(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(se(317));i[co]=t}else Zl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mt(t),i=!1}else _n!==null&&(Pm(_n),_n=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||rt.current&1?St===0&&(St=3):Of())),t.updateQueue!==null&&(t.flags|=4),Mt(t),null);case 4:return Bl(),Km(e,t),e===null&&ea(t.stateNode.containerInfo),Mt(t),null;case 10:return Xf(t.type._context),Mt(t),null;case 17:return sn(t.type)&&Bc(),Mt(t),null;case 19:if(et(rt),i=t.memoizedState,i===null)return Mt(t),null;if(o=(t.flags&128)!==0,l=i.rendering,l===null)if(o)cs(i,!1);else{if(St!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=xc(e),l!==null){for(t.flags|=128,cs(i,!1),o=l.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)i=n,e=o,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pe(rt,rt.current&1|2),t.child}e=e.sibling}i.tail!==null&&At()>Vl&&(t.flags|=128,o=!0,cs(i,!1),t.lanes=4194304)}else{if(!o)if(e=xc(l),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),cs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!nt)return Mt(t),null}else 2*At()-i.renderingStartTime>Vl&&n!==1073741824&&(t.flags|=128,o=!0,cs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=At(),t.sibling=null,n=rt.current,Pe(rt,o?n&1|2:n&1),t):(Mt(t),null);case 22:case 23:return Qf(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?mn&1073741824&&(Mt(t),t.subtreeFlags&6&&(t.flags|=8192)):Mt(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function eX(e,t){switch(Wf(t),t.tag){case 1:return sn(t.type)&&Bc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bl(),et(ln),et(Dt),Ff(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hf(t),null;case 13:if(et(rt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));Zl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(rt),null;case 4:return Bl(),null;case 10:return Xf(t.type._context),null;case 22:case 23:return Qf(),null;case 24:return null;default:return null}}var dg=!1,zt=!1,tX=typeof WeakSet=="function"?WeakSet:Set,de=null;function ll(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){It(e,t,o)}else n.current=null}function Lm(e,t,n){try{n()}catch(o){It(e,t,o)}}var sb=!1;function nX(e,t){if(Gm=yc,e=ZB(),Vf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,s=-1,a=-1,c=0,u=0,d=e,I=null;t:for(;;){for(var C;d!==n||r!==0&&d.nodeType!==3||(s=l+r),d!==i||o!==0&&d.nodeType!==3||(a=l+o),d.nodeType===3&&(l+=d.nodeValue.length),(C=d.firstChild)!==null;)I=d,d=C;for(;;){if(d===e)break t;if(I===n&&++c===r&&(s=l),I===i&&++u===o&&(a=l),(C=d.nextSibling)!==null)break;d=I,I=d.parentNode}d=C}n=s===-1||a===-1?null:{start:s,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bm={focusedElem:e,selectionRange:n},yc=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var A=f.memoizedProps,v=f.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?A:Qn(t.type,A),v);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(y){It(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return f=sb,sb=!1,f}function Js(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&Lm(t,n,i)}r=r.next}while(r!==o)}}function Xu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function Mm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function b2(e){var t=e.alternate;t!==null&&(e.alternate=null,b2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[co],delete t[na],delete t[Rm],delete t[F5],delete t[E5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function y2(e){return e.tag===5||e.tag===3||e.tag===4}function ab(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||y2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tm(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Gc));else if(o!==4&&(e=e.child,e!==null))for(Tm(e,t,n),e=e.sibling;e!==null;)Tm(e,t,n),e=e.sibling}function jm(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(jm(e,t,n),e=e.sibling;e!==null;)jm(e,t,n),e=e.sibling}var Nt=null,On=!1;function _o(e,t,n){for(n=n.child;n!==null;)v2(e,t,n),n=n.sibling}function v2(e,t,n){if(ho&&typeof ho.onCommitFiberUnmount=="function")try{ho.onCommitFiberUnmount(Bu,n)}catch{}switch(n.tag){case 5:zt||ll(n,t);case 6:var o=Nt,r=On;Nt=null,_o(e,t,n),Nt=o,On=r,Nt!==null&&(On?(e=Nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(On?(e=Nt,n=n.stateNode,e.nodeType===8?fI(e.parentNode,n):e.nodeType===1&&fI(e,n),_s(e)):fI(Nt,n.stateNode));break;case 4:o=Nt,r=On,Nt=n.stateNode.containerInfo,On=!0,_o(e,t,n),Nt=o,On=r;break;case 0:case 11:case 14:case 15:if(!zt&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Lm(n,t,l),r=r.next}while(r!==o)}_o(e,t,n);break;case 1:if(!zt&&(ll(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(s){It(n,t,s)}_o(e,t,n);break;case 21:_o(e,t,n);break;case 22:n.mode&1?(zt=(o=zt)||n.memoizedState!==null,_o(e,t,n),zt=o):_o(e,t,n);break;default:_o(e,t,n)}}function gb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tX),t.forEach(function(o){var r=uX.bind(null,e,o);n.has(o)||(n.add(o),o.then(r,r))})}}function Pn(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=e,l=t,s=l;e:for(;s!==null;){switch(s.tag){case 5:Nt=s.stateNode,On=!1;break e;case 3:Nt=s.stateNode.containerInfo,On=!0;break e;case 4:Nt=s.stateNode.containerInfo,On=!0;break e}s=s.return}if(Nt===null)throw Error(se(160));v2(i,l,r),Nt=null,On=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(c){It(r,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Z2(t,e),t=t.sibling}function Z2(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pn(t,e),lo(e),o&4){try{Js(3,e,e.return),Xu(3,e)}catch(A){It(e,e.return,A)}try{Js(5,e,e.return)}catch(A){It(e,e.return,A)}}break;case 1:Pn(t,e),lo(e),o&512&&n!==null&&ll(n,n.return);break;case 5:if(Pn(t,e),lo(e),o&512&&n!==null&&ll(n,n.return),e.flags&32){var r=e.stateNode;try{Us(r,"")}catch(A){It(e,e.return,A)}}if(o&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,s=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&j1(r,i),Cm(s,l);var c=Cm(s,i);for(l=0;l<a.length;l+=2){var u=a[l],d=a[l+1];u==="style"?Q1(r,d):u==="dangerouslySetInnerHTML"?U1(r,d):u==="children"?Us(r,d):Cf(r,u,d,c)}switch(s){case"input":gm(r,i);break;case"textarea":z1(r,i);break;case"select":var I=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?Il(r,!!i.multiple,C,!1):I!==!!i.multiple&&(i.defaultValue!=null?Il(r,!!i.multiple,i.defaultValue,!0):Il(r,!!i.multiple,i.multiple?[]:"",!1))}r[na]=i}catch(A){It(e,e.return,A)}}break;case 6:if(Pn(t,e),lo(e),o&4){if(e.stateNode===null)throw Error(se(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(A){It(e,e.return,A)}}break;case 3:if(Pn(t,e),lo(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{_s(t.containerInfo)}catch(A){It(e,e.return,A)}break;case 4:Pn(t,e),lo(e);break;case 13:Pn(t,e),lo(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Uf=At())),o&4&&gb(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(zt=(c=zt)||u,Pn(t,e),zt=c):Pn(t,e),lo(e),o&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(de=e,u=e.child;u!==null;){for(d=de=u;de!==null;){switch(I=de,C=I.child,I.tag){case 0:case 11:case 14:case 15:Js(4,I,I.return);break;case 1:ll(I,I.return);var f=I.stateNode;if(typeof f.componentWillUnmount=="function"){o=I,n=I.return;try{t=o,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(A){It(o,n,A)}}break;case 5:ll(I,I.return);break;case 22:if(I.memoizedState!==null){ub(d);continue}}C!==null?(C.return=I,de=C):ub(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,a=d.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,s.style.display=P1("display",l))}catch(A){It(e,e.return,A)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(A){It(e,e.return,A)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Pn(t,e),lo(e),o&4&&gb(e);break;case 21:break;default:Pn(t,e),lo(e)}}function lo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(y2(n)){var o=n;break e}n=n.return}throw Error(se(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(Us(r,""),o.flags&=-33);var i=ab(e);jm(e,i,r);break;case 3:case 4:var l=o.stateNode.containerInfo,s=ab(e);Tm(e,s,l);break;default:throw Error(se(161))}}catch(a){It(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oX(e,t,n){de=e,G2(e)}function G2(e,t,n){for(var o=(e.mode&1)!==0;de!==null;){var r=de,i=r.child;if(r.tag===22&&o){var l=r.memoizedState!==null||dg;if(!l){var s=r.alternate,a=s!==null&&s.memoizedState!==null||zt;s=dg;var c=zt;if(dg=l,(zt=a)&&!c)for(de=r;de!==null;)l=de,a=l.child,l.tag===22&&l.memoizedState!==null?db(r):a!==null?(a.return=l,de=a):db(r);for(;i!==null;)de=i,G2(i),i=i.sibling;de=r,dg=s,zt=c}cb(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,de=i):cb(e)}}function cb(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:zt||Xu(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!zt)if(n===null)o.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Qn(t.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&U0(t,i,o);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}U0(t,l,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&_s(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}zt||t.flags&512&&Mm(t)}catch(I){It(t,t.return,I)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function ub(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function db(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Xu(4,t)}catch(a){It(t,n,a)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var r=t.return;try{o.componentDidMount()}catch(a){It(t,r,a)}}var i=t.return;try{Mm(t)}catch(a){It(t,i,a)}break;case 5:var l=t.return;try{Mm(t)}catch(a){It(t,l,a)}}}catch(a){It(t,t.return,a)}if(t===e){de=null;break}var s=t.sibling;if(s!==null){s.return=t.return,de=s;break}de=t.return}}var rX=Math.ceil,Nc=Do.ReactCurrentDispatcher,zf=Do.ReactCurrentOwner,jn=Do.ReactCurrentBatchConfig,Ye=0,wt=null,Zt=null,Ft=0,mn=0,sl=Fr(0),St=0,aa=null,Wi=0,Ju=0,Df=0,Ns=null,nn=null,Uf=0,Vl=1/0,Wo=null,Yc=!1,zm=null,Zr=null,Ig=!1,Ir=null,Hc=0,Ys=0,Dm=null,tc=-1,nc=0;function _t(){return Ye&6?At():tc!==-1?tc:tc=At()}function Gr(e){return e.mode&1?Ye&2&&Ft!==0?Ft&-Ft:L5.transition!==null?(nc===0&&(nc=sB()),nc):(e=Te,e!==0||(e=window.event,e=e===void 0?16:CB(e.type)),e):1}function eo(e,t,n,o){if(50<Ys)throw Ys=0,Dm=null,Error(se(185));ya(e,n,o),(!(Ye&2)||e!==wt)&&(e===wt&&(!(Ye&2)&&(Ju|=n),St===4&&gr(e,Ft)),an(e,o),n===1&&Ye===0&&!(t.mode&1)&&(Vl=At()+500,wu&&Er()))}function an(e,t){var n=e.callbackNode;Lx(e,t);var o=bc(e,e===wt?Ft:0);if(o===0)n!==null&&y0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&y0(n),t===1)e.tag===0?K5(Ib.bind(null,e)):XB(Ib.bind(null,e)),Y5(function(){!(Ye&6)&&Er()}),n=null;else{switch(aB(o)){case 1:n=pf;break;case 4:n=iB;break;case 16:n=pc;break;case 536870912:n=lB;break;default:n=pc}n=x2(n,B2.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function B2(e,t){if(tc=-1,nc=0,Ye&6)throw Error(se(327));var n=e.callbackNode;if(Al()&&e.callbackNode!==n)return null;var o=bc(e,e===wt?Ft:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Fc(e,o);else{t=o;var r=Ye;Ye|=2;var i=V2();(wt!==e||Ft!==t)&&(Wo=null,Vl=At()+500,vi(e,t));do try{sX();break}catch(s){S2(e,s)}while(1);xf(),Nc.current=i,Ye=r,Zt!==null?t=0:(wt=null,Ft=0,t=St)}if(t!==0){if(t===2&&(r=pm(e),r!==0&&(o=r,t=Um(e,r))),t===1)throw n=aa,vi(e,0),gr(e,o),an(e,At()),n;if(t===6)gr(e,o);else{if(r=e.current.alternate,!(o&30)&&!iX(r)&&(t=Fc(e,o),t===2&&(i=pm(e),i!==0&&(o=i,t=Um(e,i))),t===1))throw n=aa,vi(e,0),gr(e,o),an(e,At()),n;switch(e.finishedWork=r,e.finishedLanes=o,t){case 0:case 1:throw Error(se(345));case 2:ni(e,nn,Wo);break;case 3:if(gr(e,o),(o&130023424)===o&&(t=Uf+500-At(),10<t)){if(bc(e,0)!==0)break;if(r=e.suspendedLanes,(r&o)!==o){_t(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Vm(ni.bind(null,e,nn,Wo),t);break}ni(e,nn,Wo);break;case 4:if(gr(e,o),(o&4194240)===o)break;for(t=e.eventTimes,r=-1;0<o;){var l=31-$n(o);i=1<<l,l=t[l],l>r&&(r=l),o&=~i}if(o=r,o=At()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*rX(o/1960))-o,10<o){e.timeoutHandle=Vm(ni.bind(null,e,nn,Wo),o);break}ni(e,nn,Wo);break;case 5:ni(e,nn,Wo);break;default:throw Error(se(329))}}}return an(e,At()),e.callbackNode===n?B2.bind(null,e):null}function Um(e,t){var n=Ns;return e.current.memoizedState.isDehydrated&&(vi(e,t).flags|=256),e=Fc(e,t),e!==2&&(t=nn,nn=n,t!==null&&Pm(t)),e}function Pm(e){nn===null?nn=e:nn.push.apply(nn,e)}function iX(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!to(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gr(e,t){for(t&=~Df,t&=~Ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$n(t),o=1<<n;e[n]=-1,t&=~o}}function Ib(e){if(Ye&6)throw Error(se(327));Al();var t=bc(e,0);if(!(t&1))return an(e,At()),null;var n=Fc(e,t);if(e.tag!==0&&n===2){var o=pm(e);o!==0&&(t=o,n=Um(e,o))}if(n===1)throw n=aa,vi(e,0),gr(e,t),an(e,At()),n;if(n===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ni(e,nn,Wo),an(e,At()),null}function Pf(e,t){var n=Ye;Ye|=1;try{return e(t)}finally{Ye=n,Ye===0&&(Vl=At()+500,wu&&Er())}}function wi(e){Ir!==null&&Ir.tag===0&&!(Ye&6)&&Al();var t=Ye;Ye|=1;var n=jn.transition,o=Te;try{if(jn.transition=null,Te=1,e)return e()}finally{Te=o,jn.transition=n,Ye=t,!(Ye&6)&&Er()}}function Qf(){mn=sl.current,et(sl)}function vi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,N5(n)),Zt!==null)for(n=Zt.return;n!==null;){var o=n;switch(Wf(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Bc();break;case 3:Bl(),et(ln),et(Dt),Ff();break;case 5:Hf(o);break;case 4:Bl();break;case 13:et(rt);break;case 19:et(rt);break;case 10:Xf(o.type._context);break;case 22:case 23:Qf()}n=n.return}if(wt=e,Zt=e=Br(e.current,null),Ft=mn=t,St=0,aa=null,Df=Ju=Wi=0,nn=Ns=null,Ci!==null){for(t=0;t<Ci.length;t++)if(n=Ci[t],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var l=i.next;i.next=r,o.next=l}n.pending=o}Ci=null}return e}function S2(e,t){do{var n=Zt;try{if(xf(),qg.current=Jc,Xc){for(var o=st.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Xc=!1}if(Ri=0,Wt=Bt=st=null,Xs=!1,ia=0,zf.current=null,n===null||n.return===null){St=1,aa=t,Zt=null;break}e:{var i=e,l=n.return,s=n,a=t;if(t=Ft,s.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var I=u.alternate;I?(u.updateQueue=I.updateQueue,u.memoizedState=I.memoizedState,u.lanes=I.lanes):(u.updateQueue=null,u.memoizedState=null)}var C=eb(l);if(C!==null){C.flags&=-257,tb(C,l,s,i,t),C.mode&1&&$0(i,c,t),t=C,a=c;var f=t.updateQueue;if(f===null){var A=new Set;A.add(a),t.updateQueue=A}else f.add(a);break e}else{if(!(t&1)){$0(i,c,t),Of();break e}a=Error(se(426))}}else if(nt&&s.mode&1){var v=eb(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),tb(v,l,s,i,t),wf(Sl(a,s));break e}}i=a=Sl(a,s),St!==4&&(St=2),Ns===null?Ns=[i]:Ns.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=g2(i,a,t);D0(i,h);break e;case 1:s=a;var p=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zr===null||!Zr.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=c2(i,s,t);D0(i,y);break e}}i=i.return}while(i!==null)}W2(n)}catch(Z){t=Z,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(1)}function V2(){var e=Nc.current;return Nc.current=Jc,e===null?Jc:e}function Of(){(St===0||St===3||St===2)&&(St=4),wt===null||!(Wi&268435455)&&!(Ju&268435455)||gr(wt,Ft)}function Fc(e,t){var n=Ye;Ye|=2;var o=V2();(wt!==e||Ft!==t)&&(Wo=null,vi(e,t));do try{lX();break}catch(r){S2(e,r)}while(1);if(xf(),Ye=n,Nc.current=o,Zt!==null)throw Error(se(261));return wt=null,Ft=0,St}function lX(){for(;Zt!==null;)R2(Zt)}function sX(){for(;Zt!==null&&!xx();)R2(Zt)}function R2(e){var t=k2(e.alternate,e,mn);e.memoizedProps=e.pendingProps,t===null?W2(e):Zt=t,zf.current=null}function W2(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=eX(n,t),n!==null){n.flags&=32767,Zt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{St=6,Zt=null;return}}else if(n=$5(n,t,mn),n!==null){Zt=n;return}if(t=t.sibling,t!==null){Zt=t;return}Zt=t=e}while(t!==null);St===0&&(St=5)}function ni(e,t,n){var o=Te,r=jn.transition;try{jn.transition=null,Te=1,aX(e,t,n,o)}finally{jn.transition=r,Te=o}return null}function aX(e,t,n,o){do Al();while(Ir!==null);if(Ye&6)throw Error(se(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Mx(e,i),e===wt&&(Zt=wt=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ig||(Ig=!0,x2(pc,function(){return Al(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jn.transition,jn.transition=null;var l=Te;Te=1;var s=Ye;Ye|=4,zf.current=null,nX(e,n),Z2(n,e),R5(Bm),yc=!!Gm,Bm=Gm=null,e.current=n,oX(n),Xx(),Ye=s,Te=l,jn.transition=i}else e.current=n;if(Ig&&(Ig=!1,Ir=e,Hc=r),i=e.pendingLanes,i===0&&(Zr=null),Yx(n.stateNode),an(e,At()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Yc)throw Yc=!1,e=zm,zm=null,e;return Hc&1&&e.tag!==0&&Al(),i=e.pendingLanes,i&1?e===Dm?Ys++:(Ys=0,Dm=e):Ys=0,Er(),null}function Al(){if(Ir!==null){var e=aB(Hc),t=jn.transition,n=Te;try{if(jn.transition=null,Te=16>e?16:e,Ir===null)var o=!1;else{if(e=Ir,Ir=null,Hc=0,Ye&6)throw Error(se(331));var r=Ye;for(Ye|=4,de=e.current;de!==null;){var i=de,l=i.child;if(de.flags&16){var s=i.deletions;if(s!==null){for(var a=0;a<s.length;a++){var c=s[a];for(de=c;de!==null;){var u=de;switch(u.tag){case 0:case 11:case 15:Js(8,u,i)}var d=u.child;if(d!==null)d.return=u,de=d;else for(;de!==null;){u=de;var I=u.sibling,C=u.return;if(b2(u),u===c){de=null;break}if(I!==null){I.return=C,de=I;break}de=C}}}var f=i.alternate;if(f!==null){var A=f.child;if(A!==null){f.child=null;do{var v=A.sibling;A.sibling=null,A=v}while(A!==null)}}de=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,de=l;else e:for(;de!==null;){if(i=de,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Js(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,de=h;break e}de=i.return}}var p=e.current;for(de=p;de!==null;){l=de;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,de=b;else e:for(l=p;de!==null;){if(s=de,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Xu(9,s)}}catch(Z){It(s,s.return,Z)}if(s===l){de=null;break e}var y=s.sibling;if(y!==null){y.return=s.return,de=y;break e}de=s.return}}if(Ye=r,Er(),ho&&typeof ho.onPostCommitFiberRoot=="function")try{ho.onPostCommitFiberRoot(Bu,e)}catch{}o=!0}return o}finally{Te=n,jn.transition=t}}return!1}function Cb(e,t,n){t=Sl(n,t),t=g2(e,t,1),e=vr(e,t,1),t=_t(),e!==null&&(ya(e,1,t),an(e,t))}function It(e,t,n){if(e.tag===3)Cb(e,e,n);else for(;t!==null;){if(t.tag===3){Cb(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Zr===null||!Zr.has(o))){e=Sl(n,e),e=c2(t,e,1),t=vr(t,e,1),e=_t(),t!==null&&(ya(t,1,e),an(t,e));break}}t=t.return}}function gX(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=_t(),e.pingedLanes|=e.suspendedLanes&n,wt===e&&(Ft&n)===n&&(St===4||St===3&&(Ft&130023424)===Ft&&500>At()-Uf?vi(e,0):Df|=n),an(e,t)}function w2(e,t){t===0&&(e.mode&1?(t=og,og<<=1,!(og&130023424)&&(og=4194304)):t=1);var n=_t();e=Mo(e,t),e!==null&&(ya(e,t,n),an(e,n))}function cX(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),w2(e,n)}function uX(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(se(314))}o!==null&&o.delete(t),w2(e,n)}var k2;k2=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ln.current)on=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return on=!1,q5(e,t,n);on=!!(e.flags&131072)}else on=!1,nt&&t.flags&1048576&&JB(t,Rc,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;ec(e,t),e=t.pendingProps;var r=vl(t,Dt.current);fl(t,n),r=Kf(null,t,o,e,r,n);var i=Lf();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,sn(o)?(i=!0,Sc(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Nf(t),r.updater=ku,t.stateNode=r,r._reactInternals=t,Jm(t,o,e,n),t=Hm(null,t,o,!0,i,n)):(t.tag=0,nt&&i&&Rf(t),Qt(null,t,r,n),t=t.child),t;case 16:o=t.elementType;e:{switch(ec(e,t),e=t.pendingProps,r=o._init,o=r(o._payload),t.type=o,r=t.tag=IX(o),e=Qn(o,e),r){case 0:t=Ym(null,t,o,e,n);break e;case 1:t=rb(null,t,o,e,n);break e;case 11:t=nb(null,t,o,e,n);break e;case 14:t=ob(null,t,o,Qn(o.type,e),n);break e}throw Error(se(306,o,""))}return t;case 0:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Qn(o,r),Ym(e,t,o,r,n);case 1:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Qn(o,r),rb(e,t,o,r,n);case 3:e:{if(C2(t),e===null)throw Error(se(387));o=t.pendingProps,i=t.memoizedState,r=i.element,FB(e,t),kc(t,o,null,n);var l=t.memoizedState;if(o=l.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=Sl(Error(se(423)),t),t=ib(e,t,o,n,r);break e}else if(o!==r){r=Sl(Error(se(424)),t),t=ib(e,t,o,n,r);break e}else for(pn=yr(t.stateNode.containerInfo.firstChild),yn=t,nt=!0,_n=null,n=MB(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zl(),o===r){t=To(e,t,n);break e}Qt(e,t,o,n)}t=t.child}return t;case 5:return TB(t),e===null&&km(t),o=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,l=r.children,Sm(o,r)?l=null:i!==null&&Sm(o,i)&&(t.flags|=32),I2(e,t),Qt(e,t,l,n),t.child;case 6:return e===null&&km(t),null;case 13:return m2(e,t,n);case 4:return Yf(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Gl(t,null,o,n):Qt(e,t,o,n),t.child;case 11:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Qn(o,r),nb(e,t,o,r,n);case 7:return Qt(e,t,t.pendingProps,n),t.child;case 8:return Qt(e,t,t.pendingProps.children,n),t.child;case 12:return Qt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,r=t.pendingProps,i=t.memoizedProps,l=r.value,Pe(Wc,o._currentValue),o._currentValue=l,i!==null)if(to(i.value,l)){if(i.children===r.children&&!ln.current){t=To(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){l=i.child;for(var a=s.firstContext;a!==null;){if(a.context===o){if(i.tag===1){a=Jo(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),xm(i.return,n,t),s.lanes|=n;break}a=a.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(se(341));l.lanes|=n,s=l.alternate,s!==null&&(s.lanes|=n),xm(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Qt(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,o=t.pendingProps.children,fl(t,n),r=Dn(r),o=o(r),t.flags|=1,Qt(e,t,o,n),t.child;case 14:return o=t.type,r=Qn(o,t.pendingProps),r=Qn(o.type,r),ob(e,t,o,r,n);case 15:return u2(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Qn(o,r),ec(e,t),t.tag=1,sn(o)?(e=!0,Sc(t)):e=!1,fl(t,n),KB(t,o,r),Jm(t,o,r,n),Hm(null,t,o,!0,e,n);case 19:return h2(e,t,n);case 22:return d2(e,t,n)}throw Error(se(156,t.tag))};function x2(e,t){return rB(e,t)}function dX(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(e,t,n,o){return new dX(e,t,n,o)}function _f(e){return e=e.prototype,!(!e||!e.isReactComponent)}function IX(e){if(typeof e=="function")return _f(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hf)return 11;if(e===ff)return 14}return 2}function Br(e,t){var n=e.alternate;return n===null?(n=Mn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function oc(e,t,n,o,r,i){var l=2;if(o=e,typeof e=="function")_f(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case _i:return Zi(n.children,r,i,t);case mf:l=8,r|=8;break;case rm:return e=Mn(12,n,t,r|2),e.elementType=rm,e.lanes=i,e;case im:return e=Mn(13,n,t,r),e.elementType=im,e.lanes=i,e;case lm:return e=Mn(19,n,t,r),e.elementType=lm,e.lanes=i,e;case L1:return Nu(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E1:l=10;break e;case K1:l=9;break e;case hf:l=11;break e;case ff:l=14;break e;case nr:l=16,o=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=Mn(l,n,t,r),t.elementType=e,t.type=o,t.lanes=i,t}function Zi(e,t,n,o){return e=Mn(7,e,o,t),e.lanes=n,e}function Nu(e,t,n,o){return e=Mn(22,e,o,t),e.elementType=L1,e.lanes=n,e.stateNode={isHidden:!1},e}function BI(e,t,n){return e=Mn(6,e,null,t),e.lanes=n,e}function SI(e,t,n){return t=Mn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function CX(e,t,n,o,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lI(0),this.expirationTimes=lI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lI(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function qf(e,t,n,o,r,i,l,s,a){return e=new CX(e,t,n,s,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Mn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nf(i),e}function mX(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oi,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function X2(e){if(!e)return wr;e=e._reactInternals;e:{if(Ki(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(sn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var n=e.type;if(sn(n))return xB(e,n,t)}return t}function J2(e,t,n,o,r,i,l,s,a){return e=qf(n,o,!0,e,r,i,l,s,a),e.context=X2(null),n=e.current,o=_t(),r=Gr(n),i=Jo(o,r),i.callback=t??null,vr(n,i,r),e.current.lanes=r,ya(e,r,o),an(e,o),e}function Yu(e,t,n,o){var r=t.current,i=_t(),l=Gr(r);return n=X2(n),t.context===null?t.context=n:t.pendingContext=n,t=Jo(i,l),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=vr(r,t,l),e!==null&&(eo(e,r,l,i),_g(e,r,l)),l}function Ec(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $f(e,t){mb(e,t),(e=e.alternate)&&mb(e,t)}function hX(){return null}var N2=typeof reportError=="function"?reportError:function(e){console.error(e)};function eA(e){this._internalRoot=e}Hu.prototype.render=eA.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));Yu(e,t,null,null)};Hu.prototype.unmount=eA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wi(function(){Yu(null,e,null,null)}),t[Lo]=null}};function Hu(e){this._internalRoot=e}Hu.prototype.unstable_scheduleHydration=function(e){if(e){var t=uB();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ar.length&&t!==0&&t<ar[n].priority;n++);ar.splice(n,0,e),n===0&&IB(e)}};function tA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hb(){}function fX(e,t,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var c=Ec(l);i.call(c)}}var l=J2(t,o,e,0,null,!1,!1,"",hb);return e._reactRootContainer=l,e[Lo]=l.current,ea(e.nodeType===8?e.parentNode:e),wi(),l}for(;r=e.lastChild;)e.removeChild(r);if(typeof o=="function"){var s=o;o=function(){var c=Ec(a);s.call(c)}}var a=qf(e,0,!1,null,null,!1,!1,"",hb);return e._reactRootContainer=a,e[Lo]=a.current,ea(e.nodeType===8?e.parentNode:e),wi(function(){Yu(t,a,n,o)}),a}function Eu(e,t,n,o,r){var i=n._reactRootContainer;if(i){var l=i;if(typeof r=="function"){var s=r;r=function(){var a=Ec(l);s.call(a)}}Yu(t,l,e,r)}else l=fX(n,t,e,r,o);return Ec(l)}gB=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Gs(t.pendingLanes);n!==0&&(bf(t,n|1),an(t,At()),!(Ye&6)&&(Vl=At()+500,Er()))}break;case 13:wi(function(){var o=Mo(e,1);if(o!==null){var r=_t();eo(o,e,1,r)}}),$f(e,1)}};yf=function(e){if(e.tag===13){var t=Mo(e,134217728);if(t!==null){var n=_t();eo(t,e,134217728,n)}$f(e,134217728)}};cB=function(e){if(e.tag===13){var t=Gr(e),n=Mo(e,t);if(n!==null){var o=_t();eo(n,e,t,o)}$f(e,t)}};uB=function(){return Te};dB=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};hm=function(e,t,n){switch(t){case"input":if(gm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var r=Wu(o);if(!r)throw Error(se(90));T1(o),gm(o,r)}}}break;case"textarea":z1(e,n);break;case"select":t=n.value,t!=null&&Il(e,!!n.multiple,t,!1)}};q1=Pf;$1=wi;var AX={usingClientEntryPoint:!1,Events:[Za,tl,Wu,O1,_1,Pf]},us={findFiberByHostInstance:Ii,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},pX={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Do.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nB(e),e===null?null:e.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||hX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cg.isDisabled&&Cg.supportsFiber)try{Bu=Cg.inject(pX),ho=Cg}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AX;Sn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tA(t))throw Error(se(200));return mX(e,t,null,n)};Sn.createRoot=function(e,t){if(!tA(e))throw Error(se(299));var n=!1,o="",r=N2;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=qf(e,1,!1,null,null,n,!1,o,r),e[Lo]=t.current,ea(e.nodeType===8?e.parentNode:e),new eA(t)};Sn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=nB(t),e=e===null?null:e.stateNode,e};Sn.flushSync=function(e){return wi(e)};Sn.hydrate=function(e,t,n){if(!Fu(t))throw Error(se(200));return Eu(null,e,t,!0,n)};Sn.hydrateRoot=function(e,t,n){if(!tA(e))throw Error(se(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",l=N2;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=J2(t,null,e,1,n??null,r,!1,i,l),e[Lo]=t.current,ea(e),o)for(e=0;e<o.length;e++)n=o[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Hu(t)};Sn.render=function(e,t,n){if(!Fu(t))throw Error(se(200));return Eu(null,e,t,!1,n)};Sn.unmountComponentAtNode=function(e){if(!Fu(e))throw Error(se(40));return e._reactRootContainer?(wi(function(){Eu(null,null,e,!1,function(){e._reactRootContainer=null,e[Lo]=null})}),!0):!1};Sn.unstable_batchedUpdates=Pf;Sn.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!Fu(n))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return Eu(e,t,n,!1,o)};Sn.version="18.2.0-next-9e3b772b8-20220608";function Y2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y2)}catch(e){console.error(e)}}Y2(),J1.exports=Sn;var Kt=J1.exports;const hi=ro(Kt);var fb=Kt;nm.createRoot=fb.createRoot,nm.hydrateRoot=fb.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ga(){return ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ga.apply(this,arguments)}var Cr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cr||(Cr={}));const Ab="popstate";function bX(e){e===void 0&&(e={});function t(o,r){let{pathname:i,search:l,hash:s}=o.location;return Qm("",{pathname:i,search:l,hash:s},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(o,r){return typeof r=="string"?r:Kc(r)}return vX(t,n,null,e)}function at(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nA(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yX(){return Math.random().toString(36).substr(2,8)}function pb(e,t){return{usr:e.state,key:e.key,idx:t}}function Qm(e,t,n,o){return n===void 0&&(n=null),ga({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ll(t):t,{state:n,key:t&&t.key||o||yX()})}function Kc(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Ll(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function vX(e,t,n,o){o===void 0&&(o={});let{window:r=document.defaultView,v5Compat:i=!1}=o,l=r.history,s=Cr.Pop,a=null,c=u();c==null&&(c=0,l.replaceState(ga({},l.state,{idx:c}),""));function u(){return(l.state||{idx:null}).idx}function d(){s=Cr.Pop;let v=u(),h=v==null?null:v-c;c=v,a&&a({action:s,location:A.location,delta:h})}function I(v,h){s=Cr.Push;let p=Qm(A.location,v,h);n&&n(p,v),c=u()+1;let b=pb(p,c),y=A.createHref(p);try{l.pushState(b,"",y)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;r.location.assign(y)}i&&a&&a({action:s,location:A.location,delta:1})}function C(v,h){s=Cr.Replace;let p=Qm(A.location,v,h);n&&n(p,v),c=u();let b=pb(p,c),y=A.createHref(p);l.replaceState(b,"",y),i&&a&&a({action:s,location:A.location,delta:0})}function f(v){let h=r.location.origin!=="null"?r.location.origin:r.location.href,p=typeof v=="string"?v:Kc(v);return at(h,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,h)}let A={get action(){return s},get location(){return e(r,l)},listen(v){if(a)throw new Error("A history only accepts one active listener");return r.addEventListener(Ab,d),a=v,()=>{r.removeEventListener(Ab,d),a=null}},createHref(v){return t(r,v)},createURL:f,encodeLocation(v){let h=f(v);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:I,replace:C,go(v){return l.go(v)}};return A}var bb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bb||(bb={}));function ZX(e,t,n){n===void 0&&(n="/");let o=typeof t=="string"?Ll(t):t,r=Rl(o.pathname||"/",n);if(r==null)return null;let i=H2(e);GX(i);let l=null;for(let s=0;l==null&&s<i.length;++s)l=XX(i[s],NX(r));return l}function H2(e,t,n,o){t===void 0&&(t=[]),n===void 0&&(n=[]),o===void 0&&(o="");let r=(i,l,s)=>{let a={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};a.relativePath.startsWith("/")&&(at(a.relativePath.startsWith(o),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(o.length));let c=Sr([o,a.relativePath]),u=n.concat(a);i.children&&i.children.length>0&&(at(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),H2(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:kX(c,i.index),routesMeta:u})};return e.forEach((i,l)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))r(i,l);else for(let a of F2(i.path))r(i,l,a)}),t}function F2(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(o.length===0)return r?[i,""]:[i];let l=F2(o.join("/")),s=[];return s.push(...l.map(a=>a===""?i:[i,a].join("/"))),r&&s.push(...l),s.map(a=>e.startsWith("/")&&a===""?"/":a)}function GX(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:xX(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const BX=/^:[\w-]+$/,SX=3,VX=2,RX=1,WX=10,wX=-2,yb=e=>e==="*";function kX(e,t){let n=e.split("/"),o=n.length;return n.some(yb)&&(o+=wX),t&&(o+=VX),n.filter(r=>!yb(r)).reduce((r,i)=>r+(BX.test(i)?SX:i===""?RX:WX),o)}function xX(e,t){return e.length===t.length&&e.slice(0,-1).every((o,r)=>o===t[r])?e[e.length-1]-t[t.length-1]:0}function XX(e,t){let{routesMeta:n}=e,o={},r="/",i=[];for(let l=0;l<n.length;++l){let s=n[l],a=l===n.length-1,c=r==="/"?t:t.slice(r.length)||"/",u=Om({path:s.relativePath,caseSensitive:s.caseSensitive,end:a},c);if(!u)return null;Object.assign(o,u.params);let d=s.route;i.push({params:o,pathname:Sr([r,u.pathname]),pathnameBase:KX(Sr([r,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(r=Sr([r,u.pathnameBase]))}return i}function Om(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=JX(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],l=i.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:o.reduce((c,u,d)=>{let{paramName:I,isOptional:C}=u;if(I==="*"){let A=s[d]||"";l=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const f=s[d];return C&&!f?c[I]=void 0:c[I]=YX(f||"",I),c},{}),pathname:i,pathnameBase:l,pattern:e}}function JX(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),nA(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,s,a)=>(o.push({paramName:s,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),o]}function NX(e){try{return decodeURI(e)}catch(t){return nA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function YX(e,t){try{return decodeURIComponent(e)}catch(n){return nA(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Rl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}function HX(e,t){t===void 0&&(t="/");let{pathname:n,search:o="",hash:r=""}=typeof e=="string"?Ll(e):e;return{pathname:n?n.startsWith("/")?n:FX(n,t):t,search:LX(o),hash:MX(r)}}function FX(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function VI(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EX(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function oA(e,t){let n=EX(e);return t?n.map((o,r)=>r===e.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function rA(e,t,n,o){o===void 0&&(o=!1);let r;typeof e=="string"?r=Ll(e):(r=ga({},e),at(!r.pathname||!r.pathname.includes("?"),VI("?","pathname","search",r)),at(!r.pathname||!r.pathname.includes("#"),VI("#","pathname","hash",r)),at(!r.search||!r.search.includes("#"),VI("#","search","hash",r)));let i=e===""||r.pathname==="",l=i?"/":r.pathname,s;if(l==null)s=n;else{let d=t.length-1;if(!o&&l.startsWith("..")){let I=l.split("/");for(;I[0]==="..";)I.shift(),d-=1;r.pathname=I.join("/")}s=d>=0?t[d]:"/"}let a=HX(r,s),c=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||u)&&(a.pathname+="/"),a}const Sr=e=>e.join("/").replace(/\/\/+/g,"/"),KX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function TX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const E2=["post","put","patch","delete"];new Set(E2);const jX=["get",...E2];new Set(jX);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ca(){return ca=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ca.apply(this,arguments)}const Ku=m.createContext(null),K2=m.createContext(null),Uo=m.createContext(null),Lu=m.createContext(null),Kr=m.createContext({outlet:null,matches:[],isDataRoute:!1}),L2=m.createContext(null);function zX(e,t){let{relative:n}=t===void 0?{}:t;Ml()||at(!1);let{basename:o,navigator:r}=m.useContext(Uo),{hash:i,pathname:l,search:s}=Mu(e,{relative:n}),a=l;return o!=="/"&&(a=l==="/"?o:Sr([o,l])),r.createHref({pathname:a,search:s,hash:i})}function Ml(){return m.useContext(Lu)!=null}function qt(){return Ml()||at(!1),m.useContext(Lu).location}function M2(e){m.useContext(Uo).static||m.useLayoutEffect(e)}function ut(){let{isDataRoute:e}=m.useContext(Kr);return e?rJ():DX()}function DX(){Ml()||at(!1);let e=m.useContext(Ku),{basename:t,future:n,navigator:o}=m.useContext(Uo),{matches:r}=m.useContext(Kr),{pathname:i}=qt(),l=JSON.stringify(oA(r,n.v7_relativeSplatPath)),s=m.useRef(!1);return M2(()=>{s.current=!0}),m.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){o.go(c);return}let d=rA(c,JSON.parse(l),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Sr([t,d.pathname])),(u.replace?o.replace:o.push)(d,u.state,u)},[t,o,l,i,e])}function Mu(e,t){let{relative:n}=t===void 0?{}:t,{future:o}=m.useContext(Uo),{matches:r}=m.useContext(Kr),{pathname:i}=qt(),l=JSON.stringify(oA(r,o.v7_relativeSplatPath));return m.useMemo(()=>rA(e,JSON.parse(l),i,n==="path"),[e,l,i,n])}function UX(e,t){return PX(e,t)}function PX(e,t,n,o){Ml()||at(!1);let{navigator:r}=m.useContext(Uo),{matches:i}=m.useContext(Kr),l=i[i.length-1],s=l?l.params:{};l&&l.pathname;let a=l?l.pathnameBase:"/";l&&l.route;let c=qt(),u;if(t){var d;let v=typeof t=="string"?Ll(t):t;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||at(!1),u=v}else u=c;let I=u.pathname||"/",C=a==="/"?I:I.slice(a.length)||"/",f=ZX(e,{pathname:C}),A=$X(f&&f.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Sr([a,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:Sr([a,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,o);return t&&A?m.createElement(Lu.Provider,{value:{location:ca({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Cr.Pop}},A):A}function QX(){let e=oJ(),t=TX(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:r},n):null,i)}const OX=m.createElement(QX,null);class _X extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?m.createElement(Kr.Provider,{value:this.props.routeContext},m.createElement(L2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qX(e){let{routeContext:t,match:n,children:o}=e,r=m.useContext(Ku);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Kr.Provider,{value:t},o)}function $X(e,t,n,o){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),o===void 0&&(o=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let l=e,s=(r=n)==null?void 0:r.errors;if(s!=null){let u=l.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id]));u>=0||at(!1),l=l.slice(0,Math.min(l.length,u+1))}let a=!1,c=-1;if(n&&o&&o.v7_partialHydration)for(let u=0;u<l.length;u++){let d=l[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:I,errors:C}=n,f=d.route.loader&&I[d.route.id]===void 0&&(!C||C[d.route.id]===void 0);if(d.route.lazy||f){a=!0,c>=0?l=l.slice(0,c+1):l=[l[0]];break}}}return l.reduceRight((u,d,I)=>{let C,f=!1,A=null,v=null;n&&(C=s&&d.route.id?s[d.route.id]:void 0,A=d.route.errorElement||OX,a&&(c<0&&I===0?(iJ("route-fallback",!1),f=!0,v=null):c===I&&(f=!0,v=d.route.hydrateFallbackElement||null)));let h=t.concat(l.slice(0,I+1)),p=()=>{let b;return C?b=A:f?b=v:d.route.Component?b=m.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,m.createElement(qX,{match:d,routeContext:{outlet:u,matches:h,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||I===0)?m.createElement(_X,{location:n.location,revalidation:n.revalidation,component:A,error:C,children:p(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):p()},null)}var T2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(T2||{}),Lc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Lc||{});function eJ(e){let t=m.useContext(Ku);return t||at(!1),t}function tJ(e){let t=m.useContext(K2);return t||at(!1),t}function nJ(e){let t=m.useContext(Kr);return t||at(!1),t}function j2(e){let t=nJ(),n=t.matches[t.matches.length-1];return n.route.id||at(!1),n.route.id}function oJ(){var e;let t=m.useContext(L2),n=tJ(Lc.UseRouteError),o=j2(Lc.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[o]}function rJ(){let{router:e}=eJ(T2.UseNavigateStable),t=j2(Lc.UseNavigateStable),n=m.useRef(!1);return M2(()=>{n.current=!0}),m.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,ca({fromRouteId:t},i)))},[e,t])}const vb={};function iJ(e,t,n){!t&&!vb[e]&&(vb[e]=!0)}function iA(e){let{to:t,replace:n,state:o,relative:r}=e;Ml()||at(!1);let{future:i,static:l}=m.useContext(Uo),{matches:s}=m.useContext(Kr),{pathname:a}=qt(),c=ut(),u=rA(t,oA(s,i.v7_relativeSplatPath),a,r==="path"),d=JSON.stringify(u);return m.useEffect(()=>c(JSON.parse(d),{replace:n,state:o,relative:r}),[c,d,r,n,o]),null}function ze(e){at(!1)}function lJ(e){let{basename:t="/",children:n=null,location:o,navigationType:r=Cr.Pop,navigator:i,static:l=!1,future:s}=e;Ml()&&at(!1);let a=t.replace(/^\/*/,"/"),c=m.useMemo(()=>({basename:a,navigator:i,static:l,future:ca({v7_relativeSplatPath:!1},s)}),[a,s,i,l]);typeof o=="string"&&(o=Ll(o));let{pathname:u="/",search:d="",hash:I="",state:C=null,key:f="default"}=o,A=m.useMemo(()=>{let v=Rl(u,a);return v==null?null:{location:{pathname:v,search:d,hash:I,state:C,key:f},navigationType:r}},[a,u,d,I,C,f,r]);return A==null?null:m.createElement(Uo.Provider,{value:c},m.createElement(Lu.Provider,{children:n,value:A}))}function sJ(e){let{children:t,location:n}=e;return UX(_m(t),n)}new Promise(()=>{});function _m(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(o,r)=>{if(!m.isValidElement(o))return;let i=[...t,r];if(o.type===m.Fragment){n.push.apply(n,_m(o.props.children,i));return}o.type!==ze&&at(!1),!o.props.index||!o.props.children||at(!1);let l={id:o.props.id||i.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(l.children=_m(o.props.children,i)),n.push(l)}),n}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mc(){return Mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mc.apply(this,arguments)}function z2(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,i;for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function aJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gJ(e,t){return e.button===0&&(!t||t==="_self")&&!aJ(e)}const cJ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],uJ=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],dJ=m.createContext({isTransitioning:!1}),IJ="startTransition",Zb=mc[IJ];function CJ(e){let{basename:t,children:n,future:o,window:r}=e,i=m.useRef();i.current==null&&(i.current=bX({window:r,v5Compat:!0}));let l=i.current,[s,a]=m.useState({action:l.action,location:l.location}),{v7_startTransition:c}=o||{},u=m.useCallback(d=>{c&&Zb?Zb(()=>a(d)):a(d)},[a,c]);return m.useLayoutEffect(()=>l.listen(u),[l,u]),m.createElement(lJ,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:l,future:o})}const mJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qm=m.forwardRef(function(t,n){let{onClick:o,relative:r,reloadDocument:i,replace:l,state:s,target:a,to:c,preventScrollReset:u,unstable_viewTransition:d}=t,I=z2(t,cJ),{basename:C}=m.useContext(Uo),f,A=!1;if(typeof c=="string"&&hJ.test(c)&&(f=c,mJ))try{let b=new URL(window.location.href),y=c.startsWith("//")?new URL(b.protocol+c):new URL(c),Z=Rl(y.pathname,C);y.origin===b.origin&&Z!=null?c=Z+y.search+y.hash:A=!0}catch{}let v=zX(c,{relative:r}),h=AJ(c,{replace:l,state:s,target:a,preventScrollReset:u,relative:r,unstable_viewTransition:d});function p(b){o&&o(b),b.defaultPrevented||h(b)}return m.createElement("a",Mc({},I,{href:f||v,onClick:A||i?o:p,ref:n,target:a}))}),ai=m.forwardRef(function(t,n){let{"aria-current":o="page",caseSensitive:r=!1,className:i="",end:l=!1,style:s,to:a,unstable_viewTransition:c,children:u}=t,d=z2(t,uJ),I=Mu(a,{relative:d.relative}),C=qt(),f=m.useContext(K2),{navigator:A,basename:v}=m.useContext(Uo),h=f!=null&&pJ(I)&&c===!0,p=A.encodeLocation?A.encodeLocation(I).pathname:I.pathname,b=C.pathname,y=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(b=b.toLowerCase(),y=y?y.toLowerCase():null,p=p.toLowerCase()),y&&v&&(y=Rl(y,v)||y);const Z=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let G=b===p||!l&&b.startsWith(p)&&b.charAt(Z)==="/",V=y!=null&&(y===p||!l&&y.startsWith(p)&&y.charAt(p.length)==="/"),S={isActive:G,isPending:V,isTransitioning:h},k=G?o:void 0,B;typeof i=="function"?B=i(S):B=[i,G?"active":null,V?"pending":null,h?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(S):s;return m.createElement(qm,Mc({},d,{"aria-current":k,className:B,ref:n,style:R,to:a,unstable_viewTransition:c}),typeof u=="function"?u(S):u)});var $m;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($m||($m={}));var Gb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Gb||(Gb={}));function fJ(e){let t=m.useContext(Ku);return t||at(!1),t}function AJ(e,t){let{target:n,replace:o,state:r,preventScrollReset:i,relative:l,unstable_viewTransition:s}=t===void 0?{}:t,a=ut(),c=qt(),u=Mu(e,{relative:l});return m.useCallback(d=>{if(gJ(d,n)){d.preventDefault();let I=o!==void 0?o:Kc(c)===Kc(u);a(e,{replace:I,state:r,preventScrollReset:i,relative:l,unstable_viewTransition:s})}},[c,a,u,o,r,n,e,i,l,s])}function pJ(e,t){t===void 0&&(t={});let n=m.useContext(dJ);n==null&&at(!1);let{basename:o}=fJ($m.useViewTransitionState),r=Mu(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Rl(n.currentLocation.pathname,o)||n.currentLocation.pathname,l=Rl(n.nextLocation.pathname,o)||n.nextLocation.pathname;return Om(r.pathname,l)!=null||Om(r.pathname,i)!=null}const D2="/assets/KnowMe2-1b6ccfbb.svg";function Tu(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,i;for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Wl.apply(this,arguments)}function eh(e,t){return eh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,r){return o.__proto__=r,o},eh(e,t)}function U2(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,eh(e,t)}function RI(e,t,n){if(n||arguments.length===2)for(var o=0,r=t.length,i;o<r;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Bb=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,bJ=/\\([\u000b\u0020-\u00ff])/g,yJ=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,vJ=ZJ;function ZJ(e){if(!e)throw new TypeError("argument string is required");var t=typeof e=="object"?GJ(e):e;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var n=t.indexOf(";"),o=n!==-1?t.slice(0,n).trim():t.trim();if(!yJ.test(o))throw new TypeError("invalid media type");var r=new BJ(o.toLowerCase());if(n!==-1){var i,l,s;for(Bb.lastIndex=n;l=Bb.exec(t);){if(l.index!==n)throw new TypeError("invalid parameter format");n+=l[0].length,i=l[1].toLowerCase(),s=l[2],s.charCodeAt(0)===34&&(s=s.slice(1,-1),s.indexOf("\\")!==-1&&(s=s.replace(bJ,"$1"))),r.parameters[i]=s}if(n!==t.length)throw new TypeError("invalid parameter format")}return r}function GJ(e){var t;if(typeof e.getHeader=="function"?t=e.getHeader("content-type"):typeof e.headers=="object"&&(t=e.headers&&e.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function BJ(e){this.parameters=Object.create(null),this.type=e}var Qi=new Map,P2=function(t){return t.cloneNode(!0)},Sb=function(){return window.location.protocol==="file:"},Q2=function(t,n,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){try{if(!/\.svg/i.test(t)&&r.readyState===2){var i=r.getResponseHeader("Content-Type");if(!i)throw new Error("Content type not found");var l=vJ(i).type;if(!(l==="image/svg+xml"||l==="text/plain"))throw new Error("Invalid content type: ".concat(l))}if(r.readyState===4){if(r.status===404||r.responseXML===null)throw new Error(Sb()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+t);if(r.status===200||Sb()&&r.status===0)o(null,r);else throw new Error("There was a problem injecting the SVG: "+r.status+" "+r.statusText)}}catch(s){if(r.abort(),s instanceof Error)o(s,r);else throw s}},r.open("GET",t),r.withCredentials=n,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.send()},cr={},Vb=function(t,n){cr[t]=cr[t]||[],cr[t].push(n)},SJ=function(t){for(var n=function(l,s){setTimeout(function(){if(Array.isArray(cr[t])){var a=Qi.get(t),c=cr[t][l];a instanceof SVGSVGElement&&c(null,P2(a)),a instanceof Error&&c(a),l===cr[t].length-1&&delete cr[t]}},0)},o=0,r=cr[t].length;o<r;o++)n(o)},VJ=function(t,n,o){if(Qi.has(t)){var r=Qi.get(t);if(r===void 0){Vb(t,o);return}if(r instanceof SVGSVGElement){o(null,P2(r));return}}Qi.set(t,void 0),Vb(t,o),Q2(t,n,function(i,l){var s;i?Qi.set(t,i):((s=l.responseXML)===null||s===void 0?void 0:s.documentElement)instanceof SVGSVGElement&&Qi.set(t,l.responseXML.documentElement),SJ(t)})},RJ=function(t,n,o){Q2(t,n,function(r,i){var l;r?o(r):((l=i.responseXML)===null||l===void 0?void 0:l.documentElement)instanceof SVGSVGElement&&o(null,i.responseXML.documentElement)})},WJ=0,wJ=function(){return++WJ},so=[],Rb={},kJ="http://www.w3.org/2000/svg",WI="http://www.w3.org/1999/xlink",Wb=function(t,n,o,r,i,l,s){var a=t.getAttribute("data-src")||t.getAttribute("src");if(!a){s(new Error("Invalid data-src or src attribute"));return}if(so.indexOf(t)!==-1){so.splice(so.indexOf(t),1),t=null;return}so.push(t),t.setAttribute("src","");var c=r?VJ:RJ;c(a,i,function(u,d){if(!d){so.splice(so.indexOf(t),1),t=null,s(u);return}var I=t.getAttribute("id");I&&d.setAttribute("id",I);var C=t.getAttribute("title");C&&d.setAttribute("title",C);var f=t.getAttribute("width");f&&d.setAttribute("width",f);var A=t.getAttribute("height");A&&d.setAttribute("height",A);var v=Array.from(new Set(RI(RI(RI([],(d.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(t.getAttribute("class")||"").split(" "),!0))).join(" ").trim();d.setAttribute("class",v);var h=t.getAttribute("style");h&&d.setAttribute("style",h),d.setAttribute("data-src",a);var p=[].filter.call(t.attributes,function(F){return/^data-\w[\w-]*$/.test(F.name)});if(Array.prototype.forEach.call(p,function(F){F.name&&F.value&&d.setAttribute(F.name,F.value)}),o){var b={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},y,Z,G,V,S;Object.keys(b).forEach(function(F){y=F,G=b[F],Z=d.querySelectorAll(y+"[id]");for(var Y=function(K,T){V=Z[K].id,S=V+"-"+wJ();var j;Array.prototype.forEach.call(G,function(ae){j=d.querySelectorAll("["+ae+'*="'+V+'"]');for(var ge=0,ne=j.length;ge<ne;ge++){var ue=j[ge].getAttribute(ae);ue&&!ue.match(new RegExp('url\\("?#'+V+'"?\\)'))||j[ge].setAttribute(ae,"url(#"+S+")")}});for(var J=d.querySelectorAll("[*|href]"),z=[],U=0,D=J.length;U<D;U++){var O=J[U].getAttributeNS(WI,"href");O&&O.toString()==="#"+Z[K].id&&z.push(J[U])}for(var ee=0,re=z.length;ee<re;ee++)z[ee].setAttributeNS(WI,"href","#"+S);Z[K].id=S},N=0,x=Z.length;N<x;N++)Y(N)})}d.removeAttribute("xmlns:a");for(var k=d.querySelectorAll("script"),B=[],R,W,w=0,X=k.length;w<X;w++)W=k[w].getAttribute("type"),(!W||W==="application/ecmascript"||W==="application/javascript"||W==="text/javascript")&&(R=k[w].innerText||k[w].textContent,R&&B.push(R),d.removeChild(k[w]));if(B.length>0&&(n==="always"||n==="once"&&!Rb[a])){for(var E=0,M=B.length;E<M;E++)new Function(B[E])(window);Rb[a]=!0}var L=d.querySelectorAll("style");if(Array.prototype.forEach.call(L,function(F){F.textContent+=""}),d.setAttribute("xmlns",kJ),d.setAttribute("xmlns:xlink",WI),l(d),!t.parentNode){so.splice(so.indexOf(t),1),t=null,s(new Error("Parent node is null"));return}t.parentNode.replaceChild(d,t),so.splice(so.indexOf(t),1),t=null,s(null,d)})},xJ=function(t,n){var o=n===void 0?{}:n,r=o.afterAll,i=r===void 0?function(){}:r,l=o.afterEach,s=l===void 0?function(){}:l,a=o.beforeEach,c=a===void 0?function(){}:a,u=o.cacheRequests,d=u===void 0?!0:u,I=o.evalScripts,C=I===void 0?"never":I,f=o.httpRequestWithCredentials,A=f===void 0?!1:f,v=o.renumerateIRIElements,h=v===void 0?!0:v;if(t&&"length"in t)for(var p=0,b=0,y=t.length;b<y;b++)Wb(t[b],C,h,d,A,c,function(Z,G){s(Z,G),t&&"length"in t&&t.length===++p&&i(p)});else t?Wb(t,C,h,d,A,c,function(Z,G){s(Z,G),i(1),t=null}):i(0)},O2={exports:{}},XJ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",JJ=XJ,NJ=JJ;function _2(){}function q2(){}q2.resetWarningCache=_2;var YJ=function(){function e(o,r,i,l,s,a){if(a!==NJ){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:q2,resetWarningCache:_2};return n.PropTypes=n,n};O2.exports=YJ();var dt=O2.exports;const No=ro(dt);var HJ=function(t){var n=(t==null?void 0:t.ownerDocument)||document;return n.defaultView||window},FJ=function(t,n){for(var o in t)if(!(o in n))return!0;for(var r in n)if(t[r]!==n[r])return!0;return!1},EJ=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],mg="http://www.w3.org/2000/svg",wb="http://www.w3.org/1999/xlink",Ba=function(e){U2(t,e);function t(){for(var o,r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return o=e.call.apply(e,[this].concat(i))||this,o.initialState={hasError:!1,isLoading:!0},o.state=o.initialState,o._isMounted=!1,o.reactWrapper=void 0,o.nonReactWrapper=void 0,o.refCallback=function(s){o.reactWrapper=s},o}var n=t.prototype;return n.renderSVG=function(){var r=this;if(this.reactWrapper instanceof HJ(this.reactWrapper).Node){var i=this.props,l=i.desc,s=i.evalScripts,a=i.httpRequestWithCredentials,c=i.renumerateIRIElements,u=i.src,d=i.title,I=i.useRequestCache,C=this.props.onError,f=this.props.beforeInjection,A=this.props.afterInjection,v=this.props.wrapper,h,p;v==="svg"?(h=document.createElementNS(mg,v),h.setAttribute("xmlns",mg),h.setAttribute("xmlns:xlink",wb),p=document.createElementNS(mg,v)):(h=document.createElement(v),p=document.createElement(v)),h.appendChild(p),p.dataset.src=u,this.nonReactWrapper=this.reactWrapper.appendChild(h);var b=function(V){if(r.removeSVG(),!r._isMounted){C(V);return}r.setState(function(){return{hasError:!0,isLoading:!1}},function(){C(V)})},y=function(V,S){if(V){b(V);return}r._isMounted&&r.setState(function(){return{isLoading:!1}},function(){try{A(S)}catch(k){b(k)}})},Z=function(V){if(V.setAttribute("role","img"),l){var S=V.querySelector(":scope > desc");S&&V.removeChild(S);var k=document.createElement("desc");k.innerHTML=l,V.prepend(k)}if(d){var B=V.querySelector(":scope > title");B&&V.removeChild(B);var R=document.createElement("title");R.innerHTML=d,V.prepend(R)}try{f(V)}catch(W){b(W)}};xJ(p,{afterEach:y,beforeEach:Z,cacheRequests:I,evalScripts:s,httpRequestWithCredentials:a,renumerateIRIElements:c})}},n.removeSVG=function(){var r;(r=this.nonReactWrapper)!=null&&r.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},n.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},n.componentDidUpdate=function(r){var i=this;FJ(Wl({},r),this.props)&&this.setState(function(){return i.initialState},function(){i.removeSVG(),i.renderSVG()})},n.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},n.render=function(){var r=this.props;r.afterInjection,r.beforeInjection,r.desc,r.evalScripts;var i=r.fallback;r.httpRequestWithCredentials;var l=r.loading;r.renumerateIRIElements,r.src,r.title,r.useRequestCache;var s=r.wrapper,a=Tu(r,EJ),c=s;return m.createElement(c,Wl({},a,{ref:this.refCallback},s==="svg"?{xmlns:mg,xmlnsXlink:wb}:{}),this.state.isLoading&&l&&m.createElement(l,null),this.state.hasError&&i&&m.createElement(i,null))},t}(m.Component);Ba.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};Ba.propTypes={afterInjection:dt.func,beforeInjection:dt.func,desc:dt.string,evalScripts:dt.oneOf(["always","once","never"]),fallback:dt.oneOfType([dt.func,dt.object,dt.string]),httpRequestWithCredentials:dt.bool,loading:dt.oneOfType([dt.func,dt.object,dt.string]),onError:dt.func,renumerateIRIElements:dt.bool,src:dt.string.isRequired,title:dt.string,useRequestCache:dt.bool,wrapper:dt.oneOf(["div","span","svg"])};var $2={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",l=0;l<arguments.length;l++){var s=arguments[l];s&&(i=r(i,o(s)))}return i}function o(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var l="";for(var s in i)t.call(i,s)&&i[s]&&(l=r(l,s));return l}function r(i,l){return l?i?i+" "+l:i+l:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})($2);var KJ=$2.exports;const Le=ro(KJ);function kb(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function LJ(e){var t=MJ(e,"string");return typeof t=="symbol"?t:String(t)}function MJ(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TJ(e,t,n){var o=m.useRef(e!==void 0),r=m.useState(t),i=r[0],l=r[1],s=e!==void 0,a=o.current;return o.current=s,!s&&a&&i!==t&&l(t),[s?e:i,m.useCallback(function(c){for(var u=arguments.length,d=new Array(u>1?u-1:0),I=1;I<u;I++)d[I-1]=arguments[I];n&&n.apply(void 0,[c].concat(d)),l(c)},[n])]}function jJ(e,t){return Object.keys(t).reduce(function(n,o){var r,i=n,l=i[kb(o)],s=i[o],a=Tu(i,[kb(o),o].map(LJ)),c=t[o],u=TJ(s,l,e[c]),d=u[0],I=u[1];return Wl({},a,(r={},r[o]=d,r[c]=I,r))},e)}const zJ=["xxl","xl","lg","md","sm","xs"],DJ="xs",ju=m.createContext({prefixes:{},breakpoints:zJ,minBreakpoint:DJ});function ct(e,t){const{prefixes:n}=m.useContext(ju);return e||n[t]||t}function eS(){const{breakpoints:e}=m.useContext(ju);return e}function tS(){const{minBreakpoint:e}=m.useContext(ju);return e}function UJ(){const{dir:e}=m.useContext(ju);return e==="rtl"}function zu(e){return e&&e.ownerDocument||document}function PJ(e){var t=zu(e);return t&&t.defaultView||window}function QJ(e,t){return PJ(e).getComputedStyle(e,t)}var OJ=/([A-Z])/g;function _J(e){return e.replace(OJ,"-$1").toLowerCase()}var qJ=/^ms-/;function hg(e){return _J(e).replace(qJ,"-ms-")}var $J=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function eN(e){return!!(e&&$J.test(e))}function Gi(e,t){var n="",o="";if(typeof t=="string")return e.style.getPropertyValue(hg(t))||QJ(e).getPropertyValue(hg(t));Object.keys(t).forEach(function(r){var i=t[r];!i&&i!==0?e.style.removeProperty(hg(r)):eN(r)?o+=r+"("+i+") ":n+=hg(r)+": "+i+";"}),o&&(n+="transform: "+o+";"),e.style.cssText+=";"+n}const xb={disabled:!1},nS=P.createContext(null);var tN=function(t){return t.scrollTop},Ss="unmounted",oi="exited",rr="entering",gi="entered",th="exiting",Po=function(e){U2(t,e);function t(o,r){var i;i=e.call(this,o,r)||this;var l=r,s=l&&!l.isMounting?o.enter:o.appear,a;return i.appearStatus=null,o.in?s?(a=oi,i.appearStatus=rr):a=gi:o.unmountOnExit||o.mountOnEnter?a=Ss:a=oi,i.state={status:a},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var l=r.in;return l&&i.status===Ss?{status:oi}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var i=null;if(r!==this.props){var l=this.state.status;this.props.in?l!==rr&&l!==gi&&(i=rr):(l===rr||l===gi)&&(i=th)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,i,l,s;return i=l=s=r,r!=null&&typeof r!="number"&&(i=r.exit,l=r.enter,s=r.appear!==void 0?r.appear:l),{exit:i,enter:l,appear:s}},n.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===rr){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:hi.findDOMNode(this);l&&tN(l)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===oi&&this.setState({status:Ss})},n.performEnter=function(r){var i=this,l=this.props.enter,s=this.context?this.context.isMounting:r,a=this.props.nodeRef?[s]:[hi.findDOMNode(this),s],c=a[0],u=a[1],d=this.getTimeouts(),I=s?d.appear:d.enter;if(!r&&!l||xb.disabled){this.safeSetState({status:gi},function(){i.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:rr},function(){i.props.onEntering(c,u),i.onTransitionEnd(I,function(){i.safeSetState({status:gi},function(){i.props.onEntered(c,u)})})})},n.performExit=function(){var r=this,i=this.props.exit,l=this.getTimeouts(),s=this.props.nodeRef?void 0:hi.findDOMNode(this);if(!i||xb.disabled){this.safeSetState({status:oi},function(){r.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:th},function(){r.props.onExiting(s),r.onTransitionEnd(l.exit,function(){r.safeSetState({status:oi},function(){r.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},n.setNextCallback=function(r){var i=this,l=!0;return this.nextCallback=function(s){l&&(l=!1,i.nextCallback=null,r(s))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(r,i){this.setNextCallback(i);var l=this.props.nodeRef?this.props.nodeRef.current:hi.findDOMNode(this),s=r==null&&!this.props.addEndListener;if(!l||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],c=a[0],u=a[1];this.props.addEndListener(c,u)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Ss)return null;var i=this.props,l=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var s=Tu(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return P.createElement(nS.Provider,{value:null},typeof l=="function"?l(r,s):P.cloneElement(P.Children.only(l),s))},t}(P.Component);Po.contextType=nS;Po.propTypes={};function ji(){}Po.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ji,onEntering:ji,onEntered:ji,onExit:ji,onExiting:ji,onExited:ji};Po.UNMOUNTED=Ss;Po.EXITED=oi;Po.ENTERING=rr;Po.ENTERED=gi;Po.EXITING=th;const nN=Po,Tl=!!(typeof window<"u"&&window.document&&window.document.createElement);var nh=!1,oh=!1;try{var wI={get passive(){return nh=!0},get once(){return oh=nh=!0}};Tl&&(window.addEventListener("test",wI,wI),window.removeEventListener("test",wI,!0))}catch{}function oS(e,t,n,o){if(o&&typeof o!="boolean"&&!oh){var r=o.once,i=o.capture,l=n;!oh&&r&&(l=n.__once||function s(a){this.removeEventListener(t,s,i),n.call(this,a)},n.__once=l),e.addEventListener(t,l,nh?o:i)}e.addEventListener(t,n,o)}function rh(e,t,n,o){var r=o&&typeof o!="boolean"?o.capture:o;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}function Tc(e,t,n,o){return oS(e,t,n,o),function(){rh(e,t,n,o)}}function oN(e,t,n,o){if(n===void 0&&(n=!1),o===void 0&&(o=!0),e){var r=document.createEvent("HTMLEvents");r.initEvent(t,n,o),e.dispatchEvent(r)}}function rN(e){var t=Gi(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function iN(e,t,n){n===void 0&&(n=5);var o=!1,r=setTimeout(function(){o||oN(e,"transitionend",!0)},t+n),i=Tc(e,"transitionend",function(){o=!0},{once:!0});return function(){clearTimeout(r),i()}}function rS(e,t,n,o){n==null&&(n=rN(e)||0);var r=iN(e,n,o),i=Tc(e,"transitionend",t);return function(){r(),i()}}function Xb(e,t){const n=Gi(e,t)||"",o=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*o}function lN(e,t){const n=Xb(e,"transitionDuration"),o=Xb(e,"transitionDelay"),r=rS(e,i=>{i.target===e&&(r(),t(i))},n+o)}function sN(e){e.offsetHeight}const Jb=e=>!e||typeof e=="function"?e:t=>{e.current=t};function aN(e,t){const n=Jb(e),o=Jb(t);return r=>{n&&n(r),o&&o(r)}}function Du(e,t){return m.useMemo(()=>aN(e,t),[e,t])}function gN(e){return e&&"setState"in e?hi.findDOMNode(e):e??null}const cN=P.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:o,onExiting:r,onExited:i,addEndListener:l,children:s,childRef:a,...c},u)=>{const d=m.useRef(null),I=Du(d,a),C=G=>{I(gN(G))},f=G=>V=>{G&&d.current&&G(d.current,V)},A=m.useCallback(f(e),[e]),v=m.useCallback(f(t),[t]),h=m.useCallback(f(n),[n]),p=m.useCallback(f(o),[o]),b=m.useCallback(f(r),[r]),y=m.useCallback(f(i),[i]),Z=m.useCallback(f(l),[l]);return g.jsx(nN,{ref:u,...c,onEnter:A,onEntered:h,onEntering:v,onExit:p,onExited:y,onExiting:b,addEndListener:Z,nodeRef:d,children:typeof s=="function"?(G,V)=>s(G,{...V,ref:C}):P.cloneElement(s,{ref:C})})}),uN=cN;function dN(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e},[e]),t}function Ln(e){const t=dN(e);return m.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const iS=e=>m.forwardRef((t,n)=>g.jsx("div",{...t,ref:n,className:Le(t.className,e)})),lS=iS("h4");lS.displayName="DivStyledAsH4";const sS=m.forwardRef(({className:e,bsPrefix:t,as:n=lS,...o},r)=>(t=ct(t,"alert-heading"),g.jsx(n,{ref:r,className:Le(e,t),...o})));sS.displayName="AlertHeading";const IN=sS;function CN(){return m.useState(null)}function mN(){const e=m.useRef(!0),t=m.useRef(()=>e.current);return m.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function hN(e){const t=m.useRef(null);return m.useEffect(()=>{t.current=e}),t.current}const fN=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",AN=typeof document<"u",Nb=AN||fN?m.useLayoutEffect:m.useEffect,pN=["as","disabled"];function bN(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,i;for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function yN(e){return!e||e.trim()==="#"}function lA({tagName:e,disabled:t,href:n,target:o,rel:r,role:i,onClick:l,tabIndex:s=0,type:a}){e||(n!=null||o!=null||r!=null?e="a":e="button");const c={tagName:e};if(e==="button")return[{type:a||"button",disabled:t},c];const u=I=>{if((t||e==="a"&&yN(n))&&I.preventDefault(),t){I.stopPropagation();return}l==null||l(I)},d=I=>{I.key===" "&&(I.preventDefault(),u(I))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:i??"button",disabled:void 0,tabIndex:t?void 0:s,href:n,target:e==="a"?o:void 0,"aria-disabled":t||void 0,rel:e==="a"?r:void 0,onClick:u,onKeyDown:d},c]}const vN=m.forwardRef((e,t)=>{let{as:n,disabled:o}=e,r=bN(e,pN);const[i,{tagName:l}]=lA(Object.assign({tagName:n,disabled:o},r));return g.jsx(l,Object.assign({},r,i,{ref:t}))});vN.displayName="Button";const ZN=["onKeyDown"];function GN(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,i;for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function BN(e){return!e||e.trim()==="#"}const aS=m.forwardRef((e,t)=>{let{onKeyDown:n}=e,o=GN(e,ZN);const[r]=lA(Object.assign({tagName:"a"},o)),i=Ln(l=>{r.onKeyDown(l),n==null||n(l)});return BN(o.href)||o.role==="button"?g.jsx("a",Object.assign({ref:t},o,r,{onKeyDown:i})):g.jsx("a",Object.assign({ref:t},o,{onKeyDown:n}))});aS.displayName="Anchor";const SN=aS,gS=m.forwardRef(({className:e,bsPrefix:t,as:n=SN,...o},r)=>(t=ct(t,"alert-link"),g.jsx(n,{ref:r,className:Le(e,t),...o})));gS.displayName="AlertLink";const VN=gS,RN={[rr]:"show",[gi]:"show"},cS=m.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:o,...r},i)=>{const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},s=m.useCallback((a,c)=>{sN(a),o==null||o(a,c)},[o]);return g.jsx(uN,{ref:i,addEndListener:lN,...l,onEnter:s,childRef:t.ref,children:(a,c)=>m.cloneElement(t,{...c,className:Le("fade",e,t.props.className,RN[a],n[a])})})});cS.displayName="Fade";const jc=cS,WN={"aria-label":No.string,onClick:No.func,variant:No.oneOf(["white"])},sA=m.forwardRef(({className:e,variant:t,"aria-label":n="Close",...o},r)=>g.jsx("button",{ref:r,type:"button",className:Le("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...o}));sA.displayName="CloseButton";sA.propTypes=WN;const uS=sA,dS=m.forwardRef((e,t)=>{const{bsPrefix:n,show:o=!0,closeLabel:r="Close alert",closeVariant:i,className:l,children:s,variant:a="primary",onClose:c,dismissible:u,transition:d=jc,...I}=jJ(e,{show:"onClose"}),C=ct(n,"alert"),f=Ln(h=>{c&&c(!1,h)}),A=d===!0?jc:d,v=g.jsxs("div",{role:"alert",...A?void 0:I,ref:t,className:Le(l,C,a&&`${C}-${a}`,u&&`${C}-dismissible`),children:[u&&g.jsx(uS,{onClick:f,"aria-label":r,variant:i}),s]});return A?g.jsx(A,{unmountOnExit:!0,...I,ref:void 0,in:o,children:v}):o?v:null});dS.displayName="Alert";const wN=Object.assign(dS,{Link:VN,Heading:IN}),IS=m.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:o,active:r=!1,disabled:i=!1,className:l,...s},a)=>{const c=ct(t,"btn"),[u,{tagName:d}]=lA({tagName:e,disabled:i,...s}),I=d;return g.jsx(I,{...u,...s,ref:a,disabled:i,className:Le(l,c,r&&"active",n&&`${c}-${n}`,o&&`${c}-${o}`,s.href&&i&&"disabled")})});IS.displayName="Button";const mt=IS;function kN(e){const t=m.useRef(e);return t.current=e,t}function CS(e){const t=kN(e);m.useEffect(()=>()=>t.current(),[])}function xN(e,t){return m.Children.toArray(e).some(n=>m.isValidElement(n)&&n.type===t)}function XN({as:e,bsPrefix:t,className:n,...o}){t=ct(t,"col");const r=eS(),i=tS(),l=[],s=[];return r.forEach(a=>{const c=o[a];delete o[a];let u,d,I;typeof c=="object"&&c!=null?{span:u,offset:d,order:I}=c:u=c;const C=a!==i?`-${a}`:"";u&&l.push(u===!0?`${t}${C}`:`${t}${C}-${u}`),I!=null&&s.push(`order${C}-${I}`),d!=null&&s.push(`offset${C}-${d}`)}),[{...o,className:Le(n,...l,...s)},{as:e,bsPrefix:t,spans:l}]}const mS=m.forwardRef((e,t)=>{const[{className:n,...o},{as:r="div",bsPrefix:i,spans:l}]=XN(e);return g.jsx(r,{...o,ref:t,className:Le(n,!l.length&&i)})});mS.displayName="Col";const Ce=mS;var JN=Function.prototype.bind.call(Function.prototype.call,[].slice);function zi(e,t){return JN(e.querySelectorAll(t))}function Yb(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const NN="data-rr-ui-";function YN(e){return`${NN}${e}`}const hS=m.createContext(Tl?window:void 0);hS.Provider;function aA(){return m.useContext(hS)}const HN={type:No.string,tooltip:No.bool,as:No.elementType},gA=m.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:o=!1,...r},i)=>g.jsx(e,{...r,ref:i,className:Le(t,`${n}-${o?"tooltip":"feedback"}`)}));gA.displayName="Feedback";gA.propTypes=HN;const fS=gA,FN=m.createContext({}),jo=FN,AS=m.forwardRef(({id:e,bsPrefix:t,className:n,type:o="checkbox",isValid:r=!1,isInvalid:i=!1,as:l="input",...s},a)=>{const{controlId:c}=m.useContext(jo);return t=ct(t,"form-check-input"),g.jsx(l,{...s,ref:a,type:o,id:e||c,className:Le(n,t,r&&"is-valid",i&&"is-invalid")})});AS.displayName="FormCheckInput";const pS=AS,bS=m.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...o},r)=>{const{controlId:i}=m.useContext(jo);return e=ct(e,"form-check-label"),g.jsx("label",{...o,ref:r,htmlFor:n||i,className:Le(t,e)})});bS.displayName="FormCheckLabel";const ih=bS,yS=m.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:o=!1,reverse:r=!1,disabled:i=!1,isValid:l=!1,isInvalid:s=!1,feedbackTooltip:a=!1,feedback:c,feedbackType:u,className:d,style:I,title:C="",type:f="checkbox",label:A,children:v,as:h="input",...p},b)=>{t=ct(t,"form-check"),n=ct(n,"form-switch");const{controlId:y}=m.useContext(jo),Z=m.useMemo(()=>({controlId:e||y}),[y,e]),G=!v&&A!=null&&A!==!1||xN(v,ih),V=g.jsx(pS,{...p,type:f==="switch"?"checkbox":f,ref:b,isValid:l,isInvalid:s,disabled:i,as:h});return g.jsx(jo.Provider,{value:Z,children:g.jsx("div",{style:I,className:Le(d,G&&t,o&&`${t}-inline`,r&&`${t}-reverse`,f==="switch"&&n),children:v||g.jsxs(g.Fragment,{children:[V,G&&g.jsx(ih,{title:C,children:A}),c&&g.jsx(fS,{type:u,tooltip:a,children:c})]})})})});yS.displayName="FormCheck";const zc=Object.assign(yS,{Input:pS,Label:ih}),vS=m.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:o,id:r,className:i,isValid:l=!1,isInvalid:s=!1,plaintext:a,readOnly:c,as:u="input",...d},I)=>{const{controlId:C}=m.useContext(jo);return e=ct(e,"form-control"),g.jsx(u,{...d,type:t,size:o,ref:I,readOnly:c,id:r||C,className:Le(i,a?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,l&&"is-valid",s&&"is-invalid")})});vS.displayName="FormControl";const EN=Object.assign(vS,{Feedback:fS}),ZS=m.forwardRef(({className:e,bsPrefix:t,as:n="div",...o},r)=>(t=ct(t,"form-floating"),g.jsx(n,{ref:r,className:Le(e,t),...o})));ZS.displayName="FormFloating";const KN=ZS,GS=m.forwardRef(({controlId:e,as:t="div",...n},o)=>{const r=m.useMemo(()=>({controlId:e}),[e]);return g.jsx(jo.Provider,{value:r,children:g.jsx(t,{...n,ref:o})})});GS.displayName="FormGroup";const BS=GS,SS=m.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:o=!1,className:r,htmlFor:i,...l},s)=>{const{controlId:a}=m.useContext(jo);t=ct(t,"form-label");let c="col-form-label";typeof n=="string"&&(c=`${c} ${c}-${n}`);const u=Le(r,t,o&&"visually-hidden",n&&c);return i=i||a,n?g.jsx(Ce,{ref:s,as:"label",className:u,htmlFor:i,...l}):g.jsx(e,{ref:s,className:u,htmlFor:i,...l})});SS.displayName="FormLabel";const LN=SS,VS=m.forwardRef(({bsPrefix:e,className:t,id:n,...o},r)=>{const{controlId:i}=m.useContext(jo);return e=ct(e,"form-range"),g.jsx("input",{...o,type:"range",ref:r,className:Le(t,e),id:n||i})});VS.displayName="FormRange";const MN=VS,RS=m.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:o,isValid:r=!1,isInvalid:i=!1,id:l,...s},a)=>{const{controlId:c}=m.useContext(jo);return e=ct(e,"form-select"),g.jsx("select",{...s,size:n,ref:a,className:Le(o,e,t&&`${e}-${t}`,r&&"is-valid",i&&"is-invalid"),id:l||c})});RS.displayName="FormSelect";const TN=RS,WS=m.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:o,...r},i)=>(e=ct(e,"form-text"),g.jsx(n,{...r,ref:i,className:Le(t,e,o&&"text-muted")})));WS.displayName="FormText";const jN=WS,wS=m.forwardRef((e,t)=>g.jsx(zc,{...e,ref:t,type:"switch"}));wS.displayName="Switch";const zN=Object.assign(wS,{Input:zc.Input,Label:zc.Label}),kS=m.forwardRef(({bsPrefix:e,className:t,children:n,controlId:o,label:r,...i},l)=>(e=ct(e,"form-floating"),g.jsxs(BS,{ref:l,className:Le(t,e),controlId:o,...i,children:[n,g.jsx("label",{htmlFor:o,children:r})]})));kS.displayName="FloatingLabel";const DN=kS,UN={_ref:No.any,validated:No.bool,as:No.elementType},cA=m.forwardRef(({className:e,validated:t,as:n="form",...o},r)=>g.jsx(n,{...o,ref:r,className:Le(e,t&&"was-validated")}));cA.displayName="Form";cA.propTypes=UN;const PN=Object.assign(cA,{Group:BS,Control:EN,Floating:KN,Check:zc,Switch:zN,Label:LN,Text:jN,Range:MN,Select:TN,FloatingLabel:DN});var fg;function Hb(e){if((!fg&&fg!==0||e)&&Tl){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),fg=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return fg}function kI(e){e===void 0&&(e=zu());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function QN(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const Fb=YN("modal-open");class ON{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:o=!1}={}){this.handleContainerOverflow=n,this.isRTL=o,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return QN(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[o]:r.style[o]},t.scrollBarWidth&&(n[o]=`${parseInt(Gi(r,o)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(Fb,""),Gi(r,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(Fb),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const uA=ON,xI=(e,t)=>Tl?e==null?(t||zu()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function _N(e,t){const n=aA(),[o,r]=m.useState(()=>xI(e,n==null?void 0:n.document));if(!o){const i=xI(e);i&&r(i)}return m.useEffect(()=>{t&&o&&t(o)},[t,o]),m.useEffect(()=>{const i=xI(e);i!==o&&r(i)},[e,o]),o}function qN({children:e,in:t,onExited:n,mountOnEnter:o,unmountOnExit:r}){const i=m.useRef(null),l=m.useRef(t),s=Ln(n);m.useEffect(()=>{t?l.current=!0:s(i.current)},[t,s]);const a=Du(i,e.ref),c=m.cloneElement(e,{ref:a});return t?c:r||!l.current&&o?null:c}function $N({in:e,onTransition:t}){const n=m.useRef(null),o=m.useRef(!0),r=Ln(t);return Nb(()=>{if(!n.current)return;let i=!1;return r({in:e,element:n.current,initial:o.current,isStale:()=>i}),()=>{i=!0}},[e,r]),Nb(()=>(o.current=!1,()=>{o.current=!0}),[]),n}function e9({children:e,in:t,onExited:n,onEntered:o,transition:r}){const[i,l]=m.useState(!t);t&&i&&l(!1);const s=$N({in:!!t,onTransition:c=>{const u=()=>{c.isStale()||(c.in?o==null||o(c.element,c.initial):(l(!0),n==null||n(c.element)))};Promise.resolve(r(c)).then(u,d=>{throw c.in||l(!0),d})}}),a=Du(s,e.ref);return i&&!t?null:m.cloneElement(e,{ref:a})}function Eb(e,t,n){return e?g.jsx(e,Object.assign({},n)):t?g.jsx(e9,Object.assign({},n,{transition:t})):g.jsx(qN,Object.assign({},n))}function t9(e){return e.code==="Escape"||e.keyCode===27}const n9=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function o9(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,i;for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}let XI;function r9(e){return XI||(XI=new uA({ownerDocument:e==null?void 0:e.document})),XI}function i9(e){const t=aA(),n=e||r9(t),o=m.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>n.add(o.current),remove:()=>n.remove(o.current),isTopModal:()=>n.isTopModal(o.current),setDialogRef:m.useCallback(r=>{o.current.dialog=r},[]),setBackdropRef:m.useCallback(r=>{o.current.backdrop=r},[])})}const xS=m.forwardRef((e,t)=>{let{show:n=!1,role:o="dialog",className:r,style:i,children:l,backdrop:s=!0,keyboard:a=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:d,runTransition:I,backdropTransition:C,runBackdropTransition:f,autoFocus:A=!0,enforceFocus:v=!0,restoreFocus:h=!0,restoreFocusOptions:p,renderDialog:b,renderBackdrop:y=ne=>g.jsx("div",Object.assign({},ne)),manager:Z,container:G,onShow:V,onHide:S=()=>{},onExit:k,onExited:B,onExiting:R,onEnter:W,onEntering:w,onEntered:X}=e,E=o9(e,n9);const M=aA(),L=_N(G),F=i9(Z),Y=mN(),N=hN(n),[x,H]=m.useState(!n),K=m.useRef(null);m.useImperativeHandle(t,()=>F,[F]),Tl&&!N&&n&&(K.current=kI(M==null?void 0:M.document)),n&&x&&H(!1);const T=Ln(()=>{if(F.add(),O.current=Tc(document,"keydown",U),D.current=Tc(document,"focus",()=>setTimeout(J),!0),V&&V(),A){var ne,ue;const me=kI((ne=(ue=F.dialog)==null?void 0:ue.ownerDocument)!=null?ne:M==null?void 0:M.document);F.dialog&&me&&!Yb(F.dialog,me)&&(K.current=me,F.dialog.focus())}}),j=Ln(()=>{if(F.remove(),O.current==null||O.current(),D.current==null||D.current(),h){var ne;(ne=K.current)==null||ne.focus==null||ne.focus(p),K.current=null}});m.useEffect(()=>{!n||!L||T()},[n,L,T]),m.useEffect(()=>{x&&j()},[x,j]),CS(()=>{j()});const J=Ln(()=>{if(!v||!Y()||!F.isTopModal())return;const ne=kI(M==null?void 0:M.document);F.dialog&&ne&&!Yb(F.dialog,ne)&&F.dialog.focus()}),z=Ln(ne=>{ne.target===ne.currentTarget&&(c==null||c(ne),s===!0&&S())}),U=Ln(ne=>{a&&t9(ne)&&F.isTopModal()&&(u==null||u(ne),ne.defaultPrevented||S())}),D=m.useRef(),O=m.useRef(),ee=(...ne)=>{H(!0),B==null||B(...ne)};if(!L)return null;const re=Object.assign({role:o,ref:F.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},E,{style:i,className:r,tabIndex:-1});let ae=b?b(re):g.jsx("div",Object.assign({},re,{children:m.cloneElement(l,{role:"document"})}));ae=Eb(d,I,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:k,onExiting:R,onExited:ee,onEnter:W,onEntering:w,onEntered:X,children:ae});let ge=null;return s&&(ge=y({ref:F.setBackdropRef,onClick:z}),ge=Eb(C,f,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ge})),g.jsx(g.Fragment,{children:hi.createPortal(g.jsxs(g.Fragment,{children:[ge,ae]}),L)})});xS.displayName="Modal";const l9=Object.assign(xS,{Manager:uA});function s9(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function a9(e,t){e.classList?e.classList.add(t):s9(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Kb(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function g9(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Kb(e.className,t):e.setAttribute("class",Kb(e.className&&e.className.baseVal||"",t))}const Di={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class c9 extends uA{adjustAndStore(t,n,o){const r=n.style[t];n.dataset[t]=r,Gi(n,{[t]:`${parseFloat(Gi(n,t))+o}px`})}restore(t,n){const o=n.dataset[t];o!==void 0&&(delete n.dataset[t],Gi(n,{[t]:o}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(a9(n,"modal-open"),!t.scrollBarWidth)return;const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";zi(n,Di.FIXED_CONTENT).forEach(i=>this.adjustAndStore(o,i,t.scrollBarWidth)),zi(n,Di.STICKY_CONTENT).forEach(i=>this.adjustAndStore(r,i,-t.scrollBarWidth)),zi(n,Di.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(r,i,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();g9(n,"modal-open");const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";zi(n,Di.FIXED_CONTENT).forEach(i=>this.restore(o,i)),zi(n,Di.STICKY_CONTENT).forEach(i=>this.restore(r,i)),zi(n,Di.NAVBAR_TOGGLER).forEach(i=>this.restore(r,i))}}let JI;function u9(e){return JI||(JI=new c9(e)),JI}const XS=m.forwardRef(({className:e,bsPrefix:t,as:n="div",...o},r)=>(t=ct(t,"modal-body"),g.jsx(n,{ref:r,className:Le(e,t),...o})));XS.displayName="ModalBody";const d9=XS,I9=m.createContext({onHide(){}}),JS=I9,NS=m.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:o,size:r,fullscreen:i,children:l,scrollable:s,...a},c)=>{e=ct(e,"modal");const u=`${e}-dialog`,d=typeof i=="string"?`${e}-fullscreen-${i}`:`${e}-fullscreen`;return g.jsx("div",{...a,ref:c,className:Le(u,t,r&&`${e}-${r}`,o&&`${u}-centered`,s&&`${u}-scrollable`,i&&d),children:g.jsx("div",{className:Le(`${e}-content`,n),children:l})})});NS.displayName="ModalDialog";const YS=NS,HS=m.forwardRef(({className:e,bsPrefix:t,as:n="div",...o},r)=>(t=ct(t,"modal-footer"),g.jsx(n,{ref:r,className:Le(e,t),...o})));HS.displayName="ModalFooter";const C9=HS,m9=m.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:o,children:r,...i},l)=>{const s=m.useContext(JS),a=Ln(()=>{s==null||s.onHide(),o==null||o()});return g.jsxs("div",{ref:l,...i,children:[r,n&&g.jsx(uS,{"aria-label":e,variant:t,onClick:a})]})}),h9=m9,FS=m.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:o=!1,...r},i)=>(e=ct(e,"modal-header"),g.jsx(h9,{ref:i,...r,className:Le(t,e),closeLabel:n,closeButton:o})));FS.displayName="ModalHeader";const ES=FS,f9=iS("h4"),KS=m.forwardRef(({className:e,bsPrefix:t,as:n=f9,...o},r)=>(t=ct(t,"modal-title"),g.jsx(n,{ref:r,className:Le(e,t),...o})));KS.displayName="ModalTitle";const A9=KS;function p9(e){return g.jsx(jc,{...e,timeout:null})}function b9(e){return g.jsx(jc,{...e,timeout:null})}const LS=m.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:o,contentClassName:r,children:i,dialogAs:l=YS,"data-bs-theme":s,"aria-labelledby":a,"aria-describedby":c,"aria-label":u,show:d=!1,animation:I=!0,backdrop:C=!0,keyboard:f=!0,onEscapeKeyDown:A,onShow:v,onHide:h,container:p,autoFocus:b=!0,enforceFocus:y=!0,restoreFocus:Z=!0,restoreFocusOptions:G,onEntered:V,onExit:S,onExiting:k,onEnter:B,onEntering:R,onExited:W,backdropClassName:w,manager:X,...E},M)=>{const[L,F]=m.useState({}),[Y,N]=m.useState(!1),x=m.useRef(!1),H=m.useRef(!1),K=m.useRef(null),[T,j]=CN(),J=Du(M,j),z=Ln(h),U=UJ();e=ct(e,"modal");const D=m.useMemo(()=>({onHide:z}),[z]);function O(){return X||u9({isRTL:U})}function ee(Ae){if(!Tl)return;const ie=O().getScrollbarWidth()>0,pe=Ae.scrollHeight>zu(Ae).documentElement.clientHeight;F({paddingRight:ie&&!pe?Hb():void 0,paddingLeft:!ie&&pe?Hb():void 0})}const re=Ln(()=>{T&&ee(T.dialog)});CS(()=>{rh(window,"resize",re),K.current==null||K.current()});const ae=()=>{x.current=!0},ge=Ae=>{x.current&&T&&Ae.target===T.dialog&&(H.current=!0),x.current=!1},ne=()=>{N(!0),K.current=rS(T.dialog,()=>{N(!1)})},ue=Ae=>{Ae.target===Ae.currentTarget&&ne()},me=Ae=>{if(C==="static"){ue(Ae);return}if(H.current||Ae.target!==Ae.currentTarget){H.current=!1;return}h==null||h()},q=Ae=>{f?A==null||A(Ae):(Ae.preventDefault(),C==="static"&&ne())},_=(Ae,ie)=>{Ae&&ee(Ae),B==null||B(Ae,ie)},$=Ae=>{K.current==null||K.current(),S==null||S(Ae)},oe=(Ae,ie)=>{R==null||R(Ae,ie),oS(window,"resize",re)},Q=Ae=>{Ae&&(Ae.style.display=""),W==null||W(Ae),rh(window,"resize",re)},ce=m.useCallback(Ae=>g.jsx("div",{...Ae,className:Le(`${e}-backdrop`,w,!I&&"show")}),[I,w,e]),le={...n,...L};le.display="block";const fe=Ae=>g.jsx("div",{role:"dialog",...Ae,style:le,className:Le(t,e,Y&&`${e}-static`,!I&&"show"),onClick:C?me:void 0,onMouseUp:ge,"data-bs-theme":s,"aria-label":u,"aria-labelledby":a,"aria-describedby":c,children:g.jsx(l,{...E,onMouseDown:ae,className:o,contentClassName:r,children:i})});return g.jsx(JS.Provider,{value:D,children:g.jsx(l9,{show:d,ref:J,backdrop:C,container:p,keyboard:!0,autoFocus:b,enforceFocus:y,restoreFocus:Z,restoreFocusOptions:G,onEscapeKeyDown:q,onShow:v,onHide:h,onEnter:_,onEntering:oe,onEntered:V,onExit:$,onExiting:k,onExited:Q,manager:O(),transition:I?p9:void 0,backdropTransition:I?b9:void 0,renderBackdrop:ce,renderDialog:fe})})});LS.displayName="Modal";const ci=Object.assign(LS,{Body:d9,Header:ES,Title:A9,Footer:C9,Dialog:YS,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),MS=m.forwardRef(({bsPrefix:e,className:t,as:n="div",...o},r)=>{const i=ct(e,"row"),l=eS(),s=tS(),a=`${i}-cols`,c=[];return l.forEach(u=>{const d=o[u];delete o[u];let I;d!=null&&typeof d=="object"?{cols:I}=d:I=d;const C=u!==s?`-${u}`:"";I!=null&&c.push(`${a}${C}-${I}`)}),g.jsx(n,{ref:r,...o,className:Le(t,i,...c)})});MS.displayName="Row";const Fe=MS;var TS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ua=P.createContext&&P.createContext(TS),y9=["attr","size","title"];function v9(e,t){if(e==null)return{};var n=Z9(e,t),o,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function Z9(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function Dc(){return Dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Dc.apply(this,arguments)}function Lb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Uc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lb(Object(n),!0).forEach(function(o){G9(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lb(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function G9(e,t,n){return t=B9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B9(e){var t=S9(e,"string");return typeof t=="symbol"?t:t+""}function S9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jS(e){return e&&e.map((t,n)=>P.createElement(t.tag,Uc({key:n},t.attr),jS(t.child)))}function ye(e){return t=>P.createElement(V9,Dc({attr:Uc({},e.attr)},t),jS(e.child))}function V9(e){var t=n=>{var{attr:o,size:r,title:i}=e,l=v9(e,y9),s=r||n.size||"1em",a;return n.className&&(a=n.className),e.className&&(a=(a?a+" ":"")+e.className),P.createElement("svg",Dc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,l,{className:a,style:Uc(Uc({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&P.createElement("title",null,i),e.children)};return ua!==void 0?P.createElement(ua.Consumer,null,n=>t(n)):t(TS)}function R9(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function W9(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(e)}function zS(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(e)}function w9(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"},child:[]}]})(e)}function DS(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19.05 4.91A9.816 9.816 0 0 0 12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91 0-2.65-1.03-5.14-2.9-7.01zm-7.01 15.24c-1.48 0-2.93-.4-4.2-1.15l-.3-.18-3.12.82.83-3.04-.2-.31a8.264 8.264 0 0 1-1.26-4.38c0-4.54 3.7-8.24 8.24-8.24 2.2 0 4.27.86 5.82 2.42a8.183 8.183 0 0 1 2.41 5.83c.02 4.54-3.68 8.23-8.22 8.23zm4.52-6.16c-.25-.12-1.47-.72-1.69-.81-.23-.08-.39-.12-.56.12-.17.25-.64.81-.78.97-.14.17-.29.19-.54.06-.25-.12-1.05-.39-1.99-1.23-.74-.66-1.23-1.47-1.38-1.72-.14-.25-.02-.38.11-.51.11-.11.25-.29.37-.43s.17-.25.25-.41c.08-.17.04-.31-.02-.43s-.56-1.34-.76-1.84c-.2-.48-.41-.42-.56-.43h-.48c-.17 0-.43.06-.66.31-.22.25-.86.85-.86 2.07 0 1.22.89 2.4 1.01 2.56.12.17 1.75 2.67 4.23 3.74.59.26 1.05.41 1.41.52.59.19 1.13.16 1.56.1.48-.07 1.47-.6 1.67-1.18.21-.58.21-1.07.14-1.18s-.22-.16-.47-.28z"},child:[]}]})(e)}function US(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"},child:[]}]})(e)}function k9(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"},child:[]}]})(e)}function x9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm90.5 224H272v74.5c0 8.8-7.2 16-16 16-4.4 0-8.4-1.8-11.3-4.7-2.9-2.9-4.7-6.9-4.7-11.3V272h-74.5c-4.4 0-8.4-1.8-11.3-4.7-2.9-2.9-4.7-6.9-4.7-11.3 0-8.8 7.2-16 16-16H240v-74.5c0-8.8 7.2-16 16-16s16 7.2 16 16V240h74.5c8.8 0 16 7.2 16 16s-7.2 16-16 16z"},child:[]}]})(e)}function X9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(e)}function J9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216.4 163.7c5.1 5 5.1 13.3.1 18.4L155.8 243h231.3c7.1 0 12.9 5.8 12.9 13s-5.8 13-12.9 13H155.8l60.8 60.9c5 5.1 4.9 13.3-.1 18.4-5.1 5-13.2 5-18.3-.1l-82.4-83c-1.1-1.2-2-2.5-2.7-4.1-.7-1.6-1-3.3-1-5 0-3.4 1.3-6.6 3.7-9.1l82.4-83c4.9-5.2 13.1-5.3 18.2-.3z"},child:[]}]})(e)}function N9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z"},child:[]}]})(e)}function PS(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm143.3 263.9c-8.1-2.6-23.7-3.4-29.5-10.4-2.9-3.5-1-16.6-1-16.6 25.2-1.4 31-6.1 31-6.1 3.9-2.3 2.1-2.7.1-6.1-10.9-18.3-6-41.5-6.5-61.6-.4-16.7-4.8-35-20-44.4-7.6-4.7-19.7-6.9-31.4-6.9-9.5 0-18.7 1.4-25.3 4.1-42.4 17-17.4 73.2-31.9 105.4-2.5 5.4-6.1 7.3.2 10.5 0 0 7.5 4.4 28.9 6.3 0 0 .3 12.6 0 13.9-1.1 4.9-11.8 8.3-15.8 9.4-2.7.7-8.7 2.5-16.4 5.7-3.7 1.5-3.1 6.9.8 7.6 3.9.7 8.1 1.7 11.5 2.9 0 0 26.4 6 46 25 13.2 12.7 18.1 27.6 20 44.6.5 4.5-1.7 8.9-5.5 11.5l-5.7 3.6c-1.9 1.1-4.2-.2-4.3-2.4 0-29.5-17.8-55.5-45.8-65.2-13.5-4.7-28.1-5-41.6-9.7-4.1-1.4-12.2-3.1-13.9-7.8-1.6-4.6-1.6-10-1.9-14.8-.2-3.8-.3-7.6-.3-11.4 0-2.5 6.4-7.8 7.8-10.1 5.4-9 5.9-21.1 6.9-31.3 8.7 2.4 9.8-13.7 11.3-18.6 1.1-3.4 5-20.9-2.6-23.6 2.5-4.4 3.5-9.8 4.2-14.7 2-12.8 2.8-26.8-1.1-39.3-8.1-26-33-40.6-59.3-41.4-26.7-.9-53.5 11.9-63.5 37.8-4.8 12.6-4.4 26.3-2.8 39.5.7 6 1.7 12.7 4.7 18.1-6.4 2.8-4.5 17.7-3.4 21.3 1.6 5.1 3 23.4 12.1 20.9.8 8.1 1.7 16.4 3.9 24.3 1.5 5.3 4.6 9.8 8.2 13.9 1.8 2 2.7 2.2 2.6 4.8-.1 7.8.1 16.2-1.9 23.8s-18.7 10.8-25.4 12.2c-14.8 3-28.6 4.7-41.4 11.5C84.8 320.6 76 289 76 256c0-47.9 19.2-94 53.2-127.7C162.7 95 207.1 76.4 254.3 76c47.6-.4 93.7 18.1 127.8 51.5 34.8 34.1 54 79.9 54 128.5 0 24.9-5 48.9-14.5 71.1-5.6-7-13.4-12.3-22.3-15.2z"},child:[]}]})(e)}function Y9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416.3 256c0-21 13.1-38.9 31.7-46.1-4.9-20.5-13-39.7-23.7-57.1-6.4 2.8-13.2 4.3-20.1 4.3-12.6 0-25.2-4.8-34.9-14.4-14.9-14.9-18.2-36.8-10.2-55-17.3-10.7-36.6-18.8-57-23.7C295 82.5 277 95.7 256 95.7S217 82.5 209.9 64c-20.5 4.9-39.7 13-57.1 23.7 8.1 18.1 4.7 40.1-10.2 55-9.6 9.6-22.3 14.4-34.9 14.4-6.9 0-13.7-1.4-20.1-4.3C77 170.3 68.9 189.5 64 210c18.5 7.1 31.7 25 31.7 46.1 0 21-13.1 38.9-31.6 46.1 4.9 20.5 13 39.7 23.7 57.1 6.4-2.8 13.2-4.2 20-4.2 12.6 0 25.2 4.8 34.9 14.4 14.8 14.8 18.2 36.8 10.2 54.9 17.4 10.7 36.7 18.8 57.1 23.7 7.1-18.5 25-31.6 46-31.6s38.9 13.1 46 31.6c20.5-4.9 39.7-13 57.1-23.7-8-18.1-4.6-40 10.2-54.9 9.6-9.6 22.2-14.4 34.9-14.4 6.8 0 13.7 1.4 20 4.2 10.7-17.4 18.8-36.7 23.7-57.1-18.4-7.2-31.6-25.1-31.6-46.2zm-159.4 79.9c-44.3 0-80-35.9-80-80s35.7-80 80-80 80 35.9 80 80-35.7 80-80 80z"},child:[]}]})(e)}function H9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M261 149.3V64H48v384h416V149.3H261zm-127.8 256H90.6v-42.7h42.6v42.7zm0-85.3H90.6v-42.7h42.6V320zm0-85.3H90.6V192h42.6v42.7zm0-85.4H90.6v-42.7h42.6v42.7zm85.2 256h-42.6v-42.7h42.6v42.7zm0-85.3h-42.6v-42.7h42.6V320zm0-85.3h-42.6V192h42.6v42.7zm0-85.4h-42.6v-42.7h42.6v42.7zm203 256H261v-42.7h42.6V320H261v-42.7h42.6v-42.7H261V192h160.4v213.3zm-37.6-170.6h-42.6v42.7h42.6v-42.7zm0 85.3h-42.6v42.7h42.6V320z"},child:[]}]})(e)}function F9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422s-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256s17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]},{tag:"path",attr:{d:"M360 330.9L330.9 360 256 285.1 181.1 360 152 330.9l74.9-74.9-74.9-74.9 29.1-29.1 74.9 74.9 74.9-74.9 29.1 29.1-74.9 74.9z"},child:[]}]})(e)}function E9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(e)}function K9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M239.208 343.937c-17.78 10.103-38.342 15.876-60.255 15.876-21.909 0-42.467-5.771-60.246-15.87C71.544 358.331 42.643 406 32 448h293.912c-10.639-42-39.537-89.683-86.704-104.063zM178.953 120.035c-58.479 0-105.886 47.394-105.886 105.858 0 58.464 47.407 105.857 105.886 105.857s105.886-47.394 105.886-105.857c0-58.464-47.408-105.858-105.886-105.858zm0 186.488c-33.671 0-62.445-22.513-73.997-50.523H252.95c-11.554 28.011-40.326 50.523-73.997 50.523z"},child:[]},{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M322.602 384H480c-10.638-42-39.537-81.691-86.703-96.072-17.781 10.104-38.343 15.873-60.256 15.873-14.823 0-29.024-2.654-42.168-7.49-7.445 12.47-16.927 25.592-27.974 34.906C289.245 341.354 309.146 364 322.602 384zM306.545 200h100.493c-11.554 28-40.327 50.293-73.997 50.293-8.875 0-17.404-1.692-25.375-4.51a128.411 128.411 0 0 1-6.52 25.118c10.066 3.174 20.779 4.862 31.895 4.862 58.479 0 105.886-47.41 105.886-105.872 0-58.465-47.407-105.866-105.886-105.866-37.49 0-70.427 19.703-89.243 49.09C275.607 131.383 298.961 163 306.545 200z"},child:[]}]}]})(e)}function lh(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M249.2 224c-14.2-40.2-55.1-72-100.2-72-57.2 0-101 46.8-101 104s45.8 104 103 104c45.1 0 84.1-31.8 98.2-72H352v64h69.1v-64H464v-64H249.2zm-97.6 66.5c-19 0-34.5-15.5-34.5-34.5s15.5-34.5 34.5-34.5 34.5 15.5 34.5 34.5-15.5 34.5-34.5 34.5z"},child:[]}]})(e)}function L9(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(e)}function dA(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function QS(e){return ye({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(e)}function OS(e){return ye({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function IA(e){return ye({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function _S(e){return ye({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"},child:[]}]})(e)}function qS(e){return ye({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(e)}function $S(e){return ye({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"},child:[]}]})(e)}function CA(e){return ye({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(e)}function eV(e){return ye({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(e)}function M9(e){return ye({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-352 96c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm112 236.8c0 10.6-10 19.2-22.4 19.2H86.4C74 384 64 375.4 64 364.8v-19.2c0-31.8 30.1-57.6 67.2-57.6h5c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h5c37.1 0 67.2 25.8 67.2 57.6v19.2zM512 312c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-64c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-64c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function mA(e){return ye({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function T9(e){return ye({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function ki(e){return ye({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function xi(e){return ye({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function Mb(e){return ye({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function j9(e){return ye({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"},child:[]}]})(e)}function z9(e){return ye({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function hA(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(e)}function D9(e){return ye({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}const Lr=(e={})=>{const[t,n]=m.useState(e);return{...t,formState:t,onInputChange:({target:c})=>{const{name:u,value:d}=c;n({...t,[u]:d})},onResetForm:()=>{n(e)},onCheckBoxChange:({target:c})=>{const{name:u,value:d,checked:I}=c;n({...t,[u]:I})},updateForm:c=>{n({...c})},onMultiInputChange:c=>{for(const{target:u}of c){const{name:d,value:I}=u;n({...t,[d]:I})}},onInputChangeLatLng:(c,u)=>{n(d=>({...d,lat:parseFloat(c),lng:parseFloat(u)}))}}};function tV(e,t){return function(){return e.apply(t,arguments)}}const{toString:U9}=Object.prototype,{getPrototypeOf:fA}=Object,Uu=(e=>t=>{const n=U9.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Zo=e=>(e=e.toLowerCase(),t=>Uu(t)===e),Pu=e=>t=>typeof t===e,{isArray:jl}=Array,da=Pu("undefined");function P9(e){return e!==null&&!da(e)&&e.constructor!==null&&!da(e.constructor)&&zn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const nV=Zo("ArrayBuffer");function Q9(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&nV(e.buffer),t}const O9=Pu("string"),zn=Pu("function"),oV=Pu("number"),Qu=e=>e!==null&&typeof e=="object",_9=e=>e===!0||e===!1,rc=e=>{if(Uu(e)!=="object")return!1;const t=fA(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},q9=Zo("Date"),$9=Zo("File"),eY=Zo("Blob"),tY=Zo("FileList"),nY=e=>Qu(e)&&zn(e.pipe),oY=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||zn(e.append)&&((t=Uu(e))==="formdata"||t==="object"&&zn(e.toString)&&e.toString()==="[object FormData]"))},rY=Zo("URLSearchParams"),iY=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sa(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,r;if(typeof e!="object"&&(e=[e]),jl(e))for(o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let s;for(o=0;o<l;o++)s=i[o],t.call(null,e[s],s,e)}}function rV(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,r;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const iV=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),lV=e=>!da(e)&&e!==iV;function sh(){const{caseless:e}=lV(this)&&this||{},t={},n=(o,r)=>{const i=e&&rV(t,r)||r;rc(t[i])&&rc(o)?t[i]=sh(t[i],o):rc(o)?t[i]=sh({},o):jl(o)?t[i]=o.slice():t[i]=o};for(let o=0,r=arguments.length;o<r;o++)arguments[o]&&Sa(arguments[o],n);return t}const lY=(e,t,n,{allOwnKeys:o}={})=>(Sa(t,(r,i)=>{n&&zn(r)?e[i]=tV(r,n):e[i]=r},{allOwnKeys:o}),e),sY=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),aY=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},gY=(e,t,n,o)=>{let r,i,l;const s={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)l=r[i],(!o||o(l,e,t))&&!s[l]&&(t[l]=e[l],s[l]=!0);e=n!==!1&&fA(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},cY=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},uY=e=>{if(!e)return null;if(jl(e))return e;let t=e.length;if(!oV(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},dY=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&fA(Uint8Array)),IY=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=o.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},CY=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},mY=Zo("HTMLFormElement"),hY=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,r){return o.toUpperCase()+r}),Tb=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),fY=Zo("RegExp"),sV=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};Sa(n,(r,i)=>{let l;(l=t(r,i,e))!==!1&&(o[i]=l||r)}),Object.defineProperties(e,o)},AY=e=>{sV(e,(t,n)=>{if(zn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(zn(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},pY=(e,t)=>{const n={},o=r=>{r.forEach(i=>{n[i]=!0})};return jl(e)?o(e):o(String(e).split(t)),n},bY=()=>{},yY=(e,t)=>(e=+e,Number.isFinite(e)?e:t),NI="abcdefghijklmnopqrstuvwxyz",jb="0123456789",aV={DIGIT:jb,ALPHA:NI,ALPHA_DIGIT:NI+NI.toUpperCase()+jb},vY=(e=16,t=aV.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n};function ZY(e){return!!(e&&zn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const GY=e=>{const t=new Array(10),n=(o,r)=>{if(Qu(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[r]=o;const i=jl(o)?[]:{};return Sa(o,(l,s)=>{const a=n(l,r+1);!da(a)&&(i[s]=a)}),t[r]=void 0,i}}return o};return n(e,0)},BY=Zo("AsyncFunction"),SY=e=>e&&(Qu(e)||zn(e))&&zn(e.then)&&zn(e.catch),te={isArray:jl,isArrayBuffer:nV,isBuffer:P9,isFormData:oY,isArrayBufferView:Q9,isString:O9,isNumber:oV,isBoolean:_9,isObject:Qu,isPlainObject:rc,isUndefined:da,isDate:q9,isFile:$9,isBlob:eY,isRegExp:fY,isFunction:zn,isStream:nY,isURLSearchParams:rY,isTypedArray:dY,isFileList:tY,forEach:Sa,merge:sh,extend:lY,trim:iY,stripBOM:sY,inherits:aY,toFlatObject:gY,kindOf:Uu,kindOfTest:Zo,endsWith:cY,toArray:uY,forEachEntry:IY,matchAll:CY,isHTMLForm:mY,hasOwnProperty:Tb,hasOwnProp:Tb,reduceDescriptors:sV,freezeMethods:AY,toObjectSet:pY,toCamelCase:hY,noop:bY,toFiniteNumber:yY,findKey:rV,global:iV,isContextDefined:lV,ALPHABET:aV,generateString:vY,isSpecCompliantForm:ZY,toJSONObject:GY,isAsyncFn:BY,isThenable:SY};function Ne(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}te.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const gV=Ne.prototype,cV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{cV[e]={value:e}});Object.defineProperties(Ne,cV);Object.defineProperty(gV,"isAxiosError",{value:!0});Ne.from=(e,t,n,o,r,i)=>{const l=Object.create(gV);return te.toFlatObject(e,l,function(a){return a!==Error.prototype},s=>s!=="isAxiosError"),Ne.call(l,e.message,t,n,o,r),l.cause=e,l.name=e.name,i&&Object.assign(l,i),l};const VY=null;function ah(e){return te.isPlainObject(e)||te.isArray(e)}function uV(e){return te.endsWith(e,"[]")?e.slice(0,-2):e}function zb(e,t,n){return e?e.concat(t).map(function(r,i){return r=uV(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function RY(e){return te.isArray(e)&&!e.some(ah)}const WY=te.toFlatObject(te,{},null,function(t){return/^is[A-Z]/.test(t)});function Ou(e,t,n){if(!te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,v){return!te.isUndefined(v[A])});const o=n.metaTokens,r=n.visitor||u,i=n.dots,l=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&te.isSpecCompliantForm(t);if(!te.isFunction(r))throw new TypeError("visitor must be a function");function c(f){if(f===null)return"";if(te.isDate(f))return f.toISOString();if(!a&&te.isBlob(f))throw new Ne("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(f)||te.isTypedArray(f)?a&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,A,v){let h=f;if(f&&!v&&typeof f=="object"){if(te.endsWith(A,"{}"))A=o?A:A.slice(0,-2),f=JSON.stringify(f);else if(te.isArray(f)&&RY(f)||(te.isFileList(f)||te.endsWith(A,"[]"))&&(h=te.toArray(f)))return A=uV(A),h.forEach(function(b,y){!(te.isUndefined(b)||b===null)&&t.append(l===!0?zb([A],y,i):l===null?A:A+"[]",c(b))}),!1}return ah(f)?!0:(t.append(zb(v,A,i),c(f)),!1)}const d=[],I=Object.assign(WY,{defaultVisitor:u,convertValue:c,isVisitable:ah});function C(f,A){if(!te.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+A.join("."));d.push(f),te.forEach(f,function(h,p){(!(te.isUndefined(h)||h===null)&&r.call(t,h,te.isString(p)?p.trim():p,A,I))===!0&&C(h,A?A.concat(p):[p])}),d.pop()}}if(!te.isObject(e))throw new TypeError("data must be an object");return C(e),t}function Db(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function AA(e,t){this._pairs=[],e&&Ou(e,this,t)}const dV=AA.prototype;dV.append=function(t,n){this._pairs.push([t,n])};dV.toString=function(t){const n=t?function(o){return t.call(this,o,Db)}:Db;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function wY(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function IV(e,t,n){if(!t)return e;const o=n&&n.encode||wY,r=n&&n.serialize;let i;if(r?i=r(t,n):i=te.isURLSearchParams(t)?t.toString():new AA(t,n).toString(o),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class kY{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){te.forEach(this.handlers,function(o){o!==null&&t(o)})}}const Ub=kY,CV={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xY=typeof URLSearchParams<"u"?URLSearchParams:AA,XY=typeof FormData<"u"?FormData:null,JY=typeof Blob<"u"?Blob:null,NY={isBrowser:!0,classes:{URLSearchParams:xY,FormData:XY,Blob:JY},protocols:["http","https","file","blob","url","data"]},mV=typeof window<"u"&&typeof document<"u",YY=(e=>mV&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),HY=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),FY=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mV,hasStandardBrowserEnv:YY,hasStandardBrowserWebWorkerEnv:HY},Symbol.toStringTag,{value:"Module"})),Io={...FY,...NY};function EY(e,t){return Ou(e,new Io.classes.URLSearchParams,Object.assign({visitor:function(n,o,r,i){return Io.isNode&&te.isBuffer(n)?(this.append(o,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function KY(e){return te.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function LY(e){const t={},n=Object.keys(e);let o;const r=n.length;let i;for(o=0;o<r;o++)i=n[o],t[i]=e[i];return t}function hV(e){function t(n,o,r,i){let l=n[i++];if(l==="__proto__")return!0;const s=Number.isFinite(+l),a=i>=n.length;return l=!l&&te.isArray(r)?r.length:l,a?(te.hasOwnProp(r,l)?r[l]=[r[l],o]:r[l]=o,!s):((!r[l]||!te.isObject(r[l]))&&(r[l]=[]),t(n,o,r[l],i)&&te.isArray(r[l])&&(r[l]=LY(r[l])),!s)}if(te.isFormData(e)&&te.isFunction(e.entries)){const n={};return te.forEachEntry(e,(o,r)=>{t(KY(o),r,n,0)}),n}return null}function MY(e,t,n){if(te.isString(e))try{return(t||JSON.parse)(e),te.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const pA={transitional:CV,adapter:["xhr","http"],transformRequest:[function(t,n){const o=n.getContentType()||"",r=o.indexOf("application/json")>-1,i=te.isObject(t);if(i&&te.isHTMLForm(t)&&(t=new FormData(t)),te.isFormData(t))return r&&r?JSON.stringify(hV(t)):t;if(te.isArrayBuffer(t)||te.isBuffer(t)||te.isStream(t)||te.isFile(t)||te.isBlob(t))return t;if(te.isArrayBufferView(t))return t.buffer;if(te.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return EY(t,this.formSerializer).toString();if((s=te.isFileList(t))||o.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Ou(s?{"files[]":t}:t,a&&new a,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),MY(t)):t}],transformResponse:[function(t){const n=this.transitional||pA.transitional,o=n&&n.forcedJSONParsing,r=this.responseType==="json";if(t&&te.isString(t)&&(o&&!this.responseType||r)){const l=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(s){if(l)throw s.name==="SyntaxError"?Ne.from(s,Ne.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Io.classes.FormData,Blob:Io.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],e=>{pA.headers[e]={}});const bA=pA,TY=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jY=e=>{const t={};let n,o,r;return e&&e.split(`
`).forEach(function(l){r=l.indexOf(":"),n=l.substring(0,r).trim().toLowerCase(),o=l.substring(r+1).trim(),!(!n||t[n]&&TY[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},Pb=Symbol("internals");function ds(e){return e&&String(e).trim().toLowerCase()}function ic(e){return e===!1||e==null?e:te.isArray(e)?e.map(ic):String(e)}function zY(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const DY=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function YI(e,t,n,o,r){if(te.isFunction(o))return o.call(this,t,n);if(r&&(t=n),!!te.isString(t)){if(te.isString(o))return t.indexOf(o)!==-1;if(te.isRegExp(o))return o.test(t)}}function UY(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function PY(e,t){const n=te.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(r,i,l){return this[o].call(this,t,r,i,l)},configurable:!0})})}class _u{constructor(t){t&&this.set(t)}set(t,n,o){const r=this;function i(s,a,c){const u=ds(a);if(!u)throw new Error("header name must be a non-empty string");const d=te.findKey(r,u);(!d||r[d]===void 0||c===!0||c===void 0&&r[d]!==!1)&&(r[d||a]=ic(s))}const l=(s,a)=>te.forEach(s,(c,u)=>i(c,u,a));return te.isPlainObject(t)||t instanceof this.constructor?l(t,n):te.isString(t)&&(t=t.trim())&&!DY(t)?l(jY(t),n):t!=null&&i(n,t,o),this}get(t,n){if(t=ds(t),t){const o=te.findKey(this,t);if(o){const r=this[o];if(!n)return r;if(n===!0)return zY(r);if(te.isFunction(n))return n.call(this,r,o);if(te.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ds(t),t){const o=te.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||YI(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let r=!1;function i(l){if(l=ds(l),l){const s=te.findKey(o,l);s&&(!n||YI(o,o[s],s,n))&&(delete o[s],r=!0)}}return te.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let o=n.length,r=!1;for(;o--;){const i=n[o];(!t||YI(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,o={};return te.forEach(this,(r,i)=>{const l=te.findKey(o,i);if(l){n[l]=ic(r),delete n[i];return}const s=t?UY(i):String(i).trim();s!==i&&delete n[i],n[s]=ic(r),o[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return te.forEach(this,(o,r)=>{o!=null&&o!==!1&&(n[r]=t&&te.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(r=>o.set(r)),o}static accessor(t){const o=(this[Pb]=this[Pb]={accessors:{}}).accessors,r=this.prototype;function i(l){const s=ds(l);o[s]||(PY(r,l),o[s]=!0)}return te.isArray(t)?t.forEach(i):i(t),this}}_u.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);te.reduceDescriptors(_u.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});te.freezeMethods(_u);const Yo=_u;function HI(e,t){const n=this||bA,o=t||n,r=Yo.from(o.headers);let i=o.data;return te.forEach(e,function(s){i=s.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function fV(e){return!!(e&&e.__CANCEL__)}function Va(e,t,n){Ne.call(this,e??"canceled",Ne.ERR_CANCELED,t,n),this.name="CanceledError"}te.inherits(Va,Ne,{__CANCEL__:!0});function QY(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Ne("Request failed with status code "+n.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const OY=Io.hasStandardBrowserEnv?{write(e,t,n,o,r,i){const l=[e+"="+encodeURIComponent(t)];te.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),te.isString(o)&&l.push("path="+o),te.isString(r)&&l.push("domain="+r),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _Y(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function qY(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function AV(e,t){return e&&!_Y(t)?qY(e,t):t}const $Y=Io.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let o;function r(i){let l=i;return t&&(n.setAttribute("href",l),l=n.href),n.setAttribute("href",l),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=r(window.location.href),function(l){const s=te.isString(l)?r(l):l;return s.protocol===o.protocol&&s.host===o.host}}():function(){return function(){return!0}}();function e3(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function t3(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r=0,i=0,l;return t=t!==void 0?t:1e3,function(a){const c=Date.now(),u=o[i];l||(l=c),n[r]=a,o[r]=c;let d=i,I=0;for(;d!==r;)I+=n[d++],d=d%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),c-l<t)return;const C=u&&c-u;return C?Math.round(I*1e3/C):void 0}}function Qb(e,t){let n=0;const o=t3(50,250);return r=>{const i=r.loaded,l=r.lengthComputable?r.total:void 0,s=i-n,a=o(s),c=i<=l;n=i;const u={loaded:i,total:l,progress:l?i/l:void 0,bytes:s,rate:a||void 0,estimated:a&&l&&c?(l-i)/a:void 0,event:r};u[t?"download":"upload"]=!0,e(u)}}const n3=typeof XMLHttpRequest<"u",o3=n3&&function(e){return new Promise(function(n,o){let r=e.data;const i=Yo.from(e.headers).normalize();let{responseType:l,withXSRFToken:s}=e,a;function c(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}let u;if(te.isFormData(r)){if(Io.hasStandardBrowserEnv||Io.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((u=i.getContentType())!==!1){const[A,...v]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];i.setContentType([A||"multipart/form-data",...v].join("; "))}}let d=new XMLHttpRequest;if(e.auth){const A=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(A+":"+v))}const I=AV(e.baseURL,e.url);d.open(e.method.toUpperCase(),IV(I,e.params,e.paramsSerializer),!0),d.timeout=e.timeout;function C(){if(!d)return;const A=Yo.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),h={data:!l||l==="text"||l==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:A,config:e,request:d};QY(function(b){n(b),c()},function(b){o(b),c()},h),d=null}if("onloadend"in d?d.onloadend=C:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(C)},d.onabort=function(){d&&(o(new Ne("Request aborted",Ne.ECONNABORTED,e,d)),d=null)},d.onerror=function(){o(new Ne("Network Error",Ne.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let v=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const h=e.transitional||CV;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),o(new Ne(v,h.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,e,d)),d=null},Io.hasStandardBrowserEnv&&(s&&te.isFunction(s)&&(s=s(e)),s||s!==!1&&$Y(I))){const A=e.xsrfHeaderName&&e.xsrfCookieName&&OY.read(e.xsrfCookieName);A&&i.set(e.xsrfHeaderName,A)}r===void 0&&i.setContentType(null),"setRequestHeader"in d&&te.forEach(i.toJSON(),function(v,h){d.setRequestHeader(h,v)}),te.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),l&&l!=="json"&&(d.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&d.addEventListener("progress",Qb(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",Qb(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=A=>{d&&(o(!A||A.type?new Va(null,e,d):A),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const f=e3(I);if(f&&Io.protocols.indexOf(f)===-1){o(new Ne("Unsupported protocol "+f+":",Ne.ERR_BAD_REQUEST,e));return}d.send(r||null)})},gh={http:VY,xhr:o3};te.forEach(gh,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ob=e=>`- ${e}`,r3=e=>te.isFunction(e)||e===null||e===!1,pV={getAdapter:e=>{e=te.isArray(e)?e:[e];const{length:t}=e;let n,o;const r={};for(let i=0;i<t;i++){n=e[i];let l;if(o=n,!r3(n)&&(o=gh[(l=String(n)).toLowerCase()],o===void 0))throw new Ne(`Unknown adapter '${l}'`);if(o)break;r[l||"#"+i]=o}if(!o){const i=Object.entries(r).map(([s,a])=>`adapter ${s} `+(a===!1?"is not supported by the environment":"is not available in the build"));let l=t?i.length>1?`since :
`+i.map(Ob).join(`
`):" "+Ob(i[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return o},adapters:gh};function FI(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Va(null,e)}function _b(e){return FI(e),e.headers=Yo.from(e.headers),e.data=HI.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),pV.getAdapter(e.adapter||bA.adapter)(e).then(function(o){return FI(e),o.data=HI.call(e,e.transformResponse,o),o.headers=Yo.from(o.headers),o},function(o){return fV(o)||(FI(e),o&&o.response&&(o.response.data=HI.call(e,e.transformResponse,o.response),o.response.headers=Yo.from(o.response.headers))),Promise.reject(o)})}const qb=e=>e instanceof Yo?e.toJSON():e;function wl(e,t){t=t||{};const n={};function o(c,u,d){return te.isPlainObject(c)&&te.isPlainObject(u)?te.merge.call({caseless:d},c,u):te.isPlainObject(u)?te.merge({},u):te.isArray(u)?u.slice():u}function r(c,u,d){if(te.isUndefined(u)){if(!te.isUndefined(c))return o(void 0,c,d)}else return o(c,u,d)}function i(c,u){if(!te.isUndefined(u))return o(void 0,u)}function l(c,u){if(te.isUndefined(u)){if(!te.isUndefined(c))return o(void 0,c)}else return o(void 0,u)}function s(c,u,d){if(d in t)return o(c,u);if(d in e)return o(void 0,c)}const a={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:s,headers:(c,u)=>r(qb(c),qb(u),!0)};return te.forEach(Object.keys(Object.assign({},e,t)),function(u){const d=a[u]||r,I=d(e[u],t[u],u);te.isUndefined(I)&&d!==s||(n[u]=I)}),n}const bV="1.6.5",yA={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{yA[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const $b={};yA.transitional=function(t,n,o){function r(i,l){return"[Axios v"+bV+"] Transitional option '"+i+"'"+l+(o?". "+o:"")}return(i,l,s)=>{if(t===!1)throw new Ne(r(l," has been removed"+(n?" in "+n:"")),Ne.ERR_DEPRECATED);return n&&!$b[l]&&($b[l]=!0,console.warn(r(l," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,l,s):!0}};function i3(e,t,n){if(typeof e!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const i=o[r],l=t[i];if(l){const s=e[i],a=s===void 0||l(s,i,e);if(a!==!0)throw new Ne("option "+i+" must be "+a,Ne.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ne("Unknown option "+i,Ne.ERR_BAD_OPTION)}}const ch={assertOptions:i3,validators:yA},qo=ch.validators;class Pc{constructor(t){this.defaults=t,this.interceptors={request:new Ub,response:new Ub}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=wl(this.defaults,n);const{transitional:o,paramsSerializer:r,headers:i}=n;o!==void 0&&ch.assertOptions(o,{silentJSONParsing:qo.transitional(qo.boolean),forcedJSONParsing:qo.transitional(qo.boolean),clarifyTimeoutError:qo.transitional(qo.boolean)},!1),r!=null&&(te.isFunction(r)?n.paramsSerializer={serialize:r}:ch.assertOptions(r,{encode:qo.function,serialize:qo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=i&&te.merge(i.common,i[n.method]);i&&te.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),n.headers=Yo.concat(l,i);const s=[];let a=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(n)===!1||(a=a&&A.synchronous,s.unshift(A.fulfilled,A.rejected))});const c=[];this.interceptors.response.forEach(function(A){c.push(A.fulfilled,A.rejected)});let u,d=0,I;if(!a){const f=[_b.bind(this),void 0];for(f.unshift.apply(f,s),f.push.apply(f,c),I=f.length,u=Promise.resolve(n);d<I;)u=u.then(f[d++],f[d++]);return u}I=s.length;let C=n;for(d=0;d<I;){const f=s[d++],A=s[d++];try{C=f(C)}catch(v){A.call(this,v);break}}try{u=_b.call(this,C)}catch(f){return Promise.reject(f)}for(d=0,I=c.length;d<I;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=wl(this.defaults,t);const n=AV(t.baseURL,t.url);return IV(n,t.params,t.paramsSerializer)}}te.forEach(["delete","get","head","options"],function(t){Pc.prototype[t]=function(n,o){return this.request(wl(o||{},{method:t,url:n,data:(o||{}).data}))}});te.forEach(["post","put","patch"],function(t){function n(o){return function(i,l,s){return this.request(wl(s||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Pc.prototype[t]=n(),Pc.prototype[t+"Form"]=n(!0)});const lc=Pc;class vA{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const o=this;this.promise.then(r=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](r);o._listeners=null}),this.promise.then=r=>{let i;const l=new Promise(s=>{o.subscribe(s),i=s}).then(r);return l.cancel=function(){o.unsubscribe(i)},l},t(function(i,l,s){o.reason||(o.reason=new Va(i,l,s),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new vA(function(r){t=r}),cancel:t}}}const l3=vA;function s3(e){return function(n){return e.apply(null,n)}}function a3(e){return te.isObject(e)&&e.isAxiosError===!0}const uh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uh).forEach(([e,t])=>{uh[t]=e});const g3=uh;function yV(e){const t=new lc(e),n=tV(lc.prototype.request,t);return te.extend(n,lc.prototype,t,{allOwnKeys:!0}),te.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return yV(wl(e,r))},n}const Gt=yV(bA);Gt.Axios=lc;Gt.CanceledError=Va;Gt.CancelToken=l3;Gt.isCancel=fV;Gt.VERSION=bV;Gt.toFormData=Ou;Gt.AxiosError=Ne;Gt.Cancel=Gt.CanceledError;Gt.all=function(t){return Promise.all(t)};Gt.spread=s3;Gt.isAxiosError=a3;Gt.mergeConfig=wl;Gt.AxiosHeaders=Yo;Gt.formToJSON=e=>hV(te.isHTMLForm(e)?new FormData(e):e);Gt.getAdapter=pV.getAdapter;Gt.HttpStatusCode=g3;Gt.default=Gt;const Ie=Gt;var c3=e=>{switch(e){case"success":return I3;case"info":return m3;case"warning":return C3;case"error":return h3;default:return null}},u3=Array(12).fill(0),d3=({visible:e})=>P.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},P.createElement("div",{className:"sonner-spinner"},u3.map((t,n)=>P.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),I3=P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},P.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),C3=P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},P.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),m3=P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},P.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),h3=P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},P.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),f3=()=>{let[e,t]=P.useState(document.hidden);return P.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},dh=1,A3=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;let{message:o,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:dh++,l=this.toasts.find(a=>a.id===i),s=t.dismissible===void 0?!0:t.dismissible;return l?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...t,id:i,title:o}),{...a,...t,id:i,dismissible:s,title:o}):a):this.addToast({title:o,...r,dismissible:s,id:i}),i},this.dismiss=t=>(t||this.toasts.forEach(n=>{this.subscribers.forEach(o=>o({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:t,dismiss:!0})),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let o;n.loading!==void 0&&(o=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let r=t instanceof Promise?t:t(),i=o!==void 0;return r.then(async l=>{if(b3(l)&&!l.ok){i=!1;let s=typeof n.error=="function"?await n.error(`HTTP error! status: ${l.status}`):n.error,a=typeof n.description=="function"?await n.description(`HTTP error! status: ${l.status}`):n.description;this.create({id:o,type:"error",message:s,description:a})}else if(n.success!==void 0){i=!1;let s=typeof n.success=="function"?await n.success(l):n.success,a=typeof n.description=="function"?await n.description(l):n.description;this.create({id:o,type:"success",message:s,description:a})}}).catch(async l=>{if(n.error!==void 0){i=!1;let s=typeof n.error=="function"?await n.error(l):n.error,a=typeof n.description=="function"?await n.description(l):n.description;this.create({id:o,type:"error",message:s,description:a})}}).finally(()=>{var l;i&&(this.dismiss(o),o=void 0),(l=n.finally)==null||l.call(n)}),o},this.custom=(t,n)=>{let o=(n==null?void 0:n.id)||dh++;return this.create({jsx:t(o),id:o,...n}),o},this.subscribers=[],this.toasts=[]}},Cn=new A3,p3=(e,t)=>{let n=(t==null?void 0:t.id)||dh++;return Cn.addToast({title:e,...t,id:n}),n},b3=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",y3=p3,v3=()=>Cn.toasts,xe=Object.assign(y3,{success:Cn.success,info:Cn.info,warning:Cn.warning,error:Cn.error,custom:Cn.custom,message:Cn.message,promise:Cn.promise,dismiss:Cn.dismiss,loading:Cn.loading},{getHistory:v3});function Z3(e,{insertAt:t}={}){if(!e||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",t==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}Z3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ag(e){return e.label!==void 0}var G3=3,B3="32px",S3=4e3,V3=356,R3=14,W3=20,w3=200;function k3(...e){return e.filter(Boolean).join(" ")}var x3=e=>{var t,n,o,r,i,l,s,a,c,u;let{invert:d,toast:I,unstyled:C,interacting:f,setHeights:A,visibleToasts:v,heights:h,index:p,toasts:b,expanded:y,removeToast:Z,defaultRichColors:G,closeButton:V,style:S,cancelButtonStyle:k,actionButtonStyle:B,className:R="",descriptionClassName:W="",duration:w,position:X,gap:E,loadingIcon:M,expandByDefault:L,classNames:F,icons:Y,closeButtonAriaLabel:N="Close toast",pauseWhenPageIsHidden:x,cn:H}=e,[K,T]=P.useState(!1),[j,J]=P.useState(!1),[z,U]=P.useState(!1),[D,O]=P.useState(!1),[ee,re]=P.useState(0),[ae,ge]=P.useState(0),ne=P.useRef(null),ue=P.useRef(null),me=p===0,q=p+1<=v,_=I.type,$=I.dismissible!==!1,oe=I.className||"",Q=I.descriptionClassName||"",ce=P.useMemo(()=>h.findIndex(ve=>ve.toastId===I.id)||0,[h,I.id]),le=P.useMemo(()=>{var ve;return(ve=I.closeButton)!=null?ve:V},[I.closeButton,V]),fe=P.useMemo(()=>I.duration||w||S3,[I.duration,w]),Ae=P.useRef(0),ie=P.useRef(0),pe=P.useRef(0),Ze=P.useRef(null),[Be,ht]=X.split("-"),io=P.useMemo(()=>h.reduce((ve,Xe,Me)=>Me>=ce?ve:ve+Xe.height,0),[h,ce]),un=f3(),Go=I.invert||d,xn=_==="loading";ie.current=P.useMemo(()=>ce*E+io,[ce,io]),P.useEffect(()=>{T(!0)},[]),P.useLayoutEffect(()=>{if(!K)return;let ve=ue.current,Xe=ve.style.height;ve.style.height="auto";let Me=ve.getBoundingClientRect().height;ve.style.height=Xe,ge(Me),A(dn=>dn.find(Ut=>Ut.toastId===I.id)?dn.map(Ut=>Ut.toastId===I.id?{...Ut,height:Me}:Ut):[{toastId:I.id,height:Me,position:I.position},...dn])},[K,I.title,I.description,A,I.id]);let we=P.useCallback(()=>{J(!0),re(ie.current),A(ve=>ve.filter(Xe=>Xe.toastId!==I.id)),setTimeout(()=>{Z(I)},w3)},[I,Z,A,ie]);P.useEffect(()=>{if(I.promise&&_==="loading"||I.duration===1/0||I.type==="loading")return;let ve,Xe=fe;return y||f||x&&un?(()=>{if(pe.current<Ae.current){let Me=new Date().getTime()-Ae.current;Xe=Xe-Me}pe.current=new Date().getTime()})():Xe!==1/0&&(Ae.current=new Date().getTime(),ve=setTimeout(()=>{var Me;(Me=I.onAutoClose)==null||Me.call(I,I),we()},Xe)),()=>clearTimeout(ve)},[y,f,L,I,fe,we,I.promise,_,x,un]),P.useEffect(()=>{let ve=ue.current;if(ve){let Xe=ve.getBoundingClientRect().height;return ge(Xe),A(Me=>[{toastId:I.id,height:Xe,position:I.position},...Me]),()=>A(Me=>Me.filter(dn=>dn.toastId!==I.id))}},[A,I.id]),P.useEffect(()=>{I.delete&&we()},[we,I.delete]);function ft(){return Y!=null&&Y.loading?P.createElement("div",{className:"sonner-loader","data-visible":_==="loading"},Y.loading):M?P.createElement("div",{className:"sonner-loader","data-visible":_==="loading"},M):P.createElement(d3,{visible:_==="loading"})}return P.createElement("li",{"aria-live":I.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ue,className:H(R,oe,F==null?void 0:F.toast,(t=I==null?void 0:I.classNames)==null?void 0:t.toast,F==null?void 0:F.default,F==null?void 0:F[_],(n=I==null?void 0:I.classNames)==null?void 0:n[_]),"data-sonner-toast":"","data-rich-colors":(o=I.richColors)!=null?o:G,"data-styled":!(I.jsx||I.unstyled||C),"data-mounted":K,"data-promise":!!I.promise,"data-removed":j,"data-visible":q,"data-y-position":Be,"data-x-position":ht,"data-index":p,"data-front":me,"data-swiping":z,"data-dismissible":$,"data-type":_,"data-invert":Go,"data-swipe-out":D,"data-expanded":!!(y||L&&K),style:{"--index":p,"--toasts-before":p,"--z-index":b.length-p,"--offset":`${j?ee:ie.current}px`,"--initial-height":L?"auto":`${ae}px`,...S,...I.style},onPointerDown:ve=>{xn||!$||(ne.current=new Date,re(ie.current),ve.target.setPointerCapture(ve.pointerId),ve.target.tagName!=="BUTTON"&&(U(!0),Ze.current={x:ve.clientX,y:ve.clientY}))},onPointerUp:()=>{var ve,Xe,Me,dn;if(D||!$)return;Ze.current=null;let Ut=Number(((ve=ue.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Qr=new Date().getTime()-((Xe=ne.current)==null?void 0:Xe.getTime()),Ta=Math.abs(Ut)/Qr;if(Math.abs(Ut)>=W3||Ta>.11){re(ie.current),(Me=I.onDismiss)==null||Me.call(I,I),we(),O(!0);return}(dn=ue.current)==null||dn.style.setProperty("--swipe-amount","0px"),U(!1)},onPointerMove:ve=>{var Xe;if(!Ze.current||!$)return;let Me=ve.clientY-Ze.current.y,dn=ve.clientX-Ze.current.x,Ut=(Be==="top"?Math.min:Math.max)(0,Me),Qr=ve.pointerType==="touch"?10:2;Math.abs(Ut)>Qr?(Xe=ue.current)==null||Xe.style.setProperty("--swipe-amount",`${Me}px`):Math.abs(dn)>Qr&&(Ze.current=null)}},le&&!I.jsx?P.createElement("button",{"aria-label":N,"data-disabled":xn,"data-close-button":!0,onClick:xn||!$?()=>{}:()=>{var ve;we(),(ve=I.onDismiss)==null||ve.call(I,I)},className:H(F==null?void 0:F.closeButton,(r=I==null?void 0:I.classNames)==null?void 0:r.closeButton)},P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},P.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),P.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,I.jsx||P.isValidElement(I.title)?I.jsx||I.title:P.createElement(P.Fragment,null,_||I.icon||I.promise?P.createElement("div",{"data-icon":"",className:H(F==null?void 0:F.icon,(i=I==null?void 0:I.classNames)==null?void 0:i.icon)},I.promise||I.type==="loading"&&!I.icon?I.icon||ft():null,I.type!=="loading"?I.icon||(Y==null?void 0:Y[_])||c3(_):null):null,P.createElement("div",{"data-content":"",className:H(F==null?void 0:F.content,(l=I==null?void 0:I.classNames)==null?void 0:l.content)},P.createElement("div",{"data-title":"",className:H(F==null?void 0:F.title,(s=I==null?void 0:I.classNames)==null?void 0:s.title)},I.title),I.description?P.createElement("div",{"data-description":"",className:H(W,Q,F==null?void 0:F.description,(a=I==null?void 0:I.classNames)==null?void 0:a.description)},I.description):null),P.isValidElement(I.cancel)?I.cancel:I.cancel&&Ag(I.cancel)?P.createElement("button",{"data-button":!0,"data-cancel":!0,style:I.cancelButtonStyle||k,onClick:ve=>{var Xe,Me;Ag(I.cancel)&&$&&((Me=(Xe=I.cancel).onClick)==null||Me.call(Xe,ve),we())},className:H(F==null?void 0:F.cancelButton,(c=I==null?void 0:I.classNames)==null?void 0:c.cancelButton)},I.cancel.label):null,P.isValidElement(I.action)?I.action:I.action&&Ag(I.action)?P.createElement("button",{"data-button":!0,"data-action":!0,style:I.actionButtonStyle||B,onClick:ve=>{var Xe,Me;Ag(I.action)&&(ve.defaultPrevented||((Me=(Xe=I.action).onClick)==null||Me.call(Xe,ve),we()))},className:H(F==null?void 0:F.actionButton,(u=I==null?void 0:I.classNames)==null?void 0:u.actionButton)},I.action.label):null))};function ey(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var Rn=e=>{let{invert:t,position:n="bottom-right",hotkey:o=["altKey","KeyT"],expand:r,closeButton:i,className:l,offset:s,theme:a="light",richColors:c,duration:u,style:d,visibleToasts:I=G3,toastOptions:C,dir:f=ey(),gap:A=R3,loadingIcon:v,icons:h,containerAriaLabel:p="Notifications",pauseWhenPageIsHidden:b,cn:y=k3}=e,[Z,G]=P.useState([]),V=P.useMemo(()=>Array.from(new Set([n].concat(Z.filter(x=>x.position).map(x=>x.position)))),[Z,n]),[S,k]=P.useState([]),[B,R]=P.useState(!1),[W,w]=P.useState(!1),[X,E]=P.useState(a!=="system"?a:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=P.useRef(null),L=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=P.useRef(null),Y=P.useRef(!1),N=P.useCallback(x=>{var H;(H=Z.find(K=>K.id===x.id))!=null&&H.delete||Cn.dismiss(x.id),G(K=>K.filter(({id:T})=>T!==x.id))},[Z]);return P.useEffect(()=>Cn.subscribe(x=>{if(x.dismiss){G(H=>H.map(K=>K.id===x.id?{...K,delete:!0}:K));return}setTimeout(()=>{hi.flushSync(()=>{G(H=>{let K=H.findIndex(T=>T.id===x.id);return K!==-1?[...H.slice(0,K),{...H[K],...x},...H.slice(K+1)]:[x,...H]})})})}),[]),P.useEffect(()=>{if(a!=="system"){E(a);return}a==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?E("dark"):E("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:x})=>{E(x?"dark":"light")})},[a]),P.useEffect(()=>{Z.length<=1&&R(!1)},[Z]),P.useEffect(()=>{let x=H=>{var K,T;o.every(j=>H[j]||H.code===j)&&(R(!0),(K=M.current)==null||K.focus()),H.code==="Escape"&&(document.activeElement===M.current||(T=M.current)!=null&&T.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[o]),P.useEffect(()=>{if(M.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,Y.current=!1)}},[M.current]),Z.length?P.createElement("section",{"aria-label":`${p} ${L}`,tabIndex:-1},V.map((x,H)=>{var K;let[T,j]=x.split("-");return P.createElement("ol",{key:x,dir:f==="auto"?ey():f,tabIndex:-1,ref:M,className:l,"data-sonner-toaster":!0,"data-theme":X,"data-y-position":T,"data-x-position":j,style:{"--front-toast-height":`${((K=S[0])==null?void 0:K.height)||0}px`,"--offset":typeof s=="number"?`${s}px`:s||B3,"--width":`${V3}px`,"--gap":`${A}px`,...d},onBlur:J=>{Y.current&&!J.currentTarget.contains(J.relatedTarget)&&(Y.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,F.current=J.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{W||R(!1)},onPointerDown:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||w(!0)},onPointerUp:()=>w(!1)},Z.filter(J=>!J.position&&H===0||J.position===x).map((J,z)=>{var U,D;return P.createElement(x3,{key:J.id,icons:h,index:z,toast:J,defaultRichColors:c,duration:(U=C==null?void 0:C.duration)!=null?U:u,className:C==null?void 0:C.className,descriptionClassName:C==null?void 0:C.descriptionClassName,invert:t,visibleToasts:I,closeButton:(D=C==null?void 0:C.closeButton)!=null?D:i,interacting:W,position:x,style:C==null?void 0:C.style,unstyled:C==null?void 0:C.unstyled,classNames:C==null?void 0:C.classNames,cancelButtonStyle:C==null?void 0:C.cancelButtonStyle,actionButtonStyle:C==null?void 0:C.actionButtonStyle,removeToast:N,toasts:Z.filter(O=>O.position==J.position),heights:S.filter(O=>O.position==J.position),setHeights:k,expandByDefault:r,gap:A,loadingIcon:v,expanded:B,pauseWhenPageIsHidden:b,cn:y})}))})):null};const Mr=()=>{const e="https://api.knowmeapp.com";return{createUser:async a=>{const c=new Promise(async(u,d)=>{Ie.post(`${e}/api/auth/new`,a).then(I=>(I.error==null?u(I):d(I.error.response.data.msg),I),I=>(d(I.response.data.msg),I))});return xe.promise(c,{loading:"Creando usuario...",success:u=>"Usuario creado exitosamente",error:u=>u}),await c},login:async a=>await Ie.post(`${e}/api/auth/`,a),renewToken:async a=>{const c=localStorage.getItem("token");return c==null?{status:500}:await Ie.get(`${e}/api/auth/renew`,{headers:{"x-token":c}})},validateUser:async a=>{const c=new Promise(async(u,d)=>{Ie.post(`${e}/api/auth/validate`,a).then(I=>(I.error==null?I.data.msg!="Usuario vlido"?d(I.data.msg):u(I):d(I.error.response.data.msg),I),I=>(d(I.response.data.msg),I))});return xe.promise(c,{loading:"Validando usuario...",success:u=>(console.log(u.data.msg),"Usuario vlido"),error:u=>u}),await c},createUserByInvitation:async(a,c)=>{const u=localStorage.getItem("token"),d=await Ie.post(`${e}/api/auth/user-by-invitation`,a,{headers:{"x-token":u}});if(d.data.ok){const{id:I}=d.data,C={id_organization_fk:c,id_user_fk:I,owner:parseInt(a.id_plan_fk)==9};await Ie.post(`${e}/api/org_users_detail`,C,{headers:{"x-token":u}})}return d},addPlan:async(a,c,u)=>await Ie.put(`${e}/api/auth/addplan/${a}`,c,{headers:{"x-token":u}}),changePassword:async a=>{const c=localStorage.getItem("token");return await Ie.post(`${e}/api/auth/change`,a,{headers:{"x-token":c}})}}};var vV={},kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.cssValue=kl.parseLengthAndUnit=void 0;var X3={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function ZV(e){if(typeof e=="number")return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();n.includes(".")?t=parseFloat(n):t=parseInt(n,10);var o=(e.match(/[^0-9]*$/)||"").toString();return X3[o]?{value:t,unit:o}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}kl.parseLengthAndUnit=ZV;function J3(e){var t=ZV(e);return"".concat(t.value).concat(t.unit)}kl.cssValue=J3;var qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.createAnimation=void 0;var N3=function(e,t,n){var o="react-spinners-".concat(e,"-").concat(n);if(typeof window>"u"||!window.document)return o;var r=document.createElement("style");document.head.appendChild(r);var i=r.sheet,l=`
    @keyframes `.concat(o,` {
      `).concat(t,`
    }
  `);return i&&i.insertRule(l,0),o};qu.createAnimation=N3;var Qc=lt&&lt.__assign||function(){return Qc=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Qc.apply(this,arguments)},Y3=lt&&lt.__createBinding||(Object.create?function(e,t,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){o===void 0&&(o=n),e[o]=t[n]}),H3=lt&&lt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),F3=lt&&lt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Y3(t,e,n);return H3(t,e),t},E3=lt&&lt.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};Object.defineProperty(vV,"__esModule",{value:!0});var K3=F3(m),ty=kl,L3=qu,M3=(0,L3.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function T3(e){var t=e.loading,n=t===void 0?!0:t,o=e.color,r=o===void 0?"#000000":o,i=e.speedMultiplier,l=i===void 0?1:i,s=e.cssOverride,a=s===void 0?{}:s,c=e.size,u=c===void 0?35:c,d=E3(e,["loading","color","speedMultiplier","cssOverride","size"]),I=Qc({background:"transparent !important",width:(0,ty.cssValue)(u),height:(0,ty.cssValue)(u),borderRadius:"100%",border:"2px solid",borderTopColor:r,borderBottomColor:"transparent",borderLeftColor:r,borderRightColor:r,display:"inline-block",animation:"".concat(M3," ").concat(.75/l,"s 0s infinite linear"),animationFillMode:"both"},a);return n?K3.createElement("span",Qc({style:I},d)):null}var j3=vV.default=T3;const ZA=()=>g.jsx("div",{className:"spinner-modal",children:g.jsx("div",{children:g.jsx(j3,{color:"#597393",size:150})})}),kt=m.createContext({user:{}});function z3(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm-7.5 12a2.5 2.5 0 1 1 0-5 2.47 2.47 0 0 1 1.5.512c-.604.456-1 1.173-1 1.988s.396 1.532 1 1.988a2.47 2.47 0 0 1-1.5.512zm4 0a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}const $u=()=>g.jsx(g.Fragment,{children:g.jsx("div",{className:"footer-main",children:g.jsxs("div",{className:"footer-container",children:[g.jsxs("div",{className:"footer-title",children:[g.jsxs("h3",{children:[" ",g.jsxs("a",{href:"https://www.knowmeapp.com/",target:"_blank",rel:"noopener noreferrer",children:["Know Me"," "]})]}),g.jsxs("p",{children:["Made with  by"," ",g.jsx("a",{href:"https://www.inxeniux.com/",target:"_blank",rel:"noopener noreferrer",children:"INXENIUX"})]})]}),g.jsxs("div",{className:"footer-socials",children:[g.jsx("div",{children:g.jsx(dA,{className:"footer-icon"})}),g.jsx("div",{children:g.jsx(CA,{className:"footer-icon"})}),g.jsx("div",{children:g.jsx(IA,{className:"footer-icon"})})]})]})})});const D3={email:"",password:""},U3=()=>{const[e,t]=m.useState(!1),[n,o]=m.useState(!1),r=ut(),{formState:i,onInputChange:l,onResetForm:s}=Lr(D3),{user:a}=m.useContext(kt),c=Mr(),u=()=>{t(!e)},d=async()=>{o(!0);try{const C=await c.login(i);if(C.status==200){o(!1);const{email:f,fullname:A,id:v,id_plan_fk:h,username:p,token:b,is_superuser:y}=C.data;a.email=f,a.fullname=A,a.id=v,a.id_plan_fk=h,a.username=p,localStorage.setItem("token",b),localStorage.setItem("id",v),localStorage.setItem("fullname",A),localStorage.setItem("email",f),localStorage.setItem("id_plan",h),localStorage.setItem("is_superuser",y),C.data.paymentInfo.completed==!1?(xe.info("El pago del plan no se ha completado, asignado plan bsico, hasta que se efectue el pago."),setTimeout(()=>{r("/home")},2e3)):r("/home")}}catch{xe.error("Error al iniciar sesin"),o(!1)}},I=26;return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"login-view",children:[n&&g.jsx(ZA,{}),g.jsx(Rn,{richColors:!0,position:"top-right"}),g.jsxs("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:[g.jsxs(Fe,{children:[g.jsx(Ce,{}),g.jsx(Ce,{xs:10,md:6,children:g.jsxs("div",{className:"login-card",children:[g.jsx(Ba,{src:D2,beforeInjection:C=>{C.classList.add("login-logo")},className:"cursor-pointer",onClick:()=>{r("/")}}),g.jsx("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-white",children:"Inicia sesin"}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-white",children:"Correo electrnico"}),g.jsxs("div",{className:"mt-2 flex items-center",children:[g.jsx(US,{size:I,color:"#FFFFFF",className:"w-10 mr-2"}),g.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-orange-600 sm:text-sm sm:leading-6 bg-white px-2",onChange:l,placeholder:"correo electrnico"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-white",children:"Contrasea"}),g.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[g.jsx(lh,{size:I,color:"#FFFFFF",className:"w-10 mr-3"}),g.jsx("input",{id:"password",name:"password",type:e?"text":"password",autoComplete:"current-password",required:!0,value:i.password,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-orange-600 sm:text-sm sm:leading-6 bg-white px-2",onChange:l,placeholder:"contrasea"}),e?g.jsx(ki,{size:I,color:"#ffffff",className:"cursor-pointer text-white mx-4",onClick:u}):g.jsx(xi,{size:I,color:"#ffffff",className:"cursor-pointer text-white mx-4",onClick:u})]})]}),g.jsx("div",{className:"text-sm flex justify-end my-3",children:g.jsx("span",{className:"font-semibold text-orange-400 hover:text-white cursor-pointer",onClick:()=>{r("/forgot/")},children:"Olvidaste tu contrasea?"})}),g.jsx(mt,{className:"flex w-full justify-center rounded-md bg-orange-500 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 border-hidden",onClick:d,children:"Iniciar sesin"})]})}),g.jsx(Ce,{})]}),g.jsxs(Fe,{className:"login-register",children:[g.jsx(Ce,{xs:12,md:12,children:"No tienes una cuenta?"}),g.jsx(Ce,{xs:12,md:12,children:g.jsx("span",{onClick:()=>{r("/registro")},children:"Regstrate"})})]})]})]}),g.jsx($u,{})]})};const P3={nombre:"",apellido:"",email:"",password:"",confirmacion:"",consent:!1,terms:!1},Q3=()=>{const[e,t]=m.useState(!1),[n,o]=m.useState(!1),r=ut(),{formState:i,onInputChange:l,onResetForm:s,onCheckBoxChange:a}=Lr(P3),c=()=>{t(!e)},u=async()=>{if(Object.values(i).includes("")||i.terms==!1||i.password!=i.confirmacion)o(!0);else try{const C={name:i.nombre,lastname:i.apellido,email:i.email,password:i.password,mailing_status:i.consent,terms_policies_status:i.terms};r("/plan",{state:{user:i}})}catch{}},d=26;return g.jsxs("div",{className:"register-view",children:[g.jsx(mA,{className:"registro-back",size:33,color:"#FD6202",onClick:()=>{r("/login")}}),g.jsxs(Fe,{children:[g.jsx(Ce,{}),g.jsx(Ce,{xs:10,md:6,children:g.jsxs("div",{className:"registro-card",children:[g.jsx("h3",{children:"Registro de sesin"}),g.jsx("h6",{children:"Crea tu cuenta de Know me"}),g.jsx("div",{className:`registro-data ${n&&i.nombre==""?"required-value":""}`,children:g.jsx("input",{type:"text",className:"registro-input",placeholder:"Nombre(s)*",onChange:l,value:i.nombre,name:"nombre"})}),g.jsx("div",{className:`registro-data ${n&&i.apellido==""?"required-value":""}`,children:g.jsx("input",{type:"text",className:"registro-input",placeholder:"Apellido(s)*",onChange:l,value:i.apellido,name:"apellido"})}),g.jsxs("div",{className:`login-email ${n&&i.email==""?"required-value":""}`,children:[g.jsx(US,{size:d,color:"#F18805"}),g.jsx("input",{type:"text",className:"login-email-input",placeholder:"correo electrnico",onChange:l,value:i.email,name:"email"})]}),g.jsxs("div",{className:`login-password ${n&&i.password==""?"required-value":""}`,children:[g.jsx(lh,{size:d,color:"#F18805"}),g.jsx("input",{type:e?"text":"password",className:"login-email-input",placeholder:"Contrasea*",onChange:l,value:i.password,name:"password"}),e?g.jsx(xi,{size:d,color:"#FFFFFF",className:"eye-icon",onClick:c}):g.jsx(ki,{size:d,color:"#FFFFFF",className:"eye-icon",onClick:c})]}),g.jsxs("div",{className:`login-password ${n&&i.confirmacion==""?"required-value":""}`,children:[g.jsx(lh,{size:d,color:"#F18805"}),g.jsx("input",{type:e?"text":"password",className:"login-email-input",placeholder:"Confirmar*",onChange:l,value:i.confirmacion,name:"confirmacion"}),e?g.jsx(xi,{size:d,color:"#FFFFFF",className:"eye-icon",onClick:c}):g.jsx(ki,{size:d,color:"#FFFFFF",className:"eye-icon",onClick:c})]}),g.jsxs(Fe,{className:"check-box-option",children:[g.jsx(Ce,{xs:1,children:g.jsx("input",{type:"checkbox",onChange:a,checked:i.consent,name:"consent"})}),g.jsx(Ce,{children:g.jsx("span",{children:"Doy mi consentimiento y acepto recibir informacin sobre los servicios y novedades de Know me."})})]}),g.jsxs(Fe,{className:"check-box-option",children:[g.jsx(Ce,{xs:1,children:g.jsx("input",{type:"checkbox",onChange:a,checked:i.terms,name:"terms"})}),g.jsx(Ce,{children:g.jsx("span",{children:"Al crear la cuenta de usuario aceptas los terminos y condiciones del servicio de Know me, y reconoces que has ledo nuestras polticas de privacidad."})})]}),n&&g.jsx(wN,{variant:"danger",className:"registro-alert",children:i.terms==!1?"Es necesario aceptar terminos y condiciones":"Favor de rellenar los campos marcados en rojo y asegurarse que las contraseas coincidan"}),g.jsx(mt,{className:"registro-btn",onClick:u,children:"Crear cuenta"})]})}),g.jsx(Ce,{})]}),g.jsx(Rn,{position:"top-center",richColors:!0})]})};function ny(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function GA(e,t){e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(t).forEach(n=>{typeof e[n]>"u"?e[n]=t[n]:ny(t[n])&&ny(e[n])&&Object.keys(t[n]).length>0&&GA(e[n],t[n])})}const GV={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function zl(){const e=typeof document<"u"?document:{};return GA(e,GV),e}const O3={document:GV,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function Wn(){const e=typeof window<"u"?window:{};return GA(e,O3),e}function _3(e){return e===void 0&&(e=""),e.trim().split(" ").filter(t=>!!t.trim())}function q3(e){const t=e;Object.keys(t).forEach(n=>{try{t[n]=null}catch{}try{delete t[n]}catch{}})}function Ih(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function Oc(){return Date.now()}function $3(e){const t=Wn();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}function eH(e,t){t===void 0&&(t="x");const n=Wn();let o,r,i;const l=$3(e);return n.WebKitCSSMatrix?(r=l.transform||l.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(s=>s.replace(",",".")).join(", ")),i=new n.WebKitCSSMatrix(r==="none"?"":r)):(i=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),o=i.toString().split(",")),t==="x"&&(n.WebKitCSSMatrix?r=i.m41:o.length===16?r=parseFloat(o[12]):r=parseFloat(o[4])),t==="y"&&(n.WebKitCSSMatrix?r=i.m42:o.length===16?r=parseFloat(o[13]):r=parseFloat(o[5])),r||0}function pg(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function tH(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function hn(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const o=n<0||arguments.length<=n?void 0:arguments[n];if(o!=null&&!tH(o)){const r=Object.keys(Object(o)).filter(i=>t.indexOf(i)<0);for(let i=0,l=r.length;i<l;i+=1){const s=r[i],a=Object.getOwnPropertyDescriptor(o,s);a!==void 0&&a.enumerable&&(pg(e[s])&&pg(o[s])?o[s].__swiper__?e[s]=o[s]:hn(e[s],o[s]):!pg(e[s])&&pg(o[s])?(e[s]={},o[s].__swiper__?e[s]=o[s]:hn(e[s],o[s])):e[s]=o[s])}}}return e}function bg(e,t,n){e.style.setProperty(t,n)}function BV(e){let{swiper:t,targetPosition:n,side:o}=e;const r=Wn(),i=-t.translate;let l=null,s;const a=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const c=n>i?"next":"prev",u=(I,C)=>c==="next"&&I>=C||c==="prev"&&I<=C,d=()=>{s=new Date().getTime(),l===null&&(l=s);const I=Math.max(Math.min((s-l)/a,1),0),C=.5-Math.cos(I*Math.PI)/2;let f=i+C*(n-i);if(u(f,n)&&(f=n),t.wrapperEl.scrollTo({[o]:f}),u(f,n)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[o]:f})}),r.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=r.requestAnimationFrame(d)};d()}function Co(e,t){return t===void 0&&(t=""),[...e.children].filter(n=>n.matches(t))}function _c(e){try{console.warn(e);return}catch{}}function qc(e,t){t===void 0&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:_3(t)),n}function nH(e,t){const n=[];for(;e.previousElementSibling;){const o=e.previousElementSibling;t?o.matches(t)&&n.push(o):n.push(o),e=o}return n}function oH(e,t){const n=[];for(;e.nextElementSibling;){const o=e.nextElementSibling;t?o.matches(t)&&n.push(o):n.push(o),e=o}return n}function mr(e,t){return Wn().getComputedStyle(e,null).getPropertyValue(t)}function $c(e){let t=e,n;if(t){for(n=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(n+=1);return n}}function SV(e,t){const n=[];let o=e.parentElement;for(;o;)t?o.matches(t)&&n.push(o):n.push(o),o=o.parentElement;return n}function Ch(e,t,n){const o=Wn();return n?e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(o.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(o.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom")):e.offsetWidth}function Bo(e){return(Array.isArray(e)?e:[e]).filter(t=>!!t)}let EI;function rH(){const e=Wn(),t=zl();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function VV(){return EI||(EI=rH()),EI}let KI;function iH(e){let{userAgent:t}=e===void 0?{}:e;const n=VV(),o=Wn(),r=o.navigator.platform,i=t||o.navigator.userAgent,l={ios:!1,android:!1},s=o.screen.width,a=o.screen.height,c=i.match(/(Android);?[\s\/]+([\d.]+)?/);let u=i.match(/(iPad).*OS\s([\d_]+)/);const d=i.match(/(iPod)(.*OS\s([\d_]+))?/),I=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),C=r==="Win32";let f=r==="MacIntel";const A=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&f&&n.touch&&A.indexOf(`${s}x${a}`)>=0&&(u=i.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),f=!1),c&&!C&&(l.os="android",l.android=!0),(u||I||d)&&(l.os="ios",l.ios=!0),l}function RV(e){return e===void 0&&(e={}),KI||(KI=iH(e)),KI}let LI;function lH(){const e=Wn(),t=RV();let n=!1;function o(){const s=e.navigator.userAgent.toLowerCase();return s.indexOf("safari")>=0&&s.indexOf("chrome")<0&&s.indexOf("android")<0}if(o()){const s=String(e.navigator.userAgent);if(s.includes("Version/")){const[a,c]=s.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));n=a<16||a===16&&c<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),i=o(),l=i||r&&t.ios;return{isSafari:n||i,needPerspectiveFix:n,need3dFix:l,isWebView:r}}function sH(){return LI||(LI=lH()),LI}function aH(e){let{swiper:t,on:n,emit:o}=e;const r=Wn();let i=null,l=null;const s=()=>{!t||t.destroyed||!t.initialized||(o("beforeResize"),o("resize"))},a=()=>{!t||t.destroyed||!t.initialized||(i=new ResizeObserver(d=>{l=r.requestAnimationFrame(()=>{const{width:I,height:C}=t;let f=I,A=C;d.forEach(v=>{let{contentBoxSize:h,contentRect:p,target:b}=v;b&&b!==t.el||(f=p?p.width:(h[0]||h).inlineSize,A=p?p.height:(h[0]||h).blockSize)}),(f!==I||A!==C)&&s()})}),i.observe(t.el))},c=()=>{l&&r.cancelAnimationFrame(l),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null)},u=()=>{!t||t.destroyed||!t.initialized||o("orientationchange")};n("init",()=>{if(t.params.resizeObserver&&typeof r.ResizeObserver<"u"){a();return}r.addEventListener("resize",s),r.addEventListener("orientationchange",u)}),n("destroy",()=>{c(),r.removeEventListener("resize",s),r.removeEventListener("orientationchange",u)})}function gH(e){let{swiper:t,extendParams:n,on:o,emit:r}=e;const i=[],l=Wn(),s=function(u,d){d===void 0&&(d={});const I=l.MutationObserver||l.WebkitMutationObserver,C=new I(f=>{if(t.__preventObserver__)return;if(f.length===1){r("observerUpdate",f[0]);return}const A=function(){r("observerUpdate",f[0])};l.requestAnimationFrame?l.requestAnimationFrame(A):l.setTimeout(A,0)});C.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),i.push(C)},a=()=>{if(t.params.observer){if(t.params.observeParents){const u=SV(t.hostEl);for(let d=0;d<u.length;d+=1)s(u[d])}s(t.hostEl,{childList:t.params.observeSlideChildren}),s(t.wrapperEl,{attributes:!1})}},c=()=>{i.forEach(u=>{u.disconnect()}),i.splice(0,i.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),o("init",a),o("destroy",c)}var cH={on(e,t,n){const o=this;if(!o.eventsListeners||o.destroyed||typeof t!="function")return o;const r=n?"unshift":"push";return e.split(" ").forEach(i=>{o.eventsListeners[i]||(o.eventsListeners[i]=[]),o.eventsListeners[i][r](t)}),o},once(e,t,n){const o=this;if(!o.eventsListeners||o.destroyed||typeof t!="function")return o;function r(){o.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];t.apply(o,l)}return r.__emitterProxy=t,o.on(e,r,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const o=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[o](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||e.split(" ").forEach(o=>{typeof t>"u"?n.eventsListeners[o]=[]:n.eventsListeners[o]&&n.eventsListeners[o].forEach((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[o].splice(i,1)})}),n},emit(){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,n,o;for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return typeof i[0]=="string"||Array.isArray(i[0])?(t=i[0],n=i.slice(1,i.length),o=e):(t=i[0].events,n=i[0].data,o=i[0].context||e),n.unshift(o),(Array.isArray(t)?t:t.split(" ")).forEach(a=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(c=>{c.apply(o,[a,...n])}),e.eventsListeners&&e.eventsListeners[a]&&e.eventsListeners[a].forEach(c=>{c.apply(o,n)})}),e}};function uH(){const e=this;let t,n;const o=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=o.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?n=e.params.height:n=o.clientHeight,!(t===0&&e.isHorizontal()||n===0&&e.isVertical())&&(t=t-parseInt(mr(o,"padding-left")||0,10)-parseInt(mr(o,"padding-right")||0,10),n=n-parseInt(mr(o,"padding-top")||0,10)-parseInt(mr(o,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))}function dH(){const e=this;function t(B,R){return parseFloat(B.getPropertyValue(e.getDirectionLabel(R))||0)}const n=e.params,{wrapperEl:o,slidesEl:r,size:i,rtlTranslate:l,wrongRTL:s}=e,a=e.virtual&&n.virtual.enabled,c=a?e.virtual.slides.length:e.slides.length,u=Co(r,`.${e.params.slideClass}, swiper-slide`),d=a?e.virtual.slides.length:u.length;let I=[];const C=[],f=[];let A=n.slidesOffsetBefore;typeof A=="function"&&(A=n.slidesOffsetBefore.call(e));let v=n.slidesOffsetAfter;typeof v=="function"&&(v=n.slidesOffsetAfter.call(e));const h=e.snapGrid.length,p=e.slidesGrid.length;let b=n.spaceBetween,y=-A,Z=0,G=0;if(typeof i>"u")return;typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*i:typeof b=="string"&&(b=parseFloat(b)),e.virtualSize=-b,u.forEach(B=>{l?B.style.marginLeft="":B.style.marginRight="",B.style.marginBottom="",B.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(bg(o,"--swiper-centered-offset-before",""),bg(o,"--swiper-centered-offset-after",""));const V=n.grid&&n.grid.rows>1&&e.grid;V?e.grid.initSlides(u):e.grid&&e.grid.unsetSlides();let S;const k=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(B=>typeof n.breakpoints[B].slidesPerView<"u").length>0;for(let B=0;B<d;B+=1){S=0;let R;if(u[B]&&(R=u[B]),V&&e.grid.updateSlide(B,R,u),!(u[B]&&mr(R,"display")==="none")){if(n.slidesPerView==="auto"){k&&(u[B].style[e.getDirectionLabel("width")]="");const W=getComputedStyle(R),w=R.style.transform,X=R.style.webkitTransform;if(w&&(R.style.transform="none"),X&&(R.style.webkitTransform="none"),n.roundLengths)S=e.isHorizontal()?Ch(R,"width",!0):Ch(R,"height",!0);else{const E=t(W,"width"),M=t(W,"padding-left"),L=t(W,"padding-right"),F=t(W,"margin-left"),Y=t(W,"margin-right"),N=W.getPropertyValue("box-sizing");if(N&&N==="border-box")S=E+F+Y;else{const{clientWidth:x,offsetWidth:H}=R;S=E+M+L+F+Y+(H-x)}}w&&(R.style.transform=w),X&&(R.style.webkitTransform=X),n.roundLengths&&(S=Math.floor(S))}else S=(i-(n.slidesPerView-1)*b)/n.slidesPerView,n.roundLengths&&(S=Math.floor(S)),u[B]&&(u[B].style[e.getDirectionLabel("width")]=`${S}px`);u[B]&&(u[B].swiperSlideSize=S),f.push(S),n.centeredSlides?(y=y+S/2+Z/2+b,Z===0&&B!==0&&(y=y-i/2-b),B===0&&(y=y-i/2-b),Math.abs(y)<1/1e3&&(y=0),n.roundLengths&&(y=Math.floor(y)),G%n.slidesPerGroup===0&&I.push(y),C.push(y)):(n.roundLengths&&(y=Math.floor(y)),(G-Math.min(e.params.slidesPerGroupSkip,G))%e.params.slidesPerGroup===0&&I.push(y),C.push(y),y=y+S+b),e.virtualSize+=S+b,Z=S,G+=1}}if(e.virtualSize=Math.max(e.virtualSize,i)+v,l&&s&&(n.effect==="slide"||n.effect==="coverflow")&&(o.style.width=`${e.virtualSize+b}px`),n.setWrapperSize&&(o.style[e.getDirectionLabel("width")]=`${e.virtualSize+b}px`),V&&e.grid.updateWrapperSize(S,I),!n.centeredSlides){const B=[];for(let R=0;R<I.length;R+=1){let W=I[R];n.roundLengths&&(W=Math.floor(W)),I[R]<=e.virtualSize-i&&B.push(W)}I=B,Math.floor(e.virtualSize-i)-Math.floor(I[I.length-1])>1&&I.push(e.virtualSize-i)}if(a&&n.loop){const B=f[0]+b;if(n.slidesPerGroup>1){const R=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),W=B*n.slidesPerGroup;for(let w=0;w<R;w+=1)I.push(I[I.length-1]+W)}for(let R=0;R<e.virtual.slidesBefore+e.virtual.slidesAfter;R+=1)n.slidesPerGroup===1&&I.push(I[I.length-1]+B),C.push(C[C.length-1]+B),e.virtualSize+=B}if(I.length===0&&(I=[0]),b!==0){const B=e.isHorizontal()&&l?"marginLeft":e.getDirectionLabel("marginRight");u.filter((R,W)=>!n.cssMode||n.loop?!0:W!==u.length-1).forEach(R=>{R.style[B]=`${b}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let B=0;f.forEach(W=>{B+=W+(b||0)}),B-=b;const R=B-i;I=I.map(W=>W<=0?-A:W>R?R+v:W)}if(n.centerInsufficientSlides){let B=0;if(f.forEach(R=>{B+=R+(b||0)}),B-=b,B<i){const R=(i-B)/2;I.forEach((W,w)=>{I[w]=W-R}),C.forEach((W,w)=>{C[w]=W+R})}}if(Object.assign(e,{slides:u,snapGrid:I,slidesGrid:C,slidesSizesGrid:f}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){bg(o,"--swiper-centered-offset-before",`${-I[0]}px`),bg(o,"--swiper-centered-offset-after",`${e.size/2-f[f.length-1]/2}px`);const B=-e.snapGrid[0],R=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(W=>W+B),e.slidesGrid=e.slidesGrid.map(W=>W+R)}if(d!==c&&e.emit("slidesLengthChange"),I.length!==h&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),C.length!==p&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!a&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const B=`${n.containerModifierClass}backface-hidden`,R=e.el.classList.contains(B);d<=n.maxBackfaceHiddenSlides?R||e.el.classList.add(B):R&&e.el.classList.remove(B)}}function IH(e){const t=this,n=[],o=t.virtual&&t.params.virtual.enabled;let r=0,i;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const l=s=>o?t.slides[t.getSlideIndexByData(s)]:t.slides[s];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(s=>{n.push(s)});else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const s=t.activeIndex+i;if(s>t.slides.length&&!o)break;n.push(l(s))}else n.push(l(t.activeIndex));for(i=0;i<n.length;i+=1)if(typeof n[i]<"u"){const s=n[i].offsetHeight;r=s>r?s:r}(r||r===0)&&(t.wrapperEl.style.height=`${r}px`)}function CH(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let o=0;o<t.length;o+=1)t[o].swiperSlideOffset=(e.isHorizontal()?t[o].offsetLeft:t[o].offsetTop)-n-e.cssOverflowAdjustment()}function mH(e){e===void 0&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:o,rtlTranslate:r,snapGrid:i}=t;if(o.length===0)return;typeof o[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let l=-e;r&&(l=e),o.forEach(a=>{a.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass)}),t.visibleSlidesIndexes=[],t.visibleSlides=[];let s=n.spaceBetween;typeof s=="string"&&s.indexOf("%")>=0?s=parseFloat(s.replace("%",""))/100*t.size:typeof s=="string"&&(s=parseFloat(s));for(let a=0;a<o.length;a+=1){const c=o[a];let u=c.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(u-=o[0].swiperSlideOffset);const d=(l+(n.centeredSlides?t.minTranslate():0)-u)/(c.swiperSlideSize+s),I=(l-i[0]+(n.centeredSlides?t.minTranslate():0)-u)/(c.swiperSlideSize+s),C=-(l-u),f=C+t.slidesSizesGrid[a],A=C>=0&&C<=t.size-t.slidesSizesGrid[a];(C>=0&&C<t.size-1||f>1&&f<=t.size||C<=0&&f>=t.size)&&(t.visibleSlides.push(c),t.visibleSlidesIndexes.push(a),o[a].classList.add(n.slideVisibleClass)),A&&o[a].classList.add(n.slideFullyVisibleClass),c.progress=r?-d:d,c.originalProgress=r?-I:I}}function hH(e){const t=this;if(typeof e>"u"){const u=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*u||0}const n=t.params,o=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:i,isEnd:l,progressLoop:s}=t;const a=i,c=l;if(o===0)r=0,i=!0,l=!0;else{r=(e-t.minTranslate())/o;const u=Math.abs(e-t.minTranslate())<1,d=Math.abs(e-t.maxTranslate())<1;i=u||r<=0,l=d||r>=1,u&&(r=0),d&&(r=1)}if(n.loop){const u=t.getSlideIndexByData(0),d=t.getSlideIndexByData(t.slides.length-1),I=t.slidesGrid[u],C=t.slidesGrid[d],f=t.slidesGrid[t.slidesGrid.length-1],A=Math.abs(e);A>=I?s=(A-I)/f:s=(A+f-C)/f,s>1&&(s-=1)}Object.assign(t,{progress:r,progressLoop:s,isBeginning:i,isEnd:l}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),i&&!a&&t.emit("reachBeginning toEdge"),l&&!c&&t.emit("reachEnd toEdge"),(a&&!i||c&&!l)&&t.emit("fromEdge"),t.emit("progress",r)}const MI=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function fH(){const e=this,{slides:t,params:n,slidesEl:o,activeIndex:r}=e,i=e.virtual&&n.virtual.enabled,l=e.grid&&n.grid&&n.grid.rows>1,s=d=>Co(o,`.${n.slideClass}${d}, swiper-slide${d}`)[0];let a,c,u;if(i)if(n.loop){let d=r-e.virtual.slidesBefore;d<0&&(d=e.virtual.slides.length+d),d>=e.virtual.slides.length&&(d-=e.virtual.slides.length),a=s(`[data-swiper-slide-index="${d}"]`)}else a=s(`[data-swiper-slide-index="${r}"]`);else l?(a=t.filter(d=>d.column===r)[0],u=t.filter(d=>d.column===r+1)[0],c=t.filter(d=>d.column===r-1)[0]):a=t[r];a&&(l||(u=oH(a,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!u&&(u=t[0]),c=nH(a,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!c===0&&(c=t[t.length-1]))),t.forEach(d=>{MI(d,d===a,n.slideActiveClass),MI(d,d===u,n.slideNextClass),MI(d,d===c,n.slidePrevClass)}),e.emitSlidesClasses()}const sc=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,o=t.closest(n());if(o){let r=o.querySelector(`.${e.params.lazyPreloaderClass}`);!r&&e.isElement&&(o.shadowRoot?r=o.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{o.shadowRoot&&(r=o.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},TI=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},mh=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const o=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const l=r,s=[l-t];s.push(...Array.from({length:t}).map((a,c)=>l+o+c)),e.slides.forEach((a,c)=>{s.includes(a.column)&&TI(e,c)});return}const i=r+o-1;if(e.params.rewind||e.params.loop)for(let l=r-t;l<=i+t;l+=1){const s=(l%n+n)%n;(s<r||s>i)&&TI(e,s)}else for(let l=Math.max(r-t,0);l<=Math.min(i+t,n-1);l+=1)l!==r&&(l>i||l<r)&&TI(e,l)};function AH(e){const{slidesGrid:t,params:n}=e,o=e.rtlTranslate?e.translate:-e.translate;let r;for(let i=0;i<t.length;i+=1)typeof t[i+1]<"u"?o>=t[i]&&o<t[i+1]-(t[i+1]-t[i])/2?r=i:o>=t[i]&&o<t[i+1]&&(r=i+1):o>=t[i]&&(r=i);return n.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function pH(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:o,params:r,activeIndex:i,realIndex:l,snapIndex:s}=t;let a=e,c;const u=C=>{let f=C-t.virtual.slidesBefore;return f<0&&(f=t.virtual.slides.length+f),f>=t.virtual.slides.length&&(f-=t.virtual.slides.length),f};if(typeof a>"u"&&(a=AH(t)),o.indexOf(n)>=0)c=o.indexOf(n);else{const C=Math.min(r.slidesPerGroupSkip,a);c=C+Math.floor((a-C)/r.slidesPerGroup)}if(c>=o.length&&(c=o.length-1),a===i&&!t.params.loop){c!==s&&(t.snapIndex=c,t.emit("snapIndexChange"));return}if(a===i&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=u(a);return}const d=t.grid&&r.grid&&r.grid.rows>1;let I;if(t.virtual&&r.virtual.enabled&&r.loop)I=u(a);else if(d){const C=t.slides.filter(A=>A.column===a)[0];let f=parseInt(C.getAttribute("data-swiper-slide-index"),10);Number.isNaN(f)&&(f=Math.max(t.slides.indexOf(C),0)),I=Math.floor(f/r.grid.rows)}else if(t.slides[a]){const C=t.slides[a].getAttribute("data-swiper-slide-index");C?I=parseInt(C,10):I=a}else I=a;Object.assign(t,{previousSnapIndex:s,snapIndex:c,previousRealIndex:l,realIndex:I,previousIndex:i,activeIndex:a}),t.initialized&&mh(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(l!==I&&t.emit("realIndexChange"),t.emit("slideChange"))}function bH(e,t){const n=this,o=n.params;let r=e.closest(`.${o.slideClass}, swiper-slide`);!r&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(s=>{!r&&s.matches&&s.matches(`.${o.slideClass}, swiper-slide`)&&(r=s)});let i=!1,l;if(r){for(let s=0;s<n.slides.length;s+=1)if(n.slides[s]===r){i=!0,l=s;break}}if(r&&i)n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=l;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}o.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var yH={updateSize:uH,updateSlides:dH,updateAutoHeight:IH,updateSlidesOffset:CH,updateSlidesProgress:mH,updateProgress:hH,updateSlidesClasses:fH,updateActiveIndex:pH,updateClickedSlide:bH};function vH(e){e===void 0&&(e=this.isHorizontal()?"x":"y");const t=this,{params:n,rtlTranslate:o,translate:r,wrapperEl:i}=t;if(n.virtualTranslate)return o?-r:r;if(n.cssMode)return r;let l=eH(i,e);return l+=t.cssOverflowAdjustment(),o&&(l=-l),l||0}function ZH(e,t){const n=this,{rtlTranslate:o,params:r,wrapperEl:i,progress:l}=n;let s=0,a=0;const c=0;n.isHorizontal()?s=o?-e:e:a=e,r.roundLengths&&(s=Math.floor(s),a=Math.floor(a)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?s:a,r.cssMode?i[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-s:-a:r.virtualTranslate||(n.isHorizontal()?s-=n.cssOverflowAdjustment():a-=n.cssOverflowAdjustment(),i.style.transform=`translate3d(${s}px, ${a}px, ${c}px)`);let u;const d=n.maxTranslate()-n.minTranslate();d===0?u=0:u=(e-n.minTranslate())/d,u!==l&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)}function GH(){return-this.snapGrid[0]}function BH(){return-this.snapGrid[this.snapGrid.length-1]}function SH(e,t,n,o,r){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),n===void 0&&(n=!0),o===void 0&&(o=!0);const i=this,{params:l,wrapperEl:s}=i;if(i.animating&&l.preventInteractionOnTransition)return!1;const a=i.minTranslate(),c=i.maxTranslate();let u;if(o&&e>a?u=a:o&&e<c?u=c:u=e,i.updateProgress(u),l.cssMode){const d=i.isHorizontal();if(t===0)s[d?"scrollLeft":"scrollTop"]=-u;else{if(!i.support.smoothScroll)return BV({swiper:i,targetPosition:-u,side:d?"left":"top"}),!0;s.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return t===0?(i.setTransition(0),i.setTranslate(u),n&&(i.emit("beforeTransitionStart",t,r),i.emit("transitionEnd"))):(i.setTransition(t),i.setTranslate(u),n&&(i.emit("beforeTransitionStart",t,r),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(I){!i||i.destroyed||I.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,i.animating=!1,n&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}var VH={getTranslate:vH,setTranslate:ZH,minTranslate:GH,maxTranslate:BH,translateTo:SH};function RH(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${e}ms`,n.wrapperEl.style.transitionDelay=e===0?"0ms":""),n.emit("setTransition",e,t)}function WV(e){let{swiper:t,runCallbacks:n,direction:o,step:r}=e;const{activeIndex:i,previousIndex:l}=t;let s=o;if(s||(i>l?s="next":i<l?s="prev":s="reset"),t.emit(`transition${r}`),n&&i!==l){if(s==="reset"){t.emit(`slideResetTransition${r}`);return}t.emit(`slideChangeTransition${r}`),s==="next"?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}function WH(e,t){e===void 0&&(e=!0);const n=this,{params:o}=n;o.cssMode||(o.autoHeight&&n.updateAutoHeight(),WV({swiper:n,runCallbacks:e,direction:t,step:"Start"}))}function wH(e,t){e===void 0&&(e=!0);const n=this,{params:o}=n;n.animating=!1,!o.cssMode&&(n.setTransition(0),WV({swiper:n,runCallbacks:e,direction:t,step:"End"}))}var kH={setTransition:RH,transitionStart:WH,transitionEnd:wH};function xH(e,t,n,o,r){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));const i=this;let l=e;l<0&&(l=0);const{params:s,snapGrid:a,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:I,wrapperEl:C,enabled:f}=i;if(!f&&!o&&!r||i.destroyed||i.animating&&s.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=i.params.speed);const A=Math.min(i.params.slidesPerGroupSkip,l);let v=A+Math.floor((l-A)/i.params.slidesPerGroup);v>=a.length&&(v=a.length-1);const h=-a[v];if(s.normalizeSlideIndex)for(let b=0;b<c.length;b+=1){const y=-Math.floor(h*100),Z=Math.floor(c[b]*100),G=Math.floor(c[b+1]*100);typeof c[b+1]<"u"?y>=Z&&y<G-(G-Z)/2?l=b:y>=Z&&y<G&&(l=b+1):y>=Z&&(l=b)}if(i.initialized&&l!==d&&(!i.allowSlideNext&&(I?h>i.translate&&h>i.minTranslate():h<i.translate&&h<i.minTranslate())||!i.allowSlidePrev&&h>i.translate&&h>i.maxTranslate()&&(d||0)!==l))return!1;l!==(u||0)&&n&&i.emit("beforeSlideChangeStart"),i.updateProgress(h);let p;if(l>d?p="next":l<d?p="prev":p="reset",I&&-h===i.translate||!I&&h===i.translate)return i.updateActiveIndex(l),s.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),s.effect!=="slide"&&i.setTranslate(h),p!=="reset"&&(i.transitionStart(n,p),i.transitionEnd(n,p)),!1;if(s.cssMode){const b=i.isHorizontal(),y=I?h:-h;if(t===0){const Z=i.virtual&&i.params.virtual.enabled;Z&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),Z&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{C[b?"scrollLeft":"scrollTop"]=y})):C[b?"scrollLeft":"scrollTop"]=y,Z&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1})}else{if(!i.support.smoothScroll)return BV({swiper:i,targetPosition:y,side:b?"left":"top"}),!0;C.scrollTo({[b?"left":"top"]:y,behavior:"smooth"})}return!0}return i.setTransition(t),i.setTranslate(h),i.updateActiveIndex(l),i.updateSlidesClasses(),i.emit("beforeTransitionStart",t,o),i.transitionStart(n,p),t===0?i.transitionEnd(n,p):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(y){!i||i.destroyed||y.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(n,p))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0}function XH(e,t,n,o){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));const r=this;if(r.destroyed)return;typeof t>"u"&&(t=r.params.speed);const i=r.grid&&r.params.grid&&r.params.grid.rows>1;let l=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)l=l+r.virtual.slidesBefore;else{let s;if(i){const I=l*r.params.grid.rows;s=r.slides.filter(C=>C.getAttribute("data-swiper-slide-index")*1===I)[0].column}else s=r.getSlideIndexByData(l);const a=i?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params;let u=r.params.slidesPerView;u==="auto"?u=r.slidesPerViewDynamic():(u=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let d=a-s<u;if(c&&(d=d||s<Math.ceil(u/2)),o&&c&&r.params.slidesPerView!=="auto"&&!i&&(d=!1),d){const I=c?s<r.activeIndex?"prev":"next":s-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:I,slideTo:!0,activeSlideIndex:I==="next"?s+1:s-a+1,slideRealIndex:I==="next"?r.realIndex:void 0})}if(i){const I=l*r.params.grid.rows;l=r.slides.filter(C=>C.getAttribute("data-swiper-slide-index")*1===I)[0].column}else l=r.getSlideIndexByData(l)}return requestAnimationFrame(()=>{r.slideTo(l,t,n,o)}),r}function JH(e,t,n){t===void 0&&(t=!0);const o=this,{enabled:r,params:i,animating:l}=o;if(!r||o.destroyed)return o;typeof e>"u"&&(e=o.params.speed);let s=i.slidesPerGroup;i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(s=Math.max(o.slidesPerViewDynamic("current",!0),1));const a=o.activeIndex<i.slidesPerGroupSkip?1:s,c=o.virtual&&i.virtual.enabled;if(i.loop){if(l&&!c&&i.loopPreventsSliding)return!1;if(o.loopFix({direction:"next"}),o._clientLeft=o.wrapperEl.clientLeft,o.activeIndex===o.slides.length-1&&i.cssMode)return requestAnimationFrame(()=>{o.slideTo(o.activeIndex+a,e,t,n)}),!0}return i.rewind&&o.isEnd?o.slideTo(0,e,t,n):o.slideTo(o.activeIndex+a,e,t,n)}function NH(e,t,n){t===void 0&&(t=!0);const o=this,{params:r,snapGrid:i,slidesGrid:l,rtlTranslate:s,enabled:a,animating:c}=o;if(!a||o.destroyed)return o;typeof e>"u"&&(e=o.params.speed);const u=o.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;o.loopFix({direction:"prev"}),o._clientLeft=o.wrapperEl.clientLeft}const d=s?o.translate:-o.translate;function I(h){return h<0?-Math.floor(Math.abs(h)):Math.floor(h)}const C=I(d),f=i.map(h=>I(h));let A=i[f.indexOf(C)-1];if(typeof A>"u"&&r.cssMode){let h;i.forEach((p,b)=>{C>=p&&(h=b)}),typeof h<"u"&&(A=i[h>0?h-1:h])}let v=0;if(typeof A<"u"&&(v=l.indexOf(A),v<0&&(v=o.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(v=v-o.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),r.rewind&&o.isBeginning){const h=o.params.virtual&&o.params.virtual.enabled&&o.virtual?o.virtual.slides.length-1:o.slides.length-1;return o.slideTo(h,e,t,n)}else if(r.loop&&o.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{o.slideTo(v,e,t,n)}),!0;return o.slideTo(v,e,t,n)}function YH(e,t,n){t===void 0&&(t=!0);const o=this;if(!o.destroyed)return typeof e>"u"&&(e=o.params.speed),o.slideTo(o.activeIndex,e,t,n)}function HH(e,t,n,o){t===void 0&&(t=!0),o===void 0&&(o=.5);const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);let i=r.activeIndex;const l=Math.min(r.params.slidesPerGroupSkip,i),s=l+Math.floor((i-l)/r.params.slidesPerGroup),a=r.rtlTranslate?r.translate:-r.translate;if(a>=r.snapGrid[s]){const c=r.snapGrid[s],u=r.snapGrid[s+1];a-c>(u-c)*o&&(i+=r.params.slidesPerGroup)}else{const c=r.snapGrid[s-1],u=r.snapGrid[s];a-c<=(u-c)*o&&(i-=r.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,r.slidesGrid.length-1),r.slideTo(i,e,t,n)}function FH(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,o=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let r=e.clickedIndex,i;const l=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;i=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?r<e.loopedSlides-o/2||r>e.slides.length-e.loopedSlides+o/2?(e.loopFix(),r=e.getSlideIndex(Co(n,`${l}[data-swiper-slide-index="${i}"]`)[0]),Ih(()=>{e.slideTo(r)})):e.slideTo(r):r>e.slides.length-o?(e.loopFix(),r=e.getSlideIndex(Co(n,`${l}[data-swiper-slide-index="${i}"]`)[0]),Ih(()=>{e.slideTo(r)})):e.slideTo(r)}else e.slideTo(r)}var EH={slideTo:xH,slideToLoop:XH,slideNext:JH,slidePrev:NH,slideReset:YH,slideToClosest:HH,slideToClickedSlide:FH};function KH(e){const t=this,{params:n,slidesEl:o}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;const r=()=>{Co(o,`.${n.slideClass}, swiper-slide`).forEach((d,I)=>{d.setAttribute("data-swiper-slide-index",I)})},i=t.grid&&n.grid&&n.grid.rows>1,l=n.slidesPerGroup*(i?n.grid.rows:1),s=t.slides.length%l!==0,a=i&&t.slides.length%n.grid.rows!==0,c=u=>{for(let d=0;d<u;d+=1){const I=t.isElement?qc("swiper-slide",[n.slideBlankClass]):qc("div",[n.slideClass,n.slideBlankClass]);t.slidesEl.append(I)}};if(s){if(n.loopAddBlankSlides){const u=l-t.slides.length%l;c(u),t.recalcSlides(),t.updateSlides()}else _c("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(a){if(n.loopAddBlankSlides){const u=n.grid.rows-t.slides.length%n.grid.rows;c(u),t.recalcSlides(),t.updateSlides()}else _c("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();t.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next"})}function LH(e){let{slideRealIndex:t,slideTo:n=!0,direction:o,setTranslate:r,activeSlideIndex:i,byController:l,byMousewheel:s}=e===void 0?{}:e;const a=this;if(!a.params.loop)return;a.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:d,slidesEl:I,params:C}=a,{centeredSlides:f}=C;if(a.allowSlidePrev=!0,a.allowSlideNext=!0,a.virtual&&C.virtual.enabled){n&&(!C.centeredSlides&&a.snapIndex===0?a.slideTo(a.virtual.slides.length,0,!1,!0):C.centeredSlides&&a.snapIndex<C.slidesPerView?a.slideTo(a.virtual.slides.length+a.snapIndex,0,!1,!0):a.snapIndex===a.snapGrid.length-1&&a.slideTo(a.virtual.slidesBefore,0,!1,!0)),a.allowSlidePrev=u,a.allowSlideNext=d,a.emit("loopFix");return}let A=C.slidesPerView;A==="auto"?A=a.slidesPerViewDynamic():(A=Math.ceil(parseFloat(C.slidesPerView,10)),f&&A%2===0&&(A=A+1));const v=C.slidesPerGroupAuto?A:C.slidesPerGroup;let h=v;h%v!==0&&(h+=v-h%v),h+=C.loopAdditionalSlides,a.loopedSlides=h;const p=a.grid&&C.grid&&C.grid.rows>1;c.length<A+h?_c("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):p&&C.grid.fill==="row"&&_c("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const b=[],y=[];let Z=a.activeIndex;typeof i>"u"?i=a.getSlideIndex(c.filter(w=>w.classList.contains(C.slideActiveClass))[0]):Z=i;const G=o==="next"||!o,V=o==="prev"||!o;let S=0,k=0;const B=p?Math.ceil(c.length/C.grid.rows):c.length,W=(p?c[i].column:i)+(f&&typeof r>"u"?-A/2+.5:0);if(W<h){S=Math.max(h-W,v);for(let w=0;w<h-W;w+=1){const X=w-Math.floor(w/B)*B;if(p){const E=B-X-1;for(let M=c.length-1;M>=0;M-=1)c[M].column===E&&b.push(M)}else b.push(B-X-1)}}else if(W+A>B-h){k=Math.max(W-(B-h*2),v);for(let w=0;w<k;w+=1){const X=w-Math.floor(w/B)*B;p?c.forEach((E,M)=>{E.column===X&&y.push(M)}):y.push(X)}}if(a.__preventObserver__=!0,requestAnimationFrame(()=>{a.__preventObserver__=!1}),V&&b.forEach(w=>{c[w].swiperLoopMoveDOM=!0,I.prepend(c[w]),c[w].swiperLoopMoveDOM=!1}),G&&y.forEach(w=>{c[w].swiperLoopMoveDOM=!0,I.append(c[w]),c[w].swiperLoopMoveDOM=!1}),a.recalcSlides(),C.slidesPerView==="auto"?a.updateSlides():p&&(b.length>0&&V||y.length>0&&G)&&a.slides.forEach((w,X)=>{a.grid.updateSlide(X,w,a.slides)}),C.watchSlidesProgress&&a.updateSlidesOffset(),n){if(b.length>0&&V){if(typeof t>"u"){const w=a.slidesGrid[Z],E=a.slidesGrid[Z+S]-w;s?a.setTranslate(a.translate-E):(a.slideTo(Z+Math.ceil(S),0,!1,!0),r&&(a.touchEventsData.startTranslate=a.touchEventsData.startTranslate-E,a.touchEventsData.currentTranslate=a.touchEventsData.currentTranslate-E))}else if(r){const w=p?b.length/C.grid.rows:b.length;a.slideTo(a.activeIndex+w,0,!1,!0),a.touchEventsData.currentTranslate=a.translate}}else if(y.length>0&&G)if(typeof t>"u"){const w=a.slidesGrid[Z],E=a.slidesGrid[Z-k]-w;s?a.setTranslate(a.translate-E):(a.slideTo(Z-k,0,!1,!0),r&&(a.touchEventsData.startTranslate=a.touchEventsData.startTranslate-E,a.touchEventsData.currentTranslate=a.touchEventsData.currentTranslate-E))}else{const w=p?y.length/C.grid.rows:y.length;a.slideTo(a.activeIndex-w,0,!1,!0)}}if(a.allowSlidePrev=u,a.allowSlideNext=d,a.controller&&a.controller.control&&!l){const w={slideRealIndex:t,direction:o,setTranslate:r,activeSlideIndex:i,byController:!0};Array.isArray(a.controller.control)?a.controller.control.forEach(X=>{!X.destroyed&&X.params.loop&&X.loopFix({...w,slideTo:X.params.slidesPerView===C.slidesPerView?n:!1})}):a.controller.control instanceof a.constructor&&a.controller.control.params.loop&&a.controller.control.loopFix({...w,slideTo:a.controller.control.params.slidesPerView===C.slidesPerView?n:!1})}a.emit("loopFix")}function MH(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const o=[];e.slides.forEach(r=>{const i=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;o[i]=r}),e.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),o.forEach(r=>{n.append(r)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}var TH={loopCreate:KH,loopFix:LH,loopDestroy:MH};function jH(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function zH(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}var DH={setGrabCursor:jH,unsetGrabCursor:zH};function UH(e,t){t===void 0&&(t=this);function n(o){if(!o||o===zl()||o===Wn())return null;o.assignedSlot&&(o=o.assignedSlot);const r=o.closest(e);return!r&&!o.getRootNode?null:r||n(o.getRootNode().host)}return n(t)}function oy(e,t,n){const o=Wn(),{params:r}=e,i=r.edgeSwipeDetection,l=r.edgeSwipeThreshold;return i&&(n<=l||n>=o.innerWidth-l)?i==="prevent"?(t.preventDefault(),!0):!1:!0}function PH(e){const t=this,n=zl();let o=e;o.originalEvent&&(o=o.originalEvent);const r=t.touchEventsData;if(o.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==o.pointerId)return;r.pointerId=o.pointerId}else o.type==="touchstart"&&o.targetTouches.length===1&&(r.touchId=o.targetTouches[0].identifier);if(o.type==="touchstart"){oy(t,o,o.targetTouches[0].pageX);return}const{params:i,touches:l,enabled:s}=t;if(!s||!i.simulateTouch&&o.pointerType==="mouse"||t.animating&&i.preventInteractionOnTransition)return;!t.animating&&i.cssMode&&i.loop&&t.loopFix();let a=o.target;if(i.touchEventsTarget==="wrapper"&&!t.wrapperEl.contains(a)||"which"in o&&o.which===3||"button"in o&&o.button>0||r.isTouched&&r.isMoved)return;const c=!!i.noSwipingClass&&i.noSwipingClass!=="",u=o.composedPath?o.composedPath():o.path;c&&o.target&&o.target.shadowRoot&&u&&(a=u[0]);const d=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,I=!!(o.target&&o.target.shadowRoot);if(i.noSwiping&&(I?UH(d,a):a.closest(d))){t.allowClick=!0;return}if(i.swipeHandler&&!a.closest(i.swipeHandler))return;l.currentX=o.pageX,l.currentY=o.pageY;const C=l.currentX,f=l.currentY;if(!oy(t,o,C))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=C,l.startY=f,r.touchStartTime=Oc(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,i.threshold>0&&(r.allowThresholdMove=!1);let A=!0;a.matches(r.focusableElements)&&(A=!1,a.nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==a&&n.activeElement.blur();const v=A&&t.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||v)&&!a.isContentEditable&&o.preventDefault(),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.animating&&!i.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",o)}function QH(e){const t=zl(),n=this,o=n.touchEventsData,{params:r,touches:i,rtlTranslate:l,enabled:s}=n;if(!s||!r.simulateTouch&&e.pointerType==="mouse")return;let a=e;if(a.originalEvent&&(a=a.originalEvent),a.type==="pointermove"&&(o.touchId!==null||a.pointerId!==o.pointerId))return;let c;if(a.type==="touchmove"){if(c=[...a.changedTouches].filter(G=>G.identifier===o.touchId)[0],!c||c.identifier!==o.touchId)return}else c=a;if(!o.isTouched){o.startMoving&&o.isScrolling&&n.emit("touchMoveOpposite",a);return}const u=c.pageX,d=c.pageY;if(a.preventedByNestedSwiper){i.startX=u,i.startY=d;return}if(!n.allowTouchMove){a.target.matches(o.focusableElements)||(n.allowClick=!1),o.isTouched&&(Object.assign(i,{startX:u,startY:d,currentX:u,currentY:d}),o.touchStartTime=Oc());return}if(r.touchReleaseOnEdges&&!r.loop){if(n.isVertical()){if(d<i.startY&&n.translate<=n.maxTranslate()||d>i.startY&&n.translate>=n.minTranslate()){o.isTouched=!1,o.isMoved=!1;return}}else if(u<i.startX&&n.translate<=n.maxTranslate()||u>i.startX&&n.translate>=n.minTranslate())return}if(t.activeElement&&a.target===t.activeElement&&a.target.matches(o.focusableElements)){o.isMoved=!0,n.allowClick=!1;return}o.allowTouchCallbacks&&n.emit("touchMove",a),i.previousX=i.currentX,i.previousY=i.currentY,i.currentX=u,i.currentY=d;const I=i.currentX-i.startX,C=i.currentY-i.startY;if(n.params.threshold&&Math.sqrt(I**2+C**2)<n.params.threshold)return;if(typeof o.isScrolling>"u"){let G;n.isHorizontal()&&i.currentY===i.startY||n.isVertical()&&i.currentX===i.startX?o.isScrolling=!1:I*I+C*C>=25&&(G=Math.atan2(Math.abs(C),Math.abs(I))*180/Math.PI,o.isScrolling=n.isHorizontal()?G>r.touchAngle:90-G>r.touchAngle)}if(o.isScrolling&&n.emit("touchMoveOpposite",a),typeof o.startMoving>"u"&&(i.currentX!==i.startX||i.currentY!==i.startY)&&(o.startMoving=!0),o.isScrolling||a.type==="touchmove"&&o.preventTouchMoveFromPointerMove){o.isTouched=!1;return}if(!o.startMoving)return;n.allowClick=!1,!r.cssMode&&a.cancelable&&a.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&a.stopPropagation();let f=n.isHorizontal()?I:C,A=n.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;r.oneWayMovement&&(f=Math.abs(f)*(l?1:-1),A=Math.abs(A)*(l?1:-1)),i.diff=f,f*=r.touchRatio,l&&(f=-f,A=-A);const v=n.touchesDirection;n.swipeDirection=f>0?"prev":"next",n.touchesDirection=A>0?"prev":"next";const h=n.params.loop&&!r.cssMode,p=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!o.isMoved){if(h&&p&&n.loopFix({direction:n.swipeDirection}),o.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const G=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(G)}o.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",a)}let b;if(new Date().getTime(),o.isMoved&&o.allowThresholdMove&&v!==n.touchesDirection&&h&&p&&Math.abs(f)>=1){Object.assign(i,{startX:u,startY:d,currentX:u,currentY:d,startTranslate:o.currentTranslate}),o.loopSwapReset=!0,o.startTranslate=o.currentTranslate;return}n.emit("sliderMove",a),o.isMoved=!0,o.currentTranslate=f+o.startTranslate;let y=!0,Z=r.resistanceRatio;if(r.touchReleaseOnEdges&&(Z=0),f>0?(h&&p&&!b&&o.allowThresholdMove&&o.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),o.currentTranslate>n.minTranslate()&&(y=!1,r.resistance&&(o.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+o.startTranslate+f)**Z))):f<0&&(h&&p&&!b&&o.allowThresholdMove&&o.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(r.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),o.currentTranslate<n.maxTranslate()&&(y=!1,r.resistance&&(o.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-o.startTranslate-f)**Z))),y&&(a.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&o.currentTranslate<o.startTranslate&&(o.currentTranslate=o.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&o.currentTranslate>o.startTranslate&&(o.currentTranslate=o.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(o.currentTranslate=o.startTranslate),r.threshold>0)if(Math.abs(f)>r.threshold||o.allowThresholdMove){if(!o.allowThresholdMove){o.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,o.currentTranslate=o.startTranslate,i.diff=n.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY;return}}else{o.currentTranslate=o.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(o.currentTranslate),n.setTranslate(o.currentTranslate))}function OH(e){const t=this,n=t.touchEventsData;let o=e;o.originalEvent&&(o=o.originalEvent);let r;if(o.type==="touchend"||o.type==="touchcancel"){if(r=[...o.changedTouches].filter(Z=>Z.identifier===n.touchId)[0],!r||r.identifier!==n.touchId)return}else{if(n.touchId!==null||o.pointerId!==n.pointerId)return;r=o}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(o.type)&&!(["pointercancel","contextmenu"].includes(o.type)&&(t.browser.isSafari||t.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:l,touches:s,rtlTranslate:a,slidesGrid:c,enabled:u}=t;if(!u||!l.simulateTouch&&o.pointerType==="mouse")return;if(n.allowTouchCallbacks&&t.emit("touchEnd",o),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&l.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}l.grabCursor&&n.isMoved&&n.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const d=Oc(),I=d-n.touchStartTime;if(t.allowClick){const Z=o.path||o.composedPath&&o.composedPath();t.updateClickedSlide(Z&&Z[0]||o.target,Z),t.emit("tap click",o),I<300&&d-n.lastClickTime<300&&t.emit("doubleTap doubleClick",o)}if(n.lastClickTime=Oc(),Ih(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||s.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let C;if(l.followFinger?C=a?t.translate:-t.translate:C=-n.currentTranslate,l.cssMode)return;if(l.freeMode&&l.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:C});return}const f=C>=-t.maxTranslate()&&!t.params.loop;let A=0,v=t.slidesSizesGrid[0];for(let Z=0;Z<c.length;Z+=Z<l.slidesPerGroupSkip?1:l.slidesPerGroup){const G=Z<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;typeof c[Z+G]<"u"?(f||C>=c[Z]&&C<c[Z+G])&&(A=Z,v=c[Z+G]-c[Z]):(f||C>=c[Z])&&(A=Z,v=c[c.length-1]-c[c.length-2])}let h=null,p=null;l.rewind&&(t.isBeginning?p=l.virtual&&l.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(h=0));const b=(C-c[A])/v,y=A<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;if(I>l.longSwipesMs){if(!l.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(b>=l.longSwipesRatio?t.slideTo(l.rewind&&t.isEnd?h:A+y):t.slideTo(A)),t.swipeDirection==="prev"&&(b>1-l.longSwipesRatio?t.slideTo(A+y):p!==null&&b<0&&Math.abs(b)>l.longSwipesRatio?t.slideTo(p):t.slideTo(A))}else{if(!l.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(o.target===t.navigation.nextEl||o.target===t.navigation.prevEl)?o.target===t.navigation.nextEl?t.slideTo(A+y):t.slideTo(A):(t.swipeDirection==="next"&&t.slideTo(h!==null?h:A+y),t.swipeDirection==="prev"&&t.slideTo(p!==null?p:A))}}function ry(){const e=this,{params:t,el:n}=e;if(n&&n.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:o,allowSlidePrev:r,snapGrid:i}=e,l=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const s=l&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!s?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!l?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=r,e.allowSlideNext=o,e.params.watchOverflow&&i!==e.snapGrid&&e.checkOverflow()}function _H(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function qH(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:o}=e;if(!o)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let r;const i=e.maxTranslate()-e.minTranslate();i===0?r=0:r=(e.translate-e.minTranslate())/i,r!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function $H(e){const t=this;sc(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function eF(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const wV=(e,t)=>{const n=zl(),{params:o,el:r,wrapperEl:i,device:l}=e,s=!!o.nested,a=t==="on"?"addEventListener":"removeEventListener",c=t;n[a]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:s}),r[a]("touchstart",e.onTouchStart,{passive:!1}),r[a]("pointerdown",e.onTouchStart,{passive:!1}),n[a]("touchmove",e.onTouchMove,{passive:!1,capture:s}),n[a]("pointermove",e.onTouchMove,{passive:!1,capture:s}),n[a]("touchend",e.onTouchEnd,{passive:!0}),n[a]("pointerup",e.onTouchEnd,{passive:!0}),n[a]("pointercancel",e.onTouchEnd,{passive:!0}),n[a]("touchcancel",e.onTouchEnd,{passive:!0}),n[a]("pointerout",e.onTouchEnd,{passive:!0}),n[a]("pointerleave",e.onTouchEnd,{passive:!0}),n[a]("contextmenu",e.onTouchEnd,{passive:!0}),(o.preventClicks||o.preventClicksPropagation)&&r[a]("click",e.onClick,!0),o.cssMode&&i[a]("scroll",e.onScroll),o.updateOnWindowResize?e[c](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",ry,!0):e[c]("observerUpdate",ry,!0),r[a]("load",e.onLoad,{capture:!0})};function tF(){const e=this,{params:t}=e;e.onTouchStart=PH.bind(e),e.onTouchMove=QH.bind(e),e.onTouchEnd=OH.bind(e),e.onDocumentTouchStart=eF.bind(e),t.cssMode&&(e.onScroll=qH.bind(e)),e.onClick=_H.bind(e),e.onLoad=$H.bind(e),wV(e,"on")}function nF(){wV(this,"off")}var oF={attachEvents:tF,detachEvents:nF};const iy=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function rF(){const e=this,{realIndex:t,initialized:n,params:o,el:r}=e,i=o.breakpoints;if(!i||i&&Object.keys(i).length===0)return;const l=e.getBreakpoint(i,e.params.breakpointsBase,e.el);if(!l||e.currentBreakpoint===l)return;const a=(l in i?i[l]:void 0)||e.originalParams,c=iy(e,o),u=iy(e,a),d=e.params.grabCursor,I=a.grabCursor,C=o.enabled;c&&!u?(r.classList.remove(`${o.containerModifierClass}grid`,`${o.containerModifierClass}grid-column`),e.emitContainerClasses()):!c&&u&&(r.classList.add(`${o.containerModifierClass}grid`),(a.grid.fill&&a.grid.fill==="column"||!a.grid.fill&&o.grid.fill==="column")&&r.classList.add(`${o.containerModifierClass}grid-column`),e.emitContainerClasses()),d&&!I?e.unsetGrabCursor():!d&&I&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(b=>{if(typeof a[b]>"u")return;const y=o[b]&&o[b].enabled,Z=a[b]&&a[b].enabled;y&&!Z&&e[b].disable(),!y&&Z&&e[b].enable()});const f=a.direction&&a.direction!==o.direction,A=o.loop&&(a.slidesPerView!==o.slidesPerView||f),v=o.loop;f&&n&&e.changeDirection(),hn(e.params,a);const h=e.params.enabled,p=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),C&&!h?e.disable():!C&&h&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",a),n&&(A?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!v&&p?(e.loopCreate(t),e.updateSlides()):v&&!p&&e.loopDestroy()),e.emit("breakpoint",a)}function iF(e,t,n){if(t===void 0&&(t="window"),!e||t==="container"&&!n)return;let o=!1;const r=Wn(),i=t==="window"?r.innerHeight:n.clientHeight,l=Object.keys(e).map(s=>{if(typeof s=="string"&&s.indexOf("@")===0){const a=parseFloat(s.substr(1));return{value:i*a,point:s}}return{value:s,point:s}});l.sort((s,a)=>parseInt(s.value,10)-parseInt(a.value,10));for(let s=0;s<l.length;s+=1){const{point:a,value:c}=l[s];t==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(o=a):c<=n.clientWidth&&(o=a)}return o||"max"}var lF={setBreakpoint:rF,getBreakpoint:iF};function sF(e,t){const n=[];return e.forEach(o=>{typeof o=="object"?Object.keys(o).forEach(r=>{o[r]&&n.push(t+r)}):typeof o=="string"&&n.push(t+o)}),n}function aF(){const e=this,{classNames:t,params:n,rtl:o,el:r,device:i}=e,l=sF(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:o},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:i.android},{ios:i.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...l),r.classList.add(...t),e.emitContainerClasses()}function gF(){const e=this,{el:t,classNames:n}=e;t.classList.remove(...n),e.emitContainerClasses()}var cF={addClasses:aF,removeClasses:gF};function uF(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:o}=n;if(o){const r=e.slides.length-1,i=e.slidesGrid[r]+e.slidesSizesGrid[r]+o*2;e.isLocked=e.size>i}else e.isLocked=e.snapGrid.length===1;n.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),n.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var dF={checkOverflow:uF},hh={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function IF(e,t){return function(o){o===void 0&&(o={});const r=Object.keys(o)[0],i=o[r];if(typeof i!="object"||i===null){hn(t,o);return}if(e[r]===!0&&(e[r]={enabled:!0}),r==="navigation"&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),!(r in e&&"enabled"in i)){hn(t,o);return}typeof e[r]=="object"&&!("enabled"in e[r])&&(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),hn(t,o)}}const jI={eventsEmitter:cH,update:yH,translate:VH,transition:kH,slide:EH,loop:TH,grabCursor:DH,events:oF,breakpoints:lF,checkOverflow:dF,classes:cF},zI={};let BA=class Ro{constructor(){let t,n;for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?n=r[0]:[t,n]=r,n||(n={}),n=hn({},n),t&&!n.el&&(n.el=t);const l=zl();if(n.el&&typeof n.el=="string"&&l.querySelectorAll(n.el).length>1){const u=[];return l.querySelectorAll(n.el).forEach(d=>{const I=hn({},n,{el:d});u.push(new Ro(I))}),u}const s=this;s.__swiper__=!0,s.support=VV(),s.device=RV({userAgent:n.userAgent}),s.browser=sH(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],n.modules&&Array.isArray(n.modules)&&s.modules.push(...n.modules);const a={};s.modules.forEach(u=>{u({params:n,swiper:s,extendParams:IF(n,a),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const c=hn({},hh,a);return s.params=hn({},c,zI,n),s.originalParams=hn({},s.params),s.passedParams=hn({},n),s.params&&s.params.on&&Object.keys(s.params.on).forEach(u=>{s.on(u,s.params.on[u])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:n,params:o}=this,r=Co(n,`.${o.slideClass}, swiper-slide`),i=$c(r[0]);return $c(t)-i}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===t)[0])}recalcSlides(){const t=this,{slidesEl:n,params:o}=t;t.slides=Co(n,`.${o.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,n){const o=this;t=Math.min(Math.max(t,0),1);const r=o.minTranslate(),l=(o.maxTranslate()-r)*t+r;o.translateTo(l,typeof n>"u"?0:n),o.updateActiveIndex(),o.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=t.el.className.split(" ").filter(o=>o.indexOf("swiper")===0||o.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",n.join(" "))}getSlideClasses(t){const n=this;return n.destroyed?"":t.className.split(" ").filter(o=>o.indexOf("swiper-slide")===0||o.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=[];t.slides.forEach(o=>{const r=t.getSlideClasses(o);n.push({slideEl:o,classNames:r}),t.emit("_slideClass",o,r)}),t.emit("_slideClasses",n)}slidesPerViewDynamic(t,n){t===void 0&&(t="current"),n===void 0&&(n=!1);const o=this,{params:r,slides:i,slidesGrid:l,slidesSizesGrid:s,size:a,activeIndex:c}=o;let u=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let d=i[c]?Math.ceil(i[c].swiperSlideSize):0,I;for(let C=c+1;C<i.length;C+=1)i[C]&&!I&&(d+=Math.ceil(i[C].swiperSlideSize),u+=1,d>a&&(I=!0));for(let C=c-1;C>=0;C-=1)i[C]&&!I&&(d+=i[C].swiperSlideSize,u+=1,d>a&&(I=!0))}else if(t==="current")for(let d=c+1;d<i.length;d+=1)(n?l[d]+s[d]-l[c]<a:l[d]-l[c]<a)&&(u+=1);else for(let d=c-1;d>=0;d-=1)l[c]-l[d]<a&&(u+=1);return u}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:n,params:o}=t;o.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(l=>{l.complete&&sc(t,l)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function r(){const l=t.rtlTranslate?t.translate*-1:t.translate,s=Math.min(Math.max(l,t.maxTranslate()),t.minTranslate());t.setTranslate(s),t.updateActiveIndex(),t.updateSlidesClasses()}let i;if(o.freeMode&&o.freeMode.enabled&&!o.cssMode)r(),o.autoHeight&&t.updateAutoHeight();else{if((o.slidesPerView==="auto"||o.slidesPerView>1)&&t.isEnd&&!o.centeredSlides){const l=t.virtual&&o.virtual.enabled?t.virtual.slides:t.slides;i=t.slideTo(l.length-1,0,!1,!0)}else i=t.slideTo(t.activeIndex,0,!1,!0);i||r()}o.watchOverflow&&n!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,n){n===void 0&&(n=!0);const o=this,r=o.params.direction;return t||(t=r==="horizontal"?"vertical":"horizontal"),t===r||t!=="horizontal"&&t!=="vertical"||(o.el.classList.remove(`${o.params.containerModifierClass}${r}`),o.el.classList.add(`${o.params.containerModifierClass}${t}`),o.emitContainerClasses(),o.params.direction=t,o.slides.forEach(i=>{t==="vertical"?i.style.width="":i.style.height=""}),o.emit("changeDirection"),n&&o.update()),o}changeLanguageDirection(t){const n=this;n.rtl&&t==="rtl"||!n.rtl&&t==="ltr"||(n.rtl=t==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(t){const n=this;if(n.mounted)return!0;let o=t||n.params.el;if(typeof o=="string"&&(o=document.querySelector(o)),!o)return!1;o.swiper=n,o.parentNode&&o.parentNode.host&&o.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let l=(()=>o&&o.shadowRoot&&o.shadowRoot.querySelector?o.shadowRoot.querySelector(r()):Co(o,r())[0])();return!l&&n.params.createElements&&(l=qc("div",n.params.wrapperClass),o.append(l),Co(o,`.${n.params.slideClass}`).forEach(s=>{l.append(s)})),Object.assign(n,{el:o,wrapperEl:l,slidesEl:n.isElement&&!o.parentNode.host.slideSlots?o.parentNode.host:l,hostEl:n.isElement?o.parentNode.host:o,mounted:!0,rtl:o.dir.toLowerCase()==="rtl"||mr(o,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(o.dir.toLowerCase()==="rtl"||mr(o,"direction")==="rtl"),wrongRTL:mr(l,"display")==="-webkit-box"}),!0}init(t){const n=this;if(n.initialized||n.mount(t)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents();const r=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&r.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(i=>{i.complete?sc(n,i):i.addEventListener("load",l=>{sc(n,l.target)})}),mh(n),n.initialized=!0,mh(n),n.emit("init"),n.emit("afterInit"),n}destroy(t,n){t===void 0&&(t=!0),n===void 0&&(n=!0);const o=this,{params:r,el:i,wrapperEl:l,slides:s}=o;return typeof o.params>"u"||o.destroyed||(o.emit("beforeDestroy"),o.initialized=!1,o.detachEvents(),r.loop&&o.loopDestroy(),n&&(o.removeClasses(),i.removeAttribute("style"),l.removeAttribute("style"),s&&s.length&&s.forEach(a=>{a.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),a.removeAttribute("style"),a.removeAttribute("data-swiper-slide-index")})),o.emit("destroy"),Object.keys(o.eventsListeners).forEach(a=>{o.off(a)}),t!==!1&&(o.el.swiper=null,q3(o)),o.destroyed=!0),null}static extendDefaults(t){hn(zI,t)}static get extendedDefaults(){return zI}static get defaults(){return hh}static installModule(t){Ro.prototype.__modules__||(Ro.prototype.__modules__=[]);const n=Ro.prototype.__modules__;typeof t=="function"&&n.indexOf(t)<0&&n.push(t)}static use(t){return Array.isArray(t)?(t.forEach(n=>Ro.installModule(n)),Ro):(Ro.installModule(t),Ro)}};Object.keys(jI).forEach(e=>{Object.keys(jI[e]).forEach(t=>{BA.prototype[t]=jI[e][t]})});BA.use([aH,gH]);const kV=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Xi(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"&&!e.__swiper__}function pl(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(o=>n.indexOf(o)<0).forEach(o=>{typeof e[o]>"u"?e[o]=t[o]:Xi(t[o])&&Xi(e[o])&&Object.keys(t[o]).length>0?t[o].__swiper__?e[o]=t[o]:pl(e[o],t[o]):e[o]=t[o]})}function xV(e){return e===void 0&&(e={}),e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function XV(e){return e===void 0&&(e={}),e.pagination&&typeof e.pagination.el>"u"}function JV(e){return e===void 0&&(e={}),e.scrollbar&&typeof e.scrollbar.el>"u"}function NV(e){e===void 0&&(e="");const t=e.split(" ").map(o=>o.trim()).filter(o=>!!o),n=[];return t.forEach(o=>{n.indexOf(o)<0&&n.push(o)}),n.join(" ")}function CF(e){return e===void 0&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function mF(e){let{swiper:t,slides:n,passedParams:o,changedParams:r,nextEl:i,prevEl:l,scrollbarEl:s,paginationEl:a}=e;const c=r.filter(k=>k!=="children"&&k!=="direction"&&k!=="wrapperClass"),{params:u,pagination:d,navigation:I,scrollbar:C,virtual:f,thumbs:A}=t;let v,h,p,b,y,Z,G,V;r.includes("thumbs")&&o.thumbs&&o.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(v=!0),r.includes("controller")&&o.controller&&o.controller.control&&u.controller&&!u.controller.control&&(h=!0),r.includes("pagination")&&o.pagination&&(o.pagination.el||a)&&(u.pagination||u.pagination===!1)&&d&&!d.el&&(p=!0),r.includes("scrollbar")&&o.scrollbar&&(o.scrollbar.el||s)&&(u.scrollbar||u.scrollbar===!1)&&C&&!C.el&&(b=!0),r.includes("navigation")&&o.navigation&&(o.navigation.prevEl||l)&&(o.navigation.nextEl||i)&&(u.navigation||u.navigation===!1)&&I&&!I.prevEl&&!I.nextEl&&(y=!0);const S=k=>{t[k]&&(t[k].destroy(),k==="navigation"?(t.isElement&&(t[k].prevEl.remove(),t[k].nextEl.remove()),u[k].prevEl=void 0,u[k].nextEl=void 0,t[k].prevEl=void 0,t[k].nextEl=void 0):(t.isElement&&t[k].el.remove(),u[k].el=void 0,t[k].el=void 0))};r.includes("loop")&&t.isElement&&(u.loop&&!o.loop?Z=!0:!u.loop&&o.loop?G=!0:V=!0),c.forEach(k=>{if(Xi(u[k])&&Xi(o[k]))Object.assign(u[k],o[k]),(k==="navigation"||k==="pagination"||k==="scrollbar")&&"enabled"in o[k]&&!o[k].enabled&&S(k);else{const B=o[k];(B===!0||B===!1)&&(k==="navigation"||k==="pagination"||k==="scrollbar")?B===!1&&S(k):u[k]=o[k]}}),c.includes("controller")&&!h&&t.controller&&t.controller.control&&u.controller&&u.controller.control&&(t.controller.control=u.controller.control),r.includes("children")&&n&&f&&u.virtual.enabled?(f.slides=n,f.update(!0)):r.includes("virtual")&&f&&u.virtual.enabled&&(n&&(f.slides=n),f.update(!0)),r.includes("children")&&n&&u.loop&&(V=!0),v&&A.init()&&A.update(!0),h&&(t.controller.control=u.controller.control),p&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-pagination"),a.part.add("pagination"),t.el.appendChild(a)),a&&(u.pagination.el=a),d.init(),d.render(),d.update()),b&&(t.isElement&&(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-scrollbar"),s.part.add("scrollbar"),t.el.appendChild(s)),s&&(u.scrollbar.el=s),C.init(),C.updateSize(),C.setTranslate()),y&&(t.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),i.innerHTML=t.hostEl.constructor.nextButtonSvg,i.part.add("button-next"),t.el.appendChild(i)),(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-button-prev"),l.innerHTML=t.hostEl.constructor.prevButtonSvg,l.part.add("button-prev"),t.el.appendChild(l))),i&&(u.navigation.nextEl=i),l&&(u.navigation.prevEl=l),I.init(),I.update()),r.includes("allowSlideNext")&&(t.allowSlideNext=o.allowSlideNext),r.includes("allowSlidePrev")&&(t.allowSlidePrev=o.allowSlidePrev),r.includes("direction")&&t.changeDirection(o.direction,!1),(Z||V)&&t.loopDestroy(),(G||V)&&t.loopCreate(),t.update()}function hF(e,t){e===void 0&&(e={}),t===void 0&&(t=!0);const n={on:{}},o={},r={};pl(n,hh),n._emitClasses=!0,n.init=!1;const i={},l=kV.map(a=>a.replace(/_/,"")),s=Object.assign({},e);return Object.keys(s).forEach(a=>{typeof e[a]>"u"||(l.indexOf(a)>=0?Xi(e[a])?(n[a]={},r[a]={},pl(n[a],e[a]),pl(r[a],e[a])):(n[a]=e[a],r[a]=e[a]):a.search(/on[A-Z]/)===0&&typeof e[a]=="function"?t?o[`${a[2].toLowerCase()}${a.substr(3)}`]=e[a]:n.on[`${a[2].toLowerCase()}${a.substr(3)}`]=e[a]:i[a]=e[a])}),["navigation","pagination","scrollbar"].forEach(a=>{n[a]===!0&&(n[a]={}),n[a]===!1&&delete n[a]}),{params:n,passedParams:r,rest:i,events:o}}function fF(e,t){let{el:n,nextEl:o,prevEl:r,paginationEl:i,scrollbarEl:l,swiper:s}=e;xV(t)&&o&&r&&(s.params.navigation.nextEl=o,s.originalParams.navigation.nextEl=o,s.params.navigation.prevEl=r,s.originalParams.navigation.prevEl=r),XV(t)&&i&&(s.params.pagination.el=i,s.originalParams.pagination.el=i),JV(t)&&l&&(s.params.scrollbar.el=l,s.originalParams.scrollbar.el=l),s.init(n)}function AF(e,t,n,o,r){const i=[];if(!t)return i;const l=a=>{i.indexOf(a)<0&&i.push(a)};if(n&&o){const a=o.map(r),c=n.map(r);a.join("")!==c.join("")&&l("children"),o.length!==n.length&&l("children")}return kV.filter(a=>a[0]==="_").map(a=>a.replace(/_/,"")).forEach(a=>{if(a in e&&a in t)if(Xi(e[a])&&Xi(t[a])){const c=Object.keys(e[a]),u=Object.keys(t[a]);c.length!==u.length?l(a):(c.forEach(d=>{e[a][d]!==t[a][d]&&l(a)}),u.forEach(d=>{e[a][d]!==t[a][d]&&l(a)}))}else e[a]!==t[a]&&l(a)}),i}const pF=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function eu(){return eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},eu.apply(this,arguments)}function YV(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function HV(e){const t=[];return P.Children.toArray(e).forEach(n=>{YV(n)?t.push(n):n.props&&n.props.children&&HV(n.props.children).forEach(o=>t.push(o))}),t}function bF(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return P.Children.toArray(e).forEach(o=>{if(YV(o))t.push(o);else if(o.props&&o.props.slot&&n[o.props.slot])n[o.props.slot].push(o);else if(o.props&&o.props.children){const r=HV(o.props.children);r.length>0?r.forEach(i=>t.push(i)):n["container-end"].push(o)}else n["container-end"].push(o)}),{slides:t,slots:n}}function yF(e,t,n){if(!n)return null;const o=u=>{let d=u;return u<0?d=t.length+u:d>=t.length&&(d=d-t.length),d},r=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:i,to:l}=n,s=e.params.loop?-t.length:0,a=e.params.loop?t.length*2:t.length,c=[];for(let u=s;u<a;u+=1)u>=i&&u<=l&&c.push(t[o(u)]);return c.map((u,d)=>P.cloneElement(u,{swiper:e,style:r,key:u.props.virtualIndex||u.key||`slide-${d}`}))}function Hs(e,t){return typeof window>"u"?m.useEffect(e,t):m.useLayoutEffect(e,t)}const ly=m.createContext(null),vF=m.createContext(null),SA=m.forwardRef(function(e,t){let{className:n,tag:o="div",wrapperTag:r="div",children:i,onSwiper:l,...s}=e===void 0?{}:e,a=!1;const[c,u]=m.useState("swiper"),[d,I]=m.useState(null),[C,f]=m.useState(!1),A=m.useRef(!1),v=m.useRef(null),h=m.useRef(null),p=m.useRef(null),b=m.useRef(null),y=m.useRef(null),Z=m.useRef(null),G=m.useRef(null),V=m.useRef(null),{params:S,passedParams:k,rest:B,events:R}=hF(s),{slides:W,slots:w}=bF(i),X=()=>{f(!C)};Object.assign(S.on,{_containerClasses(Y,N){u(N)}});const E=()=>{Object.assign(S.on,R),a=!0;const Y={...S};if(delete Y.wrapperClass,h.current=new BA(Y),h.current.virtual&&h.current.params.virtual.enabled){h.current.virtual.slides=W;const N={cache:!1,slides:W,renderExternal:I,renderExternalUpdate:!1};pl(h.current.params.virtual,N),pl(h.current.originalParams.virtual,N)}};v.current||E(),h.current&&h.current.on("_beforeBreakpoint",X);const M=()=>{a||!R||!h.current||Object.keys(R).forEach(Y=>{h.current.on(Y,R[Y])})},L=()=>{!R||!h.current||Object.keys(R).forEach(Y=>{h.current.off(Y,R[Y])})};m.useEffect(()=>()=>{h.current&&h.current.off("_beforeBreakpoint",X)}),m.useEffect(()=>{!A.current&&h.current&&(h.current.emitSlidesClasses(),A.current=!0)}),Hs(()=>{if(t&&(t.current=v.current),!!v.current)return h.current.destroyed&&E(),fF({el:v.current,nextEl:y.current,prevEl:Z.current,paginationEl:G.current,scrollbarEl:V.current,swiper:h.current},S),l&&!h.current.destroyed&&l(h.current),()=>{h.current&&!h.current.destroyed&&h.current.destroy(!0,!1)}},[]),Hs(()=>{M();const Y=AF(k,p.current,W,b.current,N=>N.key);return p.current=k,b.current=W,Y.length&&h.current&&!h.current.destroyed&&mF({swiper:h.current,slides:W,passedParams:k,changedParams:Y,nextEl:y.current,prevEl:Z.current,scrollbarEl:V.current,paginationEl:G.current}),()=>{L()}}),Hs(()=>{pF(h.current)},[d]);function F(){return S.virtual?yF(h.current,W,d):W.map((Y,N)=>P.cloneElement(Y,{swiper:h.current,swiperSlideIndex:N}))}return P.createElement(o,eu({ref:v,className:NV(`${c}${n?` ${n}`:""}`)},B),P.createElement(vF.Provider,{value:h.current},w["container-start"],P.createElement(r,{className:CF(S.wrapperClass)},w["wrapper-start"],F(),w["wrapper-end"]),xV(S)&&P.createElement(P.Fragment,null,P.createElement("div",{ref:Z,className:"swiper-button-prev"}),P.createElement("div",{ref:y,className:"swiper-button-next"})),JV(S)&&P.createElement("div",{ref:V,className:"swiper-scrollbar"}),XV(S)&&P.createElement("div",{ref:G,className:"swiper-pagination"}),w["container-end"]))});SA.displayName="Swiper";const VA=m.forwardRef(function(e,t){let{tag:n="div",children:o,className:r="",swiper:i,zoom:l,lazy:s,virtualIndex:a,swiperSlideIndex:c,...u}=e===void 0?{}:e;const d=m.useRef(null),[I,C]=m.useState("swiper-slide"),[f,A]=m.useState(!1);function v(y,Z,G){Z===d.current&&C(G)}Hs(()=>{if(typeof c<"u"&&(d.current.swiperSlideIndex=c),t&&(t.current=d.current),!(!d.current||!i)){if(i.destroyed){I!=="swiper-slide"&&C("swiper-slide");return}return i.on("_slideClass",v),()=>{i&&i.off("_slideClass",v)}}}),Hs(()=>{i&&d.current&&!i.destroyed&&C(i.getSlideClasses(d.current))},[i]);const h={isActive:I.indexOf("swiper-slide-active")>=0,isVisible:I.indexOf("swiper-slide-visible")>=0,isPrev:I.indexOf("swiper-slide-prev")>=0,isNext:I.indexOf("swiper-slide-next")>=0},p=()=>typeof o=="function"?o(h):o,b=()=>{A(!0)};return P.createElement(n,eu({ref:d,className:NV(`${I}${r?` ${r}`:""}`),"data-swiper-slide-index":a,onLoad:b},u),l&&P.createElement(ly.Provider,{value:h},P.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof l=="number"?l:void 0},p(),s&&!f&&P.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&P.createElement(ly.Provider,{value:h},p(),s&&!f&&P.createElement("div",{className:"swiper-lazy-preloader"})))});VA.displayName="SwiperSlide";function ZF(e,t,n,o){return e.params.createElements&&Object.keys(o).forEach(r=>{if(!n[r]&&n.auto===!0){let i=Co(e.el,`.${o[r]}`)[0];i||(i=qc("div",o[r]),i.className=o[r],e.el.append(i)),n[r]=i,t[r]=i}}),n}function Is(e){return e===void 0&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function FV(e){let{swiper:t,extendParams:n,on:o,emit:r}=e;const i="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:h=>h,formatFractionTotal:h=>h,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),t.pagination={el:null,bullets:[]};let l,s=0;function a(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function c(h,p){const{bulletActiveClass:b}=t.params.pagination;h&&(h=h[`${p==="prev"?"previous":"next"}ElementSibling`],h&&(h.classList.add(`${b}-${p}`),h=h[`${p==="prev"?"previous":"next"}ElementSibling`],h&&h.classList.add(`${b}-${p}-${p}`)))}function u(h){const p=h.target.closest(Is(t.params.pagination.bulletClass));if(!p)return;h.preventDefault();const b=$c(p)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===b)return;t.slideToLoop(b)}else t.slideTo(b)}function d(){const h=t.rtl,p=t.params.pagination;if(a())return;let b=t.pagination.el;b=Bo(b);let y,Z;const G=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,V=t.params.loop?Math.ceil(G/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(Z=t.previousRealIndex||0,y=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(y=t.snapIndex,Z=t.previousSnapIndex):(Z=t.previousIndex||0,y=t.activeIndex||0),p.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const S=t.pagination.bullets;let k,B,R;if(p.dynamicBullets&&(l=Ch(S[0],t.isHorizontal()?"width":"height",!0),b.forEach(W=>{W.style[t.isHorizontal()?"width":"height"]=`${l*(p.dynamicMainBullets+4)}px`}),p.dynamicMainBullets>1&&Z!==void 0&&(s+=y-(Z||0),s>p.dynamicMainBullets-1?s=p.dynamicMainBullets-1:s<0&&(s=0)),k=Math.max(y-s,0),B=k+(Math.min(S.length,p.dynamicMainBullets)-1),R=(B+k)/2),S.forEach(W=>{const w=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(X=>`${p.bulletActiveClass}${X}`)].map(X=>typeof X=="string"&&X.includes(" ")?X.split(" "):X).flat();W.classList.remove(...w)}),b.length>1)S.forEach(W=>{const w=$c(W);w===y?W.classList.add(...p.bulletActiveClass.split(" ")):t.isElement&&W.setAttribute("part","bullet"),p.dynamicBullets&&(w>=k&&w<=B&&W.classList.add(...`${p.bulletActiveClass}-main`.split(" ")),w===k&&c(W,"prev"),w===B&&c(W,"next"))});else{const W=S[y];if(W&&W.classList.add(...p.bulletActiveClass.split(" ")),t.isElement&&S.forEach((w,X)=>{w.setAttribute("part",X===y?"bullet-active":"bullet")}),p.dynamicBullets){const w=S[k],X=S[B];for(let E=k;E<=B;E+=1)S[E]&&S[E].classList.add(...`${p.bulletActiveClass}-main`.split(" "));c(w,"prev"),c(X,"next")}}if(p.dynamicBullets){const W=Math.min(S.length,p.dynamicMainBullets+4),w=(l*W-l)/2-R*l,X=h?"right":"left";S.forEach(E=>{E.style[t.isHorizontal()?X:"top"]=`${w}px`})}}b.forEach((S,k)=>{if(p.type==="fraction"&&(S.querySelectorAll(Is(p.currentClass)).forEach(B=>{B.textContent=p.formatFractionCurrent(y+1)}),S.querySelectorAll(Is(p.totalClass)).forEach(B=>{B.textContent=p.formatFractionTotal(V)})),p.type==="progressbar"){let B;p.progressbarOpposite?B=t.isHorizontal()?"vertical":"horizontal":B=t.isHorizontal()?"horizontal":"vertical";const R=(y+1)/V;let W=1,w=1;B==="horizontal"?W=R:w=R,S.querySelectorAll(Is(p.progressbarFillClass)).forEach(X=>{X.style.transform=`translate3d(0,0,0) scaleX(${W}) scaleY(${w})`,X.style.transitionDuration=`${t.params.speed}ms`})}p.type==="custom"&&p.renderCustom?(S.innerHTML=p.renderCustom(t,y+1,V),k===0&&r("paginationRender",S)):(k===0&&r("paginationRender",S),r("paginationUpdate",S)),t.params.watchOverflow&&t.enabled&&S.classList[t.isLocked?"add":"remove"](p.lockClass)})}function I(){const h=t.params.pagination;if(a())return;const p=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let b=t.pagination.el;b=Bo(b);let y="";if(h.type==="bullets"){let Z=t.params.loop?Math.ceil(p/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&Z>p&&(Z=p);for(let G=0;G<Z;G+=1)h.renderBullet?y+=h.renderBullet.call(t,G,h.bulletClass):y+=`<${h.bulletElement} ${t.isElement?'part="bullet"':""} class="${h.bulletClass}"></${h.bulletElement}>`}h.type==="fraction"&&(h.renderFraction?y=h.renderFraction.call(t,h.currentClass,h.totalClass):y=`<span class="${h.currentClass}"></span> / <span class="${h.totalClass}"></span>`),h.type==="progressbar"&&(h.renderProgressbar?y=h.renderProgressbar.call(t,h.progressbarFillClass):y=`<span class="${h.progressbarFillClass}"></span>`),t.pagination.bullets=[],b.forEach(Z=>{h.type!=="custom"&&(Z.innerHTML=y||""),h.type==="bullets"&&t.pagination.bullets.push(...Z.querySelectorAll(Is(h.bulletClass)))}),h.type!=="custom"&&r("paginationRender",b[0])}function C(){t.params.pagination=ZF(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const h=t.params.pagination;if(!h.el)return;let p;typeof h.el=="string"&&t.isElement&&(p=t.el.querySelector(h.el)),!p&&typeof h.el=="string"&&(p=[...document.querySelectorAll(h.el)]),p||(p=h.el),!(!p||p.length===0)&&(t.params.uniqueNavElements&&typeof h.el=="string"&&Array.isArray(p)&&p.length>1&&(p=[...t.el.querySelectorAll(h.el)],p.length>1&&(p=p.filter(b=>SV(b,".swiper")[0]===t.el)[0])),Array.isArray(p)&&p.length===1&&(p=p[0]),Object.assign(t.pagination,{el:p}),p=Bo(p),p.forEach(b=>{h.type==="bullets"&&h.clickable&&b.classList.add(...(h.clickableClass||"").split(" ")),b.classList.add(h.modifierClass+h.type),b.classList.add(t.isHorizontal()?h.horizontalClass:h.verticalClass),h.type==="bullets"&&h.dynamicBullets&&(b.classList.add(`${h.modifierClass}${h.type}-dynamic`),s=0,h.dynamicMainBullets<1&&(h.dynamicMainBullets=1)),h.type==="progressbar"&&h.progressbarOpposite&&b.classList.add(h.progressbarOppositeClass),h.clickable&&b.addEventListener("click",u),t.enabled||b.classList.add(h.lockClass)}))}function f(){const h=t.params.pagination;if(a())return;let p=t.pagination.el;p&&(p=Bo(p),p.forEach(b=>{b.classList.remove(h.hiddenClass),b.classList.remove(h.modifierClass+h.type),b.classList.remove(t.isHorizontal()?h.horizontalClass:h.verticalClass),h.clickable&&(b.classList.remove(...(h.clickableClass||"").split(" ")),b.removeEventListener("click",u))})),t.pagination.bullets&&t.pagination.bullets.forEach(b=>b.classList.remove(...h.bulletActiveClass.split(" ")))}o("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const h=t.params.pagination;let{el:p}=t.pagination;p=Bo(p),p.forEach(b=>{b.classList.remove(h.horizontalClass,h.verticalClass),b.classList.add(t.isHorizontal()?h.horizontalClass:h.verticalClass)})}),o("init",()=>{t.params.pagination.enabled===!1?v():(C(),I(),d())}),o("activeIndexChange",()=>{typeof t.snapIndex>"u"&&d()}),o("snapIndexChange",()=>{d()}),o("snapGridLengthChange",()=>{I(),d()}),o("destroy",()=>{f()}),o("enable disable",()=>{let{el:h}=t.pagination;h&&(h=Bo(h),h.forEach(p=>p.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),o("lock unlock",()=>{d()}),o("click",(h,p)=>{const b=p.target,y=Bo(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&y&&y.length>0&&!b.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&b===t.navigation.nextEl||t.navigation.prevEl&&b===t.navigation.prevEl))return;const Z=y[0].classList.contains(t.params.pagination.hiddenClass);r(Z===!0?"paginationShow":"paginationHide"),y.forEach(G=>G.classList.toggle(t.params.pagination.hiddenClass))}});const A=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:h}=t.pagination;h&&(h=Bo(h),h.forEach(p=>p.classList.remove(t.params.pagination.paginationDisabledClass))),C(),I(),d()},v=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:h}=t.pagination;h&&(h=Bo(h),h.forEach(p=>p.classList.add(t.params.pagination.paginationDisabledClass))),f()};Object.assign(t.pagination,{enable:A,disable:v,render:I,update:d,init:C,destroy:f})}const EV=[{className:"basico",plan:"Bsico",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlace a 1 red social","Vnculo perfil Know me"],cost:0,color:"#495456"},{className:"personal",plan:"Personal",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlace a 4 red social","Vnculo perfil Know me","Tarjeta de proximidad con logo"],cost:["99","980"],color:"#38B6FF"},{className:"freelance",plan:"Freelance",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 450 caracteres ","Enlace a 6 red social","Vnculo perfil Know me","Tarjeta de proximidad con diseo personalizado","Alta en network Know me"],cost:["149","1,490"],color:"#38B6FF"},{className:"emprendedor",plan:"Emprendedor",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlaces ilimiados a redes social","Vnculo perfil Know me","1000 Tarjetas de impresas con diseo personalizado","Alta en network Know me","Alta de archivos PDF en tu perfil Emprendedor","Galeria de imagenes"],cost:["199","1,990"],color:"#38B6FF"},{className:"ecommerce",plan:"Ecommerce",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlaces ilimiados a redes social","Vnculo perfil Know me","1000 Tarjetas de impresas con diseo personalizado","Alta en network Know me","Alta de archivos PDF en tu perfil Emprendedor","Galeria de imagenes","Tienda en linea"],cost:["330","3,190"],color:"#FD6202"}],KV={knowme_network:"Plataforma Knowme",proximity_card:["Tarjeta NFC - Blanco","Tarjeta NFC - Personalizada"],qr_code:"Codigo QR",social_media:"Redes Sociales (Links - Apps)",web_page_url:"Link nico para compartir",personal_information:"Informacin Personal",business_information:"Informacin Business",profile_img:"Foto de Perfil",cover_img:"Foto de Portada",share_contact:"Intercambio de Contactos",ai_card_read:"Lectura AI de Tarjetas Tradicionales",contact_management:"Gestin de Contactos Recibidos",payment_links:"Enlaces de Pago",theme_selection:"Eleccin de Tema (Claro / Oscuro)",catalog:"Catlogo (Productos y Servicios)",service_directory:"Directorio de Servicios (Opcional)",directory_key_words:["5 Palabras clave para directorio","15 Palabras clave para directorio","Palabras clave ilimitadas para directorio"],knowme_discount:"Mdulo de descuentos a comunidad KnowMe",business_personalization:"Personalizacin Empresarial (Logotipo y pantalones)",gallery:"Galera",broshure:"Broshure o PDF",video:"Video",dashboard:"Dashboard Empresarial",data_export:"Exportacin de Datos",user_management:"Gestin de Usuarios",masive_import:"Importacin Masiva (csv, sheets, excels",analytics:"Analticas",equipment_management:"Gestin de Equipos",card_reasignment:"Reasignacin de Tarjetas",multiple_sub_business:"Multiples Sub-Empresas",crm_integration:"Automatizaciones personalizadas e integraciones con otros sistemas o CRM's"},cn=()=>{const e="https://api.knowmeapp.com",t=localStorage.getItem("token"),{user:n}=m.useContext(kt);return{getPlans:async()=>await Ie.get(`${e}/api/plans`),getProfile:async(w="")=>{let X;return w==""?X=await Ie.get(`${e}/api/profile/username/${n.username}`,{headers:{"x-token":t}}):X=await Ie.get(`${e}/api/profile/username/${w}`,{headers:{"x-token":t}}),X},getSocialMedia:async(w="")=>{let X;return w==""?X=await Ie.get(`${e}/api/social_media_v2/${n.id}`,{headers:{"x-token":t}}):X=await Ie.get(`${e}/api/social_media_v2/${w}`,{headers:{"x-token":t}}),X},postScheduleDay:async w=>(w.id_user=n.id,await Ie.post(`${e}/api/schedule_day`,w,{headers:{"x-token":t}})),updateSocialMedia:async w=>(w.id_user=n.id,await Ie.put(`${e}/api/social_media/${n.id}`,w,{headers:{"x-token":t}})),createProfile:async w=>{try{return w.username=n.username,await Ie.post(`${e}/api/profile`,w,{headers:{"x-token":t}})}catch(X){throw X.response&&X.response.status===400?(console.error("Error 400:",X.response.data),new Error(X.response.data.msg||"Error al crear el perfil.")):(console.error("Error inesperado:",X),new Error("Error inesperado al crear el perfil."))}},getSchedule:async(w="")=>{let X;return w==""?X=await Ie.get(`${e}/api/schedule_day/${n.id}`,{headers:{"x-token":t}}):X=await Ie.get(`${e}/api/schedule_day/${w}`,{headers:{"x-token":t}}),X},updateScheduleDay:async w=>(w.id_user=n.id,await Ie.put(`${e}/api/schedule_day/${n.id}/${w.day}`,w,{headers:{"x-token":t}})),updateProfile:async w=>(w.username=n.username,await Ie.put(`${e}/api/profile/${n.username}`,w,{headers:{"x-token":t}})),getProfiles:async()=>await Ie.get(`${e}/api/profile/`),getCategories:async()=>await Ie.get(`${e}/api/categories/`,{headers:{"x-token":t}}),getProfilesFilter:async(w,X)=>await Ie.get(`${e}/api/profile/filter/${w}/${X}`),getFilterCategories:async w=>await Ie.get(`${e}/api/profile/filter/${w}`),createSocialMedia:async w=>(w.id_user=n.id,await Ie.post(`${e}/api/social_media`,w,{headers:{"x-token":t}})),updateProfilePhoto:async w=>await Ie.post(`${e}/api/profile/uploadAvatar`,w,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}}),deleteSocialMedia:async(w,X)=>await Ie.delete(`${e}/api/social_media_v2/${X}/${w}`,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}}),getUser:async w=>await Ie.get(`${e}/api/auth/user/${w}`,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}}),validateUser:async()=>await Ie.get(`${e}/api/user`,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}}),getAlgolia:async(w,X)=>await Ie.get(`${e}/api/profile/search/${X}?page=${w}&hitsPerPage=6`,{headers:{"x-token":t}}),uploadFromDataUri:async w=>{const X=await Ie.post(`${e}/api/profile/uploadFromDataUri`,w,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}});return console.log(X),X},validateCard:async w=>{try{return await Ie.get(`${e}/api/card/validate/${w}`,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}})}catch(X){return X.response}},listCards:async()=>await Ie.get(`${e}/api/card`,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}}),getOrderCards:async()=>await Ie.get(`${e}/api/order_card/${n.id}`,{headers:{"x-token":t}}),getOrderCardPdf:async w=>{const X=await Ie.get(`${e}/api/order_card/${w}/pdf`,{headers:{"x-token":t,"Content-Type":"application/pdf"}});return console.log(X),X},postAdressDetail:async w=>await Ie.post(`${e}/api/address/`,w,{headers:{"x-token":t}}),getAdressOrder:async()=>await Ie.get(`${e}/api/address/`,{headers:{"x-token":t}})}};const GF=({plan:e,setSelectedPlan:t,cardsPlan:n})=>g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"plan-card ",style:{borderColor:"#"+n.color_card},children:[g.jsxs("div",{className:"info-card",children:[g.jsx("label",{className:"plan-title",style:{color:"#"+n.color_card},children:n.name_plan}),g.jsx("ul",{className:"plan-list p-4",children:Object.entries(KV).map(o=>{if(n[o[0]]==!0)return typeof o[1]=="string"?g.jsxs("li",{style:{color:"#"+n.color_card},children:[" ",o[1]]},o[0]):g.jsxs("li",{style:{color:"#"+n.color_card},children:[" ",o[1][n[o[0]]-1]]},o[0])})})]}),g.jsxs("div",{className:"plan-footer",children:[g.jsxs(Fe,{className:"plan-cost",style:{color:"#"+n.color_card},children:[g.jsx(Ce,{xs:4,children:parseFloat(n.unique_cost)>0&&parseFloat(n.annual_cost)>0&&"MXN"}),g.jsx(Ce,{xs:8,className:"plan-month",children:parseFloat(n.unique_cost)<0&&parseFloat(n.annual_cost)<0?"Contctanos":n.unique_cost=="0.00"&&n.annual_cost=="0.00"?"Gratis":n.unique_cost!="0.00"?`$${n.unique_cost} Pago nico`:`$${n.annual_cost} Anual`})]}),g.jsx(mt,{className:`plan-btn ${n.name_plan}`,style:{color:"#"+n.color_card,borderColor:"#"+n.color_card,cursor:"pointer"},onClick:()=>{t(n)},children:`Elige ${n.name_plan}`})]})]}),g.jsx("style",{children:`
          button.${n.name_plan}:hover,
          button.${n.name_plan}:active {
            background-color: ${"#"+n.color_card} !important;
            color: linear-gradient(var(--background-gradient)) !important;
          }
        `})]}),BF=({selectedPlan:e,setSelectedPlan:t})=>{const[n,o]=m.useState(null),r=cn(),i=async()=>{const l=await r.getPlans();o(l.data.plans)};return m.useEffect(()=>{i()},[]),g.jsx(g.Fragment,{children:n!=null&&g.jsx(SA,{slidesPerView:1.3,centeredSlides:!0,spaceBetween:30,modules:[FV],className:"mySwiper",children:EV.map((l,s)=>(l.id_plan=n[s].id_plan,l.cost=[n[s].month_cost,n[s].annual_cost],l.color="#"+n[s].color_card,g.jsx(VA,{children:g.jsx(GF,{plan:l,setSelectedPlan:t,cardsPlan:n[s]})},s)))})})};const SF=({selectedPlan:e})=>{const[t,n]=m.useState(!1),o=qt(),r=Mr(),i=ut();m.useContext(kt),m.useEffect(()=>{o.state==null&&i("/")},[o]);const l=async()=>{const s=window.location.href.replace("plan",""),a={id_plan_fk:e.id_plan,successUrl:`${s}login`,cancelUrl:`${s}registro`},{usuario:c,terms:u,consent:d,email:I,nombre:C,password:f,apellido:A}=o.state.user,v={username:c,name:C,lastname:A,email:I,password:f,mailing_status:d,terms_policies_status:u,id_plan_fk:e.id_plan,id_user_type_fk:2};try{n(!0);const{data:h}=await r.createUser(v),{data:p}=await r.addPlan(h.id,a,h.token);n(!1),window.open(p.user.stripe_session_url,"_self")}catch{n(!1),i("/registro")}};return g.jsxs(g.Fragment,{children:[t&&g.jsx(ZA,{}),g.jsx("div",{className:"plan-pay-option"}),g.jsx("div",{className:"plan-pay-btn",children:g.jsx(mt,{onClick:l,children:e.name_plan!="Bsico"?"Pagar con PayPal":"Comenzar"})}),g.jsx(Rn,{position:"top-center",richColors:!0})]})};var VF={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function RF(e){if(typeof e=="number")return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();n.includes(".")?t=parseFloat(n):t=parseInt(n,10);var o=(e.match(/[^0-9]*$/)||"").toString();return VF[o]?{value:t,unit:o}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function DI(e){var t=RF(e);return"".concat(t.value).concat(t.unit)}var WF=function(e,t,n){var o="react-spinners-".concat(e,"-").concat(n);if(typeof window>"u"||!window.document)return o;var r=document.createElement("style");document.head.appendChild(r);var i=r.sheet,l=`
    @keyframes `.concat(o,` {
      `).concat(t,`
    }
  `);return i&&i.insertRule(l,0),o},tu=globalThis&&globalThis.__assign||function(){return tu=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},tu.apply(this,arguments)},wF=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},kF=WF("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");function xF(e){var t=e.loading,n=t===void 0?!0:t,o=e.color,r=o===void 0?"#000000":o,i=e.speedMultiplier,l=i===void 0?1:i,s=e.cssOverride,a=s===void 0?{}:s,c=e.size,u=c===void 0?15:c,d=e.margin,I=d===void 0?2:d,C=wF(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),f=tu({display:"inherit"},a),A=function(v){return{display:"inline-block",backgroundColor:r,width:DI(u),height:DI(u),margin:DI(I),borderRadius:"100%",animation:"".concat(kF," ").concat(.7/l,"s ").concat(v%2?"0s":"".concat(.35/l,"s")," infinite linear"),animationFillMode:"both"}};return n?m.createElement("span",tu({style:f},C),m.createElement("span",{style:A(1)}),m.createElement("span",{style:A(2)}),m.createElement("span",{style:A(3)})):null}const Tr=({fullScreen:e})=>g.jsx("div",{className:"loading-screen",style:e==!0?{height:"100vh"}:{},children:g.jsxs("div",{className:"loading-container",children:[g.jsx(Ba,{src:D2,beforeInjection:t=>{t.classList.add("loading-logo")}}),g.jsx(xF,{color:"#597393",size:60,className:"loading-loader"})]})}),XF=()=>{const e=Mr(),t=ut(),n=qt(),[o,r]=m.useState(null),i=s=>new Promise(a=>setTimeout(a,s)),l=async()=>{const{usuario:s,terms:a,consent:c,email:u,nombre:d,password:I,apellido:C}=n.state.user,f={username:s,name:d,lastname:C,email:u,password:I,mailing_status:c,terms_policies_status:a,id_plan_fk:o.id_plan,id_user_type_fk:2};try{const A=await e.createUser(f);console.log(A),await i(1e3),t("/")}catch(A){console.log(A),await i(1e3),t("/registro")}};return m.useEffect(()=>{n.state==null&&t("/login")},[]),m.useEffect(()=>{o&&o.unique_cost=="0.00"&&o.annual_cost=="0.00"&&l()},[o]),o&&o.unique_cost=="0.00"&&o.annual_cost=="0.00"?g.jsxs(g.Fragment,{children:[g.jsx(Tr,{fullScreen:!0}),g.jsx(Rn,{position:"top-center",richColors:!0})]}):g.jsxs("div",{className:"plan-view",children:[g.jsx(mA,{className:"registro-back",size:33,color:"#FD6202",onClick:()=>{o==null?t("/registro"):r(null)}}),g.jsxs(Fe,{children:[g.jsx(Ce,{}),g.jsx(Ce,{xs:12,sm:10,className:"plan-container",children:g.jsxs("div",{className:"plan-card-2 ",children:[o!=null&&g.jsxs("label",{className:"plan-title",children:[" ",`Elige tu mtodo de pago para el plan ${o.name_plan}:`]}),o==null&&g.jsxs(g.Fragment,{children:[g.jsx("label",{className:"plan-title",children:"Bienvenido a Know Me!"}),g.jsx("label",{className:"plan-content",children:"Por favor ayudanos a saber como nos adaptamos a ti"}),g.jsx("label",{className:"plan-subtitle",children:"Cul opcin se adapta a tus necesidades?"})]}),o==null?g.jsx(BF,{selectedPlan:o,setSelectedPlan:r}):g.jsx(SF,{selectedPlan:o})]})}),g.jsx(Ce,{})]}),g.jsx("div",{className:"plan-divider"})]})};function JF(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.0082 3C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM20 5H4V19H20V5ZM18 15V17H6V15H18ZM12 7V13H6V7H12ZM18 11V13H14V11H18ZM10 9H8V11H10V9ZM18 7V9H14V7H18Z"},child:[]}]})(e)}function NF(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"},child:[]}]})(e)}function LV(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11H13V13H5V16L0 12L5 8V11ZM3.99927 18H6.70835C8.11862 19.2447 9.97111 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C9.97111 4 8.11862 4.75527 6.70835 6H3.99927C5.82368 3.57111 8.72836 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C8.72836 22 5.82368 20.4289 3.99927 18Z"},child:[]}]})(e)}function YF(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 416v64M80 32h192a32 32 0 0 1 32 32v412a4 4 0 0 1-4 4H48h0V64a32 32 0 0 1 32-32zm240 160h112a32 32 0 0 1 32 32v256h0-160 0V208a16 16 0 0 1 16-16z"},child:[]},{tag:"path",attr:{d:"M98.08 431.87a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm80 240a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm80 320a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79z"},child:[]},{tag:"ellipse",attr:{cx:"256",cy:"176",rx:"15.95",ry:"16.03",transform:"rotate(-45 255.99 175.996)"},child:[]},{tag:"path",attr:{d:"M258.08 111.87a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zM400 400a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm-64 160a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16z"},child:[]}]})(e)}function Ui(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m184 112 144 144-144 144"},child:[]}]})(e)}function RA(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}function HF(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M261.56 101.28a8 8 0 0 0-11.06 0L66.4 277.15a8 8 0 0 0-2.47 5.79L63.9 448a32 32 0 0 0 32 32H192a16 16 0 0 0 16-16V328a8 8 0 0 1 8-8h80a8 8 0 0 1 8 8v136a16 16 0 0 0 16 16h96.06a32 32 0 0 0 32-32V282.94a8 8 0 0 0-2.47-5.79z"},child:[]},{tag:"path",attr:{d:"m490.91 244.15-74.8-71.56V64a16 16 0 0 0-16-16h-48a16 16 0 0 0-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0 0 43 267.56L250.5 69.28a8 8 0 0 1 11.06 0l207.52 198.28a16 16 0 0 0 22.59-.44c6.14-6.36 5.63-16.86-.76-22.97z"},child:[]}]})(e)}function FF(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"80",height:"80",x:"336",y:"336",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"64",height:"64",x:"272",y:"272",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"64",height:"64",x:"416",y:"416",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"48",x:"432",y:"272",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"48",x:"272",y:"432",rx:"8",ry:"8"},child:[]},{tag:"path",attr:{d:"M448 32H304a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8zM208 32H64a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8zm32 104H64a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V304a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8z"},child:[]}]})(e)}function MV(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M463.1 112.37C373.68 96.33 336.71 84.45 256 48c-80.71 36.45-117.68 48.33-207.1 64.37C32.7 369.13 240.58 457.79 256 464c15.42-6.21 223.3-94.87 207.1-351.63z"},child:[]},{tag:"path",attr:{d:"M256 48c-80.71 36.45-117.68 48.33-207.1 64.37C32.7 369.13 240.58 457.79 256 464z"},child:[]}]})(e)}function EF(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z",clipRule:"evenodd"},child:[]}]})(e)}function KF(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M12,9 L12,0 M15,12 L24,12 M0,12 L9,12 M12,24 L12,15 M12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 Z M3.5,8.5 L1,7.5 M20.5,15.5 L23,16.5 M3,3 L5.5,5.5 M3,3 L5.5,5.5 M18,18 L20.5,20.5 M20.5,3 L18,5.5 M5.5,18 L3,20.5 M12,15 C13.6568542,15 15,13.6568542 15,12 C15,10.3431458 13.6568542,9 12,9 C10.3431458,9 9,10.3431458 9,12 C9,13.6568542 10.3431458,15 12,15 Z M20.5,8.5 L23,7.5 M15.5,3.5 L16.5,1 M15.5,20.5 L16.5,23 M8.5,20.5 L7.5,23 M3.5,15.5 L1,16.5 M8.5,3.5 L7.5,1"},child:[]}]})(e)}const Or=16,LF=[{option:"Home",icon:g.jsx(z9,{size:Or}),url:"/home/"},{option:"Tarjetas",icon:g.jsx(EF,{size:Or}),url:"/share/"},{option:"Business",icon:g.jsx(YF,{size:Or}),url:"/business/"},{option:"Contactos",icon:g.jsx(PS,{size:Or}),url:"/contacts/"},{option:"Perfil",icon:g.jsx(JF,{size:Or}),url:"/perfil/"},{option:"Ajustes",icon:g.jsx(KF,{style:{rotate:"45deg"},size:Or}),url:"/settings/"},{option:"Cerrar Sesin",icon:g.jsx(LV,{size:Or}),url:"/"}];const Ji=({src:e,color:t,size:n,name:o,round:r})=>{const i="https://t4.ftcdn.net/jpg/03/59/58/91/360_F_359589186_JDLl8dIWoBNf1iqEkHxhUeeOulx0wOC5.jpg",l={width:`${n}px`,height:`${n}px`};return g.jsx(g.Fragment,{children:g.jsx("img",{src:e!=""&&e?e:i,alt:o,style:l,className:`inline-block h-6 w-6 object-cover ${r?"rounded-full":"rounded-lg"}`})})};function MF({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-4.28 9.22a.75.75 0 0 0 0 1.06l3 3a.75.75 0 1 0 1.06-1.06l-1.72-1.72h5.69a.75.75 0 0 0 0-1.5h-5.69l1.72-1.72a.75.75 0 0 0-1.06-1.06l-3 3Z",clipRule:"evenodd"}))}const TF=m.forwardRef(MF),jF=TF;function zF({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm4.28 10.28a.75.75 0 0 0 0-1.06l-3-3a.75.75 0 1 0-1.06 1.06l1.72 1.72H8.25a.75.75 0 0 0 0 1.5h5.69l-1.72 1.72a.75.75 0 1 0 1.06 1.06l3-3Z",clipRule:"evenodd"}))}const DF=m.forwardRef(zF),UF=DF;function PF({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M7.5 5.25a3 3 0 0 1 3-3h3a3 3 0 0 1 3 3v.205c.933.085 1.857.197 2.774.334 1.454.218 2.476 1.483 2.476 2.917v3.033c0 1.211-.734 2.352-1.936 2.752A24.726 24.726 0 0 1 12 15.75c-2.73 0-5.357-.442-7.814-1.259-1.202-.4-1.936-1.541-1.936-2.752V8.706c0-1.434 1.022-2.7 2.476-2.917A48.814 48.814 0 0 1 7.5 5.455V5.25Zm7.5 0v.09a49.488 49.488 0 0 0-6 0v-.09a1.5 1.5 0 0 1 1.5-1.5h3a1.5 1.5 0 0 1 1.5 1.5Zm-3 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}),m.createElement("path",{d:"M3 18.4v-2.796a4.3 4.3 0 0 0 .713.31A26.226 26.226 0 0 0 12 17.25c2.892 0 5.68-.468 8.287-1.335.252-.084.49-.189.713-.311V18.4c0 1.452-1.047 2.728-2.523 2.923-2.12.282-4.282.427-6.477.427a49.19 49.19 0 0 1-6.477-.427C4.047 21.128 3 19.852 3 18.4Z"}))}const QF=m.forwardRef(PF),OF=QF;function _F({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M4.5 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5h-.75V3.75a.75.75 0 0 0 0-1.5h-15ZM9 6a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm-.75 3.75A.75.75 0 0 1 9 9h1.5a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM9 12a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm3.75-5.25A.75.75 0 0 1 13.5 6H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM13.5 9a.75.75 0 0 0 0 1.5H15A.75.75 0 0 0 15 9h-1.5Zm-.75 3.75a.75.75 0 0 1 .75-.75H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM9 19.5v-2.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 9 19.5Z",clipRule:"evenodd"}))}const qF=m.forwardRef(_F),WA=qF;function $F({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))}const eE=m.forwardRef($F),tE=eE;function nE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),m.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const oE=m.forwardRef(nE),rE=oE;function iE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),m.createElement("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"}))}const lE=m.forwardRef(iE),Ra=lE;function sE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const aE=m.forwardRef(sE),gE=aE;function cE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{d:"M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"}))}const uE=m.forwardRef(cE),ed=uE;function dE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{d:"M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z"}),m.createElement("path",{fillRule:"evenodd",d:"M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z",clipRule:"evenodd"}))}const IE=m.forwardRef(dE),CE=IE;function mE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"}))}const hE=m.forwardRef(mE),fE=hE;function AE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const pE=m.forwardRef(AE),bE=pE;function yE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z",clipRule:"evenodd"}))}const vE=m.forwardRef(yE),nu=vE;function ZE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const GE=m.forwardRef(ZE),TV=GE;function BE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 9.375v-4.5ZM4.875 4.5a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 0 1-1.875-1.875v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75A.75.75 0 0 1 6 7.5v-.75Zm9.75 0A.75.75 0 0 1 16.5 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 19.125v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875-.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM6 16.5a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm9.75 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm-3 3a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Z",clipRule:"evenodd"}))}const SE=m.forwardRef(BE),VE=SE;function RE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 0 1 .75.75c0 5.056-2.383 9.555-6.084 12.436A6.75 6.75 0 0 1 9.75 22.5a.75.75 0 0 1-.75-.75v-4.131A15.838 15.838 0 0 1 6.382 15H2.25a.75.75 0 0 1-.75-.75 6.75 6.75 0 0 1 7.815-6.666ZM15 6.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"}),m.createElement("path",{d:"M5.26 17.242a.75.75 0 1 0-.897-1.203 5.243 5.243 0 0 0-2.05 5.022.75.75 0 0 0 .625.627 5.243 5.243 0 0 0 5.022-2.051.75.75 0 1 0-1.202-.897 3.744 3.744 0 0 1-3.008 1.51c0-1.23.592-2.323 1.51-3.008Z"}))}const WE=m.forwardRef(RE),wE=WE;function kE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}const xE=m.forwardRef(kE),jV=xE;function XE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const JE=m.forwardRef(XE),sy=JE;function NE({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const YE=m.forwardRef(NE),zV=YE,ay={Lunes:!1,LunesSt:"08:00",LunesEnd:"17:00",Martes:!1,MartesSt:"08:00",MartesEnd:"17:00",Mircoles:!1,MircolesSt:"08:00",MircolesEnd:"17:00",Jueves:!1,JuevesSt:"08:00",JuevesEnd:"17:00",Viernes:!1,ViernesSt:"08:00",ViernesEnd:"17:00",Sbado:!1,SbadoSt:"08:00",SbadoEnd:"17:00",Domingo:!1,DomingoSt:"08:00",DomingoEnd:"17:00"},Fs=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"],HE={6:"PLAN BSICO",7:"PLAN PLUS",8:"PLAN EMPRENDEDOR",9:"PLAN BUSINESS",10:"PLAN MULTIEMPRESAS",23:"PLAN PREMIUM"};function FE({searchActive:e}){const t=cn(),[n,o]=m.useState({}),{email:r,title_profile:i,username:l}=n,[s,a]=m.useState("");return m.useEffect(()=>{(async()=>{try{const u=await t.getProfile();o(u.data),a(u.data.profile_img_url)}catch(u){console.error("Error fetching profile:",u)}})()},[]),g.jsxs("div",{className:"relative z-0 isolate ",children:[g.jsx("div",{className:"absolute inset-x-0 top-[calc(100%-13rem)] transform-gpu overflow-hidden blur-3xl sm:top-[calc(30%-30rem)]","aria-hidden":"true",children:g.jsx("div",{className:"relative left-[calc(50%+3rem)] aspect-[1155/678] w-[1.125rem] -translate-x-1/2 bg-gradient-to-tr from-[#fde68a] to-[#9a3412] opacity-20 sm:left-[calc(40%+5rem)] sm:w-[70.1875rem]",style:{clipPath:"polygon(90.76% 75.84%, 100% 66%, 85.5% 36.72%, 85.5% 0%, 75.14% 15.81%, 38.66% 15.81%, 65.1% 45.92%, 61.5% 85.83%, 20% 27.29%, 0% 35.42%, 29.3% 73.96%, 0% 89%, 20% 100%, 32.79% 91.48%, 76.1% 102%, 78% 48%)"}})}),g.jsx("div",{className:"flex justify-center items-center",children:g.jsxs("div",{className:"max-w-md w-full backdrop-blur-sm overflow-hidden shadow-lg pb-4",children:[g.jsxs("div",{className:"px-6 py-4",children:[g.jsx("div",{className:"flex justify-center",children:g.jsx(Ji,{name:l,size:"40",src:s})}),g.jsxs("div",{className:"text-center m-2",children:[g.jsxs("h3",{className:"text-sm font-semibold",children:["Hola, ",i,"!"]}),g.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10 m-1",children:HE[localStorage.getItem("id_plan")]})]})]}),g.jsx("div",{className:"px-2 flex justify-center",children:g.jsxs(ai,{type:"button",to:"/share/",className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:[g.jsx(VE,{className:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),"Compartir QR"]})})]})})]})}const Rt=()=>{const e=ut();m.useContext(kt);const t=()=>{localStorage.removeItem("token"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),localStorage.removeItem("id_plan"),localStorage.removeItem("is_superuser"),e("/login")},n=()=>{e("/upgrade")};return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"sidebar",children:[g.jsx(FE,{searchActive:!0}),g.jsx("div",{className:"flex flex-col w-96 cursor-pointer",children:g.jsxs(ua.Provider,{value:{color:"#FFF"},children:[localStorage.getItem("is_superuser")=="true"&&g.jsxs("div",{className:"flex justify-start text-white p-2 hover:bg-orange-500 space-x-4 items-center hover:rounded-md",onClick:()=>e("/admin"),children:[g.jsx(MV,{}),g.jsx(qm,{children:"Administrador"})]}),LF.map(o=>o.option==="Business"&&localStorage.getItem("id_plan")!=="9"?null:g.jsxs("div",{className:"flex justify-start text-white p-2 hover:bg-orange-500 space-x-4 items-center hover:rounded-md",onClick:o.option==="Cerrar Sesin"?t:()=>{e(o.url)},children:[o.icon,g.jsx(qm,{children:o.option})]},o.option))]})}),g.jsx("div",{className:"flex justify-center items-center w-96 pt-10",children:localStorage.getItem("id_plan")=="9"?g.jsx("button",{type:"button",className:"btn bg-gradient-to-r from-pink-500 to-yellow-500 hover:text-slate-100 text-slate-200 subpixel-antialiased",children:"YA ERES BUSINESS"}):g.jsx("button",{onClick:n,type:"button",className:"btn bg-gradient-to-r from-green-400 to-blue-500 hover:from-pink-500 hover:to-yellow-500 text-slate-100 hover:text-slate-200 subpixel-antialiased",children:"UPGRADE"})})]})})};function EE(e){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"},child:[]}]})(e)}const DV=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#eeeeee","#795548","#607d8b"],KE=({setShowCustomButton:e,setCustomButtonParams:t,customButtonParams:n})=>{const[o,r]=m.useState(n.color),{formState:i,onInputChange:l,onResetForm:s,onCheckBoxChange:a}=Lr({...n}),c=()=>{t({...i,color:o}),e(!1)};return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"profile-custom-button",children:[g.jsx("div",{className:"profile-x",onClick:()=>{e(!1)},children:g.jsx(RA,{size:24})}),g.jsx("h5",{children:"Personaliza tu enlace y color del botn:"}),g.jsxs("div",{className:"profile-site",children:[g.jsx(hA,{size:24,color:"#858585"}),g.jsx("input",{type:"url",className:"profile-site-input",placeholder:i.url,value:i.url,name:"url",onChange:l})]}),g.jsxs("div",{className:"profile-site",children:[g.jsx(EE,{size:24,color:"#858585"}),g.jsx("input",{type:"text",className:"profile-site-input",placeholder:i.text,value:i.text,name:"text",onChange:l})]}),g.jsx("h6",{children:"Elige un color:"}),g.jsx("div",{className:"paleta-color",children:g.jsx(Fe,{children:DV.map(u=>g.jsx(Ce,{xs:4,md:2,className:"color-option",children:g.jsx("div",{style:{backgroundColor:u,borderColor:o==u?"black":"gray"},onClick:()=>{r(u)}})},u))})}),g.jsx("div",{className:"profile-boton",children:g.jsx(mt,{variant:"outline-primary",children:"Ej. CONCENOS"})}),g.jsx("div",{className:"profile-guardar",children:g.jsx(mt,{variant:"primary",size:"lg",onClick:c,children:"Guardar"})}),g.jsx("style",{children:`
          .profile-boton button{
            border-color: ${o};
            color: ${o};
          }
          .profile-boton button:hover, .profile-boton button:active{
            background-color: ${o}!important;
            border-color: ${o}!important;
          }
          `})]})})};function LE({setShowCustomButtonHour:e,setSchedule:t,schedule:n}){const{formState:o,onInputChange:r,onCheckBoxChange:i}=Lr(n),[l,s]=m.useState("LunesViernes"),a=()=>{const u={...o};l=="LunesViernes"?Fs.forEach(d=>{d=="Sbado"||d=="Domingo"?u[d]=!1:u[d]=!0}):l=="FinesSemana"&&Fs.forEach(d=>{d!="Sbado"&&d!="Domingo"?u[d]=!1:u[d]=!0}),e(!1),t(u)},c=()=>l==="LunesViernes"||l==="FinesSemana"?g.jsxs(g.Fragment,{children:[g.jsx("label",{children:"Desde:"}),g.jsx("input",{value:o.LunesSt,name:"LunesSt",onChange:r,type:"time",className:"select-hour-input text-black day-container-hour"}),g.jsx("label",{children:"Hasta:"}),g.jsx("input",{value:o.LunesEnd,name:"LunesEnd",onChange:r,type:"time",className:"select-hour-input text-black day-container-hour"})]}):l==="Personalizado"?Fs.map(u=>g.jsxs("div",{className:"day-container-hour",children:[g.jsx("label",{children:u}),g.jsxs(Fe,{className:"custom-hour-grid",children:[g.jsx(Ce,{children:g.jsx("input",{name:`${u}St`,value:o[`${u}St`],onChange:r,type:"time",className:"input-hour-custom text-black select-hour-input"})}),g.jsx(Ce,{children:g.jsx("input",{name:`${u}End`,value:o[`${u}End`],onChange:r,type:"time",className:"input-hour-custom text-black select-hour-input"})}),g.jsx("input",{name:u,checked:o[u],onChange:i,type:"checkbox",id:`${u}-disponible`})]})]},u)):null;return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"profile-custom-button",children:[g.jsx("div",{className:"profile-x",onClick:()=>{e(!1)},children:g.jsx(RA,{size:24})}),g.jsx("h5",{children:"Horarios de atencin:"}),g.jsx("p",{children:"En qu horarios te pueden encontrar tus clientes"}),g.jsxs("div",{className:"hour-select-container",children:[g.jsx("label",{children:"Selecciona un horario:"}),g.jsxs("select",{value:l,onChange:u=>s(u.target.value),className:"select-hour-input text-black",children:[g.jsx("option",{value:"LunesViernes",children:"Lunes a Viernes"}),g.jsx("option",{value:"FinesSemana",children:"Fines de Semana"}),g.jsx("option",{value:"Personalizado",children:"Personalizado"})]})]}),g.jsx("div",{className:"custom-inputs-container",children:c()}),g.jsx("div",{className:"schedule-guardar",children:g.jsx(mt,{variant:"primary",size:"lg",onClick:a,children:"Guardar"})})]})})}const ME=()=>(m.useState([{coordenadas:[21.88695915277653,-102.29242038583625],popUp:"Zaragoza"},{coordenadas:[21.924763219343827,-102.30465885000585],popUp:"Colosio"},{coordenadas:[21.89441976335907,-102.29520312269968],popUp:"Av. Independencia"},{coordenadas:[21.867415207362505,-102.30284329073551],popUp:"Av Amricas"},{coordenadas:[21.922800254618185,-102.29173215978628],popUp:"Blvd Zacatecas"}]),g.jsx(g.Fragment,{children:g.jsx("div",{className:"profile-map-modal",children:g.jsx("h1",{children:"EN DESARROLLO..."})})}));const TE=({setShowColorPallete:e,setCustomBannerColor:t,customBannerColor:n})=>{const[o,r]=m.useState(n),i=()=>{e(!1)},l=()=>{t(o),e(!1)};return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"color-pallete",children:[g.jsx("div",{className:"profile-x",onClick:l,children:g.jsx(RA,{size:24})}),g.jsx("div",{className:"paleta-color",children:g.jsx(Fe,{children:DV.map(s=>g.jsx(Ce,{xs:4,md:2,className:"color-option",children:g.jsx("div",{style:{backgroundColor:s,borderColor:n==s?"black":"gray"},onClick:()=>{t(s)}})},s))})}),g.jsx("div",{className:"pallete-guardar",children:g.jsx(mt,{variant:"primary",size:"lg",onClick:i,children:"Guardar"})})]})})};const jE=({handleClick:e,placeText:t})=>{const{formState:n,onInputChange:o}=Lr({url:""});return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"input-modal",children:[g.jsx("div",{children:g.jsx("input",{type:"text",placeholder:t,onChange:o,name:"url"})}),g.jsx("div",{children:g.jsx(mt,{variant:"primary",onClick:()=>{e(n)},children:"Guardar"})})]})})};const xl="/assets/portada-img-default-5dd45fd5.png";function zE(e){return ye({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm297.1 84L257.3 234.6 379.4 396H283.8L209 298.1 123.3 396H75.8l111-126.9L69.7 116h98l67.7 89.5L313.6 116h47.5zM323.3 367.6L153.4 142.9H125.1L296.9 367.6h26.3z"},child:[]}]})(e)}function DE(e){return ye({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(e)}function wA({open:e,onClose:t,children:n,title:o}){return e?g.jsx("div",{id:"default-modal",tabIndex:"-1","aria-hidden":"true",className:"fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-full bg-gray-800 bg-opacity-50",children:g.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",children:g.jsxs("div",{className:"relative bg-white rounded-lg shadow ",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t ",children:[g.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:o}),g.jsxs("button",{onClick:t,type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center ",children:[g.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:g.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),g.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),g.jsx("div",{className:"p-4 md:p-5 space-y-4",children:n})]})})}):null}function UE({show:e,setShow:t,activeRed:n,setActiveRed:o}){const r="https://api.knowmeapp.com",i=localStorage.getItem("token"),[l,s]=m.useState(""),[a,c]=m.useState(""),{user:u}=m.useContext(kt),d=[{name:"Facebook",icon:g.jsx(dA,{})},{name:"Twitter",icon:g.jsx(zE,{})},{name:"TikTok",icon:g.jsx(CA,{})},{name:"Youtube",icon:g.jsx(eV,{})},{name:"Telegram",icon:g.jsx($S,{})},{name:"Instagram",icon:g.jsx(OS,{})},{name:"Google",icon:g.jsx(QS,{})},{name:"Spotify",icon:g.jsx(qS,{})},{name:"Pinterest",icon:g.jsx(_S,{})},{name:"LinkedIn",icon:g.jsx(IA,{})},{name:"Custom",icon:g.jsx(hA,{})}],I=async f=>await Ie.post(`${r}/api/social_media_v2`,f,{headers:{"x-token":i}}),C=async()=>{let f={name:l,url:a,id:u.id};const A=xe.loading("Guardando red social");try{await I(f),o([...n,f]),xe.success(`Red social para ${l} guardado exitosamente`,{id:A}),t(!1)}catch(v){console.error("Failed to update social media:",v),xe.error("Error al agregar red social",{id:A})}};return g.jsxs(g.Fragment,{children:[g.jsx(Rn,{position:"top-right",richColors:!0}),g.jsxs(wA,{title:"Aadir Redes Sociales",open:e,onClose:()=>t(!1),children:[g.jsx("div",{children:l.length===0?g.jsx("div",{className:"grid grid-cols-5 gap-2",children:d.map((f,A)=>g.jsx("button",{onClick:()=>s(f.name),className:"rounded-md border border-slate-300 h-24 w-24 flex items-center justify-center p-2.5 text-center text-sm transition-all shadow-sm hover:shadow-lg text-slate-600 hover:text-white hover:bg-slate-800 hover:border-slate-800 focus:text-white focus:bg-slate-800 focus:border-slate-800 active:border-slate-800 active:text-white active:bg-slate-800",type:"button",children:g.jsx("div",{className:"flex justify-center",children:P.cloneElement(f.icon,{color:"orange",size:32})})},A))}):g.jsxs("div",{children:[l==="Custom"?g.jsx(g.Fragment,{children:g.jsx("h2",{className:"addSocial text-black",children:"Aade tu URL personalizada"})}):g.jsx(g.Fragment,{children:g.jsxs("h2",{className:"addSocial text-black",children:["Aade tu usuario de ",l]})}),g.jsx("div",{className:"flex",children:l==="Telegram"?g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"number",disabled:!0,placeholder:"+52",className:"mt-3 mr-1 social-input-add p-2 border rounded-md w-1/3"}),g.jsx("input",{type:"number",className:"mt-3 social-input-add p-2 border rounded-md w-full",value:a,placeholder:"331234912",onChange:f=>c(f.target.value)})]}):g.jsx(g.Fragment,{children:l==="Custom"?g.jsx(g.Fragment,{children:g.jsx("input",{type:"text",className:"mt-3 social-input-add p-2 border rounded-md w-full",value:a,placeholder:"www.URL.com",onChange:f=>c(f.target.value)})}):g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"text",disabled:!0,placeholder:`wwww.${l}.com/`,className:"mt-3 mr-1 social-input-add p-2 border rounded-md w-1/3"}),g.jsx("input",{type:"text",className:"mt-3 social-input-add p-2 border rounded-md w-2/3",value:a,placeholder:"usuario",onChange:f=>c(f.target.value)})]})})})]})}),g.jsx("div",{children:l.length!==0?g.jsxs(g.Fragment,{children:[g.jsx(mt,{variant:"secondary ",onClick:()=>s(""),children:"Ir atras"}),g.jsx(mt,{variant:"danger mx-1",onClick:()=>t(!1),children:"Cerrar"}),g.jsx(mt,{variant:"primary",onClick:C,children:"Guardar"})]}):g.jsx(mt,{variant:"secondary",onClick:()=>t(!1),children:"Cerrar"})})]})]})}const PE=({name:e,show:t,setShow:n})=>{const o="https://api.knowmeapp.com",r=localStorage.getItem("token"),[i,l]=m.useState(""),{user:s}=m.useContext(kt),a=async u=>await Ie.put(`${o}/api/social_media_v2/${s.id}/${e}`,u,{headers:{"x-token":r}}),c=async()=>{const u={name:e,url:i,id:s.id},d=xe.loading("Guardando red social");try{await a(u),xe.success(`Red social para ${e} guardado exitosamente`,{id:d}),n(!1)}catch(I){console.error("Failed to update social media:",I),xe.error("Error al agregar red social",{id:d})}};return g.jsxs(g.Fragment,{children:[g.jsx(Rn,{position:"top-right",richColors:!0}),g.jsxs(ci,{show:t,centered:!0,onHide:()=>n(!1),children:[g.jsx(ci.Header,{closeButton:!0,children:g.jsxs(ci.Title,{children:["Actualizar ",e]})}),g.jsx(ci.Body,{children:g.jsxs("div",{children:[g.jsxs("h2",{className:"addSocial text-black",children:["Aade tu usuario de ",e]}),g.jsx("input",{type:"text",className:"mt-3 w-full p-2 border rounded-md social-input-add",value:i,onChange:u=>l(u.target.value)})]})}),g.jsx(ci.Footer,{children:g.jsxs(g.Fragment,{children:[g.jsx(mt,{variant:"danger",onClick:()=>n(!1),children:"Cerrar"}),g.jsx(mt,{variant:"primary",onClick:c,children:"Guardar"})]})})]})]})};var fh=function(e,t){return fh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},fh(e,t)};function QE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");fh(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Tt=function(){return Tt=Object.assign||function(t){for(var n,o=1,r=arguments.length;o<r;o++){n=arguments[o];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Tt.apply(this,arguments)};var gy=!1,ui,Ah,ph,ac,gc,UV,cc,bh,yh,vh,PV,Zh,Gh,QV,OV;function tn(){if(!gy){gy=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Zh=/\b(iPhone|iP[ao]d)/.exec(e),Gh=/\b(iP[ao]d)/.exec(e),vh=/Android/i.exec(e),QV=/FBAN\/\w+;/i.exec(e),OV=/Mobile/i.exec(e),PV=!!/Win64/.exec(e),t){ui=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,ui&&document&&document.documentMode&&(ui=document.documentMode);var o=/(?:Trident\/(\d+.\d+))/.exec(e);UV=o?parseFloat(o[1])+4:ui,Ah=t[2]?parseFloat(t[2]):NaN,ph=t[3]?parseFloat(t[3]):NaN,ac=t[4]?parseFloat(t[4]):NaN,ac?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),gc=t&&t[1]?parseFloat(t[1]):NaN):gc=NaN}else ui=Ah=ph=gc=ac=NaN;if(n){if(n[1]){var r=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);cc=r?parseFloat(r[1].replace("_",".")):!0}else cc=!1;bh=!!n[2],yh=!!n[3]}else cc=bh=yh=!1}}var Bh={ie:function(){return tn()||ui},ieCompatibilityMode:function(){return tn()||UV>ui},ie64:function(){return Bh.ie()&&PV},firefox:function(){return tn()||Ah},opera:function(){return tn()||ph},webkit:function(){return tn()||ac},safari:function(){return Bh.webkit()},chrome:function(){return tn()||gc},windows:function(){return tn()||bh},osx:function(){return tn()||cc},linux:function(){return tn()||yh},iphone:function(){return tn()||Zh},mobile:function(){return tn()||Zh||Gh||vh||OV},nativeApp:function(){return tn()||QV},android:function(){return tn()||vh},ipad:function(){return tn()||Gh}},OE=Bh,yg=!!(typeof window<"u"&&window.document&&window.document.createElement),_E={canUseDOM:yg,canUseWorkers:typeof Worker<"u",canUseEventListeners:yg&&!!(window.addEventListener||window.attachEvent),canUseViewport:yg&&!!window.screen,isInWorker:!yg},qE=_E,_V=qE,qV;_V.canUseDOM&&(qV=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function $E(e,t){if(!_V.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var r=document.createElement("div");r.setAttribute(n,"return;"),o=typeof r[n]=="function"}return!o&&qV&&e==="wheel"&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}var eK=$E,tK=OE,nK=eK,cy=10,uy=40,dy=800;function $V(e){var t=0,n=0,o=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),o=t*cy,r=n*cy,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||r)&&e.deltaMode&&(e.deltaMode==1?(o*=uy,r*=uy):(o*=dy,r*=dy)),o&&!t&&(t=o<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:o,pixelY:r}}$V.getEventType=function(){return tK.firefox()?"DOMMouseScroll":nK("wheel")?"wheel":"mousewheel"};var oK=$V,rK=oK;const iK=ro(rK);function lK(e,t,n,o,r,i){i===void 0&&(i=0);var l=Xl(e,t,i),s=l.width,a=l.height,c=Math.min(s,n),u=Math.min(a,o);return c>u*r?{width:u*r,height:u}:{width:c,height:c/r}}function sK(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function vg(e,t,n,o,r){r===void 0&&(r=0);var i=Xl(t.width,t.height,r),l=i.width,s=i.height;return{x:Iy(e.x,l,n.width,o),y:Iy(e.y,s,n.height,o)}}function Iy(e,t,n,o){var r=t*o/2-n/2;return td(e,-r,r)}function Cy(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function my(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function aK(e,t,n,o,r,i,l){i===void 0&&(i=0),l===void 0&&(l=!0);var s=l?gK:cK,a=Xl(t.width,t.height,i),c=Xl(t.naturalWidth,t.naturalHeight,i),u={x:s(100,((a.width-n.width/r)/2-e.x/r)/a.width*100),y:s(100,((a.height-n.height/r)/2-e.y/r)/a.height*100),width:s(100,n.width/a.width*100/r),height:s(100,n.height/a.height*100/r)},d=Math.round(s(c.width,u.width*c.width/100)),I=Math.round(s(c.height,u.height*c.height/100)),C=c.width>=c.height*o,f=C?{width:Math.round(I*o),height:I}:{width:d,height:Math.round(d/o)},A=Tt(Tt({},f),{x:Math.round(s(c.width-f.width,u.x*c.width/100)),y:Math.round(s(c.height-f.height,u.y*c.height/100))});return{croppedAreaPercentages:u,croppedAreaPixels:A}}function gK(e,t){return Math.min(e,Math.max(0,t))}function cK(e,t){return t}function uK(e,t,n,o,r,i){var l=Xl(t.width,t.height,n),s=td(o.width/l.width*(100/e.width),r,i),a={x:s*l.width/2-o.width/2-l.width*s*(e.x/100),y:s*l.height/2-o.height/2-l.height*s*(e.y/100)};return{crop:a,zoom:s}}function dK(e,t,n){var o=sK(t);return n.height>n.width?n.height/(e.height*o):n.width/(e.width*o)}function IK(e,t,n,o,r,i){n===void 0&&(n=0);var l=Xl(t.naturalWidth,t.naturalHeight,n),s=td(dK(e,t,o),r,i),a=o.height>o.width?o.height/e.height:o.width/e.width,c={x:((l.width-e.width)/2-e.x)*a,y:((l.height-e.height)/2-e.y)*a};return{crop:c,zoom:s}}function hy(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function CK(e){return e*Math.PI/180}function Xl(e,t,n){var o=CK(n);return{width:Math.abs(Math.cos(o)*e)+Math.abs(Math.sin(o)*t),height:Math.abs(Math.sin(o)*e)+Math.abs(Math.cos(o)*t)}}function td(e,t,n){return Math.min(Math.max(e,t),n)}function Zg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var mK=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,hK=1,fK=3,AK=function(e){QE(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.imageRef=m.createRef(),n.videoRef=m.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var o=!0;n.resizeObserver=new window.ResizeObserver(function(r){if(o){o=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(o){return o.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturemove",n.onGestureMove),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var o=n.computeSizes();o&&(n.emitCropData(),n.setInitialCrop(o)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(o){if(n.props.initialCroppedAreaPercentages){var r=uK(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,o,n.props.minZoom,n.props.maxZoom),i=r.crop,l=r.zoom;n.props.onCropChange(i),n.props.onZoomChange&&n.props.onZoomChange(l)}else if(n.props.initialCroppedAreaPixels){var s=IK(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,o,n.props.minZoom,n.props.maxZoom),i=s.crop,l=s.zoom;n.props.onCropChange(i),n.props.onZoomChange&&n.props.onZoomChange(l)}},n.computeSizes=function(){var o,r,i,l,s,a,c=n.imageRef.current||n.videoRef.current;if(c&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var u=n.containerRect.width/n.containerRect.height,d=((o=n.imageRef.current)===null||o===void 0?void 0:o.naturalWidth)||((r=n.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,I=((i=n.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((l=n.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,C=c.offsetWidth<d||c.offsetHeight<I,f=d/I,A=void 0;if(C)switch(n.state.mediaObjectFit){default:case"contain":A=u>f?{width:n.containerRect.height*f,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/f};break;case"horizontal-cover":A={width:n.containerRect.width,height:n.containerRect.width/f};break;case"vertical-cover":A={width:n.containerRect.height*f,height:n.containerRect.height};break}else A={width:c.offsetWidth,height:c.offsetHeight};n.mediaSize=Tt(Tt({},A),{naturalWidth:d,naturalHeight:I}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var v=n.props.cropSize?n.props.cropSize:lK(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((s=n.state.cropSize)===null||s===void 0?void 0:s.height)!==v.height||((a=n.state.cropSize)===null||a===void 0?void 0:a.width)!==v.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(v),n.setState({cropSize:v},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(v),v}},n.saveContainerPosition=function(){if(n.containerRef){var o=n.containerRef.getBoundingClientRect();n.containerPosition={x:o.left,y:o.top}}},n.onMouseDown=function(o){n.currentDoc&&(o.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(t.getMousePoint(o)))},n.onMouseMove=function(o){return n.onDrag(t.getMousePoint(o))},n.onScroll=function(o){n.currentDoc&&(o.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(o){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(o))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),o.touches.length===2?n.onPinchStart(o):o.touches.length===1&&n.onDragStart(t.getTouchPoint(o.touches[0]))))},n.onTouchMove=function(o){o.preventDefault(),o.touches.length===2?n.onPinchMove(o):o.touches.length===1&&n.onDrag(t.getTouchPoint(o.touches[0]))},n.onGestureStart=function(o){n.currentDoc&&(o.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureMove),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureMove=function(o){if(o.preventDefault(),!n.isTouching){var r=t.getMousePoint(o),i=n.gestureZoomStart-1+o.scale;if(n.setNewZoom(i,r,{shouldUpdatePosition:!0}),n.props.onRotationChange){var l=n.gestureRotationStart+o.rotation;n.props.onRotationChange(l)}}},n.onGestureEnd=function(o){n.cleanEvents()},n.onDragStart=function(o){var r,i,l=o.x,s=o.y;n.dragStartPosition={x:l,y:s},n.dragStartCrop=Tt({},n.props.crop),(i=(r=n.props).onInteractionStart)===null||i===void 0||i.call(r)},n.onDrag=function(o){var r=o.x,i=o.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(r===void 0||i===void 0)){var l=r-n.dragStartPosition.x,s=i-n.dragStartPosition.y,a={x:n.dragStartCrop.x+l,y:n.dragStartCrop.y+s},c=n.props.restrictPosition?vg(a,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):a;n.props.onCropChange(c)}}))},n.onDragStopped=function(){var o,r;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(r=(o=n.props).onInteractionEnd)===null||r===void 0||r.call(o)},n.onWheel=function(o){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(o))){o.preventDefault();var r=t.getMousePoint(o),i=iK(o).pixelY,l=n.props.zoom-i*n.props.zoomSpeed/200;n.setNewZoom(l,r,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var s,a;return(a=(s=n.props).onInteractionStart)===null||a===void 0?void 0:a.call(s)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var s,a;return(a=(s=n.props).onInteractionEnd)===null||a===void 0?void 0:a.call(s)})},250)}},n.getPointOnContainer=function(o,r){var i=o.x,l=o.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(i-r.x),y:n.containerRect.height/2-(l-r.y)}},n.getPointOnMedia=function(o){var r=o.x,i=o.y,l=n.props,s=l.crop,a=l.zoom;return{x:(r+s.x)/a,y:(i+s.y)/a}},n.setNewZoom=function(o,r,i){var l=i===void 0?{}:i,s=l.shouldUpdatePosition,a=s===void 0?!0:s;if(!(!n.state.cropSize||!n.props.onZoomChange)){var c=td(o,n.props.minZoom,n.props.maxZoom);if(a){var u=n.getPointOnContainer(r,n.containerPosition),d=n.getPointOnMedia(u),I={x:d.x*c-u.x,y:d.y*c-u.y},C=n.props.restrictPosition?vg(I,n.mediaSize,n.state.cropSize,c,n.props.rotation):I;n.props.onCropChange(C)}n.props.onZoomChange(c)}},n.getCropData=function(){if(!n.state.cropSize)return null;var o=n.props.restrictPosition?vg(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return aK(o,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var o=n.getCropData();if(o){var r=o.croppedAreaPercentages,i=o.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(r,i),n.props.onCropAreaChange&&n.props.onCropAreaChange(r,i)}},n.emitCropAreaChange=function(){var o=n.getCropData();if(o){var r=o.croppedAreaPercentages,i=o.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(r,i)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var o=n.props.restrictPosition?vg(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;n.props.onCropChange(o),n.emitCropData()}},n}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=mK,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},t.prototype.componentWillUnmount=function(){var n,o;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((o=this.styleRef.parentNode)===null||o===void 0||o.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(n){var o,r,i,l,s,a,c,u,d;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((o=n.cropSize)===null||o===void 0?void 0:o.height)!==((r=this.props.cropSize)===null||r===void 0?void 0:r.height)||((i=n.cropSize)===null||i===void 0?void 0:i.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((s=n.crop)===null||s===void 0?void 0:s.x)!==((a=this.props.crop)===null||a===void 0?void 0:a.x)||((c=n.crop)===null||c===void 0?void 0:c.y)!==((u=this.props.crop)===null||u===void 0?void 0:u.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((d=this.videoRef.current)===null||d===void 0||d.load());var I=this.getObjectFit();I!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:I},this.computeSizes)},t.prototype.getAspect=function(){var n=this.props,o=n.cropSize,r=n.aspect;return o?o.width/o.height:r},t.prototype.getObjectFit=function(){var n,o,r,i;if(this.props.objectFit==="cover"){var l=this.imageRef.current||this.videoRef.current;if(l&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var s=this.containerRect.width/this.containerRect.height,a=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoWidth)||0,c=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,u=a/c;return u<s?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(n){var o=t.getTouchPoint(n.touches[0]),r=t.getTouchPoint(n.touches[1]);this.lastPinchDistance=Cy(o,r),this.lastPinchRotation=my(o,r),this.onDragStart(hy(o,r))},t.prototype.onPinchMove=function(n){var o=this;if(!(!this.currentDoc||!this.currentWindow)){var r=t.getTouchPoint(n.touches[0]),i=t.getTouchPoint(n.touches[1]),l=hy(r,i);this.onDrag(l),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var s=Cy(r,i),a=o.props.zoom*(s/o.lastPinchDistance);o.setNewZoom(a,l,{shouldUpdatePosition:!1}),o.lastPinchDistance=s;var c=my(r,i),u=o.props.rotation+(c-o.lastPinchRotation);o.props.onRotationChange&&o.props.onRotationChange(u),o.lastPinchRotation=c})}},t.prototype.render=function(){var n=this,o,r=this.props,i=r.image,l=r.video,s=r.mediaProps,a=r.transform,c=r.crop,u=c.x,d=c.y,I=r.rotation,C=r.zoom,f=r.cropShape,A=r.showGrid,v=r.style,h=v.containerStyle,p=v.cropAreaStyle,b=v.mediaStyle,y=r.classes,Z=y.containerClassName,G=y.cropAreaClassName,V=y.mediaClassName,S=(o=this.state.mediaObjectFit)!==null&&o!==void 0?o:this.getObjectFit();return m.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(B){return n.containerRef=B},"data-testid":"container",style:h,className:Zg("reactEasyCrop_Container",Z)},i?m.createElement("img",Tt({alt:"",className:Zg("reactEasyCrop_Image",S==="contain"&&"reactEasyCrop_Contain",S==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",S==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",V)},s,{src:i,ref:this.imageRef,style:Tt(Tt({},b),{transform:a||"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(I,"deg) scale(").concat(C,")")}),onLoad:this.onMediaLoad})):l&&m.createElement("video",Tt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Zg("reactEasyCrop_Video",S==="contain"&&"reactEasyCrop_Contain",S==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",S==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",V)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Tt(Tt({},b),{transform:a||"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(I,"deg) scale(").concat(C,")")}),controls:!1}),(Array.isArray(l)?l:[{src:l}]).map(function(k){return m.createElement("source",Tt({key:k.src},k))})),this.state.cropSize&&m.createElement("div",{style:Tt(Tt({},p),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:Zg("reactEasyCrop_CropArea",f==="round"&&"reactEasyCrop_CropAreaRound",A&&"reactEasyCrop_CropAreaGrid",G)}))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:fK,minZoom:hK,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},t.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},t.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},t}(m.Component);function pK({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M18 10a.75.75 0 0 1-.75.75H4.66l2.1 1.95a.75.75 0 1 1-1.02 1.1l-3.5-3.25a.75.75 0 0 1 0-1.1l3.5-3.25a.75.75 0 1 1 1.02 1.1l-2.1 1.95h12.59A.75.75 0 0 1 18 10Z",clipRule:"evenodd"}))}const bK=m.forwardRef(pK),yK=bK;function vK({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z",clipRule:"evenodd"}))}const ZK=m.forwardRef(vK),GK=ZK;function BK({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z",clipRule:"evenodd"}))}const SK=m.forwardRef(BK),VK=SK;function RK({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M15.621 4.379a3 3 0 0 0-4.242 0l-7 7a3 3 0 0 0 4.241 4.243h.001l.497-.5a.75.75 0 0 1 1.064 1.057l-.498.501-.002.002a4.5 4.5 0 0 1-6.364-6.364l7-7a4.5 4.5 0 0 1 6.368 6.36l-3.455 3.553A2.625 2.625 0 1 1 9.52 9.52l3.45-3.451a.75.75 0 1 1 1.061 1.06l-3.45 3.451a1.125 1.125 0 0 0 1.587 1.595l3.454-3.553a3 3 0 0 0 0-4.242Z",clipRule:"evenodd"}))}const WK=m.forwardRef(RK),fy=WK,wK=({cropDone:e,image:t,setImage:n,setShowCrop:o,inputRef:r})=>{const i=window.innerWidth,[l,s]=m.useState({x:0,y:0}),[a,c]=m.useState(1),[u,d]=m.useState(null),[I,C]=m.useState(""),f=(b,y)=>{d(y)},A=()=>{r.current.value="",n(""),o(!1)},v=b=>{const y=document.createElement("canvas");y.width=b.width,y.height=b.height;const Z=y.getContext("2d");let G=new Image;G.src=t,G.onload=function(){Z.drawImage(G,b.x,b.y,b.width,b.height,0,0,b.width,b.height);const V=y.toDataURL("image/jpeg");C(V),e(V),n(""),o(!1)}},h={marginTop:"6rem",width:"80vw",height:"70vh",marginLeft:"10vw",backgroundColor:"#fff"},p={margin:"8rem 0 0 0",width:"100vw",height:"65vh",backgroundColor:"#fff"};return g.jsx(g.Fragment,{children:g.jsx("div",{children:g.jsxs("div",{className:"bg-slate-800 h-screen w-full fixed translate-x-2/4 right-2/4 top-0 z-40",children:[g.jsx("div",{className:"rounded-md bg-blue-50 p-4 absolute translate-x-2/4 right-2/4 top-4 w-96 md:w-full lg:w-8/12",children:g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx(VK,{"aria-hidden":"true",className:"h-5 w-5 text-blue-400"})}),g.jsx("div",{className:"ml-3 flex-1 md:flex md:justify-between",children:g.jsx("p",{className:"text-sm text-blue-700",children:"Usa el scroll para ajustar el zoom  y recortar la imagen de perfil correctamente."})})]})}),g.jsx(AK,{image:t,crop:l,zoom:a,aspect:3/3,onCropChange:s,onCropComplete:f,onZoomChange:c,style:{containerStyle:i>600?h:p}}),g.jsx("div",{className:"btn-container absolute bottom-12 translate-x-2/4 right-2/4 w-full pb-12 z-50",children:g.jsxs("div",{className:"w-fit m-auto",children:[g.jsx("button",{className:"rounded bg-white/10 px-4 py-2.5 font-semibold text-white shadow-sm hover:bg-red-600/40 mr-4",onClick:A,children:"Cancelar"}),g.jsx("button",{className:"rounded bg-white/10 px-4 py-2.5 font-semibold text-white shadow-sm hover:bg-white/20",onClick:()=>{v(u)},children:"Guardar"})]})})]})})})};function kK(){this.__data__=[],this.size=0}var xK=kK;function XK(e,t){return e===t||e!==e&&t!==t}var eR=XK,JK=eR;function NK(e,t){for(var n=e.length;n--;)if(JK(e[n][0],t))return n;return-1}var nd=NK,YK=nd,HK=Array.prototype,FK=HK.splice;function EK(e){var t=this.__data__,n=YK(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():FK.call(t,n,1),--this.size,!0}var KK=EK,LK=nd;function MK(e){var t=this.__data__,n=LK(t,e);return n<0?void 0:t[n][1]}var TK=MK,jK=nd;function zK(e){return jK(this.__data__,e)>-1}var DK=zK,UK=nd;function PK(e,t){var n=this.__data__,o=UK(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}var QK=PK,OK=xK,_K=KK,qK=TK,$K=DK,eL=QK;function Dl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Dl.prototype.clear=OK;Dl.prototype.delete=_K;Dl.prototype.get=qK;Dl.prototype.has=$K;Dl.prototype.set=eL;var od=Dl,tL=od;function nL(){this.__data__=new tL,this.size=0}var oL=nL;function rL(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var iL=rL;function lL(e){return this.__data__.get(e)}var sL=lL;function aL(e){return this.__data__.has(e)}var gL=aL,cL=typeof lt=="object"&&lt&&lt.Object===Object&&lt,tR=cL,uL=tR,dL=typeof self=="object"&&self&&self.Object===Object&&self,IL=uL||dL||Function("return this")(),Qo=IL,CL=Qo,mL=CL.Symbol,kA=mL,Ay=kA,nR=Object.prototype,hL=nR.hasOwnProperty,fL=nR.toString,Cs=Ay?Ay.toStringTag:void 0;function AL(e){var t=hL.call(e,Cs),n=e[Cs];try{e[Cs]=void 0;var o=!0}catch{}var r=fL.call(e);return o&&(t?e[Cs]=n:delete e[Cs]),r}var pL=AL,bL=Object.prototype,yL=bL.toString;function vL(e){return yL.call(e)}var ZL=vL,py=kA,GL=pL,BL=ZL,SL="[object Null]",VL="[object Undefined]",by=py?py.toStringTag:void 0;function RL(e){return e==null?e===void 0?VL:SL:by&&by in Object(e)?GL(e):BL(e)}var rd=RL;function WL(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var oR=WL,wL=rd,kL=oR,xL="[object AsyncFunction]",XL="[object Function]",JL="[object GeneratorFunction]",NL="[object Proxy]";function YL(e){if(!kL(e))return!1;var t=wL(e);return t==XL||t==JL||t==xL||t==NL}var rR=YL,HL=Qo,FL=HL["__core-js_shared__"],EL=FL,UI=EL,yy=function(){var e=/[^.]+$/.exec(UI&&UI.keys&&UI.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function KL(e){return!!yy&&yy in e}var LL=KL,ML=Function.prototype,TL=ML.toString;function jL(e){if(e!=null){try{return TL.call(e)}catch{}try{return e+""}catch{}}return""}var iR=jL,zL=rR,DL=LL,UL=oR,PL=iR,QL=/[\\^$.*+?()[\]{}|]/g,OL=/^\[object .+?Constructor\]$/,_L=Function.prototype,qL=Object.prototype,$L=_L.toString,eM=qL.hasOwnProperty,tM=RegExp("^"+$L.call(eM).replace(QL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nM(e){if(!UL(e)||DL(e))return!1;var t=zL(e)?tM:OL;return t.test(PL(e))}var oM=nM;function rM(e,t){return e==null?void 0:e[t]}var iM=rM,lM=oM,sM=iM;function aM(e,t){var n=sM(e,t);return lM(n)?n:void 0}var Ul=aM,gM=Ul,cM=Qo,uM=gM(cM,"Map"),xA=uM,dM=Ul,IM=dM(Object,"create"),id=IM,vy=id;function CM(){this.__data__=vy?vy(null):{},this.size=0}var mM=CM;function hM(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var fM=hM,AM=id,pM="__lodash_hash_undefined__",bM=Object.prototype,yM=bM.hasOwnProperty;function vM(e){var t=this.__data__;if(AM){var n=t[e];return n===pM?void 0:n}return yM.call(t,e)?t[e]:void 0}var ZM=vM,GM=id,BM=Object.prototype,SM=BM.hasOwnProperty;function VM(e){var t=this.__data__;return GM?t[e]!==void 0:SM.call(t,e)}var RM=VM,WM=id,wM="__lodash_hash_undefined__";function kM(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=WM&&t===void 0?wM:t,this}var xM=kM,XM=mM,JM=fM,NM=ZM,YM=RM,HM=xM;function Pl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Pl.prototype.clear=XM;Pl.prototype.delete=JM;Pl.prototype.get=NM;Pl.prototype.has=YM;Pl.prototype.set=HM;var FM=Pl,Zy=FM,EM=od,KM=xA;function LM(){this.size=0,this.__data__={hash:new Zy,map:new(KM||EM),string:new Zy}}var MM=LM;function TM(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var jM=TM,zM=jM;function DM(e,t){var n=e.__data__;return zM(t)?n[typeof t=="string"?"string":"hash"]:n.map}var ld=DM,UM=ld;function PM(e){var t=UM(this,e).delete(e);return this.size-=t?1:0,t}var QM=PM,OM=ld;function _M(e){return OM(this,e).get(e)}var qM=_M,$M=ld;function eT(e){return $M(this,e).has(e)}var tT=eT,nT=ld;function oT(e,t){var n=nT(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}var rT=oT,iT=MM,lT=QM,sT=qM,aT=tT,gT=rT;function Ql(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Ql.prototype.clear=iT;Ql.prototype.delete=lT;Ql.prototype.get=sT;Ql.prototype.has=aT;Ql.prototype.set=gT;var lR=Ql,cT=od,uT=xA,dT=lR,IT=200;function CT(e,t){var n=this.__data__;if(n instanceof cT){var o=n.__data__;if(!uT||o.length<IT-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new dT(o)}return n.set(e,t),this.size=n.size,this}var mT=CT,hT=od,fT=oL,AT=iL,pT=sL,bT=gL,yT=mT;function Ol(e){var t=this.__data__=new hT(e);this.size=t.size}Ol.prototype.clear=fT;Ol.prototype.delete=AT;Ol.prototype.get=pT;Ol.prototype.has=bT;Ol.prototype.set=yT;var vT=Ol,ZT="__lodash_hash_undefined__";function GT(e){return this.__data__.set(e,ZT),this}var BT=GT;function ST(e){return this.__data__.has(e)}var VT=ST,RT=lR,WT=BT,wT=VT;function ou(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new RT;++t<n;)this.add(e[t])}ou.prototype.add=ou.prototype.push=WT;ou.prototype.has=wT;var kT=ou;function xT(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}var XT=xT;function JT(e,t){return e.has(t)}var NT=JT,YT=kT,HT=XT,FT=NT,ET=1,KT=2;function LT(e,t,n,o,r,i){var l=n&ET,s=e.length,a=t.length;if(s!=a&&!(l&&a>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,I=!0,C=n&KT?new YT:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var f=e[d],A=t[d];if(o)var v=l?o(A,f,d,t,e,i):o(f,A,d,e,t,i);if(v!==void 0){if(v)continue;I=!1;break}if(C){if(!HT(t,function(h,p){if(!FT(C,p)&&(f===h||r(f,h,n,o,i)))return C.push(p)})){I=!1;break}}else if(!(f===A||r(f,A,n,o,i))){I=!1;break}}return i.delete(e),i.delete(t),I}var sR=LT,MT=Qo,TT=MT.Uint8Array,jT=TT;function zT(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n}var DT=zT;function UT(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n}var PT=UT,Gy=kA,By=jT,QT=eR,OT=sR,_T=DT,qT=PT,$T=1,e4=2,t4="[object Boolean]",n4="[object Date]",o4="[object Error]",r4="[object Map]",i4="[object Number]",l4="[object RegExp]",s4="[object Set]",a4="[object String]",g4="[object Symbol]",c4="[object ArrayBuffer]",u4="[object DataView]",Sy=Gy?Gy.prototype:void 0,PI=Sy?Sy.valueOf:void 0;function d4(e,t,n,o,r,i,l){switch(n){case u4:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case c4:return!(e.byteLength!=t.byteLength||!i(new By(e),new By(t)));case t4:case n4:case i4:return QT(+e,+t);case o4:return e.name==t.name&&e.message==t.message;case l4:case a4:return e==t+"";case r4:var s=_T;case s4:var a=o&$T;if(s||(s=qT),e.size!=t.size&&!a)return!1;var c=l.get(e);if(c)return c==t;o|=e4,l.set(e,t);var u=OT(s(e),s(t),o,r,i,l);return l.delete(e),u;case g4:if(PI)return PI.call(e)==PI.call(t)}return!1}var I4=d4;function C4(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}var m4=C4,h4=Array.isArray,XA=h4,f4=m4,A4=XA;function p4(e,t,n){var o=t(e);return A4(e)?o:f4(o,n(e))}var b4=p4;function y4(e,t){for(var n=-1,o=e==null?0:e.length,r=0,i=[];++n<o;){var l=e[n];t(l,n,e)&&(i[r++]=l)}return i}var v4=y4;function Z4(){return[]}var G4=Z4,B4=v4,S4=G4,V4=Object.prototype,R4=V4.propertyIsEnumerable,Vy=Object.getOwnPropertySymbols,W4=Vy?function(e){return e==null?[]:(e=Object(e),B4(Vy(e),function(t){return R4.call(e,t)}))}:S4,w4=W4;function k4(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}var x4=k4;function X4(e){return e!=null&&typeof e=="object"}var sd=X4,J4=rd,N4=sd,Y4="[object Arguments]";function H4(e){return N4(e)&&J4(e)==Y4}var F4=H4,Ry=F4,E4=sd,aR=Object.prototype,K4=aR.hasOwnProperty,L4=aR.propertyIsEnumerable,M4=Ry(function(){return arguments}())?Ry:function(e){return E4(e)&&K4.call(e,"callee")&&!L4.call(e,"callee")},T4=M4,ru={exports:{}};function j4(){return!1}var z4=j4;ru.exports;(function(e,t){var n=Qo,o=z4,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===r,s=l?n.Buffer:void 0,a=s?s.isBuffer:void 0,c=a||o;e.exports=c})(ru,ru.exports);var gR=ru.exports,D4=9007199254740991,U4=/^(?:0|[1-9]\d*)$/;function P4(e,t){var n=typeof e;return t=t??D4,!!t&&(n=="number"||n!="symbol"&&U4.test(e))&&e>-1&&e%1==0&&e<t}var Q4=P4,O4=9007199254740991;function _4(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=O4}var cR=_4,q4=rd,$4=cR,ej=sd,tj="[object Arguments]",nj="[object Array]",oj="[object Boolean]",rj="[object Date]",ij="[object Error]",lj="[object Function]",sj="[object Map]",aj="[object Number]",gj="[object Object]",cj="[object RegExp]",uj="[object Set]",dj="[object String]",Ij="[object WeakMap]",Cj="[object ArrayBuffer]",mj="[object DataView]",hj="[object Float32Array]",fj="[object Float64Array]",Aj="[object Int8Array]",pj="[object Int16Array]",bj="[object Int32Array]",yj="[object Uint8Array]",vj="[object Uint8ClampedArray]",Zj="[object Uint16Array]",Gj="[object Uint32Array]",qe={};qe[hj]=qe[fj]=qe[Aj]=qe[pj]=qe[bj]=qe[yj]=qe[vj]=qe[Zj]=qe[Gj]=!0;qe[tj]=qe[nj]=qe[Cj]=qe[oj]=qe[mj]=qe[rj]=qe[ij]=qe[lj]=qe[sj]=qe[aj]=qe[gj]=qe[cj]=qe[uj]=qe[dj]=qe[Ij]=!1;function Bj(e){return ej(e)&&$4(e.length)&&!!qe[q4(e)]}var Sj=Bj;function Vj(e){return function(t){return e(t)}}var Rj=Vj,iu={exports:{}};iu.exports;(function(e,t){var n=tR,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,i=r&&r.exports===o,l=i&&n.process,s=function(){try{var a=r&&r.require&&r.require("util").types;return a||l&&l.binding&&l.binding("util")}catch{}}();e.exports=s})(iu,iu.exports);var Wj=iu.exports,wj=Sj,kj=Rj,Wy=Wj,wy=Wy&&Wy.isTypedArray,xj=wy?kj(wy):wj,uR=xj,Xj=x4,Jj=T4,Nj=XA,Yj=gR,Hj=Q4,Fj=uR,Ej=Object.prototype,Kj=Ej.hasOwnProperty;function Lj(e,t){var n=Nj(e),o=!n&&Jj(e),r=!n&&!o&&Yj(e),i=!n&&!o&&!r&&Fj(e),l=n||o||r||i,s=l?Xj(e.length,String):[],a=s.length;for(var c in e)(t||Kj.call(e,c))&&!(l&&(c=="length"||r&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Hj(c,a)))&&s.push(c);return s}var Mj=Lj,Tj=Object.prototype;function jj(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Tj;return e===n}var zj=jj;function Dj(e,t){return function(n){return e(t(n))}}var Uj=Dj,Pj=Uj,Qj=Pj(Object.keys,Object),Oj=Qj,_j=zj,qj=Oj,$j=Object.prototype,ez=$j.hasOwnProperty;function tz(e){if(!_j(e))return qj(e);var t=[];for(var n in Object(e))ez.call(e,n)&&n!="constructor"&&t.push(n);return t}var nz=tz,oz=rR,rz=cR;function iz(e){return e!=null&&rz(e.length)&&!oz(e)}var lz=iz,sz=Mj,az=nz,gz=lz;function cz(e){return gz(e)?sz(e):az(e)}var uz=cz,dz=b4,Iz=w4,Cz=uz;function mz(e){return dz(e,Cz,Iz)}var hz=mz,ky=hz,fz=1,Az=Object.prototype,pz=Az.hasOwnProperty;function bz(e,t,n,o,r,i){var l=n&fz,s=ky(e),a=s.length,c=ky(t),u=c.length;if(a!=u&&!l)return!1;for(var d=a;d--;){var I=s[d];if(!(l?I in t:pz.call(t,I)))return!1}var C=i.get(e),f=i.get(t);if(C&&f)return C==t&&f==e;var A=!0;i.set(e,t),i.set(t,e);for(var v=l;++d<a;){I=s[d];var h=e[I],p=t[I];if(o)var b=l?o(p,h,I,t,e,i):o(h,p,I,e,t,i);if(!(b===void 0?h===p||r(h,p,n,o,i):b)){A=!1;break}v||(v=I=="constructor")}if(A&&!v){var y=e.constructor,Z=t.constructor;y!=Z&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof Z=="function"&&Z instanceof Z)&&(A=!1)}return i.delete(e),i.delete(t),A}var yz=bz,vz=Ul,Zz=Qo,Gz=vz(Zz,"DataView"),Bz=Gz,Sz=Ul,Vz=Qo,Rz=Sz(Vz,"Promise"),Wz=Rz,wz=Ul,kz=Qo,xz=wz(kz,"Set"),Xz=xz,Jz=Ul,Nz=Qo,Yz=Jz(Nz,"WeakMap"),Hz=Yz,Sh=Bz,Vh=xA,Rh=Wz,Wh=Xz,wh=Hz,dR=rd,_l=iR,xy="[object Map]",Fz="[object Object]",Xy="[object Promise]",Jy="[object Set]",Ny="[object WeakMap]",Yy="[object DataView]",Ez=_l(Sh),Kz=_l(Vh),Lz=_l(Rh),Mz=_l(Wh),Tz=_l(wh),ri=dR;(Sh&&ri(new Sh(new ArrayBuffer(1)))!=Yy||Vh&&ri(new Vh)!=xy||Rh&&ri(Rh.resolve())!=Xy||Wh&&ri(new Wh)!=Jy||wh&&ri(new wh)!=Ny)&&(ri=function(e){var t=dR(e),n=t==Fz?e.constructor:void 0,o=n?_l(n):"";if(o)switch(o){case Ez:return Yy;case Kz:return xy;case Lz:return Xy;case Mz:return Jy;case Tz:return Ny}return t});var jz=ri,QI=vT,zz=sR,Dz=I4,Uz=yz,Hy=jz,Fy=XA,Ey=gR,Pz=uR,Qz=1,Ky="[object Arguments]",Ly="[object Array]",Gg="[object Object]",Oz=Object.prototype,My=Oz.hasOwnProperty;function _z(e,t,n,o,r,i){var l=Fy(e),s=Fy(t),a=l?Ly:Hy(e),c=s?Ly:Hy(t);a=a==Ky?Gg:a,c=c==Ky?Gg:c;var u=a==Gg,d=c==Gg,I=a==c;if(I&&Ey(e)){if(!Ey(t))return!1;l=!0,u=!1}if(I&&!u)return i||(i=new QI),l||Pz(e)?zz(e,t,n,o,r,i):Dz(e,t,a,n,o,r,i);if(!(n&Qz)){var C=u&&My.call(e,"__wrapped__"),f=d&&My.call(t,"__wrapped__");if(C||f){var A=C?e.value():e,v=f?t.value():t;return i||(i=new QI),r(A,v,n,o,i)}}return I?(i||(i=new QI),Uz(e,t,n,o,r,i)):!1}var qz=_z,$z=qz,Ty=sd;function IR(e,t,n,o,r){return e===t?!0:e==null||t==null||!Ty(e)&&!Ty(t)?e!==e&&t!==t:$z(e,t,n,o,IR,r)}var eD=IR,tD=eD;function nD(e,t){return tD(e,t)}var oD=nD,CR={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(o,r){e.exports=r()})(typeof self<"u"?self:lt,function(){return function(n){var o={};function r(i){if(o[i])return o[i].exports;var l=o[i]={i,l:!1,exports:{}};return n[i].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=n,r.c=o,r.d=function(i,l,s){r.o(i,l)||Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:s})},r.n=function(i){var l=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(l,"a",l),l},r.o=function(i,l){return Object.prototype.hasOwnProperty.call(i,l)},r.p="",r(r.s=109)}([function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(17),l=r(18),s=r(19),a=r(45),c=r(46),u=r(47),d=r(48),I=r(49),C=r(12),f=r(32),A=r(33),v=r(31),h=r(1),p={Scope:h.Scope,create:h.create,find:h.find,query:h.query,register:h.register,Container:i.default,Format:l.default,Leaf:s.default,Embed:d.default,Scroll:a.default,Block:u.default,Inline:c.default,Text:I.default,Attributor:{Attribute:C.default,Class:f.default,Style:A.default,Store:v.default}};o.default=p},function(n,o,r){var i=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var b in p)p.hasOwnProperty(b)&&(h[b]=p[b])};return function(h,p){v(h,p);function b(){this.constructor=h}h.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=function(v){i(h,v);function h(p){var b=this;return p="[Parchment] "+p,b=v.call(this,p)||this,b.message=p,b.name=b.constructor.name,b}return h}(Error);o.ParchmentError=l;var s={},a={},c={},u={};o.DATA_KEY="__blot";var d;(function(v){v[v.TYPE=3]="TYPE",v[v.LEVEL=12]="LEVEL",v[v.ATTRIBUTE=13]="ATTRIBUTE",v[v.BLOT=14]="BLOT",v[v.INLINE=7]="INLINE",v[v.BLOCK=11]="BLOCK",v[v.BLOCK_BLOT=10]="BLOCK_BLOT",v[v.INLINE_BLOT=6]="INLINE_BLOT",v[v.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",v[v.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",v[v.ANY=15]="ANY"})(d=o.Scope||(o.Scope={}));function I(v,h){var p=f(v);if(p==null)throw new l("Unable to create "+v+" blot");var b=p,y=v instanceof Node||v.nodeType===Node.TEXT_NODE?v:b.create(h);return new b(y,h)}o.create=I;function C(v,h){return h===void 0&&(h=!1),v==null?null:v[o.DATA_KEY]!=null?v[o.DATA_KEY].blot:h?C(v.parentNode,h):null}o.find=C;function f(v,h){h===void 0&&(h=d.ANY);var p;if(typeof v=="string")p=u[v]||s[v];else if(v instanceof Text||v.nodeType===Node.TEXT_NODE)p=u.text;else if(typeof v=="number")v&d.LEVEL&d.BLOCK?p=u.block:v&d.LEVEL&d.INLINE&&(p=u.inline);else if(v instanceof HTMLElement){var b=(v.getAttribute("class")||"").split(/\s+/);for(var y in b)if(p=a[b[y]],p)break;p=p||c[v.tagName]}return p==null?null:h&d.LEVEL&p.scope&&h&d.TYPE&p.scope?p:null}o.query=f;function A(){for(var v=[],h=0;h<arguments.length;h++)v[h]=arguments[h];if(v.length>1)return v.map(function(y){return A(y)});var p=v[0];if(typeof p.blotName!="string"&&typeof p.attrName!="string")throw new l("Invalid definition");if(p.blotName==="abstract")throw new l("Cannot register abstract class");if(u[p.blotName||p.attrName]=p,typeof p.keyName=="string")s[p.keyName]=p;else if(p.className!=null&&(a[p.className]=p),p.tagName!=null){Array.isArray(p.tagName)?p.tagName=p.tagName.map(function(y){return y.toUpperCase()}):p.tagName=p.tagName.toUpperCase();var b=Array.isArray(p.tagName)?p.tagName:[p.tagName];b.forEach(function(y){(c[y]==null||p.className==null)&&(c[y]=p)})}return p}o.register=A},function(n,o,r){var i=r(51),l=r(11),s=r(3),a=r(20),c=String.fromCharCode(0),u=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};u.prototype.insert=function(d,I){var C={};return d.length===0?this:(C.insert=d,I!=null&&typeof I=="object"&&Object.keys(I).length>0&&(C.attributes=I),this.push(C))},u.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},u.prototype.retain=function(d,I){if(d<=0)return this;var C={retain:d};return I!=null&&typeof I=="object"&&Object.keys(I).length>0&&(C.attributes=I),this.push(C)},u.prototype.push=function(d){var I=this.ops.length,C=this.ops[I-1];if(d=s(!0,{},d),typeof C=="object"){if(typeof d.delete=="number"&&typeof C.delete=="number")return this.ops[I-1]={delete:C.delete+d.delete},this;if(typeof C.delete=="number"&&d.insert!=null&&(I-=1,C=this.ops[I-1],typeof C!="object"))return this.ops.unshift(d),this;if(l(d.attributes,C.attributes)){if(typeof d.insert=="string"&&typeof C.insert=="string")return this.ops[I-1]={insert:C.insert+d.insert},typeof d.attributes=="object"&&(this.ops[I-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof C.retain=="number")return this.ops[I-1]={retain:C.retain+d.retain},typeof d.attributes=="object"&&(this.ops[I-1].attributes=d.attributes),this}}return I===this.ops.length?this.ops.push(d):this.ops.splice(I,0,d),this},u.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},u.prototype.filter=function(d){return this.ops.filter(d)},u.prototype.forEach=function(d){this.ops.forEach(d)},u.prototype.map=function(d){return this.ops.map(d)},u.prototype.partition=function(d){var I=[],C=[];return this.forEach(function(f){var A=d(f)?I:C;A.push(f)}),[I,C]},u.prototype.reduce=function(d,I){return this.ops.reduce(d,I)},u.prototype.changeLength=function(){return this.reduce(function(d,I){return I.insert?d+a.length(I):I.delete?d-I.delete:d},0)},u.prototype.length=function(){return this.reduce(function(d,I){return d+a.length(I)},0)},u.prototype.slice=function(d,I){d=d||0,typeof I!="number"&&(I=1/0);for(var C=[],f=a.iterator(this.ops),A=0;A<I&&f.hasNext();){var v;A<d?v=f.next(d-A):(v=f.next(I-A),C.push(v)),A+=a.length(v)}return new u(C)},u.prototype.compose=function(d){var I=a.iterator(this.ops),C=a.iterator(d.ops),f=[],A=C.peek();if(A!=null&&typeof A.retain=="number"&&A.attributes==null){for(var v=A.retain;I.peekType()==="insert"&&I.peekLength()<=v;)v-=I.peekLength(),f.push(I.next());A.retain-v>0&&C.next(A.retain-v)}for(var h=new u(f);I.hasNext()||C.hasNext();)if(C.peekType()==="insert")h.push(C.next());else if(I.peekType()==="delete")h.push(I.next());else{var p=Math.min(I.peekLength(),C.peekLength()),b=I.next(p),y=C.next(p);if(typeof y.retain=="number"){var Z={};typeof b.retain=="number"?Z.retain=p:Z.insert=b.insert;var G=a.attributes.compose(b.attributes,y.attributes,typeof b.retain=="number");if(G&&(Z.attributes=G),h.push(Z),!C.hasNext()&&l(h.ops[h.ops.length-1],Z)){var V=new u(I.rest());return h.concat(V).chop()}}else typeof y.delete=="number"&&typeof b.retain=="number"&&h.push(y)}return h.chop()},u.prototype.concat=function(d){var I=new u(this.ops.slice());return d.ops.length>0&&(I.push(d.ops[0]),I.ops=I.ops.concat(d.ops.slice(1))),I},u.prototype.diff=function(d,I){if(this.ops===d.ops)return new u;var C=[this,d].map(function(p){return p.map(function(b){if(b.insert!=null)return typeof b.insert=="string"?b.insert:c;var y=p===d?"on":"with";throw new Error("diff() called "+y+" non-document")}).join("")}),f=new u,A=i(C[0],C[1],I),v=a.iterator(this.ops),h=a.iterator(d.ops);return A.forEach(function(p){for(var b=p[1].length;b>0;){var y=0;switch(p[0]){case i.INSERT:y=Math.min(h.peekLength(),b),f.push(h.next(y));break;case i.DELETE:y=Math.min(b,v.peekLength()),v.next(y),f.delete(y);break;case i.EQUAL:y=Math.min(v.peekLength(),h.peekLength(),b);var Z=v.next(y),G=h.next(y);l(Z.insert,G.insert)?f.retain(y,a.attributes.diff(Z.attributes,G.attributes)):f.push(G).delete(y);break}b-=y}}),f.chop()},u.prototype.eachLine=function(d,I){I=I||`
`;for(var C=a.iterator(this.ops),f=new u,A=0;C.hasNext();){if(C.peekType()!=="insert")return;var v=C.peek(),h=a.length(v)-C.peekLength(),p=typeof v.insert=="string"?v.insert.indexOf(I,h)-h:-1;if(p<0)f.push(C.next());else if(p>0)f.push(C.next(p));else{if(d(f,C.next(1).attributes||{},A)===!1)return;A+=1,f=new u}}f.length()>0&&d(f,{},A)},u.prototype.transform=function(d,I){if(I=!!I,typeof d=="number")return this.transformPosition(d,I);for(var C=a.iterator(this.ops),f=a.iterator(d.ops),A=new u;C.hasNext()||f.hasNext();)if(C.peekType()==="insert"&&(I||f.peekType()!=="insert"))A.retain(a.length(C.next()));else if(f.peekType()==="insert")A.push(f.next());else{var v=Math.min(C.peekLength(),f.peekLength()),h=C.next(v),p=f.next(v);if(h.delete)continue;p.delete?A.push(p):A.retain(v,a.attributes.transform(h.attributes,p.attributes,I))}return A.chop()},u.prototype.transformPosition=function(d,I){I=!!I;for(var C=a.iterator(this.ops),f=0;C.hasNext()&&f<=d;){var A=C.peekLength(),v=C.peekType();if(C.next(),v==="delete"){d-=Math.min(A,d-f);continue}else v==="insert"&&(f<d||!I)&&(d+=A);f+=A}return d},n.exports=u},function(n,o){var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,l=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(C){return typeof Array.isArray=="function"?Array.isArray(C):i.call(C)==="[object Array]"},c=function(C){if(!C||i.call(C)!=="[object Object]")return!1;var f=r.call(C,"constructor"),A=C.constructor&&C.constructor.prototype&&r.call(C.constructor.prototype,"isPrototypeOf");if(C.constructor&&!f&&!A)return!1;var v;for(v in C);return typeof v>"u"||r.call(C,v)},u=function(C,f){l&&f.name==="__proto__"?l(C,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):C[f.name]=f.newValue},d=function(C,f){if(f==="__proto__")if(r.call(C,f)){if(s)return s(C,f).value}else return;return C[f]};n.exports=function I(){var C,f,A,v,h,p,b=arguments[0],y=1,Z=arguments.length,G=!1;for(typeof b=="boolean"&&(G=b,b=arguments[1]||{},y=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});y<Z;++y)if(C=arguments[y],C!=null)for(f in C)A=d(b,f),v=d(C,f),b!==v&&(G&&v&&(c(v)||(h=a(v)))?(h?(h=!1,p=A&&a(A)?A:[]):p=A&&c(A)?A:{},u(b,{name:f,newValue:I(G,p,v)})):typeof v<"u"&&u(b,{name:f,newValue:v}));return b}},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.BlockEmbed=o.bubbleFormats=void 0;var i=function(){function R(W,w){for(var X=0;X<w.length;X++){var E=w[X];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(W,E.key,E)}}return function(W,w,X){return w&&R(W.prototype,w),X&&R(W,X),W}}(),l=function R(W,w,X){W===null&&(W=Function.prototype);var E=Object.getOwnPropertyDescriptor(W,w);if(E===void 0){var M=Object.getPrototypeOf(W);return M===null?void 0:R(M,w,X)}else{if("value"in E)return E.value;var L=E.get;return L===void 0?void 0:L.call(X)}},s=r(3),a=b(s),c=r(2),u=b(c),d=r(0),I=b(d),C=r(16),f=b(C),A=r(6),v=b(A),h=r(7),p=b(h);function b(R){return R&&R.__esModule?R:{default:R}}function y(R,W){if(!(R instanceof W))throw new TypeError("Cannot call a class as a function")}function Z(R,W){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:R}function G(R,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);R.prototype=Object.create(W&&W.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(R,W):R.__proto__=W)}var V=1,S=function(R){G(W,R);function W(){return y(this,W),Z(this,(W.__proto__||Object.getPrototypeOf(W)).apply(this,arguments))}return i(W,[{key:"attach",value:function(){l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"attach",this).call(this),this.attributes=new I.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new u.default().insert(this.value(),(0,a.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(X,E){var M=I.default.query(X,I.default.Scope.BLOCK_ATTRIBUTE);M!=null&&this.attributes.attribute(M,E)}},{key:"formatAt",value:function(X,E,M,L){this.format(M,L)}},{key:"insertAt",value:function(X,E,M){if(typeof E=="string"&&E.endsWith(`
`)){var L=I.default.create(k.blotName);this.parent.insertBefore(L,X===0?this:this.next),L.insertAt(0,E.slice(0,-1))}else l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,X,E,M)}}]),W}(I.default.Embed);S.scope=I.default.Scope.BLOCK_BLOT;var k=function(R){G(W,R);function W(w){y(this,W);var X=Z(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,w));return X.cache={},X}return i(W,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(I.default.Leaf).reduce(function(X,E){return E.length()===0?X:X.insert(E.value(),B(E))},new u.default).insert(`
`,B(this))),this.cache.delta}},{key:"deleteAt",value:function(X,E){l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"deleteAt",this).call(this,X,E),this.cache={}}},{key:"formatAt",value:function(X,E,M,L){E<=0||(I.default.query(M,I.default.Scope.BLOCK)?X+E===this.length()&&this.format(M,L):l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"formatAt",this).call(this,X,Math.min(E,this.length()-X-1),M,L),this.cache={})}},{key:"insertAt",value:function(X,E,M){if(M!=null)return l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,X,E,M);if(E.length!==0){var L=E.split(`
`),F=L.shift();F.length>0&&(X<this.length()-1||this.children.tail==null?l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,Math.min(X,this.length()-1),F):this.children.tail.insertAt(this.children.tail.length(),F),this.cache={});var Y=this;L.reduce(function(N,x){return Y=Y.split(N,!0),Y.insertAt(0,x),x.length},X+F.length)}}},{key:"insertBefore",value:function(X,E){var M=this.children.head;l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertBefore",this).call(this,X,E),M instanceof f.default&&M.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"length",this).call(this)+V),this.cache.length}},{key:"moveChildren",value:function(X,E){l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"moveChildren",this).call(this,X,E),this.cache={}}},{key:"optimize",value:function(X){l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"optimize",this).call(this,X),this.cache={}}},{key:"path",value:function(X){return l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"path",this).call(this,X,!0)}},{key:"removeChild",value:function(X){l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"removeChild",this).call(this,X),this.cache={}}},{key:"split",value:function(X){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E&&(X===0||X>=this.length()-V)){var M=this.clone();return X===0?(this.parent.insertBefore(M,this),this):(this.parent.insertBefore(M,this.next),M)}else{var L=l(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"split",this).call(this,X,E);return this.cache={},L}}}]),W}(I.default.Block);k.blotName="block",k.tagName="P",k.defaultChild="break",k.allowedChildren=[v.default,I.default.Embed,p.default];function B(R){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R==null||(typeof R.formats=="function"&&(W=(0,a.default)(W,R.formats())),R.parent==null||R.parent.blotName=="scroll"||R.parent.statics.scope!==R.statics.scope)?W:B(R.parent,W)}o.bubbleFormats=B,o.BlockEmbed=S,o.default=k},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.overload=o.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},l=function(){function Y(N,x){var H=[],K=!0,T=!1,j=void 0;try{for(var J=N[Symbol.iterator](),z;!(K=(z=J.next()).done)&&(H.push(z.value),!(x&&H.length===x));K=!0);}catch(U){T=!0,j=U}finally{try{!K&&J.return&&J.return()}finally{if(T)throw j}}return H}return function(N,x){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return Y(N,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function Y(N,x){for(var H=0;H<x.length;H++){var K=x[H];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(N,K.key,K)}}return function(N,x,H){return x&&Y(N.prototype,x),H&&Y(N,H),N}}();r(50);var a=r(2),c=B(a),u=r(14),d=B(u),I=r(8),C=B(I),f=r(9),A=B(f),v=r(0),h=B(v),p=r(15),b=B(p),y=r(3),Z=B(y),G=r(10),V=B(G),S=r(34),k=B(S);function B(Y){return Y&&Y.__esModule?Y:{default:Y}}function R(Y,N,x){return N in Y?Object.defineProperty(Y,N,{value:x,enumerable:!0,configurable:!0,writable:!0}):Y[N]=x,Y}function W(Y,N){if(!(Y instanceof N))throw new TypeError("Cannot call a class as a function")}var w=(0,V.default)("quill"),X=function(){s(Y,null,[{key:"debug",value:function(x){x===!0&&(x="log"),V.default.level(x)}},{key:"find",value:function(x){return x.__quill||h.default.find(x)}},{key:"import",value:function(x){return this.imports[x]==null&&w.error("Cannot import "+x+". Are you sure it was registered?"),this.imports[x]}},{key:"register",value:function(x,H){var K=this,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof x!="string"){var j=x.attrName||x.blotName;typeof j=="string"?this.register("formats/"+j,x,H):Object.keys(x).forEach(function(J){K.register(J,x[J],H)})}else this.imports[x]!=null&&!T&&w.warn("Overwriting "+x+" with",H),this.imports[x]=H,(x.startsWith("blots/")||x.startsWith("formats/"))&&H.blotName!=="abstract"?h.default.register(H):x.startsWith("modules")&&typeof H.register=="function"&&H.register()}}]);function Y(N){var x=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(W(this,Y),this.options=E(N,H),this.container=this.options.container,this.container==null)return w.error("Invalid Quill container",N);this.options.debug&&Y.debug(this.options.debug);var K=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new C.default,this.scroll=h.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(C.default.events.EDITOR_CHANGE,function(j){j===C.default.events.TEXT_CHANGE&&x.root.classList.toggle("ql-blank",x.editor.isBlank())}),this.emitter.on(C.default.events.SCROLL_UPDATE,function(j,J){var z=x.selection.lastRange,U=z&&z.length===0?z.index:void 0;M.call(x,function(){return x.editor.update(null,J,U)},j)});var T=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+K+"<p><br></p></div>");this.setContents(T),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return s(Y,[{key:"addContainer",value:function(x){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof x=="string"){var K=x;x=document.createElement("div"),x.classList.add(K)}return this.container.insertBefore(x,H),x}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(x,H,K){var T=this,j=L(x,H,K),J=l(j,4);return x=J[0],H=J[1],K=J[3],M.call(this,function(){return T.editor.deleteText(x,H)},K,x,-1*H)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(x),this.container.classList.toggle("ql-disabled",!x)}},{key:"focus",value:function(){var x=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=x,this.scrollIntoView()}},{key:"format",value:function(x,H){var K=this,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C.default.sources.API;return M.call(this,function(){var j=K.getSelection(!0),J=new c.default;if(j==null)return J;if(h.default.query(x,h.default.Scope.BLOCK))J=K.editor.formatLine(j.index,j.length,R({},x,H));else{if(j.length===0)return K.selection.format(x,H),J;J=K.editor.formatText(j.index,j.length,R({},x,H))}return K.setSelection(j,C.default.sources.SILENT),J},T)}},{key:"formatLine",value:function(x,H,K,T,j){var J=this,z=void 0,U=L(x,H,K,T,j),D=l(U,4);return x=D[0],H=D[1],z=D[2],j=D[3],M.call(this,function(){return J.editor.formatLine(x,H,z)},j,x,0)}},{key:"formatText",value:function(x,H,K,T,j){var J=this,z=void 0,U=L(x,H,K,T,j),D=l(U,4);return x=D[0],H=D[1],z=D[2],j=D[3],M.call(this,function(){return J.editor.formatText(x,H,z)},j,x,0)}},{key:"getBounds",value:function(x){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=void 0;typeof x=="number"?K=this.selection.getBounds(x,H):K=this.selection.getBounds(x.index,x.length);var T=this.container.getBoundingClientRect();return{bottom:K.bottom-T.top,height:K.height,left:K.left-T.left,right:K.right-T.left,top:K.top-T.top,width:K.width}}},{key:"getContents",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-x,K=L(x,H),T=l(K,2);return x=T[0],H=T[1],this.editor.getContents(x,H)}},{key:"getFormat",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof x=="number"?this.editor.getFormat(x,H):this.editor.getFormat(x.index,x.length)}},{key:"getIndex",value:function(x){return x.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(x){return this.scroll.leaf(x)}},{key:"getLine",value:function(x){return this.scroll.line(x)}},{key:"getLines",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof x!="number"?this.scroll.lines(x.index,x.length):this.scroll.lines(x,H)}},{key:"getModule",value:function(x){return this.theme.modules[x]}},{key:"getSelection",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return x&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-x,K=L(x,H),T=l(K,2);return x=T[0],H=T[1],this.editor.getText(x,H)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(x,H,K){var T=this,j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Y.sources.API;return M.call(this,function(){return T.editor.insertEmbed(x,H,K)},j,x)}},{key:"insertText",value:function(x,H,K,T,j){var J=this,z=void 0,U=L(x,0,K,T,j),D=l(U,4);return x=D[0],z=D[2],j=D[3],M.call(this,function(){return J.editor.insertText(x,H,z)},j,x,H.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(x,H,K){this.clipboard.dangerouslyPasteHTML(x,H,K)}},{key:"removeFormat",value:function(x,H,K){var T=this,j=L(x,H,K),J=l(j,4);return x=J[0],H=J[1],K=J[3],M.call(this,function(){return T.editor.removeFormat(x,H)},K,x)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(x){var H=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.default.sources.API;return M.call(this,function(){x=new c.default(x);var T=H.getLength(),j=H.editor.deleteText(0,T),J=H.editor.applyDelta(x),z=J.ops[J.ops.length-1];z!=null&&typeof z.insert=="string"&&z.insert[z.insert.length-1]===`
`&&(H.editor.deleteText(H.getLength()-1,1),J.delete(1));var U=j.compose(J);return U},K)}},{key:"setSelection",value:function(x,H,K){if(x==null)this.selection.setRange(null,H||Y.sources.API);else{var T=L(x,H,K),j=l(T,4);x=j[0],H=j[1],K=j[3],this.selection.setRange(new p.Range(x,H),K),K!==C.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(x){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.default.sources.API,K=new c.default().insert(x);return this.setContents(K,H)}},{key:"update",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C.default.sources.USER,H=this.scroll.update(x);return this.selection.update(x),H}},{key:"updateContents",value:function(x){var H=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.default.sources.API;return M.call(this,function(){return x=new c.default(x),H.editor.applyDelta(x,K)},K,!0)}}]),Y}();X.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},X.events=C.default.events,X.sources=C.default.sources,X.version="1.3.7",X.imports={delta:c.default,parchment:h.default,"core/module":A.default,"core/theme":k.default};function E(Y,N){if(N=(0,Z.default)(!0,{container:Y,modules:{clipboard:!0,keyboard:!0,history:!0}},N),!N.theme||N.theme===X.DEFAULTS.theme)N.theme=k.default;else if(N.theme=X.import("themes/"+N.theme),N.theme==null)throw new Error("Invalid theme "+N.theme+". Did you register it?");var x=(0,Z.default)(!0,{},N.theme.DEFAULTS);[x,N].forEach(function(T){T.modules=T.modules||{},Object.keys(T.modules).forEach(function(j){T.modules[j]===!0&&(T.modules[j]={})})});var H=Object.keys(x.modules).concat(Object.keys(N.modules)),K=H.reduce(function(T,j){var J=X.import("modules/"+j);return J==null?w.error("Cannot load "+j+" module. Are you sure you registered it?"):T[j]=J.DEFAULTS||{},T},{});return N.modules!=null&&N.modules.toolbar&&N.modules.toolbar.constructor!==Object&&(N.modules.toolbar={container:N.modules.toolbar}),N=(0,Z.default)(!0,{},X.DEFAULTS,{modules:K},x,N),["bounds","container","scrollingContainer"].forEach(function(T){typeof N[T]=="string"&&(N[T]=document.querySelector(N[T]))}),N.modules=Object.keys(N.modules).reduce(function(T,j){return N.modules[j]&&(T[j]=N.modules[j]),T},{}),N}function M(Y,N,x,H){if(this.options.strict&&!this.isEnabled()&&N===C.default.sources.USER)return new c.default;var K=x==null?null:this.getSelection(),T=this.editor.delta,j=Y();if(K!=null&&(x===!0&&(x=K.index),H==null?K=F(K,j,N):H!==0&&(K=F(K,x,H,N)),this.setSelection(K,C.default.sources.SILENT)),j.length()>0){var J,z=[C.default.events.TEXT_CHANGE,j,T,N];if((J=this.emitter).emit.apply(J,[C.default.events.EDITOR_CHANGE].concat(z)),N!==C.default.sources.SILENT){var U;(U=this.emitter).emit.apply(U,z)}}return j}function L(Y,N,x,H,K){var T={};return typeof Y.index=="number"&&typeof Y.length=="number"?typeof N!="number"?(K=H,H=x,x=N,N=Y.length,Y=Y.index):(N=Y.length,Y=Y.index):typeof N!="number"&&(K=H,H=x,x=N,N=0),(typeof x>"u"?"undefined":i(x))==="object"?(T=x,K=H):typeof x=="string"&&(H!=null?T[x]=H:K=x),K=K||C.default.sources.API,[Y,N,T,K]}function F(Y,N,x,H){if(Y==null)return null;var K=void 0,T=void 0;if(N instanceof c.default){var j=[Y.index,Y.index+Y.length].map(function(D){return N.transformPosition(D,H!==C.default.sources.USER)}),J=l(j,2);K=J[0],T=J[1]}else{var z=[Y.index,Y.index+Y.length].map(function(D){return D<N||D===N&&H===C.default.sources.USER?D:x>=0?D+x:Math.max(N,D+x)}),U=l(z,2);K=U[0],T=U[1]}return new p.Range(K,T-K)}o.expandConfig=E,o.overload=L,o.default=X},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function v(h,p){for(var b=0;b<p.length;b++){var y=p[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,p,b){return p&&v(h.prototype,p),b&&v(h,b),h}}(),l=function v(h,p,b){h===null&&(h=Function.prototype);var y=Object.getOwnPropertyDescriptor(h,p);if(y===void 0){var Z=Object.getPrototypeOf(h);return Z===null?void 0:v(Z,p,b)}else{if("value"in y)return y.value;var G=y.get;return G===void 0?void 0:G.call(b)}},s=r(7),a=d(s),c=r(0),u=d(c);function d(v){return v&&v.__esModule?v:{default:v}}function I(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function C(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function f(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var A=function(v){f(h,v);function h(){return I(this,h),C(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return i(h,[{key:"formatAt",value:function(b,y,Z,G){if(h.compare(this.statics.blotName,Z)<0&&u.default.query(Z,u.default.Scope.BLOT)){var V=this.isolate(b,y);G&&V.wrap(Z,G)}else l(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"formatAt",this).call(this,b,y,Z,G)}},{key:"optimize",value:function(b){if(l(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"optimize",this).call(this,b),this.parent instanceof h&&h.compare(this.statics.blotName,this.parent.statics.blotName)>0){var y=this.parent.isolate(this.offset(),this.length());this.moveChildren(y),y.wrap(this)}}}],[{key:"compare",value:function(b,y){var Z=h.order.indexOf(b),G=h.order.indexOf(y);return Z>=0||G>=0?Z-G:b===y?0:b<y?-1:1}}]),h}(u.default.Inline);A.allowedChildren=[A,u.default.Embed,a.default],A.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],o.default=A},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(0),l=s(i);function s(I){return I&&I.__esModule?I:{default:I}}function a(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function c(I,C){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:I}function u(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(I,C):I.__proto__=C)}var d=function(I){u(C,I);function C(){return a(this,C),c(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(l.default.Text);o.default=d},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function p(b,y){for(var Z=0;Z<y.length;Z++){var G=y[Z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(b,G.key,G)}}return function(b,y,Z){return y&&p(b.prototype,y),Z&&p(b,Z),b}}(),l=function p(b,y,Z){b===null&&(b=Function.prototype);var G=Object.getOwnPropertyDescriptor(b,y);if(G===void 0){var V=Object.getPrototypeOf(b);return V===null?void 0:p(V,y,Z)}else{if("value"in G)return G.value;var S=G.get;return S===void 0?void 0:S.call(Z)}},s=r(54),a=d(s),c=r(10),u=d(c);function d(p){return p&&p.__esModule?p:{default:p}}function I(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function C(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function f(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var A=(0,u.default)("quill:events"),v=["selectionchange","mousedown","mouseup","click"];v.forEach(function(p){document.addEventListener(p,function(){for(var b=arguments.length,y=Array(b),Z=0;Z<b;Z++)y[Z]=arguments[Z];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(G){if(G.__quill&&G.__quill.emitter){var V;(V=G.__quill.emitter).handleDOM.apply(V,y)}})})});var h=function(p){f(b,p);function b(){I(this,b);var y=C(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return y.listeners={},y.on("error",A.error),y}return i(b,[{key:"emit",value:function(){A.log.apply(A,arguments),l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(Z){for(var G=arguments.length,V=Array(G>1?G-1:0),S=1;S<G;S++)V[S-1]=arguments[S];(this.listeners[Z.type]||[]).forEach(function(k){var B=k.node,R=k.handler;(Z.target===B||B.contains(Z.target))&&R.apply(void 0,[Z].concat(V))})}},{key:"listenDOM",value:function(Z,G,V){this.listeners[Z]||(this.listeners[Z]=[]),this.listeners[Z].push({node:G,handler:V})}}]),b}(a.default);h.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},h.sources={API:"api",SILENT:"silent",USER:"user"},o.default=h},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});function i(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var l=function s(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,s),this.quill=a,this.options=c};l.DEFAULTS={},o.default=l},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=["error","warn","log","info"],l="warn";function s(c){if(i.indexOf(c)<=i.indexOf(l)){for(var u,d=arguments.length,I=Array(d>1?d-1:0),C=1;C<d;C++)I[C-1]=arguments[C];(u=console)[c].apply(u,I)}}function a(c){return i.reduce(function(u,d){return u[d]=s.bind(console,d,c),u},{})}s.level=a.level=function(c){l=c},o.default=a},function(n,o,r){var i=Array.prototype.slice,l=r(52),s=r(53),a=n.exports=function(I,C,f){return f||(f={}),I===C?!0:I instanceof Date&&C instanceof Date?I.getTime()===C.getTime():!I||!C||typeof I!="object"&&typeof C!="object"?f.strict?I===C:I==C:d(I,C,f)};function c(I){return I==null}function u(I){return!(!I||typeof I!="object"||typeof I.length!="number"||typeof I.copy!="function"||typeof I.slice!="function"||I.length>0&&typeof I[0]!="number")}function d(I,C,f){var A,v;if(c(I)||c(C)||I.prototype!==C.prototype)return!1;if(s(I))return s(C)?(I=i.call(I),C=i.call(C),a(I,C,f)):!1;if(u(I)){if(!u(C)||I.length!==C.length)return!1;for(A=0;A<I.length;A++)if(I[A]!==C[A])return!1;return!0}try{var h=l(I),p=l(C)}catch{return!1}if(h.length!=p.length)return!1;for(h.sort(),p.sort(),A=h.length-1;A>=0;A--)if(h[A]!=p[A])return!1;for(A=h.length-1;A>=0;A--)if(v=h[A],!a(I[v],C[v],f))return!1;return typeof I==typeof C}},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(1),l=function(){function s(a,c,u){u===void 0&&(u={}),this.attrName=a,this.keyName=c;var d=i.Scope.TYPE&i.Scope.ATTRIBUTE;u.scope!=null?this.scope=u.scope&i.Scope.LEVEL|d:this.scope=i.Scope.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}return s.keys=function(a){return[].map.call(a.attributes,function(c){return c.name})},s.prototype.add=function(a,c){return this.canAdd(a,c)?(a.setAttribute(this.keyName,c),!0):!1},s.prototype.canAdd=function(a,c){var u=i.query(a,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return u==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},s.prototype.remove=function(a){a.removeAttribute(this.keyName)},s.prototype.value=function(a){var c=a.getAttribute(this.keyName);return this.canAdd(a,c)&&c?c:""},s}();o.default=l},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.Code=void 0;var i=function(){function S(k,B){var R=[],W=!0,w=!1,X=void 0;try{for(var E=k[Symbol.iterator](),M;!(W=(M=E.next()).done)&&(R.push(M.value),!(B&&R.length===B));W=!0);}catch(L){w=!0,X=L}finally{try{!W&&E.return&&E.return()}finally{if(w)throw X}}return R}return function(k,B){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return S(k,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function S(k,B){for(var R=0;R<B.length;R++){var W=B[R];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(k,W.key,W)}}return function(k,B,R){return B&&S(k.prototype,B),R&&S(k,R),k}}(),s=function S(k,B,R){k===null&&(k=Function.prototype);var W=Object.getOwnPropertyDescriptor(k,B);if(W===void 0){var w=Object.getPrototypeOf(k);return w===null?void 0:S(w,B,R)}else{if("value"in W)return W.value;var X=W.get;return X===void 0?void 0:X.call(R)}},a=r(2),c=p(a),u=r(0),d=p(u),I=r(4),C=p(I),f=r(6),A=p(f),v=r(7),h=p(v);function p(S){return S&&S.__esModule?S:{default:S}}function b(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function y(S,k){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:S}function Z(S,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);S.prototype=Object.create(k&&k.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(S,k):S.__proto__=k)}var G=function(S){Z(k,S);function k(){return b(this,k),y(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return k}(A.default);G.blotName="code",G.tagName="CODE";var V=function(S){Z(k,S);function k(){return b(this,k),y(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return l(k,[{key:"delta",value:function(){var R=this,W=this.domNode.textContent;return W.endsWith(`
`)&&(W=W.slice(0,-1)),W.split(`
`).reduce(function(w,X){return w.insert(X).insert(`
`,R.formats())},new c.default)}},{key:"format",value:function(R,W){if(!(R===this.statics.blotName&&W)){var w=this.descendant(h.default,this.length()-1),X=i(w,1),E=X[0];E!=null&&E.deleteAt(E.length()-1,1),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,R,W)}}},{key:"formatAt",value:function(R,W,w,X){if(W!==0&&!(d.default.query(w,d.default.Scope.BLOCK)==null||w===this.statics.blotName&&X===this.statics.formats(this.domNode))){var E=this.newlineIndex(R);if(!(E<0||E>=R+W)){var M=this.newlineIndex(R,!0)+1,L=E-M+1,F=this.isolate(M,L),Y=F.next;F.format(w,X),Y instanceof k&&Y.formatAt(0,R-M+W-L,w,X)}}}},{key:"insertAt",value:function(R,W,w){if(w==null){var X=this.descendant(h.default,R),E=i(X,2),M=E[0],L=E[1];M.insertAt(L,W)}}},{key:"length",value:function(){var R=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?R:R+1}},{key:"newlineIndex",value:function(R){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(W)return this.domNode.textContent.slice(0,R).lastIndexOf(`
`);var w=this.domNode.textContent.slice(R).indexOf(`
`);return w>-1?R+w:-1}},{key:"optimize",value:function(R){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,R);var W=this.next;W!=null&&W.prev===this&&W.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===W.statics.formats(W.domNode)&&(W.optimize(R),W.moveChildren(this),W.remove())}},{key:"replace",value:function(R){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,R),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(W){var w=d.default.find(W);w==null?W.parentNode.removeChild(W):w instanceof d.default.Embed?w.remove():w.unwrap()})}}],[{key:"create",value:function(R){var W=s(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,R);return W.setAttribute("spellcheck",!1),W}},{key:"formats",value:function(){return!0}}]),k}(C.default);V.blotName="code-block",V.tagName="PRE",V.TAB="  ",o.Code=G,o.default=V},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},l=function(){function Y(N,x){var H=[],K=!0,T=!1,j=void 0;try{for(var J=N[Symbol.iterator](),z;!(K=(z=J.next()).done)&&(H.push(z.value),!(x&&H.length===x));K=!0);}catch(U){T=!0,j=U}finally{try{!K&&J.return&&J.return()}finally{if(T)throw j}}return H}return function(N,x){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return Y(N,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function Y(N,x){for(var H=0;H<x.length;H++){var K=x[H];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(N,K.key,K)}}return function(N,x,H){return x&&Y(N.prototype,x),H&&Y(N,H),N}}(),a=r(2),c=W(a),u=r(20),d=W(u),I=r(0),C=W(I),f=r(13),A=W(f),v=r(24),h=W(v),p=r(4),b=W(p),y=r(16),Z=W(y),G=r(21),V=W(G),S=r(11),k=W(S),B=r(3),R=W(B);function W(Y){return Y&&Y.__esModule?Y:{default:Y}}function w(Y,N,x){return N in Y?Object.defineProperty(Y,N,{value:x,enumerable:!0,configurable:!0,writable:!0}):Y[N]=x,Y}function X(Y,N){if(!(Y instanceof N))throw new TypeError("Cannot call a class as a function")}var E=/^[ -~]*$/,M=function(){function Y(N){X(this,Y),this.scroll=N,this.delta=this.getDelta()}return s(Y,[{key:"applyDelta",value:function(x){var H=this,K=!1;this.scroll.update();var T=this.scroll.length();return this.scroll.batchStart(),x=F(x),x.reduce(function(j,J){var z=J.retain||J.delete||J.insert.length||1,U=J.attributes||{};if(J.insert!=null){if(typeof J.insert=="string"){var D=J.insert;D.endsWith(`
`)&&K&&(K=!1,D=D.slice(0,-1)),j>=T&&!D.endsWith(`
`)&&(K=!0),H.scroll.insertAt(j,D);var O=H.scroll.line(j),ee=l(O,2),re=ee[0],ae=ee[1],ge=(0,R.default)({},(0,p.bubbleFormats)(re));if(re instanceof b.default){var ne=re.descendant(C.default.Leaf,ae),ue=l(ne,1),me=ue[0];ge=(0,R.default)(ge,(0,p.bubbleFormats)(me))}U=d.default.attributes.diff(ge,U)||{}}else if(i(J.insert)==="object"){var q=Object.keys(J.insert)[0];if(q==null)return j;H.scroll.insertAt(j,q,J.insert[q])}T+=z}return Object.keys(U).forEach(function(_){H.scroll.formatAt(j,z,_,U[_])}),j+z},0),x.reduce(function(j,J){return typeof J.delete=="number"?(H.scroll.deleteAt(j,J.delete),j):j+(J.retain||J.insert.length||1)},0),this.scroll.batchEnd(),this.update(x)}},{key:"deleteText",value:function(x,H){return this.scroll.deleteAt(x,H),this.update(new c.default().retain(x).delete(H))}},{key:"formatLine",value:function(x,H){var K=this,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(T).forEach(function(j){if(!(K.scroll.whitelist!=null&&!K.scroll.whitelist[j])){var J=K.scroll.lines(x,Math.max(H,1)),z=H;J.forEach(function(U){var D=U.length();if(!(U instanceof A.default))U.format(j,T[j]);else{var O=x-U.offset(K.scroll),ee=U.newlineIndex(O+z)-O+1;U.formatAt(O,ee,j,T[j])}z-=D})}}),this.scroll.optimize(),this.update(new c.default().retain(x).retain(H,(0,V.default)(T)))}},{key:"formatText",value:function(x,H){var K=this,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(T).forEach(function(j){K.scroll.formatAt(x,H,j,T[j])}),this.update(new c.default().retain(x).retain(H,(0,V.default)(T)))}},{key:"getContents",value:function(x,H){return this.delta.slice(x,x+H)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(x,H){return x.concat(H.delta())},new c.default)}},{key:"getFormat",value:function(x){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=[],T=[];H===0?this.scroll.path(x).forEach(function(J){var z=l(J,1),U=z[0];U instanceof b.default?K.push(U):U instanceof C.default.Leaf&&T.push(U)}):(K=this.scroll.lines(x,H),T=this.scroll.descendants(C.default.Leaf,x,H));var j=[K,T].map(function(J){if(J.length===0)return{};for(var z=(0,p.bubbleFormats)(J.shift());Object.keys(z).length>0;){var U=J.shift();if(U==null)return z;z=L((0,p.bubbleFormats)(U),z)}return z});return R.default.apply(R.default,j)}},{key:"getText",value:function(x,H){return this.getContents(x,H).filter(function(K){return typeof K.insert=="string"}).map(function(K){return K.insert}).join("")}},{key:"insertEmbed",value:function(x,H,K){return this.scroll.insertAt(x,H,K),this.update(new c.default().retain(x).insert(w({},H,K)))}},{key:"insertText",value:function(x,H){var K=this,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return H=H.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(x,H),Object.keys(T).forEach(function(j){K.scroll.formatAt(x,H.length,j,T[j])}),this.update(new c.default().retain(x).insert(H,(0,V.default)(T)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var x=this.scroll.children.head;return x.statics.blotName!==b.default.blotName||x.children.length>1?!1:x.children.head instanceof Z.default}},{key:"removeFormat",value:function(x,H){var K=this.getText(x,H),T=this.scroll.line(x+H),j=l(T,2),J=j[0],z=j[1],U=0,D=new c.default;J!=null&&(J instanceof A.default?U=J.newlineIndex(z)-z+1:U=J.length()-z,D=J.delta().slice(z,z+U-1).insert(`
`));var O=this.getContents(x,H+U),ee=O.diff(new c.default().insert(K).concat(D)),re=new c.default().retain(x).concat(ee);return this.applyDelta(re)}},{key:"update",value:function(x){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,T=this.delta;if(H.length===1&&H[0].type==="characterData"&&H[0].target.data.match(E)&&C.default.find(H[0].target)){var j=C.default.find(H[0].target),J=(0,p.bubbleFormats)(j),z=j.offset(this.scroll),U=H[0].oldValue.replace(h.default.CONTENTS,""),D=new c.default().insert(U),O=new c.default().insert(j.value()),ee=new c.default().retain(z).concat(D.diff(O,K));x=ee.reduce(function(re,ae){return ae.insert?re.insert(ae.insert,J):re.push(ae)},new c.default),this.delta=T.compose(x)}else this.delta=this.getDelta(),(!x||!(0,k.default)(T.compose(x),this.delta))&&(x=T.diff(this.delta,K));return x}}]),Y}();function L(Y,N){return Object.keys(N).reduce(function(x,H){return Y[H]==null||(N[H]===Y[H]?x[H]=N[H]:Array.isArray(N[H])?N[H].indexOf(Y[H])<0&&(x[H]=N[H].concat([Y[H]])):x[H]=[N[H],Y[H]]),x},{})}function F(Y){return Y.reduce(function(N,x){if(x.insert===1){var H=(0,V.default)(x.attributes);return delete H.image,N.insert({image:x.attributes.image},H)}if(x.attributes!=null&&(x.attributes.list===!0||x.attributes.bullet===!0)&&(x=(0,V.default)(x),x.attributes.list?x.attributes.list="ordered":(x.attributes.list="bullet",delete x.attributes.bullet)),typeof x.insert=="string"){var K=x.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return N.insert(K,x.attributes)}return N.push(x)},new c.default)}o.default=M},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.Range=void 0;var i=function(){function S(k,B){var R=[],W=!0,w=!1,X=void 0;try{for(var E=k[Symbol.iterator](),M;!(W=(M=E.next()).done)&&(R.push(M.value),!(B&&R.length===B));W=!0);}catch(L){w=!0,X=L}finally{try{!W&&E.return&&E.return()}finally{if(w)throw X}}return R}return function(k,B){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return S(k,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function S(k,B){for(var R=0;R<B.length;R++){var W=B[R];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(k,W.key,W)}}return function(k,B,R){return B&&S(k.prototype,B),R&&S(k,R),k}}(),s=r(0),a=h(s),c=r(21),u=h(c),d=r(11),I=h(d),C=r(8),f=h(C),A=r(10),v=h(A);function h(S){return S&&S.__esModule?S:{default:S}}function p(S){if(Array.isArray(S)){for(var k=0,B=Array(S.length);k<S.length;k++)B[k]=S[k];return B}else return Array.from(S)}function b(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}var y=(0,v.default)("quill:selection"),Z=function S(k){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;b(this,S),this.index=k,this.length=B},G=function(){function S(k,B){var R=this;b(this,S),this.emitter=B,this.scroll=k,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=a.default.create("cursor",this),this.lastRange=this.savedRange=new Z(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){R.mouseDown||setTimeout(R.update.bind(R,f.default.sources.USER),1)}),this.emitter.on(f.default.events.EDITOR_CHANGE,function(W,w){W===f.default.events.TEXT_CHANGE&&w.length()>0&&R.update(f.default.sources.SILENT)}),this.emitter.on(f.default.events.SCROLL_BEFORE_UPDATE,function(){if(R.hasFocus()){var W=R.getNativeRange();W!=null&&W.start.node!==R.cursor.textNode&&R.emitter.once(f.default.events.SCROLL_UPDATE,function(){try{R.setNativeRange(W.start.node,W.start.offset,W.end.node,W.end.offset)}catch{}})}}),this.emitter.on(f.default.events.SCROLL_OPTIMIZE,function(W,w){if(w.range){var X=w.range,E=X.startNode,M=X.startOffset,L=X.endNode,F=X.endOffset;R.setNativeRange(E,M,L,F)}}),this.update(f.default.sources.SILENT)}return l(S,[{key:"handleComposition",value:function(){var B=this;this.root.addEventListener("compositionstart",function(){B.composing=!0}),this.root.addEventListener("compositionend",function(){if(B.composing=!1,B.cursor.parent){var R=B.cursor.restore();if(!R)return;setTimeout(function(){B.setNativeRange(R.startNode,R.startOffset,R.endNode,R.endOffset)},1)}})}},{key:"handleDragging",value:function(){var B=this;this.emitter.listenDOM("mousedown",document.body,function(){B.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){B.mouseDown=!1,B.update(f.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(B,R){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[B])){this.scroll.update();var W=this.getNativeRange();if(!(W==null||!W.native.collapsed||a.default.query(B,a.default.Scope.BLOCK))){if(W.start.node!==this.cursor.textNode){var w=a.default.find(W.start.node,!1);if(w==null)return;if(w instanceof a.default.Leaf){var X=w.split(W.start.offset);w.parent.insertBefore(this.cursor,X)}else w.insertBefore(this.cursor,W.start.node);this.cursor.attach()}this.cursor.format(B,R),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(B){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=this.scroll.length();B=Math.min(B,W-1),R=Math.min(B+R,W-1)-B;var w=void 0,X=this.scroll.leaf(B),E=i(X,2),M=E[0],L=E[1];if(M==null)return null;var F=M.position(L,!0),Y=i(F,2);w=Y[0],L=Y[1];var N=document.createRange();if(R>0){N.setStart(w,L);var x=this.scroll.leaf(B+R),H=i(x,2);if(M=H[0],L=H[1],M==null)return null;var K=M.position(L,!0),T=i(K,2);return w=T[0],L=T[1],N.setEnd(w,L),N.getBoundingClientRect()}else{var j="left",J=void 0;return w instanceof Text?(L<w.data.length?(N.setStart(w,L),N.setEnd(w,L+1)):(N.setStart(w,L-1),N.setEnd(w,L),j="right"),J=N.getBoundingClientRect()):(J=M.domNode.getBoundingClientRect(),L>0&&(j="right")),{bottom:J.top+J.height,height:J.height,left:J[j],right:J[j],top:J.top,width:0}}}},{key:"getNativeRange",value:function(){var B=document.getSelection();if(B==null||B.rangeCount<=0)return null;var R=B.getRangeAt(0);if(R==null)return null;var W=this.normalizeNative(R);return y.info("getNativeRange",W),W}},{key:"getRange",value:function(){var B=this.getNativeRange();if(B==null)return[null,null];var R=this.normalizedToRange(B);return[R,B]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(B){var R=this,W=[[B.start.node,B.start.offset]];B.native.collapsed||W.push([B.end.node,B.end.offset]);var w=W.map(function(M){var L=i(M,2),F=L[0],Y=L[1],N=a.default.find(F,!0),x=N.offset(R.scroll);return Y===0?x:N instanceof a.default.Container?x+N.length():x+N.index(F,Y)}),X=Math.min(Math.max.apply(Math,p(w)),this.scroll.length()-1),E=Math.min.apply(Math,[X].concat(p(w)));return new Z(E,X-E)}},{key:"normalizeNative",value:function(B){if(!V(this.root,B.startContainer)||!B.collapsed&&!V(this.root,B.endContainer))return null;var R={start:{node:B.startContainer,offset:B.startOffset},end:{node:B.endContainer,offset:B.endOffset},native:B};return[R.start,R.end].forEach(function(W){for(var w=W.node,X=W.offset;!(w instanceof Text)&&w.childNodes.length>0;)if(w.childNodes.length>X)w=w.childNodes[X],X=0;else if(w.childNodes.length===X)w=w.lastChild,X=w instanceof Text?w.data.length:w.childNodes.length+1;else break;W.node=w,W.offset=X}),R}},{key:"rangeToNative",value:function(B){var R=this,W=B.collapsed?[B.index]:[B.index,B.index+B.length],w=[],X=this.scroll.length();return W.forEach(function(E,M){E=Math.min(X-1,E);var L=void 0,F=R.scroll.leaf(E),Y=i(F,2),N=Y[0],x=Y[1],H=N.position(x,M!==0),K=i(H,2);L=K[0],x=K[1],w.push(L,x)}),w.length<2&&(w=w.concat(w)),w}},{key:"scrollIntoView",value:function(B){var R=this.lastRange;if(R!=null){var W=this.getBounds(R.index,R.length);if(W!=null){var w=this.scroll.length()-1,X=this.scroll.line(Math.min(R.index,w)),E=i(X,1),M=E[0],L=M;if(R.length>0){var F=this.scroll.line(Math.min(R.index+R.length,w)),Y=i(F,1);L=Y[0]}if(!(M==null||L==null)){var N=B.getBoundingClientRect();W.top<N.top?B.scrollTop-=N.top-W.top:W.bottom>N.bottom&&(B.scrollTop+=W.bottom-N.bottom)}}}}},{key:"setNativeRange",value:function(B,R){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:B,w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,X=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(y.info("setNativeRange",B,R,W,w),!(B!=null&&(this.root.parentNode==null||B.parentNode==null||W.parentNode==null))){var E=document.getSelection();if(E!=null)if(B!=null){this.hasFocus()||this.root.focus();var M=(this.getNativeRange()||{}).native;if(M==null||X||B!==M.startContainer||R!==M.startOffset||W!==M.endContainer||w!==M.endOffset){B.tagName=="BR"&&(R=[].indexOf.call(B.parentNode.childNodes,B),B=B.parentNode),W.tagName=="BR"&&(w=[].indexOf.call(W.parentNode.childNodes,W),W=W.parentNode);var L=document.createRange();L.setStart(B,R),L.setEnd(W,w),E.removeAllRanges(),E.addRange(L)}}else E.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(B){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.default.sources.API;if(typeof R=="string"&&(W=R,R=!1),y.info("setRange",B),B!=null){var w=this.rangeToNative(B);this.setNativeRange.apply(this,p(w).concat([R]))}else this.setNativeRange(null);this.update(W)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.default.sources.USER,R=this.lastRange,W=this.getRange(),w=i(W,2),X=w[0],E=w[1];if(this.lastRange=X,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,I.default)(R,this.lastRange)){var M;!this.composing&&E!=null&&E.native.collapsed&&E.start.node!==this.cursor.textNode&&this.cursor.restore();var L=[f.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(R),B];if((M=this.emitter).emit.apply(M,[f.default.events.EDITOR_CHANGE].concat(L)),B!==f.default.sources.SILENT){var F;(F=this.emitter).emit.apply(F,L)}}}}]),S}();function V(S,k){try{k.parentNode}catch{return!1}return k instanceof Text&&(k=k.parentNode),S.contains(k)}o.Range=Z,o.default=G},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function f(A,v){for(var h=0;h<v.length;h++){var p=v[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(A,p.key,p)}}return function(A,v,h){return v&&f(A.prototype,v),h&&f(A,h),A}}(),l=function f(A,v,h){A===null&&(A=Function.prototype);var p=Object.getOwnPropertyDescriptor(A,v);if(p===void 0){var b=Object.getPrototypeOf(A);return b===null?void 0:f(b,v,h)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(h)}},s=r(0),a=c(s);function c(f){return f&&f.__esModule?f:{default:f}}function u(f,A){if(!(f instanceof A))throw new TypeError("Cannot call a class as a function")}function d(f,A){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:f}function I(f,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);f.prototype=Object.create(A&&A.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(f,A):f.__proto__=A)}var C=function(f){I(A,f);function A(){return u(this,A),d(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return i(A,[{key:"insertInto",value:function(h,p){h.children.length===0?l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertInto",this).call(this,h,p):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),A}(a.default.Embed);C.blotName="break",C.tagName="BR",o.default=C},function(n,o,r){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,C){I.__proto__=C}||function(I,C){for(var f in C)C.hasOwnProperty(f)&&(I[f]=C[f])};return function(I,C){d(I,C);function f(){this.constructor=I}I.prototype=C===null?Object.create(C):(f.prototype=C.prototype,new f)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(44),s=r(30),a=r(1),c=function(d){i(I,d);function I(C){var f=d.call(this,C)||this;return f.build(),f}return I.prototype.appendChild=function(C){this.insertBefore(C)},I.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(C){C.attach()})},I.prototype.build=function(){var C=this;this.children=new l.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(f){try{var A=u(f);C.insertBefore(A,C.children.head||void 0)}catch(v){if(v instanceof a.ParchmentError)return;throw v}})},I.prototype.deleteAt=function(C,f){if(C===0&&f===this.length())return this.remove();this.children.forEachAt(C,f,function(A,v,h){A.deleteAt(v,h)})},I.prototype.descendant=function(C,f){var A=this.children.find(f),v=A[0],h=A[1];return C.blotName==null&&C(v)||C.blotName!=null&&v instanceof C?[v,h]:v instanceof I?v.descendant(C,h):[null,-1]},I.prototype.descendants=function(C,f,A){f===void 0&&(f=0),A===void 0&&(A=Number.MAX_VALUE);var v=[],h=A;return this.children.forEachAt(f,A,function(p,b,y){(C.blotName==null&&C(p)||C.blotName!=null&&p instanceof C)&&v.push(p),p instanceof I&&(v=v.concat(p.descendants(C,b,h))),h-=y}),v},I.prototype.detach=function(){this.children.forEach(function(C){C.detach()}),d.prototype.detach.call(this)},I.prototype.formatAt=function(C,f,A,v){this.children.forEachAt(C,f,function(h,p,b){h.formatAt(p,b,A,v)})},I.prototype.insertAt=function(C,f,A){var v=this.children.find(C),h=v[0],p=v[1];if(h)h.insertAt(p,f,A);else{var b=A==null?a.create("text",f):a.create(f,A);this.appendChild(b)}},I.prototype.insertBefore=function(C,f){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(A){return C instanceof A}))throw new a.ParchmentError("Cannot insert "+C.statics.blotName+" into "+this.statics.blotName);C.insertInto(this,f)},I.prototype.length=function(){return this.children.reduce(function(C,f){return C+f.length()},0)},I.prototype.moveChildren=function(C,f){this.children.forEach(function(A){C.insertBefore(A,f)})},I.prototype.optimize=function(C){if(d.prototype.optimize.call(this,C),this.children.length===0)if(this.statics.defaultChild!=null){var f=a.create(this.statics.defaultChild);this.appendChild(f),f.optimize(C)}else this.remove()},I.prototype.path=function(C,f){f===void 0&&(f=!1);var A=this.children.find(C,f),v=A[0],h=A[1],p=[[this,C]];return v instanceof I?p.concat(v.path(h,f)):(v!=null&&p.push([v,h]),p)},I.prototype.removeChild=function(C){this.children.remove(C)},I.prototype.replace=function(C){C instanceof I&&C.moveChildren(this),d.prototype.replace.call(this,C)},I.prototype.split=function(C,f){if(f===void 0&&(f=!1),!f){if(C===0)return this;if(C===this.length())return this.next}var A=this.clone();return this.parent.insertBefore(A,this.next),this.children.forEachAt(C,this.length(),function(v,h,p){v=v.split(h,f),A.appendChild(v)}),A},I.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},I.prototype.update=function(C,f){var A=this,v=[],h=[];C.forEach(function(p){p.target===A.domNode&&p.type==="childList"&&(v.push.apply(v,p.addedNodes),h.push.apply(h,p.removedNodes))}),h.forEach(function(p){if(!(p.parentNode!=null&&p.tagName!=="IFRAME"&&document.body.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var b=a.find(p);b!=null&&(b.domNode.parentNode==null||b.domNode.parentNode===A.domNode)&&b.detach()}}),v.filter(function(p){return p.parentNode==A.domNode}).sort(function(p,b){return p===b?0:p.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(p){var b=null;p.nextSibling!=null&&(b=a.find(p.nextSibling));var y=u(p);(y.next!=b||y.next==null)&&(y.parent!=null&&y.parent.removeChild(A),A.insertBefore(y,b||void 0))})},I}(s.default);function u(d){var I=a.find(d);if(I==null)try{I=a.create(d)}catch{I=a.create(a.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(f){I.domNode.appendChild(f)}),d.parentNode&&d.parentNode.replaceChild(I.domNode,d),I.attach()}return I}o.default=c},function(n,o,r){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,C){I.__proto__=C}||function(I,C){for(var f in C)C.hasOwnProperty(f)&&(I[f]=C[f])};return function(I,C){d(I,C);function f(){this.constructor=I}I.prototype=C===null?Object.create(C):(f.prototype=C.prototype,new f)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(12),s=r(31),a=r(17),c=r(1),u=function(d){i(I,d);function I(C){var f=d.call(this,C)||this;return f.attributes=new s.default(f.domNode),f}return I.formats=function(C){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return C.tagName.toLowerCase()},I.prototype.format=function(C,f){var A=c.query(C);A instanceof l.default?this.attributes.attribute(A,f):f&&A!=null&&(C!==this.statics.blotName||this.formats()[C]!==f)&&this.replaceWith(C,f)},I.prototype.formats=function(){var C=this.attributes.values(),f=this.statics.formats(this.domNode);return f!=null&&(C[this.statics.blotName]=f),C},I.prototype.replaceWith=function(C,f){var A=d.prototype.replaceWith.call(this,C,f);return this.attributes.copy(A),A},I.prototype.update=function(C,f){var A=this;d.prototype.update.call(this,C,f),C.some(function(v){return v.target===A.domNode&&v.type==="attributes"})&&this.attributes.build()},I.prototype.wrap=function(C,f){var A=d.prototype.wrap.call(this,C,f);return A instanceof I&&A.statics.scope===this.statics.scope&&this.attributes.move(A),A},I}(a.default);o.default=u},function(n,o,r){var i=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var I in d)d.hasOwnProperty(I)&&(u[I]=d[I])};return function(u,d){c(u,d);function I(){this.constructor=u}u.prototype=d===null?Object.create(d):(I.prototype=d.prototype,new I)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(30),s=r(1),a=function(c){i(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.value=function(d){return!0},u.prototype.index=function(d,I){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(I,1):-1},u.prototype.position=function(d,I){var C=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(C+=1),[this.parent.domNode,C]},u.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},u.scope=s.Scope.INLINE_BLOT,u}(l.default);o.default=a},function(n,o,r){var i=r(11),l=r(3),s={attributes:{compose:function(c,u,d){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});var I=l(!0,{},u);d||(I=Object.keys(I).reduce(function(f,A){return I[A]!=null&&(f[A]=I[A]),f},{}));for(var C in c)c[C]!==void 0&&u[C]===void 0&&(I[C]=c[C]);return Object.keys(I).length>0?I:void 0},diff:function(c,u){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});var d=Object.keys(c).concat(Object.keys(u)).reduce(function(I,C){return i(c[C],u[C])||(I[C]=u[C]===void 0?null:u[C]),I},{});return Object.keys(d).length>0?d:void 0},transform:function(c,u,d){if(typeof c!="object")return u;if(typeof u=="object"){if(!d)return u;var I=Object.keys(u).reduce(function(C,f){return c[f]===void 0&&(C[f]=u[f]),C},{});return Object.keys(I).length>0?I:void 0}}},iterator:function(c){return new a(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function a(c){this.ops=c,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(c){c||(c=1/0);var u=this.ops[this.index];if(u){var d=this.offset,I=s.length(u);if(c>=I-d?(c=I-d,this.index+=1,this.offset=0):this.offset+=c,typeof u.delete=="number")return{delete:c};var C={};return u.attributes&&(C.attributes=u.attributes),typeof u.retain=="number"?C.retain=c:typeof u.insert=="string"?C.insert=u.insert.substr(d,c):C.insert=u.insert,C}else return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,u=this.index,d=this.next(),I=this.ops.slice(this.index);return this.offset=c,this.index=u,[d].concat(I)}else return[]},n.exports=s},function(n,o){var r=function(){function i(A,v){return v!=null&&A instanceof v}var l;try{l=Map}catch{l=function(){}}var s;try{s=Set}catch{s=function(){}}var a;try{a=Promise}catch{a=function(){}}function c(A,v,h,p,b){typeof v=="object"&&(h=v.depth,p=v.prototype,b=v.includeNonEnumerable,v=v.circular);var y=[],Z=[],G=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof h>"u"&&(h=1/0);function V(S,k){if(S===null)return null;if(k===0)return S;var B,R;if(typeof S!="object")return S;if(i(S,l))B=new l;else if(i(S,s))B=new s;else if(i(S,a))B=new a(function(N,x){S.then(function(H){N(V(H,k-1))},function(H){x(V(H,k-1))})});else if(c.__isArray(S))B=[];else if(c.__isRegExp(S))B=new RegExp(S.source,f(S)),S.lastIndex&&(B.lastIndex=S.lastIndex);else if(c.__isDate(S))B=new Date(S.getTime());else{if(G&&Buffer.isBuffer(S))return Buffer.allocUnsafe?B=Buffer.allocUnsafe(S.length):B=new Buffer(S.length),S.copy(B),B;i(S,Error)?B=Object.create(S):typeof p>"u"?(R=Object.getPrototypeOf(S),B=Object.create(R)):(B=Object.create(p),R=p)}if(v){var W=y.indexOf(S);if(W!=-1)return Z[W];y.push(S),Z.push(B)}i(S,l)&&S.forEach(function(N,x){var H=V(x,k-1),K=V(N,k-1);B.set(H,K)}),i(S,s)&&S.forEach(function(N){var x=V(N,k-1);B.add(x)});for(var w in S){var X;R&&(X=Object.getOwnPropertyDescriptor(R,w)),!(X&&X.set==null)&&(B[w]=V(S[w],k-1))}if(Object.getOwnPropertySymbols)for(var E=Object.getOwnPropertySymbols(S),w=0;w<E.length;w++){var M=E[w],L=Object.getOwnPropertyDescriptor(S,M);L&&!L.enumerable&&!b||(B[M]=V(S[M],k-1),L.enumerable||Object.defineProperty(B,M,{enumerable:!1}))}if(b)for(var F=Object.getOwnPropertyNames(S),w=0;w<F.length;w++){var Y=F[w],L=Object.getOwnPropertyDescriptor(S,Y);L&&L.enumerable||(B[Y]=V(S[Y],k-1),Object.defineProperty(B,Y,{enumerable:!1}))}return B}return V(A,h)}c.clonePrototype=function(v){if(v===null)return null;var h=function(){};return h.prototype=v,new h};function u(A){return Object.prototype.toString.call(A)}c.__objToStr=u;function d(A){return typeof A=="object"&&u(A)==="[object Date]"}c.__isDate=d;function I(A){return typeof A=="object"&&u(A)==="[object Array]"}c.__isArray=I;function C(A){return typeof A=="object"&&u(A)==="[object RegExp]"}c.__isRegExp=C;function f(A){var v="";return A.global&&(v+="g"),A.ignoreCase&&(v+="i"),A.multiline&&(v+="m"),v}return c.__getRegExpFlags=f,c}();typeof n=="object"&&n.exports&&(n.exports=r)},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function B(R,W){var w=[],X=!0,E=!1,M=void 0;try{for(var L=R[Symbol.iterator](),F;!(X=(F=L.next()).done)&&(w.push(F.value),!(W&&w.length===W));X=!0);}catch(Y){E=!0,M=Y}finally{try{!X&&L.return&&L.return()}finally{if(E)throw M}}return w}return function(R,W){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return B(R,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function B(R,W){for(var w=0;w<W.length;w++){var X=W[w];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(R,X.key,X)}}return function(R,W,w){return W&&B(R.prototype,W),w&&B(R,w),R}}(),s=function B(R,W,w){R===null&&(R=Function.prototype);var X=Object.getOwnPropertyDescriptor(R,W);if(X===void 0){var E=Object.getPrototypeOf(R);return E===null?void 0:B(E,W,w)}else{if("value"in X)return X.value;var M=X.get;return M===void 0?void 0:M.call(w)}},a=r(0),c=y(a),u=r(8),d=y(u),I=r(4),C=y(I),f=r(16),A=y(f),v=r(13),h=y(v),p=r(25),b=y(p);function y(B){return B&&B.__esModule?B:{default:B}}function Z(B,R){if(!(B instanceof R))throw new TypeError("Cannot call a class as a function")}function G(B,R){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:B}function V(B,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);B.prototype=Object.create(R&&R.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(B,R):B.__proto__=R)}function S(B){return B instanceof C.default||B instanceof I.BlockEmbed}var k=function(B){V(R,B);function R(W,w){Z(this,R);var X=G(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,W));return X.emitter=w.emitter,Array.isArray(w.whitelist)&&(X.whitelist=w.whitelist.reduce(function(E,M){return E[M]=!0,E},{})),X.domNode.addEventListener("DOMNodeInserted",function(){}),X.optimize(),X.enable(),X}return l(R,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(w,X){var E=this.line(w),M=i(E,2),L=M[0],F=M[1],Y=this.line(w+X),N=i(Y,1),x=N[0];if(s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,w,X),x!=null&&L!==x&&F>0){if(L instanceof I.BlockEmbed||x instanceof I.BlockEmbed){this.optimize();return}if(L instanceof h.default){var H=L.newlineIndex(L.length(),!0);if(H>-1&&(L=L.split(H+1),L===x)){this.optimize();return}}else if(x instanceof h.default){var K=x.newlineIndex(0);K>-1&&x.split(K+1)}var T=x.children.head instanceof A.default?null:x.children.head;L.moveChildren(x,T),L.remove()}this.optimize()}},{key:"enable",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",w)}},{key:"formatAt",value:function(w,X,E,M){this.whitelist!=null&&!this.whitelist[E]||(s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,w,X,E,M),this.optimize())}},{key:"insertAt",value:function(w,X,E){if(!(E!=null&&this.whitelist!=null&&!this.whitelist[X])){if(w>=this.length())if(E==null||c.default.query(X,c.default.Scope.BLOCK)==null){var M=c.default.create(this.statics.defaultChild);this.appendChild(M),E==null&&X.endsWith(`
`)&&(X=X.slice(0,-1)),M.insertAt(0,X,E)}else{var L=c.default.create(X,E);this.appendChild(L)}else s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,w,X,E);this.optimize()}}},{key:"insertBefore",value:function(w,X){if(w.statics.scope===c.default.Scope.INLINE_BLOT){var E=c.default.create(this.statics.defaultChild);E.appendChild(w),w=E}s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,w,X)}},{key:"leaf",value:function(w){return this.path(w).pop()||[null,-1]}},{key:"line",value:function(w){return w===this.length()?this.line(w-1):this.descendant(S,w)}},{key:"lines",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,E=function M(L,F,Y){var N=[],x=Y;return L.children.forEachAt(F,Y,function(H,K,T){S(H)?N.push(H):H instanceof c.default.Container&&(N=N.concat(M(H,K,x))),x-=T}),N};return E(this,w,X)}},{key:"optimize",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,w,X),w.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,w,X))}},{key:"path",value:function(w){return s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,w).slice(1)}},{key:"update",value:function(w){if(this.batch!==!0){var X=d.default.sources.USER;typeof w=="string"&&(X=w),Array.isArray(w)||(w=this.observer.takeRecords()),w.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,X,w),s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"update",this).call(this,w.concat([])),w.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,X,w)}}}]),R}(c.default.Scroll);k.blotName="scroll",k.className="ql-editor",k.tagName="DIV",k.defaultChild="block",k.allowedChildren=[C.default,I.BlockEmbed,b.default],o.default=k},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.SHORTKEY=o.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},l=function(){function J(z,U){var D=[],O=!0,ee=!1,re=void 0;try{for(var ae=z[Symbol.iterator](),ge;!(O=(ge=ae.next()).done)&&(D.push(ge.value),!(U&&D.length===U));O=!0);}catch(ne){ee=!0,re=ne}finally{try{!O&&ae.return&&ae.return()}finally{if(ee)throw re}}return D}return function(z,U){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return J(z,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function J(z,U){for(var D=0;D<U.length;D++){var O=U[D];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(z,O.key,O)}}return function(z,U,D){return U&&J(z.prototype,U),D&&J(z,D),z}}(),a=r(21),c=B(a),u=r(11),d=B(u),I=r(3),C=B(I),f=r(2),A=B(f),v=r(20),h=B(v),p=r(0),b=B(p),y=r(5),Z=B(y),G=r(10),V=B(G),S=r(9),k=B(S);function B(J){return J&&J.__esModule?J:{default:J}}function R(J,z,U){return z in J?Object.defineProperty(J,z,{value:U,enumerable:!0,configurable:!0,writable:!0}):J[z]=U,J}function W(J,z){if(!(J instanceof z))throw new TypeError("Cannot call a class as a function")}function w(J,z){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:J}function X(J,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);J.prototype=Object.create(z&&z.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(J,z):J.__proto__=z)}var E=(0,V.default)("quill:keyboard"),M=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",L=function(J){X(z,J),s(z,null,[{key:"match",value:function(D,O){return O=j(O),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ee){return!!O[ee]!==D[ee]&&O[ee]!==null})?!1:O.key===(D.which||D.keyCode)}}]);function z(U,D){W(this,z);var O=w(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,U,D));return O.bindings={},Object.keys(O.options.bindings).forEach(function(ee){ee==="list autofill"&&U.scroll.whitelist!=null&&!U.scroll.whitelist.list||O.options.bindings[ee]&&O.addBinding(O.options.bindings[ee])}),O.addBinding({key:z.keys.ENTER,shiftKey:null},H),O.addBinding({key:z.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(O.addBinding({key:z.keys.BACKSPACE},{collapsed:!0},Y),O.addBinding({key:z.keys.DELETE},{collapsed:!0},N)):(O.addBinding({key:z.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Y),O.addBinding({key:z.keys.DELETE},{collapsed:!0,suffix:/^.?$/},N)),O.addBinding({key:z.keys.BACKSPACE},{collapsed:!1},x),O.addBinding({key:z.keys.DELETE},{collapsed:!1},x),O.addBinding({key:z.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Y),O.listen(),O}return s(z,[{key:"addBinding",value:function(D){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},re=j(D);if(re==null||re.key==null)return E.warn("Attempted to add invalid keyboard binding",re);typeof O=="function"&&(O={handler:O}),typeof ee=="function"&&(ee={handler:ee}),re=(0,C.default)(re,O,ee),this.bindings[re.key]=this.bindings[re.key]||[],this.bindings[re.key].push(re)}},{key:"listen",value:function(){var D=this;this.quill.root.addEventListener("keydown",function(O){if(!O.defaultPrevented){var ee=O.which||O.keyCode,re=(D.bindings[ee]||[]).filter(function(Be){return z.match(O,Be)});if(re.length!==0){var ae=D.quill.getSelection();if(!(ae==null||!D.quill.hasFocus())){var ge=D.quill.getLine(ae.index),ne=l(ge,2),ue=ne[0],me=ne[1],q=D.quill.getLeaf(ae.index),_=l(q,2),$=_[0],oe=_[1],Q=ae.length===0?[$,oe]:D.quill.getLeaf(ae.index+ae.length),ce=l(Q,2),le=ce[0],fe=ce[1],Ae=$ instanceof b.default.Text?$.value().slice(0,oe):"",ie=le instanceof b.default.Text?le.value().slice(fe):"",pe={collapsed:ae.length===0,empty:ae.length===0&&ue.length()<=1,format:D.quill.getFormat(ae),offset:me,prefix:Ae,suffix:ie},Ze=re.some(function(Be){if(Be.collapsed!=null&&Be.collapsed!==pe.collapsed||Be.empty!=null&&Be.empty!==pe.empty||Be.offset!=null&&Be.offset!==pe.offset)return!1;if(Array.isArray(Be.format)){if(Be.format.every(function(ht){return pe.format[ht]==null}))return!1}else if(i(Be.format)==="object"&&!Object.keys(Be.format).every(function(ht){return Be.format[ht]===!0?pe.format[ht]!=null:Be.format[ht]===!1?pe.format[ht]==null:(0,d.default)(Be.format[ht],pe.format[ht])}))return!1;return Be.prefix!=null&&!Be.prefix.test(pe.prefix)||Be.suffix!=null&&!Be.suffix.test(pe.suffix)?!1:Be.handler.call(D,ae,pe)!==!0});Ze&&O.preventDefault()}}}})}}]),z}(k.default);L.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},L.DEFAULTS={bindings:{bold:T("bold"),italic:T("italic"),underline:T("underline"),indent:{key:L.keys.TAB,format:["blockquote","indent","list"],handler:function(z,U){if(U.collapsed&&U.offset!==0)return!0;this.quill.format("indent","+1",Z.default.sources.USER)}},outdent:{key:L.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(z,U){if(U.collapsed&&U.offset!==0)return!0;this.quill.format("indent","-1",Z.default.sources.USER)}},"outdent backspace":{key:L.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(z,U){U.format.indent!=null?this.quill.format("indent","-1",Z.default.sources.USER):U.format.list!=null&&this.quill.format("list",!1,Z.default.sources.USER)}},"indent code-block":K(!0),"outdent code-block":K(!1),"remove tab":{key:L.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(z){this.quill.deleteText(z.index-1,1,Z.default.sources.USER)}},tab:{key:L.keys.TAB,handler:function(z){this.quill.history.cutoff();var U=new A.default().retain(z.index).delete(z.length).insert("	");this.quill.updateContents(U,Z.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(z.index+1,Z.default.sources.SILENT)}},"list empty enter":{key:L.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(z,U){this.quill.format("list",!1,Z.default.sources.USER),U.format.indent&&this.quill.format("indent",!1,Z.default.sources.USER)}},"checklist enter":{key:L.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(z){var U=this.quill.getLine(z.index),D=l(U,2),O=D[0],ee=D[1],re=(0,C.default)({},O.formats(),{list:"checked"}),ae=new A.default().retain(z.index).insert(`
`,re).retain(O.length()-ee-1).retain(1,{list:"unchecked"});this.quill.updateContents(ae,Z.default.sources.USER),this.quill.setSelection(z.index+1,Z.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:L.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(z,U){var D=this.quill.getLine(z.index),O=l(D,2),ee=O[0],re=O[1],ae=new A.default().retain(z.index).insert(`
`,U.format).retain(ee.length()-re-1).retain(1,{header:null});this.quill.updateContents(ae,Z.default.sources.USER),this.quill.setSelection(z.index+1,Z.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(z,U){var D=U.prefix.length,O=this.quill.getLine(z.index),ee=l(O,2),re=ee[0],ae=ee[1];if(ae>D)return!0;var ge=void 0;switch(U.prefix.trim()){case"[]":case"[ ]":ge="unchecked";break;case"[x]":ge="checked";break;case"-":case"*":ge="bullet";break;default:ge="ordered"}this.quill.insertText(z.index," ",Z.default.sources.USER),this.quill.history.cutoff();var ne=new A.default().retain(z.index-ae).delete(D+1).retain(re.length()-2-ae).retain(1,{list:ge});this.quill.updateContents(ne,Z.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(z.index-D,Z.default.sources.SILENT)}},"code exit":{key:L.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(z){var U=this.quill.getLine(z.index),D=l(U,2),O=D[0],ee=D[1],re=new A.default().retain(z.index+O.length()-ee-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(re,Z.default.sources.USER)}},"embed left":F(L.keys.LEFT,!1),"embed left shift":F(L.keys.LEFT,!0),"embed right":F(L.keys.RIGHT,!1),"embed right shift":F(L.keys.RIGHT,!0)}};function F(J,z){var U,D=J===L.keys.LEFT?"prefix":"suffix";return U={key:J,shiftKey:z,altKey:null},R(U,D,/^$/),R(U,"handler",function(ee){var re=ee.index;J===L.keys.RIGHT&&(re+=ee.length+1);var ae=this.quill.getLeaf(re),ge=l(ae,1),ne=ge[0];return ne instanceof b.default.Embed?(J===L.keys.LEFT?z?this.quill.setSelection(ee.index-1,ee.length+1,Z.default.sources.USER):this.quill.setSelection(ee.index-1,Z.default.sources.USER):z?this.quill.setSelection(ee.index,ee.length+1,Z.default.sources.USER):this.quill.setSelection(ee.index+ee.length+1,Z.default.sources.USER),!1):!0}),U}function Y(J,z){if(!(J.index===0||this.quill.getLength()<=1)){var U=this.quill.getLine(J.index),D=l(U,1),O=D[0],ee={};if(z.offset===0){var re=this.quill.getLine(J.index-1),ae=l(re,1),ge=ae[0];if(ge!=null&&ge.length()>1){var ne=O.formats(),ue=this.quill.getFormat(J.index-1,1);ee=h.default.attributes.diff(ne,ue)||{}}}var me=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(z.prefix)?2:1;this.quill.deleteText(J.index-me,me,Z.default.sources.USER),Object.keys(ee).length>0&&this.quill.formatLine(J.index-me,me,ee,Z.default.sources.USER),this.quill.focus()}}function N(J,z){var U=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(z.suffix)?2:1;if(!(J.index>=this.quill.getLength()-U)){var D={},O=0,ee=this.quill.getLine(J.index),re=l(ee,1),ae=re[0];if(z.offset>=ae.length()-1){var ge=this.quill.getLine(J.index+1),ne=l(ge,1),ue=ne[0];if(ue){var me=ae.formats(),q=this.quill.getFormat(J.index,1);D=h.default.attributes.diff(me,q)||{},O=ue.length()}}this.quill.deleteText(J.index,U,Z.default.sources.USER),Object.keys(D).length>0&&this.quill.formatLine(J.index+O-1,U,D,Z.default.sources.USER)}}function x(J){var z=this.quill.getLines(J),U={};if(z.length>1){var D=z[0].formats(),O=z[z.length-1].formats();U=h.default.attributes.diff(O,D)||{}}this.quill.deleteText(J,Z.default.sources.USER),Object.keys(U).length>0&&this.quill.formatLine(J.index,1,U,Z.default.sources.USER),this.quill.setSelection(J.index,Z.default.sources.SILENT),this.quill.focus()}function H(J,z){var U=this;J.length>0&&this.quill.scroll.deleteAt(J.index,J.length);var D=Object.keys(z.format).reduce(function(O,ee){return b.default.query(ee,b.default.Scope.BLOCK)&&!Array.isArray(z.format[ee])&&(O[ee]=z.format[ee]),O},{});this.quill.insertText(J.index,`
`,D,Z.default.sources.USER),this.quill.setSelection(J.index+1,Z.default.sources.SILENT),this.quill.focus(),Object.keys(z.format).forEach(function(O){D[O]==null&&(Array.isArray(z.format[O])||O!=="link"&&U.quill.format(O,z.format[O],Z.default.sources.USER))})}function K(J){return{key:L.keys.TAB,shiftKey:!J,format:{"code-block":!0},handler:function(U){var D=b.default.query("code-block"),O=U.index,ee=U.length,re=this.quill.scroll.descendant(D,O),ae=l(re,2),ge=ae[0],ne=ae[1];if(ge!=null){var ue=this.quill.getIndex(ge),me=ge.newlineIndex(ne,!0)+1,q=ge.newlineIndex(ue+ne+ee),_=ge.domNode.textContent.slice(me,q).split(`
`);ne=0,_.forEach(function($,oe){J?(ge.insertAt(me+ne,D.TAB),ne+=D.TAB.length,oe===0?O+=D.TAB.length:ee+=D.TAB.length):$.startsWith(D.TAB)&&(ge.deleteAt(me+ne,D.TAB.length),ne-=D.TAB.length,oe===0?O-=D.TAB.length:ee-=D.TAB.length),ne+=$.length+1}),this.quill.update(Z.default.sources.USER),this.quill.setSelection(O,ee,Z.default.sources.SILENT)}}}}function T(J){return{key:J[0].toUpperCase(),shortKey:!0,handler:function(U,D){this.quill.format(J,!D.format[J],Z.default.sources.USER)}}}function j(J){if(typeof J=="string"||typeof J=="number")return j({key:J});if((typeof J>"u"?"undefined":i(J))==="object"&&(J=(0,c.default)(J,!1)),typeof J.key=="string")if(L.keys[J.key.toUpperCase()]!=null)J.key=L.keys[J.key.toUpperCase()];else if(J.key.length===1)J.key=J.key.toUpperCase().charCodeAt(0);else return null;return J.shortKey&&(J[M]=J.shortKey,delete J.shortKey),J}o.default=L,o.SHORTKEY=M},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function h(p,b){var y=[],Z=!0,G=!1,V=void 0;try{for(var S=p[Symbol.iterator](),k;!(Z=(k=S.next()).done)&&(y.push(k.value),!(b&&y.length===b));Z=!0);}catch(B){G=!0,V=B}finally{try{!Z&&S.return&&S.return()}finally{if(G)throw V}}return y}return function(p,b){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return h(p,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function h(p,b,y){p===null&&(p=Function.prototype);var Z=Object.getOwnPropertyDescriptor(p,b);if(Z===void 0){var G=Object.getPrototypeOf(p);return G===null?void 0:h(G,b,y)}else{if("value"in Z)return Z.value;var V=Z.get;return V===void 0?void 0:V.call(y)}},s=function(){function h(p,b){for(var y=0;y<b.length;y++){var Z=b[y];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(p,Z.key,Z)}}return function(p,b,y){return b&&h(p.prototype,b),y&&h(p,y),p}}(),a=r(0),c=I(a),u=r(7),d=I(u);function I(h){return h&&h.__esModule?h:{default:h}}function C(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function f(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function A(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var v=function(h){A(p,h),s(p,null,[{key:"value",value:function(){}}]);function p(b,y){C(this,p);var Z=f(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,b));return Z.selection=y,Z.textNode=document.createTextNode(p.CONTENTS),Z.domNode.appendChild(Z.textNode),Z._length=0,Z}return s(p,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(y,Z){if(this._length!==0)return l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,y,Z);for(var G=this,V=0;G!=null&&G.statics.scope!==c.default.Scope.BLOCK_BLOT;)V+=G.offset(G.parent),G=G.parent;G!=null&&(this._length=p.CONTENTS.length,G.optimize(),G.formatAt(V,p.CONTENTS.length,y,Z),this._length=0)}},{key:"index",value:function(y,Z){return y===this.textNode?0:l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"index",this).call(this,y,Z)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var y=this.textNode,Z=this.selection.getNativeRange(),G=void 0,V=void 0,S=void 0;if(Z!=null&&Z.start.node===y&&Z.end.node===y){var k=[y,Z.start.offset,Z.end.offset];G=k[0],V=k[1],S=k[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==p.CONTENTS){var B=this.textNode.data.split(p.CONTENTS).join("");this.next instanceof d.default?(G=this.next.domNode,this.next.insertAt(0,B),this.textNode.data=p.CONTENTS):(this.textNode.data=B,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(p.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),V!=null){var R=[V,S].map(function(w){return Math.max(0,Math.min(G.data.length,w-1))}),W=i(R,2);return V=W[0],S=W[1],{startNode:G,startOffset:V,endNode:G,endOffset:S}}}}},{key:"update",value:function(y,Z){var G=this;if(y.some(function(S){return S.type==="characterData"&&S.target===G.textNode})){var V=this.restore();V&&(Z.range=V)}}},{key:"value",value:function(){return""}}]),p}(c.default.Embed);v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\uFEFF",o.default=v},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(0),l=c(i),s=r(4),a=c(s);function c(f){return f&&f.__esModule?f:{default:f}}function u(f,A){if(!(f instanceof A))throw new TypeError("Cannot call a class as a function")}function d(f,A){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:f}function I(f,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);f.prototype=Object.create(A&&A.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(f,A):f.__proto__=A)}var C=function(f){I(A,f);function A(){return u(this,A),d(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(l.default.Container);C.allowedChildren=[a.default,s.BlockEmbed,C],o.default=C},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.ColorStyle=o.ColorClass=o.ColorAttributor=void 0;var i=function(){function v(h,p){for(var b=0;b<p.length;b++){var y=p[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,p,b){return p&&v(h.prototype,p),b&&v(h,b),h}}(),l=function v(h,p,b){h===null&&(h=Function.prototype);var y=Object.getOwnPropertyDescriptor(h,p);if(y===void 0){var Z=Object.getPrototypeOf(h);return Z===null?void 0:v(Z,p,b)}else{if("value"in y)return y.value;var G=y.get;return G===void 0?void 0:G.call(b)}},s=r(0),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function u(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function d(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function I(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var C=function(v){I(h,v);function h(){return u(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return i(h,[{key:"value",value:function(b){var y=l(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"value",this).call(this,b);return y.startsWith("rgb(")?(y=y.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+y.split(",").map(function(Z){return("00"+parseInt(Z).toString(16)).slice(-2)}).join("")):y}}]),h}(a.default.Attributor.Style),f=new a.default.Attributor.Class("color","ql-color",{scope:a.default.Scope.INLINE}),A=new C("color","color",{scope:a.default.Scope.INLINE});o.ColorAttributor=C,o.ColorClass=f,o.ColorStyle=A},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.sanitize=o.default=void 0;var i=function(){function A(v,h){for(var p=0;p<h.length;p++){var b=h[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,h,p){return h&&A(v.prototype,h),p&&A(v,p),v}}(),l=function A(v,h,p){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,h);if(b===void 0){var y=Object.getPrototypeOf(v);return y===null?void 0:A(y,h,p)}else{if("value"in b)return b.value;var Z=b.get;return Z===void 0?void 0:Z.call(p)}},s=r(6),a=c(s);function c(A){return A&&A.__esModule?A:{default:A}}function u(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")}function d(A,v){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:A}function I(A,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);A.prototype=Object.create(v&&v.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(A,v):A.__proto__=v)}var C=function(A){I(v,A);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(p,b){if(p!==this.statics.blotName||!b)return l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,p,b);b=this.constructor.sanitize(b),this.domNode.setAttribute("href",b)}}],[{key:"create",value:function(p){var b=l(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,p);return p=this.sanitize(p),b.setAttribute("href",p),b.setAttribute("rel","noopener noreferrer"),b.setAttribute("target","_blank"),b}},{key:"formats",value:function(p){return p.getAttribute("href")}},{key:"sanitize",value:function(p){return f(p,this.PROTOCOL_WHITELIST)?p:this.SANITIZED_URL}}]),v}(a.default);C.blotName="link",C.tagName="A",C.SANITIZED_URL="about:blank",C.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function f(A,v){var h=document.createElement("a");h.href=A;var p=h.href.slice(0,h.href.indexOf(":"));return v.indexOf(p)>-1}o.default=C,o.sanitize=f},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},l=function(){function v(h,p){for(var b=0;b<p.length;b++){var y=p[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,p,b){return p&&v(h.prototype,p),b&&v(h,b),h}}(),s=r(23),a=d(s),c=r(107),u=d(c);function d(v){return v&&v.__esModule?v:{default:v}}function I(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}var C=0;function f(v,h){v.setAttribute(h,v.getAttribute(h)!=="true")}var A=function(){function v(h){var p=this;I(this,v),this.select=h,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){p.togglePicker()}),this.label.addEventListener("keydown",function(b){switch(b.keyCode){case a.default.keys.ENTER:p.togglePicker();break;case a.default.keys.ESCAPE:p.escape(),b.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return l(v,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),f(this.label,"aria-expanded"),f(this.options,"aria-hidden")}},{key:"buildItem",value:function(p){var b=this,y=document.createElement("span");return y.tabIndex="0",y.setAttribute("role","button"),y.classList.add("ql-picker-item"),p.hasAttribute("value")&&y.setAttribute("data-value",p.getAttribute("value")),p.textContent&&y.setAttribute("data-label",p.textContent),y.addEventListener("click",function(){b.selectItem(y,!0)}),y.addEventListener("keydown",function(Z){switch(Z.keyCode){case a.default.keys.ENTER:b.selectItem(y,!0),Z.preventDefault();break;case a.default.keys.ESCAPE:b.escape(),Z.preventDefault();break}}),y}},{key:"buildLabel",value:function(){var p=document.createElement("span");return p.classList.add("ql-picker-label"),p.innerHTML=u.default,p.tabIndex="0",p.setAttribute("role","button"),p.setAttribute("aria-expanded","false"),this.container.appendChild(p),p}},{key:"buildOptions",value:function(){var p=this,b=document.createElement("span");b.classList.add("ql-picker-options"),b.setAttribute("aria-hidden","true"),b.tabIndex="-1",b.id="ql-picker-options-"+C,C+=1,this.label.setAttribute("aria-controls",b.id),this.options=b,[].slice.call(this.select.options).forEach(function(y){var Z=p.buildItem(y);b.appendChild(Z),y.selected===!0&&p.selectItem(Z)}),this.container.appendChild(b)}},{key:"buildPicker",value:function(){var p=this;[].slice.call(this.select.attributes).forEach(function(b){p.container.setAttribute(b.name,b.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var p=this;this.close(),setTimeout(function(){return p.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(p){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=this.container.querySelector(".ql-selected");if(p!==y&&(y!=null&&y.classList.remove("ql-selected"),p!=null&&(p.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(p.parentNode.children,p),p.hasAttribute("data-value")?this.label.setAttribute("data-value",p.getAttribute("data-value")):this.label.removeAttribute("data-value"),p.hasAttribute("data-label")?this.label.setAttribute("data-label",p.getAttribute("data-label")):this.label.removeAttribute("data-label"),b))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var Z=document.createEvent("Event");Z.initEvent("change",!0,!0),this.select.dispatchEvent(Z)}this.close()}}},{key:"update",value:function(){var p=void 0;if(this.select.selectedIndex>-1){var b=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];p=this.select.options[this.select.selectedIndex],this.selectItem(b)}else this.selectItem(null);var y=p!=null&&p!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",y)}}]),v}();o.default=A},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(0),l=E(i),s=r(5),a=E(s),c=r(4),u=E(c),d=r(16),I=E(d),C=r(25),f=E(C),A=r(24),v=E(A),h=r(35),p=E(h),b=r(6),y=E(b),Z=r(22),G=E(Z),V=r(7),S=E(V),k=r(55),B=E(k),R=r(42),W=E(R),w=r(23),X=E(w);function E(M){return M&&M.__esModule?M:{default:M}}a.default.register({"blots/block":u.default,"blots/block/embed":c.BlockEmbed,"blots/break":I.default,"blots/container":f.default,"blots/cursor":v.default,"blots/embed":p.default,"blots/inline":y.default,"blots/scroll":G.default,"blots/text":S.default,"modules/clipboard":B.default,"modules/history":W.default,"modules/keyboard":X.default}),l.default.register(u.default,I.default,v.default,y.default,G.default,S.default),o.default=a.default},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(1),l=function(){function s(a){this.domNode=a,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(s.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),s.create=function(a){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof a=="string"&&(a=a.toUpperCase(),parseInt(a).toString()===a&&(a=parseInt(a))),typeof a=="number"?c=document.createElement(this.tagName[a-1]):this.tagName.indexOf(a)>-1?c=document.createElement(a):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},s.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},s.prototype.clone=function(){var a=this.domNode.cloneNode(!1);return i.create(a)},s.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},s.prototype.deleteAt=function(a,c){var u=this.isolate(a,c);u.remove()},s.prototype.formatAt=function(a,c,u,d){var I=this.isolate(a,c);if(i.query(u,i.Scope.BLOT)!=null&&d)I.wrap(u,d);else if(i.query(u,i.Scope.ATTRIBUTE)!=null){var C=i.create(this.statics.scope);I.wrap(C),C.format(u,d)}},s.prototype.insertAt=function(a,c,u){var d=u==null?i.create("text",c):i.create(c,u),I=this.split(a);this.parent.insertBefore(d,I)},s.prototype.insertInto=function(a,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var u=null;a.children.insertBefore(this,c),c!=null&&(u=c.domNode),(this.domNode.parentNode!=a.domNode||this.domNode.nextSibling!=u)&&a.domNode.insertBefore(this.domNode,u),this.parent=a,this.attach()},s.prototype.isolate=function(a,c){var u=this.split(a);return u.split(c),u},s.prototype.length=function(){return 1},s.prototype.offset=function(a){return a===void 0&&(a=this.parent),this.parent==null||this==a?0:this.parent.children.offset(this)+this.parent.offset(a)},s.prototype.optimize=function(a){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},s.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},s.prototype.replace=function(a){a.parent!=null&&(a.parent.insertBefore(this,a.next),a.remove())},s.prototype.replaceWith=function(a,c){var u=typeof a=="string"?i.create(a,c):a;return u.replace(this),u},s.prototype.split=function(a,c){return a===0?this:this.next},s.prototype.update=function(a,c){},s.prototype.wrap=function(a,c){var u=typeof a=="string"?i.create(a,c):a;return this.parent!=null&&this.parent.insertBefore(u,this.next),u.appendChild(this),u},s.blotName="abstract",s}();o.default=l},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(12),l=r(32),s=r(33),a=r(1),c=function(){function u(d){this.attributes={},this.domNode=d,this.build()}return u.prototype.attribute=function(d,I){I?d.add(this.domNode,I)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},u.prototype.build=function(){var d=this;this.attributes={};var I=i.default.keys(this.domNode),C=l.default.keys(this.domNode),f=s.default.keys(this.domNode);I.concat(C).concat(f).forEach(function(A){var v=a.query(A,a.Scope.ATTRIBUTE);v instanceof i.default&&(d.attributes[v.attrName]=v)})},u.prototype.copy=function(d){var I=this;Object.keys(this.attributes).forEach(function(C){var f=I.attributes[C].value(I.domNode);d.format(C,f)})},u.prototype.move=function(d){var I=this;this.copy(d),Object.keys(this.attributes).forEach(function(C){I.attributes[C].remove(I.domNode)}),this.attributes={}},u.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(I,C){return I[C]=d.attributes[C].value(d.domNode),I},{})},u}();o.default=c},function(n,o,r){var i=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var I in d)d.hasOwnProperty(I)&&(u[I]=d[I])};return function(u,d){c(u,d);function I(){this.constructor=u}u.prototype=d===null?Object.create(d):(I.prototype=d.prototype,new I)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(12);function s(c,u){var d=c.getAttribute("class")||"";return d.split(/\s+/).filter(function(I){return I.indexOf(u+"-")===0})}var a=function(c){i(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(I){return I.split("-").slice(0,-1).join("-")})},u.prototype.add=function(d,I){return this.canAdd(d,I)?(this.remove(d),d.classList.add(this.keyName+"-"+I),!0):!1},u.prototype.remove=function(d){var I=s(d,this.keyName);I.forEach(function(C){d.classList.remove(C)}),d.classList.length===0&&d.removeAttribute("class")},u.prototype.value=function(d){var I=s(d,this.keyName)[0]||"",C=I.slice(this.keyName.length+1);return this.canAdd(d,C)?C:""},u}(l.default);o.default=a},function(n,o,r){var i=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var I in d)d.hasOwnProperty(I)&&(u[I]=d[I])};return function(u,d){c(u,d);function I(){this.constructor=u}u.prototype=d===null?Object.create(d):(I.prototype=d.prototype,new I)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(12);function s(c){var u=c.split("-"),d=u.slice(1).map(function(I){return I[0].toUpperCase()+I.slice(1)}).join("");return u[0]+d}var a=function(c){i(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(I){var C=I.split(":");return C[0].trim()})},u.prototype.add=function(d,I){return this.canAdd(d,I)?(d.style[s(this.keyName)]=I,!0):!1},u.prototype.remove=function(d){d.style[s(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},u.prototype.value=function(d){var I=d.style[s(this.keyName)];return this.canAdd(d,I)?I:""},u}(l.default);o.default=a},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function a(c,u){for(var d=0;d<u.length;d++){var I=u[d];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(c,I.key,I)}}return function(c,u,d){return u&&a(c.prototype,u),d&&a(c,d),c}}();function l(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function(){function a(c,u){l(this,a),this.quill=c,this.options=u,this.modules={}}return i(a,[{key:"init",value:function(){var u=this;Object.keys(this.options.modules).forEach(function(d){u.modules[d]==null&&u.addModule(d)})}},{key:"addModule",value:function(u){var d=this.quill.constructor.import("modules/"+u);return this.modules[u]=new d(this.quill,this.options.modules[u]||{}),this.modules[u]}}]),a}();s.DEFAULTS={modules:{}},s.themes={default:s},o.default=s},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function h(p,b){for(var y=0;y<b.length;y++){var Z=b[y];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(p,Z.key,Z)}}return function(p,b,y){return b&&h(p.prototype,b),y&&h(p,y),p}}(),l=function h(p,b,y){p===null&&(p=Function.prototype);var Z=Object.getOwnPropertyDescriptor(p,b);if(Z===void 0){var G=Object.getPrototypeOf(p);return G===null?void 0:h(G,b,y)}else{if("value"in Z)return Z.value;var V=Z.get;return V===void 0?void 0:V.call(y)}},s=r(0),a=d(s),c=r(7),u=d(c);function d(h){return h&&h.__esModule?h:{default:h}}function I(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function C(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function f(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var A="\uFEFF",v=function(h){f(p,h);function p(b){I(this,p);var y=C(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,b));return y.contentNode=document.createElement("span"),y.contentNode.setAttribute("contenteditable",!1),[].slice.call(y.domNode.childNodes).forEach(function(Z){y.contentNode.appendChild(Z)}),y.leftGuard=document.createTextNode(A),y.rightGuard=document.createTextNode(A),y.domNode.appendChild(y.leftGuard),y.domNode.appendChild(y.contentNode),y.domNode.appendChild(y.rightGuard),y}return i(p,[{key:"index",value:function(y,Z){return y===this.leftGuard?0:y===this.rightGuard?1:l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"index",this).call(this,y,Z)}},{key:"restore",value:function(y){var Z=void 0,G=void 0,V=y.data.split(A).join("");if(y===this.leftGuard)if(this.prev instanceof u.default){var S=this.prev.length();this.prev.insertAt(S,V),Z={startNode:this.prev.domNode,startOffset:S+V.length}}else G=document.createTextNode(V),this.parent.insertBefore(a.default.create(G),this),Z={startNode:G,startOffset:V.length};else y===this.rightGuard&&(this.next instanceof u.default?(this.next.insertAt(0,V),Z={startNode:this.next.domNode,startOffset:V.length}):(G=document.createTextNode(V),this.parent.insertBefore(a.default.create(G),this.next),Z={startNode:G,startOffset:V.length}));return y.data=A,Z}},{key:"update",value:function(y,Z){var G=this;y.forEach(function(V){if(V.type==="characterData"&&(V.target===G.leftGuard||V.target===G.rightGuard)){var S=G.restore(V.target);S&&(Z.range=S)}})}}]),p}(a.default.Embed);o.default=v},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.AlignStyle=o.AlignClass=o.AlignAttribute=void 0;var i=r(0),l=s(i);function s(I){return I&&I.__esModule?I:{default:I}}var a={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new l.default.Attributor.Attribute("align","align",a),u=new l.default.Attributor.Class("align","ql-align",a),d=new l.default.Attributor.Style("align","text-align",a);o.AlignAttribute=c,o.AlignClass=u,o.AlignStyle=d},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.BackgroundStyle=o.BackgroundClass=void 0;var i=r(0),l=a(i),s=r(26);function a(d){return d&&d.__esModule?d:{default:d}}var c=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),u=new s.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});o.BackgroundClass=c,o.BackgroundStyle=u},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.DirectionStyle=o.DirectionClass=o.DirectionAttribute=void 0;var i=r(0),l=s(i);function s(I){return I&&I.__esModule?I:{default:I}}var a={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},c=new l.default.Attributor.Attribute("direction","dir",a),u=new l.default.Attributor.Class("direction","ql-direction",a),d=new l.default.Attributor.Style("direction","direction",a);o.DirectionAttribute=c,o.DirectionClass=u,o.DirectionStyle=d},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.FontClass=o.FontStyle=void 0;var i=function(){function h(p,b){for(var y=0;y<b.length;y++){var Z=b[y];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(p,Z.key,Z)}}return function(p,b,y){return b&&h(p.prototype,b),y&&h(p,y),p}}(),l=function h(p,b,y){p===null&&(p=Function.prototype);var Z=Object.getOwnPropertyDescriptor(p,b);if(Z===void 0){var G=Object.getPrototypeOf(p);return G===null?void 0:h(G,b,y)}else{if("value"in Z)return Z.value;var V=Z.get;return V===void 0?void 0:V.call(y)}},s=r(0),a=c(s);function c(h){return h&&h.__esModule?h:{default:h}}function u(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function d(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function I(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var C={scope:a.default.Scope.INLINE,whitelist:["serif","monospace"]},f=new a.default.Attributor.Class("font","ql-font",C),A=function(h){I(p,h);function p(){return u(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return i(p,[{key:"value",value:function(y){return l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"value",this).call(this,y).replace(/["']/g,"")}}]),p}(a.default.Attributor.Style),v=new A("font","font-family",C);o.FontStyle=v,o.FontClass=f},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.SizeStyle=o.SizeClass=void 0;var i=r(0),l=s(i);function s(u){return u&&u.__esModule?u:{default:u}}var a=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});o.SizeClass=a,o.SizeStyle=c},function(n,o,r){n.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.getLastChangeIndex=o.default=void 0;var i=function(){function b(y,Z){for(var G=0;G<Z.length;G++){var V=Z[G];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(y,V.key,V)}}return function(y,Z,G){return Z&&b(y.prototype,Z),G&&b(y,G),y}}(),l=r(0),s=I(l),a=r(5),c=I(a),u=r(9),d=I(u);function I(b){return b&&b.__esModule?b:{default:b}}function C(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function f(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function A(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var v=function(b){A(y,b);function y(Z,G){C(this,y);var V=f(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,Z,G));return V.lastRecorded=0,V.ignoreChange=!1,V.clear(),V.quill.on(c.default.events.EDITOR_CHANGE,function(S,k,B,R){S!==c.default.events.TEXT_CHANGE||V.ignoreChange||(!V.options.userOnly||R===c.default.sources.USER?V.record(k,B):V.transform(k))}),V.quill.keyboard.addBinding({key:"Z",shortKey:!0},V.undo.bind(V)),V.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},V.redo.bind(V)),/Win/i.test(navigator.platform)&&V.quill.keyboard.addBinding({key:"Y",shortKey:!0},V.redo.bind(V)),V}return i(y,[{key:"change",value:function(G,V){if(this.stack[G].length!==0){var S=this.stack[G].pop();this.stack[V].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[G],c.default.sources.USER),this.ignoreChange=!1;var k=p(S[G]);this.quill.setSelection(k)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(G,V){if(G.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(V),k=Date.now();if(this.lastRecorded+this.options.delay>k&&this.stack.undo.length>0){var B=this.stack.undo.pop();S=S.compose(B.undo),G=B.redo.compose(G)}else this.lastRecorded=k;this.stack.undo.push({redo:G,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(G){this.stack.undo.forEach(function(V){V.undo=G.transform(V.undo,!0),V.redo=G.transform(V.redo,!0)}),this.stack.redo.forEach(function(V){V.undo=G.transform(V.undo,!0),V.redo=G.transform(V.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),y}(d.default);v.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function h(b){var y=b.ops[b.ops.length-1];return y==null?!1:y.insert!=null?typeof y.insert=="string"&&y.insert.endsWith(`
`):y.attributes!=null?Object.keys(y.attributes).some(function(Z){return s.default.query(Z,s.default.Scope.BLOCK)!=null}):!1}function p(b){var y=b.reduce(function(G,V){return G+=V.delete||0,G},0),Z=b.length()-y;return h(b)&&(Z-=1),Z}o.default=v,o.getLastChangeIndex=p},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.BaseTooltip=void 0;var i=function(){function H(K,T){for(var j=0;j<T.length;j++){var J=T[j];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(K,J.key,J)}}return function(K,T,j){return T&&H(K.prototype,T),j&&H(K,j),K}}(),l=function H(K,T,j){K===null&&(K=Function.prototype);var J=Object.getOwnPropertyDescriptor(K,T);if(J===void 0){var z=Object.getPrototypeOf(K);return z===null?void 0:H(z,T,j)}else{if("value"in J)return J.value;var U=J.get;return U===void 0?void 0:U.call(j)}},s=r(3),a=k(s),c=r(2),u=k(c),d=r(8),I=k(d),C=r(23),f=k(C),A=r(34),v=k(A),h=r(59),p=k(h),b=r(60),y=k(b),Z=r(28),G=k(Z),V=r(61),S=k(V);function k(H){return H&&H.__esModule?H:{default:H}}function B(H,K){if(!(H instanceof K))throw new TypeError("Cannot call a class as a function")}function R(H,K){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:H}function W(H,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);H.prototype=Object.create(K&&K.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(H,K):H.__proto__=K)}var w=[!1,"center","right","justify"],X=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],E=[!1,"serif","monospace"],M=["1","2","3",!1],L=["small",!1,"large","huge"],F=function(H){W(K,H);function K(T,j){B(this,K);var J=R(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,T,j)),z=function U(D){if(!document.body.contains(T.root))return document.body.removeEventListener("click",U);J.tooltip!=null&&!J.tooltip.root.contains(D.target)&&document.activeElement!==J.tooltip.textbox&&!J.quill.hasFocus()&&J.tooltip.hide(),J.pickers!=null&&J.pickers.forEach(function(O){O.container.contains(D.target)||O.close()})};return T.emitter.listenDOM("click",document.body,z),J}return i(K,[{key:"addModule",value:function(j){var J=l(K.prototype.__proto__||Object.getPrototypeOf(K.prototype),"addModule",this).call(this,j);return j==="toolbar"&&this.extendToolbar(J),J}},{key:"buildButtons",value:function(j,J){j.forEach(function(z){var U=z.getAttribute("class")||"";U.split(/\s+/).forEach(function(D){if(D.startsWith("ql-")&&(D=D.slice(3),J[D]!=null))if(D==="direction")z.innerHTML=J[D][""]+J[D].rtl;else if(typeof J[D]=="string")z.innerHTML=J[D];else{var O=z.value||"";O!=null&&J[D][O]&&(z.innerHTML=J[D][O])}})})}},{key:"buildPickers",value:function(j,J){var z=this;this.pickers=j.map(function(D){if(D.classList.contains("ql-align"))return D.querySelector("option")==null&&x(D,w),new y.default(D,J.align);if(D.classList.contains("ql-background")||D.classList.contains("ql-color")){var O=D.classList.contains("ql-background")?"background":"color";return D.querySelector("option")==null&&x(D,X,O==="background"?"#ffffff":"#000000"),new p.default(D,J[O])}else return D.querySelector("option")==null&&(D.classList.contains("ql-font")?x(D,E):D.classList.contains("ql-header")?x(D,M):D.classList.contains("ql-size")&&x(D,L)),new G.default(D)});var U=function(){z.pickers.forEach(function(O){O.update()})};this.quill.on(I.default.events.EDITOR_CHANGE,U)}}]),K}(v.default);F.DEFAULTS=(0,a.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var K=this,T=this.container.querySelector("input.ql-image[type=file]");T==null&&(T=document.createElement("input"),T.setAttribute("type","file"),T.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),T.classList.add("ql-image"),T.addEventListener("change",function(){if(T.files!=null&&T.files[0]!=null){var j=new FileReader;j.onload=function(J){var z=K.quill.getSelection(!0);K.quill.updateContents(new u.default().retain(z.index).delete(z.length).insert({image:J.target.result}),I.default.sources.USER),K.quill.setSelection(z.index+1,I.default.sources.SILENT),T.value=""},j.readAsDataURL(T.files[0])}}),this.container.appendChild(T)),T.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Y=function(H){W(K,H);function K(T,j){B(this,K);var J=R(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,T,j));return J.textbox=J.root.querySelector('input[type="text"]'),J.listen(),J}return i(K,[{key:"listen",value:function(){var j=this;this.textbox.addEventListener("keydown",function(J){f.default.match(J,"enter")?(j.save(),J.preventDefault()):f.default.match(J,"escape")&&(j.cancel(),J.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),J!=null?this.textbox.value=J:j!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+j)||""),this.root.setAttribute("data-mode",j)}},{key:"restoreFocus",value:function(){var j=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=j}},{key:"save",value:function(){var j=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var J=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",j,I.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",j,I.default.sources.USER)),this.quill.root.scrollTop=J;break}case"video":j=N(j);case"formula":{if(!j)break;var z=this.quill.getSelection(!0);if(z!=null){var U=z.index+z.length;this.quill.insertEmbed(U,this.root.getAttribute("data-mode"),j,I.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(U+1," ",I.default.sources.USER),this.quill.setSelection(U+2,I.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),K}(S.default);function N(H){var K=H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return K?(K[1]||"https")+"://www.youtube.com/embed/"+K[2]+"?showinfo=0":(K=H.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(K[1]||"https")+"://player.vimeo.com/video/"+K[2]+"/":H}function x(H,K){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;K.forEach(function(j){var J=document.createElement("option");j===T?J.setAttribute("selected","selected"):J.setAttribute("value",j),H.appendChild(J)})}o.BaseTooltip=Y,o.default=F},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.insertBefore(s[0],null),s.length>1&&this.append.apply(this,s.slice(1))},l.prototype.contains=function(s){for(var a,c=this.iterator();a=c();)if(a===s)return!0;return!1},l.prototype.insertBefore=function(s,a){s&&(s.next=a,a!=null?(s.prev=a.prev,a.prev!=null&&(a.prev.next=s),a.prev=s,a===this.head&&(this.head=s)):this.tail!=null?(this.tail.next=s,s.prev=this.tail,this.tail=s):(s.prev=null,this.head=this.tail=s),this.length+=1)},l.prototype.offset=function(s){for(var a=0,c=this.head;c!=null;){if(c===s)return a;a+=c.length(),c=c.next}return-1},l.prototype.remove=function(s){this.contains(s)&&(s.prev!=null&&(s.prev.next=s.next),s.next!=null&&(s.next.prev=s.prev),s===this.head&&(this.head=s.next),s===this.tail&&(this.tail=s.prev),this.length-=1)},l.prototype.iterator=function(s){return s===void 0&&(s=this.head),function(){var a=s;return s!=null&&(s=s.next),a}},l.prototype.find=function(s,a){a===void 0&&(a=!1);for(var c,u=this.iterator();c=u();){var d=c.length();if(s<d||a&&s===d&&(c.next==null||c.next.length()!==0))return[c,s];s-=d}return[null,0]},l.prototype.forEach=function(s){for(var a,c=this.iterator();a=c();)s(a)},l.prototype.forEachAt=function(s,a,c){if(!(a<=0))for(var u=this.find(s),d=u[0],I=u[1],C,f=s-I,A=this.iterator(d);(C=A())&&f<s+a;){var v=C.length();s>f?c(C,s-f,Math.min(a,f+v-s)):c(C,0,Math.min(v,s+a-f)),f+=v}},l.prototype.map=function(s){return this.reduce(function(a,c){return a.push(s(c)),a},[])},l.prototype.reduce=function(s,a){for(var c,u=this.iterator();c=u();)a=s(a,c);return a},l}();o.default=i},function(n,o,r){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,C){I.__proto__=C}||function(I,C){for(var f in C)C.hasOwnProperty(f)&&(I[f]=C[f])};return function(I,C){d(I,C);function f(){this.constructor=I}I.prototype=C===null?Object.create(C):(f.prototype=C.prototype,new f)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(17),s=r(1),a={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,u=function(d){i(I,d);function I(C){var f=d.call(this,C)||this;return f.scroll=f,f.observer=new MutationObserver(function(A){f.update(A)}),f.observer.observe(f.domNode,a),f.attach(),f}return I.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},I.prototype.deleteAt=function(C,f){this.update(),C===0&&f===this.length()?this.children.forEach(function(A){A.remove()}):d.prototype.deleteAt.call(this,C,f)},I.prototype.formatAt=function(C,f,A,v){this.update(),d.prototype.formatAt.call(this,C,f,A,v)},I.prototype.insertAt=function(C,f,A){this.update(),d.prototype.insertAt.call(this,C,f,A)},I.prototype.optimize=function(C,f){var A=this;C===void 0&&(C=[]),f===void 0&&(f={}),d.prototype.optimize.call(this,f);for(var v=[].slice.call(this.observer.takeRecords());v.length>0;)C.push(v.pop());for(var h=function(Z,G){G===void 0&&(G=!0),!(Z==null||Z===A)&&Z.domNode.parentNode!=null&&(Z.domNode[s.DATA_KEY].mutations==null&&(Z.domNode[s.DATA_KEY].mutations=[]),G&&h(Z.parent))},p=function(Z){Z.domNode[s.DATA_KEY]==null||Z.domNode[s.DATA_KEY].mutations==null||(Z instanceof l.default&&Z.children.forEach(p),Z.optimize(f))},b=C,y=0;b.length>0;y+=1){if(y>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(b.forEach(function(Z){var G=s.find(Z.target,!0);G!=null&&(G.domNode===Z.target&&(Z.type==="childList"?(h(s.find(Z.previousSibling,!1)),[].forEach.call(Z.addedNodes,function(V){var S=s.find(V,!1);h(S,!1),S instanceof l.default&&S.children.forEach(function(k){h(k,!1)})})):Z.type==="attributes"&&h(G.prev)),h(G))}),this.children.forEach(p),b=[].slice.call(this.observer.takeRecords()),v=b.slice();v.length>0;)C.push(v.pop())}},I.prototype.update=function(C,f){var A=this;f===void 0&&(f={}),C=C||this.observer.takeRecords(),C.map(function(v){var h=s.find(v.target,!0);return h==null?null:h.domNode[s.DATA_KEY].mutations==null?(h.domNode[s.DATA_KEY].mutations=[v],h):(h.domNode[s.DATA_KEY].mutations.push(v),null)}).forEach(function(v){v==null||v===A||v.domNode[s.DATA_KEY]==null||v.update(v.domNode[s.DATA_KEY].mutations||[],f)}),this.domNode[s.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,f),this.optimize(C,f)},I.blotName="scroll",I.defaultChild="block",I.scope=s.Scope.BLOCK_BLOT,I.tagName="DIV",I}(l.default);o.default=u},function(n,o,r){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,I){d.__proto__=I}||function(d,I){for(var C in I)I.hasOwnProperty(C)&&(d[C]=I[C])};return function(d,I){u(d,I);function C(){this.constructor=d}d.prototype=I===null?Object.create(I):(C.prototype=I.prototype,new C)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(18),s=r(1);function a(u,d){if(Object.keys(u).length!==Object.keys(d).length)return!1;for(var I in u)if(u[I]!==d[I])return!1;return!0}var c=function(u){i(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.formats=function(I){if(I.tagName!==d.tagName)return u.formats.call(this,I)},d.prototype.format=function(I,C){var f=this;I===this.statics.blotName&&!C?(this.children.forEach(function(A){A instanceof l.default||(A=A.wrap(d.blotName,!0)),f.attributes.copy(A)}),this.unwrap()):u.prototype.format.call(this,I,C)},d.prototype.formatAt=function(I,C,f,A){if(this.formats()[f]!=null||s.query(f,s.Scope.ATTRIBUTE)){var v=this.isolate(I,C);v.format(f,A)}else u.prototype.formatAt.call(this,I,C,f,A)},d.prototype.optimize=function(I){u.prototype.optimize.call(this,I);var C=this.formats();if(Object.keys(C).length===0)return this.unwrap();var f=this.next;f instanceof d&&f.prev===this&&a(C,f.formats())&&(f.moveChildren(this),f.remove())},d.blotName="inline",d.scope=s.Scope.INLINE_BLOT,d.tagName="SPAN",d}(l.default);o.default=c},function(n,o,r){var i=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var I in d)d.hasOwnProperty(I)&&(u[I]=d[I])};return function(u,d){c(u,d);function I(){this.constructor=u}u.prototype=d===null?Object.create(d):(I.prototype=d.prototype,new I)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(18),s=r(1),a=function(c){i(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(d){var I=s.query(u.blotName).tagName;if(d.tagName!==I)return c.formats.call(this,d)},u.prototype.format=function(d,I){s.query(d,s.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!I?this.replaceWith(u.blotName):c.prototype.format.call(this,d,I))},u.prototype.formatAt=function(d,I,C,f){s.query(C,s.Scope.BLOCK)!=null?this.format(C,f):c.prototype.formatAt.call(this,d,I,C,f)},u.prototype.insertAt=function(d,I,C){if(C==null||s.query(I,s.Scope.INLINE)!=null)c.prototype.insertAt.call(this,d,I,C);else{var f=this.split(d),A=s.create(I,C);f.parent.insertBefore(A,f)}},u.prototype.update=function(d,I){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,d,I)},u.blotName="block",u.scope=s.Scope.BLOCK_BLOT,u.tagName="P",u}(l.default);o.default=a},function(n,o,r){var i=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)u.hasOwnProperty(d)&&(c[d]=u[d])};return function(c,u){a(c,u);function d(){this.constructor=c}c.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(19),s=function(a){i(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.formats=function(u){},c.prototype.format=function(u,d){a.prototype.formatAt.call(this,0,this.length(),u,d)},c.prototype.formatAt=function(u,d,I,C){u===0&&d===this.length()?this.format(I,C):a.prototype.formatAt.call(this,u,d,I,C)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(l.default);o.default=s},function(n,o,r){var i=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var I in d)d.hasOwnProperty(I)&&(u[I]=d[I])};return function(u,d){c(u,d);function I(){this.constructor=u}u.prototype=d===null?Object.create(d):(I.prototype=d.prototype,new I)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=r(19),s=r(1),a=function(c){i(u,c);function u(d){var I=c.call(this,d)||this;return I.text=I.statics.value(I.domNode),I}return u.create=function(d){return document.createTextNode(d)},u.value=function(d){var I=d.data;return I.normalize&&(I=I.normalize()),I},u.prototype.deleteAt=function(d,I){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+I)},u.prototype.index=function(d,I){return this.domNode===d?I:-1},u.prototype.insertAt=function(d,I,C){C==null?(this.text=this.text.slice(0,d)+I+this.text.slice(d),this.domNode.data=this.text):c.prototype.insertAt.call(this,d,I,C)},u.prototype.length=function(){return this.text.length},u.prototype.optimize=function(d){c.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof u&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},u.prototype.position=function(d,I){return[this.domNode,d]},u.prototype.split=function(d,I){if(I===void 0&&(I=!1),!I){if(d===0)return this;if(d===this.length())return this.next}var C=s.create(this.domNode.splitText(d));return this.parent.insertBefore(C,this.next),this.text=this.statics.value(this.domNode),C},u.prototype.update=function(d,I){var C=this;d.some(function(f){return f.type==="characterData"&&f.target===C.domNode})&&(this.text=this.statics.value(this.domNode))},u.prototype.value=function(){return this.text},u.blotName="text",u.scope=s.Scope.INLINE_BLOT,u}(l.default);o.default=a},function(n,o,r){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(s,a){return arguments.length>1&&!this.contains(s)==!a?a:l.call(this,s)}}String.prototype.startsWith||(String.prototype.startsWith=function(s,a){return a=a||0,this.substr(a,s.length)===s}),String.prototype.endsWith||(String.prototype.endsWith=function(s,a){var c=this.toString();(typeof a!="number"||!isFinite(a)||Math.floor(a)!==a||a>c.length)&&(a=c.length),a-=s.length;var u=c.indexOf(s,a);return u!==-1&&u===a}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(a){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof a!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),u=c.length>>>0,d=arguments[1],I,C=0;C<u;C++)if(I=c[C],a.call(d,I,C,c))return I}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,o){var r=-1,i=1,l=0;function s(y,Z,G){if(y==Z)return y?[[l,y]]:[];(G<0||y.length<G)&&(G=null);var V=d(y,Z),S=y.substring(0,V);y=y.substring(V),Z=Z.substring(V),V=I(y,Z);var k=y.substring(y.length-V);y=y.substring(0,y.length-V),Z=Z.substring(0,Z.length-V);var B=a(y,Z);return S&&B.unshift([l,S]),k&&B.push([l,k]),f(B),G!=null&&(B=h(B,G)),B=p(B),B}function a(y,Z){var G;if(!y)return[[i,Z]];if(!Z)return[[r,y]];var V=y.length>Z.length?y:Z,S=y.length>Z.length?Z:y,k=V.indexOf(S);if(k!=-1)return G=[[i,V.substring(0,k)],[l,S],[i,V.substring(k+S.length)]],y.length>Z.length&&(G[0][0]=G[2][0]=r),G;if(S.length==1)return[[r,y],[i,Z]];var B=C(y,Z);if(B){var R=B[0],W=B[1],w=B[2],X=B[3],E=B[4],M=s(R,w),L=s(W,X);return M.concat([[l,E]],L)}return c(y,Z)}function c(y,Z){for(var G=y.length,V=Z.length,S=Math.ceil((G+V)/2),k=S,B=2*S,R=new Array(B),W=new Array(B),w=0;w<B;w++)R[w]=-1,W[w]=-1;R[k+1]=0,W[k+1]=0;for(var X=G-V,E=X%2!=0,M=0,L=0,F=0,Y=0,N=0;N<S;N++){for(var x=-N+M;x<=N-L;x+=2){var H=k+x,K;x==-N||x!=N&&R[H-1]<R[H+1]?K=R[H+1]:K=R[H-1]+1;for(var T=K-x;K<G&&T<V&&y.charAt(K)==Z.charAt(T);)K++,T++;if(R[H]=K,K>G)L+=2;else if(T>V)M+=2;else if(E){var j=k+X-x;if(j>=0&&j<B&&W[j]!=-1){var J=G-W[j];if(K>=J)return u(y,Z,K,T)}}}for(var z=-N+F;z<=N-Y;z+=2){var j=k+z,J;z==-N||z!=N&&W[j-1]<W[j+1]?J=W[j+1]:J=W[j-1]+1;for(var U=J-z;J<G&&U<V&&y.charAt(G-J-1)==Z.charAt(V-U-1);)J++,U++;if(W[j]=J,J>G)Y+=2;else if(U>V)F+=2;else if(!E){var H=k+X-z;if(H>=0&&H<B&&R[H]!=-1){var K=R[H],T=k+K-H;if(J=G-J,K>=J)return u(y,Z,K,T)}}}}return[[r,y],[i,Z]]}function u(y,Z,G,V){var S=y.substring(0,G),k=Z.substring(0,V),B=y.substring(G),R=Z.substring(V),W=s(S,k),w=s(B,R);return W.concat(w)}function d(y,Z){if(!y||!Z||y.charAt(0)!=Z.charAt(0))return 0;for(var G=0,V=Math.min(y.length,Z.length),S=V,k=0;G<S;)y.substring(k,S)==Z.substring(k,S)?(G=S,k=G):V=S,S=Math.floor((V-G)/2+G);return S}function I(y,Z){if(!y||!Z||y.charAt(y.length-1)!=Z.charAt(Z.length-1))return 0;for(var G=0,V=Math.min(y.length,Z.length),S=V,k=0;G<S;)y.substring(y.length-S,y.length-k)==Z.substring(Z.length-S,Z.length-k)?(G=S,k=G):V=S,S=Math.floor((V-G)/2+G);return S}function C(y,Z){var G=y.length>Z.length?y:Z,V=y.length>Z.length?Z:y;if(G.length<4||V.length*2<G.length)return null;function S(L,F,Y){for(var N=L.substring(Y,Y+Math.floor(L.length/4)),x=-1,H="",K,T,j,J;(x=F.indexOf(N,x+1))!=-1;){var z=d(L.substring(Y),F.substring(x)),U=I(L.substring(0,Y),F.substring(0,x));H.length<U+z&&(H=F.substring(x-U,x)+F.substring(x,x+z),K=L.substring(0,Y-U),T=L.substring(Y+z),j=F.substring(0,x-U),J=F.substring(x+z))}return H.length*2>=L.length?[K,T,j,J,H]:null}var k=S(G,V,Math.ceil(G.length/4)),B=S(G,V,Math.ceil(G.length/2)),R;if(!k&&!B)return null;B?k?R=k[4].length>B[4].length?k:B:R=B:R=k;var W,w,X,E;y.length>Z.length?(W=R[0],w=R[1],X=R[2],E=R[3]):(X=R[0],E=R[1],W=R[2],w=R[3]);var M=R[4];return[W,w,X,E,M]}function f(y){y.push([l,""]);for(var Z=0,G=0,V=0,S="",k="",B;Z<y.length;)switch(y[Z][0]){case i:V++,k+=y[Z][1],Z++;break;case r:G++,S+=y[Z][1],Z++;break;case l:G+V>1?(G!==0&&V!==0&&(B=d(k,S),B!==0&&(Z-G-V>0&&y[Z-G-V-1][0]==l?y[Z-G-V-1][1]+=k.substring(0,B):(y.splice(0,0,[l,k.substring(0,B)]),Z++),k=k.substring(B),S=S.substring(B)),B=I(k,S),B!==0&&(y[Z][1]=k.substring(k.length-B)+y[Z][1],k=k.substring(0,k.length-B),S=S.substring(0,S.length-B))),G===0?y.splice(Z-V,G+V,[i,k]):V===0?y.splice(Z-G,G+V,[r,S]):y.splice(Z-G-V,G+V,[r,S],[i,k]),Z=Z-G-V+(G?1:0)+(V?1:0)+1):Z!==0&&y[Z-1][0]==l?(y[Z-1][1]+=y[Z][1],y.splice(Z,1)):Z++,V=0,G=0,S="",k="";break}y[y.length-1][1]===""&&y.pop();var R=!1;for(Z=1;Z<y.length-1;)y[Z-1][0]==l&&y[Z+1][0]==l&&(y[Z][1].substring(y[Z][1].length-y[Z-1][1].length)==y[Z-1][1]?(y[Z][1]=y[Z-1][1]+y[Z][1].substring(0,y[Z][1].length-y[Z-1][1].length),y[Z+1][1]=y[Z-1][1]+y[Z+1][1],y.splice(Z-1,1),R=!0):y[Z][1].substring(0,y[Z+1][1].length)==y[Z+1][1]&&(y[Z-1][1]+=y[Z+1][1],y[Z][1]=y[Z][1].substring(y[Z+1][1].length)+y[Z+1][1],y.splice(Z+1,1),R=!0)),Z++;R&&f(y)}var A=s;A.INSERT=i,A.DELETE=r,A.EQUAL=l,n.exports=A;function v(y,Z){if(Z===0)return[l,y];for(var G=0,V=0;V<y.length;V++){var S=y[V];if(S[0]===r||S[0]===l){var k=G+S[1].length;if(Z===k)return[V+1,y];if(Z<k){y=y.slice();var B=Z-G,R=[S[0],S[1].slice(0,B)],W=[S[0],S[1].slice(B)];return y.splice(V,1,R,W),[V+1,y]}else G=k}}throw new Error("cursor_pos is out of bounds!")}function h(y,Z){var G=v(y,Z),V=G[1],S=G[0],k=V[S],B=V[S+1];if(k==null)return y;if(k[0]!==l)return y;if(B!=null&&k[1]+B[1]===B[1]+k[1])return V.splice(S,2,B,k),b(V,S,2);if(B!=null&&B[1].indexOf(k[1])===0){V.splice(S,2,[B[0],k[1]],[0,k[1]]);var R=B[1].slice(k[1].length);return R.length>0&&V.splice(S+2,0,[B[0],R]),b(V,S,3)}else return y}function p(y){for(var Z=!1,G=function(B){return B.charCodeAt(0)>=56320&&B.charCodeAt(0)<=57343},V=function(B){return B.charCodeAt(B.length-1)>=55296&&B.charCodeAt(B.length-1)<=56319},S=2;S<y.length;S+=1)y[S-2][0]===l&&V(y[S-2][1])&&y[S-1][0]===r&&G(y[S-1][1])&&y[S][0]===i&&G(y[S][1])&&(Z=!0,y[S-1][1]=y[S-2][1].slice(-1)+y[S-1][1],y[S][1]=y[S-2][1].slice(-1)+y[S][1],y[S-2][1]=y[S-2][1].slice(0,-1));if(!Z)return y;for(var k=[],S=0;S<y.length;S+=1)y[S][1].length>0&&k.push(y[S]);return k}function b(y,Z,G){for(var V=Z+G-1;V>=0&&V>=Z-1;V--)if(V+1<y.length){var S=y[V],k=y[V+1];S[0]===k[1]&&y.splice(V,2,[S[0],S[1]+k[1]])}return y}},function(n,o){o=n.exports=typeof Object.keys=="function"?Object.keys:r,o.shim=r;function r(i){var l=[];for(var s in i)l.push(s);return l}},function(n,o){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";o=n.exports=r?i:l,o.supported=i;function i(s){return Object.prototype.toString.call(s)=="[object Arguments]"}o.unsupported=l;function l(s){return s&&typeof s=="object"&&typeof s.length=="number"&&Object.prototype.hasOwnProperty.call(s,"callee")&&!Object.prototype.propertyIsEnumerable.call(s,"callee")||!1}},function(n,o){var r=Object.prototype.hasOwnProperty,i="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(i=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(){this._events=new l,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,I;if(this._eventsCount===0)return u;for(I in d=this._events)r.call(d,I)&&u.push(i?I.slice(1):I);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u,d){var I=i?i+u:u,C=this._events[I];if(d)return!!C;if(!C)return[];if(C.fn)return[C.fn];for(var f=0,A=C.length,v=new Array(A);f<A;f++)v[f]=C[f].fn;return v},a.prototype.emit=function(u,d,I,C,f,A){var v=i?i+u:u;if(!this._events[v])return!1;var h=this._events[v],p=arguments.length,b,y;if(h.fn){switch(h.once&&this.removeListener(u,h.fn,void 0,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,d),!0;case 3:return h.fn.call(h.context,d,I),!0;case 4:return h.fn.call(h.context,d,I,C),!0;case 5:return h.fn.call(h.context,d,I,C,f),!0;case 6:return h.fn.call(h.context,d,I,C,f,A),!0}for(y=1,b=new Array(p-1);y<p;y++)b[y-1]=arguments[y];h.fn.apply(h.context,b)}else{var Z=h.length,G;for(y=0;y<Z;y++)switch(h[y].once&&this.removeListener(u,h[y].fn,void 0,!0),p){case 1:h[y].fn.call(h[y].context);break;case 2:h[y].fn.call(h[y].context,d);break;case 3:h[y].fn.call(h[y].context,d,I);break;case 4:h[y].fn.call(h[y].context,d,I,C);break;default:if(!b)for(G=1,b=new Array(p-1);G<p;G++)b[G-1]=arguments[G];h[y].fn.apply(h[y].context,b)}}return!0},a.prototype.on=function(u,d,I){var C=new s(d,I||this),f=i?i+u:u;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],C]:this._events[f].push(C):(this._events[f]=C,this._eventsCount++),this},a.prototype.once=function(u,d,I){var C=new s(d,I||this,!0),f=i?i+u:u;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],C]:this._events[f].push(C):(this._events[f]=C,this._eventsCount++),this},a.prototype.removeListener=function(u,d,I,C){var f=i?i+u:u;if(!this._events[f])return this;if(!d)return--this._eventsCount===0?this._events=new l:delete this._events[f],this;var A=this._events[f];if(A.fn)A.fn===d&&(!C||A.once)&&(!I||A.context===I)&&(--this._eventsCount===0?this._events=new l:delete this._events[f]);else{for(var v=0,h=[],p=A.length;v<p;v++)(A[v].fn!==d||C&&!A[v].once||I&&A[v].context!==I)&&h.push(A[v]);h.length?this._events[f]=h.length===1?h[0]:h:--this._eventsCount===0?this._events=new l:delete this._events[f]}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=i?i+u:u,this._events[d]&&(--this._eventsCount===0?this._events=new l:delete this._events[d])):(this._events=new l,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=i,a.EventEmitter=a,typeof n<"u"&&(n.exports=a)},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.matchText=o.matchSpacing=o.matchNewline=o.matchBlot=o.matchAttributor=o.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},l=function(){function q(_,$){var oe=[],Q=!0,ce=!1,le=void 0;try{for(var fe=_[Symbol.iterator](),Ae;!(Q=(Ae=fe.next()).done)&&(oe.push(Ae.value),!($&&oe.length===$));Q=!0);}catch(ie){ce=!0,le=ie}finally{try{!Q&&fe.return&&fe.return()}finally{if(ce)throw le}}return oe}return function(_,$){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return q(_,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function q(_,$){for(var oe=0;oe<$.length;oe++){var Q=$[oe];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(_,Q.key,Q)}}return function(_,$,oe){return $&&q(_.prototype,$),oe&&q(_,oe),_}}(),a=r(3),c=W(a),u=r(2),d=W(u),I=r(0),C=W(I),f=r(5),A=W(f),v=r(10),h=W(v),p=r(9),b=W(p),y=r(36),Z=r(37),G=r(13),V=W(G),S=r(26),k=r(38),B=r(39),R=r(40);function W(q){return q&&q.__esModule?q:{default:q}}function w(q,_,$){return _ in q?Object.defineProperty(q,_,{value:$,enumerable:!0,configurable:!0,writable:!0}):q[_]=$,q}function X(q,_){if(!(q instanceof _))throw new TypeError("Cannot call a class as a function")}function E(q,_){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:q}function M(q,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);q.prototype=Object.create(_&&_.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(q,_):q.__proto__=_)}var L=(0,h.default)("quill:clipboard"),F="__ql-matcher",Y=[[Node.TEXT_NODE,me],[Node.TEXT_NODE,ge],["br",ee],[Node.ELEMENT_NODE,ge],[Node.ELEMENT_NODE,O],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,ue],["li",ae],["b",U.bind(U,"bold")],["i",U.bind(U,"italic")],["style",re]],N=[y.AlignAttribute,k.DirectionAttribute].reduce(function(q,_){return q[_.keyName]=_,q},{}),x=[y.AlignStyle,Z.BackgroundStyle,S.ColorStyle,k.DirectionStyle,B.FontStyle,R.SizeStyle].reduce(function(q,_){return q[_.keyName]=_,q},{}),H=function(q){M(_,q);function _($,oe){X(this,_);var Q=E(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,$,oe));return Q.quill.root.addEventListener("paste",Q.onPaste.bind(Q)),Q.container=Q.quill.addContainer("ql-clipboard"),Q.container.setAttribute("contenteditable",!0),Q.container.setAttribute("tabindex",-1),Q.matchers=[],Y.concat(Q.options.matchers).forEach(function(ce){var le=l(ce,2),fe=le[0],Ae=le[1];!oe.matchVisual&&Ae===ne||Q.addMatcher(fe,Ae)}),Q}return s(_,[{key:"addMatcher",value:function(oe,Q){this.matchers.push([oe,Q])}},{key:"convert",value:function(oe){if(typeof oe=="string")return this.container.innerHTML=oe.replace(/\>\r?\n +\</g,"><"),this.convert();var Q=this.quill.getFormat(this.quill.selection.savedRange.index);if(Q[V.default.blotName]){var ce=this.container.innerText;return this.container.innerHTML="",new d.default().insert(ce,w({},V.default.blotName,Q[V.default.blotName]))}var le=this.prepareMatching(),fe=l(le,2),Ae=fe[0],ie=fe[1],pe=z(this.container,Ae,ie);return j(pe,`
`)&&pe.ops[pe.ops.length-1].attributes==null&&(pe=pe.compose(new d.default().retain(pe.length()-1).delete(1))),L.log("convert",this.container.innerHTML,pe),this.container.innerHTML="",pe}},{key:"dangerouslyPasteHTML",value:function(oe,Q){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A.default.sources.API;if(typeof oe=="string")this.quill.setContents(this.convert(oe),Q),this.quill.setSelection(0,A.default.sources.SILENT);else{var le=this.convert(Q);this.quill.updateContents(new d.default().retain(oe).concat(le),ce),this.quill.setSelection(oe+le.length(),A.default.sources.SILENT)}}},{key:"onPaste",value:function(oe){var Q=this;if(!(oe.defaultPrevented||!this.quill.isEnabled())){var ce=this.quill.getSelection(),le=new d.default().retain(ce.index),fe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(A.default.sources.SILENT),setTimeout(function(){le=le.concat(Q.convert()).delete(ce.length),Q.quill.updateContents(le,A.default.sources.USER),Q.quill.setSelection(le.length()-ce.length,A.default.sources.SILENT),Q.quill.scrollingContainer.scrollTop=fe,Q.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var oe=this,Q=[],ce=[];return this.matchers.forEach(function(le){var fe=l(le,2),Ae=fe[0],ie=fe[1];switch(Ae){case Node.TEXT_NODE:ce.push(ie);break;case Node.ELEMENT_NODE:Q.push(ie);break;default:[].forEach.call(oe.container.querySelectorAll(Ae),function(pe){pe[F]=pe[F]||[],pe[F].push(ie)});break}}),[Q,ce]}}]),_}(b.default);H.DEFAULTS={matchers:[],matchVisual:!0};function K(q,_,$){return(typeof _>"u"?"undefined":i(_))==="object"?Object.keys(_).reduce(function(oe,Q){return K(oe,Q,_[Q])},q):q.reduce(function(oe,Q){return Q.attributes&&Q.attributes[_]?oe.push(Q):oe.insert(Q.insert,(0,c.default)({},w({},_,$),Q.attributes))},new d.default)}function T(q){if(q.nodeType!==Node.ELEMENT_NODE)return{};var _="__ql-computed-style";return q[_]||(q[_]=window.getComputedStyle(q))}function j(q,_){for(var $="",oe=q.ops.length-1;oe>=0&&$.length<_.length;--oe){var Q=q.ops[oe];if(typeof Q.insert!="string")break;$=Q.insert+$}return $.slice(-1*_.length)===_}function J(q){if(q.childNodes.length===0)return!1;var _=T(q);return["block","list-item"].indexOf(_.display)>-1}function z(q,_,$){return q.nodeType===q.TEXT_NODE?$.reduce(function(oe,Q){return Q(q,oe)},new d.default):q.nodeType===q.ELEMENT_NODE?[].reduce.call(q.childNodes||[],function(oe,Q){var ce=z(Q,_,$);return Q.nodeType===q.ELEMENT_NODE&&(ce=_.reduce(function(le,fe){return fe(Q,le)},ce),ce=(Q[F]||[]).reduce(function(le,fe){return fe(Q,le)},ce)),oe.concat(ce)},new d.default):new d.default}function U(q,_,$){return K($,q,!0)}function D(q,_){var $=C.default.Attributor.Attribute.keys(q),oe=C.default.Attributor.Class.keys(q),Q=C.default.Attributor.Style.keys(q),ce={};return $.concat(oe).concat(Q).forEach(function(le){var fe=C.default.query(le,C.default.Scope.ATTRIBUTE);fe!=null&&(ce[fe.attrName]=fe.value(q),ce[fe.attrName])||(fe=N[le],fe!=null&&(fe.attrName===le||fe.keyName===le)&&(ce[fe.attrName]=fe.value(q)||void 0),fe=x[le],fe!=null&&(fe.attrName===le||fe.keyName===le)&&(fe=x[le],ce[fe.attrName]=fe.value(q)||void 0))}),Object.keys(ce).length>0&&(_=K(_,ce)),_}function O(q,_){var $=C.default.query(q);if($==null)return _;if($.prototype instanceof C.default.Embed){var oe={},Q=$.value(q);Q!=null&&(oe[$.blotName]=Q,_=new d.default().insert(oe,$.formats(q)))}else typeof $.formats=="function"&&(_=K(_,$.blotName,$.formats(q)));return _}function ee(q,_){return j(_,`
`)||_.insert(`
`),_}function re(){return new d.default}function ae(q,_){var $=C.default.query(q);if($==null||$.blotName!=="list-item"||!j(_,`
`))return _;for(var oe=-1,Q=q.parentNode;!Q.classList.contains("ql-clipboard");)(C.default.query(Q)||{}).blotName==="list"&&(oe+=1),Q=Q.parentNode;return oe<=0?_:_.compose(new d.default().retain(_.length()-1).retain(1,{indent:oe}))}function ge(q,_){return j(_,`
`)||(J(q)||_.length()>0&&q.nextSibling&&J(q.nextSibling))&&_.insert(`
`),_}function ne(q,_){if(J(q)&&q.nextElementSibling!=null&&!j(_,`

`)){var $=q.offsetHeight+parseFloat(T(q).marginTop)+parseFloat(T(q).marginBottom);q.nextElementSibling.offsetTop>q.offsetTop+$*1.5&&_.insert(`
`)}return _}function ue(q,_){var $={},oe=q.style||{};return oe.fontStyle&&T(q).fontStyle==="italic"&&($.italic=!0),oe.fontWeight&&(T(q).fontWeight.startsWith("bold")||parseInt(T(q).fontWeight)>=700)&&($.bold=!0),Object.keys($).length>0&&(_=K(_,$)),parseFloat(oe.textIndent||0)>0&&(_=new d.default().insert("	").concat(_)),_}function me(q,_){var $=q.data;if(q.parentNode.tagName==="O:P")return _.insert($.trim());if($.trim().length===0&&q.parentNode.classList.contains("ql-clipboard"))return _;if(!T(q.parentNode).whiteSpace.startsWith("pre")){var oe=function(ce,le){return le=le.replace(/[^\u00a0]/g,""),le.length<1&&ce?" ":le};$=$.replace(/\r\n/g," ").replace(/\n/g," "),$=$.replace(/\s\s+/g,oe.bind(oe,!0)),(q.previousSibling==null&&J(q.parentNode)||q.previousSibling!=null&&J(q.previousSibling))&&($=$.replace(/^\s+/,oe.bind(oe,!1))),(q.nextSibling==null&&J(q.parentNode)||q.nextSibling!=null&&J(q.nextSibling))&&($=$.replace(/\s+$/,oe.bind(oe,!1)))}return _.insert($)}o.default=H,o.matchAttributor=D,o.matchBlot=O,o.matchNewline=ge,o.matchSpacing=ne,o.matchText=me},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function f(A,v){for(var h=0;h<v.length;h++){var p=v[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(A,p.key,p)}}return function(A,v,h){return v&&f(A.prototype,v),h&&f(A,h),A}}(),l=function f(A,v,h){A===null&&(A=Function.prototype);var p=Object.getOwnPropertyDescriptor(A,v);if(p===void 0){var b=Object.getPrototypeOf(A);return b===null?void 0:f(b,v,h)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(h)}},s=r(6),a=c(s);function c(f){return f&&f.__esModule?f:{default:f}}function u(f,A){if(!(f instanceof A))throw new TypeError("Cannot call a class as a function")}function d(f,A){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:f}function I(f,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);f.prototype=Object.create(A&&A.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(f,A):f.__proto__=A)}var C=function(f){I(A,f);function A(){return u(this,A),d(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return i(A,[{key:"optimize",value:function(h){l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,h),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),A}(a.default);C.blotName="bold",C.tagName=["STRONG","B"],o.default=C},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.addControls=o.default=void 0;var i=function(){function R(W,w){var X=[],E=!0,M=!1,L=void 0;try{for(var F=W[Symbol.iterator](),Y;!(E=(Y=F.next()).done)&&(X.push(Y.value),!(w&&X.length===w));E=!0);}catch(N){M=!0,L=N}finally{try{!E&&F.return&&F.return()}finally{if(M)throw L}}return X}return function(W,w){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return R(W,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function R(W,w){for(var X=0;X<w.length;X++){var E=w[X];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(W,E.key,E)}}return function(W,w,X){return w&&R(W.prototype,w),X&&R(W,X),W}}(),s=r(2),a=h(s),c=r(0),u=h(c),d=r(5),I=h(d),C=r(10),f=h(C),A=r(9),v=h(A);function h(R){return R&&R.__esModule?R:{default:R}}function p(R,W,w){return W in R?Object.defineProperty(R,W,{value:w,enumerable:!0,configurable:!0,writable:!0}):R[W]=w,R}function b(R,W){if(!(R instanceof W))throw new TypeError("Cannot call a class as a function")}function y(R,W){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:R}function Z(R,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);R.prototype=Object.create(W&&W.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(R,W):R.__proto__=W)}var G=(0,f.default)("quill:toolbar"),V=function(R){Z(W,R);function W(w,X){b(this,W);var E=y(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,w,X));if(Array.isArray(E.options.container)){var M=document.createElement("div");k(M,E.options.container),w.container.parentNode.insertBefore(M,w.container),E.container=M}else typeof E.options.container=="string"?E.container=document.querySelector(E.options.container):E.container=E.options.container;if(!(E.container instanceof HTMLElement)){var L;return L=G.error("Container required for toolbar",E.options),y(E,L)}return E.container.classList.add("ql-toolbar"),E.controls=[],E.handlers={},Object.keys(E.options.handlers).forEach(function(F){E.addHandler(F,E.options.handlers[F])}),[].forEach.call(E.container.querySelectorAll("button, select"),function(F){E.attach(F)}),E.quill.on(I.default.events.EDITOR_CHANGE,function(F,Y){F===I.default.events.SELECTION_CHANGE&&E.update(Y)}),E.quill.on(I.default.events.SCROLL_OPTIMIZE,function(){var F=E.quill.selection.getRange(),Y=i(F,1),N=Y[0];E.update(N)}),E}return l(W,[{key:"addHandler",value:function(X,E){this.handlers[X]=E}},{key:"attach",value:function(X){var E=this,M=[].find.call(X.classList,function(F){return F.indexOf("ql-")===0});if(M){if(M=M.slice(3),X.tagName==="BUTTON"&&X.setAttribute("type","button"),this.handlers[M]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[M]==null){G.warn("ignoring attaching to disabled format",M,X);return}if(u.default.query(M)==null){G.warn("ignoring attaching to nonexistent format",M,X);return}}var L=X.tagName==="SELECT"?"change":"click";X.addEventListener(L,function(F){var Y=void 0;if(X.tagName==="SELECT"){if(X.selectedIndex<0)return;var N=X.options[X.selectedIndex];N.hasAttribute("selected")?Y=!1:Y=N.value||!1}else X.classList.contains("ql-active")?Y=!1:Y=X.value||!X.hasAttribute("value"),F.preventDefault();E.quill.focus();var x=E.quill.selection.getRange(),H=i(x,1),K=H[0];if(E.handlers[M]!=null)E.handlers[M].call(E,Y);else if(u.default.query(M).prototype instanceof u.default.Embed){if(Y=prompt("Enter "+M),!Y)return;E.quill.updateContents(new a.default().retain(K.index).delete(K.length).insert(p({},M,Y)),I.default.sources.USER)}else E.quill.format(M,Y,I.default.sources.USER);E.update(K)}),this.controls.push([M,X])}}},{key:"update",value:function(X){var E=X==null?{}:this.quill.getFormat(X);this.controls.forEach(function(M){var L=i(M,2),F=L[0],Y=L[1];if(Y.tagName==="SELECT"){var N=void 0;if(X==null)N=null;else if(E[F]==null)N=Y.querySelector("option[selected]");else if(!Array.isArray(E[F])){var x=E[F];typeof x=="string"&&(x=x.replace(/\"/g,'\\"')),N=Y.querySelector('option[value="'+x+'"]')}N==null?(Y.value="",Y.selectedIndex=-1):N.selected=!0}else if(X==null)Y.classList.remove("ql-active");else if(Y.hasAttribute("value")){var H=E[F]===Y.getAttribute("value")||E[F]!=null&&E[F].toString()===Y.getAttribute("value")||E[F]==null&&!Y.getAttribute("value");Y.classList.toggle("ql-active",H)}else Y.classList.toggle("ql-active",E[F]!=null)})}}]),W}(v.default);V.DEFAULTS={};function S(R,W,w){var X=document.createElement("button");X.setAttribute("type","button"),X.classList.add("ql-"+W),w!=null&&(X.value=w),R.appendChild(X)}function k(R,W){Array.isArray(W[0])||(W=[W]),W.forEach(function(w){var X=document.createElement("span");X.classList.add("ql-formats"),w.forEach(function(E){if(typeof E=="string")S(X,E);else{var M=Object.keys(E)[0],L=E[M];Array.isArray(L)?B(X,M,L):S(X,M,L)}}),R.appendChild(X)})}function B(R,W,w){var X=document.createElement("select");X.classList.add("ql-"+W),w.forEach(function(E){var M=document.createElement("option");E!==!1?M.setAttribute("value",E):M.setAttribute("selected","selected"),X.appendChild(M)}),R.appendChild(X)}V.DEFAULTS={container:null,handlers:{clean:function(){var W=this,w=this.quill.getSelection();if(w!=null)if(w.length==0){var X=this.quill.getFormat();Object.keys(X).forEach(function(E){u.default.query(E,u.default.Scope.INLINE)!=null&&W.quill.format(E,!1)})}else this.quill.removeFormat(w,I.default.sources.USER)},direction:function(W){var w=this.quill.getFormat().align;W==="rtl"&&w==null?this.quill.format("align","right",I.default.sources.USER):!W&&w==="right"&&this.quill.format("align",!1,I.default.sources.USER),this.quill.format("direction",W,I.default.sources.USER)},indent:function(W){var w=this.quill.getSelection(),X=this.quill.getFormat(w),E=parseInt(X.indent||0);if(W==="+1"||W==="-1"){var M=W==="+1"?1:-1;X.direction==="rtl"&&(M*=-1),this.quill.format("indent",E+M,I.default.sources.USER)}},link:function(W){W===!0&&(W=prompt("Enter link URL:")),this.quill.format("link",W,I.default.sources.USER)},list:function(W){var w=this.quill.getSelection(),X=this.quill.getFormat(w);W==="check"?X.list==="checked"||X.list==="unchecked"?this.quill.format("list",!1,I.default.sources.USER):this.quill.format("list","unchecked",I.default.sources.USER):this.quill.format("list",W,I.default.sources.USER)}}},o.default=V,o.addControls=k},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function f(A,v){for(var h=0;h<v.length;h++){var p=v[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(A,p.key,p)}}return function(A,v,h){return v&&f(A.prototype,v),h&&f(A,h),A}}(),l=function f(A,v,h){A===null&&(A=Function.prototype);var p=Object.getOwnPropertyDescriptor(A,v);if(p===void 0){var b=Object.getPrototypeOf(A);return b===null?void 0:f(b,v,h)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(h)}},s=r(28),a=c(s);function c(f){return f&&f.__esModule?f:{default:f}}function u(f,A){if(!(f instanceof A))throw new TypeError("Cannot call a class as a function")}function d(f,A){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:f}function I(f,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);f.prototype=Object.create(A&&A.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(f,A):f.__proto__=A)}var C=function(f){I(A,f);function A(v,h){u(this,A);var p=d(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,v));return p.label.innerHTML=h,p.container.classList.add("ql-color-picker"),[].slice.call(p.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(b){b.classList.add("ql-primary")}),p}return i(A,[{key:"buildItem",value:function(h){var p=l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"buildItem",this).call(this,h);return p.style.backgroundColor=h.getAttribute("value")||"",p}},{key:"selectItem",value:function(h,p){l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"selectItem",this).call(this,h,p);var b=this.label.querySelector(".ql-color-label"),y=h&&h.getAttribute("data-value")||"";b&&(b.tagName==="line"?b.style.stroke=y:b.style.fill=y)}}]),A}(a.default);o.default=C},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function f(A,v){for(var h=0;h<v.length;h++){var p=v[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(A,p.key,p)}}return function(A,v,h){return v&&f(A.prototype,v),h&&f(A,h),A}}(),l=function f(A,v,h){A===null&&(A=Function.prototype);var p=Object.getOwnPropertyDescriptor(A,v);if(p===void 0){var b=Object.getPrototypeOf(A);return b===null?void 0:f(b,v,h)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(h)}},s=r(28),a=c(s);function c(f){return f&&f.__esModule?f:{default:f}}function u(f,A){if(!(f instanceof A))throw new TypeError("Cannot call a class as a function")}function d(f,A){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:f}function I(f,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);f.prototype=Object.create(A&&A.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(f,A):f.__proto__=A)}var C=function(f){I(A,f);function A(v,h){u(this,A);var p=d(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,v));return p.container.classList.add("ql-icon-picker"),[].forEach.call(p.container.querySelectorAll(".ql-picker-item"),function(b){b.innerHTML=h[b.getAttribute("data-value")||""]}),p.defaultItem=p.container.querySelector(".ql-selected"),p.selectItem(p.defaultItem),p}return i(A,[{key:"selectItem",value:function(h,p){l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"selectItem",this).call(this,h,p),h=h||this.defaultItem,this.label.innerHTML=h.innerHTML}}]),A}(a.default);o.default=C},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function a(c,u){for(var d=0;d<u.length;d++){var I=u[d];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(c,I.key,I)}}return function(c,u,d){return u&&a(c.prototype,u),d&&a(c,d),c}}();function l(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function(){function a(c,u){var d=this;l(this,a),this.quill=c,this.boundsContainer=u||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return i(a,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(u){var d=u.left+u.width/2-this.root.offsetWidth/2,I=u.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=I+"px",this.root.classList.remove("ql-flip");var C=this.boundsContainer.getBoundingClientRect(),f=this.root.getBoundingClientRect(),A=0;if(f.right>C.right&&(A=C.right-f.right,this.root.style.left=d+A+"px"),f.left<C.left&&(A=C.left-f.left,this.root.style.left=d+A+"px"),f.bottom>C.bottom){var v=f.bottom-f.top,h=u.bottom-u.top+v;this.root.style.top=I-h+"px",this.root.classList.add("ql-flip")}return A}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),a}();o.default=s},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function B(R,W){var w=[],X=!0,E=!1,M=void 0;try{for(var L=R[Symbol.iterator](),F;!(X=(F=L.next()).done)&&(w.push(F.value),!(W&&w.length===W));X=!0);}catch(Y){E=!0,M=Y}finally{try{!X&&L.return&&L.return()}finally{if(E)throw M}}return w}return function(R,W){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return B(R,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function B(R,W,w){R===null&&(R=Function.prototype);var X=Object.getOwnPropertyDescriptor(R,W);if(X===void 0){var E=Object.getPrototypeOf(R);return E===null?void 0:B(E,W,w)}else{if("value"in X)return X.value;var M=X.get;return M===void 0?void 0:M.call(w)}},s=function(){function B(R,W){for(var w=0;w<W.length;w++){var X=W[w];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(R,X.key,X)}}return function(R,W,w){return W&&B(R.prototype,W),w&&B(R,w),R}}(),a=r(3),c=b(a),u=r(8),d=b(u),I=r(43),C=b(I),f=r(27),A=b(f),v=r(15),h=r(41),p=b(h);function b(B){return B&&B.__esModule?B:{default:B}}function y(B,R){if(!(B instanceof R))throw new TypeError("Cannot call a class as a function")}function Z(B,R){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:B}function G(B,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);B.prototype=Object.create(R&&R.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(B,R):B.__proto__=R)}var V=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(B){G(R,B);function R(W,w){y(this,R),w.modules.toolbar!=null&&w.modules.toolbar.container==null&&(w.modules.toolbar.container=V);var X=Z(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,W,w));return X.quill.container.classList.add("ql-snow"),X}return s(R,[{key:"extendToolbar",value:function(w){w.container.classList.add("ql-snow"),this.buildButtons([].slice.call(w.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(w.container.querySelectorAll("select")),p.default),this.tooltip=new k(this.quill,this.options.bounds),w.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(X,E){w.handlers.link.call(w,!E.format.link)})}}]),R}(C.default);S.DEFAULTS=(0,c.default)(!0,{},C.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){if(R){var W=this.quill.getSelection();if(W==null||W.length==0)return;var w=this.quill.getText(W);/^\S+@\S+\.\S+$/.test(w)&&w.indexOf("mailto:")!==0&&(w="mailto:"+w);var X=this.quill.theme.tooltip;X.edit("link",w)}else this.quill.format("link",!1)}}}}});var k=function(B){G(R,B);function R(W,w){y(this,R);var X=Z(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,W,w));return X.preview=X.root.querySelector("a.ql-preview"),X}return s(R,[{key:"listen",value:function(){var w=this;l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(X){w.root.classList.contains("ql-editing")?w.save():w.edit("link",w.preview.textContent),X.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(X){if(w.linkRange!=null){var E=w.linkRange;w.restoreFocus(),w.quill.formatText(E,"link",!1,d.default.sources.USER),delete w.linkRange}X.preventDefault(),w.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(X,E,M){if(X!=null){if(X.length===0&&M===d.default.sources.USER){var L=w.quill.scroll.descendant(A.default,X.index),F=i(L,2),Y=F[0],N=F[1];if(Y!=null){w.linkRange=new v.Range(X.index-N,Y.length());var x=A.default.formats(Y.domNode);w.preview.textContent=x,w.preview.setAttribute("href",x),w.show(),w.position(w.quill.getBounds(w.linkRange));return}}else delete w.linkRange;w.hide()}})}},{key:"show",value:function(){l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),R}(I.BaseTooltip);k.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),o.default=S},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(29),l=Q(i),s=r(36),a=r(38),c=r(64),u=r(65),d=Q(u),I=r(66),C=Q(I),f=r(67),A=Q(f),v=r(37),h=r(26),p=r(39),b=r(40),y=r(56),Z=Q(y),G=r(68),V=Q(G),S=r(27),k=Q(S),B=r(69),R=Q(B),W=r(70),w=Q(W),X=r(71),E=Q(X),M=r(72),L=Q(M),F=r(73),Y=Q(F),N=r(13),x=Q(N),H=r(74),K=Q(H),T=r(75),j=Q(T),J=r(57),z=Q(J),U=r(41),D=Q(U),O=r(28),ee=Q(O),re=r(59),ae=Q(re),ge=r(60),ne=Q(ge),ue=r(61),me=Q(ue),q=r(108),_=Q(q),$=r(62),oe=Q($);function Q(ce){return ce&&ce.__esModule?ce:{default:ce}}l.default.register({"attributors/attribute/direction":a.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":h.ColorClass,"attributors/class/direction":a.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":b.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":h.ColorStyle,"attributors/style/direction":a.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":b.SizeStyle},!0),l.default.register({"formats/align":s.AlignClass,"formats/direction":a.DirectionClass,"formats/indent":c.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":h.ColorStyle,"formats/font":p.FontClass,"formats/size":b.SizeClass,"formats/blockquote":d.default,"formats/code-block":x.default,"formats/header":C.default,"formats/list":A.default,"formats/bold":Z.default,"formats/code":N.Code,"formats/italic":V.default,"formats/link":k.default,"formats/script":R.default,"formats/strike":w.default,"formats/underline":E.default,"formats/image":L.default,"formats/video":Y.default,"formats/list/item":f.ListItem,"modules/formula":K.default,"modules/syntax":j.default,"modules/toolbar":z.default,"themes/bubble":_.default,"themes/snow":oe.default,"ui/icons":D.default,"ui/picker":ee.default,"ui/icon-picker":ne.default,"ui/color-picker":ae.default,"ui/tooltip":me.default},!0),o.default=l.default},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.IndentClass=void 0;var i=function(){function A(v,h){for(var p=0;p<h.length;p++){var b=h[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,h,p){return h&&A(v.prototype,h),p&&A(v,p),v}}(),l=function A(v,h,p){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,h);if(b===void 0){var y=Object.getPrototypeOf(v);return y===null?void 0:A(y,h,p)}else{if("value"in b)return b.value;var Z=b.get;return Z===void 0?void 0:Z.call(p)}},s=r(0),a=c(s);function c(A){return A&&A.__esModule?A:{default:A}}function u(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")}function d(A,v){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:A}function I(A,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);A.prototype=Object.create(v&&v.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(A,v):A.__proto__=v)}var C=function(A){I(v,A);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"add",value:function(p,b){if(b==="+1"||b==="-1"){var y=this.value(p)||0;b=b==="+1"?y+1:y-1}return b===0?(this.remove(p),!0):l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"add",this).call(this,p,b)}},{key:"canAdd",value:function(p,b){return l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,p,b)||l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,p,parseInt(b))}},{key:"value",value:function(p){return parseInt(l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,p))||void 0}}]),v}(a.default.Attributor.Class),f=new C("indent","ql-indent",{scope:a.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});o.IndentClass=f},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(4),l=s(i);function s(I){return I&&I.__esModule?I:{default:I}}function a(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function c(I,C){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:I}function u(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(I,C):I.__proto__=C)}var d=function(I){u(C,I);function C(){return a(this,C),c(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(l.default);d.blotName="blockquote",d.tagName="blockquote",o.default=d},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function C(f,A){for(var v=0;v<A.length;v++){var h=A[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,A,v){return A&&C(f.prototype,A),v&&C(f,v),f}}(),l=r(4),s=a(l);function a(C){return C&&C.__esModule?C:{default:C}}function c(C,f){if(!(C instanceof f))throw new TypeError("Cannot call a class as a function")}function u(C,f){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:C}function d(C,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);C.prototype=Object.create(f&&f.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(C,f):C.__proto__=f)}var I=function(C){d(f,C);function f(){return c(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return i(f,null,[{key:"formats",value:function(v){return this.tagName.indexOf(v.tagName)+1}}]),f}(s.default);I.blotName="header",I.tagName=["H1","H2","H3","H4","H5","H6"],o.default=I},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.ListItem=void 0;var i=function(){function y(Z,G){for(var V=0;V<G.length;V++){var S=G[V];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(Z,S.key,S)}}return function(Z,G,V){return G&&y(Z.prototype,G),V&&y(Z,V),Z}}(),l=function y(Z,G,V){Z===null&&(Z=Function.prototype);var S=Object.getOwnPropertyDescriptor(Z,G);if(S===void 0){var k=Object.getPrototypeOf(Z);return k===null?void 0:y(k,G,V)}else{if("value"in S)return S.value;var B=S.get;return B===void 0?void 0:B.call(V)}},s=r(0),a=C(s),c=r(4),u=C(c),d=r(25),I=C(d);function C(y){return y&&y.__esModule?y:{default:y}}function f(y,Z,G){return Z in y?Object.defineProperty(y,Z,{value:G,enumerable:!0,configurable:!0,writable:!0}):y[Z]=G,y}function A(y,Z){if(!(y instanceof Z))throw new TypeError("Cannot call a class as a function")}function v(y,Z){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:y}function h(y,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);y.prototype=Object.create(Z&&Z.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(y,Z):y.__proto__=Z)}var p=function(y){h(Z,y);function Z(){return A(this,Z),v(this,(Z.__proto__||Object.getPrototypeOf(Z)).apply(this,arguments))}return i(Z,[{key:"format",value:function(V,S){V===b.blotName&&!S?this.replaceWith(a.default.create(this.statics.scope)):l(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"format",this).call(this,V,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():l(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(V,S){return this.parent.isolate(this.offset(this.parent),this.length()),V===this.parent.statics.blotName?(this.parent.replaceWith(V,S),this):(this.parent.unwrap(),l(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"replaceWith",this).call(this,V,S))}}],[{key:"formats",value:function(V){return V.tagName===this.tagName?void 0:l(Z.__proto__||Object.getPrototypeOf(Z),"formats",this).call(this,V)}}]),Z}(u.default);p.blotName="list-item",p.tagName="LI";var b=function(y){h(Z,y),i(Z,null,[{key:"create",value:function(V){var S=V==="ordered"?"OL":"UL",k=l(Z.__proto__||Object.getPrototypeOf(Z),"create",this).call(this,S);return(V==="checked"||V==="unchecked")&&k.setAttribute("data-checked",V==="checked"),k}},{key:"formats",value:function(V){if(V.tagName==="OL")return"ordered";if(V.tagName==="UL")return V.hasAttribute("data-checked")?V.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function Z(G){A(this,Z);var V=v(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,G)),S=function(B){if(B.target.parentNode===G){var R=V.statics.formats(G),W=a.default.find(B.target);R==="checked"?W.format("list","unchecked"):R==="unchecked"&&W.format("list","checked")}};return G.addEventListener("touchstart",S),G.addEventListener("mousedown",S),V}return i(Z,[{key:"format",value:function(V,S){this.children.length>0&&this.children.tail.format(V,S)}},{key:"formats",value:function(){return f({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(V,S){if(V instanceof p)l(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"insertBefore",this).call(this,V,S);else{var k=S==null?this.length():S.offset(this),B=this.split(k);B.parent.insertBefore(V,B)}}},{key:"optimize",value:function(V){l(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"optimize",this).call(this,V);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(V){if(V.statics.blotName!==this.statics.blotName){var S=a.default.create(this.statics.defaultChild);V.moveChildren(S),this.appendChild(S)}l(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"replace",this).call(this,V)}}]),Z}(I.default);b.blotName="list",b.scope=a.default.Scope.BLOCK_BLOT,b.tagName=["OL","UL"],b.defaultChild="list-item",b.allowedChildren=[p],o.ListItem=p,o.default=b},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(56),l=s(i);function s(I){return I&&I.__esModule?I:{default:I}}function a(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function c(I,C){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:I}function u(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(I,C):I.__proto__=C)}var d=function(I){u(C,I);function C(){return a(this,C),c(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(l.default);d.blotName="italic",d.tagName=["EM","I"],o.default=d},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function f(A,v){for(var h=0;h<v.length;h++){var p=v[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(A,p.key,p)}}return function(A,v,h){return v&&f(A.prototype,v),h&&f(A,h),A}}(),l=function f(A,v,h){A===null&&(A=Function.prototype);var p=Object.getOwnPropertyDescriptor(A,v);if(p===void 0){var b=Object.getPrototypeOf(A);return b===null?void 0:f(b,v,h)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(h)}},s=r(6),a=c(s);function c(f){return f&&f.__esModule?f:{default:f}}function u(f,A){if(!(f instanceof A))throw new TypeError("Cannot call a class as a function")}function d(f,A){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:f}function I(f,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);f.prototype=Object.create(A&&A.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(f,A):f.__proto__=A)}var C=function(f){I(A,f);function A(){return u(this,A),d(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return i(A,null,[{key:"create",value:function(h){return h==="super"?document.createElement("sup"):h==="sub"?document.createElement("sub"):l(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,h)}},{key:"formats",value:function(h){if(h.tagName==="SUB")return"sub";if(h.tagName==="SUP")return"super"}}]),A}(a.default);C.blotName="script",C.tagName=["SUB","SUP"],o.default=C},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(6),l=s(i);function s(I){return I&&I.__esModule?I:{default:I}}function a(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function c(I,C){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:I}function u(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(I,C):I.__proto__=C)}var d=function(I){u(C,I);function C(){return a(this,C),c(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(l.default);d.blotName="strike",d.tagName="S",o.default=d},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=r(6),l=s(i);function s(I){return I&&I.__esModule?I:{default:I}}function a(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function c(I,C){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:I}function u(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(I,C):I.__proto__=C)}var d=function(I){u(C,I);function C(){return a(this,C),c(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(l.default);d.blotName="underline",d.tagName="U",o.default=d},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function v(h,p){for(var b=0;b<p.length;b++){var y=p[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,p,b){return p&&v(h.prototype,p),b&&v(h,b),h}}(),l=function v(h,p,b){h===null&&(h=Function.prototype);var y=Object.getOwnPropertyDescriptor(h,p);if(y===void 0){var Z=Object.getPrototypeOf(h);return Z===null?void 0:v(Z,p,b)}else{if("value"in y)return y.value;var G=y.get;return G===void 0?void 0:G.call(b)}},s=r(0),a=u(s),c=r(27);function u(v){return v&&v.__esModule?v:{default:v}}function d(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function I(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function C(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var f=["alt","height","width"],A=function(v){C(h,v);function h(){return d(this,h),I(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return i(h,[{key:"format",value:function(b,y){f.indexOf(b)>-1?y?this.domNode.setAttribute(b,y):this.domNode.removeAttribute(b):l(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,b,y)}}],[{key:"create",value:function(b){var y=l(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,b);return typeof b=="string"&&y.setAttribute("src",this.sanitize(b)),y}},{key:"formats",value:function(b){return f.reduce(function(y,Z){return b.hasAttribute(Z)&&(y[Z]=b.getAttribute(Z)),y},{})}},{key:"match",value:function(b){return/\.(jpe?g|gif|png)$/.test(b)||/^data:image\/.+;base64/.test(b)}},{key:"sanitize",value:function(b){return(0,c.sanitize)(b,["http","https","data"])?b:"//:0"}},{key:"value",value:function(b){return b.getAttribute("src")}}]),h}(a.default.Embed);A.blotName="image",A.tagName="IMG",o.default=A},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function v(h,p){for(var b=0;b<p.length;b++){var y=p[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,p,b){return p&&v(h.prototype,p),b&&v(h,b),h}}(),l=function v(h,p,b){h===null&&(h=Function.prototype);var y=Object.getOwnPropertyDescriptor(h,p);if(y===void 0){var Z=Object.getPrototypeOf(h);return Z===null?void 0:v(Z,p,b)}else{if("value"in y)return y.value;var G=y.get;return G===void 0?void 0:G.call(b)}},s=r(4),a=r(27),c=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function d(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function I(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function C(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var f=["height","width"],A=function(v){C(h,v);function h(){return d(this,h),I(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return i(h,[{key:"format",value:function(b,y){f.indexOf(b)>-1?y?this.domNode.setAttribute(b,y):this.domNode.removeAttribute(b):l(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,b,y)}}],[{key:"create",value:function(b){var y=l(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,b);return y.setAttribute("frameborder","0"),y.setAttribute("allowfullscreen",!0),y.setAttribute("src",this.sanitize(b)),y}},{key:"formats",value:function(b){return f.reduce(function(y,Z){return b.hasAttribute(Z)&&(y[Z]=b.getAttribute(Z)),y},{})}},{key:"sanitize",value:function(b){return c.default.sanitize(b)}},{key:"value",value:function(b){return b.getAttribute("src")}}]),h}(s.BlockEmbed);A.blotName="video",A.className="ql-video",A.tagName="IFRAME",o.default=A},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.FormulaBlot=void 0;var i=function(){function b(y,Z){for(var G=0;G<Z.length;G++){var V=Z[G];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(y,V.key,V)}}return function(y,Z,G){return Z&&b(y.prototype,Z),G&&b(y,G),y}}(),l=function b(y,Z,G){y===null&&(y=Function.prototype);var V=Object.getOwnPropertyDescriptor(y,Z);if(V===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:b(S,Z,G)}else{if("value"in V)return V.value;var k=V.get;return k===void 0?void 0:k.call(G)}},s=r(35),a=C(s),c=r(5),u=C(c),d=r(9),I=C(d);function C(b){return b&&b.__esModule?b:{default:b}}function f(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function A(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function v(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var h=function(b){v(y,b);function y(){return f(this,y),A(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,null,[{key:"create",value:function(G){var V=l(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,G);return typeof G=="string"&&(window.katex.render(G,V,{throwOnError:!1,errorColor:"#f00"}),V.setAttribute("data-value",G)),V}},{key:"value",value:function(G){return G.getAttribute("data-value")}}]),y}(a.default);h.blotName="formula",h.className="ql-formula",h.tagName="SPAN";var p=function(b){v(y,b),i(y,null,[{key:"register",value:function(){u.default.register(h,!0)}}]);function y(){f(this,y);var Z=A(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return Z}return y}(I.default);o.FormulaBlot=h,o.default=p},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.CodeToken=o.CodeBlock=void 0;var i=function(){function G(V,S){for(var k=0;k<S.length;k++){var B=S[k];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(V,B.key,B)}}return function(V,S,k){return S&&G(V.prototype,S),k&&G(V,k),V}}(),l=function G(V,S,k){V===null&&(V=Function.prototype);var B=Object.getOwnPropertyDescriptor(V,S);if(B===void 0){var R=Object.getPrototypeOf(V);return R===null?void 0:G(R,S,k)}else{if("value"in B)return B.value;var W=B.get;return W===void 0?void 0:W.call(k)}},s=r(0),a=A(s),c=r(5),u=A(c),d=r(9),I=A(d),C=r(13),f=A(C);function A(G){return G&&G.__esModule?G:{default:G}}function v(G,V){if(!(G instanceof V))throw new TypeError("Cannot call a class as a function")}function h(G,V){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:G}function p(G,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);G.prototype=Object.create(V&&V.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(G,V):G.__proto__=V)}var b=function(G){p(V,G);function V(){return v(this,V),h(this,(V.__proto__||Object.getPrototypeOf(V)).apply(this,arguments))}return i(V,[{key:"replaceWith",value:function(k){this.domNode.textContent=this.domNode.textContent,this.attach(),l(V.prototype.__proto__||Object.getPrototypeOf(V.prototype),"replaceWith",this).call(this,k)}},{key:"highlight",value:function(k){var B=this.domNode.textContent;this.cachedText!==B&&((B.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=k(B),this.domNode.normalize(),this.attach()),this.cachedText=B)}}]),V}(f.default);b.className="ql-syntax";var y=new a.default.Attributor.Class("token","hljs",{scope:a.default.Scope.INLINE}),Z=function(G){p(V,G),i(V,null,[{key:"register",value:function(){u.default.register(y,!0),u.default.register(b,!0)}}]);function V(S,k){v(this,V);var B=h(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,S,k));if(typeof B.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var R=null;return B.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(R),R=setTimeout(function(){B.highlight(),R=null},B.options.interval)}),B.highlight(),B}return i(V,[{key:"highlight",value:function(){var k=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var B=this.quill.getSelection();this.quill.scroll.descendants(b).forEach(function(R){R.highlight(k.options.highlight)}),this.quill.update(u.default.sources.SILENT),B!=null&&this.quill.setSelection(B,u.default.sources.SILENT)}}}]),V}(I.default);Z.DEFAULTS={highlight:function(){return window.hljs==null?null:function(G){var V=window.hljs.highlightAuto(G);return V.value}}(),interval:1e3},o.CodeBlock=b,o.CodeToken=y,o.default=Z},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,o){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,o){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,o){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,o){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,o,r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.BubbleTooltip=void 0;var i=function V(S,k,B){S===null&&(S=Function.prototype);var R=Object.getOwnPropertyDescriptor(S,k);if(R===void 0){var W=Object.getPrototypeOf(S);return W===null?void 0:V(W,k,B)}else{if("value"in R)return R.value;var w=R.get;return w===void 0?void 0:w.call(B)}},l=function(){function V(S,k){for(var B=0;B<k.length;B++){var R=k[B];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(S,R.key,R)}}return function(S,k,B){return k&&V(S.prototype,k),B&&V(S,B),S}}(),s=r(3),a=v(s),c=r(8),u=v(c),d=r(43),I=v(d),C=r(15),f=r(41),A=v(f);function v(V){return V&&V.__esModule?V:{default:V}}function h(V,S){if(!(V instanceof S))throw new TypeError("Cannot call a class as a function")}function p(V,S){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:V}function b(V,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);V.prototype=Object.create(S&&S.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(V,S):V.__proto__=S)}var y=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Z=function(V){b(S,V);function S(k,B){h(this,S),B.modules.toolbar!=null&&B.modules.toolbar.container==null&&(B.modules.toolbar.container=y);var R=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,k,B));return R.quill.container.classList.add("ql-bubble"),R}return l(S,[{key:"extendToolbar",value:function(B){this.tooltip=new G(this.quill,this.options.bounds),this.tooltip.root.appendChild(B.container),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),A.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),A.default)}}]),S}(I.default);Z.DEFAULTS=(0,a.default)(!0,{},I.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var G=function(V){b(S,V);function S(k,B){h(this,S);var R=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,k,B));return R.quill.on(u.default.events.EDITOR_CHANGE,function(W,w,X,E){if(W===u.default.events.SELECTION_CHANGE)if(w!=null&&w.length>0&&E===u.default.sources.USER){R.show(),R.root.style.left="0px",R.root.style.width="",R.root.style.width=R.root.offsetWidth+"px";var M=R.quill.getLines(w.index,w.length);if(M.length===1)R.position(R.quill.getBounds(w));else{var L=M[M.length-1],F=R.quill.getIndex(L),Y=Math.min(L.length()-1,w.index+w.length-F),N=R.quill.getBounds(new C.Range(F,Y));R.position(N)}}else document.activeElement!==R.textbox&&R.quill.hasFocus()&&R.hide()}),R}return l(S,[{key:"listen",value:function(){var B=this;i(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){B.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!B.root.classList.contains("ql-hidden")){var R=B.quill.getSelection();R!=null&&B.position(B.quill.getBounds(R))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(B){var R=i(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,B),W=this.root.querySelector(".ql-tooltip-arrow");if(W.style.marginLeft="",R===0)return R;W.style.marginLeft=-1*R-W.offsetWidth/2+"px"}}]),S}(d.BaseTooltip);G.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),o.BubbleTooltip=G,o.default=Z},function(n,o,r){n.exports=r(63)}]).default})})(CR);var rD=CR.exports,iD=lt&&lt.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),lu=lt&&lt.__assign||function(){return lu=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},lu.apply(this,arguments)},lD=lt&&lt.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var o=Array(e),r=0,t=0;t<n;t++)for(var i=arguments[t],l=0,s=i.length;l<s;l++,r++)o[r]=i[l];return o},ad=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ao=ad(m),sD=ad(Kt),ms=ad(oD),jy=ad(rD),aD=function(e){iD(t,e);function t(n){var o=e.call(this,n)||this;o.dirtyProps=["modules","formats","bounds","theme","children"],o.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],o.state={generation:0},o.selection=null,o.onEditorChange=function(i,l,s,a){var c,u,d,I;i==="text-change"?(u=(c=o).onEditorChangeText)===null||u===void 0||u.call(c,o.editor.root.innerHTML,l,a,o.unprivilegedEditor):i==="selection-change"&&((I=(d=o).onEditorChangeSelection)===null||I===void 0||I.call(d,l,a,o.unprivilegedEditor))};var r=o.isControlled()?n.value:n.defaultValue;return o.value=r??"",o}return t.prototype.validateProps=function(n){var o;if(ao.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ao.default.Children.count(n.children)){var r=ao.default.Children.only(n.children);if(((o=r)===null||o===void 0?void 0:o.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(n,o){var r=this,i;if(this.validateProps(n),!this.editor||this.state.generation!==o.generation)return!0;if("value"in n){var l=this.getEditorContents(),s=(i=n.value,i??"");this.isEqualValue(s,l)||this.setEditorContents(this.editor,s)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),lD(this.cleanProps,this.dirtyProps).some(function(a){return!ms.default(n[a],r.props[a])})},t.prototype.shouldComponentRegenerate=function(n){var o=this;return this.dirtyProps.some(function(r){return!ms.default(n[r],o.props[r])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(n,o){var r=this;if(this.editor&&this.shouldComponentRegenerate(n)){var i=this.editor.getContents(),l=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:l},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==o.generation){var s=this.regenerationSnapshot,i=s.delta,a=s.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(i),zy(function(){return r.setEditorSelection(c,a)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(n,o){var r=new jy.default(n,o);return o.tabIndex!=null&&this.setEditorTabIndex(r,o.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(n){return n&&n.ops},t.prototype.isEqualValue=function(n,o){return this.isDelta(n)&&this.isDelta(o)?ms.default(n.ops,o.ops):ms.default(n,o)},t.prototype.setEditorContents=function(n,o){var r=this;this.value=o;var i=this.getEditorSelection();typeof o=="string"?n.setContents(n.clipboard.convert(o)):n.setContents(o),zy(function(){return r.setEditorSelection(n,i)})},t.prototype.setEditorSelection=function(n,o){if(this.selection=o,o){var r=n.getLength();o.index=Math.max(0,Math.min(o.index,r-1)),o.length=Math.max(0,Math.min(o.length,r-1-o.index)),n.setSelection(o)}},t.prototype.setEditorTabIndex=function(n,o){var r,i;!((i=(r=n)===null||r===void 0?void 0:r.scroll)===null||i===void 0)&&i.domNode&&(n.scroll.domNode.tabIndex=o)},t.prototype.setEditorReadOnly=function(n,o){o?n.disable():n.enable()},t.prototype.makeUnprivilegedEditor=function(n){var o=n;return{getHTML:function(){return o.root.innerHTML},getLength:o.getLength.bind(o),getText:o.getText.bind(o),getContents:o.getContents.bind(o),getSelection:o.getSelection.bind(o),getBounds:o.getBounds.bind(o)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=sD.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},t.prototype.renderEditingArea=function(){var n=this,o=this.props,r=o.children,i=o.preserveWhitespace,l=this.state.generation,s={key:l,ref:function(a){n.editingArea=a}};return ao.default.Children.count(r)?ao.default.cloneElement(ao.default.Children.only(r),s):i?ao.default.createElement("pre",lu({},s)):ao.default.createElement("div",lu({},s))},t.prototype.render=function(){var n;return ao.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(n,o,r,i){var l,s;if(this.editor){var a=this.isDelta(this.value)?i.getContents():i.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=o,this.value=a,(s=(l=this.props).onChange)===null||s===void 0||s.call(l,n,o,r,i))}},t.prototype.onEditorChangeSelection=function(n,o,r){var i,l,s,a,c,u;if(this.editor){var d=this.getEditorSelection(),I=!d&&n,C=d&&!n;ms.default(n,d)||(this.selection=n,(l=(i=this.props).onChangeSelection)===null||l===void 0||l.call(i,n,o,r),I?(a=(s=this.props).onFocus)===null||a===void 0||a.call(s,n,o,r):C&&((u=(c=this.props).onBlur)===null||u===void 0||u.call(c,d,o,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=jy.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(ao.default.Component);function zy(e){Promise.resolve().then(e)}var gD=aD;const cD=ro(gD),JA=e=>({Facebook:g.jsx(dA,{onClick:()=>{In(`https://www.facebook.com/${e}`)}},"Facebook"),Twitter:g.jsx(DE,{onClick:()=>{In(`https://x.com/${e}`)}},"Twitter"),TikTok:g.jsx(CA,{onClick:()=>{In(`https://www.tiktok.com/@${e}`)}},"TikTok"),Youtube:g.jsx(eV,{onClick:()=>{In(`https://www.youtube.com/@${e}`)}},"Youtube"),Telegram:g.jsx($S,{onClick:()=>{In(`https://t.me/+52${e}`)}},"Telegram"),Messenger:g.jsx(L9,{onClick:()=>{In(`https://www.facebook.com/${e}`)}},"Messenger"),Google:g.jsx(QS,{onClick:()=>{In(e)}},"Google"),Spotify:g.jsx(qS,{onClick:()=>{In(`https://open.spotify.com/user/${e}`)}},"Spotify"),Pinterest:g.jsx(_S,{onClick:()=>{In(`https://www.pinterest.com.mx/${e}`)}},"Pinterest"),Instagram:g.jsx(OS,{onClick:()=>{In(`https://www.instagram.com/${e}`)}},"Instagram"),LinkedIn:g.jsx(IA,{onClick:()=>{e.includes("company")||e.includes("in")?In(`https://www.linkedin.com/${e}`):In(`https://www.linkedin.com/in/${e}`)}},"LinkedIn"),Custom:g.jsx(hA,{onClick:()=>{In(`${e}`)}},"Custom")}),In=e=>{window.open(e.includes("https://")?e:`https://${e}`,"_blank","noreferrer")},_r=[{code:"+52",name:"Mxico"},{code:"+57",name:"Colombia"},{code:"+55",name:"Brasil"},{code:"+593",name:"Ecuador"},{code:"+1",name:"Estados Unidos"},{code:"+34",name:"Espaa"}],Dy=({name:e,onChange:t,value:n,initialLada:o})=>{const[r,i]=m.useState(!1),[l,s]=m.useState(_r.find(d=>d.code===o)||_r[0]);m.useEffect(()=>{if(o){const d=_r.find(I=>I.code===o);s(d||_r[0])}else s(_r[0]),t({target:{name:e==="secondary_phone"?"lada_2":"lada",value:_r[0].code}})},[o,t,e]);const a=()=>{i(!r)},c=d=>{s(d),i(!1),t({target:{name:e==="secondary_phone"?"lada_2":"lada",value:d.code}})},u=d=>{/^\d*$/.test(d.target.value)&&(d.target.value.length<=10?t({target:{name:e,value:d.target.value}}):alert("El nmero de telfono no puede exceder los 10 dgitos."))};return g.jsx("div",{className:"col-span-full",children:g.jsxs("div",{className:"mt-2 relative",children:[g.jsxs("div",{className:"absolute top-0 left-0 flex items-center pl-3 h-full",children:[g.jsxs("button",{type:"button",id:"dropdownButton",className:"h-full text-sm flex justify-center items-center bg-transparent text-white focus:outline-none",onClick:a,children:[g.jsx("span",{id:"dropdownSpan",children:l.code}),g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-4 w-4 ml-1",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]}),r&&g.jsx("div",{id:"dropdownMenu",className:"min-w-[150px] overflow-hidden absolute left-0 w-full mt-10 bg-white border border-slate-200 rounded-md shadow-lg z-10",children:g.jsx("ul",{id:"dropdownOptions",children:_r.map(d=>g.jsxs("li",{className:"px-4 py-2 text-slate-800 hover:bg-slate-100 text-sm cursor-pointer",onClick:()=>c(d),children:[d.name," (",d.code,")"]},d.code))})})]}),g.jsx("input",{type:"text",value:n,onChange:u,className:"block w-full rounded-md border-0 bg-white/5 py-1.5 pl-20 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6",placeholder:"777-777-7777"})]})})},mR=typeof document<"u"?P.useLayoutEffect:()=>{};function uD(e){const t=m.useRef(null);return mR(()=>{t.current=e},[e]),m.useCallback((...n)=>{const o=t.current;return o==null?void 0:o(...n)},[])}const Wa=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},fi=e=>e&&"window"in e&&e.window===e?e:Wa(e).defaultView||window;function hR(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=hR(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function ot(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=hR(e))&&(o&&(o+=" "),o+=t);return o}function dD(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function ID(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function CD(){return ID(/^Mac/i)}function mD(){return dD(/Android/i)}function hD(e){return e.mozInputSource===0&&e.isTrusted?!0:mD()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}class fD{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=t}}function fR(e){let t=m.useRef({isFocused:!1,observer:null});mR(()=>{const o=t.current;return()=>{o.observer&&(o.observer.disconnect(),o.observer=null)}},[]);let n=uD(o=>{e==null||e(o)});return m.useCallback(o=>{if(o.target instanceof HTMLButtonElement||o.target instanceof HTMLInputElement||o.target instanceof HTMLTextAreaElement||o.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=o.target,i=l=>{t.current.isFocused=!1,r.disabled&&n(new fD("blur",l)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var l;(l=t.current.observer)===null||l===void 0||l.disconnect();let s=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:s})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:s}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function AD(e){let{isDisabled:t,onFocus:n,onBlur:o,onFocusChange:r}=e;const i=m.useCallback(a=>{if(a.target===a.currentTarget)return o&&o(a),r&&r(!1),!0},[o,r]),l=fR(i),s=m.useCallback(a=>{const c=Wa(a.target);a.target===a.currentTarget&&c.activeElement===a.target&&(n&&n(a),r&&r(!0),l(a))},[r,n,l]);return{focusProps:{onFocus:!t&&(n||r||o)?s:void 0,onBlur:!t&&(o||r)?i:void 0}}}let wa=null,kh=new Set,Es=new Map,Ni=!1,xh=!1;const pD={Tab:!0,Escape:!0};function NA(e,t){for(let n of kh)n(e,t)}function bD(e){return!(e.metaKey||!CD()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function su(e){Ni=!0,bD(e)&&(wa="keyboard",NA("keyboard",e))}function Kn(e){wa="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(Ni=!0,NA("pointer",e))}function AR(e){hD(e)&&(Ni=!0,wa="virtual")}function pR(e){e.target===window||e.target===document||(!Ni&&!xh&&(wa="virtual",NA("virtual",e)),Ni=!1,xh=!1)}function bR(){Ni=!1,xh=!0}function Xh(e){if(typeof window>"u"||Es.get(fi(e)))return;const t=fi(e),n=Wa(e);let o=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){Ni=!0,o.apply(this,arguments)},n.addEventListener("keydown",su,!0),n.addEventListener("keyup",su,!0),n.addEventListener("click",AR,!0),t.addEventListener("focus",pR,!0),t.addEventListener("blur",bR,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",Kn,!0),n.addEventListener("pointermove",Kn,!0),n.addEventListener("pointerup",Kn,!0)):(n.addEventListener("mousedown",Kn,!0),n.addEventListener("mousemove",Kn,!0),n.addEventListener("mouseup",Kn,!0)),t.addEventListener("beforeunload",()=>{yR(e)},{once:!0}),Es.set(t,{focus:o})}const yR=(e,t)=>{const n=fi(e),o=Wa(e);t&&o.removeEventListener("DOMContentLoaded",t),Es.has(n)&&(n.HTMLElement.prototype.focus=Es.get(n).focus,o.removeEventListener("keydown",su,!0),o.removeEventListener("keyup",su,!0),o.removeEventListener("click",AR,!0),n.removeEventListener("focus",pR,!0),n.removeEventListener("blur",bR,!1),typeof PointerEvent<"u"?(o.removeEventListener("pointerdown",Kn,!0),o.removeEventListener("pointermove",Kn,!0),o.removeEventListener("pointerup",Kn,!0)):(o.removeEventListener("mousedown",Kn,!0),o.removeEventListener("mousemove",Kn,!0),o.removeEventListener("mouseup",Kn,!0)),Es.delete(n))};function yD(e){const t=Wa(e);let n;return t.readyState!=="loading"?Xh(e):(n=()=>{Xh(e)},t.addEventListener("DOMContentLoaded",n)),()=>yR(e,n)}typeof document<"u"&&yD();function vR(){return wa!=="pointer"}const vD=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ZD(e,t,n){var o;const r=typeof window<"u"?fi(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?fi(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,l=typeof window<"u"?fi(n==null?void 0:n.target).HTMLElement:HTMLElement,s=typeof window<"u"?fi(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||(n==null?void 0:n.target)instanceof r&&!vD.has(n==null||(o=n.target)===null||o===void 0?void 0:o.type)||(n==null?void 0:n.target)instanceof i||(n==null?void 0:n.target)instanceof l&&(n==null?void 0:n.target.isContentEditable),!(e&&t==="keyboard"&&n instanceof s&&!pD[n.key])}function GD(e,t,n){Xh(),m.useEffect(()=>{let o=(r,i)=>{ZD(!!(n!=null&&n.isTextInput),r,i)&&e(vR())};return kh.add(o),()=>{kh.delete(o)}},t)}function BD(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:o,onFocusWithinChange:r}=e,i=m.useRef({isFocusWithin:!1}),l=m.useCallback(c=>{i.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(i.current.isFocusWithin=!1,n&&n(c),r&&r(!1))},[n,r,i]),s=fR(l),a=m.useCallback(c=>{!i.current.isFocusWithin&&document.activeElement===c.target&&(o&&o(c),r&&r(!0),i.current.isFocusWithin=!0,s(c))},[o,r,s]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:a,onBlur:l}}}let au=!1,OI=0;function Jh(){au=!0,setTimeout(()=>{au=!1},50)}function Uy(e){e.pointerType==="touch"&&Jh()}function SD(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",Uy):document.addEventListener("touchend",Jh),OI++,()=>{OI--,!(OI>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",Uy):document.removeEventListener("touchend",Jh))}}function gd(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:o,isDisabled:r}=e,[i,l]=m.useState(!1),s=m.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;m.useEffect(SD,[]);let{hoverProps:a,triggerHoverEnd:c}=m.useMemo(()=>{let u=(C,f)=>{if(s.pointerType=f,r||f==="touch"||s.isHovered||!C.currentTarget.contains(C.target))return;s.isHovered=!0;let A=C.currentTarget;s.target=A,t&&t({type:"hoverstart",target:A,pointerType:f}),n&&n(!0),l(!0)},d=(C,f)=>{if(s.pointerType="",s.target=null,f==="touch"||!s.isHovered)return;s.isHovered=!1;let A=C.currentTarget;o&&o({type:"hoverend",target:A,pointerType:f}),n&&n(!1),l(!1)},I={};return typeof PointerEvent<"u"?(I.onPointerEnter=C=>{au&&C.pointerType==="mouse"||u(C,C.pointerType)},I.onPointerLeave=C=>{!r&&C.currentTarget.contains(C.target)&&d(C,C.pointerType)}):(I.onTouchStart=()=>{s.ignoreEmulatedMouseEvents=!0},I.onMouseEnter=C=>{!s.ignoreEmulatedMouseEvents&&!au&&u(C,"mouse"),s.ignoreEmulatedMouseEvents=!1},I.onMouseLeave=C=>{!r&&C.currentTarget.contains(C.target)&&d(C,"mouse")}),{hoverProps:I,triggerHoverEnd:d}},[t,n,o,r,s]);return m.useEffect(()=>{r&&c({currentTarget:s.target},s.pointerType)},[r]),{hoverProps:a,isHovered:i}}function ka(e={}){let{autoFocus:t=!1,isTextInput:n,within:o}=e,r=m.useRef({isFocused:!1,isFocusVisible:t||vR()}),[i,l]=m.useState(!1),[s,a]=m.useState(()=>r.current.isFocused&&r.current.isFocusVisible),c=m.useCallback(()=>a(r.current.isFocused&&r.current.isFocusVisible),[]),u=m.useCallback(C=>{r.current.isFocused=C,l(C),c()},[c]);GD(C=>{r.current.isFocusVisible=C,c()},[],{isTextInput:n});let{focusProps:d}=AD({isDisabled:o,onFocusChange:u}),{focusWithinProps:I}=BD({isDisabled:!o,onFocusWithinChange:u});return{isFocused:i,isFocusVisible:s,focusProps:o?I:d}}var VD=Object.defineProperty,RD=(e,t,n)=>t in e?VD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_I=(e,t,n)=>(RD(e,typeof t!="symbol"?t+"":t,n),n);let WD=class{constructor(){_I(this,"current",this.detect()),_I(this,"handoffState","pending"),_I(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Bi=new WD;function jr(e){return Bi.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function xa(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function zr(){let e=[],t={addEventListener(n,o,r,i){return n.addEventListener(o,r,i),t.add(()=>n.removeEventListener(o,r,i))},requestAnimationFrame(...n){let o=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(o))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let o=setTimeout(...n);return t.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return xa(()=>{o.current&&n[0]()}),t.add(()=>{o.current=!1})},style(n,o,r){let i=n.style.getPropertyValue(o);return Object.assign(n.style,{[o]:r}),this.add(()=>{Object.assign(n.style,{[o]:i})})},group(n){let o=zr();return n(o),this.add(()=>o.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let o=e.indexOf(n);if(o>=0)for(let r of e.splice(o,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function ql(){let[e]=m.useState(zr);return m.useEffect(()=>()=>e.dispose(),[e]),e}let Ke=(e,t)=>{Bi.isServer?m.useEffect(e,t):m.useLayoutEffect(e,t)};function Ot(e){let t=m.useRef(e);return Ke(()=>{t.current=e},[e]),t}let he=function(e){let t=Ot(e);return P.useCallback((...n)=>t.current(...n),[t])};function wD(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function kD(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function ZR({disabled:e=!1}={}){let t=m.useRef(null),[n,o]=m.useState(!1),r=ql(),i=he(()=>{t.current=null,o(!1),r.dispose()}),l=he(s=>{if(r.dispose(),t.current===null){t.current=s.currentTarget,o(!0);{let a=jr(s.currentTarget);r.addEventListener(a,"pointerup",i,!1),r.addEventListener(a,"pointermove",c=>{if(t.current){let u=wD(c);o(kD(u,t.current.getBoundingClientRect()))}},!1),r.addEventListener(a,"pointercancel",i,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:l,onPointerUp:i,onClick:i}}}let xD=m.createContext(void 0);function cd(){return m.useContext(xD)}function Nh(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function pt(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,pt),o}var po=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(po||{}),hr=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(hr||{});function Oe({ourProps:e,theirProps:t,slot:n,defaultTag:o,features:r,visible:i=!0,name:l,mergeRefs:s}){s=s??JD;let a=GR(t,e);if(i)return Bg(a,n,o,l,s);let c=r??0;if(c&2){let{static:u=!1,...d}=a;if(u)return Bg(d,n,o,l,s)}if(c&1){let{unmount:u=!0,...d}=a;return pt(u?0:1,{0(){return null},1(){return Bg({...d,hidden:!0,style:{display:"none"}},n,o,l,s)}})}return Bg(a,n,o,l,s)}function Bg(e,t={},n,o,r){let{as:i=n,children:l,refName:s="ref",...a}=qI(e,["unmount","static"]),c=e.ref!==void 0?{[s]:e.ref}:{},u=typeof l=="function"?l(t):l;"className"in a&&a.className&&typeof a.className=="function"&&(a.className=a.className(t)),a["aria-labelledby"]&&a["aria-labelledby"]===a.id&&(a["aria-labelledby"]=void 0);let d={};if(t){let I=!1,C=[];for(let[f,A]of Object.entries(t))typeof A=="boolean"&&(I=!0),A===!0&&C.push(f.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(I){d["data-headlessui-state"]=C.join(" ");for(let f of C)d[`data-${f}`]=""}}if(i===m.Fragment&&(Object.keys(ir(a)).length>0||Object.keys(ir(d)).length>0))if(!m.isValidElement(u)||Array.isArray(u)&&u.length>1){if(Object.keys(ir(a)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${o} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ir(a)).concat(Object.keys(ir(d))).map(I=>`  - ${I}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(I=>`  - ${I}`).join(`
`)].join(`
`))}else{let I=u.props,C=I==null?void 0:I.className,f=typeof C=="function"?(...h)=>Nh(C(...h),a.className):Nh(C,a.className),A=f?{className:f}:{},v=GR(u.props,ir(qI(a,["ref"])));for(let h in d)h in v&&delete d[h];return m.cloneElement(u,Object.assign({},v,d,c,{ref:r(u.ref,c.ref)},A))}return m.createElement(i,Object.assign({},qI(a,["ref"]),i!==m.Fragment&&c,i!==m.Fragment&&d),u)}function XD(){let e=m.useRef([]),t=m.useCallback(n=>{for(let o of e.current)o!=null&&(typeof o=="function"?o(n):o.current=n)},[]);return(...n)=>{if(!n.every(o=>o==null))return e.current=n,t}}function JD(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function GR(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let o of e)for(let r in o)r.startsWith("on")&&typeof o[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(o[r])):t[r]=o[r];if(t.disabled||t["aria-disabled"])for(let o in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(o)&&(n[o]=[r=>{var i;return(i=r==null?void 0:r.preventDefault)==null?void 0:i.call(r)}]);for(let o in n)Object.assign(t,{[o](r,...i){let l=n[o];for(let s of l){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;s(r,...i)}}});return t}function Yi(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let o of e)for(let r in o)r.startsWith("on")&&typeof o[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(o[r])):t[r]=o[r];for(let o in n)Object.assign(t,{[o](...r){let i=n[o];for(let l of i)l==null||l(...r)}});return t}function je(e){var t;return Object.assign(m.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ir(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function qI(e,t=[]){let n=Object.assign({},e);for(let o of t)o in n&&delete n[o];return n}function ND(e,t,n){let[o,r]=m.useState(n),i=e!==void 0,l=m.useRef(i),s=m.useRef(!1),a=m.useRef(!1);return i&&!l.current&&!s.current?(s.current=!0,l.current=i,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!i&&l.current&&!a.current&&(a.current=!0,l.current=i,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[i?e:o,he(c=>(i||r(c),t==null?void 0:t(c)))]}function YD(e){let[t]=m.useState(e);return t}function BR(e={},t=null,n=[]){for(let[o,r]of Object.entries(e))VR(n,SR(t,o),r);return n}function SR(e,t){return e?e+"["+t+"]":t}function VR(e,t,n){if(Array.isArray(n))for(let[o,r]of n.entries())VR(e,SR(t,o.toString()),r);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):BR(n,t,e)}function HD(e){var t,n;let o=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(o){for(let r of o.elements)if(r!==e&&(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image")){r.click();return}(n=o.requestSubmit)==null||n.call(o)}}let FD="span";var bo=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(bo||{});function ED(e,t){var n;let{features:o=1,...r}=e,i={ref:t,"aria-hidden":(o&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(o&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(o&4)===4&&(o&2)!==2&&{display:"none"}}};return Oe({ourProps:i,theirProps:r,slot:{},defaultTag:FD,name:"Hidden"})}let yo=je(ED),KD=m.createContext(null);function LD({children:e}){let t=m.useContext(KD);if(!t)return P.createElement(P.Fragment,null,e);let{target:n}=t;return n?Kt.createPortal(P.createElement(P.Fragment,null,e),n):null}function MD({data:e,form:t,disabled:n,onReset:o,overrides:r}){let[i,l]=m.useState(null),s=ql();return m.useEffect(()=>{if(o&&i)return s.addEventListener(i,"reset",o)},[i,t,o]),P.createElement(LD,null,P.createElement(TD,{setForm:l,formId:t}),BR(e).map(([a,c])=>P.createElement(yo,{features:bo.Hidden,...ir({key:a,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:t,disabled:n,name:a,value:c,...r})})))}function TD({setForm:e,formId:t}){return m.useEffect(()=>{if(t){let n=document.getElementById(t);n&&e(n)}},[e,t]),t?null:P.createElement(yo,{features:bo.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let o=n.closest("form");o&&e(o)}})}let jD=m.createContext(void 0);function RR(){return m.useContext(jD)}function ud(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let o=(t==null?void 0:t.getAttribute("disabled"))==="";return o&&zD(n)?!1:o}function zD(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}let WR=Symbol();function wR(e,t=!0){return Object.assign(e,{[WR]:t})}function tt(...e){let t=m.useRef(e);m.useEffect(()=>{t.current=e},[e]);let n=he(o=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(o):r.current=o)});return e.every(o=>o==null||(o==null?void 0:o[WR]))?void 0:n}let dd=m.createContext(null);dd.displayName="DescriptionContext";function kR(){let e=m.useContext(dd);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,kR),t}return e}function DD(){var e,t;return(t=(e=m.useContext(dd))==null?void 0:e.value)!=null?t:void 0}function YA(){let[e,t]=m.useState([]);return[e.length>0?e.join(" "):void 0,m.useMemo(()=>function(n){let o=he(i=>(t(l=>[...l,i]),()=>t(l=>{let s=l.slice(),a=s.indexOf(i);return a!==-1&&s.splice(a,1),s}))),r=m.useMemo(()=>({register:o,slot:n.slot,name:n.name,props:n.props,value:n.value}),[o,n.slot,n.name,n.props,n.value]);return P.createElement(dd.Provider,{value:r},n.children)},[t])]}let UD="p";function PD(e,t){let n=m.useId(),o=cd(),{id:r=`headlessui-description-${n}`,...i}=e,l=kR(),s=tt(t);Ke(()=>l.register(r),[r,l.register]);let a=o||!1,c=m.useMemo(()=>({...l.slot,disabled:a}),[l.slot,a]),u={ref:s,...l.props,id:r};return Oe({ourProps:u,theirProps:i,slot:c,defaultTag:UD,name:l.name||"Description"})}let QD=je(PD),xR=Object.assign(QD,{});var $e=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))($e||{});let Id=m.createContext(null);Id.displayName="LabelContext";function XR(){let e=m.useContext(Id);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,XR),t}return e}function JR(e){var t,n,o;let r=(n=(t=m.useContext(Id))==null?void 0:t.value)!=null?n:void 0;return((o=e==null?void 0:e.length)!=null?o:0)>0?[r,...e].filter(Boolean).join(" "):r}function NR({inherit:e=!1}={}){let t=JR(),[n,o]=m.useState([]),r=e?[t,...n].filter(Boolean):n;return[r.length>0?r.join(" "):void 0,m.useMemo(()=>function(i){let l=he(a=>(o(c=>[...c,a]),()=>o(c=>{let u=c.slice(),d=u.indexOf(a);return d!==-1&&u.splice(d,1),u}))),s=m.useMemo(()=>({register:l,slot:i.slot,name:i.name,props:i.props,value:i.value}),[l,i.slot,i.name,i.props,i.value]);return P.createElement(Id.Provider,{value:s},i.children)},[o])]}let OD="label";function _D(e,t){var n;let o=m.useId(),r=XR(),i=RR(),l=cd(),{id:s=`headlessui-label-${o}`,htmlFor:a=i??((n=r.props)==null?void 0:n.htmlFor),passive:c=!1,...u}=e,d=tt(t);Ke(()=>r.register(s),[s,r.register]);let I=he(v=>{let h=v.currentTarget;if(h instanceof HTMLLabelElement&&v.preventDefault(),r.props&&"onClick"in r.props&&typeof r.props.onClick=="function"&&r.props.onClick(v),h instanceof HTMLLabelElement){let p=document.getElementById(h.htmlFor);if(p){let b=p.getAttribute("disabled");if(b==="true"||b==="")return;let y=p.getAttribute("aria-disabled");if(y==="true"||y==="")return;(p instanceof HTMLInputElement&&(p.type==="radio"||p.type==="checkbox")||p.role==="radio"||p.role==="checkbox"||p.role==="switch")&&p.click(),p.focus({preventScroll:!0})}}}),C=l||!1,f=m.useMemo(()=>({...r.slot,disabled:C}),[r.slot,C]),A={ref:d,...r.props,id:s,htmlFor:a,onClick:I};return c&&("onClick"in A&&(delete A.htmlFor,delete A.onClick),"onClick"in u&&delete u.onClick),Oe({ourProps:A,theirProps:u,slot:f,defaultTag:a?OD:"div",name:r.name||"Label"})}let qD=je(_D),$D=Object.assign(qD,{}),eU=m.createContext(()=>{});function YR({value:e,children:t}){return P.createElement(eU.Provider,{value:e},t)}function tU(e,t){return e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&"id"in e&&"id"in t?e.id===t.id:e===t}function nU(e=tU){return m.useCallback((t,n)=>{if(typeof e=="string"){let o=e;return(t==null?void 0:t[o])===(n==null?void 0:n[o])}return e(t,n)},[e])}function oU(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function rU(e,t=!1){let n=e===null?null:"current"in e?e.current:e,[o,r]=m.useReducer(()=>({}),{}),i=m.useMemo(()=>oU(n),[n,o]);return Ke(()=>{if(!n)return;let l=new ResizeObserver(r);return l.observe(n),()=>{l.disconnect()}},[n]),t?{width:`${i.width}px`,height:`${i.height}px`}:i}let iU=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function HR(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(r){return o.add(r),()=>o.delete(r)},dispatch(r,...i){let l=t[r].call(n,...i);l&&(n=l,o.forEach(s=>s()))}}}function FR(e){return m.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let lU=new iU(()=>HR(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function $l(e,t){let n=lU.get(t),o=m.useId(),r=FR(n);if(Ke(()=>{if(e)return n.dispatch("ADD",o),()=>n.dispatch("REMOVE",o)},[n,e]),!e)return!1;let i=r.indexOf(o),l=r.length;return i===-1&&(i=l,l+=1),i===l-1}let Yh=new Map,Ks=new Map;function Py(e){var t;let n=(t=Ks.get(e))!=null?t:0;return Ks.set(e,n+1),n!==0?()=>Qy(e):(Yh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Qy(e))}function Qy(e){var t;let n=(t=Ks.get(e))!=null?t:1;if(n===1?Ks.delete(e):Ks.set(e,n-1),n!==1)return;let o=Yh.get(e);o&&(o["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",o["aria-hidden"]),e.inert=o.inert,Yh.delete(e))}function sU(e,{allowed:t,disallowed:n}={}){let o=$l(e,"inert-others");Ke(()=>{var r,i;if(!o)return;let l=zr();for(let a of(r=n==null?void 0:n())!=null?r:[])a&&l.add(Py(a));let s=(i=t==null?void 0:t())!=null?i:[];for(let a of s){if(!a)continue;let c=jr(a);if(!c)continue;let u=a.parentElement;for(;u&&u!==c.body;){for(let d of u.children)s.some(I=>d.contains(I))||l.add(Py(d));u=u.parentElement}}return l.dispose},[o,t,n])}function HA(e,t,n){let o=Ot(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});m.useEffect(()=>{if(!e)return;let r=t===null?null:t instanceof HTMLElement?t:t.current;if(!r)return;let i=zr();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>o.current(r));l.observe(r),i.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>o.current(r));l.observe(r),i.add(()=>l.disconnect())}return()=>i.dispose()},[t,o,e])}let gu=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),aU=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Ee=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Ee||{}),Tn=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Tn||{}),gU=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(gU||{});function Cd(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(gu)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function cU(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(aU)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var FA=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(FA||{});function ER(e,t=0){var n;return e===((n=jr(e))==null?void 0:n.body)?!1:pt(t,{0(){return e.matches(gu)},1(){let o=e;for(;o!==null;){if(o.matches(gu))return!0;o=o.parentElement}return!1}})}var uU=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(uU||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ho(e){e==null||e.focus({preventScroll:!0})}let dU=["textarea","input"].join(",");function IU(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,dU))!=null?n:!1}function Ai(e,t=n=>n){return e.slice().sort((n,o)=>{let r=t(n),i=t(o);if(r===null||i===null)return 0;let l=r.compareDocumentPosition(i);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function vt(e,t,{sorted:n=!0,relativeTo:o=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,l=Array.isArray(e)?n?Ai(e):e:t&64?cU(e):Cd(e);r.length>0&&l.length>1&&(l=l.filter(C=>!r.some(f=>f!=null&&"current"in f?(f==null?void 0:f.current)===C:f===C))),o=o??i.activeElement;let s=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(o))-1;if(t&4)return Math.max(0,l.indexOf(o))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=t&32?{preventScroll:!0}:{},u=0,d=l.length,I;do{if(u>=d||u+d<=0)return 0;let C=a+u;if(t&16)C=(C+d)%d;else{if(C<0)return 3;if(C>=d)return 1}I=l[C],I==null||I.focus(c),u+=s}while(I!==i.activeElement);return t&6&&IU(I)&&I.select(),2}function KR(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function CU(){return/Android/gi.test(window.navigator.userAgent)}function mU(){return KR()||CU()}function hs(e,t,n,o){let r=Ot(n);m.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return document.addEventListener(t,i,o),()=>document.removeEventListener(t,i,o)},[e,t,o])}function LR(e,t,n,o){let r=Ot(n);m.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return window.addEventListener(t,i,o),()=>window.removeEventListener(t,i,o)},[e,t,o])}const Oy=30;function MR(e,t,n){let o=$l(e,"outside-click"),r=Ot(n),i=m.useCallback(function(a,c){if(a.defaultPrevented)return;let u=c(a);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function I(C){return typeof C=="function"?I(C()):Array.isArray(C)||C instanceof Set?C:[C]}(t);for(let I of d){if(I===null)continue;let C=I instanceof HTMLElement?I:I.current;if(C!=null&&C.contains(u)||a.composed&&a.composedPath().includes(C))return}return!ER(u,FA.Loose)&&u.tabIndex!==-1&&a.preventDefault(),r.current(a,u)},[r]),l=m.useRef(null);hs(o,"pointerdown",a=>{var c,u;l.current=((u=(c=a.composedPath)==null?void 0:c.call(a))==null?void 0:u[0])||a.target},!0),hs(o,"mousedown",a=>{var c,u;l.current=((u=(c=a.composedPath)==null?void 0:c.call(a))==null?void 0:u[0])||a.target},!0),hs(o,"click",a=>{mU()||l.current&&(i(a,()=>l.current),l.current=null)},!0);let s=m.useRef({x:0,y:0});hs(o,"touchstart",a=>{s.current.x=a.touches[0].clientX,s.current.y=a.touches[0].clientY},!0),hs(o,"touchend",a=>{let c={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(c.x-s.current.x)>=Oy||Math.abs(c.y-s.current.y)>=Oy))return i(a,()=>a.target instanceof HTMLElement?a.target:null)},!0),LR(o,"blur",a=>i(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Dr(...e){return m.useMemo(()=>jr(...e),[...e])}function EA(e,t,n,o){let r=Ot(n);m.useEffect(()=>{e=e??window;function i(l){r.current(l)}return e.addEventListener(t,i,o),()=>e.removeEventListener(t,i,o)},[e,t,o])}function _y(e){var t;if(e.type)return e.type;let n=(t=e.as)!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function TR(e,t){let[n,o]=m.useState(()=>_y(e));return Ke(()=>{o(_y(e))},[e.type,e.as]),Ke(()=>{n||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&o("button")},[n,t]),n}function hU(){let e;return{before({doc:t}){var n;let o=t.documentElement,r=(n=t.defaultView)!=null?n:window;e=Math.max(0,r.innerWidth-o.clientWidth)},after({doc:t,d:n}){let o=t.documentElement,r=Math.max(0,o.clientWidth-o.offsetWidth),i=Math.max(0,e-r);n.style(o,"paddingRight",`${i}px`)}}}function fU(){return KR()?{before({doc:e,d:t,meta:n}){function o(r){return n.containers.flatMap(i=>i()).some(i=>i.contains(r))}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let s=zr();s.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>s.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,l=null;t.addEventListener(e,"click",s=>{if(s.target instanceof HTMLElement)try{let a=s.target.closest("a");if(!a)return;let{hash:c}=new URL(a.href),u=e.querySelector(c);u&&!o(u)&&(l=u)}catch{}},!0),t.addEventListener(e,"touchstart",s=>{if(s.target instanceof HTMLElement)if(o(s.target)){let a=s.target;for(;a.parentElement&&o(a.parentElement);)a=a.parentElement;t.style(a,"overscrollBehavior","contain")}else t.style(s.target,"touchAction","none")}),t.addEventListener(e,"touchmove",s=>{if(s.target instanceof HTMLElement){if(s.target.tagName==="INPUT")return;if(o(s.target)){let a=s.target;for(;a.parentElement&&a.dataset.headlessuiPortal!==""&&!(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth);)a=a.parentElement;a.dataset.headlessuiPortal===""&&s.preventDefault()}else s.preventDefault()}},{passive:!1}),t.add(()=>{var s;let a=(s=window.scrollY)!=null?s:window.pageYOffset;i!==a&&window.scrollTo(0,i),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function AU(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function pU(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let pi=HR(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:zr(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:pU(n)},r=[fU(),hU(),AU()];r.forEach(({before:i})=>i==null?void 0:i(o)),r.forEach(({after:i})=>i==null?void 0:i(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});pi.subscribe(()=>{let e=pi.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!o||!r&&o)&&pi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&pi.dispatch("TEARDOWN",n)}});function bU(e,t,n=()=>({containers:[]})){let o=FR(pi),r=t?o.get(t):void 0,i=r?r.count>0:!1;return Ke(()=>{if(!(!t||!e))return pi.dispatch("PUSH",t,n),()=>pi.dispatch("POP",t,n)},[e,t]),i}function jR(e,t,n=()=>[document.body]){let o=$l(e,"scroll-lock");bU(o,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],n]}})}function yU(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function vU(e=0){let[t,n]=m.useState(e),o=m.useCallback(a=>n(a),[t]),r=m.useCallback(a=>n(c=>c|a),[t]),i=m.useCallback(a=>(t&a)===a,[t]),l=m.useCallback(a=>n(c=>c&~a),[n]),s=m.useCallback(a=>n(c=>c^a),[n]);return{flags:t,setFlag:o,addFlag:r,hasFlag:i,removeFlag:l,toggleFlag:s}}var ZU=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(ZU||{});function KA(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function LA(e,t,n,o){let[r,i]=m.useState(n),{hasFlag:l,addFlag:s,removeFlag:a}=vU(e&&r?3:0),c=m.useRef(!1),u=m.useRef(!1),d=ql();return Ke(function I(){var C;if(!e)return;n&&i(!0);let f=t.current;return f?((C=o==null?void 0:o.start)==null||C.call(o,n),GU(f,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(s(3),a(4)):(s(4),a(2)))},run(){u.current?n?(a(3),s(4)):(a(4),s(3)):n?a(1):s(1)},done(){var A;u.current&&typeof f.getAnimations=="function"&&f.getAnimations().length>0||(c.current=!1,a(7),n||i(!1),(A=o==null?void 0:o.end)==null||A.call(o,n))}})):n?(s(3),d.nextFrame(()=>I())):void 0},[e,n,t,d]),e?[r,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function GU(e,{prepare:t,run:n,done:o,inFlight:r}){let i=zr();return SU(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{i.add(BU(e,o)),n()}),i.dispose}function BU(e,t){let n=yU(t),o=zr();if(!e)return o.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(e),[l,s]=[r,i].map(c=>{let[u=0]=c.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,I)=>I-d);return u}),a=l+s;if(a!==0){let c=o.group(u=>{let d=u.setTimeout(()=>{n(),u.dispose()},a);u.addEventListener(e,"transitionrun",I=>{I.target===I.currentTarget&&(d(),u.addEventListener(e,"transitioncancel",C=>{C.target===C.currentTarget&&(n(),c())}))})});o.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(n(),o.dispose())})}else n();return o.dispose}function SU(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let o=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=o}function MA(e,t){let n=m.useRef([]),o=he(e);m.useEffect(()=>{let r=[...n.current];for(let[i,l]of t.entries())if(n.current[i]!==l){let s=o(t,r);return n.current=t,s}},[o,...t])}function es(e){return zR(e)?(e.nodeName||"").toLowerCase():"#document"}function vn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Oo(e){var t;return(t=(zR(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zR(e){return e instanceof Node||e instanceof vn(e).Node}function rn(e){return e instanceof Element||e instanceof vn(e).Element}function vo(e){return e instanceof HTMLElement||e instanceof vn(e).HTMLElement}function qy(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof vn(e).ShadowRoot}function Xa(e){const{overflow:t,overflowX:n,overflowY:o,display:r}=no(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(r)}function VU(e){return["table","td","th"].includes(es(e))}function md(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function TA(e){const t=jA(),n=no(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function RU(e){let t=kr(e);for(;vo(t)&&!Jl(t);){if(md(t))return null;if(TA(t))return t;t=kr(t)}return null}function jA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Jl(e){return["html","body","#document"].includes(es(e))}function no(e){return vn(e).getComputedStyle(e)}function hd(e){return rn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function kr(e){if(es(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qy(e)&&e.host||Oo(e);return qy(t)?t.host:t}function DR(e){const t=kr(e);return Jl(t)?e.ownerDocument?e.ownerDocument.body:e.body:vo(t)&&Xa(t)?t:DR(t)}function Ia(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=DR(e),i=r===((o=e.ownerDocument)==null?void 0:o.body),l=vn(r);return i?t.concat(l,l.visualViewport||[],Xa(r)?r:[],l.frameElement&&n?Ia(l.frameElement):[]):t.concat(r,Ia(r,[],n))}function WU(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:o}=t;return n+"/"+o}).join(" "):navigator.userAgent}const fr=Math.min,fn=Math.max,cu=Math.round,Sg=Math.floor,xr=e=>({x:e,y:e}),wU={left:"right",right:"left",bottom:"top",top:"bottom"},kU={start:"end",end:"start"};function $y(e,t,n){return fn(e,fr(t,n))}function ts(e,t){return typeof e=="function"?e(t):e}function Xr(e){return e.split("-")[0]}function Ja(e){return e.split("-")[1]}function UR(e){return e==="x"?"y":"x"}function PR(e){return e==="y"?"height":"width"}function Hi(e){return["top","bottom"].includes(Xr(e))?"y":"x"}function QR(e){return UR(Hi(e))}function xU(e,t,n){n===void 0&&(n=!1);const o=Ja(e),r=QR(e),i=PR(r);let l=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=uu(l)),[l,uu(l)]}function XU(e){const t=uu(e);return[Hh(e),t,Hh(t)]}function Hh(e){return e.replace(/start|end/g,t=>kU[t])}function JU(e,t,n){const o=["left","right"],r=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:o:t?o:r;case"left":case"right":return t?i:l;default:return[]}}function NU(e,t,n,o){const r=Ja(e);let i=JU(Xr(e),n==="start",o);return r&&(i=i.map(l=>l+"-"+r),t&&(i=i.concat(i.map(Hh)))),i}function uu(e){return e.replace(/left|right|bottom|top/g,t=>wU[t])}function YU(e){return{top:0,right:0,bottom:0,left:0,...e}}function HU(e){return typeof e!="number"?YU(e):{top:e,right:e,bottom:e,left:e}}function du(e){const{x:t,y:n,width:o,height:r}=e;return{width:o,height:r,top:n,left:t,right:t+o,bottom:n+r,x:t,y:n}}function ev(e,t,n){let{reference:o,floating:r}=e;const i=Hi(t),l=QR(t),s=PR(l),a=Xr(t),c=i==="y",u=o.x+o.width/2-r.width/2,d=o.y+o.height/2-r.height/2,I=o[s]/2-r[s]/2;let C;switch(a){case"top":C={x:u,y:o.y-r.height};break;case"bottom":C={x:u,y:o.y+o.height};break;case"right":C={x:o.x+o.width,y:d};break;case"left":C={x:o.x-r.width,y:d};break;default:C={x:o.x,y:o.y}}switch(Ja(t)){case"start":C[l]-=I*(n&&c?-1:1);break;case"end":C[l]+=I*(n&&c?-1:1);break}return C}const FU=async(e,t,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:l}=n,s=i.filter(Boolean),a=await(l.isRTL==null?void 0:l.isRTL(t));let c=await l.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=ev(c,o,a),I=o,C={},f=0;for(let A=0;A<s.length;A++){const{name:v,fn:h}=s[A],{x:p,y:b,data:y,reset:Z}=await h({x:u,y:d,initialPlacement:o,placement:I,strategy:r,middlewareData:C,rects:c,platform:l,elements:{reference:e,floating:t}});u=p??u,d=b??d,C={...C,[v]:{...C[v],...y}},Z&&f<=50&&(f++,typeof Z=="object"&&(Z.placement&&(I=Z.placement),Z.rects&&(c=Z.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:r}):Z.rects),{x:u,y:d}=ev(c,I,a)),A=-1)}return{x:u,y:d,placement:I,strategy:r,middlewareData:C}};async function fd(e,t){var n;t===void 0&&(t={});const{x:o,y:r,platform:i,rects:l,elements:s,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:I=!1,padding:C=0}=ts(t,e),f=HU(C),v=s[I?d==="floating"?"reference":"floating":d],h=du(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:a})),p=d==="floating"?{x:o,y:r,width:l.floating.width,height:l.floating.height}:l.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),y=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},Z=du(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:p,offsetParent:b,strategy:a}):p);return{top:(h.top-Z.top+f.top)/y.y,bottom:(Z.bottom-h.bottom+f.bottom)/y.y,left:(h.left-Z.left+f.left)/y.x,right:(Z.right-h.right+f.right)/y.x}}const EU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:r,middlewareData:i,rects:l,initialPlacement:s,platform:a,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:I,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:A=!0,...v}=ts(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const h=Xr(r),p=Hi(s),b=Xr(s)===s,y=await(a.isRTL==null?void 0:a.isRTL(c.floating)),Z=I||(b||!A?[uu(s)]:XU(s)),G=f!=="none";!I&&G&&Z.push(...NU(s,A,f,y));const V=[s,...Z],S=await fd(t,v),k=[];let B=((o=i.flip)==null?void 0:o.overflows)||[];if(u&&k.push(S[h]),d){const X=xU(r,l,y);k.push(S[X[0]],S[X[1]])}if(B=[...B,{placement:r,overflows:k}],!k.every(X=>X<=0)){var R,W;const X=(((R=i.flip)==null?void 0:R.index)||0)+1,E=V[X];if(E)return{data:{index:X,overflows:B},reset:{placement:E}};let M=(W=B.filter(L=>L.overflows[0]<=0).sort((L,F)=>L.overflows[1]-F.overflows[1])[0])==null?void 0:W.placement;if(!M)switch(C){case"bestFit":{var w;const L=(w=B.filter(F=>{if(G){const Y=Hi(F.placement);return Y===p||Y==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(Y=>Y>0).reduce((Y,N)=>Y+N,0)]).sort((F,Y)=>F[1]-Y[1])[0])==null?void 0:w[0];L&&(M=L);break}case"initialPlacement":M=s;break}if(r!==M)return{reset:{placement:M}}}return{}}}};async function KU(e,t){const{placement:n,platform:o,elements:r}=e,i=await(o.isRTL==null?void 0:o.isRTL(r.floating)),l=Xr(n),s=Ja(n),a=Hi(n)==="y",c=["left","top"].includes(l)?-1:1,u=i&&a?-1:1,d=ts(t,e);let{mainAxis:I,crossAxis:C,alignmentAxis:f}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof f=="number"&&(C=s==="end"?f*-1:f),a?{x:C*u,y:I*c}:{x:I*c,y:C*u}}const LU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:r,y:i,placement:l,middlewareData:s}=t,a=await KU(t,e);return l===((n=s.offset)==null?void 0:n.placement)&&(o=s.arrow)!=null&&o.alignmentOffset?{}:{x:r+a.x,y:i+a.y,data:{...a,placement:l}}}}},MU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:r}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:s={fn:v=>{let{x:h,y:p}=v;return{x:h,y:p}}},...a}=ts(e,t),c={x:n,y:o},u=await fd(t,a),d=Hi(Xr(r)),I=UR(d);let C=c[I],f=c[d];if(i){const v=I==="y"?"top":"left",h=I==="y"?"bottom":"right",p=C+u[v],b=C-u[h];C=$y(p,C,b)}if(l){const v=d==="y"?"top":"left",h=d==="y"?"bottom":"right",p=f+u[v],b=f-u[h];f=$y(p,f,b)}const A=s.fn({...t,[I]:C,[d]:f});return{...A,data:{x:A.x-n,y:A.y-o}}}}},TU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:r,elements:i}=t,{apply:l=()=>{},...s}=ts(e,t),a=await fd(t,s),c=Xr(n),u=Ja(n),d=Hi(n)==="y",{width:I,height:C}=o.floating;let f,A;c==="top"||c==="bottom"?(f=c,A=u===(await(r.isRTL==null?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(A=c,f=u==="end"?"top":"bottom");const v=C-a.top-a.bottom,h=I-a.left-a.right,p=fr(C-a[f],v),b=fr(I-a[A],h),y=!t.middlewareData.shift;let Z=p,G=b;if(d?G=u||y?fr(b,h):h:Z=u||y?fr(p,v):v,y&&!u){const S=fn(a.left,0),k=fn(a.right,0),B=fn(a.top,0),R=fn(a.bottom,0);d?G=I-2*(S!==0||k!==0?S+k:fn(a.left,a.right)):Z=C-2*(B!==0||R!==0?B+R:fn(a.top,a.bottom))}await l({...t,availableWidth:G,availableHeight:Z});const V=await r.getDimensions(i.floating);return I!==V.width||C!==V.height?{reset:{rects:!0}}:{}}}};function OR(e){const t=no(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=vo(e),i=r?e.offsetWidth:n,l=r?e.offsetHeight:o,s=cu(n)!==i||cu(o)!==l;return s&&(n=i,o=l),{width:n,height:o,$:s}}function zA(e){return rn(e)?e:e.contextElement}function bl(e){const t=zA(e);if(!vo(t))return xr(1);const n=t.getBoundingClientRect(),{width:o,height:r,$:i}=OR(t);let l=(i?cu(n.width):n.width)/o,s=(i?cu(n.height):n.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!s||!Number.isFinite(s))&&(s=1),{x:l,y:s}}const jU=xr(0);function _R(e){const t=vn(e);return!jA()||!t.visualViewport?jU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function zU(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==vn(e)?!1:t}function Fi(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=zA(e);let l=xr(1);t&&(o?rn(o)&&(l=bl(o)):l=bl(e));const s=zU(i,n,o)?_R(i):xr(0);let a=(r.left+s.x)/l.x,c=(r.top+s.y)/l.y,u=r.width/l.x,d=r.height/l.y;if(i){const I=vn(i),C=o&&rn(o)?vn(o):o;let f=I,A=f.frameElement;for(;A&&o&&C!==f;){const v=bl(A),h=A.getBoundingClientRect(),p=no(A),b=h.left+(A.clientLeft+parseFloat(p.paddingLeft))*v.x,y=h.top+(A.clientTop+parseFloat(p.paddingTop))*v.y;a*=v.x,c*=v.y,u*=v.x,d*=v.y,a+=b,c+=y,f=vn(A),A=f.frameElement}}return du({width:u,height:d,x:a,y:c})}function DU(e){let{elements:t,rect:n,offsetParent:o,strategy:r}=e;const i=r==="fixed",l=Oo(o),s=t?md(t.floating):!1;if(o===l||s&&i)return n;let a={scrollLeft:0,scrollTop:0},c=xr(1);const u=xr(0),d=vo(o);if((d||!d&&!i)&&((es(o)!=="body"||Xa(l))&&(a=hd(o)),vo(o))){const I=Fi(o);c=bl(o),u.x=I.x+o.clientLeft,u.y=I.y+o.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+u.x,y:n.y*c.y-a.scrollTop*c.y+u.y}}function UU(e){return Array.from(e.getClientRects())}function qR(e){return Fi(Oo(e)).left+hd(e).scrollLeft}function PU(e){const t=Oo(e),n=hd(e),o=e.ownerDocument.body,r=fn(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),i=fn(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let l=-n.scrollLeft+qR(e);const s=-n.scrollTop;return no(o).direction==="rtl"&&(l+=fn(t.clientWidth,o.clientWidth)-r),{width:r,height:i,x:l,y:s}}function QU(e,t){const n=vn(e),o=Oo(e),r=n.visualViewport;let i=o.clientWidth,l=o.clientHeight,s=0,a=0;if(r){i=r.width,l=r.height;const c=jA();(!c||c&&t==="fixed")&&(s=r.offsetLeft,a=r.offsetTop)}return{width:i,height:l,x:s,y:a}}function OU(e,t){const n=Fi(e,!0,t==="fixed"),o=n.top+e.clientTop,r=n.left+e.clientLeft,i=vo(e)?bl(e):xr(1),l=e.clientWidth*i.x,s=e.clientHeight*i.y,a=r*i.x,c=o*i.y;return{width:l,height:s,x:a,y:c}}function tv(e,t,n){let o;if(t==="viewport")o=QU(e,n);else if(t==="document")o=PU(Oo(e));else if(rn(t))o=OU(t,n);else{const r=_R(e);o={...t,x:t.x-r.x,y:t.y-r.y}}return du(o)}function $R(e,t){const n=kr(e);return n===t||!rn(n)||Jl(n)?!1:no(n).position==="fixed"||$R(n,t)}function _U(e,t){const n=t.get(e);if(n)return n;let o=Ia(e,[],!1).filter(s=>rn(s)&&es(s)!=="body"),r=null;const i=no(e).position==="fixed";let l=i?kr(e):e;for(;rn(l)&&!Jl(l);){const s=no(l),a=TA(l);!a&&s.position==="fixed"&&(r=null),(i?!a&&!r:!a&&s.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Xa(l)&&!a&&$R(e,l))?o=o.filter(u=>u!==l):r=s,l=kr(l)}return t.set(e,o),o}function qU(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const l=[...n==="clippingAncestors"?md(t)?[]:_U(t,this._c):[].concat(n),o],s=l[0],a=l.reduce((c,u)=>{const d=tv(t,u,r);return c.top=fn(d.top,c.top),c.right=fr(d.right,c.right),c.bottom=fr(d.bottom,c.bottom),c.left=fn(d.left,c.left),c},tv(t,s,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function $U(e){const{width:t,height:n}=OR(e);return{width:t,height:n}}function eP(e,t,n){const o=vo(t),r=Oo(t),i=n==="fixed",l=Fi(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const a=xr(0);if(o||!o&&!i)if((es(t)!=="body"||Xa(r))&&(s=hd(t)),o){const d=Fi(t,!0,i,t);a.x=d.x+t.clientLeft,a.y=d.y+t.clientTop}else r&&(a.x=qR(r));const c=l.left+s.scrollLeft-a.x,u=l.top+s.scrollTop-a.y;return{x:c,y:u,width:l.width,height:l.height}}function $I(e){return no(e).position==="static"}function nv(e,t){return!vo(e)||no(e).position==="fixed"?null:t?t(e):e.offsetParent}function eW(e,t){const n=vn(e);if(md(e))return n;if(!vo(e)){let r=kr(e);for(;r&&!Jl(r);){if(rn(r)&&!$I(r))return r;r=kr(r)}return n}let o=nv(e,t);for(;o&&VU(o)&&$I(o);)o=nv(o,t);return o&&Jl(o)&&$I(o)&&!TA(o)?n:o||RU(e)||n}const tP=async function(e){const t=this.getOffsetParent||eW,n=this.getDimensions,o=await n(e.floating);return{reference:eP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function nP(e){return no(e).direction==="rtl"}const oP={convertOffsetParentRelativeRectToViewportRelativeRect:DU,getDocumentElement:Oo,getClippingRect:qU,getOffsetParent:eW,getElementRects:tP,getClientRects:UU,getDimensions:$U,getScale:bl,isElement:rn,isRTL:nP};function rP(e,t){let n=null,o;const r=Oo(e);function i(){var s;clearTimeout(o),(s=n)==null||s.disconnect(),n=null}function l(s,a){s===void 0&&(s=!1),a===void 0&&(a=1),i();const{left:c,top:u,width:d,height:I}=e.getBoundingClientRect();if(s||t(),!d||!I)return;const C=Sg(u),f=Sg(r.clientWidth-(c+d)),A=Sg(r.clientHeight-(u+I)),v=Sg(c),p={rootMargin:-C+"px "+-f+"px "+-A+"px "+-v+"px",threshold:fn(0,fr(1,a))||1};let b=!0;function y(Z){const G=Z[0].intersectionRatio;if(G!==a){if(!b)return l();G?l(!1,G):o=setTimeout(()=>{l(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(y,{...p,root:r.ownerDocument})}catch{n=new IntersectionObserver(y,p)}n.observe(e)}return l(!0),i}function iP(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:a=!1}=o,c=zA(e),u=r||i?[...c?Ia(c):[],...Ia(t)]:[];u.forEach(h=>{r&&h.addEventListener("scroll",n,{passive:!0}),i&&h.addEventListener("resize",n)});const d=c&&s?rP(c,n):null;let I=-1,C=null;l&&(C=new ResizeObserver(h=>{let[p]=h;p&&p.target===c&&C&&(C.unobserve(t),cancelAnimationFrame(I),I=requestAnimationFrame(()=>{var b;(b=C)==null||b.observe(t)})),n()}),c&&!a&&C.observe(c),C.observe(t));let f,A=a?Fi(e):null;a&&v();function v(){const h=Fi(e);A&&(h.x!==A.x||h.y!==A.y||h.width!==A.width||h.height!==A.height)&&n(),A=h,f=requestAnimationFrame(v)}return n(),()=>{var h;u.forEach(p=>{r&&p.removeEventListener("scroll",n),i&&p.removeEventListener("resize",n)}),d==null||d(),(h=C)==null||h.disconnect(),C=null,a&&cancelAnimationFrame(f)}}const eC=fd,lP=LU,sP=MU,aP=EU,gP=TU,cP=(e,t,n)=>{const o=new Map,r={platform:oP,...n},i={...r.platform,_c:o};return FU(e,t,{...r,platform:i})};var uc=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Iu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,o,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(o=n;o--!==0;)if(!Iu(e[o],t[o]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(t,r[o]))return!1;for(o=n;o--!==0;){const i=r[o];if(!(i==="_owner"&&e.$$typeof)&&!Iu(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function tW(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ov(e,t){const n=tW(e);return Math.round(t*n)/n}function rv(e){const t=m.useRef(e);return uc(()=>{t.current=e}),t}function uP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:r,elements:{reference:i,floating:l}={},transform:s=!0,whileElementsMounted:a,open:c}=e,[u,d]=m.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[I,C]=m.useState(o);Iu(I,o)||C(o);const[f,A]=m.useState(null),[v,h]=m.useState(null),p=m.useCallback(L=>{L!==G.current&&(G.current=L,A(L))},[]),b=m.useCallback(L=>{L!==V.current&&(V.current=L,h(L))},[]),y=i||f,Z=l||v,G=m.useRef(null),V=m.useRef(null),S=m.useRef(u),k=a!=null,B=rv(a),R=rv(r),W=m.useCallback(()=>{if(!G.current||!V.current)return;const L={placement:t,strategy:n,middleware:I};R.current&&(L.platform=R.current),cP(G.current,V.current,L).then(F=>{const Y={...F,isPositioned:!0};w.current&&!Iu(S.current,Y)&&(S.current=Y,Kt.flushSync(()=>{d(Y)}))})},[I,t,n,R]);uc(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,d(L=>({...L,isPositioned:!1})))},[c]);const w=m.useRef(!1);uc(()=>(w.current=!0,()=>{w.current=!1}),[]),uc(()=>{if(y&&(G.current=y),Z&&(V.current=Z),y&&Z){if(B.current)return B.current(y,Z,W);W()}},[y,Z,W,B,k]);const X=m.useMemo(()=>({reference:G,floating:V,setReference:p,setFloating:b}),[p,b]),E=m.useMemo(()=>({reference:y,floating:Z}),[y,Z]),M=m.useMemo(()=>{const L={position:n,left:0,top:0};if(!E.floating)return L;const F=ov(E.floating,u.x),Y=ov(E.floating,u.y);return s?{...L,transform:"translate("+F+"px, "+Y+"px)",...tW(E.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:Y}},[n,s,E.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:W,refs:X,elements:E,floatingStyles:M}),[u,W,X,E,M])}const nW=(e,t)=>({...lP(e),options:[e,t]}),dP=(e,t)=>({...sP(e),options:[e,t]}),IP=(e,t)=>({...aP(e),options:[e,t]}),CP=(e,t)=>({...gP(e),options:[e,t]}),oW={...mc},mP=oW.useInsertionEffect,hP=mP||(e=>e());function rW(e){const t=m.useRef(()=>{});return hP(()=>{t.current=e}),m.useCallback(function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t.current==null?void 0:t.current(...o)},[])}var Fh=typeof document<"u"?m.useLayoutEffect:m.useEffect;let iv=!1,fP=0;const lv=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+fP++;function AP(){const[e,t]=m.useState(()=>iv?lv():void 0);return Fh(()=>{e==null&&t(lv())},[]),m.useEffect(()=>{iv=!0},[]),e}const pP=oW.useId,bP=pP||AP;function yP(){const e=new Map;return{emit(t,n){var o;(o=e.get(t))==null||o.forEach(r=>r(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(r=>r!==n))||[])}}}const vP=m.createContext(null),ZP=m.createContext(null),GP=()=>{var e;return((e=m.useContext(vP))==null?void 0:e.id)||null},BP=()=>m.useContext(ZP);function SP(e){const{open:t=!1,onOpenChange:n,elements:o}=e,r=bP(),i=m.useRef({}),[l]=m.useState(()=>yP()),s=GP()!=null,[a,c]=m.useState(o.reference),u=rW((C,f,A)=>{i.current.openEvent=C?f:void 0,l.emit("openchange",{open:C,event:f,reason:A,nested:s}),n==null||n(C,f,A)}),d=m.useMemo(()=>({setPositionReference:c}),[]),I=m.useMemo(()=>({reference:a||o.reference||null,floating:o.floating||null,domReference:o.reference}),[a,o.reference,o.floating]);return m.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:I,events:l,floatingId:r,refs:d}),[t,u,I,l,r,d])}function VP(e){e===void 0&&(e={});const{nodeId:t}=e,n=SP({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,r=o.elements,[i,l]=m.useState(null),[s,a]=m.useState(null),u=(r==null?void 0:r.reference)||i,d=m.useRef(null),I=BP();Fh(()=>{u&&(d.current=u)},[u]);const C=uP({...e,elements:{...r,...s&&{reference:s}}}),f=m.useCallback(b=>{const y=rn(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;a(y),C.refs.setReference(y)},[C.refs]),A=m.useCallback(b=>{(rn(b)||b===null)&&(d.current=b,l(b)),(rn(C.refs.reference.current)||C.refs.reference.current===null||b!==null&&!rn(b))&&C.refs.setReference(b)},[C.refs]),v=m.useMemo(()=>({...C.refs,setReference:A,setPositionReference:f,domReference:d}),[C.refs,A,f]),h=m.useMemo(()=>({...C.elements,domReference:u}),[C.elements,u]),p=m.useMemo(()=>({...C,...o,refs:v,elements:h,nodeId:t}),[C,v,h,t,o]);return Fh(()=>{o.dataRef.current.floatingContext=p;const b=I==null?void 0:I.nodesRef.current.find(y=>y.id===t);b&&(b.context=p)}),m.useMemo(()=>({...C,context:p,refs:v,elements:h}),[C,v,h,p])}const sv="active",av="selected";function tC(e,t,n){const o=new Map,r=n==="item";let i=e;if(r&&e){const{[sv]:l,[av]:s,...a}=e;i=a}return{...n==="floating"&&{tabIndex:-1},...i,...t.map(l=>{const s=l?l[n]:null;return typeof s=="function"?e?s(e):null:s}).concat(e).reduce((l,s)=>(s&&Object.entries(s).forEach(a=>{let[c,u]=a;if(!(r&&[sv,av].includes(c)))if(c.indexOf("on")===0){if(o.has(c)||o.set(c,[]),typeof u=="function"){var d;(d=o.get(c))==null||d.push(u),l[c]=function(){for(var I,C=arguments.length,f=new Array(C),A=0;A<C;A++)f[A]=arguments[A];return(I=o.get(c))==null?void 0:I.map(v=>v(...f)).find(v=>v!==void 0)}}}else l[c]=u}),l),{})}}function RP(e){e===void 0&&(e=[]);const t=e.map(s=>s==null?void 0:s.reference),n=e.map(s=>s==null?void 0:s.floating),o=e.map(s=>s==null?void 0:s.item),r=m.useCallback(s=>tC(s,e,"reference"),t),i=m.useCallback(s=>tC(s,e,"floating"),n),l=m.useCallback(s=>tC(s,e,"item"),o);return m.useMemo(()=>({getReferenceProps:r,getFloatingProps:i,getItemProps:l}),[r,i,l])}function gv(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const WP=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:o,onFallbackChange:r,offset:i=0,index:l=0,minItemsVisible:s=4,referenceOverflowThreshold:a=0,scrollRef:c,...u}=ts(e,t),{rects:d,elements:{floating:I}}=t,C=n.current[l];if(!C)return{};const f={...t,...await nW(-C.offsetTop-I.clientTop-d.reference.height/2-C.offsetHeight/2-i).fn(t)},A=(c==null?void 0:c.current)||I,v=await eC(gv(f,A.scrollHeight),u),h=await eC(f,{...u,elementContext:"reference"}),p=Math.max(0,v.top),b=f.y+p,y=Math.max(0,A.scrollHeight-p-Math.max(0,v.bottom));return A.style.maxHeight=y+"px",A.scrollTop=p,r&&(A.offsetHeight<C.offsetHeight*Math.min(s,n.current.length-1)-1||h.top>=-a||h.bottom>=-a?Kt.flushSync(()=>r(!0)):Kt.flushSync(()=>r(!1))),o&&(o.current=await eC(gv({...f,y:b},A.offsetHeight),u)),{y:b}}});function wP(e,t){const{open:n,elements:o}=e,{enabled:r=!0,overflowRef:i,scrollRef:l,onChange:s}=t,a=rW(s),c=m.useRef(!1),u=m.useRef(null),d=m.useRef(null);m.useEffect(()=>{if(!r)return;function C(A){if(A.ctrlKey||!f||i.current==null)return;const v=A.deltaY,h=i.current.top>=-.5,p=i.current.bottom>=-.5,b=f.scrollHeight-f.clientHeight,y=v<0?-1:1,Z=v<0?"max":"min";f.scrollHeight<=f.clientHeight||(!h&&v>0||!p&&v<0?(A.preventDefault(),Kt.flushSync(()=>{a(G=>G+Math[Z](v,b*y))})):/firefox/i.test(WU())&&(f.scrollTop+=v))}const f=(l==null?void 0:l.current)||o.floating;if(n&&f)return f.addEventListener("wheel",C),requestAnimationFrame(()=>{u.current=f.scrollTop,i.current!=null&&(d.current={...i.current})}),()=>{u.current=null,d.current=null,f.removeEventListener("wheel",C)}},[r,n,o.floating,i,l,a]);const I=m.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const C=(l==null?void 0:l.current)||o.floating;if(!(!i.current||!C||!c.current)){if(u.current!==null){const f=C.scrollTop-u.current;(i.current.bottom<-.5&&f<-1||i.current.top<-.5&&f>1)&&Kt.flushSync(()=>a(A=>A+f))}requestAnimationFrame(()=>{u.current=C.scrollTop})}}}),[o.floating,a,i,l]);return m.useMemo(()=>r?{floating:I}:{},[r,I])}let Na=m.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Na.displayName="FloatingContext";let DA=m.createContext(null);DA.displayName="PlacementContext";function kP(e){return m.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function xP(){return m.useContext(Na).setReference}function XP(){let{getFloatingProps:e,slot:t}=m.useContext(Na);return m.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function JP(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=m.useContext(DA),n=m.useMemo(()=>e,[JSON.stringify(e,typeof HTMLElement<"u"?(r,i)=>i instanceof HTMLElement?i.outerHTML:i:void 0)]);Ke(()=>{t==null||t(n??null)},[t,n]);let o=m.useContext(Na);return m.useMemo(()=>[o.setFloating,e?o.styles:{}],[o.setFloating,e,o.styles])}let cv=4;function NP({children:e,enabled:t=!0}){let[n,o]=m.useState(null),[r,i]=m.useState(0),l=m.useRef(null),[s,a]=m.useState(null);YP(s);let c=t&&n!==null&&s!==null,{to:u="bottom",gap:d=0,offset:I=0,padding:C=0,inner:f}=HP(n,s),[A,v="center"]=u.split(" ");Ke(()=>{c&&i(0)},[c]);let{refs:h,floatingStyles:p,context:b}=VP({open:c,placement:A==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${A}`:`${A}-${v}`,strategy:"absolute",transform:!1,middleware:[nW({mainAxis:A==="selection"?0:d,crossAxis:I}),dP({padding:C}),A!=="selection"&&IP({padding:C}),A==="selection"&&f?WP({...f,padding:C,overflowRef:l,offset:r,minItemsVisible:cv,referenceOverflowThreshold:C,onFallbackChange(R){var W,w;if(!R)return;let X=b.elements.floating;if(!X)return;let E=parseFloat(getComputedStyle(X).scrollPaddingBottom)||0,M=Math.min(cv,X.childElementCount),L=0,F=0;for(let Y of(w=(W=b.elements.floating)==null?void 0:W.childNodes)!=null?w:[])if(Y instanceof HTMLElement){let N=Y.offsetTop,x=N+Y.clientHeight+E,H=X.scrollTop,K=H+X.clientHeight;if(N>=H&&x<=K)M--;else{F=Math.max(0,Math.min(x,K)-Math.max(N,H)),L=Y.clientHeight;break}}M>=1&&i(Y=>{let N=L*M-F+E;return Y>=N?Y:N})}}):null,CP({padding:C,apply({availableWidth:R,availableHeight:W,elements:w}){Object.assign(w.floating.style,{overflow:"auto",maxWidth:`${R}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${W}px)`})}})].filter(Boolean),whileElementsMounted:iP}),[y=A,Z=v]=b.placement.split("-");A==="selection"&&(y="selection");let G=m.useMemo(()=>({anchor:[y,Z].filter(Boolean).join(" ")}),[y,Z]),V=wP(b,{overflowRef:l,onChange:i}),{getReferenceProps:S,getFloatingProps:k}=RP([V]),B=he(R=>{a(R),h.setFloating(R)});return m.createElement(DA.Provider,{value:o},m.createElement(Na.Provider,{value:{setFloating:B,setReference:h.setReference,styles:p,getReferenceProps:S,getFloatingProps:k,slot:G}},e))}function YP(e){Ke(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,o=parseFloat(n);if(isNaN(o))return;let r=parseInt(n);isNaN(r)||o!==r&&(e.style.maxHeight=`${Math.ceil(o)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function HP(e,t){var n,o,r;let i=nC((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),l=nC((o=e==null?void 0:e.offset)!=null?o:"var(--anchor-offset, 0)",t),s=nC((r=e==null?void 0:e.padding)!=null?r:"var(--anchor-padding, 0)",t);return{...e,gap:i,offset:l,padding:s}}function nC(e,t,n=void 0){let o=ql(),r=he((a,c)=>{if(a==null)return[n,null];if(typeof a=="number")return[a,null];if(typeof a=="string"){if(!c)return[n,null];let u=uv(a,c);return[u,d=>{let I=iW(a);{let C=I.map(f=>window.getComputedStyle(c).getPropertyValue(f));o.requestAnimationFrame(function f(){o.nextFrame(f);let A=!1;for(let[h,p]of I.entries()){let b=window.getComputedStyle(c).getPropertyValue(p);if(C[h]!==b){C[h]=b,A=!0;break}}if(!A)return;let v=uv(a,c);u!==v&&(d(v),u=v)})}return o.dispose}]}return[n,null]}),i=m.useMemo(()=>r(e,t)[0],[e,t]),[l=i,s]=m.useState();return Ke(()=>{let[a,c]=r(e,t);if(s(a),!!c)return c(s)},[e,t]),l}function iW(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let o=t[1].slice(0,n).trim(),r=t[1].slice(n+1).trim();return r?[o,...iW(r)]:[o]}return[]}function uv(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let o=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),o}let Ad=m.createContext(null);Ad.displayName="OpenClosedContext";var Ht=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ht||{});function ns(){return m.useContext(Ad)}function lW({value:e,children:t}){return P.createElement(Ad.Provider,{value:e},t)}function sW({children:e}){return P.createElement(Ad.Provider,{value:null},e)}function FP(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let ur=[];FP(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||ur[0]===t.target)return;let n=t.target;n=n.closest(gu),ur.unshift(n??t.target),ur=ur.filter(o=>o!=null&&o.isConnected),ur.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function aW(e){let t=he(e),n=m.useRef(!1);m.useEffect(()=>(n.current=!1,()=>{n.current=!0,xa(()=>{n.current&&t()})}),[t])}function EP(){let e=typeof document>"u";return"useSyncExternalStore"in mc?(t=>t.useSyncExternalStore)(mc)(()=>()=>{},()=>!1,()=>!e):!1}function Ya(){let e=EP(),[t,n]=m.useState(Bi.isHandoffComplete);return t&&Bi.isHandoffComplete===!1&&n(!1),m.useEffect(()=>{t!==!0&&n(!0)},[t]),m.useEffect(()=>Bi.handoff(),[]),e?!1:t}let gW=m.createContext(!1);function KP(){return m.useContext(gW)}function dv(e){return P.createElement(gW.Provider,{value:e.force},e.children)}function LP(e){let t=KP(),n=m.useContext(uW),o=Dr(e),[r,i]=m.useState(()=>{var l;if(!t&&n!==null)return(l=n.current)!=null?l:null;if(Bi.isServer)return null;let s=o==null?void 0:o.getElementById("headlessui-portal-root");if(s)return s;if(o===null)return null;let a=o.createElement("div");return a.setAttribute("id","headlessui-portal-root"),o.body.appendChild(a)});return m.useEffect(()=>{r!==null&&(o!=null&&o.body.contains(r)||o==null||o.body.appendChild(r))},[r,o]),m.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let cW=m.Fragment,MP=je(function(e,t){let n=e,o=m.useRef(null),r=tt(wR(u=>{o.current=u}),t),i=Dr(o),l=LP(o),[s]=m.useState(()=>{var u;return Bi.isServer?null:(u=i==null?void 0:i.createElement("div"))!=null?u:null}),a=m.useContext(Eh),c=Ya();return Ke(()=>{!l||!s||l.contains(s)||(s.setAttribute("data-headlessui-portal",""),l.appendChild(s))},[l,s]),Ke(()=>{if(s&&a)return a.register(s)},[a,s]),aW(()=>{var u;!l||!s||(s instanceof Node&&l.contains(s)&&l.removeChild(s),l.childNodes.length<=0&&((u=l.parentElement)==null||u.removeChild(l)))}),c?!l||!s?null:Kt.createPortal(Oe({ourProps:{ref:r},theirProps:n,slot:{},defaultTag:cW,name:"Portal"}),s):null});function TP(e,t){let n=tt(t),{enabled:o=!0,...r}=e;return o?P.createElement(MP,{...r,ref:n}):Oe({ourProps:{ref:n},theirProps:r,slot:{},defaultTag:cW,name:"Portal"})}let jP=m.Fragment,uW=m.createContext(null);function zP(e,t){let{target:n,...o}=e,r={ref:tt(t)};return P.createElement(uW.Provider,{value:n},Oe({ourProps:r,theirProps:o,defaultTag:jP,name:"Popover.Group"}))}let Eh=m.createContext(null);function dW(){let e=m.useContext(Eh),t=m.useRef([]),n=he(i=>(t.current.push(i),e&&e.register(i),()=>o(i))),o=he(i=>{let l=t.current.indexOf(i);l!==-1&&t.current.splice(l,1),e&&e.unregister(i)}),r=m.useMemo(()=>({register:n,unregister:o,portals:t}),[n,o,t]);return[t,m.useMemo(()=>function({children:i}){return P.createElement(Eh.Provider,{value:r},i)},[r])]}let DP=je(TP),IW=je(zP),CW=Object.assign(DP,{Group:IW});function UP(e,t=typeof document<"u"?document.defaultView:null,n){let o=$l(e,"escape");EA(t,"keydown",r=>{o&&(r.defaultPrevented||r.key===$e.Escape&&n(r))})}function PP(){var e;let[t]=m.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,o]=m.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Ke(()=>{if(!t)return;function r(i){o(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),n}function mW({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let o=Dr(n),r=he(()=>{var i,l;let s=[];for(let a of e)a!==null&&(a instanceof HTMLElement?s.push(a):"current"in a&&a.current instanceof HTMLElement&&s.push(a.current));if(t!=null&&t.current)for(let a of t.current)s.push(a);for(let a of(i=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?i:[])a!==document.body&&a!==document.head&&a instanceof HTMLElement&&a.id!=="headlessui-portal-root"&&(n&&(a.contains(n)||a.contains((l=n==null?void 0:n.getRootNode())==null?void 0:l.host))||s.some(c=>a.contains(c))||s.push(a));return s});return{resolveContainers:r,contains:he(i=>r().some(l=>l.contains(i)))}}let hW=m.createContext(null);function Cu({children:e,node:t}){let[n,o]=m.useState(null),r=UA(t??n);return P.createElement(hW.Provider,{value:r},e,r===null&&P.createElement(yo,{features:bo.Hidden,ref:i=>{var l,s;if(i){for(let a of(s=(l=jr(i))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?s:[])if(a!==document.body&&a!==document.head&&a instanceof HTMLElement&&a!=null&&a.contains(i)){o(a);break}}}}))}function UA(e=null){var t;return(t=m.useContext(hW))!=null?t:e}function pd(){let e=m.useRef(!1);return Ke(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var bn=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(bn||{});function PA(){let e=m.useRef(0);return LR(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function fW(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let QP="div";var di=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(di||{});function OP(e,t){let n=m.useRef(null),o=tt(n,t),{initialFocus:r,initialFocusFallback:i,containers:l,features:s=15,...a}=e;Ya()||(s=0);let c=Dr(n);eQ(s,{ownerDocument:c});let u=tQ(s,{ownerDocument:c,container:n,initialFocus:r,initialFocusFallback:i});nQ(s,{ownerDocument:c,container:n,containers:l,previousActiveElement:u});let d=PA(),I=he(h=>{let p=n.current;p&&(b=>b())(()=>{pt(d.current,{[bn.Forwards]:()=>{vt(p,Ee.First,{skipElements:[h.relatedTarget,i]})},[bn.Backwards]:()=>{vt(p,Ee.Last,{skipElements:[h.relatedTarget,i]})}})})}),C=$l(!!(s&2),"focus-trap#tab-lock"),f=ql(),A=m.useRef(!1),v={ref:o,onKeyDown(h){h.key=="Tab"&&(A.current=!0,f.requestAnimationFrame(()=>{A.current=!1}))},onBlur(h){if(!(s&4))return;let p=fW(l);n.current instanceof HTMLElement&&p.add(n.current);let b=h.relatedTarget;b instanceof HTMLElement&&b.dataset.headlessuiFocusGuard!=="true"&&(AW(p,b)||(A.current?vt(n.current,pt(d.current,{[bn.Forwards]:()=>Ee.Next,[bn.Backwards]:()=>Ee.Previous})|Ee.WrapAround,{relativeTo:h.target}):h.target instanceof HTMLElement&&Ho(h.target)))}};return P.createElement(P.Fragment,null,C&&P.createElement(yo,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:I,features:bo.Focusable}),Oe({ourProps:v,theirProps:a,defaultTag:QP,name:"FocusTrap"}),C&&P.createElement(yo,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:I,features:bo.Focusable}))}let _P=je(OP),qP=Object.assign(_P,{features:di});function $P(e=!0){let t=m.useRef(ur.slice());return MA(([n],[o])=>{o===!0&&n===!1&&xa(()=>{t.current.splice(0)}),o===!1&&n===!0&&(t.current=ur.slice())},[e,ur,t]),he(()=>{var n;return(n=t.current.find(o=>o!=null&&o.isConnected))!=null?n:null})}function eQ(e,{ownerDocument:t}){let n=!!(e&8),o=$P(n);MA(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Ho(o())},[n]),aW(()=>{n&&Ho(o())})}function tQ(e,{ownerDocument:t,container:n,initialFocus:o,initialFocusFallback:r}){let i=m.useRef(null),l=$l(!!(e&1),"focus-trap#initial-focus"),s=pd();return MA(()=>{if(e===0)return;if(!l){r!=null&&r.current&&Ho(r.current);return}let a=n.current;a&&xa(()=>{if(!s.current)return;let c=t==null?void 0:t.activeElement;if(o!=null&&o.current){if((o==null?void 0:o.current)===c){i.current=c;return}}else if(a.contains(c)){i.current=c;return}if(o!=null&&o.current)Ho(o.current);else{if(e&16){if(vt(a,Ee.First|Ee.AutoFocus)!==Tn.Error)return}else if(vt(a,Ee.First)!==Tn.Error)return;if(r!=null&&r.current&&(Ho(r.current),(t==null?void 0:t.activeElement)===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[r,l,e]),i}function nQ(e,{ownerDocument:t,container:n,containers:o,previousActiveElement:r}){let i=pd(),l=!!(e&4);EA(t==null?void 0:t.defaultView,"focus",s=>{if(!l||!i.current)return;let a=fW(o);n.current instanceof HTMLElement&&a.add(n.current);let c=r.current;if(!c)return;let u=s.target;u&&u instanceof HTMLElement?AW(a,u)?(r.current=u,Ho(u)):(s.preventDefault(),s.stopPropagation(),Ho(c)):Ho(r.current)},!0)}function AW(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function pW(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:yW)!==m.Fragment||P.Children.count(e.children)===1}let bd=m.createContext(null);bd.displayName="TransitionContext";var oQ=(e=>(e.Visible="visible",e.Hidden="hidden",e))(oQ||{});function rQ(){let e=m.useContext(bd);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function iQ(){let e=m.useContext(yd);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let yd=m.createContext(null);yd.displayName="NestingContext";function vd(e){return"children"in e?vd(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function bW(e,t){let n=Ot(e),o=m.useRef([]),r=pd(),i=ql(),l=he((C,f=hr.Hidden)=>{let A=o.current.findIndex(({el:v})=>v===C);A!==-1&&(pt(f,{[hr.Unmount](){o.current.splice(A,1)},[hr.Hidden](){o.current[A].state="hidden"}}),i.microTask(()=>{var v;!vd(o)&&r.current&&((v=n.current)==null||v.call(n))}))}),s=he(C=>{let f=o.current.find(({el:A})=>A===C);return f?f.state!=="visible"&&(f.state="visible"):o.current.push({el:C,state:"visible"}),()=>l(C,hr.Unmount)}),a=m.useRef([]),c=m.useRef(Promise.resolve()),u=m.useRef({enter:[],leave:[]}),d=he((C,f,A)=>{a.current.splice(0),t&&(t.chains.current[f]=t.chains.current[f].filter(([v])=>v!==C)),t==null||t.chains.current[f].push([C,new Promise(v=>{a.current.push(v)})]),t==null||t.chains.current[f].push([C,new Promise(v=>{Promise.all(u.current[f].map(([h,p])=>p)).then(()=>v())})]),f==="enter"?c.current=c.current.then(()=>t==null?void 0:t.wait.current).then(()=>A(f)):A(f)}),I=he((C,f,A)=>{Promise.all(u.current[f].splice(0).map(([v,h])=>h)).then(()=>{var v;(v=a.current.shift())==null||v()}).then(()=>A(f))});return m.useMemo(()=>({children:o,register:s,unregister:l,onStart:d,onStop:I,wait:c,chains:u}),[s,l,o,d,I,u,c])}let yW=m.Fragment,vW=po.RenderStrategy;function lQ(e,t){var n,o;let{transition:r=!0,beforeEnter:i,afterEnter:l,beforeLeave:s,afterLeave:a,enter:c,enterFrom:u,enterTo:d,entered:I,leave:C,leaveFrom:f,leaveTo:A,...v}=e,h=m.useRef(null),p=pW(e),b=tt(...p?[h,t]:t===null?[]:[t]),y=(n=v.unmount)==null||n?hr.Unmount:hr.Hidden,{show:Z,appear:G,initial:V}=rQ(),[S,k]=m.useState(Z?"visible":"hidden"),B=iQ(),{register:R,unregister:W}=B;Ke(()=>R(h),[R,h]),Ke(()=>{if(y===hr.Hidden&&h.current){if(Z&&S!=="visible"){k("visible");return}return pt(S,{hidden:()=>W(h),visible:()=>R(h)})}},[S,h,R,W,Z,y]);let w=Ya();Ke(()=>{if(p&&w&&S==="visible"&&h.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[h,S,w,p]);let X=V&&!G,E=G&&Z&&V,M=m.useRef(!1),L=bW(()=>{M.current||(k("hidden"),W(h))},B),F=he(T=>{M.current=!0;let j=T?"enter":"leave";L.onStart(h,j,J=>{J==="enter"?i==null||i():J==="leave"&&(s==null||s())})}),Y=he(T=>{let j=T?"enter":"leave";M.current=!1,L.onStop(h,j,J=>{J==="enter"?l==null||l():J==="leave"&&(a==null||a())}),j==="leave"&&!vd(L)&&(k("hidden"),W(h))});m.useEffect(()=>{p&&r||(F(Z),Y(Z))},[Z,p,r]);let N=(()=>!(!r||!p||!w||X))(),[,x]=LA(N,h,Z,{start:F,end:Y}),H=ir({ref:b,className:((o=Nh(v.className,E&&c,E&&u,x.enter&&c,x.enter&&x.closed&&u,x.enter&&!x.closed&&d,x.leave&&C,x.leave&&!x.closed&&f,x.leave&&x.closed&&A,!x.transition&&Z&&I))==null?void 0:o.trim())||void 0,...KA(x)}),K=0;return S==="visible"&&(K|=Ht.Open),S==="hidden"&&(K|=Ht.Closed),x.enter&&(K|=Ht.Opening),x.leave&&(K|=Ht.Closing),P.createElement(yd.Provider,{value:L},P.createElement(lW,{value:K},Oe({ourProps:H,theirProps:v,defaultTag:yW,features:vW,visible:S==="visible",name:"Transition.Child"})))}function sQ(e,t){let{show:n,appear:o=!1,unmount:r=!0,...i}=e,l=m.useRef(null),s=pW(e),a=tt(...s?[l,t]:t===null?[]:[t]);Ya();let c=ns();if(n===void 0&&c!==null&&(n=(c&Ht.Open)===Ht.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=m.useState(n?"visible":"hidden"),I=bW(()=>{n||d("hidden")}),[C,f]=m.useState(!0),A=m.useRef([n]);Ke(()=>{C!==!1&&A.current[A.current.length-1]!==n&&(A.current.push(n),f(!1))},[A,n]);let v=m.useMemo(()=>({show:n,appear:o,initial:C}),[n,o,C]);HA(n,l,()=>d("hidden")),Ke(()=>{n?d("visible"):!vd(I)&&l.current!==null&&d("hidden")},[n,I]);let h={unmount:r},p=he(()=>{var y;C&&f(!1),(y=e.beforeEnter)==null||y.call(e)}),b=he(()=>{var y;C&&f(!1),(y=e.beforeLeave)==null||y.call(e)});return P.createElement(yd.Provider,{value:I},P.createElement(bd.Provider,{value:v},Oe({ourProps:{...h,as:m.Fragment,children:P.createElement(ZW,{ref:a,...h,...i,beforeEnter:p,beforeLeave:b})},theirProps:{},defaultTag:m.Fragment,features:vW,visible:u==="visible",name:"Transition"})))}function aQ(e,t){let n=m.useContext(bd)!==null,o=ns()!==null;return P.createElement(P.Fragment,null,!n&&o?P.createElement(Kh,{ref:t,...e}):P.createElement(ZW,{ref:t,...e}))}let Kh=je(sQ),ZW=je(lQ),QA=je(aQ),Vt=Object.assign(Kh,{Child:QA,Root:Kh});var gQ=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(gQ||{}),cQ=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(cQ||{});let uQ={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},OA=m.createContext(null);OA.displayName="DialogContext";function Zd(e){let t=m.useContext(OA);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Zd),n}return t}function dQ(e,t){return pt(t.type,uQ,e,t)}let Iv=je(function(e,t){let n=m.useId(),{id:o=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:l,role:s="dialog",autoFocus:a=!0,__demoMode:c=!1,unmount:u=!1,...d}=e,I=m.useRef(!1);s=function(){return s==="dialog"||s==="alertdialog"?s:(I.current||(I.current=!0,console.warn(`Invalid role [${s}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let C=ns();r===void 0&&C!==null&&(r=(C&Ht.Open)===Ht.Open);let f=m.useRef(null),A=tt(f,t),v=Dr(f),h=r?0:1,[p,b]=m.useReducer(dQ,{titleId:null,descriptionId:null,panelRef:m.createRef()}),y=he(()=>i(!1)),Z=he(N=>b({type:0,id:N})),G=Ya()?h===0:!1,[V,S]=dW(),k={get current(){var N;return(N=p.panelRef.current)!=null?N:f.current}},B=UA(),{resolveContainers:R}=mW({mainTreeNode:B,portals:V,defaultContainers:[k]}),W=C!==null?(C&Ht.Closing)===Ht.Closing:!1;sU(c||W?!1:G,{allowed:he(()=>{var N,x;return[(x=(N=f.current)==null?void 0:N.closest("[data-headlessui-portal]"))!=null?x:null]}),disallowed:he(()=>{var N;return[(N=B==null?void 0:B.closest("body > *:not(#headlessui-portal-root)"))!=null?N:null]})}),MR(G,R,N=>{N.preventDefault(),y()}),UP(G,v==null?void 0:v.defaultView,N=>{N.preventDefault(),N.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),y()}),jR(c||W?!1:G,v,R),HA(G,f,y);let[w,X]=YA(),E=m.useMemo(()=>[{dialogState:h,close:y,setTitleId:Z,unmount:u},p],[h,p,y,Z,u]),M=m.useMemo(()=>({open:h===0}),[h]),L={ref:A,id:o,role:s,tabIndex:-1,"aria-modal":c?void 0:h===0?!0:void 0,"aria-labelledby":p.titleId,"aria-describedby":w,unmount:u},F=!PP(),Y=di.None;return G&&!c&&(Y|=di.RestoreFocus,Y|=di.TabLock,a&&(Y|=di.AutoFocus),F&&(Y|=di.InitialFocus)),P.createElement(sW,null,P.createElement(dv,{force:!0},P.createElement(CW,null,P.createElement(OA.Provider,{value:E},P.createElement(IW,{target:f},P.createElement(dv,{force:!1},P.createElement(X,{slot:M},P.createElement(S,null,P.createElement(qP,{initialFocus:l,initialFocusFallback:f,containers:R,features:Y},P.createElement(YR,{value:y},Oe({ourProps:L,theirProps:d,slot:M,defaultTag:IQ,features:CQ,visible:h===0,name:"Dialog"})))))))))))}),IQ="div",CQ=po.RenderStrategy|po.Static;function mQ(e,t){let{transition:n=!1,open:o,...r}=e,i=ns(),l=e.hasOwnProperty("open")||i!==null,s=e.hasOwnProperty("onClose");if(!l&&!s)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!s)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(o!==void 0||n)&&!r.static?P.createElement(Cu,null,P.createElement(Vt,{show:o,transition:n,unmount:r.unmount},P.createElement(Iv,{ref:t,...r}))):P.createElement(Cu,null,P.createElement(Iv,{ref:t,open:o,...r}))}let hQ="div";function fQ(e,t){let n=m.useId(),{id:o=`headlessui-dialog-panel-${n}`,transition:r=!1,...i}=e,[{dialogState:l,unmount:s},a]=Zd("Dialog.Panel"),c=tt(t,a.panelRef),u=m.useMemo(()=>({open:l===0}),[l]),d=he(C=>{C.stopPropagation()}),I={ref:c,id:o,onClick:d};return P.createElement(r?QA:m.Fragment,{...r?{unmount:s}:{}},Oe({ourProps:I,theirProps:i,slot:u,defaultTag:hQ,name:"Dialog.Panel"}))}let AQ="div";function pQ(e,t){let{transition:n=!1,...o}=e,[{dialogState:r,unmount:i}]=Zd("Dialog.Backdrop"),l=m.useMemo(()=>({open:r===0}),[r]),s={ref:t,"aria-hidden":!0};return P.createElement(n?QA:m.Fragment,{...n?{unmount:i}:{}},Oe({ourProps:s,theirProps:o,slot:l,defaultTag:AQ,name:"Dialog.Backdrop"}))}let bQ="h2";function yQ(e,t){let n=m.useId(),{id:o=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:l}]=Zd("Dialog.Title"),s=tt(t);m.useEffect(()=>(l(o),()=>l(null)),[o,l]);let a=m.useMemo(()=>({open:i===0}),[i]);return Oe({ourProps:{ref:s,id:o},theirProps:r,slot:a,defaultTag:bQ,name:"Dialog.Title"})}let vQ=je(mQ),GW=je(fQ),ZQ=je(pQ),GQ=je(yQ),Zn=Object.assign(vQ,{Panel:GW,Title:GQ,Description:xR});var BQ=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(BQ||{}),SQ=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(SQ||{});let VQ={0:e=>({...e,popoverState:pt(e.popoverState,{0:1,1:0}),__demoMode:!1}),1(e){return e.popoverState===1?e:{...e,popoverState:1,__demoMode:!1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},_A=m.createContext(null);_A.displayName="PopoverContext";function Gd(e){let t=m.useContext(_A);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Gd),n}return t}let Bd=m.createContext(null);Bd.displayName="PopoverAPIContext";function qA(e){let t=m.useContext(Bd);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,qA),n}return t}let $A=m.createContext(null);$A.displayName="PopoverGroupContext";function BW(){return m.useContext($A)}let Sd=m.createContext(null);Sd.displayName="PopoverPanelContext";function RQ(){return m.useContext(Sd)}function WQ(e,t){return pt(t.type,VQ,e,t)}let wQ="div";function kQ(e,t){var n;let{__demoMode:o=!1,...r}=e,i=m.useRef(null),l=tt(t,wR(F=>{i.current=F})),s=m.useRef([]),a=m.useReducer(WQ,{__demoMode:o,popoverState:o?0:1,buttons:s,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:m.createRef(),afterPanelSentinel:m.createRef(),afterButtonSentinel:m.createRef()}),[{popoverState:c,button:u,buttonId:d,panel:I,panelId:C,beforePanelSentinel:f,afterPanelSentinel:A,afterButtonSentinel:v},h]=a,p=Dr((n=i.current)!=null?n:u),b=m.useMemo(()=>{if(!u||!I)return!1;for(let T of document.querySelectorAll("body > *"))if(Number(T==null?void 0:T.contains(u))^Number(T==null?void 0:T.contains(I)))return!0;let F=Cd(),Y=F.indexOf(u),N=(Y+F.length-1)%F.length,x=(Y+1)%F.length,H=F[N],K=F[x];return!I.contains(H)&&!I.contains(K)},[u,I]),y=Ot(d),Z=Ot(C),G=m.useMemo(()=>({buttonId:y,panelId:Z,close:()=>h({type:1})}),[y,Z,h]),V=BW(),S=V==null?void 0:V.registerPopover,k=he(()=>{var F;return(F=V==null?void 0:V.isFocusWithinPopoverGroup())!=null?F:(p==null?void 0:p.activeElement)&&((u==null?void 0:u.contains(p.activeElement))||(I==null?void 0:I.contains(p.activeElement)))});m.useEffect(()=>S==null?void 0:S(G),[S,G]);let[B,R]=dW(),W=UA(u),w=mW({mainTreeNode:W,portals:B,defaultContainers:[u,I]});EA(p==null?void 0:p.defaultView,"focus",F=>{var Y,N,x,H,K,T;F.target!==window&&F.target instanceof HTMLElement&&c===0&&(k()||u&&I&&(w.contains(F.target)||(N=(Y=f.current)==null?void 0:Y.contains)!=null&&N.call(Y,F.target)||(H=(x=A.current)==null?void 0:x.contains)!=null&&H.call(x,F.target)||(T=(K=v.current)==null?void 0:K.contains)!=null&&T.call(K,F.target)||h({type:1})))},!0),MR(c===0,w.resolveContainers,(F,Y)=>{h({type:1}),ER(Y,FA.Loose)||(F.preventDefault(),u==null||u.focus())});let X=he(F=>{h({type:1});let Y=(()=>F?F instanceof HTMLElement?F:"current"in F&&F.current instanceof HTMLElement?F.current:u:u)();Y==null||Y.focus()}),E=m.useMemo(()=>({close:X,isPortalled:b}),[X,b]),M=m.useMemo(()=>({open:c===0,close:X}),[c,X]),L={ref:l};return P.createElement(Cu,{node:W},P.createElement(NP,null,P.createElement(Sd.Provider,{value:null},P.createElement(_A.Provider,{value:a},P.createElement(Bd.Provider,{value:E},P.createElement(YR,{value:X},P.createElement(lW,{value:pt(c,{0:Ht.Open,1:Ht.Closed})},P.createElement(R,null,Oe({ourProps:L,theirProps:r,slot:M,defaultTag:wQ,name:"Popover"})))))))))}let xQ="button";function XQ(e,t){let n=m.useId(),{id:o=`headlessui-popover-button-${n}`,disabled:r=!1,autoFocus:i=!1,...l}=e,[s,a]=Gd("Popover.Button"),{isPortalled:c}=qA("Popover.Button"),u=m.useRef(null),d=`headlessui-focus-sentinel-${m.useId()}`,I=BW(),C=I==null?void 0:I.closeOthers,f=RQ()!==null;m.useEffect(()=>{if(!f)return a({type:3,buttonId:o}),()=>{a({type:3,buttonId:null})}},[f,o,a]);let[A]=m.useState(()=>Symbol()),v=tt(u,t,xP(),f?null:Y=>{if(Y)s.buttons.current.push(A);else{let N=s.buttons.current.indexOf(A);N!==-1&&s.buttons.current.splice(N,1)}s.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),Y&&a({type:2,button:Y})}),h=tt(u,t),p=Dr(u),b=he(Y=>{var N,x,H;if(f){if(s.popoverState===1)return;switch(Y.key){case $e.Space:case $e.Enter:Y.preventDefault(),(x=(N=Y.target).click)==null||x.call(N),a({type:1}),(H=s.button)==null||H.focus();break}}else switch(Y.key){case $e.Space:case $e.Enter:Y.preventDefault(),Y.stopPropagation(),s.popoverState===1&&(C==null||C(s.buttonId)),a({type:0});break;case $e.Escape:if(s.popoverState!==0)return C==null?void 0:C(s.buttonId);if(!u.current||p!=null&&p.activeElement&&!u.current.contains(p.activeElement))return;Y.preventDefault(),Y.stopPropagation(),a({type:1});break}}),y=he(Y=>{f||Y.key===$e.Space&&Y.preventDefault()}),Z=he(Y=>{var N,x;ud(Y.currentTarget)||r||(f?(a({type:1}),(N=s.button)==null||N.focus()):(Y.preventDefault(),Y.stopPropagation(),s.popoverState===1&&(C==null||C(s.buttonId)),a({type:0}),(x=s.button)==null||x.focus()))}),G=he(Y=>{Y.preventDefault(),Y.stopPropagation()}),{isFocusVisible:V,focusProps:S}=ka({autoFocus:i}),{isHovered:k,hoverProps:B}=gd({isDisabled:r}),{pressed:R,pressProps:W}=ZR({disabled:r}),w=s.popoverState===0,X=m.useMemo(()=>({open:w,active:R||w,disabled:r,hover:k,focus:V,autofocus:i}),[w,k,V,R,r,i]),E=TR(e,u),M=Yi(f?{ref:h,type:E,onKeyDown:b,onClick:Z,disabled:r||void 0,autoFocus:i}:{ref:v,id:s.buttonId,type:E,"aria-expanded":s.popoverState===0,"aria-controls":s.panel?s.panelId:void 0,disabled:r||void 0,autoFocus:i,onKeyDown:b,onKeyUp:y,onClick:Z,onMouseDown:G},S,B,W),L=PA(),F=he(()=>{let Y=s.panel;if(!Y)return;function N(){pt(L.current,{[bn.Forwards]:()=>vt(Y,Ee.First),[bn.Backwards]:()=>vt(Y,Ee.Last)})===Tn.Error&&vt(Cd().filter(x=>x.dataset.headlessuiFocusGuard!=="true"),pt(L.current,{[bn.Forwards]:Ee.Next,[bn.Backwards]:Ee.Previous}),{relativeTo:s.button})}N()});return P.createElement(P.Fragment,null,Oe({ourProps:M,theirProps:l,slot:X,defaultTag:xQ,name:"Popover.Button"}),w&&!f&&c&&P.createElement(yo,{id:d,ref:s.afterButtonSentinel,features:bo.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:F}))}let JQ="div",NQ=po.RenderStrategy|po.Static;function SW(e,t){let n=m.useId(),{id:o=`headlessui-popover-backdrop-${n}`,transition:r=!1,...i}=e,[{popoverState:l},s]=Gd("Popover.Backdrop"),a=m.useRef(null),c=tt(t,a),u=ns(),[d,I]=LA(r,a,u!==null?(u&Ht.Open)===Ht.Open:l===0),C=he(v=>{if(ud(v.currentTarget))return v.preventDefault();s({type:1})}),f=m.useMemo(()=>({open:l===0}),[l]),A={ref:c,id:o,"aria-hidden":!0,onClick:C,...KA(I)};return Oe({ourProps:A,theirProps:i,slot:f,defaultTag:JQ,features:NQ,visible:d,name:"Popover.Backdrop"})}let YQ="div",HQ=po.RenderStrategy|po.Static;function FQ(e,t){let n=m.useId(),{id:o=`headlessui-popover-panel-${n}`,focus:r=!1,anchor:i,portal:l=!1,modal:s=!1,transition:a=!1,...c}=e,[u,d]=Gd("Popover.Panel"),{close:I,isPortalled:C}=qA("Popover.Panel"),f=`headlessui-focus-sentinel-before-${n}`,A=`headlessui-focus-sentinel-after-${n}`,v=m.useRef(null),h=kP(i),[p,b]=JP(h),y=XP();h&&(l=!0);let Z=tt(v,t,h?p:null,F=>{d({type:4,panel:F})}),G=Dr(v),V=XD();Ke(()=>(d({type:5,panelId:o}),()=>{d({type:5,panelId:null})}),[o,d]);let S=ns(),[k,B]=LA(a,v,S!==null?(S&Ht.Open)===Ht.Open:u.popoverState===0);HA(k,u.button,()=>{d({type:1})});let R=u.__demoMode?!1:s&&k;jR(R,G);let W=he(F=>{var Y;switch(F.key){case $e.Escape:if(u.popoverState!==0||!v.current||G!=null&&G.activeElement&&!v.current.contains(G.activeElement))return;F.preventDefault(),F.stopPropagation(),d({type:1}),(Y=u.button)==null||Y.focus();break}});m.useEffect(()=>{var F;e.static||u.popoverState===1&&((F=e.unmount)==null||F)&&d({type:4,panel:null})},[u.popoverState,e.unmount,e.static,d]),m.useEffect(()=>{if(u.__demoMode||!r||u.popoverState!==0||!v.current)return;let F=G==null?void 0:G.activeElement;v.current.contains(F)||vt(v.current,Ee.First)},[u.__demoMode,r,v.current,u.popoverState]);let w=m.useMemo(()=>({open:u.popoverState===0,close:I}),[u.popoverState,I]),X=Yi(h?y():{},{ref:Z,id:o,onKeyDown:W,onBlur:r&&u.popoverState===0?F=>{var Y,N,x,H,K;let T=F.relatedTarget;T&&v.current&&((Y=v.current)!=null&&Y.contains(T)||(d({type:1}),((x=(N=u.beforePanelSentinel.current)==null?void 0:N.contains)!=null&&x.call(N,T)||(K=(H=u.afterPanelSentinel.current)==null?void 0:H.contains)!=null&&K.call(H,T))&&T.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...c.style,...b,"--button-width":rU(u.button,!0).width},...KA(B)}),E=PA(),M=he(()=>{let F=v.current;if(!F)return;function Y(){pt(E.current,{[bn.Forwards]:()=>{var N;vt(F,Ee.First)===Tn.Error&&((N=u.afterPanelSentinel.current)==null||N.focus())},[bn.Backwards]:()=>{var N;(N=u.button)==null||N.focus({preventScroll:!0})}})}Y()}),L=he(()=>{let F=v.current;if(!F)return;function Y(){pt(E.current,{[bn.Forwards]:()=>{var N;if(!u.button)return;let x=Cd(),H=x.indexOf(u.button),K=x.slice(0,H+1),T=[...x.slice(H+1),...K];for(let j of T.slice())if(j.dataset.headlessuiFocusGuard==="true"||(N=u.panel)!=null&&N.contains(j)){let J=T.indexOf(j);J!==-1&&T.splice(J,1)}vt(T,Ee.First,{sorted:!1})},[bn.Backwards]:()=>{var N;vt(F,Ee.Previous)===Tn.Error&&((N=u.button)==null||N.focus())}})}Y()});return P.createElement(sW,null,P.createElement(Sd.Provider,{value:o},P.createElement(Bd.Provider,{value:{close:I,isPortalled:C}},P.createElement(CW,{enabled:l?e.static||k:!1},k&&C&&P.createElement(yo,{id:f,ref:u.beforePanelSentinel,features:bo.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:M}),Oe({mergeRefs:V,ourProps:X,theirProps:c,slot:w,defaultTag:YQ,features:HQ,visible:k,name:"Popover.Panel"}),k&&C&&P.createElement(yo,{id:A,ref:u.afterPanelSentinel,features:bo.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:L})))))}let EQ="div";function KQ(e,t){let n=m.useRef(null),o=tt(n,t),[r,i]=m.useState([]),l=he(f=>{i(A=>{let v=A.indexOf(f);if(v!==-1){let h=A.slice();return h.splice(v,1),h}return A})}),s=he(f=>(i(A=>[...A,f]),()=>l(f))),a=he(()=>{var f;let A=jr(n);if(!A)return!1;let v=A.activeElement;return(f=n.current)!=null&&f.contains(v)?!0:r.some(h=>{var p,b;return((p=A.getElementById(h.buttonId.current))==null?void 0:p.contains(v))||((b=A.getElementById(h.panelId.current))==null?void 0:b.contains(v))})}),c=he(f=>{for(let A of r)A.buttonId.current!==f&&A.close()}),u=m.useMemo(()=>({registerPopover:s,unregisterPopover:l,isFocusWithinPopoverGroup:a,closeOthers:c}),[s,l,a,c]),d=m.useMemo(()=>({}),[]),I=e,C={ref:o};return P.createElement(Cu,null,P.createElement($A.Provider,{value:u},Oe({ourProps:C,theirProps:I,slot:d,defaultTag:EQ,name:"Popover.Group"})))}let LQ=je(kQ),VW=je(XQ),RW=je(SW),MQ=je(SW),WW=je(FQ),TQ=je(KQ),jQ=Object.assign(LQ,{Button:VW,Backdrop:MQ,Overlay:RW,Panel:WW,Group:TQ});var zQ=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(zQ||{});let DQ={0(e,t){let n=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:Ai(n,o=>o.element.current)}},1(e,t){let n=e.options.slice(),o=e.options.findIndex(r=>r.id===t.id);return o===-1?e:(n.splice(o,1),{...e,options:n})}},ep=m.createContext(null);ep.displayName="RadioGroupDataContext";function tp(e){let t=m.useContext(ep);if(t===null){let n=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,tp),n}return t}let np=m.createContext(null);np.displayName="RadioGroupActionsContext";function op(e){let t=m.useContext(np);if(t===null){let n=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,op),n}return t}function UQ(e,t){return pt(t.type,DQ,e,t)}let PQ="div";function QQ(e,t){let n=m.useId(),o=cd(),{id:r=`headlessui-radiogroup-${n}`,value:i,form:l,name:s,onChange:a,by:c,disabled:u=o||!1,defaultValue:d,...I}=e,C=nU(c),[f,A]=m.useReducer(UQ,{options:[]}),v=f.options,[h,p]=NR(),[b,y]=YA(),Z=m.useRef(null),G=tt(Z,t),V=YD(d),[S,k]=ND(i,a,V),B=m.useMemo(()=>v.find(N=>!N.propsRef.current.disabled),[v]),R=m.useMemo(()=>v.some(N=>C(N.propsRef.current.value,S)),[v,S]),W=he(N=>{var x;if(u||C(N,S))return!1;let H=(x=v.find(K=>C(K.propsRef.current.value,N)))==null?void 0:x.propsRef.current;return H!=null&&H.disabled?!1:(k==null||k(N),!0)}),w=he(N=>{let x=Z.current;if(!x)return;let H=jr(x),K=v.filter(T=>T.propsRef.current.disabled===!1).map(T=>T.element.current);switch(N.key){case $e.Enter:HD(N.currentTarget);break;case $e.ArrowLeft:case $e.ArrowUp:if(N.preventDefault(),N.stopPropagation(),vt(K,Ee.Previous|Ee.WrapAround)===Tn.Success){let T=v.find(j=>j.element.current===(H==null?void 0:H.activeElement));T&&W(T.propsRef.current.value)}break;case $e.ArrowRight:case $e.ArrowDown:if(N.preventDefault(),N.stopPropagation(),vt(K,Ee.Next|Ee.WrapAround)===Tn.Success){let T=v.find(j=>j.element.current===(H==null?void 0:H.activeElement));T&&W(T.propsRef.current.value)}break;case $e.Space:{N.preventDefault(),N.stopPropagation();let T=v.find(j=>j.element.current===(H==null?void 0:H.activeElement));T&&W(T.propsRef.current.value)}break}}),X=he(N=>(A({type:0,...N}),()=>A({type:1,id:N.id}))),E=m.useMemo(()=>({value:S,firstOption:B,containsCheckedOption:R,disabled:u,compare:C,...f}),[S,B,R,u,C,f]),M=m.useMemo(()=>({registerOption:X,change:W}),[X,W]),L={ref:G,id:r,role:"radiogroup","aria-labelledby":h,"aria-describedby":b,onKeyDown:w},F=m.useMemo(()=>({value:S}),[S]),Y=m.useCallback(()=>{if(V!==void 0)return W(V)},[W,V]);return P.createElement(y,{name:"RadioGroup.Description"},P.createElement(p,{name:"RadioGroup.Label"},P.createElement(np.Provider,{value:M},P.createElement(ep.Provider,{value:E},s!=null&&P.createElement(MD,{disabled:u,data:{[s]:S||"on"},overrides:{type:"radio",checked:S!=null},form:l,onReset:Y}),Oe({ourProps:L,theirProps:I,slot:F,defaultTag:PQ,name:"RadioGroup"})))))}let OQ="div";function _Q(e,t){var n;let o=tp("RadioGroup.Option"),r=op("RadioGroup.Option"),i=m.useId(),{id:l=`headlessui-radiogroup-option-${i}`,value:s,disabled:a=o.disabled||!1,autoFocus:c=!1,...u}=e,d=m.useRef(null),I=tt(d,t),[C,f]=NR(),[A,v]=YA(),h=Ot({value:s,disabled:a});Ke(()=>r.registerOption({id:l,element:d,propsRef:h}),[l,r,d,h]);let p=he(R=>{var W;if(ud(R.currentTarget))return R.preventDefault();r.change(s)&&((W=d.current)==null||W.focus())}),b=((n=o.firstOption)==null?void 0:n.id)===l,{isFocusVisible:y,focusProps:Z}=ka({autoFocus:c}),{isHovered:G,hoverProps:V}=gd({isDisabled:a}),S=o.compare(o.value,s),k=Yi({ref:I,id:l,role:"radio","aria-checked":S?"true":"false","aria-labelledby":C,"aria-describedby":A,"aria-disabled":a?!0:void 0,tabIndex:(()=>a?-1:S||!o.containsCheckedOption&&b?0:-1)(),onClick:a?void 0:p,autoFocus:c},Z,V),B=m.useMemo(()=>({checked:S,disabled:a,active:y,hover:G,focus:y,autofocus:c}),[S,a,G,y,c]);return P.createElement(v,{name:"RadioGroup.Description"},P.createElement(f,{name:"RadioGroup.Label"},Oe({ourProps:k,theirProps:u,slot:B,defaultTag:OQ,name:"RadioGroup.Option"})))}let qQ="span";function $Q(e,t){var n;let o=tp("Radio"),r=op("Radio"),i=m.useId(),l=RR(),s=cd(),{id:a=l||`headlessui-radio-${i}`,value:c,disabled:u=o.disabled||s||!1,autoFocus:d=!1,...I}=e,C=m.useRef(null),f=tt(C,t),A=JR(),v=DD(),h=Ot({value:c,disabled:u});Ke(()=>r.registerOption({id:a,element:C,propsRef:h}),[a,r,C,h]);let p=he(R=>{var W;if(ud(R.currentTarget))return R.preventDefault();r.change(c)&&((W=C.current)==null||W.focus())}),{isFocusVisible:b,focusProps:y}=ka({autoFocus:d}),{isHovered:Z,hoverProps:G}=gd({isDisabled:u}),V=((n=o.firstOption)==null?void 0:n.id)===a,S=o.compare(o.value,c),k=Yi({ref:f,id:a,role:"radio","aria-checked":S?"true":"false","aria-labelledby":A,"aria-describedby":v,"aria-disabled":u?!0:void 0,tabIndex:(()=>u?-1:S||!o.containsCheckedOption&&V?0:-1)(),autoFocus:d,onClick:u?void 0:p},y,G),B=m.useMemo(()=>({checked:S,disabled:u,hover:Z,focus:b,autofocus:d}),[S,u,Z,b,d]);return Oe({ourProps:k,theirProps:I,slot:B,defaultTag:qQ,name:"Radio"})}let e8=je(QQ),t8=je(_Q),wW=je($Q),n8=$D,o8=xR,r8=Object.assign(e8,{Option:t8,Radio:wW,Label:n8,Description:o8});function i8({onFocus:e}){let[t,n]=m.useState(!0),o=pd();return t?P.createElement(yo,{as:"button",type:"button",features:bo.Focusable,onFocus:r=>{r.preventDefault();let i,l=50;function s(){if(l--<=0){i&&cancelAnimationFrame(i);return}if(e()){if(cancelAnimationFrame(i),!o.current)return;n(!1);return}i=requestAnimationFrame(s)}i=requestAnimationFrame(s)}}):null}const kW=m.createContext(null);function l8(){return{groups:new Map,get(e,t){var n;let o=this.groups.get(e);o||(o=new Map,this.groups.set(e,o));let r=(n=o.get(t))!=null?n:0;o.set(t,r+1);let i=Array.from(o.keys()).indexOf(t);function l(){let s=o.get(t);s>1?o.set(t,s-1):o.delete(t)}return[i,l]}}}function s8({children:e}){let t=m.useRef(l8());return m.createElement(kW.Provider,{value:t},e)}function xW(e){let t=m.useContext(kW);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let n=m.useId(),[o,r]=t.current.get(e,n);return m.useEffect(()=>r,[]),o}var a8=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(a8||{}),g8=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(g8||{}),c8=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(c8||{});let u8={0(e,t){var n;let o=Ai(e.tabs,u=>u.current),r=Ai(e.panels,u=>u.current),i=o.filter(u=>{var d;return!((d=u.current)!=null&&d.hasAttribute("disabled"))}),l={...e,tabs:o,panels:r};if(t.index<0||t.index>o.length-1){let u=pt(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>pt(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(i.length===0)return l;let d=pt(u,{0:()=>o.indexOf(i[0]),1:()=>o.indexOf(i[i.length-1])});return{...l,selectedIndex:d===-1?e.selectedIndex:d}}let s=o.slice(0,t.index),a=[...o.slice(t.index),...s].find(u=>i.includes(u));if(!a)return l;let c=(n=o.indexOf(a))!=null?n:e.selectedIndex;return c===-1&&(c=e.selectedIndex),{...l,selectedIndex:c}},1(e,t){if(e.tabs.includes(t.tab))return e;let n=e.tabs[e.selectedIndex],o=Ai([...e.tabs,t.tab],i=>i.current),r=e.selectedIndex;return e.info.current.isControlled||(r=o.indexOf(n),r===-1&&(r=e.selectedIndex)),{...e,tabs:o,selectedIndex:r}},2(e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:Ai([...e.panels,t.panel],n=>n.current)}},4(e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},rp=m.createContext(null);rp.displayName="TabsDataContext";function Nl(e){let t=m.useContext(rp);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Nl),n}return t}let ip=m.createContext(null);ip.displayName="TabsActionsContext";function lp(e){let t=m.useContext(ip);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,lp),n}return t}function d8(e,t){return pt(t.type,u8,e,t)}let I8="div";function C8(e,t){let{defaultIndex:n=0,vertical:o=!1,manual:r=!1,onChange:i,selectedIndex:l=null,...s}=e;const a=o?"vertical":"horizontal",c=r?"manual":"auto";let u=l!==null,d=Ot({isControlled:u}),I=tt(t),[C,f]=m.useReducer(d8,{info:d,selectedIndex:l??n,tabs:[],panels:[]}),A=m.useMemo(()=>({selectedIndex:C.selectedIndex}),[C.selectedIndex]),v=Ot(i||(()=>{})),h=Ot(C.tabs),p=m.useMemo(()=>({orientation:a,activation:c,...C}),[a,c,C]),b=he(k=>(f({type:1,tab:k}),()=>f({type:2,tab:k}))),y=he(k=>(f({type:3,panel:k}),()=>f({type:4,panel:k}))),Z=he(k=>{G.current!==k&&v.current(k),u||f({type:0,index:k})}),G=Ot(u?e.selectedIndex:C.selectedIndex),V=m.useMemo(()=>({registerTab:b,registerPanel:y,change:Z}),[]);Ke(()=>{f({type:0,index:l??n})},[l]),Ke(()=>{if(G.current===void 0||C.tabs.length<=0)return;let k=Ai(C.tabs,B=>B.current);k.some((B,R)=>C.tabs[R]!==B)&&Z(k.indexOf(C.tabs[G.current]))});let S={ref:I};return P.createElement(s8,null,P.createElement(ip.Provider,{value:V},P.createElement(rp.Provider,{value:p},p.tabs.length<=0&&P.createElement(i8,{onFocus:()=>{var k,B;for(let R of h.current)if(((k=R.current)==null?void 0:k.tabIndex)===0)return(B=R.current)==null||B.focus(),!0;return!1}}),Oe({ourProps:S,theirProps:s,slot:A,defaultTag:I8,name:"Tabs"}))))}let m8="div";function h8(e,t){let{orientation:n,selectedIndex:o}=Nl("Tab.List"),r=tt(t),i=m.useMemo(()=>({selectedIndex:o}),[o]);return Oe({ourProps:{ref:r,role:"tablist","aria-orientation":n},theirProps:e,slot:i,defaultTag:m8,name:"Tabs.List"})}let f8="button";function A8(e,t){var n,o;let r=m.useId(),{id:i=`headlessui-tabs-tab-${r}`,disabled:l=!1,autoFocus:s=!1,...a}=e,{orientation:c,activation:u,selectedIndex:d,tabs:I,panels:C}=Nl("Tab"),f=lp("Tab"),A=Nl("Tab"),v=m.useRef(null),h=tt(v,t);Ke(()=>f.registerTab(v),[f,v]);let p=xW("tabs"),b=I.indexOf(v);b===-1&&(b=p);let y=b===d,Z=he(F=>{var Y;let N=F();if(N===Tn.Success&&u==="auto"){let x=(Y=jr(v))==null?void 0:Y.activeElement,H=A.tabs.findIndex(K=>K.current===x);H!==-1&&f.change(H)}return N}),G=he(F=>{let Y=I.map(N=>N.current).filter(Boolean);if(F.key===$e.Space||F.key===$e.Enter){F.preventDefault(),F.stopPropagation(),f.change(b);return}switch(F.key){case $e.Home:case $e.PageUp:return F.preventDefault(),F.stopPropagation(),Z(()=>vt(Y,Ee.First));case $e.End:case $e.PageDown:return F.preventDefault(),F.stopPropagation(),Z(()=>vt(Y,Ee.Last))}if(Z(()=>pt(c,{vertical(){return F.key===$e.ArrowUp?vt(Y,Ee.Previous|Ee.WrapAround):F.key===$e.ArrowDown?vt(Y,Ee.Next|Ee.WrapAround):Tn.Error},horizontal(){return F.key===$e.ArrowLeft?vt(Y,Ee.Previous|Ee.WrapAround):F.key===$e.ArrowRight?vt(Y,Ee.Next|Ee.WrapAround):Tn.Error}}))===Tn.Success)return F.preventDefault()}),V=m.useRef(!1),S=he(()=>{var F;V.current||(V.current=!0,(F=v.current)==null||F.focus({preventScroll:!0}),f.change(b),xa(()=>{V.current=!1}))}),k=he(F=>{F.preventDefault()}),{isFocusVisible:B,focusProps:R}=ka({autoFocus:s}),{isHovered:W,hoverProps:w}=gd({isDisabled:l}),{pressed:X,pressProps:E}=ZR({disabled:l}),M=m.useMemo(()=>({selected:y,hover:W,active:X,focus:B,autofocus:s,disabled:l}),[y,W,B,X,s,l]),L=Yi({ref:h,onKeyDown:G,onMouseDown:k,onClick:S,id:i,role:"tab",type:TR(e,v),"aria-controls":(o=(n=C[b])==null?void 0:n.current)==null?void 0:o.id,"aria-selected":y,tabIndex:y?0:-1,disabled:l||void 0,autoFocus:s},R,w,E);return Oe({ourProps:L,theirProps:a,slot:M,defaultTag:f8,name:"Tabs.Tab"})}let p8="div";function b8(e,t){let{selectedIndex:n}=Nl("Tab.Panels"),o=tt(t),r=m.useMemo(()=>({selectedIndex:n}),[n]);return Oe({ourProps:{ref:o},theirProps:e,slot:r,defaultTag:p8,name:"Tabs.Panels"})}let y8="div",v8=po.RenderStrategy|po.Static;function Z8(e,t){var n,o,r,i;let l=m.useId(),{id:s=`headlessui-tabs-panel-${l}`,tabIndex:a=0,...c}=e,{selectedIndex:u,tabs:d,panels:I}=Nl("Tab.Panel"),C=lp("Tab.Panel"),f=m.useRef(null),A=tt(f,t);Ke(()=>C.registerPanel(f),[C,f]);let v=xW("panels"),h=I.indexOf(f);h===-1&&(h=v);let p=h===u,{isFocusVisible:b,focusProps:y}=ka(),Z=m.useMemo(()=>({selected:p,focus:b}),[p,b]),G=Yi({ref:A,id:s,role:"tabpanel","aria-labelledby":(o=(n=d[h])==null?void 0:n.current)==null?void 0:o.id,tabIndex:p?a:-1},y);return!p&&((r=c.unmount)==null||r)&&!((i=c.static)!=null&&i)?P.createElement(yo,{"aria-hidden":"true",...G}):Oe({ourProps:G,theirProps:c,slot:Z,defaultTag:y8,features:v8,visible:p,name:"Tabs.Panel"})}let G8=je(A8),Vd=je(C8),Rd=je(h8),Wd=je(b8),wd=je(Z8),sp=Object.assign(G8,{Group:Vd,List:Rd,Panels:Wd,Panel:wd});const B8=()=>{const e="https://api.knowmeapp.com",[t,n]=m.useState([]),[o,r]=m.useState(null);m.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("token"),c=localStorage.getItem("id"),u=await Ie.get(`${e}/api/gallery/search/${c}`,{headers:{"x-token":a}});if(u.data.ok){const d=u.data.gallery.map(I=>({id:I.id_gallery,src:I.image_url,alt:`Image ${I.id_gallery}`}));n(d)}}catch(a){console.error("Error al obtener las imgenes:",a)}})()},[]);const i=async s=>{const a=s.target.files[0];if(r(a),a)try{const c=new FormData;c.append("recfile",a),c.append("id_profile",localStorage.getItem("id"));const u=localStorage.getItem("token"),d=await Ie.post(`${e}/api/gallery`,c,{headers:{"x-token":u,"Content-Type":"multipart/form-data"}});if(d.data.ok){console.log("Imagen subida correctamente:",d.data);const I={id:d.data.id,src:URL.createObjectURL(a),alt:a.name},C=[...t,I];n(C)}}catch(c){console.error("Error al subir la imagen:",c)}},l=async s=>{try{const a=localStorage.getItem("token"),c=await Ie.delete(`${e}/api/gallery/${s}`,{headers:{"x-token":a}});if(c.data.ok){console.log("Imagen eliminada correctamente:",c.data);const u=t.filter(d=>d.id!==s);n(u)}else console.error("Error al eliminar la imagen:",c.data.msg)}catch(a){console.error("Error al eliminar la imagen:",a)}};return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"px-auto col-span-full w-full",children:[g.jsx("h1",{className:"font-bold",children:"Galera"}),g.jsxs(Vd,{className:"flex flex-col-reverse",children:[g.jsx("div",{className:"lg:mx-3 mt-6 w-full max-w-md sm:block lg:max-w-none lg:px-5",children:g.jsxs(Rd,{className:"grid grid-cols-4 gap-4",children:[t.map(s=>g.jsx(sp,{className:"relative h-24 sm:w-24 cursor-pointer items-center justify-center ring-4 ring-transparent rounded-md bg-white text-sm font-medium uppercase text-gray-900 hover:bg-orange-50 focus:outline-none focus:ring-4 focus:ring-orange-500 focus:ring-offset-4",children:({selected:a})=>g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"sr-only",children:s.alt}),g.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-md",children:g.jsx("img",{src:s.src,alt:s.alt,className:"h-full w-full object-cover object-center"})}),g.jsx("button",{className:"absolute top-1 right-1 text-white bg-red-500 h-8 w-8 rounded-full p-1",onClick:c=>{c.stopPropagation(),l(s.id)},children:""})]})},s.id)),g.jsxs("label",{htmlFor:"image-upload",className:"relative flex h-24 sm:w-24 cursor-pointer items-center justify-center rounded-md bg-white text-sm font-medium uppercase text-gray-900 hover:bg-orange-50 focus:outline-none focus:ring focus:ring-opacity-50 focus:ring-offset-4",children:[g.jsx(TV,{className:"h-6 w-6 text-gray-500"}),g.jsx("input",{id:"image-upload",type:"file",accept:"image/*",className:"sr-only",onChange:i})]})]})}),g.jsx(Wd,{className:"w-full max-h-96 flex justify-center m-2",children:t.map(s=>g.jsx(wd,{children:g.jsx("img",{src:s.src,alt:s.alt,className:"h-96 max-w-full object-cover object-center sm:rounded-lg"})},s.id))})]})]})})},S8=()=>{const e="https://api.knowmeapp.com",[t,n]=m.useState([]),[o,r]=m.useState(!1),[i,l]=m.useState(null),[s,a]=m.useState(""),[c,u]=m.useState(!1),[d,I]=m.useState({title:"",description:"",phoneNumber:"",countryCode:"+52",price:""}),[C,f]=m.useState(!1),[A,v]=m.useState(null),[h,p]=m.useState(!1);m.useEffect(()=>{(async()=>{try{const R=localStorage.getItem("token"),W=localStorage.getItem("id"),w=await Ie.get(`${e}/api/products_services/search/${W}`,{headers:{"x-token":R}});w.data.ok&&Array.isArray(w.data.productsServices)?n(w.data.productsServices):n([])}catch(R){console.error("Error al obtener los productos y servicios:",R),n([])}})()},[]);const b=()=>{const{title:B,description:R,phoneNumber:W}=d;u(!!(B&&R&&W&&i))},y=B=>{const{name:R,value:W}=B.target;if(R==="price"){const w=W.replace(/[^0-9.]/g,"");(/^\d*\.?\d{0,2}$/.test(w)||w==="")&&I(E=>({...E,[R]:w}))}else if(R==="phoneNumber"){const w=W.replace(/\s/g,"");I(X=>({...X,[R]:w}))}else I(w=>({...w,[R]:W}));b()},Z=async()=>{if(!i){a("La imagen es obligatoria");return}p(!0);const B={title:d.title,description:d.description,phoneNumber:d.phoneNumber,countryCode:d.countryCode,price:d.price||""},R=new FormData;R.append("recfile",i),R.append("id_profile",localStorage.getItem("id")),R.append("title",B.title),R.append("description",B.description),R.append("contact_number",`${B.countryCode}${B.phoneNumber}`),R.append("price",B.price);const W=localStorage.getItem("token");try{C?await Ie.put(`${e}/api/products_services/${A}`,R,{headers:{"x-token":W,"Content-Type":"multipart/form-data"}}):await Ie.post(`${e}/api/products_services`,R,{headers:{"x-token":W,"Content-Type":"multipart/form-data"}});const w=await Ie.get(`${e}/api/products_services/search/${localStorage.getItem("id")}`,{headers:{"x-token":W}});n(w.data.productsServices),S()}catch(w){console.error("Error al guardar el producto o servicio:",w)}finally{p(!1)}},G=B=>{const R=B.target.files[0];if(R){if(!["image/png","image/jpeg","image/jpg"].includes(R.type)){a("Solo se permiten archivos PNG o JPG"),l(null),u(!1);return}a(""),l(R),b()}},V=async B=>{const R=localStorage.getItem("token");try{await Ie.delete(`${e}/api/products_services/${B}`,{headers:{"x-token":R}}),n(t.filter(W=>W.id_product!==B))}catch(W){console.error("Error al eliminar el producto o servicio:",W)}},S=()=>{r(!1),l(null),I({title:"",description:"",phoneNumber:"",countryCode:"+52",price:""}),a(""),f(!1),v(null)},k=B=>{const R=`${B.countryCode}${B.contact_number}`;let W=`Hola, estoy interesado en el producto "${B.title}" que vi en Know Me. Descripcin: ${B.description}.`;return B.price&&B.price!=="0.00"&&(W+=` Precio: ${new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(B.price)}.`),`https://api.whatsapp.com/send?phone=${encodeURIComponent(R)}&text=${encodeURIComponent(W)}&type=phone_number&app_absent=0`};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"px-auto col-span-full w-full",children:[g.jsx("h1",{className:"font-bold text-lg",children:"Productos y Servicios"}),g.jsxs(Vd,{className:"flex flex-col-reverse",children:[g.jsx("div",{className:"lg:mx-3 mt-6 w-full max-w-md sm:block lg:max-w-none lg:px-5",children:g.jsxs(Rd,{className:"grid grid-cols-4 gap-4",children:[t.map(B=>g.jsx(sp,{className:"relative h-24 sm:w-24 cursor-pointer items-center justify-center ring-4 ring-transparent rounded-md bg-white text-sm font-medium uppercase text-white hover:bg-orange-50 focus:outline-none focus:ring-4 focus:ring-orange-500 focus:ring-offset-4",children:({selected:R})=>g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"sr-only",children:B.title}),g.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-md",children:g.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:B.image_url&&g.jsx("img",{src:B.image_url,alt:B.title,className:"h-full w-full object-cover"})})}),g.jsx("span",{className:ot(R?"ring-orange-500":"ring-transparent","pointer-events-none absolute inset-0 rounded-md ring-2 ring-offset-2"),"aria-hidden":"true"}),g.jsx("button",{className:"absolute top-1 right-1 text-white bg-red-500 h-8 w-8 rounded-full p-1",onClick:W=>{W.stopPropagation(),V(B.id_product)},children:""})]})},B.id_product)),g.jsx("div",{className:"relative flex h-24 sm:w-24 cursor-pointer items-center justify-center rounded-md bg-white text-sm font-medium uppercase text-white hover:bg-orange-50 focus:outline-none focus:ring focus:ring-opacity-50 focus:ring-offset-4",onClick:()=>r(!0),children:g.jsx(TV,{className:"h-6 w-6 text-gray-500"})})]})}),g.jsx(Wd,{className:"w-full max-h-96 flex justify-center m-2",children:t.map(B=>g.jsx(wd,{children:g.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white",children:[g.jsx("div",{className:"aspect-h-4 aspect-w-3 bg-gray-200 sm:aspect-none h-20 sm:h-40",children:B.image_url&&g.jsx("img",{src:B.image_url,alt:B.title,className:"h-full w-full object-cover object-center sm:h-full sm:w-full"})}),g.jsxs("div",{className:"flex flex-1 flex-col space-y-2 p-4",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-900",children:B.title}),g.jsx("p",{className:"text-sm text-gray-500",children:B.description}),g.jsxs("div",{className:"flex flex-1 flex-col justify-end",children:[B.price&&B.price!=="0.00"&&g.jsx("p",{className:"text-sm italic text-gray-500",children:`Precio: ${new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(B.price)}`}),g.jsx("div",{className:"mt-6",children:g.jsxs("a",{href:k(B),target:"_blank",rel:"noopener noreferrer",className:"relative flex items-center justify-center rounded-md border border-transparent bg-gray-100 px-8 py-2 text-sm font-medium text-gray-900 hover:bg-gray-200",children:["Contactar",g.jsxs("span",{className:"sr-only",children:[", ",B.title]})]})})]})]})]})},B.id_product))})]})]}),o&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white p-6 rounded-md max-w-lg w-full",children:[g.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-700",children:C?"Editar Producto/Servicio":"Agregar Producto/Servicio"}),g.jsxs("div",{children:[g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Imagen (PNG o JPG)"}),g.jsx("input",{id:"image",name:"image",type:"file",accept:"image/png, image/jpeg",onChange:G,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"}),s&&g.jsx("p",{className:"text-red-500 text-sm mt-2",children:s})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Ttulo"}),g.jsx("input",{id:"title",name:"title",type:"text",required:!0,onChange:y,value:d.title,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm bg-white p-2"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descripcin"}),g.jsx("textarea",{id:"description",name:"description",required:!0,rows:3,onChange:y,value:d.description,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm bg-white p-2"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700",children:"Nmero de contacto (WhatsApp)"}),g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-500 sm:max-w-md",children:[g.jsxs("select",{id:"countryCode",name:"countryCode",onChange:y,value:d.countryCode,className:"block flex-shrink-0 py-1.5 pl-3 pr-1 bg-gray-50 border-gray-300 focus:ring-0 sm:text-sm",children:[g.jsx("option",{value:"+52",children:"Mxico (+52)"}),g.jsx("option",{value:"+34",children:"Espaa (+34)"}),g.jsx("option",{value:"+506",children:"Costa Rica (+506)"}),g.jsx("option",{value:"+57",children:"Colombia (+57)"}),g.jsx("option",{value:"+1",children:"Estados Unidos / Canad (+1)"})]}),g.jsx("input",{id:"phoneNumber",name:"phoneNumber",type:"tel",required:!0,onChange:y,value:d.phoneNumber,placeholder:"5512345678",className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Precio (opcional)"}),g.jsx("input",{id:"price",name:"price",type:"text",placeholder:"Precio (opcional)",onChange:y,value:d.price,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm bg-white p-2"})]}),g.jsxs("div",{className:"flex justify-end space-x-4",children:[g.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancelar"}),g.jsx("button",{type:"button",onClick:Z,disabled:!c||h,className:`px-4 py-2 ${c&&!h?"bg-orange-600 hover:bg-orange-700":"bg-gray-300 cursor-not-allowed"} text-white rounded-md`,children:h?g.jsxs("div",{className:"flex items-center",children:[g.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):C?"Guardar":"Agregar"})]})]})]})})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Lh=function(e,t){return Lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},Lh(e,t)};function Ue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Lh(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var be=function(){return be=Object.assign||function(t){for(var n,o=1,r=arguments.length;o<r;o++){n=arguments[o];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},be.apply(this,arguments)};function ap(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function V8(e,t,n,o){function r(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function s(u){try{c(o.next(u))}catch(d){l(d)}}function a(u){try{c(o.throw(u))}catch(d){l(d)}}function c(u){u.done?i(u.value):r(u.value).then(s,a)}c((o=o.apply(e,t||[])).next())})}function R8(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,r,i,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(c){return function(u){return a([c,u])}}function a(c){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,r&&(i=c[0]&2?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,r=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],r=0}finally{o=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function XW(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W8=function(e,t,n,o,r,i,l,s){if(!e){var a;if(t===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,r,i,l,s],u=0;a=new Error(t.replace(/%s/g,function(){return c[u++]})),a.name="Invariant Violation"}throw a.framesToPop=1,a}},w8=W8,bt=XW(w8),Ve=m.createContext(null);function k8(){bt(!!m.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=m.useContext(Ve);return bt(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}function x8(e,t,n){return Object.keys(e).reduce(function(r,i){return t(r,e[i],i)},n)}function X8(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function J8(e,t,n,o){var r={},i=function(l,s){var a=n[s];a!==t[s]&&(r[s]=a,l(o,a))};return X8(e,i),r}function N8(e,t,n){var o=x8(n,function(i,l,s){return typeof e[s]=="function"&&i.push(google.maps.event.addListener(t,l,e[s])),i},[]);return o}function Y8(e){google.maps.event.removeListener(e)}function We(e){e===void 0&&(e=[]),e.forEach(Y8)}function Re(e){var t=e.updaterMap,n=e.eventMap,o=e.prevProps,r=e.nextProps,i=e.instance,l=N8(r,i,n);return J8(t,o,r,i),l}var Cv={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},mv={extraMapTypes:function(e,t){t.forEach(function(o,r){e.mapTypes.set(String(r),o)})},center:function(e,t){e.setCenter(t)},clickableIcons:function(e,t){e.setClickableIcons(t)},heading:function(e,t){e.setHeading(t)},mapTypeId:function(e,t){e.setMapTypeId(t)},options:function(e,t){e.setOptions(t)},streetView:function(e,t){e.setStreetView(t)},tilt:function(e,t){e.setTilt(t)},zoom:function(e,t){e.setZoom(t)}};function H8(e){var t=e.children,n=e.options,o=e.id,r=e.mapContainerStyle,i=e.mapContainerClassName,l=e.center,s=e.onClick,a=e.onDblClick,c=e.onDrag,u=e.onDragEnd,d=e.onDragStart,I=e.onMouseMove,C=e.onMouseOut,f=e.onMouseOver,A=e.onMouseDown,v=e.onMouseUp,h=e.onRightClick,p=e.onCenterChanged,b=e.onLoad,y=e.onUnmount,Z=m.useState(null),G=Z[0],V=Z[1],S=m.useRef(null),k=m.useState(null),B=k[0],R=k[1],W=m.useState(null),w=W[0],X=W[1],E=m.useState(null),M=E[0],L=E[1],F=m.useState(null),Y=F[0],N=F[1],x=m.useState(null),H=x[0],K=x[1],T=m.useState(null),j=T[0],J=T[1],z=m.useState(null),U=z[0],D=z[1],O=m.useState(null),ee=O[0],re=O[1],ae=m.useState(null),ge=ae[0],ne=ae[1],ue=m.useState(null),me=ue[0],q=ue[1],_=m.useState(null),$=_[0],oe=_[1],Q=m.useState(null),ce=Q[0],le=Q[1];return m.useEffect(function(){n&&G!==null&&G.setOptions(n)},[G,n]),m.useEffect(function(){G!==null&&typeof l<"u"&&G.setCenter(l)},[G,l]),m.useEffect(function(){G&&a&&(w!==null&&google.maps.event.removeListener(w),X(google.maps.event.addListener(G,"dblclick",a)))},[a]),m.useEffect(function(){G&&u&&(M!==null&&google.maps.event.removeListener(M),L(google.maps.event.addListener(G,"dragend",u)))},[u]),m.useEffect(function(){G&&d&&(Y!==null&&google.maps.event.removeListener(Y),N(google.maps.event.addListener(G,"dragstart",d)))},[d]),m.useEffect(function(){G&&A&&(H!==null&&google.maps.event.removeListener(H),K(google.maps.event.addListener(G,"mousedown",A)))},[A]),m.useEffect(function(){G&&I&&(j!==null&&google.maps.event.removeListener(j),J(google.maps.event.addListener(G,"mousemove",I)))},[I]),m.useEffect(function(){G&&C&&(U!==null&&google.maps.event.removeListener(U),D(google.maps.event.addListener(G,"mouseout",C)))},[C]),m.useEffect(function(){G&&f&&(ee!==null&&google.maps.event.removeListener(ee),re(google.maps.event.addListener(G,"mouseover",f)))},[f]),m.useEffect(function(){G&&v&&(ge!==null&&google.maps.event.removeListener(ge),ne(google.maps.event.addListener(G,"mouseup",v)))},[v]),m.useEffect(function(){G&&h&&(me!==null&&google.maps.event.removeListener(me),q(google.maps.event.addListener(G,"rightclick",h)))},[h]),m.useEffect(function(){G&&s&&($!==null&&google.maps.event.removeListener($),oe(google.maps.event.addListener(G,"click",s)))},[s]),m.useEffect(function(){G&&c&&(ce!==null&&google.maps.event.removeListener(ce),le(google.maps.event.addListener(G,"drag",c)))},[c]),m.useEffect(function(){G&&p&&(B!==null&&google.maps.event.removeListener(B),R(google.maps.event.addListener(G,"center_changed",p)))},[s]),m.useEffect(function(){var fe=S.current===null?null:new google.maps.Map(S.current,n);return V(fe),fe!==null&&b&&b(fe),function(){fe!==null&&y&&y(fe)}},[]),g.jsx("div",{id:o,ref:S,style:r,className:i,children:g.jsx(Ve.Provider,{value:G,children:G!==null?t:null})})}m.memo(H8);var JW=function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={map:null},n.registeredEvents=[],n.mapRef=null,n.getInstance=function(){return n.mapRef===null?null:new google.maps.Map(n.mapRef,n.props.options)},n.panTo=function(o){var r=n.getInstance();r&&r.panTo(o)},n.setMapCallback=function(){n.state.map!==null&&n.props.onLoad&&n.props.onLoad(n.state.map)},n.getRef=function(o){n.mapRef=o},n}return t.prototype.componentDidMount=function(){var n=this.getInstance();this.registeredEvents=Re({updaterMap:mv,eventMap:Cv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{map:n}},this.setMapCallback)},t.prototype.componentDidUpdate=function(n){this.state.map!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:mv,eventMap:Cv,prevProps:n,nextProps:this.props,instance:this.state.map}))},t.prototype.componentWillUnmount=function(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),We(this.registeredEvents))},t.prototype.render=function(){return g.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:g.jsx(Ve.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})},t}(m.PureComponent),bi=typeof document<"u";function NW(e){var t=e.url,n=e.id,o=e.nonce;return bi?new Promise(function(i,l){var s=document.getElementById(n),a=window;if(s){var c=s.getAttribute("data-state");if(s.src===t&&c!=="error"){if(c==="ready")return i(n);var u=a.initMap,d=s.onerror;a.initMap=function(){u&&u(),i(n)},s.onerror=function(C){d&&d(C),l(C)};return}else s.remove()}var I=document.createElement("script");I.type="text/javascript",I.src=t,I.id=n,I.async=!0,I.nonce=o||"",I.onerror=function(f){I.setAttribute("data-state","error"),l(f)},a.initMap=function(){I.setAttribute("data-state","ready"),i(n)},document.head.appendChild(I)}).catch(function(r){throw console.error("injectScript error: ",r),r}):Promise.reject(new Error("document is undefined"))}function hv(e){var t=e.href;return t&&(t.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:e.tagName.toLowerCase()==="style"&&e.styleSheet&&e.styleSheet.cssText&&e.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(e.styleSheet.cssText="",!0):e.tagName.toLowerCase()==="style"&&e.innerHTML&&e.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(e.innerHTML="",!0):e.tagName.toLowerCase()==="style"&&!e.styleSheet&&!e.innerHTML}function YW(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(r,i){return hv(r)||Reflect.apply(t,e,[r,i]),r};var n=e.appendChild.bind(e);e.appendChild=function(r){return hv(r)||Reflect.apply(n,e,[r]),r}}}function HW(e){var t=e.googleMapsApiKey,n=e.googleMapsClientId,o=e.version,r=o===void 0?"weekly":o,i=e.language,l=e.region,s=e.libraries,a=e.channel,c=e.mapIds,u=e.authReferrerPolicy,d=[];return bt(t&&n||!(t&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?d.push("key=".concat(t)):n&&d.push("client=".concat(n)),r&&d.push("v=".concat(r)),i&&d.push("language=".concat(i)),l&&d.push("region=".concat(l)),s&&s.length&&d.push("libraries=".concat(s.sort().join(","))),a&&d.push("channel=".concat(a)),c&&c.length&&d.push("map_ids=".concat(c.join(","))),u&&d.push("auth_referrer_policy=".concat(u)),d.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(d.join("&"))}var fs=!1;function FW(){return g.jsx("div",{children:"Loading..."})}var Mh={id:"script-loader",version:"weekly"};(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.check=m.createRef(),n.state={loaded:!1},n.cleanupCallback=function(){delete window.google.maps,n.injectScript()},n.isCleaningUp=function(){return V8(n,void 0,void 0,function(){function o(r){if(!fs)r();else if(bi)var i=window.setInterval(function(){fs||(window.clearInterval(i),r())},1)}return R8(this,function(r){return[2,new Promise(o)]})})},n.cleanup=function(){fs=!0;var o=document.getElementById(n.props.id);o&&o.parentNode&&o.parentNode.removeChild(o),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(i){return typeof i.src=="string"&&i.src.includes("maps.googleapis")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(i){return i.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(i){return i.innerText!==void 0&&i.innerText.length>0&&i.innerText.includes(".gm-")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)})},n.injectScript=function(){n.props.preventGoogleFontsLoading&&YW(),bt(!!n.props.id,'LoadScript requires "id" prop to be a string: %s',n.props.id);var o={id:n.props.id,nonce:n.props.nonce,url:HW(n.props)};NW(o).then(function(){n.props.onLoad&&n.props.onLoad(),n.setState(function(){return{loaded:!0}})}).catch(function(r){n.props.onError&&n.props.onError(r),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(n.props.googleMapsApiKey||"-",") or Client ID (").concat(n.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})},n}return t.prototype.componentDidMount=function(){if(bi){if(window.google&&window.google.maps&&!fs){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(o){console.error("Error at injecting script after cleaning up: ",o)})}},t.prototype.componentDidUpdate=function(n){this.props.libraries!==n.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),bi&&n.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))},t.prototype.componentWillUnmount=function(){var n=this;if(bi){this.cleanup();var o=function(){n.check.current||(delete window.google,fs=!1)};window.setTimeout(o,1),this.props.onUnmount&&this.props.onUnmount()}},t.prototype.render=function(){return g.jsxs(g.Fragment,{children:[g.jsx("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||g.jsx(FW,{})]})},t.defaultProps=Mh,t})(m.PureComponent);var fv;function gp(e){var t=e.id,n=t===void 0?Mh.id:t,o=e.version,r=o===void 0?Mh.version:o,i=e.nonce,l=e.googleMapsApiKey,s=e.googleMapsClientId,a=e.language,c=e.region,u=e.libraries,d=e.preventGoogleFontsLoading,I=e.channel,C=e.mapIds,f=e.authReferrerPolicy,A=m.useRef(!1),v=m.useState(!1),h=v[0],p=v[1],b=m.useState(void 0),y=b[0],Z=b[1];m.useEffect(function(){return A.current=!0,function(){A.current=!1}},[]),m.useEffect(function(){bi&&d&&YW()},[d]),m.useEffect(function(){h&&bt(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[h]);var G=HW({version:r,googleMapsApiKey:l,googleMapsClientId:s,language:a,region:c,libraries:u,channel:I,mapIds:C,authReferrerPolicy:f});m.useEffect(function(){if(!bi)return;function k(){A.current&&(p(!0),fv=G)}if(window.google&&window.google.maps&&fv===G){k();return}NW({id:n,url:G,nonce:i}).then(k).catch(function(R){A.current&&Z(R),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(l||"-",") or Client ID (").concat(s||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(R)})},[n,G,i]);var V=m.useRef();return m.useEffect(function(){V.current&&u!==V.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),V.current=u},[u]),{isLoaded:h,loadError:y,url:G}}var F8=g.jsx(FW,{});function E8(e){var t=e.loadingElement,n=e.onLoad,o=e.onError,r=e.onUnmount,i=e.children,l=ap(e,["loadingElement","onLoad","onError","onUnmount","children"]),s=gp(l),a=s.isLoaded,c=s.loadError;return m.useEffect(function(){a&&typeof n=="function"&&n()},[a,n]),m.useEffect(function(){c&&typeof o=="function"&&o(c)},[c,o]),m.useEffect(function(){return function(){r&&r()}},[r]),a?i:t||F8}m.memo(E8);var Av;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Av||(Av={}));var pv={},bv={options:function(e,t){e.setOptions(t)}};function K8(e){var t=e.options,n=e.onLoad,o=e.onUnmount,r=m.useContext(Ve),i=m.useState(null),l=i[0],s=i[1];return m.useEffect(function(){l!==null&&l.setMap(r)},[r]),m.useEffect(function(){t&&l!==null&&l.setOptions(t)},[l,t]),m.useEffect(function(){var a=new google.maps.TrafficLayer(be(be({},t||{}),{map:r}));return s(a),n&&n(a),function(){l!==null&&(o&&o(l),l.setMap(null))}},[]),null}m.memo(K8);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={trafficLayer:null},n.setTrafficLayerCallback=function(){n.state.trafficLayer!==null&&n.props.onLoad&&n.props.onLoad(n.state.trafficLayer)},n.registeredEvents=[],n}return t.prototype.componentDidMount=function(){var n=new google.maps.TrafficLayer(be(be({},this.props.options||{}),{map:this.context}));this.registeredEvents=Re({updaterMap:bv,eventMap:pv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{trafficLayer:n}},this.setTrafficLayerCallback)},t.prototype.componentDidUpdate=function(n){this.state.trafficLayer!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:bv,eventMap:pv,prevProps:n,nextProps:this.props,instance:this.state.trafficLayer}))},t.prototype.componentWillUnmount=function(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),We(this.registeredEvents),this.state.trafficLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);function L8(e){var t=e.onLoad,n=e.onUnmount,o=m.useContext(Ve),r=m.useState(null),i=r[0],l=r[1];return m.useEffect(function(){i!==null&&i.setMap(o)},[o]),m.useEffect(function(){var s=new google.maps.BicyclingLayer;return l(s),s.setMap(o),t&&t(s),function(){s!==null&&(n&&n(s),s.setMap(null))}},[]),null}m.memo(L8);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={bicyclingLayer:null},n.setBicyclingLayerCallback=function(){n.state.bicyclingLayer!==null&&(n.state.bicyclingLayer.setMap(n.context),n.props.onLoad&&n.props.onLoad(n.state.bicyclingLayer))},n}return t.prototype.componentDidMount=function(){var n=new google.maps.BicyclingLayer;this.setState(function(){return{bicyclingLayer:n}},this.setBicyclingLayerCallback)},t.prototype.componentWillUnmount=function(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);function M8(e){var t=e.onLoad,n=e.onUnmount,o=m.useContext(Ve),r=m.useState(null),i=r[0],l=r[1];return m.useEffect(function(){i!==null&&i.setMap(o)},[o]),m.useEffect(function(){var s=new google.maps.TransitLayer;return l(s),s.setMap(o),t&&t(s),function(){i!==null&&(n&&n(i),i.setMap(null))}},[]),null}m.memo(M8);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={transitLayer:null},n.setTransitLayerCallback=function(){n.state.transitLayer!==null&&(n.state.transitLayer.setMap(n.context),n.props.onLoad&&n.props.onLoad(n.state.transitLayer))},n}return t.prototype.componentDidMount=function(){var n=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:n}},this.setTransitLayerCallback)},t.prototype.componentWillUnmount=function(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);var yv={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},vv={drawingMode:function(e,t){e.setDrawingMode(t)},options:function(e,t){e.setOptions(t)}};function T8(e){var t=e.options,n=e.drawingMode,o=e.onCircleComplete,r=e.onMarkerComplete,i=e.onOverlayComplete,l=e.onPolygonComplete,s=e.onPolylineComplete,a=e.onRectangleComplete,c=e.onLoad,u=e.onUnmount,d=m.useContext(Ve),I=m.useState(null),C=I[0],f=I[1],A=m.useState(null),v=A[0],h=A[1],p=m.useState(null),b=p[0],y=p[1],Z=m.useState(null),G=Z[0],V=Z[1],S=m.useState(null),k=S[0],B=S[1],R=m.useState(null),W=R[0],w=R[1],X=m.useState(null),E=X[0],M=X[1];return m.useEffect(function(){C!==null&&C.setMap(d)},[d]),m.useEffect(function(){t&&C!==null&&C.setOptions(t)},[C,t]),m.useEffect(function(){C!==null&&C.setDrawingMode(n??null)},[C,n]),m.useEffect(function(){C&&o&&(v!==null&&google.maps.event.removeListener(v),h(google.maps.event.addListener(C,"circlecomplete",o)))},[C,o]),m.useEffect(function(){C&&r&&(b!==null&&google.maps.event.removeListener(b),y(google.maps.event.addListener(C,"markercomplete",r)))},[C,r]),m.useEffect(function(){C&&i&&(G!==null&&google.maps.event.removeListener(G),V(google.maps.event.addListener(C,"overlaycomplete",i)))},[C,i]),m.useEffect(function(){C&&l&&(k!==null&&google.maps.event.removeListener(k),B(google.maps.event.addListener(C,"polygoncomplete",l)))},[C,l]),m.useEffect(function(){C&&s&&(W!==null&&google.maps.event.removeListener(W),w(google.maps.event.addListener(C,"polylinecomplete",s)))},[C,s]),m.useEffect(function(){C&&a&&(E!==null&&google.maps.event.removeListener(E),M(google.maps.event.addListener(C,"rectanglecomplete",a)))},[C,a]),m.useEffect(function(){bt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var L=new google.maps.drawing.DrawingManager(be(be({},t||{}),{map:d}));return n&&L.setDrawingMode(n),o&&h(google.maps.event.addListener(L,"circlecomplete",o)),r&&y(google.maps.event.addListener(L,"markercomplete",r)),i&&V(google.maps.event.addListener(L,"overlaycomplete",i)),l&&B(google.maps.event.addListener(L,"polygoncomplete",l)),s&&w(google.maps.event.addListener(L,"polylinecomplete",s)),a&&M(google.maps.event.addListener(L,"rectanglecomplete",a)),f(L),c&&c(L),function(){C!==null&&(v&&google.maps.event.removeListener(v),b&&google.maps.event.removeListener(b),G&&google.maps.event.removeListener(G),k&&google.maps.event.removeListener(k),W&&google.maps.event.removeListener(W),E&&google.maps.event.removeListener(E),u&&u(C),C.setMap(null))}},[]),null}m.memo(T8);(function(e){Ue(t,e);function t(n){var o=e.call(this,n)||this;return o.registeredEvents=[],o.state={drawingManager:null},o.setDrawingManagerCallback=function(){o.state.drawingManager!==null&&o.props.onLoad&&o.props.onLoad(o.state.drawingManager)},bt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing),o}return t.prototype.componentDidMount=function(){var n=new google.maps.drawing.DrawingManager(be(be({},this.props.options||{}),{map:this.context}));this.registeredEvents=Re({updaterMap:vv,eventMap:yv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{drawingManager:n}},this.setDrawingManagerCallback)},t.prototype.componentDidUpdate=function(n){this.state.drawingManager!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:vv,eventMap:yv,prevProps:n,nextProps:this.props,instance:this.state.drawingManager}))},t.prototype.componentWillUnmount=function(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),We(this.registeredEvents),this.state.drawingManager.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);var Zv={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Gv={animation:function(e,t){e.setAnimation(t)},clickable:function(e,t){e.setClickable(t)},cursor:function(e,t){e.setCursor(t)},draggable:function(e,t){e.setDraggable(t)},icon:function(e,t){e.setIcon(t)},label:function(e,t){e.setLabel(t)},map:function(e,t){e.setMap(t)},opacity:function(e,t){e.setOpacity(t)},options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},shape:function(e,t){e.setShape(t)},title:function(e,t){e.setTitle(t)},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},mu={};function j8(e){var t=e.position,n=e.options,o=e.clusterer,r=e.noClustererRedraw,i=e.children,l=e.draggable,s=e.visible,a=e.animation,c=e.clickable,u=e.cursor,d=e.icon,I=e.label,C=e.opacity,f=e.shape,A=e.title,v=e.zIndex,h=e.onClick,p=e.onDblClick,b=e.onDrag,y=e.onDragEnd,Z=e.onDragStart,G=e.onMouseOut,V=e.onMouseOver,S=e.onMouseUp,k=e.onMouseDown,B=e.onRightClick,R=e.onClickableChanged,W=e.onCursorChanged,w=e.onAnimationChanged,X=e.onDraggableChanged,E=e.onFlatChanged,M=e.onIconChanged,L=e.onPositionChanged,F=e.onShapeChanged,Y=e.onTitleChanged,N=e.onVisibleChanged,x=e.onZindexChanged,H=e.onLoad,K=e.onUnmount,T=m.useContext(Ve),j=m.useState(null),J=j[0],z=j[1],U=m.useState(null),D=U[0],O=U[1],ee=m.useState(null),re=ee[0],ae=ee[1],ge=m.useState(null),ne=ge[0],ue=ge[1],me=m.useState(null),q=me[0],_=me[1],$=m.useState(null),oe=$[0],Q=$[1],ce=m.useState(null),le=ce[0],fe=ce[1],Ae=m.useState(null),ie=Ae[0],pe=Ae[1],Ze=m.useState(null),Be=Ze[0],ht=Ze[1],io=m.useState(null),un=io[0],Go=io[1],xn=m.useState(null),we=xn[0],ft=xn[1],ve=m.useState(null),Xe=ve[0],Me=ve[1],dn=m.useState(null),Ut=dn[0],Qr=dn[1],Ta=m.useState(null),ja=Ta[0],zp=Ta[1],Dp=m.useState(null),za=Dp[0],Up=Dp[1],Pp=m.useState(null),Da=Pp[0],Qp=Pp[1],Op=m.useState(null),Ua=Op[0],_p=Op[1],qp=m.useState(null),Pa=qp[0],$p=qp[1],e0=m.useState(null),t0=e0[0],n0=e0[1],o0=m.useState(null),Qa=o0[0],r0=o0[1],i0=m.useState(null),Oa=i0[0],l0=i0[1],s0=m.useState(null),_a=s0[0],a0=s0[1];m.useEffect(function(){J!==null&&J.setMap(T)},[T]),m.useEffect(function(){typeof n<"u"&&J!==null&&J.setOptions(n)},[J,n]),m.useEffect(function(){typeof l<"u"&&J!==null&&J.setDraggable(l)},[J,l]),m.useEffect(function(){t&&J!==null&&J.setPosition(t)},[J,t]),m.useEffect(function(){typeof s<"u"&&J!==null&&J.setVisible(s)},[J,s]),m.useEffect(function(){J==null||J.setAnimation(a)},[J,a]),m.useEffect(function(){J&&c!==void 0&&J.setClickable(c)},[J,c]),m.useEffect(function(){J&&u!==void 0&&J.setCursor(u)},[J,u]),m.useEffect(function(){J&&d!==void 0&&J.setIcon(d)},[J,d]),m.useEffect(function(){J&&I!==void 0&&J.setLabel(I)},[J,I]),m.useEffect(function(){J&&C!==void 0&&J.setOpacity(C)},[J,C]),m.useEffect(function(){J&&f!==void 0&&J.setShape(f)},[J,f]),m.useEffect(function(){J&&A!==void 0&&J.setTitle(A)},[J,A]),m.useEffect(function(){J&&v!==void 0&&J.setZIndex(v)},[J,v]),m.useEffect(function(){J&&p&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(J,"dblclick",p)))},[p]),m.useEffect(function(){J&&y&&(re!==null&&google.maps.event.removeListener(re),ae(google.maps.event.addListener(J,"dragend",y)))},[y]),m.useEffect(function(){J&&Z&&(ne!==null&&google.maps.event.removeListener(ne),ue(google.maps.event.addListener(J,"dragstart",Z)))},[Z]),m.useEffect(function(){J&&k&&(q!==null&&google.maps.event.removeListener(q),_(google.maps.event.addListener(J,"mousedown",k)))},[k]),m.useEffect(function(){J&&G&&(oe!==null&&google.maps.event.removeListener(oe),Q(google.maps.event.addListener(J,"mouseout",G)))},[G]),m.useEffect(function(){J&&V&&(le!==null&&google.maps.event.removeListener(le),fe(google.maps.event.addListener(J,"mouseover",V)))},[V]),m.useEffect(function(){J&&S&&(ie!==null&&google.maps.event.removeListener(ie),pe(google.maps.event.addListener(J,"mouseup",S)))},[S]),m.useEffect(function(){J&&B&&(Be!==null&&google.maps.event.removeListener(Be),ht(google.maps.event.addListener(J,"rightclick",B)))},[B]),m.useEffect(function(){J&&h&&(un!==null&&google.maps.event.removeListener(un),Go(google.maps.event.addListener(J,"click",h)))},[h]),m.useEffect(function(){J&&b&&(we!==null&&google.maps.event.removeListener(we),ft(google.maps.event.addListener(J,"drag",b)))},[b]),m.useEffect(function(){J&&R&&(Xe!==null&&google.maps.event.removeListener(Xe),Me(google.maps.event.addListener(J,"clickable_changed",R)))},[R]),m.useEffect(function(){J&&W&&(Ut!==null&&google.maps.event.removeListener(Ut),Qr(google.maps.event.addListener(J,"cursor_changed",W)))},[W]),m.useEffect(function(){J&&w&&(ja!==null&&google.maps.event.removeListener(ja),zp(google.maps.event.addListener(J,"animation_changed",w)))},[w]),m.useEffect(function(){J&&X&&(za!==null&&google.maps.event.removeListener(za),Up(google.maps.event.addListener(J,"draggable_changed",X)))},[X]),m.useEffect(function(){J&&E&&(Da!==null&&google.maps.event.removeListener(Da),Qp(google.maps.event.addListener(J,"flat_changed",E)))},[E]),m.useEffect(function(){J&&M&&(Ua!==null&&google.maps.event.removeListener(Ua),_p(google.maps.event.addListener(J,"icon_changed",M)))},[M]),m.useEffect(function(){J&&L&&(Pa!==null&&google.maps.event.removeListener(Pa),$p(google.maps.event.addListener(J,"position_changed",L)))},[L]),m.useEffect(function(){J&&F&&(t0!==null&&google.maps.event.removeListener(t0),n0(google.maps.event.addListener(J,"shape_changed",F)))},[F]),m.useEffect(function(){J&&Y&&(Qa!==null&&google.maps.event.removeListener(Qa),r0(google.maps.event.addListener(J,"title_changed",Y)))},[Y]),m.useEffect(function(){J&&N&&(Oa!==null&&google.maps.event.removeListener(Oa),l0(google.maps.event.addListener(J,"visible_changed",N)))},[N]),m.useEffect(function(){J&&x&&(_a!==null&&google.maps.event.removeListener(_a),a0(google.maps.event.addListener(J,"zindex_changed",x)))},[x]),m.useEffect(function(){var os=be(be(be({},n||mu),o?mu:{map:T}),{position:t}),Se=new google.maps.Marker(os);return o?o.addMarker(Se,!!r):Se.setMap(T),t&&Se.setPosition(t),typeof s<"u"&&Se.setVisible(s),typeof l<"u"&&Se.setDraggable(l),typeof c<"u"&&Se.setClickable(c),typeof u=="string"&&Se.setCursor(u),d&&Se.setIcon(d),typeof I<"u"&&Se.setLabel(I),typeof C<"u"&&Se.setOpacity(C),f&&Se.setShape(f),typeof A=="string"&&Se.setTitle(A),typeof v=="number"&&Se.setZIndex(v),p&&O(google.maps.event.addListener(Se,"dblclick",p)),y&&ae(google.maps.event.addListener(Se,"dragend",y)),Z&&ue(google.maps.event.addListener(Se,"dragstart",Z)),k&&_(google.maps.event.addListener(Se,"mousedown",k)),G&&Q(google.maps.event.addListener(Se,"mouseout",G)),V&&fe(google.maps.event.addListener(Se,"mouseover",V)),S&&pe(google.maps.event.addListener(Se,"mouseup",S)),B&&ht(google.maps.event.addListener(Se,"rightclick",B)),h&&Go(google.maps.event.addListener(Se,"click",h)),b&&ft(google.maps.event.addListener(Se,"drag",b)),R&&Me(google.maps.event.addListener(Se,"clickable_changed",R)),W&&Qr(google.maps.event.addListener(Se,"cursor_changed",W)),w&&zp(google.maps.event.addListener(Se,"animation_changed",w)),X&&Up(google.maps.event.addListener(Se,"draggable_changed",X)),E&&Qp(google.maps.event.addListener(Se,"flat_changed",E)),M&&_p(google.maps.event.addListener(Se,"icon_changed",M)),L&&$p(google.maps.event.addListener(Se,"position_changed",L)),F&&n0(google.maps.event.addListener(Se,"shape_changed",F)),Y&&r0(google.maps.event.addListener(Se,"title_changed",Y)),N&&l0(google.maps.event.addListener(Se,"visible_changed",N)),x&&a0(google.maps.event.addListener(Se,"zindex_changed",x)),z(Se),H&&H(Se),function(){D!==null&&google.maps.event.removeListener(D),re!==null&&google.maps.event.removeListener(re),ne!==null&&google.maps.event.removeListener(ne),q!==null&&google.maps.event.removeListener(q),oe!==null&&google.maps.event.removeListener(oe),le!==null&&google.maps.event.removeListener(le),ie!==null&&google.maps.event.removeListener(ie),Be!==null&&google.maps.event.removeListener(Be),un!==null&&google.maps.event.removeListener(un),Xe!==null&&google.maps.event.removeListener(Xe),Ut!==null&&google.maps.event.removeListener(Ut),ja!==null&&google.maps.event.removeListener(ja),za!==null&&google.maps.event.removeListener(za),Da!==null&&google.maps.event.removeListener(Da),Ua!==null&&google.maps.event.removeListener(Ua),Pa!==null&&google.maps.event.removeListener(Pa),Qa!==null&&google.maps.event.removeListener(Qa),Oa!==null&&google.maps.event.removeListener(Oa),_a!==null&&google.maps.event.removeListener(_a),K&&K(Se),o?o.removeMarker(Se,!!r):Se&&Se.setMap(null)}},[]);var Uk=m.useMemo(function(){return i?m.Children.map(i,function(os){if(!m.isValidElement(os))return os;var Se=os;return m.cloneElement(Se,{anchor:J})}):null},[i,J]);return g.jsx(g.Fragment,{children:Uk})||null}var EW=m.memo(j8);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n}return t.prototype.componentDidMount=function(){var n=be(be(be({},this.props.options||mu),this.props.clusterer?mu:{map:this.context}),{position:this.props.position});this.marker=new google.maps.Marker(n),this.props.clusterer?this.props.clusterer.addMarker(this.marker,!!this.props.noClustererRedraw):this.marker.setMap(this.context),this.registeredEvents=Re({updaterMap:Gv,eventMap:Zv,prevProps:{},nextProps:this.props,instance:this.marker}),this.props.onLoad&&this.props.onLoad(this.marker)},t.prototype.componentDidUpdate=function(n){this.marker&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:Gv,eventMap:Zv,prevProps:n,nextProps:this.props,instance:this.marker}))},t.prototype.componentWillUnmount=function(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),We(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))},t.prototype.render=function(){var n=this,o=null;return this.props.children&&(o=m.Children.map(this.props.children,function(r){if(!m.isValidElement(r))return r;var i=r;return m.cloneElement(i,{anchor:n.marker})})),o||null},t.contextType=Ve,t})(m.PureComponent);var z8=function(){function e(t,n){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(t){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var n=this.cluster.getClusterer();if(google.maps.event.trigger(n,"click",this.cluster),google.maps.event.trigger(n,"clusterclick",this.cluster),n.getZoomOnClick()){var o=n.getMaxZoom(),r=this.cluster.getBounds(),i=n.getMap();i!==null&&"fitBounds"in i&&i.fitBounds(r),this.timeOut=window.setTimeout(function(){var l=n.getMap();if(l!==null){"fitBounds"in l&&l.fitBounds(r);var s=l.getZoom()||0;o!==null&&s>o&&l.setZoom(o+1)}},100)}t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var t;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(t=this.getPanes())===null||t===void 0||t.overlayMouseTarget.appendChild(this.div);var n=this.getMap();n!==null&&(this.boundsChangedListener=google.maps.event.addListener(n,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var t=this.getPosFromLatLng(this.center);this.div.style.top=t!==null?"".concat(t.y,"px"):"0",this.div.style.left=t!==null?"".concat(t.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var t,n,o,r,i,l;if(this.div&&this.center){var s=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,a=this.backgroundPosition.split(" "),c=parseInt(((t=a[0])===null||t===void 0?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),u=parseInt(((n=a[1])===null||n===void 0?void 0:n.replace(/^\s+|\s+$/g,""))||"0",10),d=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(d!==null?"".concat(d.y,"px"):"0","; left: ").concat(d!==null?"".concat(d.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var I=document.createElement("img");I.alt=s,I.src=this.url,I.width=this.width,I.height=this.height,I.setAttribute("style","position: absolute; top: ".concat(u,"px; left: ").concat(c,"px")),this.cluster.getClusterer().enableRetinaIcons||(I.style.clip="rect(-".concat(u,"px, -").concat(c+this.width,"px, -").concat(u+this.height,", -").concat(c,")"));var C=document.createElement("div");C.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((o=this.sums)===null||o===void 0)&&o.text&&(C.innerText="".concat((r=this.sums)===null||r===void 0?void 0:r.text)),!((i=this.sums)===null||i===void 0)&&i.html&&(C.innerHTML="".concat((l=this.sums)===null||l===void 0?void 0:l.html)),this.div.innerHTML="",this.div.appendChild(I),this.div.appendChild(C),this.div.title=s,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(t){this.sums=t;var n=this.cluster.getClusterer().getStyles(),o=n[Math.min(n.length-1,Math.max(0,t.index-1))];o&&(this.url=o.url,this.height=o.height,this.width=o.width,o.className&&(this.className="".concat(this.clusterClassName," ").concat(o.className)),this.anchorText=o.anchorText||[0,0],this.anchorIcon=o.anchorIcon||[this.height/2,this.width/2],this.textColor=o.textColor||"black",this.textSize=o.textSize||11,this.textDecoration=o.textDecoration||"none",this.fontWeight=o.fontWeight||"bold",this.fontStyle=o.fontStyle||"normal",this.fontFamily=o.fontFamily||"Arial,sans-serif",this.backgroundPosition=o.backgroundPosition||"0 0")},e.prototype.setCenter=function(t){this.center=t},e.prototype.getPosFromLatLng=function(t){var n=this.getProjection().fromLatLngToDivPixel(t);return n!==null&&(n.x-=this.anchorIcon[1],n.y-=this.anchorIcon[0]),n},e}(),D8=function(){function e(t){this.markerClusterer=t,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new z8(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var t=new google.maps.LatLngBounds(this.center,this.center),n=this.getMarkers(),o=0,r=n;o<r.length;o++){var i=r[o],l=i.getPosition();l&&t.extend(l)}return t},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(t){var n;if(this.isMarkerAlreadyAdded(t))return!1;if(this.center){if(this.averageCenter){var o=t.getPosition();if(o){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+o.lat())/r,(this.center.lng()*(r-1)+o.lng())/r),this.calculateBounds()}}}else{var o=t.getPosition();o&&(this.center=o,this.calculateBounds())}t.isAdded=!0,this.markers.push(t);var i=this.markers.length,l=this.markerClusterer.getMaxZoom(),s=(n=this.map)===null||n===void 0?void 0:n.getZoom();if(l!==null&&typeof s<"u"&&s>l)t.getMap()!==this.map&&t.setMap(this.map);else if(i<this.minClusterSize)t.getMap()!==this.map&&t.setMap(this.map);else if(i===this.minClusterSize)for(var a=0,c=this.markers;a<c.length;a++){var u=c[a];u.setMap(null)}else t.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(t){if(this.bounds!==null){var n=t.getPosition();if(n)return this.bounds.contains(n)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var t,n=this.markers.length,o=this.markerClusterer.getMaxZoom(),r=(t=this.map)===null||t===void 0?void 0:t.getZoom();if(o!==null&&typeof r<"u"&&r>o){this.clusterIcon.hide();return}if(n<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},e.prototype.isMarkerAlreadyAdded=function(t){if(this.markers.includes)return this.markers.includes(t);for(var n=0;n<this.markers.length;n++)if(t===this.markers[n])return!0;return!1},e}();function U8(e,t){var n=e.length,o=n.toString().length,r=Math.min(o,t);return{text:n.toString(),index:r,title:""}}var P8=2e3,Q8=500,O8="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",_8="png",q8=[53,56,66,78,90],$8="cluster",KW=function(){function e(t,n,o){n===void 0&&(n=[]),o===void 0&&(o={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=o.gridSize||60,this.minClusterSize=o.minimumClusterSize||2,this.maxZoom=o.maxZoom||null,this.styles=o.styles||[],this.title=o.title||"",this.zoomOnClick=!0,o.zoomOnClick!==void 0&&(this.zoomOnClick=o.zoomOnClick),this.averageCenter=!1,o.averageCenter!==void 0&&(this.averageCenter=o.averageCenter),this.ignoreHidden=!1,o.ignoreHidden!==void 0&&(this.ignoreHidden=o.ignoreHidden),this.enableRetinaIcons=!1,o.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=o.enableRetinaIcons),this.imagePath=o.imagePath||O8,this.imageExtension=o.imageExtension||_8,this.imageSizes=o.imageSizes||q8,this.calculator=o.calculator||U8,this.batchSize=o.batchSize||P8,this.batchSizeIE=o.batchSizeIE||Q8,this.clusterClass=o.clusterClass||$8,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var t,n;this.resetViewport(!1),(((t=this.getMap())===null||t===void 0?void 0:t.getZoom())===(this.get("minZoom")||0)||((n=this.getMap())===null||n===void 0?void 0:n.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var t=this.getMap();this.activeMap=t,this.ready=!0,this.repaint(),t!==null&&(this.listeners=[google.maps.event.addListener(t,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(t,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var t=0,n=this.markers;t<n.length;t++){var o=n[t];o.getMap()!==this.activeMap&&o.setMap(this.activeMap)}for(var r=0,i=this.clusters;r<i.length;r++){var l=i[r];l.remove()}this.clusters=[];for(var s=0,a=this.listeners;s<a.length;s++){var c=a[s];google.maps.event.removeListener(c)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var t=0;t<this.imageSizes.length;t++)this.styles.push({url:"".concat(this.imagePath+(t+1),".").concat(this.imageExtension),height:this.imageSizes[t]||0,width:this.imageSizes[t]||0})},e.prototype.fitMapToMarkers=function(){for(var t=this.getMarkers(),n=new google.maps.LatLngBounds,o=0,r=t;o<r.length;o++){var i=r[o],l=i.getPosition();l&&n.extend(l)}var s=this.getMap();s!==null&&"fitBounds"in s&&s.fitBounds(n)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(t){this.gridSize=t},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(t){this.minClusterSize=t},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(t){this.maxZoom=t},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(t){this.styles=t},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(t){this.title=t},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(t){this.zoomOnClick=t},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(t){this.averageCenter=t},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(t){this.ignoreHidden=t},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons=t},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(t){this.imageExtension=t},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(t){this.imagePath=t},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(t){this.imageSizes=t},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(t){this.calculator=t},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(t){this.batchSizeIE=t},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(t){this.clusterClass=t},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(t,n){this.pushMarkerTo(t),n||this.redraw()},e.prototype.addMarkers=function(t,n){for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=t[o];r&&this.pushMarkerTo(r)}n||this.redraw()},e.prototype.pushMarkerTo=function(t){var n=this;t.getDraggable()&&google.maps.event.addListener(t,"dragend",function(){n.ready&&(t.isAdded=!1,n.repaint())}),t.isAdded=!1,this.markers.push(t)},e.prototype.removeMarker_=function(t){var n=-1;if(this.markers.indexOf)n=this.markers.indexOf(t);else for(var o=0;o<this.markers.length;o++)if(t===this.markers[o]){n=o;break}return n===-1?!1:(t.setMap(null),this.markers.splice(n,1),!0)},e.prototype.removeMarker=function(t,n){var o=this.removeMarker_(t);return!n&&o&&this.repaint(),o},e.prototype.removeMarkers=function(t,n){for(var o=!1,r=0,i=t;r<i.length;r++){var l=i[r];o=o||this.removeMarker_(l)}return!n&&o&&this.repaint(),o},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var t=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var o=0,r=t;o<r.length;o++){var i=r[o];i.remove()}},0)},e.prototype.getExtendedBounds=function(t){var n=this.getProjection(),o=n.fromLatLngToDivPixel(new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()));o!==null&&(o.x+=this.gridSize,o.y-=this.gridSize);var r=n.fromLatLngToDivPixel(new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()));if(r!==null&&(r.x-=this.gridSize,r.y+=this.gridSize),o!==null){var i=n.fromDivPixelToLatLng(o);i!==null&&t.extend(i)}if(r!==null){var l=n.fromDivPixelToLatLng(r);l!==null&&t.extend(l)}return t},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(t){for(var n=0,o=this.clusters;n<o.length;n++){var r=o[n];r.remove()}this.clusters=[];for(var i=0,l=this.markers;i<l.length;i++){var s=l[i];s.isAdded=!1,t&&s.setMap(null)}},e.prototype.distanceBetweenPoints=function(t,n){var o=6371,r=(n.lat()-t.lat())*Math.PI/180,i=(n.lng()-t.lng())*Math.PI/180,l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(n.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return o*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},e.prototype.isMarkerInBounds=function(t,n){var o=t.getPosition();return o?n.contains(o):!1},e.prototype.addToClosestCluster=function(t){for(var n,o=4e4,r=null,i=0,l=this.clusters;i<l.length;i++){var s=l[i];n=s;var a=n.getCenter(),c=t.getPosition();if(a&&c){var u=this.distanceBetweenPoints(a,c);u<o&&(o=u,r=n)}}r&&r.isMarkerInClusterBounds(t)?r.addMarker(t):(n=new D8(this),n.addMarker(t),this.clusters.push(n))},e.prototype.createClusters=function(t){var n=this;if(this.ready){t===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var o=this.getMap(),r=o!==null&&("getBounds"in o)?o.getBounds():null,i=(o==null?void 0:o.getZoom())||0,l=i>3?new google.maps.LatLngBounds(r==null?void 0:r.getSouthWest(),r==null?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),s=this.getExtendedBounds(l),a=Math.min(t+this.batchSize,this.markers.length),c=t;c<a;c++){var u=this.markers[c];u&&!u.isAdded&&this.isMarkerInBounds(u,s)&&(!this.ignoreHidden||this.ignoreHidden&&u.getVisible())&&this.addToClosestCluster(u)}if(a<this.markers.length)this.timerRefStatic=window.setTimeout(function(){n.createClusters(a)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var d=0,I=this.clusters;d<I.length;d++){var C=I[d];C.updateIcon()}}}},e.prototype.extend=function(t,n){return(function(r){for(var i in r.prototype){var l=i;this.prototype[l]=r.prototype[l]}return this}).apply(t,[n])},e}(),Yn={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},He={averageCenter:function(e,t){e.setAverageCenter(t)},batchSizeIE:function(e,t){e.setBatchSizeIE(t)},calculator:function(e,t){e.setCalculator(t)},clusterClass:function(e,t){e.setClusterClass(t)},enableRetinaIcons:function(e,t){e.setEnableRetinaIcons(t)},gridSize:function(e,t){e.setGridSize(t)},ignoreHidden:function(e,t){e.setIgnoreHidden(t)},imageExtension:function(e,t){e.setImageExtension(t)},imagePath:function(e,t){e.setImagePath(t)},imageSizes:function(e,t){e.setImageSizes(t)},maxZoom:function(e,t){e.setMaxZoom(t)},minimumClusterSize:function(e,t){e.setMinimumClusterSize(t)},styles:function(e,t){e.setStyles(t)},title:function(e,t){e.setTitle(t)},zoomOnClick:function(e,t){e.setZoomOnClick(t)}},e7={};function t7(e){var t=e.children,n=e.options,o=e.averageCenter,r=e.batchSizeIE,i=e.calculator,l=e.clusterClass,s=e.enableRetinaIcons,a=e.gridSize,c=e.ignoreHidden,u=e.imageExtension,d=e.imagePath,I=e.imageSizes,C=e.maxZoom,f=e.minimumClusterSize,A=e.styles,v=e.title,h=e.zoomOnClick,p=e.onClick,b=e.onClusteringBegin,y=e.onClusteringEnd,Z=e.onMouseOver,G=e.onMouseOut,V=e.onLoad,S=e.onUnmount,k=m.useState(null),B=k[0],R=k[1],W=m.useContext(Ve),w=m.useState(null),X=w[0],E=w[1],M=m.useState(null),L=M[0],F=M[1],Y=m.useState(null),N=Y[0],x=Y[1],H=m.useState(null),K=H[0],T=H[1],j=m.useState(null),J=j[0],z=j[1];return m.useEffect(function(){B&&G&&(K!==null&&google.maps.event.removeListener(K),T(google.maps.event.addListener(B,Yn.onMouseOut,G)))},[G]),m.useEffect(function(){B&&Z&&(J!==null&&google.maps.event.removeListener(J),z(google.maps.event.addListener(B,Yn.onMouseOver,Z)))},[Z]),m.useEffect(function(){B&&p&&(X!==null&&google.maps.event.removeListener(X),E(google.maps.event.addListener(B,Yn.onClick,p)))},[p]),m.useEffect(function(){B&&b&&(L!==null&&google.maps.event.removeListener(L),F(google.maps.event.addListener(B,Yn.onClusteringBegin,b)))},[b]),m.useEffect(function(){B&&y&&(N!==null&&google.maps.event.removeListener(N),F(google.maps.event.addListener(B,Yn.onClusteringEnd,y)))},[y]),m.useEffect(function(){typeof o<"u"&&B!==null&&He.averageCenter(B,o)},[B,o]),m.useEffect(function(){typeof r<"u"&&B!==null&&He.batchSizeIE(B,r)},[B,r]),m.useEffect(function(){typeof i<"u"&&B!==null&&He.calculator(B,i)},[B,i]),m.useEffect(function(){typeof l<"u"&&B!==null&&He.clusterClass(B,l)},[B,l]),m.useEffect(function(){typeof s<"u"&&B!==null&&He.enableRetinaIcons(B,s)},[B,s]),m.useEffect(function(){typeof a<"u"&&B!==null&&He.gridSize(B,a)},[B,a]),m.useEffect(function(){typeof c<"u"&&B!==null&&He.ignoreHidden(B,c)},[B,c]),m.useEffect(function(){typeof u<"u"&&B!==null&&He.imageExtension(B,u)},[B,u]),m.useEffect(function(){typeof d<"u"&&B!==null&&He.imagePath(B,d)},[B,d]),m.useEffect(function(){typeof I<"u"&&B!==null&&He.imageSizes(B,I)},[B,I]),m.useEffect(function(){typeof C<"u"&&B!==null&&He.maxZoom(B,C)},[B,C]),m.useEffect(function(){typeof f<"u"&&B!==null&&He.minimumClusterSize(B,f)},[B,f]),m.useEffect(function(){typeof A<"u"&&B!==null&&He.styles(B,A)},[B,A]),m.useEffect(function(){typeof v<"u"&&B!==null&&He.title(B,v)},[B,v]),m.useEffect(function(){typeof h<"u"&&B!==null&&He.zoomOnClick(B,h)},[B,h]),m.useEffect(function(){if(W){var U=be({},n||e7),D=new KW(W,[],U);return o&&He.averageCenter(D,o),r&&He.batchSizeIE(D,r),i&&He.calculator(D,i),l&&He.clusterClass(D,l),s&&He.enableRetinaIcons(D,s),a&&He.gridSize(D,a),c&&He.ignoreHidden(D,c),u&&He.imageExtension(D,u),d&&He.imagePath(D,d),I&&He.imageSizes(D,I),C&&He.maxZoom(D,C),f&&He.minimumClusterSize(D,f),A&&He.styles(D,A),v&&He.title(D,v),h&&He.zoomOnClick(D,h),G&&T(google.maps.event.addListener(D,Yn.onMouseOut,G)),Z&&z(google.maps.event.addListener(D,Yn.onMouseOver,Z)),p&&E(google.maps.event.addListener(D,Yn.onClick,p)),b&&F(google.maps.event.addListener(D,Yn.onClusteringBegin,b)),y&&x(google.maps.event.addListener(D,Yn.onClusteringEnd,y)),R(D),V&&V(D),function(){K!==null&&google.maps.event.removeListener(K),J!==null&&google.maps.event.removeListener(J),X!==null&&google.maps.event.removeListener(X),L!==null&&google.maps.event.removeListener(L),N!==null&&google.maps.event.removeListener(N),S&&S(D)}}},[]),B!==null&&t(B)||null}m.memo(t7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={markerClusterer:null},n.setClustererCallback=function(){n.state.markerClusterer!==null&&n.props.onLoad&&n.props.onLoad(n.state.markerClusterer)},n}return t.prototype.componentDidMount=function(){if(this.context){var n=new KW(this.context,[],this.props.options);this.registeredEvents=Re({updaterMap:He,eventMap:Yn,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{markerClusterer:n}},this.setClustererCallback)}},t.prototype.componentDidUpdate=function(n){this.state.markerClusterer&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:He,eventMap:Yn,prevProps:n,nextProps:this.props,instance:this.state.markerClusterer}))},t.prototype.componentWillUnmount=function(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),We(this.registeredEvents),this.state.markerClusterer.setMap(null))},t.prototype.render=function(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null},t.contextType=Ve,t})(m.PureComponent);function Bv(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}var LW=function(){function e(t){t===void 0&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",t.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),typeof t.visible>"u"&&(typeof t.isHidden>"u"?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var t=this,n=function(c){c.returnValue=!1,c.preventDefault&&c.preventDefault(),t.enableEventPropagation||Bv(c)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var o=this.getPanes();if(o!==null&&o[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var r=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-r.left-r.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],l=0,s=i;l<s.length;l++){var a=s[l];this.eventListeners.push(google.maps.event.addListener(this.div,a,Bv))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){t.div&&(t.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",n),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var t="";return this.closeBoxURL!==""&&(t='<img alt=""',t+=' aria-hidden="true"',t+=" src='"+this.closeBoxURL+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin+";",t+="'>"),t},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(t){if(this.div&&!t){var n=this.getMap();if(n instanceof google.maps.Map){var o=0,r=0,i=n.getBounds();i&&!i.contains(this.position)&&n.setCenter(this.position);var l=n.getDiv(),s=l.offsetWidth,a=l.offsetHeight,c=this.pixelOffset.width,u=this.pixelOffset.height,d=this.div.offsetWidth,I=this.div.offsetHeight,C=this.infoBoxClearance.width,f=this.infoBoxClearance.height,A=this.getProjection(),v=A.fromLatLngToContainerPixel(this.position);v!==null&&(v.x<-c+C?o=v.x+c-C:v.x+d+c+C>s&&(o=v.x+d+c+C-s),this.alignBottom?v.y<-u+f+I?r=v.y+u-f-I:v.y+u+f>a&&(r=v.y+u+f-a):v.y<-u+f?r=v.y+u-f:v.y+I+u+f>a&&(r=v.y+I+u+f-a)),o===0&&r===0||n.panBy(o,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var t=this.boxStyle;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this.div.style[n]=t[n]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var o=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+o*100+')"',this.div.style.filter="alpha(opacity="+o*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var t={top:0,bottom:0,left:0,right:0};if(!this.div)return t;if(document.defaultView){var n=this.div.ownerDocument,o=n&&n.defaultView?n.defaultView.getComputedStyle(this.div,""):null;o&&(t.top=parseInt(o.borderTopWidth||"",10)||0,t.bottom=parseInt(o.borderBottomWidth||"",10)||0,t.left=parseInt(o.borderLeftWidth||"",10)||0,t.right=parseInt(o.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(t.top=parseInt(r.borderTopWidth||"",10)||0,t.bottom=parseInt(r.borderBottomWidth||"",10)||0,t.left=parseInt(r.borderLeftWidth||"",10)||0,t.right=parseInt(r.borderRightWidth||"",10)||0)}return t},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var t=this.getProjection(),n=t.fromLatLngToDivPixel(this.position);n!==null&&(this.div.style.left=n.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(n.y+this.pixelOffset.height)+"px":this.div.style.top=n.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(t){t===void 0&&(t={}),typeof t.boxClass<"u"&&(this.boxClass=t.boxClass,this.setBoxStyle()),typeof t.boxStyle<"u"&&(this.boxStyle=t.boxStyle,this.setBoxStyle()),typeof t.content<"u"&&this.setContent(t.content),typeof t.disableAutoPan<"u"&&(this.disableAutoPan=t.disableAutoPan),typeof t.maxWidth<"u"&&(this.maxWidth=t.maxWidth),typeof t.pixelOffset<"u"&&(this.pixelOffset=t.pixelOffset),typeof t.alignBottom<"u"&&(this.alignBottom=t.alignBottom),typeof t.position<"u"&&this.setPosition(t.position),typeof t.zIndex<"u"&&this.setZIndex(t.zIndex),typeof t.closeBoxMargin<"u"&&(this.closeBoxMargin=t.closeBoxMargin),typeof t.closeBoxURL<"u"&&(this.closeBoxURL=t.closeBoxURL),typeof t.infoBoxClearance<"u"&&(this.infoBoxClearance=t.infoBoxClearance),typeof t.isHidden<"u"&&(this.isHidden=t.isHidden),typeof t.visible<"u"&&(this.isHidden=!t.visible),typeof t.enableEventPropagation<"u"&&(this.enableEventPropagation=t.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(t){this.content=t,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof t=="string"?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof t=="string"?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(t){this.position=t,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(t){this.isHidden=!t,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(t){this.zIndex=t,this.div&&(this.div.style.zIndex=t+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var t=this.getMap();return typeof t>"u"||t===null?!1:!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(t,n){var o=this;n&&(this.position=n.getPosition(),this.moveListener=google.maps.event.addListener(n,"position_changed",function(){var r=n.getPosition();o.setPosition(r)}),this.mapListener=google.maps.event.addListener(n,"map_changed",function(){o.setMap(n.map)})),this.setMap(t),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var t=0,n=this.eventListeners;t<n.length;t++){var o=n[t];google.maps.event.removeListener(o)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(t,n){return(function(r){for(var i in r.prototype)Object.prototype.hasOwnProperty.call(this,i)||(this.prototype[i]=r.prototype[i]);return this}).apply(t,[n])},e}(),Sv={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Vv={options:function(e,t){e.setOptions(t)},position:function(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},n7={};function o7(e){var t=e.children,n=e.anchor,o=e.options,r=e.position,i=e.zIndex,l=e.onCloseClick,s=e.onDomReady,a=e.onContentChanged,c=e.onPositionChanged,u=e.onZindexChanged,d=e.onLoad,I=e.onUnmount,C=m.useContext(Ve),f=m.useState(null),A=f[0],v=f[1],h=m.useState(null),p=h[0],b=h[1],y=m.useState(null),Z=y[0],G=y[1],V=m.useState(null),S=V[0],k=V[1],B=m.useState(null),R=B[0],W=B[1],w=m.useState(null),X=w[0],E=w[1],M=m.useRef(null);return m.useEffect(function(){C&&A!==null&&(A.close(),n?A.open(C,n):A.getPosition()&&A.open(C))},[C,A,n]),m.useEffect(function(){o&&A!==null&&A.setOptions(o)},[A,o]),m.useEffect(function(){if(r&&A!==null){var L=r instanceof google.maps.LatLng?r:new google.maps.LatLng(r.lat,r.lng);A.setPosition(L)}},[r]),m.useEffect(function(){typeof i=="number"&&A!==null&&A.setZIndex(i)},[i]),m.useEffect(function(){A&&l&&(p!==null&&google.maps.event.removeListener(p),b(google.maps.event.addListener(A,"closeclick",l)))},[l]),m.useEffect(function(){A&&s&&(Z!==null&&google.maps.event.removeListener(Z),G(google.maps.event.addListener(A,"domready",s)))},[s]),m.useEffect(function(){A&&a&&(S!==null&&google.maps.event.removeListener(S),k(google.maps.event.addListener(A,"content_changed",a)))},[a]),m.useEffect(function(){A&&c&&(R!==null&&google.maps.event.removeListener(R),W(google.maps.event.addListener(A,"position_changed",c)))},[c]),m.useEffect(function(){A&&u&&(X!==null&&google.maps.event.removeListener(X),E(google.maps.event.addListener(A,"zindex_changed",u)))},[u]),m.useEffect(function(){if(C){var L=o||n7,F=L.position,Y=ap(L,["position"]),N=void 0;F&&!(F instanceof google.maps.LatLng)&&(N=new google.maps.LatLng(F.lat,F.lng));var x=new LW(be(be({},Y),N?{position:N}:{}));M.current=document.createElement("div"),v(x),l&&b(google.maps.event.addListener(x,"closeclick",l)),s&&G(google.maps.event.addListener(x,"domready",s)),a&&k(google.maps.event.addListener(x,"content_changed",a)),c&&W(google.maps.event.addListener(x,"position_changed",c)),u&&E(google.maps.event.addListener(x,"zindex_changed",u)),x.setContent(M.current),n?x.open(C,n):x.getPosition()?x.open(C):bt(!1,"You must provide either an anchor or a position prop for <InfoBox>."),d&&d(x)}return function(){A!==null&&(p&&google.maps.event.removeListener(p),S&&google.maps.event.removeListener(S),Z&&google.maps.event.removeListener(Z),R&&google.maps.event.removeListener(R),X&&google.maps.event.removeListener(X),I&&I(A),A.close())}},[]),M.current?Kt.createPortal(m.Children.only(t),M.current):null}m.memo(o7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=null,n.state={infoBox:null},n.open=function(o,r){r?n.context!==null&&o.open(n.context,r):o.getPosition()?n.context!==null&&o.open(n.context):bt(!1,"You must provide either an anchor or a position prop for <InfoBox>.")},n.setInfoBoxCallback=function(){n.state.infoBox!==null&&n.containerElement!==null&&(n.state.infoBox.setContent(n.containerElement),n.open(n.state.infoBox,n.props.anchor),n.props.onLoad&&n.props.onLoad(n.state.infoBox))},n}return t.prototype.componentDidMount=function(){var n=this.props.options||{},o=n.position,r=ap(n,["position"]),i;o&&!(o instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(o.lat,o.lng));var l=new LW(be(be({},r),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Re({updaterMap:Vv,eventMap:Sv,prevProps:{},nextProps:this.props,instance:l}),this.setState({infoBox:l},this.setInfoBoxCallback)},t.prototype.componentDidUpdate=function(n){var o=this.state.infoBox;o!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:Vv,eventMap:Sv,prevProps:n,nextProps:this.props,instance:o}))},t.prototype.componentWillUnmount=function(){var n=this.props.onUnmount,o=this.state.infoBox;o!==null&&(n&&n(o),We(this.registeredEvents),o.close())},t.prototype.render=function(){return this.containerElement?Kt.createPortal(m.Children.only(this.props.children),this.containerElement):null},t.contextType=Ve,t})(m.PureComponent);var r7=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var o,r,i;if(Array.isArray(t)){if(o=t.length,o!=n.length)return!1;for(r=o;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),o=i.length,o!==Object.keys(n).length)return!1;for(r=o;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=o;r--!==0;){var l=i[r];if(!e(t[l],n[l]))return!1}return!0}return t!==t&&n!==n},Rv=XW(r7);const Wv=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],oC=1,As=8;class cp{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,o]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const r=o>>4;if(r!==oC)throw new Error(`Got v${r} data when expected v${oC}.`);const i=Wv[o&15];if(!i)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new cp(s,l,i,t)}constructor(t,n=64,o=Float64Array,r){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=o,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const i=Wv.indexOf(this.ArrayType),l=t*2*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${o}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,As,t),this.coords=new this.ArrayType(this.data,As+s+a,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(As+l+s+a),this.ids=new this.IndexArrayType(this.data,As,t),this.coords=new this.ArrayType(this.data,As+s+a,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(oC<<4)+i]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=t,this.coords[this._pos++]=n,o}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Th(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,o,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:l,nodeSize:s}=this,a=[0,i.length-1,0],c=[];for(;a.length;){const u=a.pop()||0,d=a.pop()||0,I=a.pop()||0;if(d-I<=s){for(let v=I;v<=d;v++){const h=l[2*v],p=l[2*v+1];h>=t&&h<=o&&p>=n&&p<=r&&c.push(i[v])}continue}const C=I+d>>1,f=l[2*C],A=l[2*C+1];f>=t&&f<=o&&A>=n&&A<=r&&c.push(i[C]),(u===0?t<=f:n<=A)&&(a.push(I),a.push(C-1),a.push(1-u)),(u===0?o>=f:r>=A)&&(a.push(C+1),a.push(d),a.push(1-u))}return c}within(t,n,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:l}=this,s=[0,r.length-1,0],a=[],c=o*o;for(;s.length;){const u=s.pop()||0,d=s.pop()||0,I=s.pop()||0;if(d-I<=l){for(let v=I;v<=d;v++)wv(i[2*v],i[2*v+1],t,n)<=c&&a.push(r[v]);continue}const C=I+d>>1,f=i[2*C],A=i[2*C+1];wv(f,A,t,n)<=c&&a.push(r[C]),(u===0?t-o<=f:n-o<=A)&&(s.push(I),s.push(C-1),s.push(1-u)),(u===0?t+o>=f:n+o>=A)&&(s.push(C+1),s.push(d),s.push(1-u))}return a}}function Th(e,t,n,o,r,i){if(r-o<=n)return;const l=o+r>>1;MW(e,t,l,o,r,i),Th(e,t,n,o,l-1,1-i),Th(e,t,n,l+1,r,1-i)}function MW(e,t,n,o,r,i){for(;r>o;){if(r-o>600){const c=r-o+1,u=n-o+1,d=Math.log(c),I=.5*Math.exp(2*d/3),C=.5*Math.sqrt(d*I*(c-I)/c)*(u-c/2<0?-1:1),f=Math.max(o,Math.floor(n-u*I/c+C)),A=Math.min(r,Math.floor(n+(c-u)*I/c+C));MW(e,t,n,f,A,i)}const l=t[2*n+i];let s=o,a=r;for(ps(e,t,o,n),t[2*r+i]>l&&ps(e,t,o,r);s<a;){for(ps(e,t,s,a),s++,a--;t[2*s+i]<l;)s++;for(;t[2*a+i]>l;)a--}t[2*o+i]===l?ps(e,t,o,a):(a++,ps(e,t,a,r)),a<=n&&(o=a+1),n<=a&&(r=a-1)}}function ps(e,t,n,o){rC(e,n,o),rC(t,2*n,2*o),rC(t,2*n+1,2*o+1)}function rC(e,t,n){const o=e[t];e[t]=e[n],e[n]=o}function wv(e,t,n,o){const r=e-n,i=t-o;return r*r+i*i}const i7={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},kv=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1)),qr=2,lr=3,iC=4,er=5,TW=6;class l7{constructor(t){this.options=Object.assign(Object.create(i7),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:n,minZoom:o,maxZoom:r}=this.options;n&&console.time("total time");const i=`prepare ${t.length} points`;n&&console.time(i),this.points=t;const l=[];for(let a=0;a<t.length;a++){const c=t[a];if(!c.geometry)continue;const[u,d]=c.geometry.coordinates,I=kv(Vg(u)),C=kv(Rg(d));l.push(I,C,1/0,a,-1,1),this.options.reduce&&l.push(0)}let s=this.trees[r+1]=this._createTree(l);n&&console.timeEnd(i);for(let a=r;a>=o;a--){const c=+Date.now();s=this.trees[a]=this._createTree(this._cluster(s,a)),n&&console.log("z%d: %d clusters in %dms",a,s.numItems,+Date.now()-c)}return n&&console.timeEnd("total time"),this}getClusters(t,n){let o=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=t[2]===180?180:((t[2]+180)%360+360)%360-180;const l=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)o=-180,i=180;else if(o>i){const d=this.getClusters([o,r,180,l],n),I=this.getClusters([-180,r,i,l],n);return d.concat(I)}const s=this.trees[this._limitZoom(n)],a=s.range(Vg(o),Rg(l),Vg(i),Rg(r)),c=s.data,u=[];for(const d of a){const I=this.stride*d;u.push(c[I+er]>1?xv(c,I,this.clusterProps):this.points[c[I+lr]])}return u}getChildren(t){const n=this._getOriginId(t),o=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[o];if(!i)throw new Error(r);const l=i.data;if(n*this.stride>=l.length)throw new Error(r);const s=this.options.radius/(this.options.extent*Math.pow(2,o-1)),a=l[n*this.stride],c=l[n*this.stride+1],u=i.within(a,c,s),d=[];for(const I of u){const C=I*this.stride;l[C+iC]===t&&d.push(l[C+er]>1?xv(l,C,this.clusterProps):this.points[l[C+lr]])}if(d.length===0)throw new Error(r);return d}getLeaves(t,n,o){n=n||10,o=o||0;const r=[];return this._appendLeaves(r,t,n,o,0),r}getTile(t,n,o){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:l,radius:s}=this.options,a=s/l,c=(o-a)/i,u=(o+1+a)/i,d={features:[]};return this._addTileFeatures(r.range((n-a)/i,c,(n+1+a)/i,u),r.data,n,o,i,d),n===0&&this._addTileFeatures(r.range(1-a/i,c,1,u),r.data,i,o,i,d),n===i-1&&this._addTileFeatures(r.range(0,c,a/i,u),r.data,-1,o,i,d),d.features.length?d:null}getClusterExpansionZoom(t){let n=this._getOriginZoom(t)-1;for(;n<=this.options.maxZoom;){const o=this.getChildren(t);if(n++,o.length!==1)break;t=o[0].properties.cluster_id}return n}_appendLeaves(t,n,o,r,i){const l=this.getChildren(n);for(const s of l){const a=s.properties;if(a&&a.cluster?i+a.point_count<=r?i+=a.point_count:i=this._appendLeaves(t,a.cluster_id,o,r,i):i<r?i++:t.push(s),t.length===o)break}return i}_createTree(t){const n=new cp(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let o=0;o<t.length;o+=this.stride)n.add(t[o],t[o+1]);return n.finish(),n.data=t,n}_addTileFeatures(t,n,o,r,i,l){for(const s of t){const a=s*this.stride,c=n[a+er]>1;let u,d,I;if(c)u=jW(n,a,this.clusterProps),d=n[a],I=n[a+1];else{const A=this.points[n[a+lr]];u=A.properties;const[v,h]=A.geometry.coordinates;d=Vg(v),I=Rg(h)}const C={type:1,geometry:[[Math.round(this.options.extent*(d*i-o)),Math.round(this.options.extent*(I*i-r))]],tags:u};let f;c||this.options.generateId?f=n[a+lr]:f=this.points[n[a+lr]].id,f!==void 0&&(C.id=f),l.features.push(C)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,n){const{radius:o,extent:r,reduce:i,minPoints:l}=this.options,s=o/(r*Math.pow(2,n)),a=t.data,c=[],u=this.stride;for(let d=0;d<a.length;d+=u){if(a[d+qr]<=n)continue;a[d+qr]=n;const I=a[d],C=a[d+1],f=t.within(a[d],a[d+1],s),A=a[d+er];let v=A;for(const h of f){const p=h*u;a[p+qr]>n&&(v+=a[p+er])}if(v>A&&v>=l){let h=I*A,p=C*A,b,y=-1;const Z=((d/u|0)<<5)+(n+1)+this.points.length;for(const G of f){const V=G*u;if(a[V+qr]<=n)continue;a[V+qr]=n;const S=a[V+er];h+=a[V]*S,p+=a[V+1]*S,a[V+iC]=Z,i&&(b||(b=this._map(a,d,!0),y=this.clusterProps.length,this.clusterProps.push(b)),i(b,this._map(a,V)))}a[d+iC]=Z,c.push(h/v,p/v,1/0,Z,-1,v),i&&c.push(y)}else{for(let h=0;h<u;h++)c.push(a[d+h]);if(v>1)for(const h of f){const p=h*u;if(!(a[p+qr]<=n)){a[p+qr]=n;for(let b=0;b<u;b++)c.push(a[p+b])}}}}return c}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,n,o){if(t[n+er]>1){const l=this.clusterProps[t[n+TW]];return o?Object.assign({},l):l}const r=this.points[t[n+lr]].properties,i=this.options.map(r);return o&&i===r?Object.assign({},i):i}}function xv(e,t,n){return{type:"Feature",id:e[t+lr],properties:jW(e,t,n),geometry:{type:"Point",coordinates:[s7(e[t]),a7(e[t+1])]}}}function jW(e,t,n){const o=e[t+er],r=o>=1e4?`${Math.round(o/1e3)}k`:o>=1e3?`${Math.round(o/100)/10}k`:o,i=e[t+TW],l=i===-1?{}:Object.assign({},n[i]);return Object.assign(l,{cluster:!0,cluster_id:e[t+lr],point_count:o,point_count_abbreviated:r})}function Vg(e){return e/360+.5}function Rg(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function s7(e){return(e-.5)*360}function a7(e){const t=(180-e*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function g7(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}class An{static isAdvancedMarkerAvailable(t){return google.maps.marker&&t.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,n){this.isAdvancedMarker(t)?t.map=n:t.setMap(n)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(t.position.lat&&t.position.lng)return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return this.isAdvancedMarker(t)?!0:t.getVisible()}}class jh{constructor({markers:t,position:n}){this.markers=t,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(this.markers.length===0&&!this._position)return;const t=new google.maps.LatLngBounds(this._position,this._position);for(const n of this.markers)t.extend(An.getPosition(n));return t}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>An.getVisible(t)).length}push(t){this.markers.push(t)}delete(){this.marker&&(An.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class c7{constructor({maxZoom:t=16}){this.maxZoom=t}noop({markers:t}){return u7(t)}}const u7=e=>e.map(n=>new jh({position:An.getPosition(n),markers:[n]}));class d7 extends c7{constructor(t){var{maxZoom:n,radius:o=60}=t,r=g7(t,["maxZoom","radius"]);super({maxZoom:n}),this.state={zoom:-1},this.superCluster=new l7(Object.assign({maxZoom:this.maxZoom,radius:o},r))}calculate(t){let n=!1;const o={zoom:t.map.getZoom()};if(!Rv(t.markers,this.markers)){n=!0,this.markers=[...t.markers];const r=this.markers.map(i=>{const l=An.getPosition(i);return{type:"Feature",geometry:{type:"Point",coordinates:[l.lng(),l.lat()]},properties:{marker:i}}});this.superCluster.load(r)}return n||(this.state.zoom<=this.maxZoom||o.zoom<=this.maxZoom)&&(n=!Rv(this.state,o)),this.state=o,n&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:n}}cluster({map:t}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(n=>this.transformCluster(n))}transformCluster({geometry:{coordinates:[t,n]},properties:o}){if(o.cluster)return new jh({markers:this.superCluster.getLeaves(o.cluster_id,1/0).map(i=>i.properties.marker),position:{lat:n,lng:t}});const r=o.marker;return new jh({markers:[r],position:An.getPosition(r)})}}class I7{constructor(t,n){this.markers={sum:t.length};const o=n.map(i=>i.count),r=o.reduce((i,l)=>i+l,0);this.clusters={count:n.length,markers:{mean:r/n.length,sum:r,min:Math.min(...o),max:Math.max(...o)}}}}class C7{render({count:t,position:n},o,r){const l=`<svg fill="${t>Math.max(10,o.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${t}</text>
</svg>`,s=`Cluster of ${t} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+t;if(An.isAdvancedMarkerAvailable(r)){const d=new DOMParser().parseFromString(l,"image/svg+xml").documentElement;d.setAttribute("transform","translate(0 25)");const I={map:r,position:n,zIndex:a,title:s,content:d};return new google.maps.marker.AdvancedMarkerElement(I)}const c={position:n,zIndex:a,title:s,icon:{url:`data:image/svg+xml;base64,${btoa(l)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(c)}}function m7(e,t){for(let n in t.prototype)e.prototype[n]=t.prototype[n]}class up{constructor(){m7(up,google.maps.OverlayView)}}var Ls;(function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"})(Ls||(Ls={}));const h7=(e,t,n)=>{n.fitBounds(t.bounds)};class f7 extends up{constructor({map:t,markers:n=[],algorithmOptions:o={},algorithm:r=new d7(o),renderer:i=new C7,onClusterClick:l=h7}){super(),this.markers=[...n],this.clusters=[],this.algorithm=r,this.renderer=i,this.onClusterClick=l,t&&this.setMap(t)}addMarker(t,n){this.markers.includes(t)||(this.markers.push(t),n||this.render())}addMarkers(t,n){t.forEach(o=>{this.addMarker(o,!0)}),n||this.render()}removeMarker(t,n){const o=this.markers.indexOf(t);return o===-1?!1:(An.setMap(t,null),this.markers.splice(o,1),n||this.render(),!0)}removeMarkers(t,n){let o=!1;return t.forEach(r=>{o=this.removeMarker(r,!0)||o}),o&&!n&&this.render(),o}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&t.getProjection()){google.maps.event.trigger(this,Ls.CLUSTERING_BEGIN,this);const{clusters:n,changed:o}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});if(o||o==null){const r=new Set;for(const l of n)l.markers.length==1&&r.add(l.markers[0]);const i=[];for(const l of this.clusters)l.marker!=null&&(l.markers.length==1?r.has(l.marker)||An.setMap(l.marker,null):i.push(l.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>i.forEach(l=>An.setMap(l,null)))}google.maps.event.trigger(this,Ls.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>An.setMap(t,null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){const t=new I7(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(o=>{o.markers.length===1?o.marker=o.markers[0]:(o.marker=this.renderer.render(o,t,n),o.markers.forEach(r=>An.setMap(r,null)),this.onClusterClick&&o.marker.addListener("click",r=>{google.maps.event.trigger(this,Ls.CLUSTER_CLICK,o),this.onClusterClick(r,o,n)})),An.setMap(o.marker,n)})}}function A7(e){var t=k8(),n=m.useState(null),o=n[0],r=n[1];return m.useEffect(function(){if(t&&o===null){var i=new f7(be(be({},e),{map:t}));r(i)}},[t]),o}function p7(e){var t=e.children,n=e.options,o=A7(n);return o!==null?t(o):null}m.memo(p7);var Xv={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Jv={options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},zIndex:function(e,t){e.setZIndex(t)}};function b7(e){var t=e.children,n=e.anchor,o=e.options,r=e.position,i=e.zIndex,l=e.onCloseClick,s=e.onDomReady,a=e.onContentChanged,c=e.onPositionChanged,u=e.onZindexChanged,d=e.onLoad,I=e.onUnmount,C=m.useContext(Ve),f=m.useState(null),A=f[0],v=f[1],h=m.useState(null),p=h[0],b=h[1],y=m.useState(null),Z=y[0],G=y[1],V=m.useState(null),S=V[0],k=V[1],B=m.useState(null),R=B[0],W=B[1],w=m.useState(null),X=w[0],E=w[1],M=m.useRef(null);return m.useEffect(function(){A!==null&&(A.close(),n?A.open(C,n):A.getPosition()&&A.open(C))},[C,A,n]),m.useEffect(function(){o&&A!==null&&A.setOptions(o)},[A,o]),m.useEffect(function(){r&&A!==null&&A.setPosition(r)},[r]),m.useEffect(function(){typeof i=="number"&&A!==null&&A.setZIndex(i)},[i]),m.useEffect(function(){A&&l&&(p!==null&&google.maps.event.removeListener(p),b(google.maps.event.addListener(A,"closeclick",l)))},[l]),m.useEffect(function(){A&&s&&(Z!==null&&google.maps.event.removeListener(Z),G(google.maps.event.addListener(A,"domready",s)))},[s]),m.useEffect(function(){A&&a&&(S!==null&&google.maps.event.removeListener(S),k(google.maps.event.addListener(A,"content_changed",a)))},[a]),m.useEffect(function(){A&&c&&(R!==null&&google.maps.event.removeListener(R),W(google.maps.event.addListener(A,"position_changed",c)))},[c]),m.useEffect(function(){A&&u&&(X!==null&&google.maps.event.removeListener(X),E(google.maps.event.addListener(A,"zindex_changed",u)))},[u]),m.useEffect(function(){var L=new google.maps.InfoWindow(be({},o||{}));return v(L),M.current=document.createElement("div"),l&&b(google.maps.event.addListener(L,"closeclick",l)),s&&G(google.maps.event.addListener(L,"domready",s)),a&&k(google.maps.event.addListener(L,"content_changed",a)),c&&W(google.maps.event.addListener(L,"position_changed",c)),u&&E(google.maps.event.addListener(L,"zindex_changed",u)),L.setContent(M.current),r&&L.setPosition(r),i&&L.setZIndex(i),n?L.open(C,n):L.getPosition()?L.open(C):bt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),d&&d(L),function(){p&&google.maps.event.removeListener(p),S&&google.maps.event.removeListener(S),Z&&google.maps.event.removeListener(Z),R&&google.maps.event.removeListener(R),X&&google.maps.event.removeListener(X),I&&I(L),L.close()}},[]),M.current?Kt.createPortal(m.Children.only(t),M.current):null}m.memo(b7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=null,n.state={infoWindow:null},n.open=function(o,r){r?o.open(n.context,r):o.getPosition()?o.open(n.context):bt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")},n.setInfoWindowCallback=function(){n.state.infoWindow!==null&&n.containerElement!==null&&(n.state.infoWindow.setContent(n.containerElement),n.open(n.state.infoWindow,n.props.anchor),n.props.onLoad&&n.props.onLoad(n.state.infoWindow))},n}return t.prototype.componentDidMount=function(){var n=new google.maps.InfoWindow(be({},this.props.options||{}));this.containerElement=document.createElement("div"),this.registeredEvents=Re({updaterMap:Jv,eventMap:Xv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{infoWindow:n}},this.setInfoWindowCallback)},t.prototype.componentDidUpdate=function(n){this.state.infoWindow!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:Jv,eventMap:Xv,prevProps:n,nextProps:this.props,instance:this.state.infoWindow}))},t.prototype.componentWillUnmount=function(){this.state.infoWindow!==null&&(We(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())},t.prototype.render=function(){return this.containerElement?Kt.createPortal(m.Children.only(this.props.children),this.containerElement):null},t.contextType=Ve,t})(m.PureComponent);var Nv={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Yv={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},visible:function(e,t){e.setVisible(t)}},y7={};function v7(e){var t=e.options,n=e.draggable,o=e.editable,r=e.visible,i=e.path,l=e.onDblClick,s=e.onDragEnd,a=e.onDragStart,c=e.onMouseDown,u=e.onMouseMove,d=e.onMouseOut,I=e.onMouseOver,C=e.onMouseUp,f=e.onRightClick,A=e.onClick,v=e.onDrag,h=e.onLoad,p=e.onUnmount,b=m.useContext(Ve),y=m.useState(null),Z=y[0],G=y[1],V=m.useState(null),S=V[0],k=V[1],B=m.useState(null),R=B[0],W=B[1],w=m.useState(null),X=w[0],E=w[1],M=m.useState(null),L=M[0],F=M[1],Y=m.useState(null),N=Y[0],x=Y[1],H=m.useState(null),K=H[0],T=H[1],j=m.useState(null),J=j[0],z=j[1],U=m.useState(null),D=U[0],O=U[1],ee=m.useState(null),re=ee[0],ae=ee[1],ge=m.useState(null),ne=ge[0],ue=ge[1],me=m.useState(null),q=me[0],_=me[1];return m.useEffect(function(){Z!==null&&Z.setMap(b)},[b]),m.useEffect(function(){typeof t<"u"&&Z!==null&&Z.setOptions(t)},[Z,t]),m.useEffect(function(){typeof n<"u"&&Z!==null&&Z.setDraggable(n)},[Z,n]),m.useEffect(function(){typeof o<"u"&&Z!==null&&Z.setEditable(o)},[Z,o]),m.useEffect(function(){typeof r<"u"&&Z!==null&&Z.setVisible(r)},[Z,r]),m.useEffect(function(){typeof i<"u"&&Z!==null&&Z.setPath(i)},[Z,i]),m.useEffect(function(){Z&&l&&(S!==null&&google.maps.event.removeListener(S),k(google.maps.event.addListener(Z,"dblclick",l)))},[l]),m.useEffect(function(){Z&&s&&(R!==null&&google.maps.event.removeListener(R),W(google.maps.event.addListener(Z,"dragend",s)))},[s]),m.useEffect(function(){Z&&a&&(X!==null&&google.maps.event.removeListener(X),E(google.maps.event.addListener(Z,"dragstart",a)))},[a]),m.useEffect(function(){Z&&c&&(L!==null&&google.maps.event.removeListener(L),F(google.maps.event.addListener(Z,"mousedown",c)))},[c]),m.useEffect(function(){Z&&u&&(N!==null&&google.maps.event.removeListener(N),x(google.maps.event.addListener(Z,"mousemove",u)))},[u]),m.useEffect(function(){Z&&d&&(K!==null&&google.maps.event.removeListener(K),T(google.maps.event.addListener(Z,"mouseout",d)))},[d]),m.useEffect(function(){Z&&I&&(J!==null&&google.maps.event.removeListener(J),z(google.maps.event.addListener(Z,"mouseover",I)))},[I]),m.useEffect(function(){Z&&C&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(Z,"mouseup",C)))},[C]),m.useEffect(function(){Z&&f&&(re!==null&&google.maps.event.removeListener(re),ae(google.maps.event.addListener(Z,"rightclick",f)))},[f]),m.useEffect(function(){Z&&A&&(ne!==null&&google.maps.event.removeListener(ne),ue(google.maps.event.addListener(Z,"click",A)))},[A]),m.useEffect(function(){Z&&v&&(q!==null&&google.maps.event.removeListener(q),_(google.maps.event.addListener(Z,"drag",v)))},[v]),m.useEffect(function(){var $=new google.maps.Polyline(be(be({},t||y7),{map:b}));return i&&$.setPath(i),typeof r<"u"&&$.setVisible(r),typeof o<"u"&&$.setEditable(o),typeof n<"u"&&$.setDraggable(n),l&&k(google.maps.event.addListener($,"dblclick",l)),s&&W(google.maps.event.addListener($,"dragend",s)),a&&E(google.maps.event.addListener($,"dragstart",a)),c&&F(google.maps.event.addListener($,"mousedown",c)),u&&x(google.maps.event.addListener($,"mousemove",u)),d&&T(google.maps.event.addListener($,"mouseout",d)),I&&z(google.maps.event.addListener($,"mouseover",I)),C&&O(google.maps.event.addListener($,"mouseup",C)),f&&ae(google.maps.event.addListener($,"rightclick",f)),A&&ue(google.maps.event.addListener($,"click",A)),v&&_(google.maps.event.addListener($,"drag",v)),G($),h&&h($),function(){S!==null&&google.maps.event.removeListener(S),R!==null&&google.maps.event.removeListener(R),X!==null&&google.maps.event.removeListener(X),L!==null&&google.maps.event.removeListener(L),N!==null&&google.maps.event.removeListener(N),K!==null&&google.maps.event.removeListener(K),J!==null&&google.maps.event.removeListener(J),D!==null&&google.maps.event.removeListener(D),re!==null&&google.maps.event.removeListener(re),ne!==null&&google.maps.event.removeListener(ne),p&&p($),$.setMap(null)}},[]),null}m.memo(v7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={polyline:null},n.setPolylineCallback=function(){n.state.polyline!==null&&n.props.onLoad&&n.props.onLoad(n.state.polyline)},n}return t.prototype.componentDidMount=function(){var n=new google.maps.Polyline(be(be({},this.props.options||{}),{map:this.context}));this.registeredEvents=Re({updaterMap:Yv,eventMap:Nv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{polyline:n}},this.setPolylineCallback)},t.prototype.componentDidUpdate=function(n){this.state.polyline!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:Yv,eventMap:Nv,prevProps:n,nextProps:this.props,instance:this.state.polyline}))},t.prototype.componentWillUnmount=function(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),We(this.registeredEvents),this.state.polyline.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);var Hv={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Fv={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},paths:function(e,t){e.setPaths(t)},visible:function(e,t){e.setVisible(t)}};function Z7(e){var t=e.options,n=e.draggable,o=e.editable,r=e.visible,i=e.path,l=e.paths,s=e.onDblClick,a=e.onDragEnd,c=e.onDragStart,u=e.onMouseDown,d=e.onMouseMove,I=e.onMouseOut,C=e.onMouseOver,f=e.onMouseUp,A=e.onRightClick,v=e.onClick,h=e.onDrag,p=e.onLoad,b=e.onUnmount,y=e.onEdit,Z=m.useContext(Ve),G=m.useState(null),V=G[0],S=G[1],k=m.useState(null),B=k[0],R=k[1],W=m.useState(null),w=W[0],X=W[1],E=m.useState(null),M=E[0],L=E[1],F=m.useState(null),Y=F[0],N=F[1],x=m.useState(null),H=x[0],K=x[1],T=m.useState(null),j=T[0],J=T[1],z=m.useState(null),U=z[0],D=z[1],O=m.useState(null),ee=O[0],re=O[1],ae=m.useState(null),ge=ae[0],ne=ae[1],ue=m.useState(null),me=ue[0],q=ue[1],_=m.useState(null),$=_[0],oe=_[1];return m.useEffect(function(){V!==null&&V.setMap(Z)},[Z]),m.useEffect(function(){typeof t<"u"&&V!==null&&V.setOptions(t)},[V,t]),m.useEffect(function(){typeof n<"u"&&V!==null&&V.setDraggable(n)},[V,n]),m.useEffect(function(){typeof o<"u"&&V!==null&&V.setEditable(o)},[V,o]),m.useEffect(function(){typeof r<"u"&&V!==null&&V.setVisible(r)},[V,r]),m.useEffect(function(){typeof i<"u"&&V!==null&&V.setPath(i)},[V,i]),m.useEffect(function(){typeof l<"u"&&V!==null&&V.setPaths(l)},[V,l]),m.useEffect(function(){V&&s&&(B!==null&&google.maps.event.removeListener(B),R(google.maps.event.addListener(V,"dblclick",s)))},[s]),m.useEffect(function(){V&&(google.maps.event.addListener(V.getPath(),"insert_at",function(){y==null||y(V)}),google.maps.event.addListener(V.getPath(),"set_at",function(){y==null||y(V)}))},[V,y]),m.useEffect(function(){V&&a&&(w!==null&&google.maps.event.removeListener(w),X(google.maps.event.addListener(V,"dragend",a)))},[a]),m.useEffect(function(){V&&c&&(M!==null&&google.maps.event.removeListener(M),L(google.maps.event.addListener(V,"dragstart",c)))},[c]),m.useEffect(function(){V&&u&&(Y!==null&&google.maps.event.removeListener(Y),N(google.maps.event.addListener(V,"mousedown",u)))},[u]),m.useEffect(function(){V&&d&&(H!==null&&google.maps.event.removeListener(H),K(google.maps.event.addListener(V,"mousemove",d)))},[d]),m.useEffect(function(){V&&I&&(j!==null&&google.maps.event.removeListener(j),J(google.maps.event.addListener(V,"mouseout",I)))},[I]),m.useEffect(function(){V&&C&&(U!==null&&google.maps.event.removeListener(U),D(google.maps.event.addListener(V,"mouseover",C)))},[C]),m.useEffect(function(){V&&f&&(ee!==null&&google.maps.event.removeListener(ee),re(google.maps.event.addListener(V,"mouseup",f)))},[f]),m.useEffect(function(){V&&A&&(ge!==null&&google.maps.event.removeListener(ge),ne(google.maps.event.addListener(V,"rightclick",A)))},[A]),m.useEffect(function(){V&&v&&(me!==null&&google.maps.event.removeListener(me),q(google.maps.event.addListener(V,"click",v)))},[v]),m.useEffect(function(){V&&h&&($!==null&&google.maps.event.removeListener($),oe(google.maps.event.addListener(V,"drag",h)))},[h]),m.useEffect(function(){var Q=new google.maps.Polygon(be(be({},t||{}),{map:Z}));return i&&Q.setPath(i),l&&Q.setPaths(l),typeof r<"u"&&Q.setVisible(r),typeof o<"u"&&Q.setEditable(o),typeof n<"u"&&Q.setDraggable(n),s&&R(google.maps.event.addListener(Q,"dblclick",s)),a&&X(google.maps.event.addListener(Q,"dragend",a)),c&&L(google.maps.event.addListener(Q,"dragstart",c)),u&&N(google.maps.event.addListener(Q,"mousedown",u)),d&&K(google.maps.event.addListener(Q,"mousemove",d)),I&&J(google.maps.event.addListener(Q,"mouseout",I)),C&&D(google.maps.event.addListener(Q,"mouseover",C)),f&&re(google.maps.event.addListener(Q,"mouseup",f)),A&&ne(google.maps.event.addListener(Q,"rightclick",A)),v&&q(google.maps.event.addListener(Q,"click",v)),h&&oe(google.maps.event.addListener(Q,"drag",h)),S(Q),p&&p(Q),function(){B!==null&&google.maps.event.removeListener(B),w!==null&&google.maps.event.removeListener(w),M!==null&&google.maps.event.removeListener(M),Y!==null&&google.maps.event.removeListener(Y),H!==null&&google.maps.event.removeListener(H),j!==null&&google.maps.event.removeListener(j),U!==null&&google.maps.event.removeListener(U),ee!==null&&google.maps.event.removeListener(ee),ge!==null&&google.maps.event.removeListener(ge),me!==null&&google.maps.event.removeListener(me),b&&b(Q),Q.setMap(null)}},[]),null}m.memo(Z7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={polygon:null},n.setPolygonCallback=function(){n.state.polygon!==null&&n.props.onLoad&&n.props.onLoad(n.state.polygon)},n}return t.prototype.componentDidMount=function(){var n=new google.maps.Polygon(be(be({},this.props.options||{}),{map:this.context}));this.registeredEvents=Re({updaterMap:Fv,eventMap:Hv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{polygon:n}},this.setPolygonCallback)},t.prototype.componentDidUpdate=function(n){this.state.polygon!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:Fv,eventMap:Hv,prevProps:n,nextProps:this.props,instance:this.state.polygon}))},t.prototype.componentWillUnmount=function(){this.state.polygon!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polygon),We(this.registeredEvents),this.state.polygon&&this.state.polygon.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);var Ev={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Kv={bounds:function(e,t){e.setBounds(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},visible:function(e,t){e.setVisible(t)}};function G7(e){var t=e.options,n=e.bounds,o=e.draggable,r=e.editable,i=e.visible,l=e.onDblClick,s=e.onDragEnd,a=e.onDragStart,c=e.onMouseDown,u=e.onMouseMove,d=e.onMouseOut,I=e.onMouseOver,C=e.onMouseUp,f=e.onRightClick,A=e.onClick,v=e.onDrag,h=e.onBoundsChanged,p=e.onLoad,b=e.onUnmount,y=m.useContext(Ve),Z=m.useState(null),G=Z[0],V=Z[1],S=m.useState(null),k=S[0],B=S[1],R=m.useState(null),W=R[0],w=R[1],X=m.useState(null),E=X[0],M=X[1],L=m.useState(null),F=L[0],Y=L[1],N=m.useState(null),x=N[0],H=N[1],K=m.useState(null),T=K[0],j=K[1],J=m.useState(null),z=J[0],U=J[1],D=m.useState(null),O=D[0],ee=D[1],re=m.useState(null),ae=re[0],ge=re[1],ne=m.useState(null),ue=ne[0],me=ne[1],q=m.useState(null),_=q[0],$=q[1],oe=m.useState(null),Q=oe[0],ce=oe[1];return m.useEffect(function(){G!==null&&G.setMap(y)},[y]),m.useEffect(function(){typeof t<"u"&&G!==null&&G.setOptions(t)},[G,t]),m.useEffect(function(){typeof o<"u"&&G!==null&&G.setDraggable(o)},[G,o]),m.useEffect(function(){typeof r<"u"&&G!==null&&G.setEditable(r)},[G,r]),m.useEffect(function(){typeof i<"u"&&G!==null&&G.setVisible(i)},[G,i]),m.useEffect(function(){typeof n<"u"&&G!==null&&G.setBounds(n)},[G,n]),m.useEffect(function(){G&&l&&(k!==null&&google.maps.event.removeListener(k),B(google.maps.event.addListener(G,"dblclick",l)))},[l]),m.useEffect(function(){G&&s&&(W!==null&&google.maps.event.removeListener(W),w(google.maps.event.addListener(G,"dragend",s)))},[s]),m.useEffect(function(){G&&a&&(E!==null&&google.maps.event.removeListener(E),M(google.maps.event.addListener(G,"dragstart",a)))},[a]),m.useEffect(function(){G&&c&&(F!==null&&google.maps.event.removeListener(F),Y(google.maps.event.addListener(G,"mousedown",c)))},[c]),m.useEffect(function(){G&&u&&(x!==null&&google.maps.event.removeListener(x),H(google.maps.event.addListener(G,"mousemove",u)))},[u]),m.useEffect(function(){G&&d&&(T!==null&&google.maps.event.removeListener(T),j(google.maps.event.addListener(G,"mouseout",d)))},[d]),m.useEffect(function(){G&&I&&(z!==null&&google.maps.event.removeListener(z),U(google.maps.event.addListener(G,"mouseover",I)))},[I]),m.useEffect(function(){G&&C&&(O!==null&&google.maps.event.removeListener(O),ee(google.maps.event.addListener(G,"mouseup",C)))},[C]),m.useEffect(function(){G&&f&&(ae!==null&&google.maps.event.removeListener(ae),ge(google.maps.event.addListener(G,"rightclick",f)))},[f]),m.useEffect(function(){G&&A&&(ue!==null&&google.maps.event.removeListener(ue),me(google.maps.event.addListener(G,"click",A)))},[A]),m.useEffect(function(){G&&v&&(_!==null&&google.maps.event.removeListener(_),$(google.maps.event.addListener(G,"drag",v)))},[v]),m.useEffect(function(){G&&h&&(Q!==null&&google.maps.event.removeListener(Q),ce(google.maps.event.addListener(G,"bounds_changed",h)))},[h]),m.useEffect(function(){var le=new google.maps.Rectangle(be(be({},t||{}),{map:y}));return typeof i<"u"&&le.setVisible(i),typeof r<"u"&&le.setEditable(r),typeof o<"u"&&le.setDraggable(o),typeof n<"u"&&le.setBounds(n),l&&B(google.maps.event.addListener(le,"dblclick",l)),s&&w(google.maps.event.addListener(le,"dragend",s)),a&&M(google.maps.event.addListener(le,"dragstart",a)),c&&Y(google.maps.event.addListener(le,"mousedown",c)),u&&H(google.maps.event.addListener(le,"mousemove",u)),d&&j(google.maps.event.addListener(le,"mouseout",d)),I&&U(google.maps.event.addListener(le,"mouseover",I)),C&&ee(google.maps.event.addListener(le,"mouseup",C)),f&&ge(google.maps.event.addListener(le,"rightclick",f)),A&&me(google.maps.event.addListener(le,"click",A)),v&&$(google.maps.event.addListener(le,"drag",v)),h&&ce(google.maps.event.addListener(le,"bounds_changed",h)),V(le),p&&p(le),function(){k!==null&&google.maps.event.removeListener(k),W!==null&&google.maps.event.removeListener(W),E!==null&&google.maps.event.removeListener(E),F!==null&&google.maps.event.removeListener(F),x!==null&&google.maps.event.removeListener(x),T!==null&&google.maps.event.removeListener(T),z!==null&&google.maps.event.removeListener(z),O!==null&&google.maps.event.removeListener(O),ae!==null&&google.maps.event.removeListener(ae),ue!==null&&google.maps.event.removeListener(ue),_!==null&&google.maps.event.removeListener(_),Q!==null&&google.maps.event.removeListener(Q),b&&b(le),le.setMap(null)}},[]),null}m.memo(G7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={rectangle:null},n.setRectangleCallback=function(){n.state.rectangle!==null&&n.props.onLoad&&n.props.onLoad(n.state.rectangle)},n}return t.prototype.componentDidMount=function(){var n=new google.maps.Rectangle(be(be({},this.props.options||{}),{map:this.context}));this.registeredEvents=Re({updaterMap:Kv,eventMap:Ev,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{rectangle:n}},this.setRectangleCallback)},t.prototype.componentDidUpdate=function(n){this.state.rectangle!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:Kv,eventMap:Ev,prevProps:n,nextProps:this.props,instance:this.state.rectangle}))},t.prototype.componentWillUnmount=function(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),We(this.registeredEvents),this.state.rectangle.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);var Lv={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Mv={center:function(e,t){e.setCenter(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},radius:function(e,t){e.setRadius(t)},visible:function(e,t){e.setVisible(t)}},B7={};function S7(e){var t=e.options,n=e.center,o=e.radius,r=e.draggable,i=e.editable,l=e.visible,s=e.onDblClick,a=e.onDragEnd,c=e.onDragStart,u=e.onMouseDown,d=e.onMouseMove,I=e.onMouseOut,C=e.onMouseOver,f=e.onMouseUp,A=e.onRightClick,v=e.onClick,h=e.onDrag,p=e.onCenterChanged,b=e.onRadiusChanged,y=e.onLoad,Z=e.onUnmount,G=m.useContext(Ve),V=m.useState(null),S=V[0],k=V[1],B=m.useState(null),R=B[0],W=B[1],w=m.useState(null),X=w[0],E=w[1],M=m.useState(null),L=M[0],F=M[1],Y=m.useState(null),N=Y[0],x=Y[1],H=m.useState(null),K=H[0],T=H[1],j=m.useState(null),J=j[0],z=j[1],U=m.useState(null),D=U[0],O=U[1],ee=m.useState(null),re=ee[0],ae=ee[1],ge=m.useState(null),ne=ge[0],ue=ge[1],me=m.useState(null),q=me[0],_=me[1],$=m.useState(null),oe=$[0],Q=$[1],ce=m.useState(null),le=ce[0],fe=ce[1],Ae=m.useState(null),ie=Ae[0],pe=Ae[1];return m.useEffect(function(){S!==null&&S.setMap(G)},[G]),m.useEffect(function(){typeof t<"u"&&S!==null&&S.setOptions(t)},[S,t]),m.useEffect(function(){typeof r<"u"&&S!==null&&S.setDraggable(r)},[S,r]),m.useEffect(function(){typeof i<"u"&&S!==null&&S.setEditable(i)},[S,i]),m.useEffect(function(){typeof l<"u"&&S!==null&&S.setVisible(l)},[S,l]),m.useEffect(function(){typeof o=="number"&&S!==null&&S.setRadius(o)},[S,o]),m.useEffect(function(){typeof n<"u"&&S!==null&&S.setCenter(n)},[S,n]),m.useEffect(function(){S&&s&&(R!==null&&google.maps.event.removeListener(R),W(google.maps.event.addListener(S,"dblclick",s)))},[s]),m.useEffect(function(){S&&a&&(X!==null&&google.maps.event.removeListener(X),E(google.maps.event.addListener(S,"dragend",a)))},[a]),m.useEffect(function(){S&&c&&(L!==null&&google.maps.event.removeListener(L),F(google.maps.event.addListener(S,"dragstart",c)))},[c]),m.useEffect(function(){S&&u&&(N!==null&&google.maps.event.removeListener(N),x(google.maps.event.addListener(S,"mousedown",u)))},[u]),m.useEffect(function(){S&&d&&(K!==null&&google.maps.event.removeListener(K),T(google.maps.event.addListener(S,"mousemove",d)))},[d]),m.useEffect(function(){S&&I&&(J!==null&&google.maps.event.removeListener(J),z(google.maps.event.addListener(S,"mouseout",I)))},[I]),m.useEffect(function(){S&&C&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(S,"mouseover",C)))},[C]),m.useEffect(function(){S&&f&&(re!==null&&google.maps.event.removeListener(re),ae(google.maps.event.addListener(S,"mouseup",f)))},[f]),m.useEffect(function(){S&&A&&(ne!==null&&google.maps.event.removeListener(ne),ue(google.maps.event.addListener(S,"rightclick",A)))},[A]),m.useEffect(function(){S&&v&&(q!==null&&google.maps.event.removeListener(q),_(google.maps.event.addListener(S,"click",v)))},[v]),m.useEffect(function(){S&&h&&(oe!==null&&google.maps.event.removeListener(oe),Q(google.maps.event.addListener(S,"drag",h)))},[h]),m.useEffect(function(){S&&p&&(le!==null&&google.maps.event.removeListener(le),fe(google.maps.event.addListener(S,"center_changed",p)))},[v]),m.useEffect(function(){S&&b&&(ie!==null&&google.maps.event.removeListener(ie),pe(google.maps.event.addListener(S,"radius_changed",b)))},[b]),m.useEffect(function(){var Ze=new google.maps.Circle(be(be({},t||B7),{map:G}));return typeof o=="number"&&Ze.setRadius(o),typeof n<"u"&&Ze.setCenter(n),typeof o=="number"&&Ze.setRadius(o),typeof l<"u"&&Ze.setVisible(l),typeof i<"u"&&Ze.setEditable(i),typeof r<"u"&&Ze.setDraggable(r),s&&W(google.maps.event.addListener(Ze,"dblclick",s)),a&&E(google.maps.event.addListener(Ze,"dragend",a)),c&&F(google.maps.event.addListener(Ze,"dragstart",c)),u&&x(google.maps.event.addListener(Ze,"mousedown",u)),d&&T(google.maps.event.addListener(Ze,"mousemove",d)),I&&z(google.maps.event.addListener(Ze,"mouseout",I)),C&&O(google.maps.event.addListener(Ze,"mouseover",C)),f&&ae(google.maps.event.addListener(Ze,"mouseup",f)),A&&ue(google.maps.event.addListener(Ze,"rightclick",A)),v&&_(google.maps.event.addListener(Ze,"click",v)),h&&Q(google.maps.event.addListener(Ze,"drag",h)),p&&fe(google.maps.event.addListener(Ze,"center_changed",p)),b&&pe(google.maps.event.addListener(Ze,"radius_changed",b)),k(Ze),y&&y(Ze),function(){R!==null&&google.maps.event.removeListener(R),X!==null&&google.maps.event.removeListener(X),L!==null&&google.maps.event.removeListener(L),N!==null&&google.maps.event.removeListener(N),K!==null&&google.maps.event.removeListener(K),J!==null&&google.maps.event.removeListener(J),D!==null&&google.maps.event.removeListener(D),re!==null&&google.maps.event.removeListener(re),ne!==null&&google.maps.event.removeListener(ne),q!==null&&google.maps.event.removeListener(q),le!==null&&google.maps.event.removeListener(le),ie!==null&&google.maps.event.removeListener(ie),Z&&Z(Ze),Ze.setMap(null)}},[]),null}m.memo(S7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={circle:null},n.setCircleCallback=function(){n.state.circle!==null&&n.props.onLoad&&n.props.onLoad(n.state.circle)},n}return t.prototype.componentDidMount=function(){var n=new google.maps.Circle(be(be({},this.props.options||{}),{map:this.context}));this.registeredEvents=Re({updaterMap:Mv,eventMap:Lv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{circle:n}},this.setCircleCallback)},t.prototype.componentDidUpdate=function(n){this.state.circle!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:Mv,eventMap:Lv,prevProps:n,nextProps:this.props,instance:this.state.circle}))},t.prototype.componentWillUnmount=function(){var n;this.state.circle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),We(this.registeredEvents),(n=this.state.circle)===null||n===void 0||n.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);var Tv={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},jv={add:function(e,t){e.add(t)},addgeojson:function(e,t,n){e.addGeoJson(t,n)},contains:function(e,t){e.contains(t)},foreach:function(e,t){e.forEach(t)},loadgeojson:function(e,t,n,o){e.loadGeoJson(t,n,o)},overridestyle:function(e,t,n){e.overrideStyle(t,n)},remove:function(e,t){e.remove(t)},revertstyle:function(e,t){e.revertStyle(t)},controlposition:function(e,t){e.setControlPosition(t)},controls:function(e,t){e.setControls(t)},drawingmode:function(e,t){e.setDrawingMode(t)},map:function(e,t){e.setMap(t)},style:function(e,t){e.setStyle(t)},togeojson:function(e,t){e.toGeoJson(t)}};function V7(e){var t=e.options,n=e.onClick,o=e.onDblClick,r=e.onMouseDown,i=e.onMouseMove,l=e.onMouseOut,s=e.onMouseOver,a=e.onMouseUp,c=e.onRightClick,u=e.onAddFeature,d=e.onRemoveFeature,I=e.onRemoveProperty,C=e.onSetGeometry,f=e.onSetProperty,A=e.onLoad,v=e.onUnmount,h=m.useContext(Ve),p=m.useState(null),b=p[0],y=p[1],Z=m.useState(null),G=Z[0],V=Z[1],S=m.useState(null),k=S[0],B=S[1],R=m.useState(null),W=R[0],w=R[1],X=m.useState(null),E=X[0],M=X[1],L=m.useState(null),F=L[0],Y=L[1],N=m.useState(null),x=N[0],H=N[1],K=m.useState(null),T=K[0],j=K[1],J=m.useState(null),z=J[0],U=J[1],D=m.useState(null),O=D[0],ee=D[1],re=m.useState(null),ae=re[0],ge=re[1],ne=m.useState(null),ue=ne[0],me=ne[1],q=m.useState(null),_=q[0],$=q[1],oe=m.useState(null),Q=oe[0],ce=oe[1];return m.useEffect(function(){b!==null&&b.setMap(h)},[h]),m.useEffect(function(){b&&o&&(G!==null&&google.maps.event.removeListener(G),V(google.maps.event.addListener(b,"dblclick",o)))},[o]),m.useEffect(function(){b&&r&&(k!==null&&google.maps.event.removeListener(k),B(google.maps.event.addListener(b,"mousedown",r)))},[r]),m.useEffect(function(){b&&i&&(W!==null&&google.maps.event.removeListener(W),w(google.maps.event.addListener(b,"mousemove",i)))},[i]),m.useEffect(function(){b&&l&&(E!==null&&google.maps.event.removeListener(E),M(google.maps.event.addListener(b,"mouseout",l)))},[l]),m.useEffect(function(){b&&s&&(F!==null&&google.maps.event.removeListener(F),Y(google.maps.event.addListener(b,"mouseover",s)))},[s]),m.useEffect(function(){b&&a&&(x!==null&&google.maps.event.removeListener(x),H(google.maps.event.addListener(b,"mouseup",a)))},[a]),m.useEffect(function(){b&&c&&(T!==null&&google.maps.event.removeListener(T),j(google.maps.event.addListener(b,"rightclick",c)))},[c]),m.useEffect(function(){b&&n&&(z!==null&&google.maps.event.removeListener(z),U(google.maps.event.addListener(b,"click",n)))},[n]),m.useEffect(function(){b&&u&&(O!==null&&google.maps.event.removeListener(O),ee(google.maps.event.addListener(b,"addfeature",u)))},[u]),m.useEffect(function(){b&&d&&(ae!==null&&google.maps.event.removeListener(ae),ge(google.maps.event.addListener(b,"removefeature",d)))},[d]),m.useEffect(function(){b&&I&&(ue!==null&&google.maps.event.removeListener(ue),me(google.maps.event.addListener(b,"removeproperty",I)))},[I]),m.useEffect(function(){b&&C&&(_!==null&&google.maps.event.removeListener(_),$(google.maps.event.addListener(b,"setgeometry",C)))},[C]),m.useEffect(function(){b&&f&&(Q!==null&&google.maps.event.removeListener(Q),ce(google.maps.event.addListener(b,"setproperty",f)))},[f]),m.useEffect(function(){if(h!==null){var le=new google.maps.Data(be(be({},t||{}),{map:h}));o&&V(google.maps.event.addListener(le,"dblclick",o)),r&&B(google.maps.event.addListener(le,"mousedown",r)),i&&w(google.maps.event.addListener(le,"mousemove",i)),l&&M(google.maps.event.addListener(le,"mouseout",l)),s&&Y(google.maps.event.addListener(le,"mouseover",s)),a&&H(google.maps.event.addListener(le,"mouseup",a)),c&&j(google.maps.event.addListener(le,"rightclick",c)),n&&U(google.maps.event.addListener(le,"click",n)),u&&ee(google.maps.event.addListener(le,"addfeature",u)),d&&ge(google.maps.event.addListener(le,"removefeature",d)),I&&me(google.maps.event.addListener(le,"removeproperty",I)),C&&$(google.maps.event.addListener(le,"setgeometry",C)),f&&ce(google.maps.event.addListener(le,"setproperty",f)),y(le),A&&A(le)}return function(){b&&(G!==null&&google.maps.event.removeListener(G),k!==null&&google.maps.event.removeListener(k),W!==null&&google.maps.event.removeListener(W),E!==null&&google.maps.event.removeListener(E),F!==null&&google.maps.event.removeListener(F),x!==null&&google.maps.event.removeListener(x),T!==null&&google.maps.event.removeListener(T),z!==null&&google.maps.event.removeListener(z),O!==null&&google.maps.event.removeListener(O),ae!==null&&google.maps.event.removeListener(ae),ue!==null&&google.maps.event.removeListener(ue),_!==null&&google.maps.event.removeListener(_),Q!==null&&google.maps.event.removeListener(Q),v&&v(b),b.setMap(null))}},[]),null}m.memo(V7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={data:null},n.setDataCallback=function(){n.state.data!==null&&n.props.onLoad&&n.props.onLoad(n.state.data)},n}return t.prototype.componentDidMount=function(){if(this.context!==null){var n=new google.maps.Data(be(be({},this.props.options||{}),{map:this.context}));this.registeredEvents=Re({updaterMap:jv,eventMap:Tv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{data:n}},this.setDataCallback)}},t.prototype.componentDidUpdate=function(n){this.state.data!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:jv,eventMap:Tv,prevProps:n,nextProps:this.props,instance:this.state.data}))},t.prototype.componentWillUnmount=function(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),We(this.registeredEvents),this.state.data&&this.state.data.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);var zv={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},Dv={options:function(e,t){e.setOptions(t)},url:function(e,t){e.setUrl(t)},zIndex:function(e,t){e.setZIndex(t)}};(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={kmlLayer:null},n.setKmlLayerCallback=function(){n.state.kmlLayer!==null&&n.props.onLoad&&n.props.onLoad(n.state.kmlLayer)},n}return t.prototype.componentDidMount=function(){var n=new google.maps.KmlLayer(be(be({},this.props.options),{map:this.context}));this.registeredEvents=Re({updaterMap:Dv,eventMap:zv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{kmlLayer:n}},this.setKmlLayerCallback)},t.prototype.componentDidUpdate=function(n){this.state.kmlLayer!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:Dv,eventMap:zv,prevProps:n,nextProps:this.props,instance:this.state.kmlLayer}))},t.prototype.componentWillUnmount=function(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),We(this.registeredEvents),this.state.kmlLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);function zW(e,t){return typeof t=="function"?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function R7(e,t){return new t(e.lat,e.lng)}function W7(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function w7(e,t,n){return e instanceof t?e:n(e,t)}function k7(e,t,n){return e instanceof t?e:n(e,t)}function x7(e,t,n){var o=e&&e.fromLatLngToDivPixel(n.getNorthEast()),r=e&&e.fromLatLngToDivPixel(n.getSouthWest());return o&&r?{left:"".concat(r.x+t.x,"px"),top:"".concat(o.y+t.y,"px"),width:"".concat(o.x-r.x-t.x,"px"),height:"".concat(r.y-o.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}function X7(e,t,n){var o=e&&e.fromLatLngToDivPixel(n);if(o){var r=o.x,i=o.y;return{left:"".concat(r+t.x,"px"),top:"".concat(i+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}function DW(e,t,n,o){return n!==void 0?x7(e,t,k7(n,google.maps.LatLngBounds,W7)):X7(e,t,w7(o,google.maps.LatLng,R7))}function J7(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.height&&e.height===t.height}function N7(e,t,n,o,r){var i=function(l){Ue(s,l);function s(a,c,u,d){var I=l.call(this)||this;return I.container=a,I.pane=c,I.position=u,I.bounds=d,I}return s.prototype.onAdd=function(){var a,c=(a=this.getPanes())===null||a===void 0?void 0:a[this.pane];c==null||c.appendChild(this.container)},s.prototype.draw=function(){for(var a=this.getProjection(),c=be({},this.container?zW(this.container,r):{x:0,y:0}),u=DW(a,c,this.bounds,this.position),d=0,I=Object.entries(u);d<I.length;d++){var C=I[d],f=C[0],A=C[1];this.container.style[f]=A}},s.prototype.onRemove=function(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)},s}(google.maps.OverlayView);return new i(e,t,n,o)}function Uv(e){if(!e)return"";var t=e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng);return t+""}function Pv(e){if(!e)return"";var t=e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west));return t+""}function Y7(e){var t=e.position,n=e.bounds,o=e.mapPaneName,r=e.zIndex,i=e.onLoad,l=e.onUnmount,s=e.getPixelPositionOffset,a=e.children,c=m.useContext(Ve),u=m.useMemo(function(){var I=document.createElement("div");return I.style.position="absolute",I},[]),d=m.useMemo(function(){return N7(u,o,t,n,s)},[u,o,t,n]);return m.useEffect(function(){return i==null||i(d),d==null||d.setMap(c),function(){l==null||l(d),d==null||d.setMap(null)}},[c,d]),m.useEffect(function(){u.style.zIndex="".concat(r)},[r,u]),Kt.createPortal(a,u)}m.memo(Y7);(function(e){Ue(t,e);function t(n){var o=e.call(this,n)||this;o.state={paneEl:null,containerStyle:{position:"absolute"}},o.updatePane=function(){var i=o.props.mapPaneName,l=o.overlayView.getPanes();bt(!!i,"OverlayView requires props.mapPaneName but got %s",i),l?o.setState({paneEl:l[i]}):o.setState({paneEl:null})},o.onAdd=function(){var i,l;o.updatePane(),(l=(i=o.props).onLoad)===null||l===void 0||l.call(i,o.overlayView)},o.onPositionElement=function(){var i=o.overlayView.getProjection(),l=be({x:0,y:0},o.containerRef.current?zW(o.containerRef.current,o.props.getPixelPositionOffset):{}),s=DW(i,l,o.props.bounds,o.props.position),a=o.state.containerStyle,c=a.left,u=a.top,d=a.width,I=a.height;J7(s,{left:c,top:u,width:d,height:I})||o.setState({containerStyle:{top:s.top||0,left:s.left||0,width:s.width||0,height:s.height||0,position:"absolute"}})},o.draw=function(){o.onPositionElement()},o.onRemove=function(){var i,l;o.setState(function(){return{paneEl:null}}),(l=(i=o.props).onUnmount)===null||l===void 0||l.call(i,o.overlayView)},o.containerRef=m.createRef();var r=new google.maps.OverlayView;return r.onAdd=o.onAdd,r.draw=o.draw,r.onRemove=o.onRemove,o.overlayView=r,o}return t.prototype.componentDidMount=function(){this.overlayView.setMap(this.context)},t.prototype.componentDidUpdate=function(n){var o=Uv(n.position),r=Uv(this.props.position),i=Pv(n.bounds),l=Pv(this.props.bounds);(o!==r||i!==l)&&this.overlayView.draw(),n.mapPaneName!==this.props.mapPaneName&&this.updatePane()},t.prototype.componentWillUnmount=function(){this.overlayView.setMap(null)},t.prototype.render=function(){var n=this.state.paneEl;return n?Kt.createPortal(g.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:m.Children.only(this.props.children)}),n):null},t.FLOAT_PANE="floatPane",t.MAP_PANE="mapPane",t.MARKER_LAYER="markerLayer",t.OVERLAY_LAYER="overlayLayer",t.OVERLAY_MOUSE_TARGET="overlayMouseTarget",t.contextType=Ve,t})(m.PureComponent);function H7(){}var Qv={onDblClick:"dblclick",onClick:"click"},Ov={opacity:function(e,t){e.setOpacity(t)}};function F7(e){var t=e.url,n=e.bounds,o=e.options,r=e.visible,i=m.useContext(Ve),l=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),s=m.useMemo(function(){var a=new google.maps.GroundOverlay(t,l,be({},o));return a},[]);return m.useEffect(function(){s!==null&&s.setMap(i)},[i]),m.useEffect(function(){typeof t<"u"&&s!==null&&(s.set("url",t),s.setMap(i))},[s,t]),m.useEffect(function(){typeof r<"u"&&s!==null&&s.setOpacity(r?1:0)},[s,r]),m.useEffect(function(){var a=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));typeof n<"u"&&s!==null&&(s.set("bounds",a),s.setMap(i))},[s,n]),null}m.memo(F7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={groundOverlay:null},n.setGroundOverlayCallback=function(){n.state.groundOverlay!==null&&n.props.onLoad&&n.props.onLoad(n.state.groundOverlay)},n}return t.prototype.componentDidMount=function(){bt(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var n=new google.maps.GroundOverlay(this.props.url,this.props.bounds,be(be({},this.props.options),{map:this.context}));this.registeredEvents=Re({updaterMap:Ov,eventMap:Qv,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{groundOverlay:n}},this.setGroundOverlayCallback)},t.prototype.componentDidUpdate=function(n){this.state.groundOverlay!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:Ov,eventMap:Qv,prevProps:n,nextProps:this.props,instance:this.state.groundOverlay}))},t.prototype.componentWillUnmount=function(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))},t.prototype.render=function(){return null},t.defaultProps={onLoad:H7},t.contextType=Ve,t})(m.PureComponent);var _v={},qv={data:function(e,t){e.setData(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)}};function E7(e){var t=e.data,n=e.onLoad,o=e.onUnmount,r=e.options,i=m.useContext(Ve),l=m.useState(null),s=l[0],a=l[1];return m.useEffect(function(){google.maps.visualization||bt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),m.useEffect(function(){bt(!!t,"data property is required in HeatmapLayer %s",t)},[t]),m.useEffect(function(){s!==null&&s.setMap(i)},[i]),m.useEffect(function(){r&&s!==null&&s.setOptions(r)},[s,r]),m.useEffect(function(){var c=new google.maps.visualization.HeatmapLayer(be(be({},r||{}),{data:t,map:i}));return a(c),n&&n(c),function(){s!==null&&(o&&o(s),s.setMap(null))}},[]),null}m.memo(E7);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={heatmapLayer:null},n.setHeatmapLayerCallback=function(){n.state.heatmapLayer!==null&&n.props.onLoad&&n.props.onLoad(n.state.heatmapLayer)},n}return t.prototype.componentDidMount=function(){bt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),bt(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var n=new google.maps.visualization.HeatmapLayer(be(be({},this.props.options||{}),{data:this.props.data,map:this.context}));this.registeredEvents=Re({updaterMap:qv,eventMap:_v,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{heatmapLayer:n}},this.setHeatmapLayerCallback)},t.prototype.componentDidUpdate=function(n){We(this.registeredEvents),this.registeredEvents=Re({updaterMap:qv,eventMap:_v,prevProps:n,nextProps:this.props,instance:this.state.heatmapLayer})},t.prototype.componentWillUnmount=function(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),We(this.registeredEvents),this.state.heatmapLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);var $v={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},eZ={register:function(e,t,n){e.registerPanoProvider(t,n)},links:function(e,t){e.setLinks(t)},motionTracking:function(e,t){e.setMotionTracking(t)},options:function(e,t){e.setOptions(t)},pano:function(e,t){e.setPano(t)},position:function(e,t){e.setPosition(t)},pov:function(e,t){e.setPov(t)},visible:function(e,t){e.setVisible(t)},zoom:function(e,t){e.setZoom(t)}};(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={streetViewPanorama:null},n.setStreetViewPanoramaCallback=function(){n.state.streetViewPanorama!==null&&n.props.onLoad&&n.props.onLoad(n.state.streetViewPanorama)},n}return t.prototype.componentDidMount=function(){var n,o,r=(o=(n=this.context)===null||n===void 0?void 0:n.getStreetView())!==null&&o!==void 0?o:null;this.registeredEvents=Re({updaterMap:eZ,eventMap:$v,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{streetViewPanorama:r}},this.setStreetViewPanoramaCallback)},t.prototype.componentDidUpdate=function(n){this.state.streetViewPanorama!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:eZ,eventMap:$v,prevProps:n,nextProps:this.props,instance:this.state.streetViewPanorama}))},t.prototype.componentWillUnmount=function(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),We(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={streetViewService:null},n.setStreetViewServiceCallback=function(){n.state.streetViewService!==null&&n.props.onLoad&&n.props.onLoad(n.state.streetViewService)},n}return t.prototype.componentDidMount=function(){var n=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:n}},this.setStreetViewServiceCallback)},t.prototype.componentWillUnmount=function(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)},t.prototype.render=function(){return null},t.contextType=Ve,t})(m.PureComponent);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={directionsService:null},n.setDirectionsServiceCallback=function(){n.state.directionsService!==null&&n.props.onLoad&&n.props.onLoad(n.state.directionsService)},n}return t.prototype.componentDidMount=function(){bt(!!this.props.options,"DirectionsService expected options object as parameter, but got %s",this.props.options);var n=new google.maps.DirectionsService;this.setState(function(){return{directionsService:n}},this.setDirectionsServiceCallback)},t.prototype.componentDidUpdate=function(){this.state.directionsService!==null&&this.state.directionsService.route(this.props.options,this.props.callback)},t.prototype.componentWillUnmount=function(){this.state.directionsService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.directionsService)},t.prototype.render=function(){return null},t})(m.PureComponent);var tZ={onDirectionsChanged:"directions_changed"},nZ={directions:function(e,t){e.setDirections(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},panel:function(e,t){e.setPanel(t)},routeIndex:function(e,t){e.setRouteIndex(t)}};(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.state={directionsRenderer:null},n.setDirectionsRendererCallback=function(){n.state.directionsRenderer!==null&&(n.state.directionsRenderer.setMap(n.context),n.props.onLoad&&n.props.onLoad(n.state.directionsRenderer))},n}return t.prototype.componentDidMount=function(){var n=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Re({updaterMap:nZ,eventMap:tZ,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{directionsRenderer:n}},this.setDirectionsRendererCallback)},t.prototype.componentDidUpdate=function(n){this.state.directionsRenderer!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:nZ,eventMap:tZ,prevProps:n,nextProps:this.props,instance:this.state.directionsRenderer}))},t.prototype.componentWillUnmount=function(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),We(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))},t.prototype.render=function(){return g.jsx(g.Fragment,{})},t.contextType=Ve,t})(m.PureComponent);(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={distanceMatrixService:null},n.setDistanceMatrixServiceCallback=function(){n.state.distanceMatrixService!==null&&n.props.onLoad&&n.props.onLoad(n.state.distanceMatrixService)},n}return t.prototype.componentDidMount=function(){bt(!!this.props.options,"DistanceMatrixService expected options object as parameter, but go %s",this.props.options);var n=new google.maps.DistanceMatrixService;this.setState(function(){return{distanceMatrixService:n}},this.setDistanceMatrixServiceCallback)},t.prototype.componentDidUpdate=function(){this.state.distanceMatrixService!==null&&this.state.distanceMatrixService.getDistanceMatrix(this.props.options,this.props.callback)},t.prototype.componentWillUnmount=function(){this.state.distanceMatrixService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.distanceMatrixService)},t.prototype.render=function(){return null},t})(m.PureComponent);var oZ={onPlacesChanged:"places_changed"},rZ={bounds:function(e,t){e.setBounds(t)}};(function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=m.createRef(),n.state={searchBox:null},n.setSearchBoxCallback=function(){n.state.searchBox!==null&&n.props.onLoad&&n.props.onLoad(n.state.searchBox)},n}return t.prototype.componentDidMount=function(){if(bt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var n=this.containerElement.current.querySelector("input");if(n!==null){var o=new google.maps.places.SearchBox(n,this.props.options);this.registeredEvents=Re({updaterMap:rZ,eventMap:oZ,prevProps:{},nextProps:this.props,instance:o}),this.setState(function(){return{searchBox:o}},this.setSearchBoxCallback)}}},t.prototype.componentDidUpdate=function(n){this.state.searchBox!==null&&(We(this.registeredEvents),this.registeredEvents=Re({updaterMap:rZ,eventMap:oZ,prevProps:n,nextProps:this.props,instance:this.state.searchBox}))},t.prototype.componentWillUnmount=function(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),We(this.registeredEvents))},t.prototype.render=function(){return g.jsx("div",{ref:this.containerElement,children:m.Children.only(this.props.children)})},t.contextType=Ve,t})(m.PureComponent);var iZ={onPlaceChanged:"place_changed"},lZ={bounds:function(e,t){e.setBounds(t)},restrictions:function(e,t){e.setComponentRestrictions(t)},fields:function(e,t){e.setFields(t)},options:function(e,t){e.setOptions(t)},types:function(e,t){e.setTypes(t)}},K7=function(e){Ue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=m.createRef(),n.state={autocomplete:null},n.setAutocompleteCallback=function(){n.state.autocomplete!==null&&n.props.onLoad&&n.props.onLoad(n.state.autocomplete)},n}return t.prototype.componentDidMount=function(){var n;bt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var o=(n=this.containerElement.current)===null||n===void 0?void 0:n.querySelector("input");if(o){var r=new google.maps.places.Autocomplete(o,this.props.options);this.registeredEvents=Re({updaterMap:lZ,eventMap:iZ,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{autocomplete:r}},this.setAutocompleteCallback)}},t.prototype.componentDidUpdate=function(n){We(this.registeredEvents),this.registeredEvents=Re({updaterMap:lZ,eventMap:iZ,prevProps:n,nextProps:this.props,instance:this.state.autocomplete})},t.prototype.componentWillUnmount=function(){this.state.autocomplete!==null&&We(this.registeredEvents)},t.prototype.render=function(){return g.jsx("div",{ref:this.containerElement,className:this.props.className,children:m.Children.only(this.props.children)})},t.defaultProps={className:""},t.contextType=Ve,t}(m.PureComponent);const L7=["places"],M7={width:"100%",height:"250px"},UW=({onChange:e,lat:t,lng:n})=>{const{isLoaded:o,loadError:r}=gp({googleMapsApiKey:"AIzaSyDW3kUrRQiLfjrg81wlKLk8tMomO0DBnxg",libraries:L7}),[i,l]=m.useState({lat:t,lng:n}),[s,a]=m.useState(null),[c,u]=m.useState(""),d=m.useRef(null),[I,C]=m.useState(null);m.useEffect(()=>{window.google&&(C(new window.google.maps.Geocoder),p(i))},[o]);const f=m.useCallback(b=>{d.current=b},[]),A=b=>{const y=b.latLng.lat(),Z=b.latLng.lng();l({lat:y,lng:Z}),e(y,Z),p({lat:y,lng:Z})},v=b=>{a(b)},h=()=>{if(s!==null){const b=s.getPlace();if(b.geometry){const y=b.geometry.location.lat(),Z=b.geometry.location.lng();l({lat:y,lng:Z}),e(y,Z),u(b.formatted_address),d.current.panTo({lat:y,lng:Z})}else console.log("El lugar seleccionado no tiene geometra")}else console.log("Autocomplete no est cargado todava!")},p=b=>{I&&I.geocode({location:b},(y,Z)=>{Z==="OK"&&y[0]?u(y[0].formatted_address):console.error("Geocodificacin no fue exitosa por la siguiente razn: "+Z)})};return r?g.jsx("div",{children:"Error cargando mapas"}):o?g.jsxs("div",{className:"block w-full",children:[g.jsx(K7,{onLoad:v,onPlaceChanged:h,children:g.jsxs(g.Fragment,{children:[g.jsx("h1",{className:"block text-sm font-medium leading-6 text-white",children:"Direccin"}),g.jsx("input",{type:"text",className:"px-1.5 mt-2 mb-4 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6",placeholder:"Ingresa una localizacin",value:c,onChange:b=>u(b.target.value)})]})}),g.jsx("div",{style:{position:"relative"},className:"z-10",children:g.jsx(JW,{mapContainerStyle:M7,center:i,zoom:18,onLoad:f,children:g.jsx(EW,{position:i,draggable:!0,onDragEnd:A})})})]}):g.jsx("div",{children:"Cargando mapas..."})},T7=({avatar:e,inputRef:t,handleOnChange:n,formState:o,onInputChange:r,onCheckBoxChangeWA:i,setShowCustomButtonHour:l,initStateSchedule:s,schedule:a,categories:c,onCheckBoxChange:u,handleUpdateDB:d,activeRed:I,handleRemoveSM:C,handleUpdateSM:f,setSocialMedia:A,selectedPDFFile:v,onInputChangeLatLng:h,handlePDFFileChange:p,secondaryPDFFile:b,handleSecondaryPDFFileChange:y,onMultiInputChange:Z})=>{const[G,V]=m.useState(!1),S=["bold","italic","underline","strike","blockquote","list","bullet","indent"],k=m.useMemo(()=>({toolbar:{container:[["bold","italic","underline"],["clean"]]}}),[]),B=w=>(w/(1024*1024)).toFixed(1)+" MB",R=()=>{window.open(o.pdf_file_url.includes("https://")?o.pdf_file_url:`https://${o.pdf_file_url}`,"_blank","noreferrer")},W=()=>{window.open(o.pdf_file_url.includes("https://")?o.secondary_pdf_file_url:`https://${o.secondary_pdf_file_url}`,"_blank","noreferrer")};return g.jsxs(g.Fragment,{children:[G&&g.jsx("div",{className:"bg-red-500 text-white p-3 rounded-lg mb-4",children:g.jsx("p",{children:"El nmero de telfono no puede exceder los 10 dgitos."})}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:t,onChange:n}),g.jsx("div",{className:"",children:g.jsxs("div",{className:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Informacin personal"}),g.jsx("p",{className:"mt-1 text-sm leading-6 text-gray-400"})]}),g.jsx("form",{className:"md:col-span-2",onSubmit:w=>{w.preventDefault()},children:g.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6",children:[g.jsxs("div",{className:"col-span-full flex items-center gap-x-8",children:[g.jsx("img",{alt:"",src:e,className:"h-24 w-24 flex-none rounded-lg bg-gray-800 object-cover"}),g.jsxs("div",{children:[g.jsx("button",{type:"button",className:"rounded-md bg-white/10 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20",onClick:()=>{t.current.value="",t.current.click()},children:"Cambiar Avatar"}),g.jsx("p",{className:"mt-2 text-xs leading-5 text-gray-400",children:"JPG, GIF o PNG. 1MB max."})]})]}),g.jsx(Fe,{className:"col-span-full",children:g.jsxs("div",{className:"social-media-icon-container",children:[I.length===0?g.jsx(g.Fragment,{}):g.jsx(g.Fragment,{children:I==null?void 0:I.map(w=>{const X=JA(w.url)[w.name];return g.jsxs("div",{className:"social-media-icon",children:[X,g.jsx(D9,{className:"social-media-delete",color:"#970220",onClick:async()=>{await C(w.name)}}),g.jsx(T9,{className:"social-media-edit",color:"#4a88da",onClick:async()=>{await f(w.name)}})]},w.name)})}),g.jsx("div",{className:"social-media-icon add-social-media",onClick:()=>{A(!0)},children:g.jsx(x9,{})})]})}),g.jsxs("div",{className:"sm:col-span-3",children:[g.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-white",children:"Nombre"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{id:"first-name",value:o.nombre,name:"nombre",onChange:r,type:"text",autoComplete:"given-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"sm:col-span-3",children:[g.jsx("label",{htmlFor:"last-name",className:"block text-sm font-medium leading-6 text-white",children:"Apellido"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{id:"last-name",value:o.apellido,name:"apellido",onChange:r,type:"text",autoComplete:"family-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"col-span-full",children:[g.jsx("label",{htmlFor:"cargo",className:"block text-sm font-medium leading-6 text-white",children:"Cargo o Puesto"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{id:"cargo",value:o.ocupacion,name:"ocupacion",onChange:r,type:"text",autoComplete:"cargo",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"col-span-full",children:[g.jsx("label",{htmlFor:"origin",className:"block text-sm font-medium leading-6 text-white",children:"Empresa de origen"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{id:"origin",value:o.business,name:"business",onChange:r,type:"text",autoComplete:"origin",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"col-span-full",children:[g.jsx("label",{htmlFor:"description",className:"block text-sm font-medium leading-6 text-white",children:"Descripcin"}),g.jsx("br",{}),g.jsx("div",{className:"lg:pr-12",children:g.jsx(cD,{className:"lg:w-full h-auto mx-4 text-gray-900 bg-white text-2xl",theme:"snow",value:o.descripcion,formats:S,modules:k,onChange:w=>r({target:{name:"descripcion",value:w}})})})]}),g.jsxs("div",{className:"col-span-full",children:[g.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-white",children:"Telfono"}),g.jsx("div",{className:"mt-2",children:g.jsx(Dy,{name:"telefono",initialLada:o.lada,value:o.telefono,onChange:r})})]}),g.jsx("div",{className:"mx-4 md:mx-10 col-span-full",children:g.jsxs("div",{className:"relative flex gap-x-3",children:[g.jsx("div",{className:"flex h-6 items-center",children:g.jsx("input",{name:"whatsapp_option",type:"checkbox",checked:`${o.lada}-${o.telefono}`===o.whatsapp_option,onChange:i,className:"h-5 w-5 rounded border-gray-300 text-orange-600 focus:ring-orange-600"})}),g.jsxs("div",{className:"text-sm leading-6",children:[g.jsx("label",{htmlFor:"comments",className:"font-medium text-white",children:"Mismo nmero para WhatsApp"}),g.jsx("p",{className:"text-white",children:'Activa esta opcin para incluir un enlace directo a tu perfil de WhatsApp. Al activar la casilla, cualquier persona que visite tu perfil podr contactarte fcilmente a travs de WhatsApp con solo hacer clic en el nmero de telfono proporcionado."'})]})]})}),g.jsxs("div",{className:"col-span-full",children:[g.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-white",children:"Telfono Secundario"}),g.jsx("div",{className:"mt-2",children:g.jsx(Dy,{name:"secondary_phone",initialLada:o.lada_2,value:o.secondary_phone,onChange:w=>r(w,!0)})})]}),g.jsxs("div",{className:"col-span-full",children:[g.jsx("label",{htmlFor:"web",className:"block text-sm font-medium leading-6 text-white",children:"Correo electrnico"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{id:"web",value:o.email,name:"email",onChange:r,type:"text",autoComplete:"email",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"col-span-full",children:[g.jsx("label",{htmlFor:"web",className:"block text-sm font-medium leading-6 text-white",children:"Pgina web"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{id:"web",value:o.web_page_url,name:"web_page_url",onChange:r,type:"text",autoComplete:"web",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsx("div",{className:"col-span-full",children:g.jsx("div",{className:"mt-2",children:g.jsx(mt,{variant:"outline-primary",className:"px-1.5 block w-full rounded-md border-0 hover:bg-blue-900 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6",onClick:()=>{l(!0)},children:s===a?"Establecer Horarios":"Modificar Horarios"})})}),g.jsx(B8,{}),g.jsx(S8,{}),g.jsx("div",{className:"col-span-full",children:g.jsx(UW,{onChange:h,lat:o.lat||-3.745,lng:o.lng||-38.523})}),g.jsxs(Fe,{className:"perfil-multi-field col-span-full",children:[g.jsx(Ce,{children:g.jsxs("div",{className:"perfil-field-data mx-0",children:[g.jsx("label",{htmlFor:"work",className:"block text-sm font-medium leading-6 text-white",children:"rea de trabajo"}),g.jsxs(PN.Select,{"aria-label":"Categorias",onChange:r,name:"id_categorie",value:o.id_categorie,className:"perfil-categoria",children:[g.jsx("option",{value:-1,children:"Seleccione un rea de trabajo"}),c.map(w=>g.jsx("option",{value:w.id_categorie,children:w.name},w.name))]})]})}),g.jsx(Ce,{xs:6,children:localStorage.getItem("id_plan")!=6&&g.jsxs("div",{className:"perfil-checkbox mx-0",children:[g.jsx("label",{htmlFor:"show",className:"block text-sm font-medium leading-6 text-white",children:"Mostrar perfil al pblico"}),g.jsx("input",{type:"checkbox",onChange:u,checked:o.show_profile,name:"show_profile"})]})})]}),localStorage.getItem("id_plan")>=9&&g.jsxs("div",{className:"py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0 col-span-full",children:[g.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-400 ",children:"Brochure(s)"}),g.jsx("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:g.jsxs("ul",{role:"list",className:"divide-y divide-gray-100 rounded-md border border-gray-200",children:[g.jsxs("li",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[g.jsxs("div",{className:"flex w-0 flex-1 items-center",children:[g.jsx(fy,{"aria-hidden":"true",className:"h-5 w-5 flex-shrink-0 text-gray-400"}),g.jsxs("div",{className:"ml-4 flex min-w-0 flex-1 gap-2",children:[g.jsx("span",{className:"truncate font-medium",children:v?v.name:o.pdf_file_url?"Brochure 01 listo":"Sube tu archivo"}),g.jsxs("span",{className:"flex-shrink-0 text-white",children:[v?B(v.size):""," "]})]})]}),g.jsxs("div",{className:"ml-4 flex",children:[g.jsx("button",{className:"font-medium text-orange-600 hover:text-orange-500 mr-4",onClick:()=>{document.getElementById("pdf_file").click()},children:v||o.pdf_file_url?"Cambiar":"Subir"}),o.pdf_file_url&&g.jsx(Mb,{size:24,onClick:R,className:"cursor-pointer"})]}),g.jsx("input",{type:"file",id:"pdf_file",accept:".pdf",className:"hidden",onChange:p})]}),g.jsxs("li",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[g.jsxs("div",{className:"flex w-0 flex-1 items-center",children:[g.jsx(fy,{"aria-hidden":"true",className:"h-5 w-5 flex-shrink-0 text-gray-400"}),g.jsxs("div",{className:"ml-4 flex min-w-0 flex-1 gap-2",children:[g.jsx("span",{className:"truncate font-medium",children:b?b.name:o.secondary_pdf_file_url?"Brochure 02 listo":"Sube tu archivo"}),g.jsxs("span",{className:"flex-shrink-0 text-white",children:[b?B(b.size):""," "]})]})]}),g.jsxs("div",{className:"ml-4 flex",children:[g.jsx("button",{className:"font-medium text-orange-600 hover:text-orange-500 mr-4",onClick:()=>{document.getElementById("pdf_file_2nd").click()},children:b||o.secondary_pdf_file_url?"Cambiar":"Subir"}),o.secondary_pdf_file_url&&g.jsx(Mb,{size:24,onClick:W,className:"cursor-pointer"})]}),g.jsx("input",{type:"file",id:"pdf_file_2nd",accept:".pdf",className:"hidden",onChange:y})]})]})})]}),g.jsx("div",{className:"mt-8 flex",children:g.jsx("button",{onClick:d,type:"submit",className:"whitespace-nowrap rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500",children:"Guardar cambios"})})]})})]})})]})},j7={nombre:"",apellido:"",descripcion:"",lada:"",telefono:"",whatsapp_option:"",secondary_phone:"",email:localStorage.getItem("email"),web_page_url:"",ocupacion:"",direccion:"",avatar:"",id_categorie:10,id_social_media:"",show_profile:!1,pdf_file_url:"",custom_img_url:"",business:"",secondary_pdf_file_url:"",lada_2:"+52"},z7=()=>{const e=cn(),{user:t}=m.useContext(kt),n=ut(),[o,r]=m.useState(null),{formState:i,onInputChange:l,updateForm:s,onCheckBoxChange:a,onMultiInputChange:c,onInputChangeLatLng:u}=Lr(j7),[d,I]=m.useState(),[C,f]=m.useState([]),[A,v]=m.useState(ay),[h,p]=m.useState([]),[b,y]=m.useState(!1),[Z,G]=m.useState(!1),[V,S]=m.useState(!1),[k,B]=m.useState(!1),[R,W]=m.useState(!1),[w,X]=m.useState(!1),[E,M]=m.useState(!1),[L,F]=m.useState(!1),[Y,N]=m.useState(""),[x,H]=m.useState("#FD6202"),[K,T]=m.useState(!1),[j,J]=m.useState(null),[z,U]=m.useState(null),[D,O]=m.useState({url:"www.ejemplo.com",text:"Ej. CONCENOS",color:"#FD6202"}),[ee,re]=m.useState(""),[ae,ge]=m.useState(!1),[ne,ue]=m.useState(null),me=ie=>{const{name:pe,checked:Ze}=ie.target,Be=Ze?`${i.lada}-${i.telefono}`:"0";s({...i,[pe]:Be})},q=async()=>{if(i.nombre==""||i.apellido==""||i.descripcion==""||i.telefono==""||i.email==""||i.ocupacion==""||i.lat==""||i.lng==""){T(!0),xe.error("Termine de completar los campos");return}const ie=xe.loading("Guardando perfil");try{const pe=i.avatar;if(pe!=null){const we=new FormData;we.append("recfile",pe),we.append("username",t.username),we.append("dataURI",i.avatar);const ft=await e.uploadFromDataUri(we);i.avatar=ft.data.dataLocationResponse}const Ze=document.getElementById("pdf_file"),Be=Ze?Ze.files[0]:void 0;if(Be!=null){const we=new FormData;we.append("recfile",Be),we.append("username",localStorage.getItem("token"));const ft=await e.updateProfilePhoto(we);i.pdf_file_url=ft.data.dataLocationResponse}const ht=document.getElementById("pdf_file_2nd"),io=ht?ht.files[0]:void 0;if(io!=null){const we=new FormData;we.append("recfile",io),we.append("username",localStorage.getItem("token"));const ft=await e.updateProfilePhoto(we);i.secondary_pdf_file_url=ft.data.dataLocationResponse}const un=document.getElementById("photo_cover"),Go=un?un.files[0]:void 0;if(Go!=null){const we=new FormData;we.append("recfile",Go),we.append("username",localStorage.getItem("token"));const ft=await e.updateProfilePhoto(we);i.custom_img_url=ft.data.dataLocationResponse}const xn={profile_img_url:i.avatar,background_color:x,custom_btn_color:D.color,custom_btn_text:D.text,custom_btn_url:D.url,title_profile:`${i.nombre} ${i.apellido}`,description_profile:i.descripcion,personal_phone:`${i.lada}-${i.telefono}`,whatsapp_option:`${i.whatsapp_option==""||i.whatsapp_option==null?"":i.whatsapp_option}`,secondary_phone:`${i.secondary_phone==""||i.secondary_phone==null?"":`${i.lada_2}-${i.secondary_phone}`}`,email:i.email,web_page_url:i.web_page_url,ocupation_role:i.ocupacion,location:i.direccion,id_categorie:i.id_categorie,id_social_media:i.id_social_media,show_profile:i.show_profile,pdf_file_url:i.pdf_file_url,custom_img_url:i.custom_img_url,id_profile:t.id,organization_name:i.business,lat:i.lat,lng:i.lng,secondary_pdf_file_url:i.secondary_pdf_file_url};if(o){t.first_login=!1;const we=await e.createSocialMedia({...C});xn.id_social_media=we.data.id;const ft=await e.createProfile(xn);Fs.forEach(async ve=>{const Xe={day:ve,start_time:A[ve+"St"],end_time:A[ve+"End"],status_schedule_day:A[ve]};await e.postScheduleDay(Xe)})}else{const we=await e.updateSocialMedia({...C}),ft=await e.updateProfile(xn);Fs.forEach(async ve=>{const Xe={day:ve,start_time:A[ve+"St"],end_time:A[ve+"End"],status_schedule_day:A[ve]};await e.updateScheduleDay(Xe)})}xe.success("Perfil guardado exitosamente",{id:ie}),t.avatar_url=i.avatar,n("/home")}catch(pe){console.log(pe),xe.error("Error al guardar perfil",{id:ie})}};m.useEffect(()=>{_()},[]);const _=async()=>{try{const{data:ie}=await e.getProfile();I(ie);const{data:pe}=await e.getCategories();if(p(pe.categories),ie.msg.includes("No existe el perfil")){r(!0);const Ze=localStorage.getItem("fullname"),Be=Ze.indexOf(" "),ht={nombre:Be>0?Ze.slice(0,Be):Ze,apellido:Be>0?Ze.slice(Be):"",email:localStorage.getItem("email"),avatar:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAJQApQMBIgACEQEDEQH/xAAbAAEBAAMBAQEAAAAAAAAAAAAABQEDBAIGB//EAC0QAAICAQIFAgUEAwAAAAAAAAABAgMRBDEFEiFBUVJxEyJhgZEyM0KxYqHB/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AP0QAAAAAAAAAAANtzMYynJKCbfhAYwDqjw/UPq4xXvI1WaW6rrOt48rqBqAAAAAAAAD2AewBAIAAAAAAAAADq0uilfiUm4w8+TRTD4l0IeqWPsXopJJRWEl0XgDVXpqK1iNccfVZZ6rqrq/bgo53wj2AA9gAObUaKu5NpckvK7ku+mdE+WxezWzLpp1lStolHHVLMX4AiAAAAAAewD2AIBAAAAAAAAADq4cs6qP0TZYZF0E1DVQz3+X8lkAAAAAADcBtJNt9F1YHz8licl4Zgy3zScvLMAAAAD2AewBAIAAAAAAAAAbtLTK61KD5cdc+C2s46vLJfCpJXzj5j0KgAAAAAANOs53prFXFyk1jobht18AfPY6gzJ5nJrbLMAAAAD2AewBAIAAAAAAAAAe6Zuq2Fi/i8/Yt1212ZdclJLfHYhHXwyzkvcHtNf7AqgAAAABz661VaebT+ZrlX3OhvCf5IV8/i3Tn5fT2A1oAAAAAD2AewBAIAAAAAAAAADKk4SUo9GnlGAouTSW77AX65c9cZ7ZWcHoxFcsYrwkjIAAAcfE7pV1KEf57slFPisG6oSWylhkwAAAAAAB7APYAgEAAAAAZMxTk0opt+EgMA7KuH2yadjUI/Xc7K9BRD9UXN/5MCVVVO54ri5f0UtLoY1NTsfNPt4R2JKKxFJJdkAAAAAADE4RnFxmsp9iZqOHyh81Lcl6e6KgA+ew4vEk0/DBesqrt/cgn7nLbw2tpuuUovw+qAlg33aW6nrKOY+qPU0AA9gHsAQCAAZ/ANulq+NqIQf6d37AdOj0PxErL01F7R8lGuuFSxXFRX0PWMdAAAAAAAAAAAAAAAAAANF2kpteXHEvVHobwBE1NEqLOWWGns0aexb1tXxtPKPePzIidgCAQAFDhUMuyfjoT3sWOHQ5NMn6m2B0gAAAAAAAAAAAAAAAAAAAABBvj8O6cPDLxJ4pDl1PN6kn/wAA5EAgAZeoSjTBLZRX9AAewAAAAAAAAAAAAAAAAAAAAAn8XS5a5d+qAAnIAAf/2Q==",lat:parseFloat(ie.lat),lng:parseFloat(ie.lng)};s(ht)}else{const{data:Ze}=await e.getSocialMedia(),{data:Be}=await e.getSchedule(),{social_media:ht}=Ze,{scheduleDays:io}=Be,un=ie.title_profile.indexOf(" ")==-1?ie.title_profile.length:ie.title_profile.indexOf(" "),Go={nombre:ie.title_profile.slice(0,un),apellido:ie.title_profile.slice(un,ie.title_profile.length),descripcion:ie.description_profile,telefono:ie.personal_phone==null||ie.personal_phone==""?"":ie.personal_phone.split("-")[1],lada:ie.personal_phone==null||ie.personal_phone==""?"+52":ie.personal_phone.split("-")[0],whatsapp_option:ie.whatsapp_option,lada_2:ie.secondary_phone==null||ie.secondary_phone==""?"+52":ie.secondary_phone.split("-")[0],secondary_phone:ie.secondary_phone==null||ie.secondary_phone==""?"":ie.secondary_phone.split("-")[1],email:ie.email,web_page_url:ie.web_page_url,ocupacion:ie.ocupation_role,direccion:ie.location,avatar:ie.profile_img_url,id_categorie:ie.id_categorie,id_social_media:ht.id_social_media,show_profile:ie.show_profile,pdf_file_url:ie.pdf_file_url,custom_img_url:ie.custom_img_url,business:ie.organization_name!=null?ie.organization_name:ie.organization!=null?ie.organization.business_name:"",secondary_pdf_file_url:ie.secondary_pdf_file_url,lat:parseFloat(ie.lat),lng:parseFloat(ie.lng)},xn={media:ht},we={};io.forEach(ft=>{we[ft.day]=ft.status_schedule_day,we[ft.day+"St"]=ft.start_time,we[ft.day+"End"]=ft.end_time}),s(Go),H(ie.background_color),O({color:ie.custom_btn_color,text:ie.custom_btn_text,url:ie.custom_btn_url}),f(xn.media),v(we),ue(ie.custom_img_url),r(!1)}}catch(ie){console.log(ie)}},$=ie=>{const pe=ie.target.files[0];J(pe)},oe=ie=>{const pe=ie.target.files[0];U(pe)},Q=ie=>{const pe=ie.target.files[0];ue(URL.createObjectURL(pe))},ce=async ie=>{const pe=xe.loading("Eliminando red social");(await e.deleteSocialMedia(ie,t.id)).status==200?(f([...C.filter(Be=>Be.name!=ie)]),xe.success(`Red social para ${ie} eliminado exitosamente`,{id:pe})):xe.error("Error al eliminar red social")},le=async ie=>{F(!0),N(ie)},fe=ie=>{const pe=new FileReader;pe.readAsDataURL(ie.target.files[0]),pe.onload=function(Ze){re(pe.result)},ge(!0)},Ae=m.useRef();return o==null?g.jsx(Tr,{}):g.jsxs(ua.Provider,{value:{color:"#FFFFFF"},children:[g.jsx(Rn,{position:"top-right",richColors:!0}),(b||V||R||k||Z||w||E||L||ae)&&g.jsx("div",{className:"profile-modal-background",onClick:()=>{S(!1),W(!1),B(!1),X(!1),M(!1),y(!1),F(!1),ge(!1)},children:g.jsx("div",{})}),g.jsxs("div",{className:"perfil-container mx-4",children:[Z&&g.jsx(TE,{setShowColorPallete:G,setCustomBannerColor:H,customBannerColor:x}),R&&g.jsx(ME,{}),V&&g.jsx(KE,{customButtonParams:D,setCustomButtonParams:O,setShowCustomButton:S}),E&&g.jsx(jE,{placeText:"url de foto...",handleClick:ie=>{l({target:{name:"avatar",value:ie.url}}),M(!1)}}),k&&g.jsx(LE,{setShowCustomButtonHour:B,setSchedule:v,schedule:A}),L&&g.jsx(PE,{name:Y,setShow:F,show:L}),ae&&g.jsx(wK,{cropDone:ie=>{l({target:{name:"avatar",value:ie}})},image:ee,setImage:re,setShowCrop:ge,inputRef:Ae}),localStorage.getItem("id_plan")!=6&&g.jsxs("div",{className:"col-span-full mt-4 max-w-2xl m-auto",children:[g.jsx("label",{htmlFor:"photo_cover",className:"block text-sm font-medium leading-6 text-white",children:"Imagen de portada para tu perfil"}),g.jsxs("p",{className:"mt-1 text-sm leading-6 text-white",children:["Para una presentacin visualmente atractiva, te sugerimos considerar una imagen con dimensiones de"," ",g.jsx("span",{className:"font-bold",children:"688x224 px"}),"."]}),g.jsxs("div",{className:"my-2 items-center rounded-lg gap-x-3 h-36 overflow-hidden",children:[ne?g.jsx("div",{className:"front-page",style:{backgroundImage:`url("${ne??xl}")`}}):g.jsx("img",{src:xl,alt:"Selected",className:"object-scale-down rounded-lg"}),g.jsx("input",{type:"file",id:"photo_cover",accept:"image/*",className:"hidden",onChange:Q})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{type:"button",className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",onClick:()=>{document.getElementById("photo_cover").click()},children:"Cambiar"})})]}),g.jsx(T7,{avatar:i.avatar,inputRef:Ae,handleOnChange:fe,formState:i,onInputChange:l,onCheckBoxChangeWA:me,setShowCustomButtonHour:B,initStateSchedule:ay,schedule:A,onInputChangeLatLng:u,categories:h,onCheckBoxChange:a,handleUpdateDB:q,activeRed:C,handleRemoveSM:ce,handleUpdateSM:le,setSocialMedia:y,selectedPDFFile:j,handlePDFFileChange:$,secondaryPDFFile:z,handleSecondaryPDFFileChange:oe,onMultiInputChange:c}),b&&g.jsx(UE,{show:b,setShow:y,activeRed:C,setActiveRed:f})]})]})},sZ=()=>g.jsx(z7,{}),Je=({children:e})=>{const t=Mr(),n=ut(),[o,r]=m.useState(!0),[i,l]=m.useState(!1),{user:s}=m.useContext(kt),a=cn();m.useEffect(()=>{c(),u()},[]);const c=()=>{window.location.href.includes("/business")&&localStorage.getItem("id_plan")!=9&&n("/home")},u=async()=>{try{let d=!1;const I=await t.renewToken(),{email:C,fullname:f,id:A,id_plan_fk:v,username:h,token:p,avatar_url:b,first_login:y}=I.data;if(s.email=C,s.fullname=f,s.id=A,s.id_plan_fk=v,s.username=h,s.avatar_url=b,s.first_login=y,I.status==200&&(d=!0,v!=localStorage.getItem("id_plan")&&(localStorage.setItem("id_plan",v),console.log("redirect"),n("/home"))),d&&window.location.href.includes("/vcard/")){const Z=window.location.href.split("/vcard/")[1],{data:G}=await a.validateCard(Z);if(G.ok){const V=`/card?username=${G.username}&id=${G.id_profile}`;n(V)}r(!1)}else r(!1);l(d)}catch(d){console.log(d),r(!1)}};return i&&!o&&s.first_login&&(window.location.href.includes("/home")||window.location.href.includes("/business"))&&n("/perfil"),o?g.jsx(Tr,{fullScreen:!0}):i?e:g.jsx(iA,{to:"/login/"})};const D7=({schedule:e})=>{const[t,n]=m.useState(!1);return g.jsxs("div",{className:"schedule",children:[g.jsxs("div",{className:"schedules_info_title",onClick:()=>{n(!t)},children:["Horario disponible",t?g.jsx(N9,{className:"foldable_icon"}):g.jsx(X9,{className:"foldable_icon"})]}),g.jsx("div",{className:`schedules_foldable ${t?"schedules_foldable_active":""}`,children:Object.values(e).map((o,r)=>g.jsx("div",{children:g.jsxs("div",{className:"schedules_info_schedule",children:[g.jsx("label",{style:{textDecoration:o.status_schedule_day?"":"Line-through"},children:o.day}),g.jsxs("label",{className:"schedules_info_time flex",children:[g.jsx("div",{className:"mt-1 flex items-center gap-x-1.5 mr-2",children:g.jsx("div",{className:"flex-none rounded-full bg-emerald-500/20 p-1",children:g.jsx("div",{className:o.status_schedule_day?"h-1.5 w-1.5 rounded-full bg-emerald-500":"h-1.5 w-1.5 rounded-full bg-red-500"})})}),o.status_schedule_day?`${o.start_time} - ${o.end_time}`:"No disponible"]})]})},r))})]})},U7={},P7=Object.freeze(Object.defineProperty({__proto__:null,default:U7},Symbol.toStringTag,{value:"Module"})),lC=Qk(P7);var sC={exports:{}},aZ;function gZ(){return aZ||(aZ=1,function(){var t="3";function n(s){return s?(typeof s!="string"&&(s=""+s),s.replace(/\n/g,"\\n").replace(/,/g,"\\,").replace(/;/g,"\\;")):""}function o(){return`\r
`}function r(s,a,c,u){var d;t>=4?d=u?";ENCODING=b;MEDIATYPE=image/":";MEDIATYPE=image/":t===3?d=u?";ENCODING=b;TYPE=":";TYPE=":d=u?";ENCODING=BASE64;":";";var I=s+d+c+":"+n(a)+o();return I}function i(s,a){var c="";return(a.details.label||a.details.street||a.details.city||a.details.stateProvince||a.details.postalCode||a.details.countryRegion)&&(t>=4?c="ADR"+s+";TYPE="+a.type+(a.details.label?';LABEL="'+n(a.details.label)+'"':"")+":;;"+n(a.details.street)+";"+n(a.details.city)+";"+n(a.details.stateProvince)+";"+n(a.details.postalCode)+";"+n(a.details.countryRegion)+o():(a.details.label&&(c="LABEL"+s+";TYPE="+a.type+":"+n(a.details.label)+o()),c+="ADR"+s+";TYPE="+a.type+":;;"+n(a.details.street)+";"+n(a.details.city)+";"+n(a.details.stateProvince)+";"+n(a.details.postalCode)+";"+n(a.details.countryRegion)+o())),c}function l(s){return s.getFullYear()+("0"+(s.getMonth()+1)).slice(-2)+("0"+s.getDate()).slice(-2)}sC.exports={getFormattedString:function(s){t=s.getMajorVersion();var a="";a+="BEGIN:VCARD"+o(),a+="VERSION:"+s.version+o();var c=t>=4?"":";CHARSET=UTF-8",u=s.formattedName;if(u||(u="",[s.firstName,s.middleName,s.lastName].forEach(function(I){I&&u&&(u+=" "),u+=I})),a+="FN"+c+":"+n(u)+o(),a+="N"+c+":"+n(s.lastName)+";"+n(s.firstName)+";"+n(s.middleName)+";"+n(s.namePrefix)+";"+n(s.nameSuffix)+o(),s.nickname&&t>=3&&(a+="NICKNAME"+c+":"+n(s.nickname)+o()),s.gender&&(a+="GENDER:"+n(s.gender)+o()),s.uid&&(a+="UID"+c+":"+n(s.uid)+o()),s.birthday&&(a+="BDAY:"+l(s.birthday)+o()),s.anniversary&&(a+="ANNIVERSARY:"+l(s.anniversary)+o()),s.email&&(Array.isArray(s.email)||(s.email=[s.email]),s.email.forEach(function(I){t>=4?a+="EMAIL"+c+";type=HOME:"+n(I)+o():t>=3&&t<4?a+="EMAIL"+c+";type=HOME,INTERNET:"+n(I)+o():a+="EMAIL"+c+";HOME;INTERNET:"+n(I)+o()})),s.workEmail&&(Array.isArray(s.workEmail)||(s.workEmail=[s.workEmail]),s.workEmail.forEach(function(I){t>=4?a+="EMAIL"+c+";type=WORK:"+n(I)+o():t>=3&&t<4?a+="EMAIL"+c+";type=WORK,INTERNET:"+n(I)+o():a+="EMAIL"+c+";WORK;INTERNET:"+n(I)+o()})),s.otherEmail&&(Array.isArray(s.otherEmail)||(s.otherEmail=[s.otherEmail]),s.otherEmail.forEach(function(I){t>=4?a+="EMAIL"+c+";type=OTHER:"+n(I)+o():t>=3&&t<4?a+="EMAIL"+c+";type=OTHER,INTERNET:"+n(I)+o():a+="EMAIL"+c+";OTHER;INTERNET:"+n(I)+o()})),s.logo.url&&(a+=r("LOGO",s.logo.url,s.logo.mediaType,s.logo.base64)),s.photo.url&&(a+=r("PHOTO",s.photo.url,s.photo.mediaType,s.photo.base64)),s.cellPhone&&(Array.isArray(s.cellPhone)||(s.cellPhone=[s.cellPhone]),s.cellPhone.forEach(function(I){t>=4?a+='TEL;VALUE=uri;TYPE="voice,cell":tel:'+n(I)+o():a+="TEL;TYPE=CELL:"+n(I)+o()})),s.pagerPhone&&(Array.isArray(s.pagerPhone)||(s.pagerPhone=[s.pagerPhone]),s.pagerPhone.forEach(function(I){t>=4?a+='TEL;VALUE=uri;TYPE="pager,cell":tel:'+n(I)+o():a+="TEL;TYPE=PAGER:"+n(I)+o()})),s.homePhone&&(Array.isArray(s.homePhone)||(s.homePhone=[s.homePhone]),s.homePhone.forEach(function(I){t>=4?a+='TEL;VALUE=uri;TYPE="voice,home":tel:'+n(I)+o():a+="TEL;TYPE=HOME,VOICE:"+n(I)+o()})),s.workPhone&&(Array.isArray(s.workPhone)||(s.workPhone=[s.workPhone]),s.workPhone.forEach(function(I){t>=4?a+='TEL;VALUE=uri;TYPE="voice,work":tel:'+n(I)+o():a+="TEL;TYPE=WORK,VOICE:"+n(I)+o()})),s.homeFax&&(Array.isArray(s.homeFax)||(s.homeFax=[s.homeFax]),s.homeFax.forEach(function(I){t>=4?a+='TEL;VALUE=uri;TYPE="fax,home":tel:'+n(I)+o():a+="TEL;TYPE=HOME,FAX:"+n(I)+o()})),s.workFax&&(Array.isArray(s.workFax)||(s.workFax=[s.workFax]),s.workFax.forEach(function(I){t>=4?a+='TEL;VALUE=uri;TYPE="fax,work":tel:'+n(I)+o():a+="TEL;TYPE=WORK,FAX:"+n(I)+o()})),s.otherPhone&&(Array.isArray(s.otherPhone)||(s.otherPhone=[s.otherPhone]),s.otherPhone.forEach(function(I){t>=4?a+='TEL;VALUE=uri;TYPE="voice,other":tel:'+n(I)+o():a+="TEL;TYPE=OTHER:"+n(I)+o()})),[{details:s.homeAddress,type:"HOME"},{details:s.workAddress,type:"WORK"}].forEach(function(I){a+=i(c,I)}),s.title&&(a+="TITLE"+c+":"+n(s.title)+o()),s.role&&(a+="ROLE"+c+":"+n(s.role)+o()),s.organization&&(a+="ORG"+c+":"+n(s.organization)+o()),s.url&&(a+="URL"+c+":"+n(s.url)+o()),s.workUrl&&(a+="URL;type=WORK"+c+":"+n(s.workUrl)+o()),s.note&&(a+="NOTE"+c+":"+n(s.note)+o()),s.socialUrls)for(var d in s.socialUrls)s.socialUrls.hasOwnProperty(d)&&s.socialUrls[d]&&(a+="X-SOCIALPROFILE"+c+";TYPE="+d+":"+n(s.socialUrls[d])+o());return s.source&&(a+="SOURCE"+c+":"+n(s.source)+o()),a+="REV:"+new Date().toISOString()+o(),s.isOrganization&&(a+="X-ABShowAs:COMPANY"+o()),a+="END:VCARD"+o(),a}}}()),sC.exports}var Q7=function(){function e(){return{url:"",mediaType:"",base64:!1,attachFromUrl:function(o,r){this.url=o,this.mediaType=r,this.base64=!1},embedFromFile:function(o){var r=lC,i=lC;this.mediaType=i.extname(o).toUpperCase().replace(/\./g,"");var l=r.readFileSync(o);this.url=l.toString("base64"),this.base64=!0},embedFromString:function(o,r){this.mediaType=r,this.url=o,this.base64=!0}}}function t(){return{label:"",street:"",city:"",stateProvince:"",postalCode:"",countryRegion:""}}function n(){return{facebook:"",linkedIn:"",twitter:"",flickr:""}}return{uid:"",birthday:"",cellPhone:"",pagerPhone:"",email:"",workEmail:"",firstName:"",formattedName:"",gender:"",homeAddress:t(),homePhone:"",homeFax:"",lastName:"",logo:e(),middleName:"",namePrefix:"",nameSuffix:"",nickname:"",note:"",organization:"",photo:e(),role:"",socialUrls:n(),source:"",title:"",url:"",workUrl:"",workAddress:t(),workPhone:"",workFax:"",version:"3.0",getMajorVersion:function(){var o=this.version?this.version.split(".")[0]:"4";return isNaN(o)?4:parseInt(o)},getFormattedString:function(){var o=gZ();return o.getFormattedString(this)},saveToFile:function(o){var r=gZ(),i=r.getFormattedString(this),l=lC;l.writeFileSync(o,i,{encoding:"utf8"})}}},O7=Q7;const _7=ro(O7),kd="/assets/contactIcon-7010a161.png",q7=e=>{const[t,n]=m.useState(!1);m.useState(!0);const{org:o}=e,r=m.useRef(null),i=()=>{n(!0),console.log(o)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"relative max-w-xl mx-auto mt-2 py-4 flex w-full flex-col lg:flex-grow rounded-lg backdrop-blur-sm bg-blue-950/10 px-4 text-white shadow-none border-4 border-white/10 hover:border-white/30 hover:cursor-pointer",onClick:i,children:[g.jsxs("div",{className:"relative flex items-center gap-4 pt-0 mx-0 overflow-hidden text-white bg-transparent shadow-none rounded-xl bg-clip-border",children:[g.jsx("div",{className:"h-[58px] w-[70px]",children:g.jsx(Ji,{name:"titulo",size:"58",src:o.logo_url??kd})}),g.jsxs("div",{className:"flex w-full flex-col gap-0.5",children:[g.jsx("div",{className:"flex items-center justify-between",children:g.jsx("p",{className:"block font-sans text-base antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[22rem]",children:"Este usuario pertenece a"})}),g.jsx("h4",{className:"block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-orange-500 text-ellipsis overflow-hidden max-w-[22rem]",children:o.name})]})]}),g.jsx("div",{className:"flex flex-row items-end pb-2 justify-end absolute bottom-1 right-5",children:g.jsx("span",{className:"inline-flex items-center rounded-md bg-orange-50 px-2 py-1 text-xs font-medium text-orange-700 ring-1 ring-inset ring-orange-700/10 hover:text-white hover:ring-white hover:bg-orange-500",children:"Ver ms"})})]}),g.jsx(Vt.Root,{show:t,as:m.Fragment,children:g.jsxs(Zn,{className:"relative z-10",initialFocus:r,onClose:n,children:[g.jsx(Vt.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:g.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),g.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:g.jsx("div",{className:"flex items-end justify-center p-4 text-center sm:items-center sm:p-0",children:g.jsx(Vt.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:g.jsx(Zn.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full max-w-lg h-xl",children:g.jsx("div",{className:"bg-white px-4 pb-4 sm:p-6 sm:pb-4",children:g.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[g.jsx(Zn.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:o.name}),g.jsxs("div",{className:"bg-white rounded-lg max-w-3xl",children:[g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"sm:col-span-4",children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Industria"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:g.jsx(wE,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),g.jsx("textarea",{name:"industry",id:"industry",autoComplete:"industry",disabled:!0,value:o.industry,style:{height:"100%"},className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Telfono"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:g.jsx(nu,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),g.jsx("a",{href:`tel:${o.phone}`,className:"block border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2 cursor-pointer break-all",children:o.phone})]})}),g.jsx("label",{htmlFor:"website",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Sitio web"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:g.jsx(ed,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),g.jsx("a",{href:o.website.includes("https://")?o.website:`https://${o.website}`,target:"_blank",rel:"noopener noreferrer",className:"block border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2 cursor-pointer break-all",children:o.website})]})}),g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Correo electrnico"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:g.jsx(Ra,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),g.jsx("a",{href:`mailto:${o.email}`,className:"block border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2 cursor-pointer  break-all",children:o.email})]})})]})}),g.jsx("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:g.jsx("button",{type:"button",onClick:()=>n(!1),ref:r,className:"text-sm font-semibold  text-gray-900 p-3 hover:text-red-600",children:"Cerrar"})})]})]})})})})})})]})})]})};var zh={exports:{}},oo={};oo._=oo._interop_require_default=$7;function $7(e){return e&&e.__esModule?e:{default:e}}var Ca={};function PW(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(PW=function(o){return o?n:t})(e)}Ca._=Ca._interop_require_wildcard=eO;function eO(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=PW(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var l=r?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}var aC={},cZ;function tO(){return cZ||(cZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i}});const t=m,n=typeof window>"u",o=n?()=>{}:t.useLayoutEffect,r=n?()=>{}:t.useEffect;function i(l){const{headManager:s,reduceComponentsToState:a}=l;function c(){if(s&&s.mountedInstances){const d=t.Children.toArray(Array.from(s.mountedInstances).filter(Boolean));s.updateHead(a(d,l))}}if(n){var u;s==null||(u=s.mountedInstances)==null||u.add(l.children),c()}return o(()=>{var d;return s==null||(d=s.mountedInstances)==null||d.add(l.children),()=>{var I;s==null||(I=s.mountedInstances)==null||I.delete(l.children)}}),o(()=>(s&&(s._pendingUpdate=c),()=>{s&&(s._pendingUpdate=c)})),r(()=>(s&&s._pendingUpdate&&(s._pendingUpdate(),s._pendingUpdate=null),()=>{s&&s._pendingUpdate&&(s._pendingUpdate(),s._pendingUpdate=null)})),null}}(aC)),aC}var gC={},uZ;function nO(){return uZ||(uZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AmpStateContext",{enumerable:!0,get:function(){return o}});const o=oo._(m).default.createContext({})}(gC)),gC}var cC={},dZ;function oO(){return dZ||(dZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"HeadManagerContext",{enumerable:!0,get:function(){return o}});const o=oo._(m).default.createContext({})}(cC)),cC}var uC={},IZ;function rO(){return IZ||(IZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isInAmpMode",{enumerable:!0,get:function(){return t}});function t(n){let{ampFirst:o=!1,hybrid:r=!1,hasQuery:i=!1}=n===void 0?{}:n;return o||r&&i}}(uC)),uC}var dC={},CZ;function dp(){return CZ||(CZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"warnOnce",{enumerable:!0,get:function(){return t}});let t=n=>{}}(dC)),dC}(function(e,t){"use client";Object.defineProperty(t,"__esModule",{value:!0});function n(p,b){for(var y in b)Object.defineProperty(p,y,{enumerable:!0,get:b[y]})}n(t,{default:function(){return h},defaultHead:function(){return d}});const o=oo,r=Ca,i=g,l=r._(m),s=o._(tO()),a=nO(),c=oO(),u=rO();dp();function d(p){p===void 0&&(p=!1);const b=[(0,i.jsx)("meta",{charSet:"utf-8"})];return p||b.push((0,i.jsx)("meta",{name:"viewport",content:"width=device-width"})),b}function I(p,b){return typeof b=="string"||typeof b=="number"?p:b.type===l.default.Fragment?p.concat(l.default.Children.toArray(b.props.children).reduce((y,Z)=>typeof Z=="string"||typeof Z=="number"?y:y.concat(Z),[])):p.concat(b)}const C=["name","httpEquiv","charSet","itemProp"];function f(){const p=new Set,b=new Set,y=new Set,Z={};return G=>{let V=!0,S=!1;if(G.key&&typeof G.key!="number"&&G.key.indexOf("$")>0){S=!0;const k=G.key.slice(G.key.indexOf("$")+1);p.has(k)?V=!1:p.add(k)}switch(G.type){case"title":case"base":b.has(G.type)?V=!1:b.add(G.type);break;case"meta":for(let k=0,B=C.length;k<B;k++){const R=C[k];if(G.props.hasOwnProperty(R))if(R==="charSet")y.has(R)?V=!1:y.add(R);else{const W=G.props[R],w=Z[R]||new Set;(R!=="name"||!S)&&w.has(W)?V=!1:(w.add(W),Z[R]=w)}}break}return V}}function A(p,b){const{inAmpMode:y}=b;return p.reduce(I,[]).reverse().concat(d(y).reverse()).filter(f()).reverse().map((Z,G)=>{const V=Z.key||G;if({}.__NEXT_OPTIMIZE_FONTS&&!y&&Z.type==="link"&&Z.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(S=>Z.props.href.startsWith(S))){const S={...Z.props||{}};return S["data-href"]=S.href,S.href=void 0,S["data-optimized-fonts"]=!0,l.default.cloneElement(Z,S)}return l.default.cloneElement(Z,{key:V})})}function v(p){let{children:b}=p;const y=(0,l.useContext)(a.AmpStateContext),Z=(0,l.useContext)(c.HeadManagerContext);return(0,i.jsx)(s.default,{reduceComponentsToState:A,headManager:Z,inAmpMode:(0,u.isInAmpMode)(y),children:b})}const h=v;(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)})(zh,zh.exports);var QW=zh.exports,iO=QW;const lO=ro(iO);function sO({show:e,setShow:t,setNumber:n,number:o,onSumbit:r}){const[i,l]=m.useState(""),[s,a]=m.useState("52"),[c,u]=m.useState(""),d=[{code:"+52",country:"Mxico"},{code:"+34",country:"Espaa"},{code:"+1",country:"Estados Unidos/Canad"},{code:"+44",country:"Reino Unido"},{code:"+33",country:"Francia"},{code:"+49",country:"Alemania"},{code:"+39",country:"Italia"},{code:"+81",country:"Japn"},{code:"+86",country:"China"},{code:"+91",country:"India"}];function I(){s!==""&&i!==""?(n(s+i),r(),u(""),a(""),l(""),t(!1)):u("Campos faltantes")}return g.jsx(wA,{title:"Mandar perfil por Whatsapp ",open:e,onClose:()=>t(!1),children:g.jsxs("div",{className:"col-span-full",children:[g.jsx("label",{htmlFor:"web",className:"block text-sm font-medium leading-6 text-black",children:"Nmero celular"}),g.jsxs("div",{className:"my-2 flex",children:[g.jsx("select",{value:s,onChange:C=>a(C.target.value),className:"px-1.5 block w-1/3 rounded-md border bg-gray-100 py-1.5 text-black shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6",id:"lada",name:"lada",children:d.map((C,f)=>g.jsxs("option",{value:C.code,children:["(",C.code,")   ",C.country]},f))}),g.jsx("input",{value:i,onChange:C=>l(C.target.value),type:"text",placeholder:"Ingresa tu numero celular",className:"px-1.5 block w-2/3 ml-2 rounded-md border bg-gray-100 py-1.5 text-black shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})]}),c!==""&&g.jsx("p",{className:"text-red-600 font-semibold text-sm my-2 text-center",children:c}),g.jsxs("button",{onClick:I,className:"w-full rounded-md flex items-center justify-center p-2 text-white bg-green-600",children:[g.jsx(DS,{className:"text-2xl mr-2"}),"Enviar perfil"]})]})})}const aO=({isOpen:e,imageSrc:t,onClose:n,onNext:o,onPrev:r})=>g.jsx(Vt,{show:e,children:g.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto flex justify-center",children:g.jsxs("div",{className:"flex items-center justify-center px-4 text-center",children:[g.jsx(Vt.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:g.jsx("div",{className:"fixed inset-0 transition-opacity",children:g.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})})}),g.jsx(Vt.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:g.jsx("div",{className:"inline-block overflow-hidden align-middle transition-all transform bg-orange-50 shadow-xl rounded-lg max-h-dvh",children:g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:t,alt:"",className:"w-full h-full max-h-dvh object-cover px-5 py-10"}),g.jsx("button",{type:"button",className:"absolute top-0 right-0 m-3 text-red-500 hover:text-red-700",onClick:n,children:g.jsx(zV,{className:"w-8 h-8"})}),g.jsx("button",{type:"button",className:"absolute left-0 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 p-2",onClick:r,children:g.jsx(jF,{className:"w-8 h-8 text-orange-400 bg-white rounded-full"})}),g.jsx("button",{type:"button",className:"absolute right-0 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 p-2",onClick:o,children:g.jsx(UF,{className:"w-8 h-8 text-orange-400 bg-white rounded-full"})})]})})})]})})}),gO=()=>{const e="https://api.knowmeapp.com",[t,n]=m.useState([]),[o,r]=m.useState(null),[i,l]=m.useState(!1),a=new URLSearchParams(window.location.search).get("id");m.useEffect(()=>{(async()=>{try{const f=await Ie.get(`${e}/api/gallery/search/${a}`);if(console.log(`ID Perfil: ${a}`),f.data.ok){const A=f.data.gallery.map(v=>({id:v.id_gallery,src:v.image_url,alt:`Image ${v.id_gallery}`}));n(A)}}catch(f){console.error("Error al obtener las imgenes de la galera:",f)}})()},[e,a]);const c=C=>{r(C),l(!0)},u=()=>{r(null),l(!1)},d=()=>{r(C=>(C+1)%t.length)},I=()=>{r(C=>(C-1+t.length)%t.length)};return g.jsxs("div",{className:"",children:[t.length>0&&g.jsx("h1",{className:"font-bold text-xl my-2",children:"Galera"}),g.jsx("div",{className:"grid lg:grid-cols-5 md:grid-cols-4 grid-cols-2 gap-6 lg:gap-10",children:t.map((C,f)=>g.jsx("div",{className:"relative flex h-24 sm:w-24 items-center justify-center rounded-md bg-white cursor-pointer hover:ring-orange-500 ring-4 ring-transparent",onClick:()=>c(f),children:g.jsx("img",{src:C.src,alt:C.alt,className:"h-full w-full object-cover object-center rounded-md"})},C.id))}),i&&o!==null&&g.jsx(aO,{isOpen:i,imageSrc:t[o].src,onClose:u,onNext:d,onPrev:I})]})},cO=({isOpen:e,item:t,onClose:n})=>!e||!t?null:g.jsx(Vt,{show:e,children:g.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto flex justify-center",children:g.jsxs("div",{className:"flex items-center justify-center px-4 text-center",children:[g.jsx(Vt.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:g.jsx("div",{className:"fixed inset-0 transition-opacity",children:g.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})})}),g.jsx(Vt.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:g.jsx("div",{className:"inline-block overflow-hidden align-middle transition-all transform bg-orange-50 shadow-xl rounded-lg max-h-dvh",children:g.jsxs("div",{className:"relative p-5",children:[t.image&&g.jsx("img",{src:t.image,alt:t.title,className:"w-full h-64 object-cover rounded-md mb-4"}),g.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-900",children:t.title}),g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:t.description}),t.price&&t.price!=="0.00"&&g.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Precio:"," ",new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(t.price)]}),g.jsx("button",{type:"button",className:"absolute top-0 right-0 m-3 text-red-500 hover:text-red-700",onClick:n,children:g.jsx(zV,{className:"w-8 h-8"})})]})})})]})})}),uO=()=>{const[e,t]=m.useState([]),[n,o]=m.useState(null),[r,i]=m.useState(!1),s=new URLSearchParams(window.location.search).get("id")||localStorage.getItem("id");if(m.useEffect(()=>{(async()=>{try{const I=localStorage.getItem("token"),C="https://api.knowmeapp.com",f=await Ie.get(`${C}/api/products_services/search/${s}`,{headers:{"x-token":I}});if(f.data.ok&&Array.isArray(f.data.productsServices)){const A=f.data.productsServices.map(v=>({id:v.id_product,title:v.title,description:v.description,image:v.image_url,price:v.price,phoneNumber:v.contact_number,countryCode:"+52"}));t(A)}else t([])}catch(I){console.error("Error al obtener los productos y servicios:",I),t([])}})()},[s]),e.length===0)return null;const a=d=>{o(d),i(!0)},c=()=>{o(null),i(!1)},u=d=>{const I=`${d.countryCode}${d.phoneNumber}`;let C=`Hola, estoy interesado en el producto "${d.title}" que vi en Know Me. Descripcin: ${d.description}.`;return d.price&&d.price!=="0.00"&&(C+=` Precio: ${new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(d.price)}.`),`https://api.whatsapp.com/send?phone=${encodeURIComponent(I)}&text=${encodeURIComponent(C)}&type=phone_number&app_absent=0`};return g.jsxs("div",{className:"px-auto col-span-full w-full",children:[g.jsx("h1",{className:"font-bold text-lg",children:"Productos y Servicios"}),g.jsxs(Vd,{className:"flex flex-col-reverse",children:[g.jsx("div",{className:"lg:mx-3 mt-6 w-full max-w-md sm:block lg:max-w-none lg:px-5",children:g.jsx(Rd,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.map(d=>g.jsx(sp,{className:"relative h-24 sm:w-24 cursor-pointer items-center justify-center ring-4 ring-transparent rounded-md bg-white text-sm font-medium uppercase text-white hover:bg-orange-50 focus:outline-none focus:ring-4 focus:ring-orange-500 focus:ring-offset-4",children:({selected:I})=>g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"sr-only",children:d.title}),g.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-md",children:g.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:d.image&&g.jsx("img",{src:d.image,alt:d.title,className:"h-full w-full object-cover"})})}),g.jsx("span",{className:ot(I?"ring-orange-500":"ring-transparent","pointer-events-none absolute inset-0 rounded-md ring-2 ring-offset-2"),"aria-hidden":"true"})]})},d.id))})}),g.jsx(Wd,{className:"w-full max-h-96 flex justify-center m-2",children:e.map(d=>g.jsx(wd,{className:"w-full md:w-3/4",children:g.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white",children:[g.jsx("div",{className:"aspect-h-4 aspect-w-3 bg-gray-200 sm:aspect-none h-20 sm:h-40",children:d.image&&g.jsx("img",{src:d.image,alt:d.title,className:"h-full w-full object-cover object-center sm:h-full sm:w-full"})}),g.jsxs("div",{className:"flex flex-1 flex-col space-y-2 p-4",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-900",children:d.title}),g.jsx("p",{className:"text-sm text-gray-500",children:d.description}),g.jsxs("div",{className:"flex flex-1 flex-col justify-end",children:[d.price&&d.price!=="0.00"&&g.jsx("p",{className:"text-sm italic text-gray-500",children:`Precio: ${new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(d.price)}`}),g.jsxs("div",{className:"mt-6 flex space-x-4",children:[g.jsx("a",{href:u(d),target:"_blank",rel:"noopener noreferrer",className:"relative flex items-center justify-center rounded-md border border-transparent bg-green-500 px-4 py-2 text-sm font-medium text-white hover:bg-green-600",children:"Contactar"}),g.jsx("button",{onClick:()=>a(d),className:"relative flex items-center justify-center rounded-md border border-transparent bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600",children:"Ver detalles"})]})]})]})]})},d.id))})]}),g.jsx(cO,{isOpen:r,item:n,onClose:c})]})},dO={Lunes:0,Martes:1,Mircoles:2,Jueves:3,Viernes:4,Sbado:5,Domingo:6},IO={width:"100%",height:"250px",borderRadius:"0.5rem"};function CO(){const{isLoaded:e,loadError:t}=gp({googleMapsApiKey:"AIzaSyDW3kUrRQiLfjrg81wlKLk8tMomO0DBnxg"}),n=new URLSearchParams(window.location.search),o=cn(),r=n.get("username"),i=n.get("id"),[l,s]=m.useState({}),[a,c]=m.useState({}),[u,d]=m.useState({}),[I,C]=m.useState(!0);m.useState(!1);const[f,A]=m.useState(0),[v,h]=m.useState(""),[p,b]=m.useState(!1),y=m.useRef(null),[Z,G]=m.useState(null),V=`${window.location.origin}/card?username=${a.username}&id=${a.id_user}`,[S,k]=m.useState(!1),B=m.useRef(null);m.useEffect(()=>{window.google&&G(new window.google.maps.Geocoder)},[e]);const R=m.useCallback(x=>{y.current=x},[]);m.useEffect(()=>{console.log(a.lat),W()},[]);const W=async()=>{const{data:x}=await o.getUser(i),{data:H}=await o.getProfile(r),K=await o.getSocialMedia(i),{data:T}=await o.getSchedule(i);console.log(H);const j={};Object.values(T.scheduleDays).forEach(J=>{j[dO[J.day]]=J}),A(x.user.id_plan_fk),s(K.data.social_media),c({...H}),d({...j}),C(!1)},w=async()=>{try{console.log(a),navigator.share?await navigator.share({title:"KnowMe",text:`Conecta con ${a.username} en KnowMe!`,url:V}):xe.warning("No se puede compartir el enlace desde este dispositivo ")}catch(x){console.error("Error sharing:",x)}},X=x=>{const H=document.createElement("a"),K=new Blob([x],{type:"text/plain;charset=utf-8"});H.href=URL.createObjectURL(K),H.download="contact.vcf",document.body.appendChild(H),H.click()},E=()=>{const x=_7();return x.firstName=a.title_profile,x.middleName="",x.lastName="",x.organization=a.ocupation_role,x.cellPhone=a.whatsapp_option,x.workPhone=a.personal_phone,x.email=a.email,x.birthday="",x.title=a.ocupation_role,x.url=V,x.note="Contacto obtenido por knowmeapp.com",x.getFormattedString()},M=x=>{window.open(x,"_blank","noreferrer")},L=()=>{window.open(a.pdf_file_url.includes("https://")?a.pdf_file_url:`https://${a.pdf_file_url}`,"_blank","noreferrer")},F=()=>{window.open(a.pdf_file_url.includes("https://")?a.secondary_pdf_file_url:`https://${a.secondary_pdf_file_url}`,"_blank","noreferrer")},Y=x=>{window.open(x.includes("https://")?x:`https://${x}`,"_blank","noreferrer")},N=x=>{const H=`Hola!  Aqu tienes el perfil que solicitaste:
    
    -  Visita nuestro sitio web en: https://knowmeapp.com/card?username=${x.username}&id=${x.id_profile}
    
    Que tengas un excelente da! `,K=encodeURIComponent(H),T=`https://api.whatsapp.com/send?phone=${v}&text=${K}`;window.open(T,"_blank")};return I?g.jsx(g.Fragment,{children:g.jsx(Tr,{fullScreen:!0})}):g.jsxs("div",{className:"card-view",children:[g.jsx(sO,{onSumbit:()=>N(a),show:p,setShow:b,setNumber:h,number:v}),g.jsxs(lO,{children:[g.jsx("title",{children:a.title_profile}),g.jsx("meta",{name:"description",content:a.description_profile}),g.jsx("meta",{property:"og:title",content:a.title_profile}),g.jsx("meta",{property:"og:description",content:a.description_profile}),g.jsx("meta",{property:"og:image",content:a.profile_img_url}),g.jsx("meta",{property:"og:url",content:window.location.href}),g.jsx("meta",{property:"og:type",content:"website"})]}),g.jsx(Rn,{position:"top-right",richColors:!0}),a.organization.id_organization&&f>=9&&g.jsx(q7,{org:a.organization}),g.jsx("div",{className:"max-w-xl m-auto pb-8 mt-2",children:g.jsx("div",{className:"border-solid border-4 border-white/10 rounded-lg pb-8",children:g.jsxs("div",{className:"flex flex-col justify-center",children:[g.jsxs("div",{className:"relative items-center gap-x-3 h-36 mb-12",children:[g.jsxs("div",{className:"m-auto w-full p-4 absolute z-10 flex justify-center items-center top-28",children:[g.jsx("div",{className:"w-0 md:w-32 h-10 mt-20"}),g.jsx(Ji,{name:a.username,size:"150",src:a.profile_img_url}),g.jsxs("div",{className:"w-40 flex mb-24 px-2 items-center justify-between",children:[g.jsx("div",{children:g.jsx(k9,{className:"h-12 w-12 text-white cursor-pointer p-1 rounded-lg hover:bg-gray-700",onClick:()=>X(E())},"whatsapp_3")}),g.jsx("div",{children:g.jsx(w9,{className:"h-10 w-10 text-white cursor-pointer p-1 rounded-lg hover:bg-gray-700",onClick:w},"share")}),g.jsx("div",{children:g.jsx(zS,{className:"h-10 w-10 text-white cursor-pointer p-1 rounded-lg hover:bg-gray-700",onClick:()=>b(!0)},"share")}),a.whatsapp_option!=="0"?g.jsx("div",{children:g.jsx(DS,{className:"h-12 w-12 text-white cursor-pointer p-1 rounded-lg hover:bg-gray-700",onClick:()=>{M(`https://wa.me/${a.whatsapp_option.replace("-","")}?text=Hola%21%0AEncontr+tu+contacto+por+knowmeapp.com`)}},"whatsapp")}):g.jsx("div",{className:"h-9 w-9 text-white p-1 rounded-lg "})]},"whatsapp_2")]}),f!=6&&g.jsx("div",{className:"pt-1 pr-1 pl-1 w-full h-28 absolute top-0 left-0 z-0 overflow-hidden ",children:g.jsx("img",{src:a.custom_img_url??a.organization.cover_url??xl,alt:"imagen_portada",className:"object-scale-down rounded-lg"})})]}),g.jsxs("div",{className:"share-personal-data mt-28",children:[g.jsx("label",{className:"full-name",children:a.title_profile}),g.jsx("label",{className:"ocupation",children:a.ocupation_role}),g.jsx("label",{className:"ocupation",children:a.organization_name})]}),g.jsx(ua.Provider,{value:{color:"#FFF"},children:g.jsx(Fe,{children:g.jsx("div",{className:"social-media-icon-container",children:l==null?void 0:l.map(x=>{const H=JA(x.url)[x.name];return g.jsx("div",{className:"social-media-icon",children:H},`${x.name}_`)})})})}),g.jsx("div",{className:"share-description max-w-96 text-left md:max-w-xl ",dangerouslySetInnerHTML:{__html:a.description_profile}}),g.jsxs("div",{className:"share-general-data",children:[g.jsx("h4",{className:"title-data",children:"Informacin General"}),a.web_page_url&&g.jsxs("div",{className:"perfil-field-data",children:["Sitio web",g.jsxs("div",{className:"flex m-2",children:[g.jsx(ed,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsx("p",{onClick:()=>Y(a.web_page_url),className:"telefono pb-1 cursor-pointer",children:a.web_page_url})]})]}),g.jsxs("div",{className:"perfil-field-data",children:["Correo electrnico",g.jsxs("div",{className:"flex m-2",children:[g.jsx(Ra,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsx("a",{href:`mailto:${a.email}`,className:"telefono pb-1",children:a.email})]})]}),g.jsxs("div",{className:"perfil-field-data",children:["Telfono",g.jsxs("div",{className:"flex m-2",children:[g.jsx(nu,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsx("a",{href:`tel:${a.personal_phone}`,className:"telefono pb-1",children:a.personal_phone})]})]}),a.secondary_phone&&a.secondary_phone!=""&&g.jsxs("div",{className:"perfil-field-data",children:["Telfono Secundario",g.jsxs("div",{className:"flex m-2",children:[g.jsx(nu,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsx("a",{href:`tel:${a.secondary_phone}`,className:"telefono pb-1",children:a.secondary_phone})]})]}),typeof a.lat<"u"&&typeof a.lng<"u"&&!isNaN(parseFloat(a.lat))&&!isNaN(parseFloat(a.lng))&&g.jsxs("div",{className:"perfil-field-data",children:["Ubicacion",g.jsx("div",{className:"flex my-2",children:g.jsx(JW,{mapContainerStyle:IO,center:{lat:parseFloat(a.lat),lng:parseFloat(a.lng)},zoom:18,onLoad:R,children:g.jsx(EW,{position:{lat:parseFloat(a.lat),lng:parseFloat(a.lng)}},`marker-${a.lat}-${a.lng}`)})})]}),g.jsx("div",{className:"perfil-field-data",children:g.jsx(gO,{})}),g.jsx("div",{className:"perfil-field-data",children:g.jsx(uO,{})}),g.jsx("div",{className:"perfil-field-data",children:g.jsx(D7,{schedule:u})}),g.jsx("div",{className:"w-fit m-auto",children:g.jsxs("div",{className:"flex",children:[a.pdf_file_url&&f>=9&&g.jsx("div",{className:"flex justify-center m-4",children:g.jsx("button",{onClick:L,className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",children:"Ver Brochure"})}),a.secondary_pdf_file_url&&f>=9&&g.jsx("div",{className:"flex justify-center m-4",children:g.jsx("button",{onClick:F,className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",children:"Ver Brochure 2"})})]})})]})]})})}),g.jsx("div",{className:"fixed bottom-0 w-full bg-blue-950 lg:px-96",children:g.jsx($u,{})}),g.jsx(Vt.Root,{show:S,as:m.Fragment,children:g.jsxs(Zn,{className:"relative z-10",initialFocus:B,onClose:k,children:[g.jsx(Vt.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:g.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),g.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:g.jsx("div",{className:"flex items-end justify-center p-4 text-center sm:items-center sm:p-0",children:g.jsx(Vt.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:g.jsxs(Zn.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full max-w-lg h-xl",children:[g.jsx("div",{className:"bg-white px-4 pb-4 sm:p-6 sm:pb-4",children:g.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[g.jsx(Zn.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"Brochure"}),g.jsx("div",{className:"mt-2 w-full h-96",children:g.jsx("iframe",{src:a.pdf_file_url,className:"w-full h-full"})})]})}),g.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:g.jsx("button",{type:"button",className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",onClick:()=>k(!1),ref:B,children:"Cerrar"})})]})})})})]})})]})}const So=({children:e})=>{const t=Mr(),[n,o]=m.useState(!0),[r,i]=m.useState(!1);m.useContext(kt),m.useEffect(()=>{l()},[]);const l=async()=>{try{(await t.renewToken()).status==200&&i(!0),o(!1)}catch(s){console.log(s),o(!1)}};return n?g.jsx(Tr,{fullScreen:!0}):r?g.jsx(iA,{to:"/home/"}):e};var xd={},OW={L:1,M:0,Q:3,H:2},_W={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},mO=_W;function qW(e){this.mode=mO.MODE_8BIT_BYTE,this.data=e}qW.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var hO=qW,Wg=OW;function uo(e,t){this.totalCount=e,this.dataCount=t}uo.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];uo.getRSBlocks=function(e,t){var n=uo.getRsBlockTable(e,t);if(n==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var o=n.length/3,r=new Array,i=0;i<o;i++)for(var l=n[i*3+0],s=n[i*3+1],a=n[i*3+2],c=0;c<l;c++)r.push(new uo(s,a));return r};uo.getRsBlockTable=function(e,t){switch(t){case Wg.L:return uo.RS_BLOCK_TABLE[(e-1)*4+0];case Wg.M:return uo.RS_BLOCK_TABLE[(e-1)*4+1];case Wg.Q:return uo.RS_BLOCK_TABLE[(e-1)*4+2];case Wg.H:return uo.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var fO=uo;function $W(){this.buffer=new Array,this.length=0}$W.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var AO=$W,qn={glog:function(e){if(e<1)throw new Error("glog("+e+")");return qn.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return qn.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Yt=0;Yt<8;Yt++)qn.EXP_TABLE[Yt]=1<<Yt;for(var Yt=8;Yt<256;Yt++)qn.EXP_TABLE[Yt]=qn.EXP_TABLE[Yt-4]^qn.EXP_TABLE[Yt-5]^qn.EXP_TABLE[Yt-6]^qn.EXP_TABLE[Yt-8];for(var Yt=0;Yt<255;Yt++)qn.LOG_TABLE[qn.EXP_TABLE[Yt]]=Yt;var ew=qn,$r=ew;function dc(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&e[n]==0;)n++;this.num=new Array(e.length-n+t);for(var o=0;o<e.length-n;o++)this.num[o]=e[o+n]}dc.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<e.getLength();o++)t[n+o]^=$r.gexp($r.glog(this.get(n))+$r.glog(e.get(o)));return new dc(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=$r.glog(this.get(0))-$r.glog(e.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(var o=0;o<e.getLength();o++)n[o]^=$r.gexp($r.glog(e.get(o))+t);return new dc(n,0).mod(e)}};var tw=dc,Xn=_W,mZ=tw,pO=ew,$o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Jt={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Jt.getBCHDigit(t)-Jt.getBCHDigit(Jt.G15)>=0;)t^=Jt.G15<<Jt.getBCHDigit(t)-Jt.getBCHDigit(Jt.G15);return(e<<10|t)^Jt.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Jt.getBCHDigit(t)-Jt.getBCHDigit(Jt.G18)>=0;)t^=Jt.G18<<Jt.getBCHDigit(t)-Jt.getBCHDigit(Jt.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return Jt.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case $o.PATTERN000:return(t+n)%2==0;case $o.PATTERN001:return t%2==0;case $o.PATTERN010:return n%3==0;case $o.PATTERN011:return(t+n)%3==0;case $o.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case $o.PATTERN101:return t*n%2+t*n%3==0;case $o.PATTERN110:return(t*n%2+t*n%3)%2==0;case $o.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new mZ([1],0),n=0;n<e;n++)t=t.multiply(new mZ([1,pO.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Xn.MODE_NUMBER:return 10;case Xn.MODE_ALPHA_NUM:return 9;case Xn.MODE_8BIT_BYTE:return 8;case Xn.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Xn.MODE_NUMBER:return 12;case Xn.MODE_ALPHA_NUM:return 11;case Xn.MODE_8BIT_BYTE:return 16;case Xn.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Xn.MODE_NUMBER:return 14;case Xn.MODE_ALPHA_NUM:return 13;case Xn.MODE_8BIT_BYTE:return 16;case Xn.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,o=0;o<t;o++)for(var r=0;r<t;r++){for(var i=0,l=e.isDark(o,r),s=-1;s<=1;s++)if(!(o+s<0||t<=o+s))for(var a=-1;a<=1;a++)r+a<0||t<=r+a||s==0&&a==0||l==e.isDark(o+s,r+a)&&i++;i>5&&(n+=3+i-5)}for(var o=0;o<t-1;o++)for(var r=0;r<t-1;r++){var c=0;e.isDark(o,r)&&c++,e.isDark(o+1,r)&&c++,e.isDark(o,r+1)&&c++,e.isDark(o+1,r+1)&&c++,(c==0||c==4)&&(n+=3)}for(var o=0;o<t;o++)for(var r=0;r<t-6;r++)e.isDark(o,r)&&!e.isDark(o,r+1)&&e.isDark(o,r+2)&&e.isDark(o,r+3)&&e.isDark(o,r+4)&&!e.isDark(o,r+5)&&e.isDark(o,r+6)&&(n+=40);for(var r=0;r<t;r++)for(var o=0;o<t-6;o++)e.isDark(o,r)&&!e.isDark(o+1,r)&&e.isDark(o+2,r)&&e.isDark(o+3,r)&&e.isDark(o+4,r)&&!e.isDark(o+5,r)&&e.isDark(o+6,r)&&(n+=40);for(var u=0,r=0;r<t;r++)for(var o=0;o<t;o++)e.isDark(o,r)&&u++;var d=Math.abs(100*u/t/t-50)/5;return n+=d*10,n}},bO=Jt,yO=hO,nw=fO,ow=AO,Ur=bO,vO=tw;function mo(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var wn=mo.prototype;wn.addData=function(e){var t=new yO(e);this.dataList.push(t),this.dataCache=null};wn.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};wn.getModuleCount=function(){return this.moduleCount};wn.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=nw.getRSBlocks(e,this.errorCorrectLevel),n=new ow,o=0,r=0;r<t.length;r++)o+=t[r].dataCount;for(var r=0;r<this.dataList.length;r++){var i=this.dataList[r];n.put(i.mode,4),n.put(i.getLength(),Ur.getLengthInBits(i.mode,e)),i.write(n)}if(n.getLengthInBits()<=o*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};wn.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=mo.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};wn.setupPositionProbePattern=function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var o=-1;o<=7;o++)t+o<=-1||this.moduleCount<=t+o||(0<=n&&n<=6&&(o==0||o==6)||0<=o&&o<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=o&&o<=4?this.modules[e+n][t+o]=!0:this.modules[e+n][t+o]=!1)};wn.getBestMaskPattern=function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var o=Ur.getLostPoint(this);(n==0||e>o)&&(e=o,t=n)}return t};wn.createMovieClip=function(e,t,n){var o=e.createEmptyMovieClip(t,n),r=1;this.make();for(var i=0;i<this.modules.length;i++)for(var l=i*r,s=0;s<this.modules[i].length;s++){var a=s*r,c=this.modules[i][s];c&&(o.beginFill(0,100),o.moveTo(a,l),o.lineTo(a+r,l),o.lineTo(a+r,l+r),o.lineTo(a,l+r),o.endFill())}return o};wn.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};wn.setupPositionAdjustPattern=function(){for(var e=Ur.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var o=e[t],r=e[n];if(this.modules[o][r]==null)for(var i=-2;i<=2;i++)for(var l=-2;l<=2;l++)i==-2||i==2||l==-2||l==2||i==0&&l==0?this.modules[o+i][r+l]=!0:this.modules[o+i][r+l]=!1}};wn.setupTypeNumber=function(e){for(var t=Ur.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var o=!e&&(t>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(var n=0;n<18;n++){var o=!e&&(t>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=o}};wn.setupTypeInfo=function(e,t){for(var n=this.errorCorrectLevel<<3|t,o=Ur.getBCHTypeInfo(n),r=0;r<15;r++){var i=!e&&(o>>r&1)==1;r<6?this.modules[r][8]=i:r<8?this.modules[r+1][8]=i:this.modules[this.moduleCount-15+r][8]=i}for(var r=0;r<15;r++){var i=!e&&(o>>r&1)==1;r<8?this.modules[8][this.moduleCount-r-1]=i:r<9?this.modules[8][15-r-1+1]=i:this.modules[8][15-r-1]=i}this.modules[this.moduleCount-8][8]=!e};wn.mapData=function(e,t){for(var n=-1,o=this.moduleCount-1,r=7,i=0,l=this.moduleCount-1;l>0;l-=2)for(l==6&&l--;;){for(var s=0;s<2;s++)if(this.modules[o][l-s]==null){var a=!1;i<e.length&&(a=(e[i]>>>r&1)==1);var c=Ur.getMask(t,o,l-s);c&&(a=!a),this.modules[o][l-s]=a,r--,r==-1&&(i++,r=7)}if(o+=n,o<0||this.moduleCount<=o){o-=n,n=-n;break}}};mo.PAD0=236;mo.PAD1=17;mo.createData=function(e,t,n){for(var o=nw.getRSBlocks(e,t),r=new ow,i=0;i<n.length;i++){var l=n[i];r.put(l.mode,4),r.put(l.getLength(),Ur.getLengthInBits(l.mode,e)),l.write(r)}for(var s=0,i=0;i<o.length;i++)s+=o[i].dataCount;if(r.getLengthInBits()>s*8)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+s*8+")");for(r.getLengthInBits()+4<=s*8&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=s*8||(r.put(mo.PAD0,8),r.getLengthInBits()>=s*8));)r.put(mo.PAD1,8);return mo.createBytes(r,o)};mo.createBytes=function(e,t){for(var n=0,o=0,r=0,i=new Array(t.length),l=new Array(t.length),s=0;s<t.length;s++){var a=t[s].dataCount,c=t[s].totalCount-a;o=Math.max(o,a),r=Math.max(r,c),i[s]=new Array(a);for(var u=0;u<i[s].length;u++)i[s][u]=255&e.buffer[u+n];n+=a;var d=Ur.getErrorCorrectPolynomial(c),I=new vO(i[s],d.getLength()-1),C=I.mod(d);l[s]=new Array(d.getLength()-1);for(var u=0;u<l[s].length;u++){var f=u+C.getLength()-l[s].length;l[s][u]=f>=0?C.get(f):0}}for(var A=0,u=0;u<t.length;u++)A+=t[u].totalCount;for(var v=new Array(A),h=0,u=0;u<o;u++)for(var s=0;s<t.length;s++)u<i[s].length&&(v[h++]=i[s][u]);for(var u=0;u<r;u++)for(var s=0;s<t.length;s++)u<l[s].length&&(v[h++]=l[s][u]);return v};var ZO=mo,Ip={};Object.defineProperty(Ip,"__esModule",{value:!0});var GO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},BO=dt,Jn=iw(BO),rw=m,wg=iw(rw);function iw(e){return e&&e.__esModule?e:{default:e}}function SO(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var VO={bgColor:Jn.default.oneOfType([Jn.default.object,Jn.default.string]).isRequired,bgD:Jn.default.string.isRequired,fgColor:Jn.default.oneOfType([Jn.default.object,Jn.default.string]).isRequired,fgD:Jn.default.string.isRequired,size:Jn.default.number.isRequired,title:Jn.default.string,viewBoxSize:Jn.default.number.isRequired,xmlns:Jn.default.string},Cp=(0,rw.forwardRef)(function(e,t){var n=e.bgColor,o=e.bgD,r=e.fgD,i=e.fgColor,l=e.size,s=e.title,a=e.viewBoxSize,c=e.xmlns,u=c===void 0?"http://www.w3.org/2000/svg":c,d=SO(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return wg.default.createElement("svg",GO({},d,{height:l,ref:t,viewBox:"0 0 "+a+" "+a,width:l,xmlns:u}),s?wg.default.createElement("title",null,s):null,wg.default.createElement("path",{d:o,fill:n}),wg.default.createElement("path",{d:r,fill:i}))});Cp.displayName="QRCodeSvg";Cp.propTypes=VO;Ip.default=Cp;Object.defineProperty(xd,"__esModule",{value:!0});xd.QRCode=void 0;var RO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},WO=dt,Vo=Ha(WO),wO=OW,kO=Ha(wO),xO=ZO,XO=Ha(xO),lw=m,JO=Ha(lw),NO=Ip,YO=Ha(NO);function Ha(e){return e&&e.__esModule?e:{default:e}}function HO(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var FO={bgColor:Vo.default.oneOfType([Vo.default.object,Vo.default.string]),fgColor:Vo.default.oneOfType([Vo.default.object,Vo.default.string]),level:Vo.default.string,size:Vo.default.number,value:Vo.default.string.isRequired},Xd=(0,lw.forwardRef)(function(e,t){var n=e.bgColor,o=n===void 0?"#FFFFFF":n,r=e.fgColor,i=r===void 0?"#000000":r,l=e.level,s=l===void 0?"L":l,a=e.size,c=a===void 0?256:a,u=e.value,d=HO(e,["bgColor","fgColor","level","size","value"]),I=new XO.default(-1,kO.default[s]);I.addData(u),I.make();var C=I.modules;return JO.default.createElement(YO.default,RO({},d,{bgColor:o,bgD:C.map(function(f,A){return f.map(function(v,h){return v?"":"M "+h+" "+A+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:C.map(function(f,A){return f.map(function(v,h){return v?"M "+h+" "+A+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:c,viewBoxSize:C.length}))});xd.QRCode=Xd;Xd.displayName="QRCode";Xd.propTypes=FO;var sw=xd.default=Xd;const hZ=()=>{const{user:e}=m.useContext(kt),t=cn();ut();const[n,o]=m.useState();m.useState("");const r=window.location.origin+`/card?username=${e.username}&id=${e.id}`,[i,l]=m.useState(!1),s=async()=>{const{data:u}=await t.getProfile();o({...u})},a=async()=>{try{navigator.share?await navigator.share({title:"KnowMe",text:`Conecta con ${n.username} en KnowMe!`,url:r}):alert("Ocurrio un error :(")}catch(u){console.error("Error sharing:",u)}},c=()=>{navigator.clipboard.writeText(r),l(!0),setTimeout(()=>{l(!1)},2e3)};return m.useEffect(()=>{s()},[]),n==null?g.jsx(Tr,{}):g.jsxs(g.Fragment,{children:[g.jsx(ai,{to:"/home/",className:"back-icon-container",children:g.jsx(J9,{className:"back-icon"})}),g.jsxs("div",{className:"share-container lg:mx-28",children:[g.jsx("div",{className:"share-avatar",children:g.jsx(Ji,{name:n.title_profile,size:"130",src:n.profile_img_url})}),g.jsxs("div",{className:"share-qr-container border-solid border-4 border-white/10 rounded-lg ",children:[g.jsxs("div",{className:"share-header",children:[g.jsx("h1",{children:n.title_profile}),g.jsx("h4",{children:n.ocupation_role})]}),g.jsx("div",{className:"share-qr-code flex justify-center",children:g.jsx(sw,{size:256,style:{height:"auto",maxWidth:"100%",width:"90%"},bgColor:"#ffffff",fgColor:"#000000",value:r,viewBox:"0 0 256 256"})}),g.jsxs("div",{className:"mt-4",children:[g.jsx("button",{type:"button",className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 m-1",onClick:a,children:"Compartir Tarjeta"}),g.jsx("button",{type:"button",className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 m-1",onClick:c,children:i?"Copiado! ":"Copiar URL"})]})]})]})]})};function EO(e){return ye({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.917 7A6.002 6.002 0 0 0 2.083 7H1.071a7.002 7.002 0 0 1 13.858 0h-1.012z"},child:[]}]})(e)}const KO=({totalPages:e,currentPage:t,setCurrentPage:n})=>g.jsxs("nav",{className:"my-8 px-5 flex items-center justify-between pb-20 md:pb-0",children:[g.jsx("div",{className:"-mt-px flex w-0 flex-1",children:g.jsxs("a",{onClick:()=>{t>1&&n(t-1)},className:`inline-flex items-center border-t-2 border-transparent pr-1 pt-4 text-sm font-medium text-orange-500 ${t>1?"hover:border-orange-500 hover:cursor-pointer":"hover:cursor-default"}`,children:[g.jsx(yK,{className:"mr-3 h-5 w-5 text-orange-400","aria-hidden":"true"}),"Anterior"]})}),g.jsxs("div",{className:"hidden md:-mt-px md:flex",children:[t-3>0&&g.jsx("span",{className:"hover:cursor-default inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500",children:"..."}),t-2>0&&g.jsx("a",{onClick:()=>{n(t-2)},className:"hover:cursor-pointer inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500 hover:border-orange-500",children:t-2}),t-1>0&&g.jsx("a",{onClick:()=>{n(t-1)},className:"hover:cursor-pointer inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500 hover:border-orange-500",children:t-1}),g.jsx("a",{className:"hover:cursor-default inline-flex items-center border-t-2 border-white px-4 pt-4 text-sm font-medium text-white","aria-current":"page",children:t}),t+1<=e&&g.jsx("a",{onClick:()=>{n(t+1)},className:"hover:cursor-pointer inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500 hover:border-orange-500",children:t+1}),t+2<=e&&g.jsx("a",{onClick:()=>{n(t+2)},className:"hover:cursor-pointer inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500 hover:border-orange-500",children:t+2}),t+3<=e&&g.jsx("span",{className:"hover:cursor-default inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500",children:"..."})]}),g.jsx("div",{className:"-mt-px flex w-0 flex-1 justify-end",children:g.jsxs("a",{onClick:()=>{t+1<=e&&n(t+1)},className:`inline-flex items-center border-t-2 border-transparent pr-1 pt-4 text-sm font-medium text-orange-500 ${t<e?"hover:border-orange-500 hover:cursor-pointer":"hover:cursor-default"}`,children:["Siguiente",g.jsx(GK,{className:"ml-3 h-5 w-5 text-orange-400","aria-hidden":"true"})]})})]});const LO=({handleSearchTerm:e,term:t})=>{const{formState:n,onInputChange:o}=Lr({search:t=="<"?"":t}),r=l=>{l&&l.preventDefault(),e(n.search)},i=l=>{o(l),r()};return g.jsxs("form",{className:"relative flex max-w-80 m-auto border-b search-border rounded mb-4",onSubmit:r,children:[g.jsx("input",{type:"search",className:"peer block min-h-[auto] text-white w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary data-[twe-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none dark:text-white dark:placeholder:text-neutral-300 dark:autofill:shadow-autofill dark:peer-focus:text-primary [&:not([data-twe-input-placeholder-active])]:placeholder:opacity-0",placeholder:"Buscar por el texto...",name:"search",value:n.search,onInput:i}),g.jsx("label",{className:`pointer-events-none absolute text-white left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6]  transition-all duration-200 ease-out 
        ${n.search!=""?"-translate-y-[0.9rem] scale-[0.8] dark:text-primary dark:text-neutral-400":""}
      peer-focus:-translate-y-[0.9rem] peer-focus:scale-[0.8] peer-focus:text-primary 
      peer-data-[twe-input-state-active]:-translate-y-[0.9rem] peer-data-[twe-input-state-active]:scale-[0.8] motion-reduce:transition-none dark:text-neutral-400 dark:peer-focus:text-primary`,children:"Qu ests buscando?"}),g.jsx("button",{className:"relative z-[2] -ms-0.5 flex items-center rounded-e px-2 text-xs font-medium uppercase leading-normal text-white shadow-primary-3 transition duration-150 ease-in-out hover:shadow-primary-2 focus:bg-primary-accent-300 focus:shadow-primary-2 focus:outline-none focus:ring-0 active:bg-primary-600 active:shadow-primary-2 dark:shadow-black/30 dark:hover:shadow-dark-strong dark:focus:shadow-dark-strong dark:active:shadow-dark-strong",type:"submit",children:g.jsx("span",{className:"[&>svg]:h-5 [&>svg]:w-5",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})})})]})};function MO(e){return ye({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4.75 17.25a.75.75 0 0 1 .75.75v2.25c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V18a.75.75 0 0 1 1.5 0v2.25A1.75 1.75 0 0 1 18.25 22H5.75A1.75 1.75 0 0 1 4 20.25V18a.75.75 0 0 1 .75-.75Z"},child:[]},{tag:"path",attr:{d:"M5.22 9.97a.749.749 0 0 1 1.06 0l4.97 4.969V2.75a.75.75 0 0 1 1.5 0v12.189l4.97-4.969a.749.749 0 1 1 1.06 1.06l-6.25 6.25a.749.749 0 0 1-1.06 0l-6.25-6.25a.749.749 0 0 1 0-1.06Z"},child:[]}]})(e)}const TO=e=>{const t=o=>{const r=window.getComputedStyle(o),i={};for(let l=0;l<r.length;l++)i[r[l]]=r.getPropertyValue(r[l]);for(const l in i)o.style[l]=i[l];return i},n=document.querySelector(e);t(n),n.querySelectorAll("*").forEach(o=>t(o))},jO=({target:e,scale:t,format:n,quality:o})=>{var r=document.querySelector(e),i=new XMLSerializer().serializeToString(r),l=document.createElement("canvas"),s=r.getBoundingClientRect();l.width=s.width*t,l.height=s.height*t,l.style.width=s.width,l.style.height=s.height;var a=l.getContext("2d");a.scale(t,t);var c=document.createElement("img");return c.setAttribute("src","data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i)))),new Promise(u=>{c.onload=()=>{a.drawImage(c,0,0);const d=l.toDataURL(`image/${n}`,n="png",o);u(d)}})},zO=({file:e,name:t,format:n})=>{var o=document.createElement("a");o.className="display-none",o.download=`${t}.${n}`,o.href=e,document.body.appendChild(o),o.click()};var DO=async(e,t,{scale:n=1,format:o="png",quality:r=.92,download:i=!0,ignore:l=null}={})=>{const s=document.querySelector(e),a=s.innerHTML;if(l!=null){const c=document.querySelector(l);c.parentNode.removeChild(c)}return TO(e),await jO({target:e,scale:n,format:o,quality:r}).then(c=>(i&&zO({file:c,name:t,format:o}),s.innerHTML=a,c)).catch(console.error)};const UO=ro(DO),PO=({open:e,setOpen:t,modalInfo:n})=>{const o=P.createRef(),r=()=>{UO("#QRCode",`QR_${n.username}`,{download:!0,quality:1})};return g.jsx(g.Fragment,{children:g.jsxs(Zn,{open:e,onClose:t,className:"relative z-10",children:[g.jsx(ZQ,{transition:!0,className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity data-[closed]:opacity-0 data-[enter]:duration-300 data-[leave]:duration-200 data-[enter]:ease-out data-[leave]:ease-in"}),g.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:g.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:g.jsxs(GW,{transition:!0,className:"relative qr-dialog transform overflow-hidden rounded-lg px-4 pb-4 pt-5 text-left shadow-xl transition-all data-[closed]:translate-y-4 data-[closed]:opacity-0 data-[enter]:duration-300 data-[leave]:duration-200 data-[enter]:ease-out data-[leave]:ease-in sm:my-8 sm:w-full sm:max-w-lg sm:p-6 data-[closed]:sm:translate-y-0 data-[closed]:sm:scale-95",children:[g.jsx(E9,{color:"white",size:25,className:"right-6 top-6 absolute cursor-pointer",onClick:()=>{t(!1)}}),g.jsx("div",{children:g.jsx("div",{className:"mx-auto flex items-center justify-center m-2",children:g.jsx("div",{className:"p-8 mx-4 bg-white rounded",children:g.jsx(sw,{name:"QRCode",ref:o,id:"QRCode",value:n.url})})})}),g.jsxs("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3 qr-buttons",children:[g.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(n.url)},className:"inline-flex w-full justify-center rounded-md px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:col-start-2",children:"Copiar URL"}),g.jsxs("button",{type:"button",onClick:r,className:"inline-flex w-full justify-center rounded-md px-3 py-2 text-sm text-white shadow-sm ring-1 ring-inset ring-gray-300 sm:col-start-1 sm:mt-0",children:["Descargar QR"," ",g.jsx(MO,{id:"GoDownload",size:18})]})]})]})})})]})})},QO="/assets/no-image-c52cb764.png";function OO({selectedCategory:e}){const t=cn(),[n,o]=m.useState([]),[r,i]=m.useState(!0),[l,s]=m.useState(1),[a,c]=m.useState(1),[u,d]=m.useState("<"),[I,C]=m.useState(!1),[f,A]=m.useState({url:"",username:""}),v=async()=>{if(i(!0),e==null||e==="todos")try{const{data:Z}=await t.getAlgolia(a,u);s(Z.totalPages),o(Z.profiles)}catch(Z){console.error("Error fetching user cards:",Z)}else try{const Z=await t.getFilterCategories(e);o(Z.data.profiles)}catch(Z){console.error("Error fetching user cards:",Z)}i(!1)},h=Z=>{i(!0),o([]),c(Z)},p=async Z=>{i(!0),o([]),c(1),Z==""&&(Z="<");try{const{data:G}=await t.getAlgolia(a,Z);d(Z),s(G.totalPages),o(G.profiles)}catch(G){console.error("Error fetching user cards:",G)}};m.useEffect(()=>{v()},[a]);const b=(Z,G)=>{const V=`${window.location.origin}/card?username=${Z}&id=${G}`;window.open(V,"_blank","noreferrer")},y=Z=>{const G=window.location.origin+`/card?username=${Z.username}&id=${Z.id_profile}`;A({url:G,username:Z.title_profile}),C(!0)};return g.jsxs(g.Fragment,{children:[g.jsx(PO,{setOpen:C,open:I,modalInfo:f}),I&&g.jsx("div",{className:"profile-modal-background",onClick:()=>{C(!1)},children:g.jsx("div",{})}),g.jsx("div",{className:"mt-4",children:g.jsx(LO,{className:"mt-5",handleSearchTerm:p,term:u})}),n.length===0?g.jsx(g.Fragment,{children:r?g.jsx("div",{className:"",children:g.jsxs("button",{type:"button",className:" flex mx-auto my-5 lg:my-20 rounded-md bg-gray-600 px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 cursor-not-allowed",disabled:!0,children:[g.jsx(EO,{className:"animate-spin h-5 w-5 text-white mr-4","aria-hidden":"true"}),"Cargando"]})}):g.jsx("div",{className:"no-card",children:g.jsx("p",{children:"No hay usuarios que hagan match con este filtro "})})}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"flex flex-wrap justify-center",children:n==null?void 0:n.map(Z=>g.jsxs("div",{className:" relative  flex w-full  lg:w-[23rem] m-1 h-[350px]  flex-col  rounded-xl backdrop-blur-sm bg-blue-950/10 px-4 text-white shadow-none border-1 border-white/10 hover:border-white/30 hover:cursor-pointer",onClick:({target:G})=>{G.id!="QR_download"&&b(Z.username,Z.id_profile)},children:[g.jsxs("div",{className:"relative flex flex-col items-center gap-4 pt-0 mx-0 mt-4 overflow-hidden text-white bg-transparent shadow-none  bg-clip-border",children:[g.jsx("div",{className:"h-[128px] bg-blue-950/50 flex justify-center overflow-hidden rounded-xl  w-full",children:g.jsx("img",{name:Z.title_profile,className:"h-full object-cover",src:Z.profile_img_url?Z.profile_img_url:QO,alt:Z.title_profile||"No image available"})}),g.jsxs("div",{className:"flex w-full flex-col gap-0.5",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h4",{className:"block font-sans   text-xl antialiased font-semibold leading-snug tracking-normal text-orange-500 text-ellipsis overflow-hidden max-w-[9rem]",children:Z.title_profile.length>18?`${Z.title_profile.substring(0,18)}...`:Z.title_profile}),g.jsx("div",{className:"flex items-center gap-0.5",children:g.jsxs("div",{className:"mt-1 flex items-center gap-x-1.5",children:[g.jsx("div",{className:"flex-none rounded-full bg-emerald-500/20 p-1",children:g.jsx("div",{className:Z.availability_status=="Disponible"?"h-1.5 w-1.5 rounded-full bg-emerald-500":"h-1.5 w-1.5 rounded-full bg-gray-500"})}),g.jsx("p",{className:"text-xs leading-5 text-white",children:Z.availability_status})]})})]}),g.jsx("p",{className:"block font-sans lowercase text-sm antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[10rem]",children:Z.ocupation_role}),g.jsx("p",{className:"block font-sans text-sm lowercase antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[10rem]",children:Z.organization_name})]})]}),g.jsx("div",{className:"flex flex-row  items-end pb-2 w-full justify-end absolute bottom-0  right-0",children:g.jsxs("div",{className:"flex items-center justify-between w-full px-1",children:[g.jsx("div",{className:"flex  flex-row",children:Object.entries(JA(Z.social_media)).map(G=>{if(Z.social_media_v2&&Z.social_media_v2.find(V=>V.name==G[0]))return g.jsx("div",{className:"text-orange-500 text-2xl m-2",children:G[1]},G[0])})}),g.jsxs("div",{children:[localStorage.getItem("is_superuser")=="true"&&g.jsxs("span",{id:"QR_download",onClick:()=>y(Z),className:"z-50 inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-blue-900 ring-1 ring-inset m-1 cursor-pointer",children:["",g.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",version:"1.1",viewBox:"0 0 16 16",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",id:"QR_download",children:g.jsx("path",{id:"QR_download",d:"M5 1h-4v4h4v-4zM6 0v0 6h-6v-6h6zM2 2h2v2h-2zM15 1h-4v4h4v-4zM16 0v0 6h-6v-6h6zM12 2h2v2h-2zM5 11h-4v4h4v-4zM6 10v0 6h-6v-6h6zM2 12h2v2h-2zM7 0h1v1h-1zM8 1h1v1h-1zM7 2h1v1h-1zM8 3h1v1h-1zM7 4h1v1h-1zM8 5h1v1h-1zM7 6h1v1h-1zM7 8h1v1h-1zM8 9h1v1h-1zM7 10h1v1h-1zM8 11h1v1h-1zM7 12h1v1h-1zM8 13h1v1h-1zM7 14h1v1h-1zM8 15h1v1h-1zM15 8h1v1h-1zM1 8h1v1h-1zM2 7h1v1h-1zM0 7h1v1h-1zM4 7h1v1h-1zM5 8h1v1h-1zM6 7h1v1h-1zM9 8h1v1h-1zM10 7h1v1h-1zM11 8h1v1h-1zM12 7h1v1h-1zM13 8h1v1h-1zM14 7h1v1h-1zM15 10h1v1h-1zM9 10h1v1h-1zM10 9h1v1h-1zM11 10h1v1h-1zM13 10h1v1h-1zM14 9h1v1h-1zM15 12h1v1h-1zM9 12h1v1h-1zM10 11h1v1h-1zM12 11h1v1h-1zM13 12h1v1h-1zM14 11h1v1h-1zM15 14h1v1h-1zM10 13h1v1h-1zM11 14h1v1h-1zM12 13h1v1h-1zM13 14h1v1h-1zM10 15h1v1h-1zM12 15h1v1h-1zM14 15h1v1h-1z"})})]}),Z.categories&&g.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-blue-900 ring-1 ring-inset m-1",children:Z.categories.name})]})]})})]},Z.id_profile))}),g.jsx(KO,{totalPages:l,currentPage:a,setCurrentPage:h})]})]})}function fZ(){const e=cn();m.useState([]);const[t,n]=m.useState("todos"),o=qt(),[r,i]=m.useState(!0),{user:l}=m.useContext(kt),s=async()=>{try{const{data:a}=await e.validateUser(),c=a.usuario.id_plan_fk;a.userPayment.stripe_session_status=="open"&&c!=l.id_plan_fk&&(l[c]=6,localStorage.setItem("id_plan",6),window.location.reload())}catch(a){console.error("Error fetching profile:",a)}i(!1)};return m.useEffect(()=>{s()},[o]),r?g.jsx(Tr,{fullScreen:!0}):g.jsx(g.Fragment,{children:g.jsx("div",{className:"md:mx-14 lg:mx-4",children:g.jsx(OO,{selectedCategory:t})})})}function Xt(){const e=qt(),t=n=>e.pathname===n;return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"navbar-container",children:[g.jsx(ai,{to:"/home/",className:`navbar-link ${t("/home")?"active":""}`,children:g.jsxs("div",{className:"navbar-icon-container",children:[g.jsx(HF,{className:"navbar-icon"}),t("/home")||t("/home/")&&g.jsx("div",{className:"active-dot"})]})}),g.jsx(ai,{to:"/perfil/",className:`navbar-link ${t("/profile")?"active":""}`,children:g.jsxs("div",{className:"navbar-icon-container",children:[g.jsx(M9,{className:"navbar-icon"}),t("/perfil/")&&g.jsx("div",{className:"active-dot"})]})}),g.jsx(ai,{to:"/scanner/",className:`navbar-link ${t("/scanner")?"active":""}`,children:g.jsx("div",{className:"navbar-icon-container",children:g.jsxs("div",{className:"navbar-scanner",children:[g.jsx(FF,{className:"navbar-icon"}),t("/scanner/")&&g.jsx("div",{className:"active-dot"})]})})}),g.jsx(ai,{to:"/contacts/",className:`navbar-link ${t("/contacts/")?"active":""}`,children:g.jsxs("div",{className:"navbar-icon-container",children:[g.jsx(PS,{className:"navbar-icon"}),t("/contacts/")&&g.jsx("div",{className:"active-dot"})]})}),g.jsx(ai,{to:"/settings/",className:`navbar-link ${t("/settings/")?"active":""}`,children:g.jsxs("div",{className:"navbar-icon-container",children:[g.jsx(Y9,{className:"navbar-icon"}),t("/settings/")&&g.jsx("div",{className:"active-dot"})]})})]})})}function ma(e){"@babel/helpers - typeof";return ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(e)}function _O(e,t){if(ma(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(ma(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qO(e){var t=_O(e,"string");return ma(t)=="symbol"?t:String(t)}function $O(e,t,n){return t=qO(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e6(e){if(Array.isArray(e))return e}function t6(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,r,i,l,s=[],a=!0,c=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;a=!1}else for(;!(a=(o=i.call(n)).done)&&(s.push(o.value),s.length!==t);a=!0);}catch(u){c=!0,r=u}finally{try{if(!a&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw r}}return s}}function AZ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function n6(e,t){if(e){if(typeof e=="string")return AZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AZ(e,t)}}function o6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r6(e,t){return e6(e)||t6(e,t)||n6(e,t)||o6()}function i6(e,t){if(e==null)return{};var n=Tu(e,t),o,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var aw={exports:{}},De={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt=typeof Symbol=="function"&&Symbol.for,mp=xt?Symbol.for("react.element"):60103,hp=xt?Symbol.for("react.portal"):60106,Jd=xt?Symbol.for("react.fragment"):60107,Nd=xt?Symbol.for("react.strict_mode"):60108,Yd=xt?Symbol.for("react.profiler"):60114,Hd=xt?Symbol.for("react.provider"):60109,Fd=xt?Symbol.for("react.context"):60110,fp=xt?Symbol.for("react.async_mode"):60111,Ed=xt?Symbol.for("react.concurrent_mode"):60111,Kd=xt?Symbol.for("react.forward_ref"):60112,Ld=xt?Symbol.for("react.suspense"):60113,l6=xt?Symbol.for("react.suspense_list"):60120,Md=xt?Symbol.for("react.memo"):60115,Td=xt?Symbol.for("react.lazy"):60116,s6=xt?Symbol.for("react.block"):60121,a6=xt?Symbol.for("react.fundamental"):60117,g6=xt?Symbol.for("react.responder"):60118,c6=xt?Symbol.for("react.scope"):60119;function kn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case mp:switch(e=e.type,e){case fp:case Ed:case Jd:case Yd:case Nd:case Ld:return e;default:switch(e=e&&e.$$typeof,e){case Fd:case Kd:case Td:case Md:case Hd:return e;default:return t}}case hp:return t}}}function gw(e){return kn(e)===Ed}De.AsyncMode=fp;De.ConcurrentMode=Ed;De.ContextConsumer=Fd;De.ContextProvider=Hd;De.Element=mp;De.ForwardRef=Kd;De.Fragment=Jd;De.Lazy=Td;De.Memo=Md;De.Portal=hp;De.Profiler=Yd;De.StrictMode=Nd;De.Suspense=Ld;De.isAsyncMode=function(e){return gw(e)||kn(e)===fp};De.isConcurrentMode=gw;De.isContextConsumer=function(e){return kn(e)===Fd};De.isContextProvider=function(e){return kn(e)===Hd};De.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===mp};De.isForwardRef=function(e){return kn(e)===Kd};De.isFragment=function(e){return kn(e)===Jd};De.isLazy=function(e){return kn(e)===Td};De.isMemo=function(e){return kn(e)===Md};De.isPortal=function(e){return kn(e)===hp};De.isProfiler=function(e){return kn(e)===Yd};De.isStrictMode=function(e){return kn(e)===Nd};De.isSuspense=function(e){return kn(e)===Ld};De.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Jd||e===Ed||e===Yd||e===Nd||e===Ld||e===l6||typeof e=="object"&&e!==null&&(e.$$typeof===Td||e.$$typeof===Md||e.$$typeof===Hd||e.$$typeof===Fd||e.$$typeof===Kd||e.$$typeof===a6||e.$$typeof===g6||e.$$typeof===c6||e.$$typeof===s6)};De.typeOf=kn;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var pZ=Object.getOwnPropertySymbols,u6=Object.prototype.hasOwnProperty,d6=Object.prototype.propertyIsEnumerable;function I6(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function C6(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(o.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(i){r[i]=i}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}C6();var m6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",h6=m6;Function.call.bind(Object.prototype.hasOwnProperty);var f6=h6;function cw(){}function uw(){}uw.resetWarningCache=cw;var A6=function(){function e(o,r,i,l,s,a){if(a!==f6){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:uw,resetWarningCache:cw};return n.PropTypes=n,n};aw.exports=A6();var Pi=aw.exports;function p6(e,t){var n=atob(e);if(t){for(var o=new Uint8Array(n.length),r=0,i=n.length;r<i;++r)o[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(o.buffer))}return n}function b6(e,t,n){var o=t===void 0?null:t,r=n===void 0?!1:n,i=p6(e,r),l=i.indexOf(`
`,10)+1,s=i.substring(l)+(o?"//# sourceMappingURL="+o:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}function y6(e,t,n){var o;return function(i){return o=o||b6(e,t,n),new Worker(o,i)}}var v6=y6("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),Z6=["constraints","onError","onLoad","onScan","resolution","qrArea"];function bZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function yZ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bZ(Object(n),!0).forEach(function(o){$O(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bZ(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var G6=function(){return new v6},vZ=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(n){t.removeTrack(n),n.stop()}),t.getAudioTracks().forEach(function(n){t.removeTrack(n),n.stop()})):t.stop())},Ap=function(t){var n=t.constraints,o=t.onError,r=t.onLoad,i=t.onScan,l=t.resolution,s=t.qrArea,a=i6(t,Z6),c=m.useRef(null),u=m.useRef(null),d=m.useRef(document.createElement("canvas")),I=m.useRef(null),C=m.useRef(),f=m.useState(null),A=r6(f,2),v=A[0],h=A[1],p=m.useRef(!1),b=m.useRef();m.useEffect(function(){b.current=G6();var V=b.current;return V.onmessage=function(S){i&&i(S.data?yZ(yZ({},S.data),{},{canvas:d.current}):null),p.current=!1},function(){V.terminate()}},[i]);var y=JSON.stringify(s),Z=m.useCallback(function(){var V=JSON.parse(y),S=b.current,k=u.current&&u.current.readyState===u.current.HAVE_ENOUGH_DATA;if(!p.current&&k){p.current=!0;var B=u.current.videoWidth,R=u.current.videoHeight,W=B>R?B:R,w=Math.floor(l/W*100)/100;R=Math.floor(w*R),B=Math.floor(w*B),d.current.width=B,d.current.height=R,I.current=d.current.getContext("2d"),I.current.drawImage(u.current,0,0,B,R);var X;V&&V.length===2&&V[0]>0&&V[1]>0?X=I.current.getImageData(Math.floor((B-V[0])/2),Math.floor((R-V[1])/2),V[0],V[1]):X=I.current.getImageData(0,0,B,R),S.postMessage(X)}C.current=requestAnimationFrame(Z)},[l,y]),G=JSON.stringify(n);return m.useEffect(function(){var V=JSON.parse(G),S=!0;return navigator.mediaDevices.getUserMedia(V).then(function(k){if(!S)vZ(k);else{c.current=k;try{u.current&&(u.current.srcObject=k,u.current.setAttribute("playsinline",!0))}catch{h(window.URL.createObjectURL(k))}r&&r(),C.current=requestAnimationFrame(Z)}}).catch(function(k){return S?o(k):null}),function(){cancelAnimationFrame(C.current),S=!1,vZ(c.current),v&&window.URL.revokeObjectURL(v)}},[Z,G,o,r,v]),m.createElement("video",Wl({autoPlay:!0,playsInline:!0,src:v,ref:u},a))};Ap.propTypes={constraints:Pi.object,onError:Pi.func.isRequired,onLoad:Pi.func,onScan:Pi.func.isRequired,resolution:Pi.number,qrArea:Pi.array};Ap.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};function ZZ(){const e=n=>{n&&(window.location.href=n.text),console.log(`Enlace QR: ${JSON.stringify(n)}`)},t=n=>{console.error(n)};return g.jsxs("div",{className:"scanner-container",children:[g.jsx("h2",{children:"Escanea el QR"}),g.jsx(Ap,{onScan:e,onError:t,style:{width:"100%",height:"95%",borderStyle:"dotted",borderColor:"rgba(255, 255, 255, 0.5)",borderWidth:"2px"}})]})}function GZ(){const e=ut(),t=()=>{e("/contacts")},n=()=>{e("/business")},o=()=>{e("/password")},r=()=>{e("/admin")},i=()=>{localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),localStorage.removeItem("id_plan"),e("/login")},l=()=>{e("/upgrade")};return g.jsxs("div",{className:"setting-container",children:[localStorage.getItem("is_superuser")=="true"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"setting-link",onClick:r,children:[g.jsx("div",{className:"setting-icon",children:g.jsx(MV,{})}),g.jsxs("div",{className:"setting-name",children:[g.jsx("h4",{children:"Administrador"}),g.jsx("p",{children:"Opciones de administrador"})]}),g.jsx("div",{className:"setting-goto",children:g.jsx(Ui,{})})]}),g.jsx("div",{className:"separador"})]}),localStorage.getItem("id_plan")==9&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"setting-link",onClick:n,children:[g.jsx("div",{className:"setting-icon",children:g.jsx(H9,{})}),g.jsxs("div",{className:"setting-name",children:[g.jsx("h4",{children:"Business"}),g.jsx("p",{children:"Gestiona tu empresa"})]}),g.jsx("div",{className:"setting-goto",children:g.jsx(Ui,{})})]}),g.jsx("div",{className:"separador"})]}),g.jsxs("div",{className:"setting-link",onClick:t,children:[g.jsx("div",{className:"setting-icon",children:g.jsx(K9,{})}),g.jsxs("div",{className:"setting-name",children:[g.jsx("h4",{children:"Contactos"}),g.jsx("p",{children:"Visualiza tus contactos"})]}),g.jsx("div",{className:"setting-goto",children:g.jsx(Ui,{})})]}),g.jsx("div",{className:"separador"}),g.jsxs("div",{className:"setting-link",onClick:l,children:[g.jsx("div",{className:"setting-icon",children:g.jsx(z3,{})}),g.jsxs("div",{className:"setting-name",children:[g.jsx("h4",{children:"Subscripcin"}),g.jsx("p",{children:"Administra tu subscripcin"})]}),g.jsx("div",{className:"setting-goto",children:g.jsx(Ui,{})})]}),g.jsx("div",{className:"separador"}),g.jsxs("div",{className:"setting-link",onClick:o,children:[g.jsx("div",{className:"setting-icon",children:g.jsx(NF,{})}),g.jsxs("div",{className:"setting-name",children:[g.jsx("h4",{children:"Contrasea"}),g.jsx("p",{children:"Cambia de contrasea"})]}),g.jsx("div",{className:"setting-goto",children:g.jsx(Ui,{})})]}),g.jsx("div",{className:"separador"}),g.jsxs("div",{className:"setting-link",onClick:i,children:[g.jsx("div",{className:"setting-icon",children:g.jsx(LV,{})}),g.jsxs("div",{className:"setting-name",children:[g.jsx("h4",{children:"Cerrar Sesin"}),g.jsx("p",{children:"Te vamos a extraar "})]}),g.jsx("div",{className:"setting-goto",children:g.jsx(Ui,{})})]})]})}const B6="/assets/Shark-482b1a86.svg",BZ=()=>g.jsxs("div",{className:"not-found-view",children:[g.jsx(Ba,{src:B6,className:"shark-container",beforeInjection:e=>{e.classList.add("not-found-shark")}}),g.jsxs("div",{className:"not-found-warning",children:["Cuidado con la aleta!",g.jsx("br",{}),"Estamos trabajando bajo el agua del cdigo para darle un nuevo aspecto y funcionalidades impresionantes a Know Me."]})]});function SZ(){const e="https://api.knowmeapp.com",{user:t}=m.useContext(kt),n=localStorage.getItem("token"),[o,r]=m.useState({id_user_fk:parseInt(t.id),name:"",email:"",phone:"",company:"",position:"",url_web_company:"",notes:""}),i=s=>{const{name:a,value:c}=s.target;r({...o,[a]:c})},l=async s=>{s.preventDefault();try{await Ie.post(`${e}/api/contact`,{id_user_fk:parseInt(t.id),name:o.name,email:o.email,phone:o.phone,company:o.company,position:o.position,url_web_company:o.url_web_company,notes:o.notes},{headers:{"x-token":n}}),xe.success("Contacto guardado exitosamente"),r({id_user_fk:parseInt(t.id),name:"",email:"",phone:"",company:"",position:"",url_web_company:"",notes:""})}catch(a){xe.error("Error al crear contacto, por favor intenta de nuevo"),console.error("Error al enviar el formulario:",a)}};return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"contact-container",children:[g.jsx(Rn,{richColors:!0,position:"top-right"}),g.jsx("div",{className:"contact-icon-container",children:g.jsx(Ji,{src:kd,size:100})}),g.jsx("h3",{children:"Crea un nuevo contacto"}),g.jsx("p",{children:"Aade un nuevo contacto y descubre la mejor forma de mantener tu agenda en lnea siempre actualizada y a mano!"}),g.jsxs("div",{className:"contact-form-container",children:[g.jsx("div",{className:"title-contact-data",children:g.jsx("p",{children:"Datos de contacto "})}),g.jsx("div",{className:"contact-form",children:g.jsxs("form",{onSubmit:l,children:[g.jsx("div",{children:g.jsx("label",{children:"Nombre:"})}),g.jsx("input",{type:"text",name:"name",className:"contact-input",value:o.name,onChange:i}),g.jsx("div",{children:g.jsx("label",{children:"Correo:"})}),g.jsx("input",{type:"email",name:"email",className:"contact-input",value:o.email,onChange:i}),g.jsx("div",{children:g.jsx("label",{children:"Tlefono:"})}),g.jsx("input",{type:"tel",name:"phone",className:"contact-input",value:o.phone,onChange:i}),g.jsx("div",{children:g.jsx("label",{children:"Empresa:"})}),g.jsx("input",{type:"text",name:"company",className:"contact-input",value:o.company,onChange:i}),g.jsx("div",{children:g.jsx("label",{children:"Cargo:"})}),g.jsx("input",{type:"text",name:"position",className:"contact-input",value:o.position,onChange:i}),g.jsx("div",{children:g.jsx("label",{children:"Sitio Web:"})}),g.jsx("input",{type:"text",name:"url_web_company",className:"contact-input",value:o.url_web_company,onChange:i}),g.jsx("div",{children:g.jsx("label",{children:"Notas:"})}),g.jsx("textarea",{name:"notes",className:"contact-input",value:o.notes,onChange:i}),g.jsx("div",{className:"perfil-guardar",children:g.jsx(mt,{variant:"primary",size:"lg",type:"submit",children:"Guardar cambios"})})]})})]})]})})}function VZ(){const[e,t]=m.useState([]),n="https://api.knowmeapp.com",o=localStorage.getItem("token"),{user:r}=m.useContext(kt),i=ut(),[l,s]=m.useState(null),[a,c]=m.useState(!1),[u,d]=m.useState(!1),[I,C]=m.useState({id_contact_fk:null,id_profile_fk:4,id_user_fk:r.id,title:"",id_task_type_fk:1,details:"",cantidad:1,recurrence:"mes",start_date:"",end_date:"",send_whatsapp:0,send_email:1}),f=b=>{const{name:y,value:Z}=b.target;C({...I,[y]:Z})},A=async b=>{b.preventDefault();try{console.log(`Datos que voy a enviar ${JSON.stringify(I)}`),console.log(`user ${JSON.stringify(r)}`)}catch(y){console.error("Error al crear la tarea:",y)}};m.useEffect(()=>{(async()=>{try{const y=await Ie.get(`${n}/api/contact/user/${r.id}`,{headers:{"x-token":o}});t(y.data.contacts)}catch(y){console.error("Error fetching contacts:",y)}})()},[]);const v=()=>{i("/addContact")},h=async b=>{s(b);try{const y=await Ie.get(`${n}/api/contact_history/contact_detail/${b.id}`,{headers:{"x-token":o}});console.log(JSON.stringify(y.data))}catch(y){console.error("Error fetching contacts:",y)}c(!0)},p=()=>{c(!1)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"agenda-container",children:[g.jsxs("div",{className:"agenda-header",children:[g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Bienvenid@ a tu agenda de contactos"}),g.jsx("div",{className:"my-4 flex space-x-2",children:g.jsx(mt,{variant:"primary",size:"sm",onClick:v,className:"inline-flex items-center rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500",children:"Agregar Contacto"})})]}),g.jsx("div",{children:e.length===0?g.jsx(g.Fragment,{children:g.jsxs("div",{className:"relative flex items-center gap-x-4 mt-10 bg-blue-500/10 rounded-md p-10 w-70 border-dashed md:w-96",children:[g.jsx("img",{src:kd,alt:"",className:"h-10 w-10 rounded-full bg-gray-50"}),g.jsx("div",{className:"text-sm leading-6",children:g.jsx("p",{className:"text-white",children:"Aun no tienes contactos agregados"})})]})}):g.jsx(g.Fragment,{children:g.jsx("div",{className:"flex flex-wrap items-center",children:e==null?void 0:e.map(b=>g.jsx("div",{className:"relative flex w-full max-w-[26rem] flex-col lg:flex-grow rounded-xl backdrop-blur-sm bg-blue-950/10 m-2 px-4 text-white shadow-none border-1 border-white/10 hover:border-white/30 hover:cursor-pointer pb-4 min-h-40",onClick:()=>h(b),children:g.jsxs("div",{className:"relative flex items-center gap-4 pt-0 mx-0 mt-4 overflow-hidden text-white bg-transparent shadow-none rounded-xl bg-clip-border",children:[g.jsx("div",{className:"h-[58px] w-[70px]",children:g.jsx(Ji,{name:b.title_profile,size:"58",src:b.profile_img_url})}),g.jsxs("div",{className:"flex w-full flex-col gap-0.5",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h4",{className:"block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-orange-500 text-ellipsis overflow-hidden max-w-[9rem]",children:b.name}),g.jsx("div",{className:"flex items-center gap-0.5",children:g.jsxs("div",{className:"mt-1 flex items-center gap-x-1.5",children:[g.jsx("div",{className:"flex-none rounded-full bg-emerald-500/20 p-1",children:g.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"})}),g.jsx("p",{className:"text-xs leading-5 text-white",children:"Contacto"})]})})]}),g.jsx("p",{className:"block font-sans text-base antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[10rem]",children:b.position})]})]})},b.id_contact_detail))})})})]}),g.jsxs(ci,{show:a,onHide:p,centered:!0,scrollable:!0,children:[g.jsx(ES,{closeButton:!0,closeVariant:"white",className:"bg-[#151f3e]"}),g.jsx(ci.Body,{className:"contact-modal-card",children:l&&g.jsxs("div",{className:"m-4",children:[g.jsxs("div",{className:"modal-contact-header",children:[g.jsx("div",{className:"user-avatar-card",children:g.jsx(Ji,{name:l.name,size:"100",src:""})}),g.jsx("div",{className:"my-2",children:g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:l.name})})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-base font-semibold text-white",children:"Correo electrnico"}),g.jsxs("div",{className:"flex m-2",children:[g.jsx(Ra,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsx("a",{href:`mailto:${l.email}`,className:"contact-modal-content-a",children:l.email})]})]}),g.jsx("div",{className:"contact-modal-separador"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-base font-semibold text-white",children:"Telfono"}),g.jsxs("div",{className:"flex m-2",children:[g.jsx(nu,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsx("a",{href:`tel:${l.phone}`,className:"contact-modal-content-a",children:l.phone})]})]}),g.jsx("div",{className:"contact-modal-separador"}),g.jsx("p",{className:"text-base font-semibold text-white",children:"Empresa"}),g.jsxs("div",{className:"flex m-2",children:[g.jsx(WA,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsx("p",{className:"contact-modal-content",children:l.company})]}),g.jsx("div",{className:"contact-modal-separador"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-base font-semibold text-white",children:"Cargo"}),g.jsxs("div",{className:"flex m-2",children:[g.jsx(OF,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsx("p",{className:"contact-modal-content",children:l.position})]})]}),g.jsx("div",{className:"contact-modal-separador"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-base font-semibold text-white",children:"Sitio Web"}),g.jsxs("div",{className:"flex m-2",children:[g.jsx(ed,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsx("p",{className:"contact-modal-content",children:l.url_web_company!=""?g.jsx(g.Fragment,{children:g.jsx("a",{href:`https://${l.url_web_company}`,className:"contact-modal-content-a",target:"_blank",rel:"noopener noreferrer",children:l.url_web_company})}):g.jsxs(g.Fragment,{children:[" ",g.jsx("p",{children:"No hay web registrada"})]})})]})]}),g.jsx("div",{className:"contact-modal-separador"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-base font-semibold text-white",children:"Notas"}),g.jsxs("div",{className:"flex m-2",children:[g.jsx(rE,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),g.jsxs("p",{className:"contact-modal-content",children:[" ",l.notes!=""?g.jsx(g.Fragment,{children:g.jsx("p",{children:l.notes})}):g.jsxs(g.Fragment,{children:[" ",g.jsx("p",{children:"No hay nota registrada"})]})]})]})]}),g.jsx("div",{className:"contact-modal-separador"}),localStorage.getItem("id_plan")!=6&&g.jsx(mt,{variant:"primary",size:"sm",onClick:()=>{d(!0),I.id_contact_fk=l.id_contact,p()},className:"inline-flex items-center rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500",children:"Crear Tarea"})]})})]}),g.jsx(Vt,{appear:!0,show:u,as:m.Fragment,children:g.jsxs(Zn,{as:"div",className:"relative z-10",onClose:()=>d(!1),children:[g.jsx(Vt.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),g.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:g.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:g.jsx(Vt.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:g.jsxs(Zn.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[g.jsx(Zn.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Crear nueva tarea"}),g.jsxs("form",{onSubmit:A,children:[g.jsx("div",{className:"mt-2",children:g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Ttulo",g.jsx("input",{type:"text",name:"title",className:"mt-1 block w-full rounded-md bg-white p-2 border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",value:I.title,onChange:f,required:!0})]})}),g.jsx("div",{className:"mt-2",children:g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Detalles",g.jsx("textarea",{name:"details",rows:"3",className:"mt-1 block w-full rounded-md bg-white p-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:I.details,onChange:f,required:!0})]})}),g.jsx("div",{className:"mt-2",children:g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Fecha de Inicio",g.jsx("input",{type:"date",name:"start_date",className:"mt-1 block w-full rounded-md bg-white p-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:I.start_date,onChange:f,required:!0})]})}),g.jsx("div",{className:"mt-2",children:g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Fecha de Fin",g.jsx("input",{type:"date",name:"end_date",className:"mt-1 block w-full rounded-md bg-white p-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:I.end_date,onChange:f,required:!0})]})}),g.jsxs("div",{className:"mt-4",children:[g.jsx("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-orange-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Guardar"}),g.jsx("button",{type:"button",className:"ml-2 inline-flex justify-center rounded-md border border-transparent bg-gray-300 px-4 py-2 text-sm font-medium text-black shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",onClick:()=>d(!1),children:"Cancelar"})]})]})]})})})})]})})]})}const pp=()=>{const e="https://api.knowmeapp.com",t=localStorage.getItem("token"),{user:n}=m.useContext(kt);return{getOrgUser:async()=>{try{let s=await Ie.get(`${e}/api/org_users_detail/owner/${n.id}`,{headers:{"x-token":t}});if(s.data.ok){const{orgUsersDetail:a}=s.data;return s=await Ie.get(`${e}/api/organization/${a.id_organization_fk}`,{headers:{"x-token":t}}),s={owner:a.owner,...s},s}else return s}catch(s){return console.error("Error fetching organization user details:",s),s.response&&s.response.status===400?{ok:!1,msg:s.response.data.msg||"Error desconocido"}:{ok:!1,msg:"Error en la solicitud, por favor intenta de nuevo ms tarde."}}},createOrg:async s=>{let a;if(a=await Ie.post(`${e}/api/organization`,s,{headers:{"x-token":t}}),a.data.ok){const{organization:c}=a.data,u={id_organization_fk:c.id_organization,id_user_fk:n.id,owner:!0};return a=await Ie.post(`${e}/api/org_users_detail`,u,{headers:{"x-token":t}}),a}return a},updateOrg:async s=>await Ie.put(`${e}/api/organization/${s.id_organization}`,s,{headers:{"x-token":t}}),getUsersTeamOrg:async()=>{let s;return s=await Ie.get(`${e}/api/user/owner/${n.id}`,{headers:{"x-token":t}}),s.data.ok,s}}},S6=e=>{const{userOrg:t}=e,[n,o]=m.useState(null),[r,i]=m.useState(null),l=ut(),s=()=>{l("/info_org",{state:{userOrg:t}})};return m.useEffect(()=>{o(t.logo_url??null),i(t.cover_url??null)},[]),g.jsxs("div",{className:"bg-gray-900/50 rounded-lg mt-2 pt-6 px-10 w-full max-w-3xl",children:[g.jsxs("div",{className:"relative items-center gap-x-3 h-36 mb-4",children:[n?g.jsx("img",{src:n,alt:"Selected",className:"h-16 w-16 rounded-full border-white border-2 object-cover absolute bottom-0 left-5 z-10"}):g.jsx(jV,{className:"h-16 w-16 text-white absolute bottom-0 left-5 z-10","aria-hidden":"true"}),g.jsx("div",{className:"rounded-lg w-full h-28 absolute top-0 left-0 z-0 overflow-hidden",children:g.jsx("div",{className:"front-page",style:{backgroundImage:`url("${r??xl}")`}})})]}),g.jsxs("div",{className:"px-4 sm:px-0",children:[g.jsx("h3",{className:"text-base font-semibold leading-7 text-white",children:t.name}),g.jsx("p",{className:"mt-1 max-w-2xl text-sm leading-6 text-white",children:t.industry})]}),g.jsxs("div",{className:"mt-6 border-t border-blue-100/20",children:[g.jsxs("dl",{className:"divide-y divide-blue-100/20",children:[g.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[g.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Razn social"}),g.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.business_name})]}),g.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[g.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Domicilio fiscal"}),g.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.fiscal_address})]}),g.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[g.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Telfono"}),g.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.phone})]}),g.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[g.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Correo"}),g.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.email})]}),g.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[g.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Web"}),g.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.website})]})]}),g.jsx("div",{className:" py-4",children:g.jsx("button",{type:"button",onClick:s,disabled:!t.owner,className:`inline-flex items-center rounded-md  px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${t.owner??!1?"bg-orange-500 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500 hover:bg-orange-600 cursor-pointer":"bg-gray-500 focus-visible:outline-gray-600 border-gray-600 hover:border-gray-500 hover:bg-gray-600 cursor-not-allowed"}`,children:"Actualizar informacin"})})]})]})};function RZ(){const[e,t]=m.useState({});localStorage.getItem("token"),m.useContext(kt);const[n,o]=m.useState(!0),r=ut(),i=pp();m.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:c,owner:u}=await i.getOrgUser();c.ok?t({...c.organization,owner:u}):(toast.error("No se encontr la organizacin."),t({}))}catch(c){if(console.error("Error fetching organization:",c),c.response&&c.response.status===400){const u=c.response.data.msg||"Error desconocido";toast.error(u)}else toast.error("Error en la solicitud, por favor intenta de nuevo ms tarde.");t({})}finally{o(!1)}},s=()=>{r("/team_org",{state:{userOrg:e}})},a=()=>{r("/info_org")};return n?g.jsx(g.Fragment,{children:g.jsx(Tr,{fullScreen:!0})}):g.jsx(g.Fragment,{children:g.jsxs("div",{className:"agenda-container",children:[g.jsxs("div",{className:"agenda-header",children:[g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Tu empresa"}),e.name?g.jsxs("div",{className:"my-4",children:[g.jsx(S6,{userOrg:e}),g.jsx("div",{className:"my-4 max-w-3xl",children:g.jsxs("div",{className:"bg-gray-900/50 px-10 rounded-lg mt-2 pt-6",children:[g.jsxs("div",{className:"sm:px-0",children:[g.jsxs("h3",{className:"text-base font-semibold leading-7 text-white",children:["Team: ",e.name]}),g.jsx("p",{className:"mt-1 max-w-2xl text-sm leading-6 text-white",children:"Gestiona los miembros de tu organizacin."})]}),g.jsx("div",{className:"py-4",children:g.jsx("button",{type:"button",onClick:s,disabled:!e.owner,className:`inline-flex items-center rounded-md  px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${e.owner??!1?"bg-orange-500 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500 hover:bg-orange-600 cursor-pointer":"bg-gray-500 focus-visible:outline-gray-600 border-gray-600 hover:border-gray-500 hover:bg-gray-600 cursor-not-allowed"}`,children:"Gestionar usuarios"})})]})})]}):g.jsx("div",{className:"my-4",children:g.jsxs("div",{className:"bg-gray-900/50 rounded-lg mt-2 pt-6",children:[g.jsxs("div",{className:"px-4 sm:px-0",children:[g.jsx("h3",{className:"text-base font-semibold leading-7 text-white",children:"No tienes una organizacin an "}),g.jsx("p",{className:"mt-1 max-w-2xl text-sm leading-6 text-white",children:"Completa los datos para tu organizacin y empieza a crear usuarios."})]}),g.jsx("div",{className:" p-4",children:g.jsx("button",{type:"button",onClick:a,disabled:localStorage.getItem(!1),className:`inline-flex items-center rounded-md  px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${localStorage.getItem("id_plan")==="9"?"bg-orange-500 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500 hover:bg-orange-600 cursor-pointer":"bg-gray-500 focus-visible:outline-gray-600 border-gray-600 hover:border-gray-500 hover:bg-gray-600 cursor-not-allowed"}`,children:"Completa el registro de tu organizacin"})})]})})]}),g.jsx("div",{className:"h-40"})]})})}function V6(){const e="https://api.knowmeapp.com",[t,n]=m.useState({email:""}),o=ut(),[r,i]=m.useState(""),l=a=>{n({...t,[a.target.name]:a.target.value})},s=async a=>{a.preventDefault(),i("");try{const c=await Ie.post(`${e}/api/auth/request-reset`,t);i(""),c.status===200&&o("/emailSent")}catch(c){console.error("Error al enviar el formulario:",c),i(`El email ${t.email} no esta registrado`)}};return g.jsxs(g.Fragment,{children:[g.jsx(mA,{className:"registro-back",size:33,color:"#FD6202",onClick:()=>{o("/login")}}),g.jsxs("div",{className:"forgot-container max-w-5xl mx-auto",children:[g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Recupera tu cuenta"}),g.jsx("p",{children:"Cul es tu correo electrnico?"}),g.jsx("form",{onSubmit:s,className:"form-forget",children:g.jsxs("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-3",children:[g.jsxs("div",{className:"col-span-full",children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Correo:"}),g.jsx("input",{type:"email",name:"email",id:"email",className:"block w-full rounded-md border-0 p-2 bg-white text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-orange-600 sm:text-sm sm:leading-6",value:t.email,onChange:l,placeholder:"correo electrnico"}),g.jsx("div",{className:"error-mail",children:r})]}),g.jsx("div",{className:"sm:col-span-3 flex items-end justify-end",children:g.jsx("button",{type:"submit",className:"inline-flex items-center rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Restablecer Contrasea"})})]})})]})]})}function R6(){const e=ut();return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"emailSent-container max-w-5xl mx-auto",children:[g.jsx("h3",{className:"text-base font-semibold leading-7 text-white ",children:"Se envi el correo electrnico"}),g.jsx("p",{className:"py-2",children:"Enviamos un correo electrnico. Si este correo est vinculado a una cuenta Know Me, podrs restablecer tu contrasea."}),g.jsx("div",{className:"backtohome hover:text-orange-500",onClick:()=>{e("/login/")},children:"Volver al inicio"})]})})}function W6(){const e="https://api.knowmeapp.com",[t,n]=m.useState(!1),[o,r]=m.useState({newPassword:"",token:""}),i=ut(),[l,s]=m.useState(""),a=26,c=qt();m.useEffect(()=>{const f=new URLSearchParams(c.search).get("token");f&&r({...o,token:f})},[c.search]);const u=()=>{n(!t)},d=C=>{r({...o,[C.target.name]:C.target.value})},I=async C=>{if(C.preventDefault(),s(""),o.newPassword!==o.confirmPassword){s("Las contraseas no coinciden");return}try{const f=await Ie.post(`${e}/api/auth/reset`,o);s(""),f.status===200&&i("/login")}catch(f){console.error("Error al enviar el formulario:",f),s("Ocurrio un problema por favor intenta de nuevo")}};return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"forgot-container",children:[g.jsx("h3",{children:"Ingresa tu nueva contrasea"}),g.jsx("p",{}),g.jsxs("form",{onSubmit:I,className:"form-forget",children:[g.jsxs("div",{children:[g.jsx("div",{children:g.jsx("label",{children:"Contrasea:"})}),g.jsxs("div",{className:"login-password",children:[g.jsx("input",{type:t?"text":"password",className:"contact-input-recover",placeholder:"******",value:o.newPassword,name:"newPassword",onChange:d}),t?g.jsx(xi,{size:a,color:"#fff",className:"eye-icon",onClick:u}):g.jsx(ki,{size:a,color:"#fff",className:"eye-icon",onClick:u})]})]}),g.jsxs("div",{className:"mt-5",children:[g.jsx("div",{children:g.jsx("label",{children:"Reingresa Contrasea:"})}),g.jsxs("div",{className:"login-password",children:[g.jsx("input",{type:t?"text":"password",className:"contact-input-recover",placeholder:"******",name:"confirmPassword",onChange:d}),t?g.jsx(xi,{size:a,color:"#fff",className:"eye-icon",onClick:u}):g.jsx(ki,{size:a,color:"#fff",className:"eye-icon",onClick:u})]})]}),g.jsx("div",{className:"error-mail",children:l}),g.jsx("div",{children:g.jsx("button",{type:"submit",className:"forgot-btn",children:"Restablecer Contrasea"})})]})]})})}var Dh={exports:{}},kg={exports:{}},IC={},WZ;function dw(){return WZ||(WZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,s){for(var a in s)Object.defineProperty(l,a,{enumerable:!0,get:s[a]})}t(e,{assign:function(){return i},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return r}});function n(l){const s={};return l.forEach((a,c)=>{typeof s[c]>"u"?s[c]=a:Array.isArray(s[c])?s[c].push(a):s[c]=[s[c],a]}),s}function o(l){return typeof l=="string"||typeof l=="number"&&!isNaN(l)||typeof l=="boolean"?String(l):""}function r(l){const s=new URLSearchParams;return Object.entries(l).forEach(a=>{let[c,u]=a;Array.isArray(u)?u.forEach(d=>s.append(c,o(d))):s.set(c,o(u))}),s}function i(l){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return a.forEach(u=>{Array.from(u.keys()).forEach(d=>l.delete(d)),u.forEach((d,I)=>l.append(I,d))}),l}}(IC)),IC}var CC={},wZ;function Iw(){return wZ||(wZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,c){for(var u in c)Object.defineProperty(a,u,{enumerable:!0,get:c[u]})}t(e,{formatUrl:function(){return i},formatWithValidation:function(){return s},urlObjectKeys:function(){return l}});const o=Ca._(dw()),r=/https?|ftp|gopher|file/;function i(a){let{auth:c,hostname:u}=a,d=a.protocol||"",I=a.pathname||"",C=a.hash||"",f=a.query||"",A=!1;c=c?encodeURIComponent(c).replace(/%3A/i,":")+"@":"",a.host?A=c+a.host:u&&(A=c+(~u.indexOf(":")?"["+u+"]":u),a.port&&(A+=":"+a.port)),f&&typeof f=="object"&&(f=String(o.urlQueryToSearchParams(f)));let v=a.search||f&&"?"+f||"";return d&&!d.endsWith(":")&&(d+=":"),a.slashes||(!d||r.test(d))&&A!==!1?(A="//"+(A||""),I&&I[0]!=="/"&&(I="/"+I)):A||(A=""),C&&C[0]!=="#"&&(C="#"+C),v&&v[0]!=="?"&&(v="?"+v),I=I.replace(/[?#]/g,encodeURIComponent),v=v.replace("#","%23"),""+d+A+I+v+C}const l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function s(a){return i(a)}}(CC)),CC}var mC={},kZ;function w6(){return kZ||(kZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"omit",{enumerable:!0,get:function(){return t}});function t(n,o){const r={};return Object.keys(n).forEach(i=>{o.includes(i)||(r[i]=n[i])}),r}}(mC)),mC}var hC={},xZ;function jd(){return xZ||(xZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(y,Z){for(var G in Z)Object.defineProperty(y,G,{enumerable:!0,get:Z[G]})}t(e,{DecodeError:function(){return f},MiddlewareNotFoundError:function(){return p},MissingStaticPage:function(){return h},NormalizeError:function(){return A},PageNotFoundError:function(){return v},SP:function(){return I},ST:function(){return C},WEB_VITALS:function(){return n},execOnce:function(){return o},getDisplayName:function(){return a},getLocationOrigin:function(){return l},getURL:function(){return s},isAbsoluteUrl:function(){return i},isResSent:function(){return c},loadGetInitialProps:function(){return d},normalizeRepeatedSlashes:function(){return u},stringifyError:function(){return b}});const n=["CLS","FCP","FID","INP","LCP","TTFB"];function o(y){let Z=!1,G;return function(){for(var V=arguments.length,S=new Array(V),k=0;k<V;k++)S[k]=arguments[k];return Z||(Z=!0,G=y(...S)),G}}const r=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=y=>r.test(y);function l(){const{protocol:y,hostname:Z,port:G}=window.location;return y+"//"+Z+(G?":"+G:"")}function s(){const{href:y}=window.location,Z=l();return y.substring(Z.length)}function a(y){return typeof y=="string"?y:y.displayName||y.name||"Unknown"}function c(y){return y.finished||y.headersSent}function u(y){const Z=y.split("?");return Z[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(Z[1]?"?"+Z.slice(1).join("?"):"")}async function d(y,Z){const G=Z.res||Z.ctx&&Z.ctx.res;if(!y.getInitialProps)return Z.ctx&&Z.Component?{pageProps:await d(Z.Component,Z.ctx)}:{};const V=await y.getInitialProps(Z);if(G&&c(G))return V;if(!V){const S='"'+a(y)+'.getInitialProps()" should resolve to an object. But found "'+V+'" instead.';throw new Error(S)}return V}const I=typeof performance<"u",C=I&&["mark","measure","getEntriesByName"].every(y=>typeof performance[y]=="function");class f extends Error{}class A extends Error{}class v extends Error{constructor(Z){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+Z}}class h extends Error{constructor(Z,G){super(),this.message="Failed to load static file for page: "+Z+" "+G}}class p extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(y){return JSON.stringify({message:y.message,stack:y.stack})}}(hC)),hC}var xg={exports:{}},fC={},XZ;function Cw(){return XZ||(XZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"removeTrailingSlash",{enumerable:!0,get:function(){return t}});function t(n){return n.replace(/\/$/,"")||"/"}}(fC)),fC}var AC={},JZ;function bp(){return JZ||(JZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"parsePath",{enumerable:!0,get:function(){return t}});function t(n){const o=n.indexOf("#"),r=n.indexOf("?"),i=r>-1&&(o<0||r<o);return i||o>-1?{pathname:n.substring(0,i?r:o),query:i?n.substring(r,o>-1?o:void 0):"",hash:o>-1?n.slice(o):""}:{pathname:n,query:"",hash:""}}}(AC)),AC}var NZ;function zd(){return NZ||(NZ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return r}});const n=Cw(),o=bp(),r=i=>{if(!i.startsWith("/")||{}.__NEXT_MANUAL_TRAILING_SLASH)return i;const{pathname:l,query:s,hash:a}=(0,o.parsePath)(i);return{}.__NEXT_TRAILING_SLASH?/\.[^/]+\/?$/.test(l)?""+(0,n.removeTrailingSlash)(l)+s+a:l.endsWith("/")?""+l+s+a:l+"/"+s+a:""+(0,n.removeTrailingSlash)(l)+s+a};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(xg,xg.exports)),xg.exports}var pC={},Xg={exports:{}},bC={},YZ;function mw(){return YZ||(YZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"pathHasPrefix",{enumerable:!0,get:function(){return n}});const t=bp();function n(o,r){if(typeof o!="string")return!1;const{pathname:i}=(0,t.parsePath)(o);return i===r||i.startsWith(r+"/")}}(bC)),bC}var HZ;function k6(){return HZ||(HZ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hasBasePath",{enumerable:!0,get:function(){return r}});const n=mw(),o={}.__NEXT_ROUTER_BASEPATH||"";function r(i){return(0,n.pathHasPrefix)(i,o)}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Xg,Xg.exports)),Xg.exports}var FZ;function hw(){return FZ||(FZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isLocalURL",{enumerable:!0,get:function(){return o}});const t=jd(),n=k6();function o(r){if(!(0,t.isAbsoluteUrl)(r))return!0;try{const i=(0,t.getLocationOrigin)(),l=new URL(r,i);return l.origin===i&&(0,n.hasBasePath)(l.pathname)}catch{return!1}}}(pC)),pC}var yC={},vC={},EZ;function x6(){return EZ||(EZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getSortedRoutes",{enumerable:!0,get:function(){return n}});class t{insert(r){this._insert(r.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(r){r===void 0&&(r="/");const i=[...this.children.keys()].sort();this.slugName!==null&&i.splice(i.indexOf("[]"),1),this.restSlugName!==null&&i.splice(i.indexOf("[...]"),1),this.optionalRestSlugName!==null&&i.splice(i.indexOf("[[...]]"),1);const l=i.map(s=>this.children.get(s)._smoosh(""+r+s+"/")).reduce((s,a)=>[...s,...a],[]);if(this.slugName!==null&&l.push(...this.children.get("[]")._smoosh(r+"["+this.slugName+"]/")),!this.placeholder){const s=r==="/"?"/":r.slice(0,-1);if(this.optionalRestSlugName!=null)throw new Error('You cannot define a route with the same specificity as a optional catch-all route ("'+s+'" and "'+s+"[[..."+this.optionalRestSlugName+']]").');l.unshift(s)}return this.restSlugName!==null&&l.push(...this.children.get("[...]")._smoosh(r+"[..."+this.restSlugName+"]/")),this.optionalRestSlugName!==null&&l.push(...this.children.get("[[...]]")._smoosh(r+"[[..."+this.optionalRestSlugName+"]]/")),l}_insert(r,i,l){if(r.length===0){this.placeholder=!1;return}if(l)throw new Error("Catch-all must be the last part of the URL.");let s=r[0];if(s.startsWith("[")&&s.endsWith("]")){let d=function(I,C){if(I!==null&&I!==C)throw new Error("You cannot use different slug names for the same dynamic path ('"+I+"' !== '"+C+"').");i.forEach(f=>{if(f===C)throw new Error('You cannot have the same slug name "'+C+'" repeat within a single dynamic path');if(f.replace(/\W/g,"")===s.replace(/\W/g,""))throw new Error('You cannot have the slug names "'+f+'" and "'+C+'" differ only by non-word symbols within a single dynamic path')}),i.push(C)};var a=d;let c=s.slice(1,-1),u=!1;if(c.startsWith("[")&&c.endsWith("]")&&(c=c.slice(1,-1),u=!0),c.startsWith("...")&&(c=c.substring(3),l=!0),c.startsWith("[")||c.endsWith("]"))throw new Error("Segment names may not start or end with extra brackets ('"+c+"').");if(c.startsWith("."))throw new Error("Segment names may not start with erroneous periods ('"+c+"').");if(l)if(u){if(this.restSlugName!=null)throw new Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+r[0]+'" ).');d(this.optionalRestSlugName,c),this.optionalRestSlugName=c,s="[[...]]"}else{if(this.optionalRestSlugName!=null)throw new Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+r[0]+'").');d(this.restSlugName,c),this.restSlugName=c,s="[...]"}else{if(u)throw new Error('Optional route parameters are not yet supported ("'+r[0]+'").');d(this.slugName,c),this.slugName=c,s="[]"}}this.children.has(s)||this.children.set(s,new t),this.children.get(s)._insert(r.slice(1),i,l)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(o){const r=new t;return o.forEach(i=>r.insert(i)),r.smoosh()}}(vC)),vC}var ZC={},GC={},BC={},SC={},KZ;function X6(){return KZ||(KZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ensureLeadingSlash",{enumerable:!0,get:function(){return t}});function t(n){return n.startsWith("/")?n:"/"+n}}(SC)),SC}var VC={},LZ;function J6(){return LZ||(LZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,l){for(var s in l)Object.defineProperty(i,s,{enumerable:!0,get:l[s]})}t(e,{DEFAULT_SEGMENT_KEY:function(){return r},PAGE_SEGMENT_KEY:function(){return o},isGroupSegment:function(){return n}});function n(i){return i[0]==="("&&i.endsWith(")")}const o="__PAGE__",r="__DEFAULT__"}(VC)),VC}var MZ;function N6(){return MZ||(MZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,s){for(var a in s)Object.defineProperty(l,a,{enumerable:!0,get:s[a]})}t(e,{normalizeAppPath:function(){return r},normalizeRscURL:function(){return i}});const n=X6(),o=J6();function r(l){return(0,n.ensureLeadingSlash)(l.split("/").reduce((s,a,c,u)=>!a||(0,o.isGroupSegment)(a)||a[0]==="@"||(a==="page"||a==="route")&&c===u.length-1?s:s+"/"+a,""))}function i(l){return l.replace(/\.rsc($|\?)/,"$1")}}(BC)),BC}var TZ;function fw(){return TZ||(TZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,s){for(var a in s)Object.defineProperty(l,a,{enumerable:!0,get:s[a]})}t(e,{INTERCEPTION_ROUTE_MARKERS:function(){return o},extractInterceptionRouteInformation:function(){return i},isInterceptionRouteAppPath:function(){return r}});const n=N6(),o=["(..)(..)","(.)","(..)","(...)"];function r(l){return l.split("/").find(s=>o.find(a=>s.startsWith(a)))!==void 0}function i(l){let s,a,c;for(const u of l.split("/"))if(a=o.find(d=>u.startsWith(d)),a){[s,c]=l.split(a,2);break}if(!s||!a||!c)throw new Error(`Invalid interception route: ${l}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(s=(0,n.normalizeAppPath)(s),a){case"(.)":s==="/"?c=`/${c}`:c=s+"/"+c;break;case"(..)":if(s==="/")throw new Error(`Invalid interception route: ${l}. Cannot use (..) marker at the root level, use (.) instead.`);c=s.split("/").slice(0,-1).concat(c).join("/");break;case"(...)":c="/"+c;break;case"(..)(..)":const u=s.split("/");if(u.length<=2)throw new Error(`Invalid interception route: ${l}. Cannot use (..)(..) marker at the root level or one level up.`);c=u.slice(0,-2).concat(c).join("/");break;default:throw new Error("Invariant: unexpected marker")}return{interceptingRoute:s,interceptedRoute:c}}}(GC)),GC}var jZ;function Y6(){return jZ||(jZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isDynamicRoute",{enumerable:!0,get:function(){return o}});const t=fw(),n=/\/\[[^/]+?\](?=\/|$)/;function o(r){return(0,t.isInterceptionRouteAppPath)(r)&&(r=(0,t.extractInterceptionRouteInformation)(r).interceptedRoute),n.test(r)}}(ZC)),ZC}var zZ;function H6(){return zZ||(zZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(r,i){for(var l in i)Object.defineProperty(r,l,{enumerable:!0,get:i[l]})}t(e,{getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return o.isDynamicRoute}});const n=x6(),o=Y6()}(yC)),yC}var RC={},WC={},DZ;function F6(){return DZ||(DZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getRouteMatcher",{enumerable:!0,get:function(){return n}});const t=jd();function n(o){let{re:r,groups:i}=o;return l=>{const s=r.exec(l);if(!s)return!1;const a=u=>{try{return decodeURIComponent(u)}catch{throw new t.DecodeError("failed to decode param")}},c={};return Object.keys(i).forEach(u=>{const d=i[u],I=s[d.pos];I!==void 0&&(c[u]=~I.indexOf("/")?I.split("/").map(C=>a(C)):d.repeat?[a(I)]:a(I))}),c}}}(WC)),WC}var wC={},kC={},UZ;function E6(){return UZ||(UZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"escapeStringRegexp",{enumerable:!0,get:function(){return o}});const t=/[|\\{}()[\]^$+*?.-]/,n=/[|\\{}()[\]^$+*?.-]/g;function o(r){return t.test(r)?r.replace(n,"\\$&"):r}}(kC)),kC}var PZ;function K6(){return PZ||(PZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(A,v){for(var h in v)Object.defineProperty(A,h,{enumerable:!0,get:v[h]})}t(e,{getNamedMiddlewareRegex:function(){return f},getNamedRouteRegex:function(){return C},getRouteRegex:function(){return c}});const n=fw(),o=E6(),r=Cw(),i="nxtP",l="nxtI";function s(A){const v=A.startsWith("[")&&A.endsWith("]");v&&(A=A.slice(1,-1));const h=A.startsWith("...");return h&&(A=A.slice(3)),{key:A,repeat:h,optional:v}}function a(A){const v=(0,r.removeTrailingSlash)(A).slice(1).split("/"),h={};let p=1;return{parameterizedRoute:v.map(b=>{const y=n.INTERCEPTION_ROUTE_MARKERS.find(G=>b.startsWith(G)),Z=b.match(/\[((?:\[.*\])|.+)\]/);if(y&&Z){const{key:G,optional:V,repeat:S}=s(Z[1]);return h[G]={pos:p++,repeat:S,optional:V},"/"+(0,o.escapeStringRegexp)(y)+"([^/]+?)"}else if(Z){const{key:G,repeat:V,optional:S}=s(Z[1]);return h[G]={pos:p++,repeat:V,optional:S},V?S?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}else return"/"+(0,o.escapeStringRegexp)(b)}).join(""),groups:h}}function c(A){const{parameterizedRoute:v,groups:h}=a(A);return{re:new RegExp("^"+v+"(?:/)?$"),groups:h}}function u(){let A=0;return()=>{let v="",h=++A;for(;h>0;)v+=String.fromCharCode(97+(h-1)%26),h=Math.floor((h-1)/26);return v}}function d(A){let{interceptionMarker:v,getSafeRouteKey:h,segment:p,routeKeys:b,keyPrefix:y}=A;const{key:Z,optional:G,repeat:V}=s(p);let S=Z.replace(/\W/g,"");y&&(S=""+y+S);let k=!1;(S.length===0||S.length>30)&&(k=!0),isNaN(parseInt(S.slice(0,1)))||(k=!0),k&&(S=h()),y?b[S]=""+y+Z:b[S]=Z;const B=v?(0,o.escapeStringRegexp)(v):"";return V?G?"(?:/"+B+"(?<"+S+">.+?))?":"/"+B+"(?<"+S+">.+?)":"/"+B+"(?<"+S+">[^/]+?)"}function I(A,v){const h=(0,r.removeTrailingSlash)(A).slice(1).split("/"),p=u(),b={};return{namedParameterizedRoute:h.map(y=>{const Z=n.INTERCEPTION_ROUTE_MARKERS.some(V=>y.startsWith(V)),G=y.match(/\[((?:\[.*\])|.+)\]/);if(Z&&G){const[V]=y.split(G[0]);return d({getSafeRouteKey:p,interceptionMarker:V,segment:G[1],routeKeys:b,keyPrefix:v?l:void 0})}else return G?d({getSafeRouteKey:p,segment:G[1],routeKeys:b,keyPrefix:v?i:void 0}):"/"+(0,o.escapeStringRegexp)(y)}).join(""),routeKeys:b}}function C(A,v){const h=I(A,v);return{...c(A),namedRegex:"^"+h.namedParameterizedRoute+"(?:/)?$",routeKeys:h.routeKeys}}function f(A,v){const{parameterizedRoute:h}=a(A),{catchAll:p=!0}=v;if(h==="/")return{namedRegex:"^/"+(p?".*":"")+"$"};const{namedParameterizedRoute:b}=I(A,!1);let y=p?"(?:(/.*)?)":"";return{namedRegex:"^"+b+y+"$"}}}(wC)),wC}var QZ;function L6(){return QZ||(QZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"interpolateAs",{enumerable:!0,get:function(){return o}});const t=F6(),n=K6();function o(r,i,l){let s="";const a=(0,n.getRouteRegex)(r),c=a.groups,u=(i!==r?(0,t.getRouteMatcher)(a)(i):"")||l;s=r;const d=Object.keys(c);return d.every(I=>{let C=u[I]||"";const{repeat:f,optional:A}=c[I];let v="["+(f?"...":"")+I+"]";return A&&(v=(C?"":"/")+"["+v+"]"),f&&!Array.isArray(C)&&(C=[C]),(A||I in u)&&(s=s.replace(v,f?C.map(h=>encodeURIComponent(h)).join("/"):encodeURIComponent(C))||"/")})||(s=""),{params:d,result:s}}}(RC)),RC}var OZ;function M6(){return OZ||(OZ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resolveHref",{enumerable:!0,get:function(){return u}});const n=dw(),o=Iw(),r=w6(),i=jd(),l=zd(),s=hw(),a=H6(),c=L6();function u(d,I,C){let f,A=typeof I=="string"?I:(0,o.formatWithValidation)(I);const v=A.match(/^[a-zA-Z]{1,}:\/\//),h=v?A.slice(v[0].length):A;if((h.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+A+"' passed to next/router in page: '"+d.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");const b=(0,i.normalizeRepeatedSlashes)(h);A=(v?v[0]:"")+b}if(!(0,s.isLocalURL)(A))return C?[A]:A;try{f=new URL(A.startsWith("#")?d.asPath:d.pathname,"http://n")}catch{f=new URL("/","http://n")}try{const b=new URL(A,f);b.pathname=(0,l.normalizePathTrailingSlash)(b.pathname);let y="";if((0,a.isDynamicRoute)(b.pathname)&&b.searchParams&&C){const G=(0,n.searchParamsToUrlQuery)(b.searchParams),{result:V,params:S}=(0,c.interpolateAs)(b.pathname,b.pathname,G);V&&(y=(0,o.formatWithValidation)({pathname:V,hash:b.hash,query:(0,r.omit)(G,S)}))}const Z=b.origin===f.origin?b.href.slice(b.origin.length):b.href;return C?[Z,y||Z]:Z}catch{return C?[A]:A}}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(kg,kg.exports)),kg.exports}var Jg={exports:{}},xC={},XC={},_Z;function Aw(){return _Z||(_Z=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addPathPrefix",{enumerable:!0,get:function(){return n}});const t=bp();function n(o,r){if(!o.startsWith("/")||!r)return o;const{pathname:i,query:l,hash:s}=(0,t.parsePath)(o);return""+r+i+l+s}}(XC)),XC}var qZ;function T6(){return qZ||(qZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addLocale",{enumerable:!0,get:function(){return o}});const t=Aw(),n=mw();function o(r,i,l,s){if(!i||i===l)return r;const a=r.toLowerCase();return!s&&((0,n.pathHasPrefix)(a,"/api")||(0,n.pathHasPrefix)(a,"/"+i.toLowerCase()))?r:(0,t.addPathPrefix)(r,"/"+i)}}(xC)),xC}var $Z;function j6(){return $Z||($Z=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return o}});const n=zd(),o=function(r){for(var i=arguments.length,l=new Array(i>1?i-1:0),s=1;s<i;s++)l[s-1]=arguments[s];return{}.__NEXT_I18N_SUPPORT?(0,n.normalizePathTrailingSlash)(T6().addLocale(r,...l)):r};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Jg,Jg.exports)),Jg.exports}var JC={},eG;function pw(){return eG||(eG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"RouterContext",{enumerable:!0,get:function(){return o}});const o=oo._(m).default.createContext(null)}(JC)),JC}var NC={},tG;function z6(){return tG||(tG=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0});function t(c,u){for(var d in u)Object.defineProperty(c,d,{enumerable:!0,get:u[d]})}t(e,{AppRouterContext:function(){return r},GlobalLayoutRouterContext:function(){return l},LayoutRouterContext:function(){return i},MissingSlotContext:function(){return a},TemplateContext:function(){return s}});const o=oo._(m),r=o.default.createContext(null),i=o.default.createContext(null),l=o.default.createContext(null),s=o.default.createContext(null),a=o.default.createContext(new Set)}(NC)),NC}var Ng={exports:{}},Yg={exports:{}},nG;function D6(){return nG||(nG=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(i,l){for(var s in l)Object.defineProperty(i,s,{enumerable:!0,get:l[s]})}n(t,{cancelIdleCallback:function(){return r},requestIdleCallback:function(){return o}});const o=typeof self<"u"&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(i){let l=Date.now();return self.setTimeout(function(){i({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-l))}})},1)},r=typeof self<"u"&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(i){return clearTimeout(i)};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Yg,Yg.exports)),Yg.exports}var oG;function U6(){return oG||(oG=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return c}});const n=m,o=D6(),r=typeof IntersectionObserver=="function",i=new Map,l=[];function s(u){const d={root:u.root||null,margin:u.rootMargin||""},I=l.find(v=>v.root===d.root&&v.margin===d.margin);let C;if(I&&(C=i.get(I),C))return C;const f=new Map,A=new IntersectionObserver(v=>{v.forEach(h=>{const p=f.get(h.target),b=h.isIntersecting||h.intersectionRatio>0;p&&b&&p(b)})},u);return C={id:d,observer:A,elements:f},l.push(d),i.set(d,C),C}function a(u,d,I){const{id:C,observer:f,elements:A}=s(I);return A.set(u,d),f.observe(u),function(){if(A.delete(u),f.unobserve(u),A.size===0){f.disconnect(),i.delete(C);const h=l.findIndex(p=>p.root===C.root&&p.margin===C.margin);h>-1&&l.splice(h,1)}}}function c(u){let{rootRef:d,rootMargin:I,disabled:C}=u;const f=C||!r,[A,v]=(0,n.useState)(!1),h=(0,n.useRef)(null),p=(0,n.useCallback)(y=>{h.current=y},[]);(0,n.useEffect)(()=>{if(r){if(f||A)return;const y=h.current;if(y&&y.tagName)return a(y,G=>G&&v(G),{root:d==null?void 0:d.current,rootMargin:I})}else if(!A){const y=(0,o.requestIdleCallback)(()=>v(!0));return()=>(0,o.cancelIdleCallback)(y)}},[f,I,d,A,h.current]);const b=(0,n.useCallback)(()=>{v(!1)},[]);return[p,A,b]}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Ng,Ng.exports)),Ng.exports}var Hg={exports:{}},Fg={exports:{}},YC={},rG;function P6(){return rG||(rG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"normalizeLocalePath",{enumerable:!0,get:function(){return t}});function t(n,o){let r;const i=n.split("/");return(o||[]).some(l=>i[1]&&i[1].toLowerCase()===l.toLowerCase()?(r=l,i.splice(1,1),n=i.join("/")||"/",!0):!1),{pathname:n,detectedLocale:r}}}(YC)),YC}var iG;function Q6(){return iG||(iG=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return n}});const n=(o,r)=>({}).__NEXT_I18N_SUPPORT?P6().normalizeLocalePath(o,r):{pathname:o,detectedLocale:void 0};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Fg,Fg.exports)),Fg.exports}var Eg={exports:{}},HC={},lG;function O6(){return lG||(lG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"detectDomainLocale",{enumerable:!0,get:function(){return t}});function t(n,o,r){if(n){r&&(r=r.toLowerCase());for(const s of n){var i,l;const a=(i=s.domain)==null?void 0:i.split(":",1)[0].toLowerCase();if(o===a||r===s.defaultLocale.toLowerCase()||(l=s.locales)!=null&&l.some(c=>c.toLowerCase()===r))return s}}}}(HC)),HC}var sG;function _6(){return sG||(sG=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectDomainLocale",{enumerable:!0,get:function(){return n}});const n=function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];if({}.__NEXT_I18N_SUPPORT)return O6().detectDomainLocale(...r)};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Eg,Eg.exports)),Eg.exports}var aG;function q6(){return aG||(aG=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return r}});const n=zd(),o={}.__NEXT_ROUTER_BASEPATH||"";function r(i,l,s,a){if({}.__NEXT_I18N_SUPPORT){const c=Q6().normalizeLocalePath,u=_6().detectDomainLocale,d=l||c(i,s).detectedLocale,I=u(a,void 0,d);if(I){const C="http"+(I.http?"":"s")+"://",f=d===I.defaultLocale?"":"/"+d;return""+C+I.domain+(0,n.normalizePathTrailingSlash)(""+o+f+i)}return!1}else return!1}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Hg,Hg.exports)),Hg.exports}var Kg={exports:{}},gG;function $6(){return gG||(gG=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addBasePath",{enumerable:!0,get:function(){return i}});const n=Aw(),o=zd(),r={}.__NEXT_ROUTER_BASEPATH||"";function i(l,s){return(0,o.normalizePathTrailingSlash)({}.__NEXT_MANUAL_CLIENT_BASE_PATH&&!s?l:(0,n.addPathPrefix)(l,r))}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Kg,Kg.exports)),Kg.exports}var Lg={exports:{}},cG;function e_(){return cG||(cG=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(C,f){for(var A in f)Object.defineProperty(C,A,{enumerable:!0,get:f[A]})}n(t,{ACTION_FAST_REFRESH:function(){return a},ACTION_NAVIGATE:function(){return r},ACTION_PREFETCH:function(){return s},ACTION_REFRESH:function(){return o},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return c},ACTION_SERVER_PATCH:function(){return l},PrefetchCacheEntryStatus:function(){return d},PrefetchKind:function(){return u},isThenable:function(){return I}});const o="refresh",r="navigate",i="restore",l="server-patch",s="prefetch",a="fast-refresh",c="server-action";var u;(function(C){C.AUTO="auto",C.FULL="full",C.TEMPORARY="temporary"})(u||(u={}));var d;(function(C){C.fresh="fresh",C.reusable="reusable",C.expired="expired",C.stale="stale"})(d||(d={}));function I(C){return C&&(typeof C=="object"||typeof C=="function")&&typeof C.then=="function"}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Lg,Lg.exports)),Lg.exports}(function(e,t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return G}});const n=oo,o=g,r=n._(m),i=M6(),l=hw(),s=Iw(),a=jd(),c=j6(),u=pw(),d=z6(),I=U6(),C=q6(),f=$6(),A=e_(),v=new Set;function h(V,S,k,B,R,W){if(typeof window>"u"||!W&&!(0,l.isLocalURL)(S))return;if(!B.bypassPrefetchedCheck){const X=typeof B.locale<"u"?B.locale:"locale"in V?V.locale:void 0,E=S+"%"+k+"%"+X;if(v.has(E))return;v.add(E)}const w=W?V.prefetch(S,R):V.prefetch(S,k,B);Promise.resolve(w).catch(X=>{})}function p(V){const k=V.currentTarget.getAttribute("target");return k&&k!=="_self"||V.metaKey||V.ctrlKey||V.shiftKey||V.altKey||V.nativeEvent&&V.nativeEvent.which===2}function b(V,S,k,B,R,W,w,X,E){const{nodeName:M}=V.currentTarget;if(M.toUpperCase()==="A"&&(p(V)||!E&&!(0,l.isLocalURL)(k)))return;V.preventDefault();const F=()=>{const Y=w??!0;"beforePopState"in S?S[R?"replace":"push"](k,B,{shallow:W,locale:X,scroll:Y}):S[R?"replace":"push"](B||k,{scroll:Y})};E?r.default.startTransition(F):F()}function y(V){return typeof V=="string"?V:(0,s.formatUrl)(V)}const G=r.default.forwardRef(function(S,k){let B;const{href:R,as:W,children:w,prefetch:X=null,passHref:E,replace:M,shallow:L,scroll:F,locale:Y,onClick:N,onMouseEnter:x,onTouchStart:H,legacyBehavior:K=!1,...T}=S;B=w,K&&(typeof B=="string"||typeof B=="number")&&(B=(0,o.jsx)("a",{children:B}));const j=r.default.useContext(u.RouterContext),J=r.default.useContext(d.AppRouterContext),z=j??J,U=!j,D=X!==!1,O=X===null?A.PrefetchKind.AUTO:A.PrefetchKind.FULL,{href:ee,as:re}=r.default.useMemo(()=>{if(!j){const le=y(R);return{href:le,as:W?y(W):le}}const[Q,ce]=(0,i.resolveHref)(j,R,!0);return{href:Q,as:W?(0,i.resolveHref)(j,W):ce||Q}},[j,R,W]),ae=r.default.useRef(ee),ge=r.default.useRef(re);let ne;K&&(ne=r.default.Children.only(B));const ue=K?ne&&typeof ne=="object"&&ne.ref:k,[me,q,_]=(0,I.useIntersection)({rootMargin:"200px"}),$=r.default.useCallback(Q=>{(ge.current!==re||ae.current!==ee)&&(_(),ge.current=re,ae.current=ee),me(Q),ue&&(typeof ue=="function"?ue(Q):typeof ue=="object"&&(ue.current=Q))},[re,ue,ee,_,me]);r.default.useEffect(()=>{z&&(!q||!D||h(z,ee,re,{locale:Y},{kind:O},U))},[re,ee,q,Y,D,j==null?void 0:j.locale,z,U,O]);const oe={ref:$,onClick(Q){!K&&typeof N=="function"&&N(Q),K&&ne.props&&typeof ne.props.onClick=="function"&&ne.props.onClick(Q),z&&(Q.defaultPrevented||b(Q,z,ee,re,M,L,F,Y,U))},onMouseEnter(Q){!K&&typeof x=="function"&&x(Q),K&&ne.props&&typeof ne.props.onMouseEnter=="function"&&ne.props.onMouseEnter(Q),z&&(!D&&U||h(z,ee,re,{locale:Y,priority:!0,bypassPrefetchedCheck:!0},{kind:O},U))},onTouchStart:{}.__NEXT_LINK_NO_TOUCH_START?void 0:function(ce){!K&&typeof H=="function"&&H(ce),K&&ne.props&&typeof ne.props.onTouchStart=="function"&&ne.props.onTouchStart(ce),z&&(!D&&U||h(z,ee,re,{locale:Y,priority:!0,bypassPrefetchedCheck:!0},{kind:O},U))}};if((0,a.isAbsoluteUrl)(re))oe.href=re;else if(!K||E||ne.type==="a"&&!("href"in ne.props)){const Q=typeof Y<"u"?Y:j==null?void 0:j.locale,ce=(j==null?void 0:j.isLocaleDomain)&&(0,C.getDomainLocale)(re,Q,j==null?void 0:j.locales,j==null?void 0:j.domainLocales);oe.href=ce||(0,f.addBasePath)((0,c.addLocale)(re,Q,j==null?void 0:j.defaultLocale))}return K?r.default.cloneElement(ne,oe):(0,o.jsx)("a",{...T,...oe,children:B})});(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)})(Dh,Dh.exports);var t_=Dh.exports,n_=t_;const yp=ro(n_),o_={solid:"inline-flex justify-center rounded-lg py-2 px-3 text-sm font-semibold outline-2 outline-offset-2 transition-colors",outline:"inline-flex justify-center rounded-lg border py-[calc(theme(spacing.2)-1px)] px-[calc(theme(spacing.3)-1px)] text-sm outline-2 outline-offset-2 transition-colors"},uG={solid:{cyan:"relative overflow-hidden bg-cyan-500 text-white before:absolute before:inset-0 active:before:bg-transparent hover:before:bg-white/10 active:bg-cyan-600 active:text-white/80 before:transition-colors",white:"bg-white text-cyan-900 hover:bg-white/90 active:bg-white/90 active:text-cyan-900/70",gray:"bg-gray-800 text-white hover:bg-gray-900 active:bg-gray-800 active:text-white/80"},outline:{gray:"border-gray-300 text-gray-700 hover:border-gray-400 active:bg-gray-100 active:text-gray-700/80"}},al=({className:e,...t})=>(t.variant??(t.variant="solid"),t.color??(t.color="gray"),e=ot(o_[t.variant],t.variant==="outline"?uG.outline[t.color]:t.variant==="solid"?uG.solid[t.color]:void 0,e),typeof t.href>"u"?g.jsx("button",{className:e,...t}):g.jsx(yp,{className:e,...t})),r_=({color:e,...t})=>{let n=m.useId();return g.jsxs("svg",{viewBox:"0 0 558 558",width:"558",height:"558",fill:"none","aria-hidden":"true",...t,children:[g.jsx("defs",{children:g.jsxs("linearGradient",{id:n,x1:"79",y1:"16",x2:"105",y2:"237",gradientUnits:"userSpaceOnUse",children:[g.jsx("stop",{stopColor:e}),g.jsx("stop",{offset:"1",stopColor:e,stopOpacity:"0"})]})}),g.jsx("path",{opacity:".2",d:"M1 279C1 125.465 125.465 1 279 1s278 124.465 278 278-124.465 278-278 278S1 432.535 1 279Z",stroke:e}),g.jsx("path",{d:"M1 279C1 125.465 125.465 1 279 1",stroke:`url(#${n})`,strokeLinecap:"round"})]})},Fa=({className:e,...t})=>g.jsx("div",{className:ot("mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",e),...t}),i_=()=>g.jsxs("section",{id:"get-free-shares-today",className:"relative overflow-hidden bg-gray-900 py-20 sm:py-28",children:[g.jsx("div",{className:"absolute left-20 top-1/2 -translate-y-1/2 sm:left-1/2 sm:-translate-x-1/2",children:g.jsx(r_,{color:"#fff",className:"animate-spin-slower"})}),g.jsx(Fa,{className:"relative",children:g.jsxs("div",{className:"mx-auto max-w-md sm:text-center",children:[g.jsx("h2",{className:"text-3xl font-medium tracking-tight text-white sm:text-4xl",children:"Networking en un mundo digital"}),g.jsxs("ul",{children:[g.jsx("li",{className:"mt-4 text-lg text-gray-300",children:"Comparte tu informacin de contacto, botn directo a whatsapp, redes sociales, archivos, enlaces personalizados y mucho ms."}),g.jsx("li",{className:"mt-4 text-lg text-gray-300",children:"Efecto WOW garantizado."}),g.jsxs("li",{className:"mt-4 text-lg text-gray-300",children:["Comparte tu perfil con tu tarjeta NFC sin contacto, por cdigo qr o tu link."," "]}),g.jsx("li",{className:"mt-4 text-lg text-gray-300",children:"Gestiona tus contactos y vuelve tu red ms eficiente."})]}),g.jsx("div",{className:"mt-8 flex justify-center",children:g.jsx(al,{href:"/registro",className:"hidden lg:block",children:"Unirme ahora"})})]})})]});var bw={},vp={},yw={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getImageBlurSvg",{enumerable:!0,get:function(){return t}});function t(n){let{widthInt:o,heightInt:r,blurWidth:i,blurHeight:l,blurDataURL:s,objectFit:a}=n;const c=20,u=i?i*40:o,d=l?l*40:r,I=u&&d?"viewBox='0 0 "+u+" "+d+"'":"",C=I?"none":a==="contain"?"xMidYMid":a==="cover"?"xMidYMid slice":"none";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+I+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='"+c+"'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='"+c+"'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+C+"' style='filter: url(%23b);' href='"+s+"'/%3E%3C/svg%3E"}})(yw);var Dd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(r,i){for(var l in i)Object.defineProperty(r,l,{enumerable:!0,get:i[l]})}t(e,{VALID_LOADERS:function(){return n},imageConfigDefault:function(){return o}});const n=["default","imgix","cloudinary","akamai","custom"],o={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}})(Dd);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getImgProps",{enumerable:!0,get:function(){return c}}),dp();const t=yw,n=Dd;function o(u){return u.default!==void 0}function r(u){return u.src!==void 0}function i(u){return typeof u=="object"&&(o(u)||r(u))}function l(u){return typeof u>"u"?u:typeof u=="number"?Number.isFinite(u)?u:NaN:typeof u=="string"&&/^[0-9]+$/.test(u)?parseInt(u,10):NaN}function s(u,d,I){let{deviceSizes:C,allSizes:f}=u;if(I){const v=/(^|\s)(1?\d?\d)vw/g,h=[];for(let p;p=v.exec(I);p)h.push(parseInt(p[2]));if(h.length){const p=Math.min(...h)*.01;return{widths:f.filter(b=>b>=C[0]*p),kind:"w"}}return{widths:f,kind:"w"}}return typeof d!="number"?{widths:C,kind:"w"}:{widths:[...new Set([d,d*2].map(v=>f.find(h=>h>=v)||f[f.length-1]))],kind:"x"}}function a(u){let{config:d,src:I,unoptimized:C,width:f,quality:A,sizes:v,loader:h}=u;if(C)return{src:I,srcSet:void 0,sizes:void 0};const{widths:p,kind:b}=s(d,f,v),y=p.length-1;return{sizes:!v&&b==="w"?"100vw":v,srcSet:p.map((Z,G)=>h({config:d,src:I,quality:A,width:Z})+" "+(b==="w"?Z:G+1)+b).join(", "),src:h({config:d,src:I,quality:A,width:p[y]})}}function c(u,d){let{src:I,sizes:C,unoptimized:f=!1,priority:A=!1,loading:v,className:h,quality:p,width:b,height:y,fill:Z=!1,style:G,overrideSrc:V,onLoad:S,onLoadingComplete:k,placeholder:B="empty",blurDataURL:R,fetchPriority:W,layout:w,objectFit:X,objectPosition:E,lazyBoundary:M,lazyRoot:L,...F}=u;const{imgConf:Y,showAltText:N,blurComplete:x,defaultLoader:H}=d;let K,T=Y||n.imageConfigDefault;if("allSizes"in T)K=T;else{const $=[...T.deviceSizes,...T.imageSizes].sort((Q,ce)=>Q-ce),oe=T.deviceSizes.sort((Q,ce)=>Q-ce);K={...T,allSizes:$,deviceSizes:oe}}if(typeof H>"u")throw new Error(`images.loaderFile detected but the file is missing default export.
Read more: https://nextjs.org/docs/messages/invalid-images-config`);let j=F.loader||H;delete F.loader,delete F.srcSet;const J="__next_img_default"in j;if(J){if(K.loader==="custom")throw new Error('Image with src "'+I+`" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`)}else{const $=j;j=oe=>{const{config:Q,...ce}=oe;return $(ce)}}if(w){w==="fill"&&(Z=!0);const $={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}},oe={responsive:"100vw",fill:"100vw"},Q=$[w];Q&&(G={...G,...Q});const ce=oe[w];ce&&!C&&(C=ce)}let z="",U=l(b),D=l(y),O,ee;if(i(I)){const $=o(I)?I.default:I;if(!$.src)throw new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify($));if(!$.height||!$.width)throw new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify($));if(O=$.blurWidth,ee=$.blurHeight,R=R||$.blurDataURL,z=$.src,!Z){if(!U&&!D)U=$.width,D=$.height;else if(U&&!D){const oe=U/$.width;D=Math.round($.height*oe)}else if(!U&&D){const oe=D/$.height;U=Math.round($.width*oe)}}}I=typeof I=="string"?I:z;let re=!A&&(v==="lazy"||typeof v>"u");(!I||I.startsWith("data:")||I.startsWith("blob:"))&&(f=!0,re=!1),K.unoptimized&&(f=!0),J&&I.endsWith(".svg")&&!K.dangerouslyAllowSVG&&(f=!0),A&&(W="high");const ae=l(p),ge=Object.assign(Z?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:X,objectPosition:E}:{},N?{}:{color:"transparent"},G),ne=!x&&B!=="empty"?B==="blur"?'url("data:image/svg+xml;charset=utf-8,'+(0,t.getImageBlurSvg)({widthInt:U,heightInt:D,blurWidth:O,blurHeight:ee,blurDataURL:R||"",objectFit:ge.objectFit})+'")':'url("'+B+'")':null;let ue=ne?{backgroundSize:ge.objectFit||"cover",backgroundPosition:ge.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:ne}:{};const me=a({config:K,src:I,unoptimized:f,width:U,quality:ae,sizes:C,loader:j});return{props:{...F,loading:re?"lazy":v,fetchPriority:W,width:U,height:D,decoding:"async",className:h,style:{...ge,...ue},sizes:me.sizes,srcSet:me.srcSet,src:V||me.src},meta:{unoptimized:f,priority:A,placeholder:B,fill:Z}}}})(vp);var Uh={exports:{}},FC={},dG;function l_(){return dG||(dG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ImageConfigContext",{enumerable:!0,get:function(){return r}});const n=oo._(m),o=Dd,r=n.default.createContext(o.imageConfigDefault)}(FC)),FC}var EC={},IG;function vw(){return IG||(IG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}});function t(o){let{config:r,src:i,width:l,quality:s}=o;return r.path+"?url="+encodeURIComponent(i)+"&w="+l+"&q="+(s||75)+({}.NEXT_DEPLOYMENT_ID?"&dpl="+{}.NEXT_DEPLOYMENT_ID:"")}t.__next_img_default=!0;const n=t}(EC)),EC}(function(e,t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return p}});const n=oo,o=Ca,r=g,i=o._(m),l=n._(Kt),s=n._(QW),a=vp,c=Dd,u=l_();dp();const d=pw(),I=n._(vw()),C={}.__NEXT_IMAGE_OPTS;typeof window>"u"&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);function f(b,y,Z,G,V,S,k){const B=b==null?void 0:b.src;if(!b||b["data-loaded-src"]===B)return;b["data-loaded-src"]=B,("decode"in b?b.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(!(!b.parentElement||!b.isConnected)){if(y!=="empty"&&V(!0),Z!=null&&Z.current){const W=new Event("load");Object.defineProperty(W,"target",{writable:!1,value:b});let w=!1,X=!1;Z.current({...W,nativeEvent:W,currentTarget:b,target:b,isDefaultPrevented:()=>w,isPropagationStopped:()=>X,persist:()=>{},preventDefault:()=>{w=!0,W.preventDefault()},stopPropagation:()=>{X=!0,W.stopPropagation()}})}G!=null&&G.current&&G.current(b)}})}function A(b){const[y,Z]=i.version.split(".",2),G=parseInt(y,10),V=parseInt(Z,10);return G>18||G===18&&V>=3?{fetchPriority:b}:{fetchpriority:b}}const v=(0,i.forwardRef)((b,y)=>{let{src:Z,srcSet:G,sizes:V,height:S,width:k,decoding:B,className:R,style:W,fetchPriority:w,placeholder:X,loading:E,unoptimized:M,fill:L,onLoadRef:F,onLoadingCompleteRef:Y,setBlurComplete:N,setShowAltText:x,sizesInput:H,onLoad:K,onError:T,...j}=b;return(0,r.jsx)("img",{...j,...A(w),loading:E,width:k,height:S,decoding:B,"data-nimg":L?"fill":"1",className:R,style:W,sizes:V,srcSet:G,src:Z,ref:(0,i.useCallback)(J=>{y&&(typeof y=="function"?y(J):typeof y=="object"&&(y.current=J)),J&&(T&&(J.src=J.src),J.complete&&f(J,X,F,Y,N))},[Z,X,F,Y,N,T,M,H,y]),onLoad:J=>{const z=J.currentTarget;f(z,X,F,Y,N)},onError:J=>{x(!0),X!=="empty"&&N(!0),T&&T(J)}})});function h(b){let{isAppRouter:y,imgAttributes:Z}=b;const G={as:"image",imageSrcSet:Z.srcSet,imageSizes:Z.sizes,crossOrigin:Z.crossOrigin,referrerPolicy:Z.referrerPolicy,...A(Z.fetchPriority)};return y&&l.default.preload?(l.default.preload(Z.src,G),null):(0,r.jsx)(s.default,{children:(0,r.jsx)("link",{rel:"preload",href:Z.srcSet?void 0:Z.src,...G},"__nimg-"+Z.src+Z.srcSet+Z.sizes)})}const p=(0,i.forwardRef)((b,y)=>{const G=!(0,i.useContext)(d.RouterContext),V=(0,i.useContext)(u.ImageConfigContext),S=(0,i.useMemo)(()=>{const Y=C||V||c.imageConfigDefault,N=[...Y.deviceSizes,...Y.imageSizes].sort((H,K)=>H-K),x=Y.deviceSizes.sort((H,K)=>H-K);return{...Y,allSizes:N,deviceSizes:x}},[V]),{onLoad:k,onLoadingComplete:B}=b,R=(0,i.useRef)(k);(0,i.useEffect)(()=>{R.current=k},[k]);const W=(0,i.useRef)(B);(0,i.useEffect)(()=>{W.current=B},[B]);const[w,X]=(0,i.useState)(!1),[E,M]=(0,i.useState)(!1),{props:L,meta:F}=(0,a.getImgProps)(b,{defaultLoader:I.default,imgConf:S,blurComplete:w,showAltText:E});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{...L,unoptimized:F.unoptimized,placeholder:F.placeholder,fill:F.fill,onLoadRef:R,onLoadingCompleteRef:W,setBlurComplete:X,setShowAltText:M,sizesInput:b.sizes,ref:y}),F.priority?(0,r.jsx)(h,{isAppRouter:G,imgAttributes:L}):null]})});(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)})(Uh,Uh.exports);var s_=Uh.exports;(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,c){for(var u in c)Object.defineProperty(a,u,{enumerable:!0,get:c[u]})}t(e,{default:function(){return s},getImageProps:function(){return l}});const n=oo,o=vp,r=s_,i=n._(vw());function l(a){const{props:c}=(0,o.getImgProps)(a,{defaultLoader:i.default,imgConf:{}.__NEXT_IMAGE_OPTS});for(const[u,d]of Object.entries(c))d===void 0&&delete c[u];return{props:c}}const s=r.Image})(bw);var a_=bw;const Zw=ro(a_),Gw=m.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Ud=m.createContext({}),Pd=m.createContext(null),Qd=typeof document<"u",Zp=Qd?m.useLayoutEffect:m.useEffect,Bw=m.createContext({strict:!1}),Gp=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),g_="framerAppearId",Sw="data-"+Gp(g_);function c_(e,t,n,o){const{visualElement:r}=m.useContext(Ud),i=m.useContext(Bw),l=m.useContext(Pd),s=m.useContext(Gw).reducedMotion,a=m.useRef();o=o||i.renderer,!a.current&&o&&(a.current=o(e,{visualState:t,parent:r,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:s}));const c=a.current;m.useInsertionEffect(()=>{c&&c.update(n,l)});const u=m.useRef(!!(n[Sw]&&!window.HandoffComplete));return Zp(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),m.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function gl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function u_(e,t,n){return m.useCallback(o=>{o&&e.mount&&e.mount(o),t&&(o?t.mount(o):t.unmount()),n&&(typeof n=="function"?n(o):gl(n)&&(n.current=o))},[t])}function ha(e){return typeof e=="string"||Array.isArray(e)}function Od(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Bp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sp=["initial",...Bp];function _d(e){return Od(e.animate)||Sp.some(t=>ha(e[t]))}function Vw(e){return!!(_d(e)||e.variants)}function d_(e,t){if(_d(e)){const{initial:n,animate:o}=e;return{initial:n===!1||ha(n)?n:void 0,animate:ha(o)?o:void 0}}return e.inherit!==!1?t:{}}function I_(e){const{initial:t,animate:n}=d_(e,m.useContext(Ud));return m.useMemo(()=>({initial:t,animate:n}),[CG(t),CG(n)])}function CG(e){return Array.isArray(e)?e.join(" "):e}const mG={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fa={};for(const e in mG)fa[e]={isEnabled:t=>mG[e].some(n=>!!t[n])};function C_(e){for(const t in e)fa[t]={...fa[t],...e[t]}}const Vp=m.createContext({}),Rw=m.createContext({}),m_=Symbol.for("motionComponentSymbol");function h_({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:o,Component:r}){e&&C_(e);function i(s,a){let c;const u={...m.useContext(Gw),...s,layoutId:f_(s)},{isStatic:d}=u,I=I_(s),C=o(s,d);if(!d&&Qd){I.visualElement=c_(r,C,u,t);const f=m.useContext(Rw),A=m.useContext(Bw).strict;I.visualElement&&(c=I.visualElement.loadFeatures(u,A,e,f))}return m.createElement(Ud.Provider,{value:I},c&&I.visualElement?m.createElement(c,{visualElement:I.visualElement,...u}):null,n(r,s,u_(C,I.visualElement,a),C,d,I.visualElement))}const l=m.forwardRef(i);return l[m_]=r,l}function f_({layoutId:e}){const t=m.useContext(Vp).id;return t&&e!==void 0?t+"-"+e:e}function A_(e){function t(o,r={}){return h_(e(o,r))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(o,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const p_=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rp(e){return typeof e!="string"||e.includes("-")?!1:!!(p_.indexOf(e)>-1||/[A-Z]/.test(e))}const hu={};function b_(e){Object.assign(hu,e)}const Ea=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Li=new Set(Ea);function Ww(e,{layout:t,layoutId:n}){return Li.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!hu[e]||e==="opacity")}const gn=e=>!!(e&&e.getVelocity),y_={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},v_=Ea.length;function Z_(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},o,r){let i="";for(let l=0;l<v_;l++){const s=Ea[l];if(e[s]!==void 0){const a=y_[s]||s;i+=`${a}(${e[s]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(e,o?"":i):n&&o&&(i="none"),i}const ww=e=>t=>typeof t=="string"&&t.startsWith(e),kw=ww("--"),Ph=ww("var(--"),G_=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,B_=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Jr=(e,t,n)=>Math.min(Math.max(n,e),t),Mi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ms={...Mi,transform:e=>Jr(0,1,e)},Mg={...Mi,default:1},Ts=e=>Math.round(e*1e5)/1e5,qd=/(-)?([\d]*\.?[\d])+/g,xw=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,S_=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ka(e){return typeof e=="string"}const La=e=>({test:t=>Ka(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),tr=La("deg"),Ao=La("%"),Ge=La("px"),V_=La("vh"),R_=La("vw"),hG={...Ao,parse:e=>Ao.parse(e)/100,transform:e=>Ao.transform(e*100)},fG={...Mi,transform:Math.round},Xw={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,radius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,size:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,rotate:tr,rotateX:tr,rotateY:tr,rotateZ:tr,scale:Mg,scaleX:Mg,scaleY:Mg,scaleZ:Mg,skew:tr,skewX:tr,skewY:tr,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:Ms,originX:hG,originY:hG,originZ:Ge,zIndex:fG,fillOpacity:Ms,strokeOpacity:Ms,numOctaves:fG};function Wp(e,t,n,o){const{style:r,vars:i,transform:l,transformOrigin:s}=e;let a=!1,c=!1,u=!0;for(const d in t){const I=t[d];if(kw(d)){i[d]=I;continue}const C=Xw[d],f=B_(I,C);if(Li.has(d)){if(a=!0,l[d]=f,!u)continue;I!==(C.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,s[d]=f):r[d]=f}if(t.transform||(a||o?r.transform=Z_(e.transform,n,u,o):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:I="50%",originZ:C=0}=s;r.transformOrigin=`${d} ${I} ${C}`}}const wp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Jw(e,t,n){for(const o in t)!gn(t[o])&&!Ww(o,n)&&(e[o]=t[o])}function W_({transformTemplate:e},t,n){return m.useMemo(()=>{const o=wp();return Wp(o,t,{enableHardwareAcceleration:!n},e),Object.assign({},o.vars,o.style)},[t])}function w_(e,t,n){const o=e.style||{},r={};return Jw(r,o,e),Object.assign(r,W_(e,t,n)),e.transformValues?e.transformValues(r):r}function k_(e,t,n){const o={},r=w_(e,t,n);return e.drag&&e.dragListener!==!1&&(o.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(o.tabIndex=0),o.style=r,o}const x_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||x_.has(e)}let Nw=e=>!fu(e);function X_(e){e&&(Nw=t=>t.startsWith("on")?!fu(t):e(t))}try{X_(require("@emotion/is-prop-valid").default)}catch{}function J_(e,t,n){const o={};for(const r in e)r==="values"&&typeof e.values=="object"||(Nw(r)||n===!0&&fu(r)||!t&&!fu(r)||e.draggable&&r.startsWith("onDrag"))&&(o[r]=e[r]);return o}function AG(e,t,n){return typeof e=="string"?e:Ge.transform(t+n*e)}function N_(e,t,n){const o=AG(t,e.x,e.width),r=AG(n,e.y,e.height);return`${o} ${r}`}const Y_={offset:"stroke-dashoffset",array:"stroke-dasharray"},H_={offset:"strokeDashoffset",array:"strokeDasharray"};function F_(e,t,n=1,o=0,r=!0){e.pathLength=1;const i=r?Y_:H_;e[i.offset]=Ge.transform(-o);const l=Ge.transform(t),s=Ge.transform(n);e[i.array]=`${l} ${s}`}function kp(e,{attrX:t,attrY:n,attrScale:o,originX:r,originY:i,pathLength:l,pathSpacing:s=1,pathOffset:a=0,...c},u,d,I){if(Wp(e,c,u,I),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:C,style:f,dimensions:A}=e;C.transform&&(A&&(f.transform=C.transform),delete C.transform),A&&(r!==void 0||i!==void 0||f.transform)&&(f.transformOrigin=N_(A,r!==void 0?r:.5,i!==void 0?i:.5)),t!==void 0&&(C.x=t),n!==void 0&&(C.y=n),o!==void 0&&(C.scale=o),l!==void 0&&F_(C,l,s,a,!1)}const Yw=()=>({...wp(),attrs:{}}),xp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function E_(e,t,n,o){const r=m.useMemo(()=>{const i=Yw();return kp(i,t,{enableHardwareAcceleration:!1},xp(o),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Jw(i,e.style,e),r.style={...i,...r.style}}return r}function K_(e=!1){return(n,o,r,{latestValues:i},l)=>{const a=(Rp(n)?E_:k_)(o,i,l,n),u={...J_(o,typeof n=="string",e),...a,ref:r},{children:d}=o,I=m.useMemo(()=>gn(d)?d.get():d,[d]);return m.createElement(n,{...u,children:I})}}function Hw(e,{style:t,vars:n},o,r){Object.assign(e.style,t,r&&r.getProjectionStyles(o));for(const i in n)e.style.setProperty(i,n[i])}const Fw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ew(e,t,n,o){Hw(e,t,void 0,o);for(const r in t.attrs)e.setAttribute(Fw.has(r)?r:Gp(r),t.attrs[r])}function Xp(e,t){const{style:n}=e,o={};for(const r in n)(gn(n[r])||t.style&&gn(t.style[r])||Ww(r,e))&&(o[r]=n[r]);return o}function Kw(e,t){const n=Xp(e,t);for(const o in e)if(gn(e[o])||gn(t[o])){const r=Ea.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;n[r]=e[o]}return n}function Jp(e,t,n,o={},r={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,o,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,o,r)),t}function Lw(e){const t=m.useRef(null);return t.current===null&&(t.current=e()),t.current}const Au=e=>Array.isArray(e),L_=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),M_=e=>Au(e)?e[e.length-1]||0:e;function Ic(e){const t=gn(e)?e.get():e;return L_(t)?t.toValue():t}function T_({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},o,r,i){const l={latestValues:j_(o,r,i,e),renderState:t()};return n&&(l.mount=s=>n(o,s,l)),l}const Mw=e=>(t,n)=>{const o=m.useContext(Ud),r=m.useContext(Pd),i=()=>T_(e,t,o,r);return n?i():Lw(i)};function j_(e,t,n,o){const r={},i=o(e,{});for(const I in i)r[I]=Ic(i[I]);let{initial:l,animate:s}=e;const a=_d(e),c=Vw(e);t&&c&&!a&&e.inherit!==!1&&(l===void 0&&(l=t.initial),s===void 0&&(s=t.animate));let u=n?n.initial===!1:!1;u=u||l===!1;const d=u?s:l;return d&&typeof d!="boolean"&&!Od(d)&&(Array.isArray(d)?d:[d]).forEach(C=>{const f=Jp(e,C);if(!f)return;const{transitionEnd:A,transition:v,...h}=f;for(const p in h){let b=h[p];if(Array.isArray(b)){const y=u?b.length-1:0;b=b[y]}b!==null&&(r[p]=b)}for(const p in A)r[p]=A[p]}),r}const Ct=e=>e;class pG{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function z_(e){let t=new pG,n=new pG,o=0,r=!1,i=!1;const l=new WeakSet,s={schedule:(a,c=!1,u=!1)=>{const d=u&&r,I=d?t:n;return c&&l.add(a),I.add(a)&&d&&r&&(o=t.order.length),a},cancel:a=>{n.remove(a),l.delete(a)},process:a=>{if(r){i=!0;return}if(r=!0,[t,n]=[n,t],n.clear(),o=t.order.length,o)for(let c=0;c<o;c++){const u=t.order[c];u(a),l.has(u)&&(s.schedule(u),e())}r=!1,i&&(i=!1,s.process(a))}};return s}const Tg=["prepare","read","update","preRender","render","postRender"],D_=40;function U_(e,t){let n=!1,o=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=Tg.reduce((d,I)=>(d[I]=z_(()=>n=!0),d),{}),l=d=>i[d].process(r),s=()=>{const d=performance.now();n=!1,r.delta=o?1e3/60:Math.max(Math.min(d-r.timestamp,D_),1),r.timestamp=d,r.isProcessing=!0,Tg.forEach(l),r.isProcessing=!1,n&&t&&(o=!1,e(s))},a=()=>{n=!0,o=!0,r.isProcessing||e(s)};return{schedule:Tg.reduce((d,I)=>{const C=i[I];return d[I]=(f,A=!1,v=!1)=>(n||a(),C.schedule(f,A,v)),d},{}),cancel:d=>Tg.forEach(I=>i[I].cancel(d)),state:r,steps:i}}const{schedule:Qe,cancel:zo,state:jt,steps:KC}=U_(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ct,!0),P_={useVisualState:Mw({scrapeMotionValuesFromProps:Kw,createRenderState:Yw,onMount:(e,t,{renderState:n,latestValues:o})=>{Qe.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Qe.render(()=>{kp(n,o,{enableHardwareAcceleration:!1},xp(t.tagName),e.transformTemplate),Ew(t,n)})}})},Q_={useVisualState:Mw({scrapeMotionValuesFromProps:Xp,createRenderState:wp})};function O_(e,{forwardMotionProps:t=!1},n,o){return{...Rp(e)?P_:Q_,preloadedFeatures:n,useRender:K_(t),createVisualElement:o,Component:e}}function Xo(e,t,n,o={passive:!0}){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}const Tw=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function $d(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const __=e=>t=>Tw(t)&&e(t,$d(t));function Fo(e,t,n,o){return Xo(e,t,__(n),o)}const q_=(e,t)=>n=>t(e(n)),Vr=(...e)=>e.reduce(q_);function jw(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const bG=jw("dragHorizontal"),yG=jw("dragVertical");function zw(e){let t=!1;if(e==="y")t=yG();else if(e==="x")t=bG();else{const n=bG(),o=yG();n&&o?t=()=>{n(),o()}:(n&&n(),o&&o())}return t}function Dw(){const e=zw(!0);return e?(e(),!1):!0}class Pr{constructor(t){this.isMounted=!1,this.node=t}update(){}}function vG(e,t){const n="pointer"+(t?"enter":"leave"),o="onHover"+(t?"Start":"End"),r=(i,l)=>{if(i.pointerType==="touch"||Dw())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[o]&&Qe.update(()=>s[o](i,l))};return Fo(e.current,n,r,{passive:!e.getProps()[o]})}class $_ extends Pr{mount(){this.unmount=Vr(vG(this.node,!0),vG(this.node,!1))}unmount(){}}class eq extends Pr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vr(Xo(this.node.current,"focus",()=>this.onFocus()),Xo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Uw=(e,t)=>t?e===t?!0:Uw(e,t.parentElement):!1;function LC(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,$d(n))}class tq extends Pr{constructor(){super(...arguments),this.removeStartListeners=Ct,this.removeEndListeners=Ct,this.removeAccessibleListeners=Ct,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),i=Fo(window,"pointerup",(s,a)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();Qe.update(()=>{!d&&!Uw(this.node.current,s.target)?u&&u(s,a):c&&c(s,a)})},{passive:!(o.onTap||o.onPointerUp)}),l=Fo(window,"pointercancel",(s,a)=>this.cancelPress(s,a),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=Vr(i,l),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const l=s=>{s.key!=="Enter"||!this.checkPressEnd()||LC("up",(a,c)=>{const{onTap:u}=this.node.getProps();u&&Qe.update(()=>u(a,c))})};this.removeEndListeners(),this.removeEndListeners=Xo(this.node.current,"keyup",l),LC("down",(s,a)=>{this.startPress(s,a)})},n=Xo(this.node.current,"keydown",t),o=()=>{this.isPressing&&LC("cancel",(i,l)=>this.cancelPress(i,l))},r=Xo(this.node.current,"blur",o);this.removeAccessibleListeners=Vr(n,r)}}startPress(t,n){this.isPressing=!0;const{onTapStart:o,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&Qe.update(()=>o(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Dw()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&Qe.update(()=>o(t,n))}mount(){const t=this.node.getProps(),n=Fo(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),o=Xo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Vr(n,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Qh=new WeakMap,MC=new WeakMap,nq=e=>{const t=Qh.get(e.target);t&&t(e)},oq=e=>{e.forEach(nq)};function rq({root:e,...t}){const n=e||document;MC.has(n)||MC.set(n,{});const o=MC.get(n),r=JSON.stringify(t);return o[r]||(o[r]=new IntersectionObserver(oq,{root:e,...t})),o[r]}function iq(e,t,n){const o=rq(t);return Qh.set(e,n),o.observe(e),()=>{Qh.delete(e),o.unobserve(e)}}const lq={some:0,all:1};class sq extends Pr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:o,amount:r="some",once:i}=t,l={root:n?n.current:void 0,rootMargin:o,threshold:typeof r=="number"?r:lq[r]},s=a=>{const{isIntersecting:c}=a;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),I=c?u:d;I&&I(a)};return iq(this.node.current,l,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(aq(t,n))&&this.startObserver()}unmount(){}}function aq({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const gq={inView:{Feature:sq},tap:{Feature:tq},focus:{Feature:eq},hover:{Feature:$_}};function Pw(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function cq(e){const t={};return e.values.forEach((n,o)=>t[o]=n.get()),t}function uq(e){const t={};return e.values.forEach((n,o)=>t[o]=n.getVelocity()),t}function eI(e,t,n){const o=e.getProps();return Jp(o,t,n!==void 0?n:o.custom,cq(e),uq(e))}let dq=Ct,Np=Ct;const Rr=e=>e*1e3,Eo=e=>e/1e3,Iq={current:!1},Qw=e=>Array.isArray(e)&&typeof e[0]=="number";function Ow(e){return!!(!e||typeof e=="string"&&_w[e]||Qw(e)||Array.isArray(e)&&e.every(Ow))}const Vs=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`,_w={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vs([0,.65,.55,1]),circOut:Vs([.55,0,1,.45]),backIn:Vs([.31,.01,.66,-.59]),backOut:Vs([.33,1.53,.69,.99])};function qw(e){if(e)return Qw(e)?Vs(e):Array.isArray(e)?e.map(qw):_w[e]}function Cq(e,t,n,{delay:o=0,duration:r,repeat:i=0,repeatType:l="loop",ease:s,times:a}={}){const c={[t]:n};a&&(c.offset=a);const u=qw(s);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:o,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"})}function mq(e,{repeat:t,repeatType:n="loop"}){const o=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[o]}const $w=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,hq=1e-7,fq=12;function Aq(e,t,n,o,r){let i,l,s=0;do l=t+(n-t)/2,i=$w(l,o,r)-e,i>0?n=l:t=l;while(Math.abs(i)>hq&&++s<fq);return l}function Ma(e,t,n,o){if(e===t&&n===o)return Ct;const r=i=>Aq(i,0,1,e,n);return i=>i===0||i===1?i:$w(r(i),t,o)}const pq=Ma(.42,0,1,1),bq=Ma(0,0,.58,1),ek=Ma(.42,0,.58,1),yq=e=>Array.isArray(e)&&typeof e[0]!="number",tk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,nk=e=>t=>1-e(1-t),Yp=e=>1-Math.sin(Math.acos(e)),ok=nk(Yp),vq=tk(Yp),rk=Ma(.33,1.53,.69,.99),Hp=nk(rk),Zq=tk(Hp),Gq=e=>(e*=2)<1?.5*Hp(e):.5*(2-Math.pow(2,-10*(e-1))),Bq={linear:Ct,easeIn:pq,easeInOut:ek,easeOut:bq,circIn:Yp,circInOut:vq,circOut:ok,backIn:Hp,backInOut:Zq,backOut:rk,anticipate:Gq},ZG=e=>{if(Array.isArray(e)){Np(e.length===4);const[t,n,o,r]=e;return Ma(t,n,o,r)}else if(typeof e=="string")return Bq[e];return e},Fp=(e,t)=>n=>!!(Ka(n)&&S_.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),ik=(e,t,n)=>o=>{if(!Ka(o))return o;const[r,i,l,s]=o.match(qd);return{[e]:parseFloat(r),[t]:parseFloat(i),[n]:parseFloat(l),alpha:s!==void 0?parseFloat(s):1}},Sq=e=>Jr(0,255,e),TC={...Mi,transform:e=>Math.round(Sq(e))},yi={test:Fp("rgb","red"),parse:ik("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:o=1})=>"rgba("+TC.transform(e)+", "+TC.transform(t)+", "+TC.transform(n)+", "+Ts(Ms.transform(o))+")"};function Vq(e){let t="",n="",o="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,o+=o,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:r?parseInt(r,16)/255:1}}const Oh={test:Fp("#"),parse:Vq,transform:yi.transform},cl={test:Fp("hsl","hue"),parse:ik("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+Ao.transform(Ts(t))+", "+Ao.transform(Ts(n))+", "+Ts(Ms.transform(o))+")"},Pt={test:e=>yi.test(e)||Oh.test(e)||cl.test(e),parse:e=>yi.test(e)?yi.parse(e):cl.test(e)?cl.parse(e):Oh.parse(e),transform:e=>Ka(e)?e:e.hasOwnProperty("red")?yi.transform(e):cl.transform(e)},it=(e,t,n)=>-n*e+n*t+e;function jC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Rq({hue:e,saturation:t,lightness:n,alpha:o}){e/=360,t/=100,n/=100;let r=0,i=0,l=0;if(!t)r=i=l=n;else{const s=n<.5?n*(1+t):n+t-n*t,a=2*n-s;r=jC(a,s,e+1/3),i=jC(a,s,e),l=jC(a,s,e-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:o}}const zC=(e,t,n)=>{const o=e*e;return Math.sqrt(Math.max(0,n*(t*t-o)+o))},Wq=[Oh,yi,cl],wq=e=>Wq.find(t=>t.test(e));function GG(e){const t=wq(e);let n=t.parse(e);return t===cl&&(n=Rq(n)),n}const lk=(e,t)=>{const n=GG(e),o=GG(t),r={...n};return i=>(r.red=zC(n.red,o.red,i),r.green=zC(n.green,o.green,i),r.blue=zC(n.blue,o.blue,i),r.alpha=it(n.alpha,o.alpha,i),yi.transform(r))};function kq(e){var t,n;return isNaN(e)&&Ka(e)&&(((t=e.match(qd))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(xw))===null||n===void 0?void 0:n.length)||0)>0}const sk={regex:G_,countKey:"Vars",token:"${v}",parse:Ct},ak={regex:xw,countKey:"Colors",token:"${c}",parse:Pt.parse},gk={regex:qd,countKey:"Numbers",token:"${n}",parse:Mi.parse};function DC(e,{regex:t,countKey:n,token:o,parse:r}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,o),e.values.push(...i.map(r)))}function pu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&DC(n,sk),DC(n,ak),DC(n,gk),n}function ck(e){return pu(e).values}function uk(e){const{values:t,numColors:n,numVars:o,tokenised:r}=pu(e),i=t.length;return l=>{let s=r;for(let a=0;a<i;a++)a<o?s=s.replace(sk.token,l[a]):a<o+n?s=s.replace(ak.token,Pt.transform(l[a])):s=s.replace(gk.token,Ts(l[a]));return s}}const xq=e=>typeof e=="number"?0:e;function Xq(e){const t=ck(e);return uk(e)(t.map(xq))}const Nr={test:kq,parse:ck,createTransformer:uk,getAnimatableNone:Xq},dk=(e,t)=>n=>`${n>0?t:e}`;function Ik(e,t){return typeof e=="number"?n=>it(e,t,n):Pt.test(e)?lk(e,t):e.startsWith("var(")?dk(e,t):mk(e,t)}const Ck=(e,t)=>{const n=[...e],o=n.length,r=e.map((i,l)=>Ik(i,t[l]));return i=>{for(let l=0;l<o;l++)n[l]=r[l](i);return n}},Jq=(e,t)=>{const n={...e,...t},o={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(o[r]=Ik(e[r],t[r]));return r=>{for(const i in o)n[i]=o[i](r);return n}},mk=(e,t)=>{const n=Nr.createTransformer(t),o=pu(e),r=pu(t);return o.numVars===r.numVars&&o.numColors===r.numColors&&o.numNumbers>=r.numNumbers?Vr(Ck(o.values,r.values),n):dk(e,t)},Aa=(e,t,n)=>{const o=t-e;return o===0?1:(n-e)/o},BG=(e,t)=>n=>it(e,t,n);function Nq(e){return typeof e=="number"?BG:typeof e=="string"?Pt.test(e)?lk:mk:Array.isArray(e)?Ck:typeof e=="object"?Jq:BG}function Yq(e,t,n){const o=[],r=n||Nq(e[0]),i=e.length-1;for(let l=0;l<i;l++){let s=r(e[l],e[l+1]);if(t){const a=Array.isArray(t)?t[l]||Ct:t;s=Vr(a,s)}o.push(s)}return o}function hk(e,t,{clamp:n=!0,ease:o,mixer:r}={}){const i=e.length;if(Np(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=Yq(t,o,r),s=l.length,a=c=>{let u=0;if(s>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const d=Aa(e[u],e[u+1],c);return l[u](d)};return n?c=>a(Jr(e[0],e[i-1],c)):a}function Hq(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const r=Aa(0,t,o);e.push(it(n,1,r))}}function Fq(e){const t=[0];return Hq(t,e.length-1),t}function Eq(e,t){return e.map(n=>n*t)}function Kq(e,t){return e.map(()=>t||ek).splice(0,e.length-1)}function bu({duration:e=300,keyframes:t,times:n,ease:o="easeInOut"}){const r=yq(o)?o.map(ZG):ZG(o),i={done:!1,value:t[0]},l=Eq(n&&n.length===t.length?n:Fq(t),e),s=hk(l,t,{ease:Array.isArray(r)?r:Kq(t,r)});return{calculatedDuration:e,next:a=>(i.value=s(a),i.done=a>=e,i)}}function fk(e,t){return t?e*(1e3/t):0}const Lq=5;function Ak(e,t,n){const o=Math.max(t-Lq,0);return fk(n-e(o),t-o)}const UC=.001,Mq=.01,SG=10,Tq=.05,jq=1;function zq({duration:e=800,bounce:t=.25,velocity:n=0,mass:o=1}){let r,i;dq(e<=Rr(SG));let l=1-t;l=Jr(Tq,jq,l),e=Jr(Mq,SG,Eo(e)),l<1?(r=c=>{const u=c*l,d=u*e,I=u-n,C=_h(c,l),f=Math.exp(-d);return UC-I/C*f},i=c=>{const d=c*l*e,I=d*n+n,C=Math.pow(l,2)*Math.pow(c,2)*e,f=Math.exp(-d),A=_h(Math.pow(c,2),l);return(-r(c)+UC>0?-1:1)*((I-C)*f)/A}):(r=c=>{const u=Math.exp(-c*e),d=(c-n)*e+1;return-UC+u*d},i=c=>{const u=Math.exp(-c*e),d=(n-c)*(e*e);return u*d});const s=5/e,a=Uq(r,i,s);if(e=Rr(e),isNaN(a))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(a,2)*o;return{stiffness:c,damping:l*2*Math.sqrt(o*c),duration:e}}}const Dq=12;function Uq(e,t,n){let o=n;for(let r=1;r<Dq;r++)o=o-e(o)/t(o);return o}function _h(e,t){return e*Math.sqrt(1-t*t)}const Pq=["duration","bounce"],Qq=["stiffness","damping","mass"];function VG(e,t){return t.some(n=>e[n]!==void 0)}function Oq(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!VG(e,Qq)&&VG(e,Pq)){const n=zq(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function pk({keyframes:e,restDelta:t,restSpeed:n,...o}){const r=e[0],i=e[e.length-1],l={done:!1,value:r},{stiffness:s,damping:a,mass:c,duration:u,velocity:d,isResolvedFromDuration:I}=Oq({...o,velocity:-Eo(o.velocity||0)}),C=d||0,f=a/(2*Math.sqrt(s*c)),A=i-r,v=Eo(Math.sqrt(s/c)),h=Math.abs(A)<5;n||(n=h?.01:2),t||(t=h?.005:.5);let p;if(f<1){const b=_h(v,f);p=y=>{const Z=Math.exp(-f*v*y);return i-Z*((C+f*v*A)/b*Math.sin(b*y)+A*Math.cos(b*y))}}else if(f===1)p=b=>i-Math.exp(-v*b)*(A+(C+v*A)*b);else{const b=v*Math.sqrt(f*f-1);p=y=>{const Z=Math.exp(-f*v*y),G=Math.min(b*y,300);return i-Z*((C+f*v*A)*Math.sinh(G)+b*A*Math.cosh(G))/b}}return{calculatedDuration:I&&u||null,next:b=>{const y=p(b);if(I)l.done=b>=u;else{let Z=C;b!==0&&(f<1?Z=Ak(p,b,y):Z=0);const G=Math.abs(Z)<=n,V=Math.abs(i-y)<=t;l.done=G&&V}return l.value=l.done?i:y,l}}}function RG({keyframes:e,velocity:t=0,power:n=.8,timeConstant:o=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:l,min:s,max:a,restDelta:c=.5,restSpeed:u}){const d=e[0],I={done:!1,value:d},C=S=>s!==void 0&&S<s||a!==void 0&&S>a,f=S=>s===void 0?a:a===void 0||Math.abs(s-S)<Math.abs(a-S)?s:a;let A=n*t;const v=d+A,h=l===void 0?v:l(v);h!==v&&(A=h-d);const p=S=>-A*Math.exp(-S/o),b=S=>h+p(S),y=S=>{const k=p(S),B=b(S);I.done=Math.abs(k)<=c,I.value=I.done?h:B};let Z,G;const V=S=>{C(I.value)&&(Z=S,G=pk({keyframes:[I.value,f(I.value)],velocity:Ak(b,S,I.value),damping:r,stiffness:i,restDelta:c,restSpeed:u}))};return V(0),{calculatedDuration:null,next:S=>{let k=!1;return!G&&Z===void 0&&(k=!0,y(S),V(S)),Z!==void 0&&S>Z?G.next(S-Z):(!k&&y(S),I)}}}const _q=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Qe.update(t,!0),stop:()=>zo(t),now:()=>jt.isProcessing?jt.timestamp:performance.now()}},WG=2e4;function wG(e){let t=0;const n=50;let o=e.next(t);for(;!o.done&&t<WG;)t+=n,o=e.next(t);return t>=WG?1/0:t}const qq={decay:RG,inertia:RG,tween:bu,keyframes:bu,spring:pk};function yu({autoplay:e=!0,delay:t=0,driver:n=_q,keyframes:o,type:r="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:s="loop",onPlay:a,onStop:c,onComplete:u,onUpdate:d,...I}){let C=1,f=!1,A,v;const h=()=>{v=new Promise(x=>{A=x})};h();let p;const b=qq[r]||bu;let y;b!==bu&&typeof o[0]!="number"&&(y=hk([0,100],o,{clamp:!1}),o=[0,100]);const Z=b({...I,keyframes:o});let G;s==="mirror"&&(G=b({...I,keyframes:[...o].reverse(),velocity:-(I.velocity||0)}));let V="idle",S=null,k=null,B=null;Z.calculatedDuration===null&&i&&(Z.calculatedDuration=wG(Z));const{calculatedDuration:R}=Z;let W=1/0,w=1/0;R!==null&&(W=R+l,w=W*(i+1)-l);let X=0;const E=x=>{if(k===null)return;C>0&&(k=Math.min(k,x)),C<0&&(k=Math.min(x-w/C,k)),S!==null?X=S:X=Math.round(x-k)*C;const H=X-t*(C>=0?1:-1),K=C>=0?H<0:H>w;X=Math.max(H,0),V==="finished"&&S===null&&(X=w);let T=X,j=Z;if(i){const D=Math.min(X,w)/W;let O=Math.floor(D),ee=D%1;!ee&&D>=1&&(ee=1),ee===1&&O--,O=Math.min(O,i+1),!!(O%2)&&(s==="reverse"?(ee=1-ee,l&&(ee-=l/W)):s==="mirror"&&(j=G)),T=Jr(0,1,ee)*W}const J=K?{done:!1,value:o[0]}:j.next(T);y&&(J.value=y(J.value));let{done:z}=J;!K&&R!==null&&(z=C>=0?X>=w:X<=0);const U=S===null&&(V==="finished"||V==="running"&&z);return d&&d(J.value),U&&F(),J},M=()=>{p&&p.stop(),p=void 0},L=()=>{V="idle",M(),A(),h(),k=B=null},F=()=>{V="finished",u&&u(),M(),A()},Y=()=>{if(f)return;p||(p=n(E));const x=p.now();a&&a(),S!==null?k=x-S:(!k||V==="finished")&&(k=x),V==="finished"&&h(),B=k,S=null,V="running",p.start()};e&&Y();const N={then(x,H){return v.then(x,H)},get time(){return Eo(X)},set time(x){x=Rr(x),X=x,S!==null||!p||C===0?S=x:k=p.now()-x/C},get duration(){const x=Z.calculatedDuration===null?wG(Z):Z.calculatedDuration;return Eo(x)},get speed(){return C},set speed(x){x===C||!p||(C=x,N.time=Eo(X))},get state(){return V},play:Y,pause:()=>{V="paused",S=X},stop:()=>{f=!0,V!=="idle"&&(V="idle",c&&c(),L())},cancel:()=>{B!==null&&E(B),L()},complete:()=>{V="finished"},sample:x=>(k=0,E(x))};return N}function $q(e){let t;return()=>(t===void 0&&(t=e()),t)}const e$=$q(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),t$=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),jg=10,n$=2e4,o$=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Ow(t.ease);function r$(e,t,{onUpdate:n,onComplete:o,...r}){if(!(e$()&&t$.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let l=!1,s,a,c=!1;const u=()=>{a=new Promise(b=>{s=b})};u();let{keyframes:d,duration:I=300,ease:C,times:f}=r;if(o$(t,r)){const b=yu({...r,repeat:0,delay:0});let y={done:!1,value:d[0]};const Z=[];let G=0;for(;!y.done&&G<n$;)y=b.sample(G),Z.push(y.value),G+=jg;f=void 0,d=Z,I=G-jg,C="linear"}const A=Cq(e.owner.current,t,d,{...r,duration:I,ease:C,times:f}),v=()=>{c=!1,A.cancel()},h=()=>{c=!0,Qe.update(v),s(),u()};return A.onfinish=()=>{c||(e.set(mq(d,r)),o&&o(),h())},{then(b,y){return a.then(b,y)},attachTimeline(b){return A.timeline=b,A.onfinish=null,Ct},get time(){return Eo(A.currentTime||0)},set time(b){A.currentTime=Rr(b)},get speed(){return A.playbackRate},set speed(b){A.playbackRate=b},get duration(){return Eo(I)},play:()=>{l||(A.play(),zo(v))},pause:()=>A.pause(),stop:()=>{if(l=!0,A.playState==="idle")return;const{currentTime:b}=A;if(b){const y=yu({...r,autoplay:!1});e.setWithVelocity(y.sample(b-jg).value,y.sample(b).value,jg)}h()},complete:()=>{c||A.finish()},cancel:h}}function i$({keyframes:e,delay:t,onUpdate:n,onComplete:o}){const r=()=>(n&&n(e[e.length-1]),o&&o(),{time:0,speed:1,duration:0,play:Ct,pause:Ct,stop:Ct,then:i=>(i(),Promise.resolve()),cancel:Ct,complete:Ct});return t?yu({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const l$={type:"spring",stiffness:500,damping:25,restSpeed:10},s$=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),a$={type:"keyframes",duration:.8},g$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},c$=(e,{keyframes:t})=>t.length>2?a$:Li.has(e)?e.startsWith("scale")?s$(t[1]):l$:g$,qh=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Nr.test(t)||t==="0")&&!t.startsWith("url(")),u$=new Set(["brightness","contrast","saturate","opacity"]);function d$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=n.match(qd)||[];if(!o)return e;const r=n.replace(o,"");let i=u$.has(t)?1:0;return o!==n&&(i*=100),t+"("+i+r+")"}const I$=/([a-z-]*)\(.*?\)/g,$h={...Nr,getAnimatableNone:e=>{const t=e.match(I$);return t?t.map(d$).join(" "):e}},C$={...Xw,color:Pt,backgroundColor:Pt,outlineColor:Pt,fill:Pt,stroke:Pt,borderColor:Pt,borderTopColor:Pt,borderRightColor:Pt,borderBottomColor:Pt,borderLeftColor:Pt,filter:$h,WebkitFilter:$h},Ep=e=>C$[e];function bk(e,t){let n=Ep(e);return n!==$h&&(n=Nr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const yk=e=>/^0[^.\s]+$/.test(e);function m$(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||yk(e)}function h$(e,t,n,o){const r=qh(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const l=o.from!==void 0?o.from:e.get();let s;const a=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?l:i[c-1]),m$(i[c])&&a.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(s=i[c]);if(r&&a.length&&s)for(let c=0;c<a.length;c++){const u=a[c];i[u]=bk(t,s)}return i}function f$({when:e,delay:t,delayChildren:n,staggerChildren:o,staggerDirection:r,repeat:i,repeatType:l,repeatDelay:s,from:a,elapsed:c,...u}){return!!Object.keys(u).length}function Kp(e,t){return e[t]||e.default||e}const A$={skipAnimations:!1},Lp=(e,t,n,o={})=>r=>{const i=Kp(o,e)||{},l=i.delay||o.delay||0;let{elapsed:s=0}=o;s=s-Rr(l);const a=h$(t,e,n,i),c=a[0],u=a[a.length-1],d=qh(e,c),I=qh(e,u);let C={keyframes:a,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-s,onUpdate:f=>{t.set(f),i.onUpdate&&i.onUpdate(f)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(f$(i)||(C={...C,...c$(e,C)}),C.duration&&(C.duration=Rr(C.duration)),C.repeatDelay&&(C.repeatDelay=Rr(C.repeatDelay)),!d||!I||Iq.current||i.type===!1||A$.skipAnimations)return i$(C);if(!o.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const f=r$(t,e,C);if(f)return f}return yu(C)};function vu(e){return!!(gn(e)&&e.add)}const vk=e=>/^\-?\d*\.?\d+$/.test(e);function Mp(e,t){e.indexOf(t)===-1&&e.push(t)}function Tp(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class jp{constructor(){this.subscriptions=[]}add(t){return Mp(this.subscriptions,t),()=>Tp(this.subscriptions,t)}notify(t,n,o){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,o);else for(let i=0;i<r;i++){const l=this.subscriptions[i];l&&l(t,n,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const p$=e=>!isNaN(parseFloat(e));class b${constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(o,r=!0)=>{this.prev=this.current,this.current=o;const{delta:i,timestamp:l}=jt;this.lastUpdated!==l&&(this.timeDelta=i,this.lastUpdated=l,Qe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Qe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:o})=>{o!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=p$(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new jp);const o=this.events[t].add(n);return t==="change"?()=>{o(),Qe.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,o){this.set(n),this.prev=t,this.timeDelta=o}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?fk(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yl(e,t){return new b$(e,t)}const Zk=e=>t=>t.test(e),y$={test:e=>e==="auto",parse:e=>e},Gk=[Mi,Ge,Ao,tr,R_,V_,y$],bs=e=>Gk.find(Zk(e)),v$=[...Gk,Pt,Nr],Z$=e=>v$.find(Zk(e));function G$(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Yl(n))}function B$(e,t){const n=eI(e,t);let{transitionEnd:o={},transition:r={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...o};for(const l in i){const s=M_(i[l]);G$(e,l,s)}}function S$(e,t,n){var o,r;const i=Object.keys(t).filter(s=>!e.hasValue(s)),l=i.length;if(l)for(let s=0;s<l;s++){const a=i[s],c=t[a];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(r=(o=n[a])!==null&&o!==void 0?o:e.readValue(a))!==null&&r!==void 0?r:t[a]),u!=null&&(typeof u=="string"&&(vk(u)||yk(u))?u=parseFloat(u):!Z$(u)&&Nr.test(c)&&(u=bk(a,c)),e.addValue(a,Yl(u,{owner:e})),n[a]===void 0&&(n[a]=u),u!==null&&e.setBaseTarget(a,u))}}function V$(e,t){return t?(t[e]||t.default||t).from:void 0}function R$(e,t,n){const o={};for(const r in e){const i=V$(r,t);if(i!==void 0)o[r]=i;else{const l=n.getValue(r);l&&(o[r]=l.get())}}return o}function W$({protectedKeys:e,needsAnimating:t},n){const o=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,o}function w$(e,t){const n=e.get();if(Array.isArray(t)){for(let o=0;o<t.length;o++)if(t[o]!==n)return!0}else return n!==t}function Bk(e,t,{delay:n=0,transitionOverride:o,type:r}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:l,...s}=e.makeTargetAnimatable(t);const a=e.getValue("willChange");o&&(i=o);const c=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const d in s){const I=e.getValue(d),C=s[d];if(!I||C===void 0||u&&W$(u,d))continue;const f={delay:n,elapsed:0,...Kp(i||{},d)};if(window.HandoffAppearAnimations){const h=e.getProps()[Sw];if(h){const p=window.HandoffAppearAnimations(h,d,I,Qe);p!==null&&(f.elapsed=p,f.isHandoff=!0)}}let A=!f.isHandoff&&!w$(I,C);if(f.type==="spring"&&(I.getVelocity()||f.velocity)&&(A=!1),I.animation&&(A=!1),A)continue;I.start(Lp(d,I,C,e.shouldReduceMotion&&Li.has(d)?{type:!1}:f));const v=I.animation;vu(a)&&(a.add(d),v.then(()=>a.remove(d))),c.push(v)}return l&&Promise.all(c).then(()=>{l&&B$(e,l)}),c}function ef(e,t,n={}){const o=eI(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(r=n.transitionOverride);const i=o?()=>Promise.all(Bk(e,o,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(a=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=r;return k$(e,t,c+a,u,d,n)}:()=>Promise.resolve(),{when:s}=r;if(s){const[a,c]=s==="beforeChildren"?[i,l]:[l,i];return a().then(()=>c())}else return Promise.all([i(),l(n.delay)])}function k$(e,t,n=0,o=0,r=1,i){const l=[],s=(e.variantChildren.size-1)*o,a=r===1?(c=0)=>c*o:(c=0)=>s-c*o;return Array.from(e.variantChildren).sort(x$).forEach((c,u)=>{c.notify("AnimationStart",t),l.push(ef(c,t,{...i,delay:n+a(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(l)}function x$(e,t){return e.sortNodePosition(t)}function X$(e,t,n={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const r=t.map(i=>ef(e,i,n));o=Promise.all(r)}else if(typeof t=="string")o=ef(e,t,n);else{const r=typeof t=="function"?eI(e,t,n.custom):t;o=Promise.all(Bk(e,r,n))}return o.then(()=>e.notify("AnimationComplete",t))}const J$=[...Bp].reverse(),N$=Bp.length;function Y$(e){return t=>Promise.all(t.map(({animation:n,options:o})=>X$(e,n,o)))}function H$(e){let t=Y$(e);const n=E$();let o=!0;const r=(a,c)=>{const u=eI(e,c);if(u){const{transition:d,transitionEnd:I,...C}=u;a={...a,...C,...I}}return a};function i(a){t=a(e)}function l(a,c){const u=e.getProps(),d=e.getVariantContext(!0)||{},I=[],C=new Set;let f={},A=1/0;for(let h=0;h<N$;h++){const p=J$[h],b=n[p],y=u[p]!==void 0?u[p]:d[p],Z=ha(y),G=p===c?b.isActive:null;G===!1&&(A=h);let V=y===d[p]&&y!==u[p]&&Z;if(V&&o&&e.manuallyAnimateOnMount&&(V=!1),b.protectedKeys={...f},!b.isActive&&G===null||!y&&!b.prevProp||Od(y)||typeof y=="boolean")continue;let k=F$(b.prevProp,y)||p===c&&b.isActive&&!V&&Z||h>A&&Z,B=!1;const R=Array.isArray(y)?y:[y];let W=R.reduce(r,{});G===!1&&(W={});const{prevResolvedValues:w={}}=b,X={...w,...W},E=M=>{k=!0,C.has(M)&&(B=!0,C.delete(M)),b.needsAnimating[M]=!0};for(const M in X){const L=W[M],F=w[M];if(f.hasOwnProperty(M))continue;let Y=!1;Au(L)&&Au(F)?Y=!Pw(L,F):Y=L!==F,Y?L!==void 0?E(M):C.add(M):L!==void 0&&C.has(M)?E(M):b.protectedKeys[M]=!0}b.prevProp=y,b.prevResolvedValues=W,b.isActive&&(f={...f,...W}),o&&e.blockInitialAnimation&&(k=!1),k&&(!V||B)&&I.push(...R.map(M=>({animation:M,options:{type:p,...a}})))}if(C.size){const h={};C.forEach(p=>{const b=e.getBaseTarget(p);b!==void 0&&(h[p]=b)}),I.push({animation:h})}let v=!!I.length;return o&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),o=!1,v?t(I):Promise.resolve()}function s(a,c,u){var d;if(n[a].isActive===c)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(C=>{var f;return(f=C.animationState)===null||f===void 0?void 0:f.setActive(a,c)}),n[a].isActive=c;const I=l(u,a);for(const C in n)n[C].protectedKeys={};return I}return{animateChanges:l,setActive:s,setAnimateFunction:i,getState:()=>n}}function F$(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Pw(t,e):!1}function ei(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function E$(){return{animate:ei(!0),whileInView:ei(),whileHover:ei(),whileTap:ei(),whileDrag:ei(),whileFocus:ei(),exit:ei()}}class K$ extends Pr{constructor(t){super(t),t.animationState||(t.animationState=H$(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Od(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let L$=0;class M$ extends Pr{constructor(){super(...arguments),this.id=L$++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:o}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t,{custom:o??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const T$={animation:{Feature:K$},exit:{Feature:M$}},kG=(e,t)=>Math.abs(e-t);function j$(e,t){const n=kG(e.x,t.x),o=kG(e.y,t.y);return Math.sqrt(n**2+o**2)}class Sk{constructor(t,n,{transformPagePoint:o,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=QC(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,C=j$(d.offset,{x:0,y:0})>=3;if(!I&&!C)return;const{point:f}=d,{timestamp:A}=jt;this.history.push({...f,timestamp:A});const{onStart:v,onMove:h}=this.handlers;I||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),h&&h(this.lastMoveEvent,d)},this.handlePointerMove=(d,I)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=PC(I,this.transformPagePoint),Qe.update(this.updatePoint,!0)},this.handlePointerUp=(d,I)=>{this.end();const{onEnd:C,onSessionEnd:f,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=QC(d.type==="pointercancel"?this.lastMoveEventInfo:PC(I,this.transformPagePoint),this.history);this.startEvent&&C&&C(d,v),f&&f(d,v)},!Tw(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=o,this.contextWindow=r||window;const l=$d(t),s=PC(l,this.transformPagePoint),{point:a}=s,{timestamp:c}=jt;this.history=[{...a,timestamp:c}];const{onSessionStart:u}=n;u&&u(t,QC(s,this.history)),this.removeListeners=Vr(Fo(this.contextWindow,"pointermove",this.handlePointerMove),Fo(this.contextWindow,"pointerup",this.handlePointerUp),Fo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zo(this.updatePoint)}}function PC(e,t){return t?{point:t(e.point)}:e}function xG(e,t){return{x:e.x-t.x,y:e.y-t.y}}function QC({point:e},t){return{point:e,delta:xG(e,Vk(t)),offset:xG(e,z$(t)),velocity:D$(t,.1)}}function z$(e){return e[0]}function Vk(e){return e[e.length-1]}function D$(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const r=Vk(e);for(;n>=0&&(o=e[n],!(r.timestamp-o.timestamp>Rr(t)));)n--;if(!o)return{x:0,y:0};const i=Eo(r.timestamp-o.timestamp);if(i===0)return{x:0,y:0};const l={x:(r.x-o.x)/i,y:(r.y-o.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Bn(e){return e.max-e.min}function tf(e,t=0,n=.01){return Math.abs(e-t)<=n}function XG(e,t,n,o=.5){e.origin=o,e.originPoint=it(t.min,t.max,e.origin),e.scale=Bn(n)/Bn(t),(tf(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=it(n.min,n.max,e.origin)-e.originPoint,(tf(e.translate)||isNaN(e.translate))&&(e.translate=0)}function js(e,t,n,o){XG(e.x,t.x,n.x,o?o.originX:void 0),XG(e.y,t.y,n.y,o?o.originY:void 0)}function JG(e,t,n){e.min=n.min+t.min,e.max=e.min+Bn(t)}function U$(e,t,n){JG(e.x,t.x,n.x),JG(e.y,t.y,n.y)}function NG(e,t,n){e.min=t.min-n.min,e.max=e.min+Bn(t)}function zs(e,t,n){NG(e.x,t.x,n.x),NG(e.y,t.y,n.y)}function P$(e,{min:t,max:n},o){return t!==void 0&&e<t?e=o?it(t,e,o.min):Math.max(e,t):n!==void 0&&e>n&&(e=o?it(n,e,o.max):Math.min(e,n)),e}function YG(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Q$(e,{top:t,left:n,bottom:o,right:r}){return{x:YG(e.x,n,r),y:YG(e.y,t,o)}}function HG(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}function O$(e,t){return{x:HG(e.x,t.x),y:HG(e.y,t.y)}}function _$(e,t){let n=.5;const o=Bn(e),r=Bn(t);return r>o?n=Aa(t.min,t.max-o,e.min):o>r&&(n=Aa(e.min,e.max-r,t.min)),Jr(0,1,n)}function q$(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const nf=.35;function $$(e=nf){return e===!1?e=0:e===!0&&(e=nf),{x:FG(e,"left","right"),y:FG(e,"top","bottom")}}function FG(e,t,n){return{min:EG(e,t),max:EG(e,n)}}function EG(e,t){return typeof e=="number"?e:e[t]||0}const KG=()=>({translate:0,scale:1,origin:0,originPoint:0}),ul=()=>({x:KG(),y:KG()}),LG=()=>({min:0,max:0}),yt=()=>({x:LG(),y:LG()});function Hn(e){return[e("x"),e("y")]}function Rk({top:e,left:t,right:n,bottom:o}){return{x:{min:t,max:n},y:{min:e,max:o}}}function eee({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function tee(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}function OC(e){return e===void 0||e===1}function of({scale:e,scaleX:t,scaleY:n}){return!OC(e)||!OC(t)||!OC(n)}function ii(e){return of(e)||Wk(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Wk(e){return MG(e.x)||MG(e.y)}function MG(e){return e&&e!=="0%"}function Zu(e,t,n){const o=e-n,r=t*o;return n+r}function TG(e,t,n,o,r){return r!==void 0&&(e=Zu(e,r,o)),Zu(e,n,o)+t}function rf(e,t=0,n=1,o,r){e.min=TG(e.min,t,n,o,r),e.max=TG(e.max,t,n,o,r)}function wk(e,{x:t,y:n}){rf(e.x,t.translate,t.scale,t.originPoint),rf(e.y,n.translate,n.scale,n.originPoint)}function nee(e,t,n,o=!1){const r=n.length;if(!r)return;t.x=t.y=1;let i,l;for(let s=0;s<r;s++){i=n[s],l=i.projectionDelta;const a=i.instance;a&&a.style&&a.style.display==="contents"||(o&&i.options.layoutScroll&&i.scroll&&i!==i.root&&dl(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,wk(e,l)),o&&ii(i.latestValues)&&dl(e,i.latestValues))}t.x=jG(t.x),t.y=jG(t.y)}function jG(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function sr(e,t){e.min=e.min+t,e.max=e.max+t}function zG(e,t,[n,o,r]){const i=t[r]!==void 0?t[r]:.5,l=it(e.min,e.max,i);rf(e,t[n],t[o],l,t.scale)}const oee=["x","scaleX","originX"],ree=["y","scaleY","originY"];function dl(e,t){zG(e.x,t,oee),zG(e.y,t,ree)}function kk(e,t){return Rk(tee(e.getBoundingClientRect(),t))}function iee(e,t,n){const o=kk(e,n),{scroll:r}=t;return r&&(sr(o.x,r.offset.x),sr(o.y,r.offset.y)),o}const xk=({current:e})=>e?e.ownerDocument.defaultView:null,lee=new WeakMap;class see{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor($d(u,"page").point)},i=(u,d)=>{const{drag:I,dragPropagation:C,onDragStart:f}=this.getProps();if(I&&!C&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=zw(I),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hn(v=>{let h=this.getAxisMotionValue(v).get()||0;if(Ao.test(h)){const{projection:p}=this.visualElement;if(p&&p.layout){const b=p.layout.layoutBox[v];b&&(h=Bn(b)*(parseFloat(h)/100))}}this.originPoint[v]=h}),f&&Qe.update(()=>f(u,d),!1,!0);const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},l=(u,d)=>{const{dragPropagation:I,dragDirectionLock:C,onDirectionLock:f,onDrag:A}=this.getProps();if(!I&&!this.openGlobalLock)return;const{offset:v}=d;if(C&&this.currentDirection===null){this.currentDirection=aee(v),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),A&&A(u,d)},s=(u,d)=>this.stop(u,d),a=()=>Hn(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Sk(t,{onSessionStart:r,onStart:i,onMove:l,onSessionEnd:s,resumeAnimation:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:xk(this.visualElement)})}stop(t,n){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Qe.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,o){const{drag:r}=this.getProps();if(!o||!zg(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let l=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(l=P$(l,this.constraints[t],this.elastic[t])),i.set(l)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:o}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&gl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=Q$(r.layoutBox,n):this.constraints=!1,this.elastic=$$(o),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Hn(l=>{this.getAxisMotionValue(l)&&(this.constraints[l]=q$(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!gl(t))return!1;const o=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=iee(o,r.root,this.visualElement.getTransformPagePoint());let l=O$(r.layout.layoutBox,i);if(n){const s=n(eee(l));this.hasMutatedConstraints=!!s,s&&(l=Rk(s))}return l}startAnimation(t){const{drag:n,dragMomentum:o,dragElastic:r,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:s}=this.getProps(),a=this.constraints||{},c=Hn(u=>{if(!zg(u,n,this.currentDirection))return;let d=a&&a[u]||{};l&&(d={min:0,max:0});const I=r?200:1e6,C=r?40:1e7,f={type:"inertia",velocity:o?t[u]:0,bounceStiffness:I,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,f)});return Promise.all(c).then(s)}startAxisValueAnimation(t,n){const o=this.getAxisMotionValue(t);return o.start(Lp(t,o,0,n))}stopAnimation(){Hn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Hn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),o=this.visualElement.getProps(),r=o[n];return r||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){Hn(n=>{const{drag:o}=this.getProps();if(!zg(n,o,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:s}=r.layout.layoutBox[n];i.set(t[n]-it(l,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:o}=this.visualElement;if(!gl(n)||!o||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Hn(l=>{const s=this.getAxisMotionValue(l);if(s){const a=s.get();r[l]=_$({min:a,max:a},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),Hn(l=>{if(!zg(l,t,null))return;const s=this.getAxisMotionValue(l),{min:a,max:c}=this.constraints[l];s.set(it(a,c,r[l]))})}addListeners(){if(!this.visualElement.current)return;lee.set(this.visualElement,this);const t=this.visualElement.current,n=Fo(t,"pointerdown",a=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(a)}),o=()=>{const{dragConstraints:a}=this.getProps();gl(a)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",o);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),o();const l=Xo(window,"resize",()=>this.scalePositionWithinConstraints()),s=r.addEventListener("didUpdate",({delta:a,hasLayoutChanged:c})=>{this.isDragging&&c&&(Hn(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=a[u].translate,d.set(d.get()+a[u].translate))}),this.visualElement.render())});return()=>{l(),n(),i(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:o=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:l=nf,dragMomentum:s=!0}=t;return{...t,drag:n,dragDirectionLock:o,dragPropagation:r,dragConstraints:i,dragElastic:l,dragMomentum:s}}}function zg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function aee(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class gee extends Pr{constructor(t){super(t),this.removeGroupControls=Ct,this.removeListeners=Ct,this.controls=new see(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ct}unmount(){this.removeGroupControls(),this.removeListeners()}}const DG=e=>(t,n)=>{e&&Qe.update(()=>e(t,n))};class cee extends Pr{constructor(){super(...arguments),this.removePointerDownListener=Ct}onPointerDown(t){this.session=new Sk(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:o,onPanEnd:r}=this.node.getProps();return{onSessionStart:DG(t),onStart:DG(n),onMove:o,onEnd:(i,l)=>{delete this.session,r&&Qe.update(()=>r(i,l))}}}mount(){this.removePointerDownListener=Fo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function uee(){const e=m.useContext(Pd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:o}=e,r=m.useId();return m.useEffect(()=>o(r),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}const Cc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function UG(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ys={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ge.test(e))e=parseFloat(e);else return e;const n=UG(e,t.target.x),o=UG(e,t.target.y);return`${n}% ${o}%`}},dee={correct:(e,{treeScale:t,projectionDelta:n})=>{const o=e,r=Nr.parse(e);if(r.length>5)return o;const i=Nr.createTransformer(e),l=typeof r[0]!="number"?1:0,s=n.x.scale*t.x,a=n.y.scale*t.y;r[0+l]/=s,r[1+l]/=a;const c=it(s,a,.5);return typeof r[2+l]=="number"&&(r[2+l]/=c),typeof r[3+l]=="number"&&(r[3+l]/=c),i(r)}};class Iee extends P.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o,layoutId:r}=this.props,{projection:i}=t;b_(Cee),i&&(n.group&&n.group.add(i),o&&o.register&&r&&o.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Cc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:o,drag:r,isPresent:i}=this.props,l=o.projection;return l&&(l.isPresent=i,r||t.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?l.promote():l.relegate()||Qe.postRender(()=>{const s=l.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),o&&o.deregister&&o.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Xk(e){const[t,n]=uee(),o=m.useContext(Vp);return P.createElement(Iee,{...e,layoutGroup:o,switchLayoutGroup:m.useContext(Rw),isPresent:t,safeToRemove:n})}const Cee={borderRadius:{...ys,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ys,borderTopRightRadius:ys,borderBottomLeftRadius:ys,borderBottomRightRadius:ys,boxShadow:dee},Jk=["TopLeft","TopRight","BottomLeft","BottomRight"],mee=Jk.length,PG=e=>typeof e=="string"?parseFloat(e):e,QG=e=>typeof e=="number"||Ge.test(e);function hee(e,t,n,o,r,i){r?(e.opacity=it(0,n.opacity!==void 0?n.opacity:1,fee(o)),e.opacityExit=it(t.opacity!==void 0?t.opacity:1,0,Aee(o))):i&&(e.opacity=it(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,o));for(let l=0;l<mee;l++){const s=`border${Jk[l]}Radius`;let a=OG(t,s),c=OG(n,s);if(a===void 0&&c===void 0)continue;a||(a=0),c||(c=0),a===0||c===0||QG(a)===QG(c)?(e[s]=Math.max(it(PG(a),PG(c),o),0),(Ao.test(c)||Ao.test(a))&&(e[s]+="%")):e[s]=c}(t.rotate||n.rotate)&&(e.rotate=it(t.rotate||0,n.rotate||0,o))}function OG(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const fee=Nk(0,.5,ok),Aee=Nk(.5,.95,Ct);function Nk(e,t,n){return o=>o<e?0:o>t?1:n(Aa(e,t,o))}function _G(e,t){e.min=t.min,e.max=t.max}function Nn(e,t){_G(e.x,t.x),_G(e.y,t.y)}function qG(e,t,n,o,r){return e-=t,e=Zu(e,1/n,o),r!==void 0&&(e=Zu(e,1/r,o)),e}function pee(e,t=0,n=1,o=.5,r,i=e,l=e){if(Ao.test(t)&&(t=parseFloat(t),t=it(l.min,l.max,t/100)-l.min),typeof t!="number")return;let s=it(i.min,i.max,o);e===i&&(s-=t),e.min=qG(e.min,t,n,s,r),e.max=qG(e.max,t,n,s,r)}function $G(e,t,[n,o,r],i,l){pee(e,t[n],t[o],t[r],t.scale,i,l)}const bee=["x","scaleX","originX"],yee=["y","scaleY","originY"];function e1(e,t,n,o){$G(e.x,t,bee,n?n.x:void 0,o?o.x:void 0),$G(e.y,t,yee,n?n.y:void 0,o?o.y:void 0)}function t1(e){return e.translate===0&&e.scale===1}function Yk(e){return t1(e.x)&&t1(e.y)}function vee(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Hk(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function n1(e){return Bn(e.x)/Bn(e.y)}class Zee{constructor(){this.members=[]}add(t){Mp(this.members,t),t.scheduleRender()}remove(t){if(Tp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let o;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){o=i;break}}return o?(this.promote(o),!0):!1}promote(t,n){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,n&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:o}=t;n.onExitComplete&&n.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function o1(e,t,n){let o="";const r=e.x.translate/t.x,i=e.y.translate/t.y;if((r||i)&&(o=`translate3d(${r}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:a,rotateX:c,rotateY:u}=n;a&&(o+=`rotate(${a}deg) `),c&&(o+=`rotateX(${c}deg) `),u&&(o+=`rotateY(${u}deg) `)}const l=e.x.scale*t.x,s=e.y.scale*t.y;return(l!==1||s!==1)&&(o+=`scale(${l}, ${s})`),o||"none"}const Gee=(e,t)=>e.depth-t.depth;class Bee{constructor(){this.children=[],this.isDirty=!1}add(t){Mp(this.children,t),this.isDirty=!0}remove(t){Tp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Gee),this.isDirty=!1,this.children.forEach(t)}}function See(e,t){const n=performance.now(),o=({timestamp:r})=>{const i=r-n;i>=t&&(zo(o),e(i-t))};return Qe.read(o,!0),()=>zo(o)}function Vee(e){window.MotionDebug&&window.MotionDebug.record(e)}function Ree(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Wee(e,t,n){const o=gn(e)?e:Yl(e);return o.start(Lp("",o,t,n)),o.animation}const r1=["","X","Y","Z"],wee={visibility:"hidden"},i1=1e3;let kee=0;const li={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Fk({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:o,resetTransform:r}){return class{constructor(l={},s=t==null?void 0:t()){this.id=kee++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,li.totalNodes=li.resolvedTargetDeltas=li.recalculatedProjection=0,this.nodes.forEach(Jee),this.nodes.forEach(Eee),this.nodes.forEach(Kee),this.nodes.forEach(Nee),Vee(li)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Bee)}addEventListener(l,s){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new jp),this.eventHandlers.get(l).add(s)}notifyListeners(l,...s){const a=this.eventHandlers.get(l);a&&a.notify(...s)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Ree(l),this.instance=l;const{layoutId:a,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(c||a)&&(this.isLayoutDirty=!0),e){let d;const I=()=>this.root.updateBlockedByResize=!1;e(l,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=See(I,250),Cc.hasAnimatedSinceResize&&(Cc.hasAnimatedSinceResize=!1,this.nodes.forEach(s1))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:I,hasRelativeTargetChanged:C,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||u.getDefaultTransition()||zee,{onLayoutAnimationStart:v,onLayoutAnimationComplete:h}=u.getProps(),p=!this.targetLayout||!Hk(this.targetLayout,f)||C,b=!I&&C;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||I&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const y={...Kp(A,"layout"),onPlay:v,onComplete:h};(u.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y)}else I||s1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Lee),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:s,layout:a}=this.options;if(s===void 0&&!a)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(l1);return}this.isUpdating||this.nodes.forEach(Hee),this.isUpdating=!1,this.nodes.forEach(Fee),this.nodes.forEach(xee),this.nodes.forEach(Xee),this.clearAllSnapshots();const s=performance.now();jt.delta=Jr(0,1e3/60,s-jt.timestamp),jt.timestamp=s,jt.isProcessing=!0,KC.update.process(jt),KC.preRender.process(jt),KC.render.process(jt),jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Yee),this.sharedNodes.forEach(Mee)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let s=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(s=!1),s&&(this.scroll={animationId:this.root.animationId,phase:l,isRoot:o(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform,s=this.projectionDelta&&!Yk(this.projectionDelta),a=this.getTransformTemplate(),c=a?a(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;l&&(s||ii(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const s=this.measurePageBox();let a=this.removeElementScroll(s);return l&&(a=this.removeTransform(a)),Dee(a),{animationId:this.root.animationId,measuredBox:s,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return yt();const s=l.measureViewportBox(),{scroll:a}=this.root;return a&&(sr(s.x,a.offset.x),sr(s.y,a.offset.y)),s}removeElementScroll(l){const s=yt();Nn(s,l);for(let a=0;a<this.path.length;a++){const c=this.path[a],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){Nn(s,l);const{scroll:I}=this.root;I&&(sr(s.x,-I.offset.x),sr(s.y,-I.offset.y))}sr(s.x,u.offset.x),sr(s.y,u.offset.y)}}return s}applyTransform(l,s=!1){const a=yt();Nn(a,l);for(let c=0;c<this.path.length;c++){const u=this.path[c];!s&&u.options.layoutScroll&&u.scroll&&u!==u.root&&dl(a,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ii(u.latestValues)&&dl(a,u.latestValues)}return ii(this.latestValues)&&dl(a,this.latestValues),a}removeTransform(l){const s=yt();Nn(s,l);for(let a=0;a<this.path.length;a++){const c=this.path[a];if(!c.instance||!ii(c.latestValues))continue;of(c.latestValues)&&c.updateSnapshot();const u=yt(),d=c.measurePageBox();Nn(u,d),e1(s,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return ii(this.latestValues)&&e1(s,this.latestValues),s}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var s;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(l||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:I}=this.options;if(!(!this.layout||!(d||I))){if(this.resolvedRelativeTargetAt=jt.timestamp,!this.targetDelta&&!this.relativeTarget){const C=this.getClosestProjectingParent();C&&C.layout&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),zs(this.relativeTargetOrigin,this.layout.layoutBox,C.layout.layoutBox),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),U$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nn(this.target,this.layout.layoutBox),wk(this.target,this.targetDelta)):Nn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const C=this.getClosestProjectingParent();C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),zs(this.relativeTargetOrigin,this.target,C.target),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}li.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||of(this.parent.latestValues)||Wk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const s=this.getLead(),a=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===jt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Nn(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,C=this.treeScale.y;nee(this.layoutCorrected,this.treeScale,this.path,a),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox);const{target:f}=s;if(!f){this.projectionTransform&&(this.projectionDelta=ul(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ul(),this.projectionDeltaWithTransform=ul());const A=this.projectionTransform;js(this.projectionDelta,this.layoutCorrected,f,this.latestValues),this.projectionTransform=o1(this.projectionDelta,this.treeScale),(this.projectionTransform!==A||this.treeScale.x!==I||this.treeScale.y!==C)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f)),li.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),l){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(l,s=!1){const a=this.snapshot,c=a?a.latestValues:{},u={...this.latestValues},d=ul();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const I=yt(),C=a?a.source:void 0,f=this.layout?this.layout.source:void 0,A=C!==f,v=this.getStack(),h=!v||v.members.length<=1,p=!!(A&&!h&&this.options.crossfade===!0&&!this.path.some(jee));this.animationProgress=0;let b;this.mixTargetDelta=y=>{const Z=y/1e3;a1(d.x,l.x,Z),a1(d.y,l.y,Z),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zs(I,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Tee(this.relativeTarget,this.relativeTargetOrigin,I,Z),b&&vee(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=yt()),Nn(b,this.relativeTarget)),A&&(this.animationValues=u,hee(u,c,this.latestValues,Z,p,h)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qe.update(()=>{Cc.hasAnimatedSinceResize=!0,this.currentAnimation=Wee(0,i1,{...l,onUpdate:s=>{this.mixTargetDelta(s),l.onUpdate&&l.onUpdate(s)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(i1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:s,target:a,layout:c,latestValues:u}=l;if(!(!s||!a||!c)){if(this!==l&&this.layout&&c&&Ek(this.options.animationType,this.layout.layoutBox,c.layoutBox)){a=this.target||yt();const d=Bn(this.layout.layoutBox.x);a.x.min=l.target.x.min,a.x.max=a.x.min+d;const I=Bn(this.layout.layoutBox.y);a.y.min=l.target.y.min,a.y.max=a.y.min+I}Nn(s,a),dl(s,u),js(this.projectionDeltaWithTransform,this.layoutCorrected,s,u)}}registerSharedNode(l,s){this.sharedNodes.has(l)||this.sharedNodes.set(l,new Zee),this.sharedNodes.get(l).add(s);const c=s.options.initialPromotionConfig;s.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(s):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:s}=this.options;return s?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:s}=this.options;return s?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:s,preserveFollowOpacity:a}={}){const c=this.getStack();c&&c.promote(this,a),l&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetRotation(){const{visualElement:l}=this.options;if(!l)return;let s=!1;const{latestValues:a}=l;if((a.rotate||a.rotateX||a.rotateY||a.rotateZ)&&(s=!0),!s)return;const c={};for(let u=0;u<r1.length;u++){const d="rotate"+r1[u];a[d]&&(c[d]=a[d],l.setStaticValue(d,0))}l.render();for(const u in c)l.setStaticValue(u,c[u]);l.scheduleRender()}getProjectionStyles(l){var s,a;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wee;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Ic(l==null?void 0:l.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=Ic(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ii(this.latestValues)&&(A.transform=u?u({},""):"none",this.hasProjected=!1),A}const I=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=o1(this.projectionDeltaWithTransform,this.treeScale,I),u&&(c.transform=u(I,c.transform));const{x:C,y:f}=this.projectionDelta;c.transformOrigin=`${C.origin*100}% ${f.origin*100}% 0`,d.animationValues?c.opacity=d===this?(a=(s=I.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&a!==void 0?a:1:this.preserveOpacity?this.latestValues.opacity:I.opacityExit:c.opacity=d===this?I.opacity!==void 0?I.opacity:"":I.opacityExit!==void 0?I.opacityExit:0;for(const A in hu){if(I[A]===void 0)continue;const{correct:v,applyTo:h}=hu[A],p=c.transform==="none"?I[A]:v(I[A],d);if(h){const b=h.length;for(let y=0;y<b;y++)c[h[y]]=p}else c[A]=p}return this.options.layoutId&&(c.pointerEvents=d===this?Ic(l==null?void 0:l.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var s;return(s=l.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(l1),this.root.sharedNodes.clear()}}}function xee(e){e.updateLayout()}function Xee(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:r}=e.layout,{animationType:i}=e.options,l=n.source!==e.layout.source;i==="size"?Hn(d=>{const I=l?n.measuredBox[d]:n.layoutBox[d],C=Bn(I);I.min=o[d].min,I.max=I.min+C}):Ek(i,n.layoutBox,o)&&Hn(d=>{const I=l?n.measuredBox[d]:n.layoutBox[d],C=Bn(o[d]);I.max=I.min+C,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+C)});const s=ul();js(s,o,n.layoutBox);const a=ul();l?js(a,e.applyTransform(r,!0),n.measuredBox):js(a,o,n.layoutBox);const c=!Yk(s);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:I,layout:C}=d;if(I&&C){const f=yt();zs(f,n.layoutBox,I.layoutBox);const A=yt();zs(A,o,C.layoutBox),Hk(f,A)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=A,e.relativeTargetOrigin=f,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:n,delta:a,layoutDelta:s,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function Jee(e){li.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Nee(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Yee(e){e.clearSnapshot()}function l1(e){e.clearMeasurements()}function Hee(e){e.isLayoutDirty=!1}function Fee(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function s1(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Eee(e){e.resolveTargetDelta()}function Kee(e){e.calcProjection()}function Lee(e){e.resetRotation()}function Mee(e){e.removeLeadSnapshot()}function a1(e,t,n){e.translate=it(t.translate,0,n),e.scale=it(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function g1(e,t,n,o){e.min=it(t.min,n.min,o),e.max=it(t.max,n.max,o)}function Tee(e,t,n,o){g1(e.x,t.x,n.x,o),g1(e.y,t.y,n.y,o)}function jee(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const zee={duration:.45,ease:[.4,0,.1,1]},c1=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),u1=c1("applewebkit/")&&!c1("chrome/")?Math.round:Ct;function d1(e){e.min=u1(e.min),e.max=u1(e.max)}function Dee(e){d1(e.x),d1(e.y)}function Ek(e,t,n){return e==="position"||e==="preserve-aspect"&&!tf(n1(t),n1(n),.2)}const Uee=Fk({attachResizeListener:(e,t)=>Xo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_C={current:void 0},Kk=Fk({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!_C.current){const e=new Uee({});e.mount(window),e.setOptions({layoutScroll:!0}),_C.current=e}return _C.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Pee={pan:{Feature:cee},drag:{Feature:gee,ProjectionNode:Kk,MeasureLayout:Xk}},Qee=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Oee(e){const t=Qee.exec(e);if(!t)return[,];const[,n,o]=t;return[n,o]}function lf(e,t,n=1){const[o,r]=Oee(e);if(!o)return;const i=window.getComputedStyle(t).getPropertyValue(o);if(i){const l=i.trim();return vk(l)?parseFloat(l):l}else return Ph(r)?lf(r,t,n+1):r}function _ee(e,{...t},n){const o=e.current;if(!(o instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(r=>{const i=r.get();if(!Ph(i))return;const l=lf(i,o);l&&r.set(l)});for(const r in t){const i=t[r];if(!Ph(i))continue;const l=lf(i,o);l&&(t[r]=l,n||(n={}),n[r]===void 0&&(n[r]=i))}return{target:t,transitionEnd:n}}const qee=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Lk=e=>qee.has(e),$ee=e=>Object.keys(e).some(Lk),I1=e=>e===Mi||e===Ge,C1=(e,t)=>parseFloat(e.split(", ")[t]),m1=(e,t)=>(n,{transform:o})=>{if(o==="none"||!o)return 0;const r=o.match(/^matrix3d\((.+)\)$/);if(r)return C1(r[1],t);{const i=o.match(/^matrix\((.+)\)$/);return i?C1(i[1],e):0}},ete=new Set(["x","y","z"]),tte=Ea.filter(e=>!ete.has(e));function nte(e){const t=[];return tte.forEach(n=>{const o=e.getValue(n);o!==void 0&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Hl={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:m1(4,13),y:m1(5,14)};Hl.translateX=Hl.x;Hl.translateY=Hl.y;const ote=(e,t,n)=>{const o=t.measureViewportBox(),r=t.current,i=getComputedStyle(r),{display:l}=i,s={};l==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(c=>{s[c]=Hl[c](o,i)}),t.render();const a=t.measureViewportBox();return n.forEach(c=>{const u=t.getValue(c);u&&u.jump(s[c]),e[c]=Hl[c](a,i)}),e},rte=(e,t,n={},o={})=>{t={...t},o={...o};const r=Object.keys(t).filter(Lk);let i=[],l=!1;const s=[];if(r.forEach(a=>{const c=e.getValue(a);if(!e.hasValue(a))return;let u=n[a],d=bs(u);const I=t[a];let C;if(Au(I)){const f=I.length,A=I[0]===null?1:0;u=I[A],d=bs(u);for(let v=A;v<f&&I[v]!==null;v++)C?Np(bs(I[v])===C):C=bs(I[v])}else C=bs(I);if(d!==C)if(I1(d)&&I1(C)){const f=c.get();typeof f=="string"&&c.set(parseFloat(f)),typeof I=="string"?t[a]=parseFloat(I):Array.isArray(I)&&C===Ge&&(t[a]=I.map(parseFloat))}else d!=null&&d.transform&&(C!=null&&C.transform)&&(u===0||I===0)?u===0?c.set(C.transform(u)):t[a]=d.transform(I):(l||(i=nte(e),l=!0),s.push(a),o[a]=o[a]!==void 0?o[a]:t[a],c.jump(I))}),s.length){const a=s.indexOf("height")>=0?window.pageYOffset:null,c=ote(t,e,s);return i.length&&i.forEach(([u,d])=>{e.getValue(u).set(d)}),e.render(),Qd&&a!==null&&window.scrollTo({top:a}),{target:c,transitionEnd:o}}else return{target:t,transitionEnd:o}};function ite(e,t,n,o){return $ee(t)?rte(e,t,n,o):{target:t,transitionEnd:o}}const lte=(e,t,n,o)=>{const r=_ee(e,t,o);return t=r.target,o=r.transitionEnd,ite(e,t,n,o)},sf={current:null},Mk={current:!1};function ste(){if(Mk.current=!0,!!Qd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sf.current=e.matches;e.addListener(t),t()}else sf.current=!1}function ate(e,t,n){const{willChange:o}=t;for(const r in t){const i=t[r],l=n[r];if(gn(i))e.addValue(r,i),vu(o)&&o.add(r);else if(gn(l))e.addValue(r,Yl(i,{owner:e})),vu(o)&&o.remove(r);else if(l!==i)if(e.hasValue(r)){const s=e.getValue(r);!s.hasAnimated&&s.set(i)}else{const s=e.getStaticValue(r);e.addValue(r,Yl(s!==void 0?s:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const h1=new WeakMap,Tk=Object.keys(fa),gte=Tk.length,f1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cte=Sp.length;class ute{constructor({parent:t,props:n,presenceContext:o,reducedMotionConfig:r,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Qe.render(this.render,!1,!0);const{latestValues:s,renderState:a}=i;this.latestValues=s,this.baseTarget={...s},this.initialValues=n.initial?{...s}:{},this.renderState=a,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.isControllingVariants=_d(n),this.isVariantNode=Vw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const d in u){const I=u[d];s[d]!==void 0&&gn(I)&&(I.set(s[d],!1),vu(c)&&c.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,h1.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,o)=>this.bindToMotionValue(o,n)),Mk.current||ste(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){h1.delete(this.current),this.projection&&this.projection.unmount(),zo(this.notifyUpdate),zo(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const o=Li.has(t),r=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Qe.update(this.notifyUpdate,!1,!0),o&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},o,r,i){let l,s;for(let a=0;a<gte;a++){const c=Tk[a],{isEnabled:u,Feature:d,ProjectionNode:I,MeasureLayout:C}=fa[c];I&&(l=I),u(n)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),C&&(s=C))}if((this.type==="html"||this.type==="svg")&&!this.projection&&l){this.projection=new l(this.latestValues,this.parent&&this.parent.projection);const{layoutId:a,layout:c,drag:u,dragConstraints:d,layoutScroll:I,layoutRoot:C}=n;this.projection.setOptions({layoutId:a,layout:c,alwaysMeasureLayout:!!u||d&&gl(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:I,layoutRoot:C})}return s}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let o=0;o<f1.length;o++){const r=f1[o];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=t["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=ate(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const o=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(o.initial=this.props.initial),o}const n={};for(let o=0;o<cte;o++){const r=Sp[o],i=this.props[r];(ha(i)||i===!1)&&(n[r]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&n!==void 0&&(o=Yl(n,{owner:this}),this.addValue(t,o)),o}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:o}=this.props,r=typeof o=="string"||typeof o=="object"?(n=Jp(this.props,o))===null||n===void 0?void 0:n[t]:void 0;if(o&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!gn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new jp),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class jk extends ute{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:o}){delete n[t],delete o[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...o},{transformValues:r},i){let l=R$(o,t||{},this);if(r&&(n&&(n=r(n)),o&&(o=r(o)),l&&(l=r(l))),i){S$(this,o,l);const s=lte(this,o,l,n);n=s.transitionEnd,o=s.target}return{transition:t,transitionEnd:n,...o}}}function dte(e){return window.getComputedStyle(e)}class Ite extends jk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Li.has(n)){const o=Ep(n);return o&&o.default||0}else{const o=dte(t),r=(kw(n)?o.getPropertyValue(n):o[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return kk(t,n)}build(t,n,o,r){Wp(t,n,o,r.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Xp(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;gn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,o,r){Hw(t,n,o,r)}}class Cte extends jk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Li.has(n)){const o=Ep(n);return o&&o.default||0}return n=Fw.has(n)?n:Gp(n),t.getAttribute(n)}measureInstanceViewportBox(){return yt()}scrapeMotionValuesFromProps(t,n){return Kw(t,n)}build(t,n,o,r){kp(t,n,o,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,o,r){Ew(t,n,o,r)}mount(t){this.isSVGTag=xp(t.tagName),super.mount(t)}}const mte=(e,t)=>Rp(e)?new Cte(t,{enableHardwareAcceleration:!1}):new Ite(t,{enableHardwareAcceleration:!0}),hte={layout:{ProjectionNode:Kk,MeasureLayout:Xk}},fte={...T$,...gq,...Pee,...hte},pa=A_((e,t)=>O_(e,t,fte,mte));function zk(){const e=m.useRef(!1);return Zp(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Ate(){const e=zk(),[t,n]=m.useState(0),o=m.useCallback(()=>{e.current&&n(t+1)},[t]);return[m.useCallback(()=>Qe.postRender(o),[o]),t]}class pte extends m.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function bte({children:e,isPresent:t}){const n=m.useId(),o=m.useRef(null),r=m.useRef({width:0,height:0,top:0,left:0});return m.useInsertionEffect(()=>{const{width:i,height:l,top:s,left:a}=r.current;if(t||!o.current||!i||!l)return;o.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${l}px !important;
            top: ${s}px !important;
            left: ${a}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),m.createElement(pte,{isPresent:t,childRef:o,sizeRef:r},m.cloneElement(e,{ref:o}))}const qC=({children:e,initial:t,isPresent:n,onExitComplete:o,custom:r,presenceAffectsLayout:i,mode:l})=>{const s=Lw(yte),a=m.useId(),c=m.useMemo(()=>({id:a,initial:t,isPresent:n,custom:r,onExitComplete:u=>{s.set(u,!0);for(const d of s.values())if(!d)return;o&&o()},register:u=>(s.set(u,!1),()=>s.delete(u))}),i?void 0:[n]);return m.useMemo(()=>{s.forEach((u,d)=>s.set(d,!1))},[n]),m.useEffect(()=>{!n&&!s.size&&o&&o()},[n]),l==="popLayout"&&(e=m.createElement(bte,{isPresent:n},e)),m.createElement(Pd.Provider,{value:c},e)};function yte(){return new Map}function vte(e){return m.useEffect(()=>()=>e(),[])}const si=e=>e.key||"";function Zte(e,t){e.forEach(n=>{const o=si(n);t.set(o,n)})}function Gte(e){const t=[];return m.Children.forEach(e,n=>{m.isValidElement(n)&&t.push(n)}),t}const Dk=({children:e,custom:t,initial:n=!0,onExitComplete:o,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:l="sync"})=>{const s=m.useContext(Vp).forceRender||Ate()[0],a=zk(),c=Gte(e);let u=c;const d=m.useRef(new Map).current,I=m.useRef(u),C=m.useRef(new Map).current,f=m.useRef(!0);if(Zp(()=>{f.current=!1,Zte(c,C),I.current=u}),vte(()=>{f.current=!0,C.clear(),d.clear()}),f.current)return m.createElement(m.Fragment,null,u.map(p=>m.createElement(qC,{key:si(p),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:l},p)));u=[...u];const A=I.current.map(si),v=c.map(si),h=A.length;for(let p=0;p<h;p++){const b=A[p];v.indexOf(b)===-1&&!d.has(b)&&d.set(b,void 0)}return l==="wait"&&d.size&&(u=[]),d.forEach((p,b)=>{if(v.indexOf(b)!==-1)return;const y=C.get(b);if(!y)return;const Z=A.indexOf(b);let G=p;if(!G){const V=()=>{d.delete(b);const S=Array.from(C.keys()).filter(k=>!v.includes(k));if(S.forEach(k=>C.delete(k)),I.current=c.filter(k=>{const B=si(k);return B===b||S.includes(B)}),!d.size){if(a.current===!1)return;s(),o&&o()}};G=m.createElement(qC,{key:si(y),isPresent:!1,onExitComplete:V,custom:t,presenceAffectsLayout:i,mode:l},y),d.set(b,G)}u.splice(Z,0,G)}),u=u.map(p=>{const b=p.key;return d.has(b)?p:m.createElement(qC,{key:si(p),isPresent:!0,presenceAffectsLayout:i,mode:l},p)}),m.createElement(m.Fragment,null,d.size?u:u.map(p=>m.cloneElement(p)))},Yr=({children:e,className:t,...n})=>g.jsx("div",{className:ot("flex flex-col",t),...n,children:e});Yr.Header=m.forwardRef(function({children:t},n){return g.jsx("div",{ref:n,className:"mt-6 px-4 text-white",children:t})});Yr.Title=m.forwardRef(function({children:t},n){return g.jsx("div",{ref:n,className:"text-2xl text-white",children:t})});Yr.Subtitle=m.forwardRef(function({children:t},n){return g.jsx("div",{ref:n,className:"text-sm text-gray-500",children:t})});Yr.Body=m.forwardRef(function({children:t,className:n},o){return g.jsx("div",{ref:o,className:ot("mt-6 flex-auto rounded-t-2xl bg-white",n),children:t})});const Bte="/assets/profile-landing-89d873a8.png",Ste=()=>(m.useState(null),g.jsx(Yr,{children:g.jsx(Yr.Body,{children:g.jsx("div",{className:" bg-blue-900 px-1",children:g.jsx("img",{src:Bte,alt:"",className:"w-full object-cover bg-red-300"})})})})),Vte="/assets/phone-frame-2fcf994f.svg",Rte=e=>g.jsxs("svg",{viewBox:"0 0 366 729","aria-hidden":"true",...e,children:[g.jsx("path",{fill:"#F2F2F2",fillRule:"evenodd",clipRule:"evenodd",d:"M300.092 1c41.22 0 63.223 21.99 63.223 63.213V184.94c-.173.184-.329.476-.458.851.188-.282.404-.547.647-.791.844-.073 2.496.257 2.496 2.157V268.719c-.406 2.023-2.605 2.023-2.605 2.023a7.119 7.119 0 0 1-.08-.102v394.462c0 41.213-22.001 63.212-63.223 63.212h-95.074c-.881-.468-2.474-.795-4.323-.838l-33.704-.005-.049.001h-.231l-.141-.001c-2.028 0-3.798.339-4.745.843H66.751c-41.223 0-63.223-21.995-63.223-63.208V287.739c-.402-.024-2.165-.23-2.524-2.02v-.973A2.039 2.039 0 0 1 1 284.62v-47.611c0-.042.001-.084.004-.126v-.726c0-1.9 1.652-2.23 2.496-2.157l.028.028v-16.289c-.402-.024-2.165-.23-2.524-2.02v-.973A2.039 2.039 0 0 1 1 214.62v-47.611c0-.042.001-.084.004-.126v-.726c0-1.9 1.652-2.23 2.496-2.157l.028.028v-26.041a2.26 2.26 0 0 0 .093-.236l-.064-.01a3.337 3.337 0 0 1-.72-.12l-.166-.028A2 2 0 0 1 1 135.62v-24.611a2 2 0 0 1 1.671-1.973l.857-.143v-44.68C3.528 22.99 25.53 1 66.75 1h233.341ZM3.952 234.516a5.481 5.481 0 0 0-.229-.278c.082.071.159.163.228.278Zm89.99-206.304A4.213 4.213 0 0 0 89.727 24H56.864C38.714 24 24 38.708 24 56.852v618.296C24 693.292 38.714 708 56.864 708h250.272c18.15 0 32.864-14.708 32.864-32.852V56.852C340 38.708 325.286 24 307.136 24h-32.864a4.212 4.212 0 0 0-4.213 4.212v2.527c0 10.235-8.3 18.532-18.539 18.532H112.48c-10.239 0-18.539-8.297-18.539-18.532v-2.527Z"}),g.jsx("rect",{x:"154",y:"29",width:"56",height:"5",rx:"2.5",fill:"#D4D4D4"})]}),Wte=({className:e,children:t,priority:n=!1,...o})=>g.jsxs("div",{className:ot("relative aspect-[366/729]",e),...o,children:[g.jsx("div",{className:"absolute inset-y-[calc(1/729*100%)] left-[calc(7/729*100%)] right-[calc(5/729*100%)] rounded-[calc(58/366*100%)/calc(58/729*100%)] shadow-2xl"}),g.jsx("div",{className:"absolute left-[calc(23/366*100%)] top-[calc(23/729*100%)] grid h-[calc(686/729*100%)] w-[calc(318/366*100%)] transform grid-cols-1 overflow-hidden bg-gray-900 pt-[calc(23/318*100%)]",children:t}),g.jsx(Rte,{className:"pointer-events-none absolute inset-0 h-full w-full fill-gray-100"}),g.jsx(Zw,{src:Vte,alt:"",className:"pointer-events-none absolute inset-0 h-full w-full",width:100,height:100,unoptimized:!0,priority:n})]}),wte="/assets/inxeniux-d68f64e4.png",kte="/assets/cpdi-630d1b8c.png",xte=e=>{let t=m.useId();return g.jsxs("div",{...e,children:[g.jsxs("svg",{viewBox:"0 0 1026 1026",fill:"none","aria-hidden":"true",className:"absolute inset-0 h-full w-full animate-spin-slow",children:[g.jsx("path",{d:"M1025 513c0 282.77-229.23 512-512 512S1 795.77 1 513 230.23 1 513 1s512 229.23 512 512Z",stroke:"#D4D4D4",strokeOpacity:"0.7"}),g.jsx("path",{d:"M513 1025C230.23 1025 1 795.77 1 513",stroke:`url(#${t}-gradient-1)`,strokeLinecap:"round"}),g.jsx("defs",{children:g.jsxs("linearGradient",{id:`${t}-gradient-1`,x1:"1",y1:"513",x2:"1",y2:"1025",gradientUnits:"userSpaceOnUse",children:[g.jsx("stop",{stopColor:"#06b6d4"}),g.jsx("stop",{offset:"1",stopColor:"#06b6d4",stopOpacity:"0"})]})})]}),g.jsxs("svg",{viewBox:"0 0 1026 1026",fill:"none","aria-hidden":"true",className:"absolute inset-0 h-full w-full animate-spin-reverse-slower",children:[g.jsx("path",{d:"M913 513c0 220.914-179.086 400-400 400S113 733.914 113 513s179.086-400 400-400 400 179.086 400 400Z",stroke:"#D4D4D4",strokeOpacity:"0.7"}),g.jsx("path",{d:"M913 513c0 220.914-179.086 400-400 400",stroke:`url(#${t}-gradient-2)`,strokeLinecap:"round"}),g.jsx("defs",{children:g.jsxs("linearGradient",{id:`${t}-gradient-2`,x1:"913",y1:"513",x2:"913",y2:"913",gradientUnits:"userSpaceOnUse",children:[g.jsx("stop",{stopColor:"#06b6d4"}),g.jsx("stop",{offset:"1",stopColor:"#06b6d4",stopOpacity:"0"})]})})]})]})},Xte=()=>g.jsx("div",{className:"overflow-hidden py-20 sm:py-32 lg:pb-32 xl:pb-36",children:g.jsx(Fa,{children:g.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-8 lg:gap-y-20",children:[g.jsxs("div",{className:"relative z-10 mx-auto max-w-2xl lg:col-span-7 lg:max-w-none lg:pt-6 xl:col-span-6",children:[g.jsx("h1",{className:"text-4xl font-medium tracking-tight text-white",children:"La nueva forma de hacer negocios"}),g.jsx("p",{className:"mt-6 text-lg text-white",children:"Olvdate de las tarjetas de papel tradicionales y nete a la revolucin digital. Nuestra plataforma te permite mantener tu informacin actualizada, destacarte con un diseo profesional y facilitar la comunicacin en un entorno laboral en constante movimiento. Conecta con confianza y demuestra tu profesionalismo en cada interaccin."}),g.jsx("div",{className:"mt-8 flex flex-wrap gap-x-6 gap-y-4"})]}),g.jsxs("div",{className:"relative mt-10 sm:mt-20 lg:col-span-5 lg:row-span-2 lg:mt-0 xl:col-span-6",children:[g.jsx(xte,{className:"absolute left-1/2 top-4 h-[1026px] w-[1026px] -translate-x-1/3 stroke-gray-300/70 [mask-image:linear-gradient(to_bottom,white_20%,transparent_75%)] sm:top-16 sm:-translate-x-1/2 lg:-top-16 lg:ml-12 xl:-top-14 xl:ml-0"}),g.jsx("div",{className:"-mx-4 h-[448px] px-9 [mask-image:linear-gradient(to_bottom,white_60%,transparent)] sm:mx-0 lg:absolute lg:-inset-x-10 lg:-bottom-20 lg:-top-10 lg:h-auto lg:px-0 lg:pt-10 xl:-bottom-32",children:g.jsx(Wte,{className:"mx-auto max-w-[366px]",priority:!0,children:g.jsx(Ste,{})})})]}),g.jsxs("div",{className:"relative -mt-4 lg:col-span-7 lg:mt-0 xl:col-span-6",children:[g.jsx("p",{className:"text-center text-sm font-semibold text-white lg:text-left",children:"Empresas que usan Know Me"}),g.jsx("ul",{role:"list",className:"mx-auto mt-8 flex max-w-xl flex-wrap justify-center gap-x-10 gap-y-8 lg:mx-0 lg:justify-start",children:[["INXENIUX",wte],["Club de Proveedores",kte]].map(([e,t,n])=>g.jsx("li",{className:ot("flex",n),children:g.jsx(Zw,{src:t,alt:e,className:" h-16 w-full",unoptimized:!0,width:200,height:200})},e))})]})]})})}),Jte="/assets/logo-4-240dc8e7.png",Nte=e=>g.jsx("svg",{viewBox:"0 0 40 40","aria-hidden":"true",...e,children:g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 40C8.954 40 0 31.046 0 20S8.954 0 20 0s20 8.954 20 20-8.954 20-20 20ZM4 20c0 7.264 5.163 13.321 12.02 14.704C17.642 35.03 19 33.657 19 32V8c0-1.657-1.357-3.031-2.98-2.704C9.162 6.68 4 12.736 4 20Z"})}),Yte=e=>g.jsx("img",{src:Jte,alt:"logo knowme",...e}),Hte=()=>{let[e,t]=m.useState(null),n=m.useRef(null);return[].map(([o,r],i)=>g.jsxs(yp,{href:r,className:"relative -mx-3 -my-2 rounded-lg px-3 py-2 text-sm text-orange-500 transition-colors delay-150 hover:text-orange-500 hover:delay-0",onMouseEnter:()=>{n.current&&window.clearTimeout(n.current),t(i)},onMouseLeave:()=>{n.current=window.setTimeout(()=>{t(null)},200)},children:[g.jsx(Dk,{children:e===i&&g.jsx(pa.span,{className:"absolute inset-0 rounded-lg bg-gray-100",layoutId:"hoverBackground",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15}},exit:{opacity:0,transition:{duration:.15}}})}),g.jsx("span",{className:"relative z-10",children:o})]},o))},Fte=e=>g.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...e,children:g.jsx("path",{d:"M5 6h14M5 18h14M5 12h14",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),Ete=e=>g.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...e,children:g.jsx("path",{d:"M17 14l-5-5-5 5",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),Kte=()=>g.jsx("header",{children:g.jsx("nav",{children:g.jsxs(Fa,{className:"relative z-50 flex justify-between py-8",children:[g.jsxs("div",{className:"relative z-10 flex items-center gap-16",children:[g.jsx(yp,{href:"/","aria-label":"Home",children:g.jsx(Yte,{className:" h-40 w-auto"})}),g.jsx("div",{className:"hidden lg:flex lg:gap-10",children:g.jsx(Hte,{})})]}),g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsx(jQ,{className:"lg:hidden",children:({open:e})=>g.jsxs(g.Fragment,{children:[g.jsx(VW,{className:"relative z-10 -m-2 inline-flex items-center rounded-lg stroke-white p-2 hover:bg-orange-400 hover:stroke-white active:stroke-gray-900 ui-not-focus-visible:outline-none","aria-label":"Toggle site navigation",children:({open:t})=>t?g.jsx(Ete,{className:"h-6 w-6"}):g.jsx(Fte,{className:"h-6 w-6"})}),g.jsx(Dk,{initial:!1,children:e&&g.jsxs(g.Fragment,{children:[g.jsx(RW,{static:!0,as:pa.div,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-0 bg-gray-300/60 backdrop-blur"}),g.jsx(WW,{static:!0,as:pa.div,initial:{opacity:0,y:-32},animate:{opacity:1,y:0},exit:{opacity:0,y:-32,transition:{duration:.2}},className:"absolute inset-x-0 top-0 z-0 origin-top rounded-b-2xl px-6 pb-6 pt-32 shadow-2xl shadow-gray-900/20",children:g.jsxs("div",{className:"mt-8 flex flex-col gap-4",children:[g.jsx(al,{href:"/login",variant:"outline",children:"Iniciar sesin"}),g.jsx(al,{href:"/registro",children:"Crear cuenta"})]})})]})})]})}),g.jsx(al,{href:"/login",variant:"outline",className:"hidden lg:block text-white",children:"Iniciar sesin"}),g.jsx(al,{href:"/registro",className:"hidden lg:block",children:"Crear cuenta"})]})]})})}),Lte=({children:e})=>g.jsxs(g.Fragment,{children:[g.jsx(Kte,{}),g.jsx("main",{className:"flex-auto",children:e}),g.jsx($u,{})]}),Mte=e=>g.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...e,children:[g.jsx("path",{d:"M9.307 12.248a.75.75 0 1 0-1.114 1.004l1.114-1.004ZM11 15.25l-.557.502a.75.75 0 0 0 1.15-.043L11 15.25Zm4.844-5.041a.75.75 0 0 0-1.188-.918l1.188.918Zm-7.651 3.043 2.25 2.5 1.114-1.004-2.25-2.5-1.114 1.004Zm3.4 2.457 4.25-5.5-1.187-.918-4.25 5.5 1.188.918Z",fill:"currentColor"}),g.jsx("circle",{cx:"12",cy:"12",r:"8.25",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Tte=({name:e,price:t,description:n,button:o,features:r,activePeriod:i,logomarkClassName:l,featured:s=!1})=>g.jsxs("section",{className:ot("flex flex-col overflow-hidden rounded-3xl p-6 shadow-lg shadow-gray-900/5",s?"order-first bg-gray-900 lg:order-none":"bg-white"),children:[g.jsxs("h3",{className:ot("flex items-center text-sm font-semibold",s?"text-white":"text-gray-900"),children:[g.jsx(Nte,{className:ot("h-6 w-6 flex-none",l)}),g.jsx("span",{className:ot("ml-4",s?"text-white":"text-gray-800"),children:e})]}),g.jsx("p",{className:ot("relative mt-5 flex text-3xl tracking-tight",s?"text-white":"text-gray-900"),children:t["Pago nico"]===t.Anual?t["Pago nico"]:g.jsxs(g.Fragment,{children:[g.jsx("span",{"aria-hidden":i==="Anual",className:ot("transition duration-300",i==="Anual"&&"pointer-events-none translate-x-6 select-none opacity-0",s===!1&&"text-gray-800"),children:t["Pago nico"]}),g.jsx("span",{"aria-hidden":i==="Pago nico",className:ot("absolute left-0 top-0 transition duration-300 ",i==="Pago nico"&&"pointer-events-none -translate-x-6 select-none opacity-0",s===!1&&"text-gray-800"),children:t.Anual})]})}),g.jsx("p",{className:ot("mt-3 text-sm",s?"text-gray-300":"text-gray-700"),children:n}),g.jsx("div",{className:"order-last mt-6",children:g.jsx("ul",{role:"list",className:ot("-my-2 divide-y text-sm",s?"divide-gray-800 text-gray-300":"divide-gray-200 text-gray-700"),children:r.map(a=>g.jsxs("li",{className:"flex py-2",children:[g.jsx(Mte,{className:ot("h-6 w-6 flex-none",s?"text-white":"text-orange-500")}),g.jsx("span",{className:ot("ml-4",s?"text-white":"text-gray-800"),children:a})]},a))})}),g.jsx(al,{href:o.href,color:s?"orange":"gray",className:ot("mt-6",s?"text-orange-500 border-orange-500 bg-white":""),"aria-label":`Get started with the ${e} plan for ${t}`,children:o.label})]}),jte=[{name:"Free",featured:!1,price:{"Pago nico":"$0",Anual:"$0"},description:"TOTALMENTE GRATIS",button:{label:"Comienza tu prueba gratis",href:"/register"},features:["Plataforma Knowme","Cdigo QR","Redes Sociales","Compartir perfil (link)","Informacin personal","Foto de perfil"],logomarkClassName:"fill-gray-300"},{name:"Basic",featured:!1,price:{"Pago nico":"$459",Anual:"Solo pago nico"},description:"Empieza con un plus",button:{label:"Subscribete",href:"/register"},features:["Tarjeta NFC blanca","Botn Whatsapp","Intercambio de contactos","Foto de perfil"],logomarkClassName:"fill-gray-500"},{name:"Plus",featured:!1,price:{"Pago nico":"$699",Anual:"Solo pago nico"},description:"Plan basic +",button:{label:"Subscribete",href:"/register"},features:["Tarjeta NFC personalizada","Link personalizado","Informacin business","Foto de portada","Enlace para solicitar pagos","Eleccin de color (claro/oscuro)","Catalogo (productos y servicios)","Directorio (opcional)","Palabras clave busqueda"],logomarkClassName:"fill-gray-500"},{name:"Entrepreneur",featured:!1,price:{"Pago nico":"Solo pago anual",Anual:"$790"},description:"Plan basic +",button:{label:"Subscribete",href:"/register"},features:["CRM bsico","Comunidad Knowme","Personalizacin (logotipo y pantones)","Galera","Broshure o archivo PDF"],logomarkClassName:"fill-gray-500"},{name:"Business",featured:!0,price:{"Pago nico":"Solo pago anual",Anual:"$990"},description:"Plan entrepreneur +",button:{label:"Subscribete",href:"/register"},features:["Vdeo","Gestin de usuarios","Dashboard empresarial","CRM contactos avanzado","Importacin y exportacin masiva (CSV)","Analiticas y Dashboard empresarial","Gestin de equipos","Reasignacin de tarjetas"],logomarkClassName:"fill-orange-500"}],zte=()=>{let[e,t]=m.useState("Pago nico");return g.jsx("section",{id:"pricing","aria-labelledby":"pricing-title",className:"border-t border-gray-200 bg-gray-100 py-20 sm:py-32",children:g.jsxs(Fa,{children:[g.jsxs("div",{className:"mx-auto max-w-2xl text-center",children:[g.jsx("h2",{id:"pricing-title",className:"text-3xl font-medium tracking-tight text-gray-900",children:"Planes"}),g.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"Planes flexibles para crear, compartir y conectar tu perfil profesional en un mundo en movimiento."})]}),g.jsx("div",{className:"mt-8 flex justify-center",children:g.jsxs("div",{className:"relative",children:[g.jsx(r8,{value:e,onChange:t,className:"grid grid-cols-2",children:["Pago nico","Anual"].map(n=>g.jsx(wW,{value:n,className:ot("cursor-pointer border border-gray-300 px-[calc(theme(spacing.3)-1px)] py-[calc(theme(spacing.2)-1px)] text-sm text-gray-700 outline-2 outline-offset-2 transition-colors hover:border-gray-400",n==="Pago nico"?"rounded-l-lg":"-ml-px rounded-r-lg"),children:n},n))}),g.jsx("div",{"aria-hidden":"true",className:ot("pointer-events-none absolute inset-0 z-10 grid grid-cols-2 overflow-hidden rounded-lg bg-orange-500 transition-all duration-300",e==="Pago nico"?"[clip-path:inset(0_50%_0_0)]":"[clip-path:inset(0_0_0_calc(50%-1px))]"),children:["Pago nico","Anual"].map(n=>g.jsx("div",{className:ot("py-2 text-center text-sm font-semibold text-white",n==="Anual"&&"-ml-px"),children:n},n))})]})}),g.jsx("div",{className:"mx-auto mt-16 grid max-w-2xl grid-cols-1 items-start gap-x-8 gap-y-10 sm:mt-20 lg:max-w-none lg:grid-cols-3",children:jte.map(n=>g.jsx(Tte,{...n,activePeriod:e},n.name))})]})})};pa(Yr.Header);pa(Yr.Body);const Dte=e=>g.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",...e,children:[g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z",fill:"#FFFFFF"}),g.jsx("circle",{cx:16,cy:16,r:16,fill:"#f59342",fillOpacity:.2})]}),Ute=e=>{let t=m.useId();return g.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",...e,children:[g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z",fill:"#FFFFFF"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 13a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H10a1 1 0 01-1-1v-2zm0 6a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H10a1 1 0 01-1-1v-2zm1 5a1 1 0 00-1 1v2a1 1 0 001 1h12a1 1 0 001-1v-2a1 1 0 00-1-1H10z",fill:`url(#${t}-gradient)`}),g.jsx("rect",{x:9,y:6,width:14,height:4,rx:1,fill:"#171717"}),g.jsx("circle",{cx:16,cy:16,r:16,fill:"#f59342",fillOpacity:.2}),g.jsx("defs",{children:g.jsxs("linearGradient",{id:`${t}-gradient`,x1:16,y1:12,x2:16,y2:28,gradientUnits:"userSpaceOnUse",children:[g.jsx("stop",{stopColor:"#f59342"}),g.jsx("stop",{offset:1,stopColor:"#f59342",stopOpacity:0})]})})]})},Pte=e=>g.jsxs("svg",{viewBox:"0 0 32 32",fill:"none","aria-hidden":"true",...e,children:[g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z",fill:"#FFFFFF"}),g.jsx("circle",{cx:11,cy:14,r:2,fill:"#171717"}),g.jsx("circle",{cx:11,cy:20,r:2,fill:"#171717"}),g.jsx("circle",{cx:11,cy:26,r:2,fill:"#171717"}),g.jsx("path",{d:"M16 14h6M16 20h6M16 26h6",stroke:"#f59342",strokeWidth:2,strokeLinecap:"square"}),g.jsx("circle",{cx:16,cy:16,r:16,fill:"#f59342",fillOpacity:.2})]}),Qte=e=>g.jsxs("svg",{viewBox:"0 0 32 32",fill:"none","aria-hidden":"true",...e,children:[g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z",fill:"#FFFFFF"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 13.838V26a2 2 0 01-2 2H11a2",fill:"#f59342"}),g.jsx("path",{d:"M10 12h12",stroke:"#FFFFFF",strokeWidth:2,strokeLinecap:"square"}),g.jsx("circle",{cx:16,cy:16,r:16,fill:"#f59342",fillOpacity:.2})]}),Ote=[{name:"Crea tu cuenta",description:"Elige el plan que ms te convenga y crea tu cuenta.",icon:Dte},{name:"Personaliza tu perfil",description:"Agrega tus datos, redes sociales, whatsapp, horarios y mucho ms.",icon:Ute},{name:"Recibe tu NFC",description:"Recibe tu tarjeta NFC con tu cdigo QR.",icon:Qte},{name:"Crea tu red",description:"Comparte tu perfil, crea un efecto Wow! y gestiona tus contactos",icon:Pte}],_te=()=>g.jsx("section",{id:"secondary-features","aria-label":"Features for building a portfolio",className:"py-20 sm:py-32",children:g.jsxs(Fa,{children:[g.jsxs("div",{className:"mx-auto max-w-2xl sm:text-center",children:[g.jsx("h2",{className:"text-3xl font-medium tracking-tight text-white",children:"Networking en un mundo digital"}),g.jsx("p",{className:"mt-2 text-lg text-white",children:"En KnowMe, creemos en el poder de las conexiones significativas. Ampliamos tus oportunidades profesionales ms all de las fronteras. Conecta con profesionales de diversas industrias y ciudades, fortalece tu red y descubre nuevas oportunidades que te esperan en todo el pas."})]}),g.jsx("ul",{role:"list",className:"mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-6 text-sm sm:mt-20 sm:grid-cols-2 md:gap-y-10 lg:max-w-none lg:grid-cols-2",children:Ote.map(e=>g.jsxs("li",{className:"rounded-2xl border border-gray-200 p-8",children:[g.jsx(e.icon,{className:"h-8 w-8"}),g.jsx("h3",{className:"mt-6 font-semibold text-white",children:e.name}),g.jsx("p",{className:"mt-2 text-white",children:e.description})]},e.name))})]})}),qte=()=>g.jsx(g.Fragment,{children:g.jsxs(Lte,{children:[g.jsx(Xte,{}),g.jsx(_te,{}),g.jsx(i_,{}),g.jsx(zte,{})]})}),A1=()=>{const e=qt(),[t,n]=m.useState({id_organization:0,name:"",logo_url:"",cover_url:"",business_name:"",rfc:"",fiscal_address:"",industry:"",phone:"",email:"",website:""}),o=e.state?e.state.userOrg:t,[r,i]=m.useState(null),[l,s]=m.useState(null),[a,c]=m.useState(!0),u=pp(),d=cn(),I=ut(),{user:C}=m.useContext(kt);m.useEffect(()=>{h()},[]);const f=y=>{const Z=y.target.files[0];i(URL.createObjectURL(Z))},A=y=>{const Z=y.target.files[0];s(URL.createObjectURL(Z))},v=y=>{const{name:Z,value:G}=y.target;n({...t,[Z]:G})},h=async()=>{i(o.logo_url??null),s(o.cover_url??null),n({...o}),c(!1)},p=async y=>{var G,V;c(!0);const Z=xe.loading("Guardando cambios");y.preventDefault();try{const k=document.getElementById("photo").files[0];if(k!==void 0){const w=new FormData;w.append("recfile",k),w.append("username",localStorage.getItem("token"));const X=await d.updateProfilePhoto(w);t.logo_url=X.data.dataLocationResponse}const R=document.getElementById("photo_cover").files[0];if(R!==void 0){const w=new FormData;w.append("recfile",R),w.append("username",localStorage.getItem("token"));const X=await d.updateProfilePhoto(w);t.cover_url=X.data.dataLocationResponse}let W;t.id_organization!==0?{data:W}=await u.updateOrg(t):{data:W}=await u.createOrg(t),W.ok?(xe.success(W.msg,{id:Z}),setTimeout(()=>{I("/business"),c(!1)},2e3)):(xe.error(W.msg,{id:Z}),c(!1))}catch(S){if(console.error("Error al enviar el formulario:",S),c(!1),S.response&&S.response.status===400){const k=((V=(G=S.response.data.errors)==null?void 0:G.name)==null?void 0:V.msg)||"Ocurri un error.";xe.error(k,{id:Z})}else xe.error("Error inesperado, por favor intenta de nuevo.",{id:Z})}},b=()=>{console.log(C),n({name:"",logo_url:"",cover_url:"",business_name:"",rfc:"",fiscal_address:"",industry:"",phone:"",email:"",website:""}),I("/business")};return g.jsxs(g.Fragment,{children:[g.jsx(Rn,{position:"top-right",richColors:!0}),g.jsx("div",{className:"m-10",children:g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Editar o agregar datos de organizacin"})}),g.jsx("div",{className:"m-3 p-3 bg-gray-800/30 rounded-lg max-w-3xl",children:g.jsxs("form",{onSubmit:p,className:"md:m-16",children:[g.jsxs("div",{className:"space-y-12",children:[g.jsxs("div",{className:"border-b border-gray-900/10 pb-12 ",children:[g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Informacin general de tu organizacin"}),g.jsx("p",{className:"mt-1 text-sm leading-6 text-white",children:"Esta informacin de la organizacin formar parte de la carpeta de presentacin de tus usuarios miembros."}),g.jsxs("div",{className:"col-span-full mt-4",children:[g.jsx("label",{htmlFor:"photo_cover",className:"block text-sm font-medium leading-6 text-white",children:"Imagen de portada para la organizacin"}),g.jsxs("p",{className:"mt-1 text-sm leading-6 text-white",children:["Para una presentacin visualmente atractiva, te sugerimos considerar una imagen con dimensiones de"," ",g.jsx("span",{className:"font-bold",children:"688x224 px"}),"."]}),g.jsxs("div",{className:"my-2 items-center rounded-lg gap-x-3 h-36 overflow-hidden",children:[l?g.jsx("img",{src:l??xl,alt:"Selected",className:"object-scale-down rounded-lg"}):g.jsx("img",{src:xl,alt:"Selected",className:"object-scale-down rounded-lg"}),g.jsx("input",{type:"file",id:"photo_cover",accept:"image/*",className:"hidden",onChange:A})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{type:"button",className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",onClick:()=>{document.getElementById("photo_cover").click()},children:"Cambiar"})})]}),g.jsxs("div",{className:"col-span-full mt-4",children:[g.jsx("label",{htmlFor:"photo",className:"block text-sm font-medium leading-6 text-white",children:"Logo organizacin"}),g.jsxs("div",{className:"mt-2 flex items-center gap-x-3",children:[r?g.jsx("img",{src:r,alt:"Selected",className:"h-28 w-28 rounded-full border-white border-2 object-cover"}):g.jsx(jV,{className:"h-12 w-12 text-white","aria-hidden":"true"}),g.jsx("input",{type:"file",id:"photo",accept:"image/*",className:"hidden",onChange:f}),g.jsx("button",{type:"button",className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",onClick:()=>{document.getElementById("photo").click()},children:"Cambiar"})]})]}),g.jsx("div",{className:"mt-2 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:g.jsxs("div",{className:"sm:col-span-4",children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white",children:"Nombre de la organizacin"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:g.jsx(WA,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),g.jsx("input",{type:"text",name:"name",id:"name",placeholder:"*",required:!0,autoComplete:"name",value:t.name,onChange:v,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Industria a la que pertenece la organizacin"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:g.jsx(CE,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),g.jsx("input",{type:"text",name:"industry",id:"industry",autoComplete:"industry",placeholder:"*",required:!0,value:t.industry,onChange:v,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Razn Social"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:g.jsx(bE,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),g.jsx("input",{type:"text",name:"business_name",id:"business_name",autoComplete:"business_name",value:t.business_name,onChange:v,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:"RFC:"}),g.jsx("input",{type:"text",name:"rfc",id:"rfc",autoComplete:"rfc",placeholder:"*",required:!0,value:t.rfc,onChange:v,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Domicilio Fiscal:"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:g.jsx(fE,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),g.jsx("input",{type:"text",name:"fiscal_address",id:"fiscal_address",autoComplete:"fiscal_address",placeholder:"*",required:!0,value:t.fiscal_address,onChange:v,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Telfono de la empresa"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:"+52"}),g.jsx("input",{type:"number",name:"phone",id:"phone",autoComplete:"phone",placeholder:"*",required:!0,value:t.phone,onChange:v,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Correo electrnico de la empresa"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:g.jsx(Ra,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),g.jsx("input",{type:"email",name:"email",id:"email",autoComplete:"email",placeholder:"*",required:!0,value:t.email,onChange:v,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Sitio web empresa"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:g.jsx(ed,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),g.jsx("input",{type:"text",name:"website",id:"website",autoComplete:"website",value:t.website,onChange:v,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})})]})})]}),g.jsxs("div",{className:"border-b border-white/10 pb-12",children:[g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Para qu necesitamos estos datos?"}),g.jsx("p",{className:"mt-1 text-sm leading-6 text-white",children:"La informacin proporcionada aqu ser utilizada para crear y mantener el perfil de tu organizacin. Esto incluye la presentacin de tu empresa ante los usuarios miembros, as como para fines de comunicacin y contacto relacionados con los servicios ofrecidos."})]})]}),g.jsxs("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[g.jsx("button",{type:"button",disabled:a,onClick:b,className:"text-sm font-semibold leading-6 text-white",children:"Cancelar"}),g.jsx("button",{type:"submit",disabled:a,className:"rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Guardar"})]})]})}),g.jsx("div",{className:"h-24 lg:h-0"})]})},p1=()=>{const[e,t]=m.useState(null),[n,o]=m.useState([]),[r,i]=m.useState(!0),[l,s]=m.useState(!1),[a,c]=m.useState({id_organization:0,name:"",logo_url:"",cover_url:"",business_name:"",rfc:"",fiscal_address:"",industry:"",phone:"",email:"",website:""}),[u,d]=m.useState({id_organization:0,name:"",lastname:"",email:"",mailing_status:1,id_user_type_fk:2,terms_policies_status:1,id_plan_fk:6}),I=m.useRef(null),C=ut(),f=qt(),A=pp(),v=Mr(),h=f.state?f.state.userOrg:a;m.useEffect(()=>{y(),t(h.logo_url)},[]);const p=V=>{const{name:S,value:k}=V.target;d({...u,[S]:k})},b=()=>{C("/business")},y=async()=>{const{data:V}=await A.getUsersTeamOrg(),{users:S}=V;V.ok?o(S):o([]),i(!1)},Z=()=>{s(!0)},G=async V=>{V.preventDefault();const S=window.location.href.split("team_org")[0];i(!0);const k=xe.loading("Enviando invitacin");try{const{data:B}=await v.createUserByInvitation({...u,successUrl:`${S}team_org`,cancelUrl:`${S}team_org`},n[0].id_organization_fk);B.ok&&u.id_plan_fk==6?(xe.success(B.msg,{id:k}),setTimeout(()=>{s(!1),y(),i(!1)},2e3),s(!1)):(s(!1),i(!1),window.open(B.userPaymentSession.stripe_session_url,"_self"))}catch(B){if(console.log(B),B.response.status===400){const R=B.response.data.errors;let W="";R?Object.keys(R).forEach(w=>{W+=`${R[w].msg}
`}):W=B.response.data.msg||"Error al crear invitacin, por favor intenta de nuevo",xe.error(W,{id:k})}else xe.error("Error al crear invitacin, por favor intenta de nuevo",{id:k});i(!1)}};return g.jsxs(g.Fragment,{children:[g.jsx(Rn,{position:"top-right",richColors:!0}),g.jsxs("div",{className:"flex justify-between mx-4 my-5 items-center",children:[g.jsxs("div",{className:"flex-col",children:[g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Business Team"}),g.jsxs("button",{type:"button",onClick:b,className:"text-sm flex font-semibold leading-6 text-orange-400 hover:text-orange-500",children:[g.jsx(tE,{className:"h-6 w-6","aria-hidden":"true"}),"Regresar"]})]}),e?g.jsx("img",{src:e,alt:"Selected",className:"h-12 w-12 md:h-14 md:w-14 rounded-full border-white border-2 object-cover"}):g.jsx(WA,{className:"h-12 w-12 md:h-14 md:w-14 text-gray-900 bg-white rounded-full p-2 border-white border-2","aria-hidden":"true"}),g.jsx("div",{className:"text-white",children:g.jsx("button",{onClick:Z,className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Agregar miembro"})})]}),g.jsx("div",{className:"mx-4 mb-20",children:g.jsx("ul",{role:"list",className:"divide-y divide-gray-100",children:n.map(V=>g.jsxs("li",{className:"flex justify-between gap-x-6 py-5",children:[g.jsxs("div",{className:"flex min-w-0 gap-x-4",children:[g.jsx("img",{className:"h-12 w-12 flex-none rounded-full bg-gray-50",src:V.user.profile_img_url??kd,alt:""}),g.jsxs("div",{className:"min-w-0 flex-auto",children:[g.jsx("p",{className:"text-sm font-semibold leading-6 text-white",children:V.user.name}),g.jsx("p",{className:"mt-1 truncate text-xs leading-5 text-white",children:V.user.email})]})]}),g.jsxs("div",{className:"hidden shrink-0 sm:flex sm:flex-col sm:items-end",children:[g.jsx("p",{className:"text-sm leading-6 text-white",children:V.user.ocupation_role??"[PENDIENTE]"}),V.owner?g.jsxs("div",{className:"mt-1 flex items-center gap-x-1.5",children:[g.jsx("div",{className:"flex-none rounded-full bg-orange-500/20 p-1",children:g.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-orange-500"})}),g.jsx("p",{className:"text-xs leading-5 text-orange-500",children:"Admin"})]}):g.jsx("p",{className:"mt-1 text-xs leading-5 text-white",children:"Miembro"})]})]},V.id_user_fk))})}),g.jsx(Vt.Root,{show:l,as:m.Fragment,children:g.jsxs(Zn,{className:"relative z-10",initialFocus:I,onClose:s,children:[g.jsx(Vt.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:g.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),g.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:g.jsx("div",{className:"flex items-end justify-center p-4 text-center sm:items-center sm:p-0",children:g.jsx(Vt.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:g.jsx(Zn.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full max-w-lg h-xl",children:g.jsx("div",{className:"bg-white px-4 pb-4 sm:p-6 sm:pb-4",children:g.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[g.jsx(Zn.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"Agregar miembro"}),g.jsx("div",{className:"bg-white rounded-lg max-w-3xl",children:g.jsxs("form",{onSubmit:G,className:"mx-2",children:[g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"sm:col-span-4",children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 text-left",children:"Nombre(s) del usuario*"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:g.jsx(sy,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),g.jsx("input",{type:"text",name:"name",id:"name",autoComplete:"name",value:u.name,onChange:p,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Apellido(s) del usuario*"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:g.jsx(sy,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),g.jsx("input",{type:"text",name:"lastname",id:"lastname",autoComplete:"lastname",value:u.lastname,onChange:p,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Correo electrnico del miembro*"}),g.jsx("div",{className:"mt-2",children:g.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[g.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:g.jsx(Ra,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),g.jsx("input",{type:"email",name:"email",id:"email",autoComplete:"email",value:u.email,onChange:p,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),g.jsx("label",{htmlFor:"plan",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Seleccionar plan"}),g.jsx("div",{className:"mt-2",children:g.jsxs("select",{id:"id_plan_fk",name:"id_plan_fk",value:u.id_plan_fk,onChange:p,className:"block w-full pl-3 pr-10 py-2 text-base bg-white border-gray-800 focus:outline-none focus:ring-orange-600 focus:border-orange-600 sm:text-sm rounded-md",children:[g.jsx("option",{value:6,children:"Bsico"}),g.jsx("option",{value:7,children:"Plus"}),g.jsx("option",{value:8,children:"Emprendedor"}),g.jsx("option",{value:9,children:"Business (Admin)"})]})})]})}),g.jsxs("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[g.jsx("button",{type:"button",disabled:r,onClick:()=>s(!1),ref:I,className:"text-sm font-semibold leading-6 text-gray-900",children:"Cancelar"}),g.jsx("button",{type:"submit",disabled:r,className:"rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Enviar"})]})]})})]})})})})})})]})})]})};const b1=()=>{const e=Mr(),[t,n]=m.useState(!1),[o,r]=m.useState(!1),[i,l]=m.useState(!1),{onInputChange:s,formState:a}=Lr({new_password:"",confirm_password:""}),c=async()=>{if(a.new_password!=a.confirm_password)n(!0),r(!0);else{const u=xe.loading("Actualizando contrasea");try{const d={newPassword:a.new_password};await e.changePassword(d),xe.success("Contrasea actualizada correctamente",{id:u})}catch{xe.error("Error al actualizar contrasea, verifique sus datos o contacte a soporte",{id:u})}}};return g.jsxs(g.Fragment,{children:[g.jsx(Rn,{position:"top-center",richColors:!0}),g.jsx("div",{className:"change_password",children:g.jsxs("div",{className:"change_password_container",children:[g.jsx("div",{className:"change_password_title",children:"Cambiar Contrasea"}),g.jsxs("div",{className:"change_password_input",children:[g.jsx("input",{type:i?"text":"password",placeholder:"Nueva Contrasea",value:a.new_password,name:"new_password",onChange:u=>{o&&r(!1),s(u)},style:t&&o?{color:"#cc0000"}:{}}),g.jsx("div",{children:i?g.jsx(xi,{color:"white",size:25,onClick:()=>{l(!1)}}):g.jsx(ki,{color:"white",size:25,onClick:()=>{l(!0)}})})]}),g.jsxs("div",{className:"change_password_input",children:[g.jsx("input",{type:i?"text":"password",placeholder:"Confirmar Contrasea",value:a.confirm_password,name:"confirm_password",onChange:u=>{o&&r(!1),s(u)},style:t&&o?{color:"#cc0000"}:{}}),g.jsx("div",{children:i?g.jsx(xi,{color:"white",size:25,onClick:()=>{l(!1)}}):g.jsx(ki,{color:"white",size:25,onClick:()=>{l(!0)}})})]}),t&&o&&g.jsx("div",{className:"change_password_alert",children:"Las contraseas no coinciden"}),g.jsx("button",{className:"change_password_button",onClick:c,children:"Continuar"})]})})]})};const $te=({plan:e,setShowDetailsModal:t,setPlanSelected:n,cardsPlan:o})=>{const r=()=>{t(!0),n(o)};return g.jsx(g.Fragment,{children:g.jsxs("div",{className:"e-card playing",children:[g.jsx("div",{className:"image"}),g.jsx("div",{className:e.className=="basico"?"wave color_1":e.className=="ecommerce"?"wave color_3":"wave color_2"}),g.jsx("div",{className:e.className=="basico"?"wave color_1":e.className=="ecommerce"?"wave color_3":"wave color_2"}),g.jsx("div",{className:e.className=="basico"?"wave color_1":e.className=="ecommerce"?"wave color_3":"wave color_2"}),g.jsxs("div",{className:"infotop",children:[g.jsx("div",{className:"plan_name",children:o.name_plan}),g.jsx("div",{className:"plan_price",children:e.cost[0]=="-1.00"?"":e.cost[0]!="0.00"?`${e.cost[0]}`:e.cost[1]!="0.00"?`${e.cost[1]}`:"Gratis"}),g.jsx("div",{className:"plan_price",children:e.cost[0]=="-1.00"?"Contctanos":e.cost[0]!="0.00"?"Pago nico":"Pago anual"}),g.jsx(mt,{className:"plan_beneficts",onClick:r,children:"Ver Beneficios"})]})]})})};const ene=({plan:e})=>{const t=Mr(),{user:n}=m.useContext(kt),[o,r]=m.useState(!1),[i,l]=m.useState(!1),s=async()=>{r(!0);const a=xe.loading("Cambiando plan"),c=window.location.href.replace("upgrade",""),u=n.id,d=localStorage.getItem("token"),I={id_plan_fk:e.id_plan,successUrl:`${c}home`,cancelUrl:`${c}upgrade`};try{const{data:C}=await t.addPlan(u,I,d);r(!1),xe.success("Cambio de plan satisfactorio",{id:a}),e.id_plan==6?(n.id_plan_fk=e.id_plan,window.open(I.successUrl,"_self")):window.open(C.user.stripe_session_url,"_self")}catch(C){xe.error("Error al cambiar de plan",{id:a}),console.log(C),r(!1)}};return g.jsxs(g.Fragment,{children:[o&&g.jsx(ZA,{}),g.jsxs("div",{className:"plan_details max-w-lg rounded-3xl p-12",children:[g.jsx("div",{className:"text-xl text-center font-bold",children:e.name_plan}),g.jsx("ul",{className:"my-4",children:Object.entries(KV).map(a=>{if(e[a[0]]==!0)return typeof a[1]=="string"?g.jsxs("li",{children:[" ",a[1]]},a[0]):g.jsxs("li",{children:[" ",a[1][e[a[0]]-1]]},a[0])})}),g.jsx("div",{className:"plan_details_btn",children:g.jsx(mt,{onClick:()=>{l(!0)},children:"Escoger Plan"})})]}),i&&g.jsx(g.Fragment,{children:g.jsxs("div",{className:"plan_details plan_show_shure max-w-lg rounded-3xl p-12",children:[g.jsx(F9,{size:34,color:"#cc0000",className:"shure_close",onClick:()=>{l(!1)}}),g.jsx("div",{className:"rounded-md bg-yellow-50 p-4",children:g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx(gE,{className:"h-5 w-5 text-yellow-400","aria-hidden":"true"})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"ATENCIN"}),g.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:g.jsxs("p",{children:["Si se empieza la transaccin y no se completa ser regresado a plan bsico independientemente del plan que tenga anteriormente.",g.jsx("br",{}),"Desea continuar a la transaccin?"]})})]})]})}),g.jsx("div",{className:"plan_details_btn",children:g.jsx(mt,{onClick:s,children:"Continuar"})})]})})]})},y1=()=>{const[e,t]=m.useState(null),[n,o]=m.useState(!1),[r,i]=m.useState(null),l=window.innerWidth,s=cn(),a=async()=>{const c=await s.getPlans();t(c.data.plans)};return m.useEffect(()=>{a()},[]),g.jsxs(g.Fragment,{children:[n&&g.jsx("div",{className:"profile-modal-background",onClick:()=>{o(!1)},children:g.jsx("div",{})}),n&&g.jsx(ene,{plan:r}),g.jsx(Rn,{position:"top-right",richColors:!0}),e!=null&&g.jsx("div",{className:"change-plan-container",children:g.jsx("div",{className:"change-plan",children:g.jsx(SA,{slidesPerView:l>1280?3.5:l>940?2.5:l>576?1.6:1.2,spaceBetween:10,pagination:{clickable:!0},modules:[FV],className:"mySwiper",children:EV.map((c,u)=>(c.id_plan=e[u].id_plan,c.cost=[e[u].unique_cost,e[u].annual_cost],c.color="#"+e[u].color_card,g.jsx(VA,{children:g.jsx($te,{plan:c,setShowDetailsModal:o,setPlanSelected:i,cardsPlan:e[u]})},u)))})})})]})},tne=()=>{const e=ut();return g.jsx("div",{className:"flex flex-col min-h-screen",children:g.jsx("div",{className:"flex flex-row",children:g.jsxs("main",{className:"flex-grow w-3/4 p-8",children:[g.jsx("div",{className:"bg-gray-700 bg-opacity-40 border  p-8 rounded-lg shadow-lg",children:g.jsxs("div",{className:"flex flex-col  items-center",children:[g.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-NV9q05F16g50huet5CWXj-AtbmH30NTR4A&s",alt:"User Avatar",className:"w-24 h-24 rounded-md mb-4 object-cover"}),g.jsx("h2",{className:"text-xl font-semibold",children:"Diego Rmz"}),g.jsx("p",{className:"text-sm text-gray-400",children:"Lder de proyectos | Desarrollador FullStack"}),g.jsx("div",{className:"mt-4 p-2 rounded-md bg-white",children:g.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/d/d7/Commons_QR_code.png",alt:"QR Code",className:"w-48 h-48"})}),g.jsxs("div",{className:"flex space-x-4 mt-4",children:[g.jsx("button",{className:"bg-orange-500 text-white py-2 px-4 rounded-full",children:"Compartir Tarjeta"}),g.jsx("button",{className:"bg-orange-500 text-white py-2 px-4 rounded-full",children:"Copiar URL"})]})]})}),g.jsxs("div",{className:"mt-8 p-4 bg-[rgb(27,34,62)] rounded-lg",children:[g.jsx("h3",{className:"text-lg font-semibold",children:"Compra de Tarjetas Personalizadas"}),g.jsx("p",{className:"mt-2 text-gray-400",children:"Nuestra plataforma te permite seleccionar entre una variedad de diseos y agregar tu toque personal con mensajes y detalles nicos. Si necesitas una cotizacin especfica para pedidos grandes o personalizados, tambin puedes solicitarla fcilmente a travs de esta seccin. Haz que tus momentos especiales sean inolvidables con nuestras tarjetas personalizadas!"}),g.jsx("div",{className:"mt-4",children:g.jsx("button",{onClick:()=>e("/plans"),className:"bg-orange-500 text-white py-2 px-4 rounded-full",children:"Gestionar compra"})})]})]})})})};function nne({description:e,title:t}){return g.jsxs("div",{className:"border-t border-white  text-black p-1 pt-2",children:[g.jsx("h2",{className:"text-md text-white font-bold mb-4",children:t}),g.jsx("p",{className:"text-white text-[12px]",children:e})]})}function one({show:e,setShow:t,onSubmit:n,itemToEdit:o}){const[r,i]=m.useState([0,0,0,0]),[l,s]=m.useState(""),[a,c]=m.useState("");console.log(o);const u=[399,499,599,699],d=["Bsico","Plus","Emprendedor","Business"],I="https://api.knowmeapp.com",C=localStorage.getItem("token"),{user:f}=m.useContext(kt),A=async y=>await Ie.post(`${I}/api/order_card/`,y,{headers:{"x-token":C}}),v=async(y,Z)=>{console.log(y);const G=await Ie.put(`${I}/api/order_card/${Z}`,y,{headers:{"x-token":C}});return console.log(G),G},h=async()=>{const y=r.map((V,S)=>{var B;const k=(B=o==null?void 0:o.orderPlans)==null?void 0:B[S];return{id_order_card:k?k.id_order_card:null,name:d[S],price:u[S],quantity:V}}).filter(V=>V.quantity>0),Z=r.reduce((V,S)=>V+S,0),G={id_address_fk:1,quantity_printed_cards:Z,quantity_proximity_cards:Z,id_profile_fk:f.id,nameClient:a,status_order_card:!0,plans:y};try{o?v(G,o.id_order_card):await A(G),t(!1)}catch(V){console.error("Failed to update social media:",V)}};m.useEffect(()=>{i(o?o.cantidadTarjetas:[0,0,0,0,0])},[o]),m.useEffect(()=>{if(o&&o.orderPlans){const y=d.map(Z=>{const G=o.orderPlans.find(V=>V.name===Z);return G?G.quantity:0});c(o.nameClient),i(y)}else i([0,0,0,0,0])},[o]);const p=(y,Z)=>{i(G=>{const V=[...G];return V[y]=Math.max(0,V[y]+Z),V})},b=r==null?void 0:r.reduce((y,Z,G)=>y+Z*u[G],0);return g.jsx(wA,{title:o?"Editar cotizacin":"Nueva cotizacin",open:e,onClose:()=>t(!1),children:g.jsxs("div",{className:"",children:[g.jsx("div",{className:"w-full grid grid-cols-3 gap-2 ",children:d.map((y,Z)=>g.jsxs("button",{className:"h-32 m-1 flex-col flex items-center justify-center rounded-md border p-2",children:[g.jsx("p",{className:"text-lg",children:y}),g.jsxs("p",{className:"text-sm",children:["$",u[Z].toFixed(2)]}),g.jsxs("div",{className:"flex border w-3/4 rounded-full items-center my-2",children:[g.jsx("button",{onClick:()=>p(Z,-1),className:"px-2 py-1 bg-transparent rounded-l-md text-black",children:"-"}),g.jsx("h1",{className:"px-1.5 w-full border-none text-center rounded-none bg-transparent py-1.5 text-black",children:r[Z]}),g.jsx("button",{onClick:()=>p(Z,1),className:"px-2 py-1 bg-transparent rounded-r-md text-black",children:"+"})]})]},Z))}),l&&g.jsx("p",{className:"text-red-600 font-semibold text-sm my-2 text-center",children:l}),g.jsx("label",{className:"mx-1 py-2",children:"Nombre cotizacion"}),g.jsx("input",{value:a,onChange:y=>c(y.target.value),className:"w-full mx-1 p-2 rounded-md border"}),g.jsxs("div",{className:"flex items-center py-2 justify-between w-full",children:[g.jsx("h3",{className:"text-black",children:"Total"}),g.jsxs("h3",{className:"text-black",children:["$",b.toFixed(2)]})]}),g.jsxs("button",{onClick:h,className:"w-full rounded-md flex items-center justify-center p-2 text-white bg-orange-600",children:[g.jsx(W9,{className:"text-2xl mr-2"}),o?"Guardar cambios":"Enviar cotizacin"]})]})})}function rne(){const e="https://api.knowmeapp.com",t=localStorage.getItem("token"),n=ut(),o=cn(),r=async()=>{const{data:f}=await o.getOrderCards();s({...f}),console.log(f)},i=async f=>{try{const A=await Ie.get(`${e}/api/order_card/${f}/pdf`,{headers:{"x-token":t,"Content-Type":"application/pdf"},responseType:"blob"}),v=new Blob([A.data],{type:"application/pdf"}),h=window.URL.createObjectURL(v),p=document.createElement("a");p.href=h,p.setAttribute("download","ordercard.pdf"),document.body.appendChild(p),p.click(),p.remove(),window.URL.revokeObjectURL(h)}catch(A){console.error("Error al descargar el PDF:",A)}},[l,s]=m.useState([{idCotizacion:"01",fechaCreacion:"10/08/2024",fechaActualizacion:"10/08/2024",cantidadTarjetas:20,costoTotal:"MXN $2999",estatus:"Pendiente",acciones:["Comprar","editar","borrar"]},{idCotizacion:"02",fechaCreacion:"10/08/2024",fechaActualizacion:"10/08/2024",cantidadTarjetas:20,costoTotal:"MXN $2999",estatus:"Pendiente",acciones:["Comprar","editar","borrar"]},{idCotizacion:"03",fechaCreacion:"10/08/2024",fechaActualizacion:"10/08/2024",cantidadTarjetas:20,costoTotal:"MXN $2999",estatus:"Pendiente",acciones:["Comprar","editar","borrar"]}]),[a,c]=m.useState(!1),[u,d]=m.useState(null),I=async f=>{const A=await Ie.delete(`${e}/api/order_card/${f}`,{headers:{"x-token":t}});return console.log(A),A},C=f=>{d(f),c(!0)};return m.useEffect(()=>{r()},[]),g.jsxs(g.Fragment,{children:[g.jsx(one,{show:a,setShow:c,itemToEdit:u}),g.jsxs("div",{className:"border mt-10 mb-10 text-black p-6 rounded-lg shadow-lg",children:[g.jsxs("div",{className:"md:flex block justify-between",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-md font-bold mb-2",children:"Lista de cotizaciones"}),g.jsx("p",{className:"mb-4 text-sm text-white ",children:"Antes de realizar tu compra, puedes generar una cotizacin por la cantidad de tarjetas necesarias."})]}),g.jsx("button",{onClick:()=>{d(null),c(!0)},className:"bg-orange-500 h-8 px-2 hover:bg-orange-600 text-sm rounded-md text-white",children:"Nueva cotizacion"})]}),g.jsx("div",{className:"relative overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-white",children:[g.jsx("thead",{className:"text-[11px] text-white uppercase",children:g.jsxs("tr",{children:[g.jsx("th",{scope:"col",className:"px-2 py-1",children:"idCotizacion"}),g.jsx("th",{scope:"col",className:"px-2 py-1",children:"Fecha de creacion"}),g.jsx("th",{scope:"col",className:"px-2 py-1",children:"Fecha de actualizacion"}),g.jsx("th",{scope:"col",className:"px-2 py-1",children:"Cantidad de tarjetas"}),g.jsx("th",{scope:"col",className:"px-3 py-1",children:"Costo total"}),g.jsx("th",{scope:"col",className:"px-2 py-1",children:"Estatus"}),g.jsx("th",{scope:"col",className:"px-2 py-1 text-center",children:"Acciones"})]})}),g.jsx("tbody",{children:Array.isArray(l.orderCards)?l.orderCards.map(f=>g.jsxs("tr",{className:"text-[12px] border-y",children:[g.jsx("th",{scope:"row",className:"px-3 py-2 font-medium text-white whitespace-nowrap",children:f.id_order_card}),g.jsx("td",{className:"px-2 py-2",children:new Date(f.createdAt).toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"})}),g.jsx("td",{className:"px-2 py-2",children:new Date(f.updatedAt).toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"})}),g.jsx("td",{className:"px-2 py-2",children:f.quantity_printed_cards}),g.jsx("td",{className:"px-2 py-2",children:f.total.toLocaleString("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2})}),g.jsx("td",{className:"px-2 py-2",children:f.tracking_status}),g.jsxs("td",{className:"px-2 flex py-2 cursor-pointer",children:[g.jsx("button",{className:"bg-green-600 font-semibold rounded-md text-white p-1",onClick:()=>n("/adressorder",{state:{total:f.total,id_order_card:f.id_order_card}}),children:"Comprar"}),g.jsx("button",{className:"bg-blue-500 font-semibold rounded-md text-white p-1 mx-2",onClick:()=>C(f),children:"Editar"}),g.jsx("button",{className:"bg-red-700 font-semibold rounded-md text-white p-1",onClick:()=>I(f.id_order_card),children:"Borrar"}),g.jsx("button",{className:"bg-orange-600 h-8 w-10 ml-1 flex justify-center text-xl items-center font-semibold rounded-md text-white p-1",onClick:()=>i(f.id_order_card),children:g.jsx(j9,{})})]})]},f.id_order_card)):g.jsx("tr",{children:g.jsx("td",{colSpan:"7",children:"No hay datos disponibles"})})})]})})]})]})}const ine="/assets/img001-fbea0a4c.png",lne="/assets/img002-0b76fbde.png",sne="/assets/img003-d3fb25ad.png",ane="/assets/img004-149fdcfe.png",$C=()=>{const[e,t]=m.useState([{title:"Logo Personalizado",descripcion:"Nuestras tarjetas NFC estn diseadas para reflejar la identidad visual de tu empresa. Cada tarjeta incluye la posibilidad de personalizar el logo, asegurando que tu marca est siempre visible y reconocible. La impresin del logo se realiza con alta calidad para mantener la integridad de los colores y detalles."},{title:"Tecnologa",descripcion:"Incorporamos la ltima tecnologa NFC (Near Field Communication) en nuestras tarjetas, permitiendo una conexin rpida y segura con dispositivos compatibles. Al acercar la tarjeta a un smartphone, se abre automticamente tu perfil profesional, facilitando el intercambio de informacin de manera moderna y eficiente."},{title:"Dimensiones",descripcion:"Las tarjetas tienen el mismo tamao que una tarjeta de crdito estndar, con dimensiones de 85.60 mm x 53.98 mm. Este formato familiar asegura que la tarjeta sea cmoda de llevar en carteras y tarjeteros, mantenindose siempre al alcance."},{title:"Material",descripcion:"Fabricadas con PVC de alta calidad, nuestras tarjetas son duraderas y resistentes al desgaste diario. Este material no solo proporciona una sensacin premium al tacto, sino que tambin garantiza la longevidad del producto."},{title:"Colores Empresariales",descripcion:"Para asegurar una coherencia visual con la identidad de tu empresa, ofrecemos la posibilidad de personalizar las tarjetas con los colores especficos de tu marca. Utilizamos tcnicas de impresin avanzadas para asegurar que los colores sean vibrantes y precisos, reflejando fielmente la paleta corporativa."},{title:"Consideraciones",descripcion:"Cada tarjeta NFC personalizada de Know Me puede reemplazar a ms de mil tarjetas de presentacin impresas, contribuyendo significativamente a la reduccin de desechos y al cuidado del medio ambiente. Adems, su uso es mucho ms prctico y moderno, alinendose con las tendencias digitales actuales."}]);return g.jsxs("div",{className:"bg-blue-950  flex flex-col ",children:[g.jsxs("div",{className:"w-[90%]  mt-10 mx-auto",children:[g.jsxs("div",{className:"mb-8 ",children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Personaliza tus tarjetas"}),g.jsx("p",{className:"text-white mt-2 ",children:" Tarjetas diseadas para ofrecer una combinacin de funcionalidad y estilo, estas tarjetas no solo facilitan el intercambio de informacin profesional, sino que tambin aseguran una presentacin elegante y moderna."})]}),g.jsxs("div",{className:"border rounded-md p-4 md:flex block items-start",children:[g.jsxs("div",{className:" md:w-1/2 w-full",children:[g.jsxs("div",{className:" mb-4  border-white",children:[g.jsx("h1",{className:"text-xl font-bold",children:"Especificaciones tecnicas"}),g.jsx("p",{className:"text-white mt-2 text-sm",children:"   ex nec tincidunt elit nibh Nullam Ut quis in non non vitae Ut ex nec tincidunt elit nibh Nullam Ut quis in non non vitae Ut"})]}),g.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:e.map(n=>g.jsx(g.Fragment,{children:g.jsx(nne,{title:n.title,description:n.descripcion})}))})]}),g.jsx("div",{className:"w-full md:w-1/2 md:ml-10 ml-0",children:g.jsxs("div",{className:"grid grid-cols-2  gap-3",children:[g.jsx("div",{children:g.jsx("img",{className:"h-auto max-w-full",src:ine,alt:""})}),g.jsx("div",{children:g.jsx("img",{className:"h-auto max-w-full ",src:ane,alt:""})}),g.jsx("div",{children:g.jsx("img",{className:"h-auto max-w-full ",src:lne,alt:""})}),g.jsx("div",{children:g.jsx("img",{className:"h-auto max-w-full ",src:sne,alt:""})})]})})]}),g.jsx(rne,{})]}),g.jsx($u,{})]})};const gne={linkedCardsCount:"Tarjetas vinculadas",unlinkedCardsCount:"Tarjetas sin vincular",pendingRequestsCount:"Tarjetas pendientes",canceledCardsCount:"Tarjetas canceladas",totalCardsCount:"Tarjetas totales"},v1={Activa:"text-green-400 bg-green-400/10",Eliminada:"text-rose-400 bg-rose-400/10",Pendiente:"text-yellow-400 bg-yellow-400/10"};function em(...e){return e.filter(Boolean).join(" ")}const cne=()=>{const[e,t]=m.useState([]),[n,o]=m.useState({}),r=cn(),i=async()=>{const{data:l}=await r.listCards();t(l.cards),o(l.stats)};return m.useEffect(()=>{i()},[]),g.jsx("div",{children:g.jsxs("main",{children:[g.jsx("header",{children:g.jsx("div",{className:"grid grid-cols-1 bg-gray-700/10 sm:grid-cols-2 lg:grid-cols-5",children:Object.entries(n).map((l,s)=>g.jsxs("div",{className:em(s%2===1?"sm:border-l":s===2?"lg:border-l":"","border-t border-white/5 px-4 py-6 sm:px-6 lg:px-8"),children:[g.jsx("p",{className:"text-sm font-medium leading-6 text-gray-400",children:gne[l[0]]}),g.jsx("p",{className:"mt-2 flex items-baseline gap-x-2",children:g.jsx("span",{className:"text-4xl font-semibold tracking-tight text-white",children:l[1]})})]},l[0]))})}),g.jsxs("div",{className:"border-t border-white/10 pt-11",children:[g.jsx("h2",{className:"px-4 text-base font-semibold leading-7 text-white sm:px-6 lg:px-8",children:"Latest activity"}),g.jsxs("table",{className:"mt-6 w-full whitespace-nowrap text-left",children:[g.jsxs("colgroup",{children:[g.jsx("col",{className:"w-full sm:w-4/12"}),g.jsx("col",{className:"lg:w-4/12"}),g.jsx("col",{className:"lg:w-2/12"}),g.jsx("col",{className:"lg:w-1/12"}),g.jsx("col",{className:"lg:w-1/12"})]}),g.jsx("thead",{className:"border-b border-white/10 text-sm leading-6 text-white",children:g.jsxs("tr",{children:[g.jsx("th",{scope:"col",className:"py-2 pl-4 pr-8 font-semibold sm:pl-6 lg:pl-8",children:"Id tarjeta"}),g.jsx("th",{scope:"col",className:"hidden py-2 pl-0 pr-8 font-semibold sm:table-cell",children:"Fecha de creacin"}),g.jsx("th",{scope:"col",className:"py-2 pl-0 pr-8 text-right font-semibold sm:pr-8 sm:text-left",children:"URL tarjeta"}),g.jsx("th",{scope:"col",className:"hidden py-2 pl-0 pr-8 font-semibold md:table-cell",children:"Organizacin"}),g.jsx("th",{scope:"col",className:"hidden py-2 pl-0 pr-4 text-right font-semibold sm:table-cell sm:pr-6 lg:pr-8",children:"Nombre contacto"}),g.jsx("th",{scope:"col",className:"hidden py-2 pl-0 pr-4 font-semibold sm:table-cell",children:"Estatus"}),g.jsx("th",{scope:"col",className:"hidden py-2 pl-0 pr-4 text-right font-semibold sm:table-cell sm:pr-6 lg:pr-8",children:"Acciones"})]})}),g.jsx("tbody",{className:"divide-y divide-white/5",children:e.map(l=>g.jsxs("tr",{children:[g.jsx("td",{className:"py-4 pl-4 pr-8 sm:pl-6 lg:pl-8 text-white",children:l.id_card}),g.jsx("td",{className:"hidden py-4 pl-0 pr-4 sm:table-cell sm:pr-8",children:g.jsx("div",{className:"font-mono text-sm leading-6 text-gray-400",children:l.createdAt.slice(0,10)})}),g.jsx("td",{className:"py-4 pl-0 pr-4 text-sm leading-6 text-white",children:"Copiar"}),g.jsx("td",{className:"py-4 pl-0 pr-4 text-sm leading-6 text-white",children:l.organization_name}),g.jsx("td",{className:"py-4 pl-0 pr-4 text-sm leading-6 text-white",children:l.contact_name}),g.jsx("td",{className:"py-4 pl-0 pr-4 text-sm leading-6 text-white",children:g.jsxs("div",{className:em(v1[l.status_card&&l.physical_card?"Activa":l.status_card?"Pendiente":"Eliminada"],"flex items-center justify-end gap-x-2 sm:justify-start rounded"),children:[g.jsx("div",{className:em(v1[l.status_card&&l.physical_card?"Activa":l.status_card?"Pendiente":"Eliminada"],"flex-none rounded-full p-1 ml-2"),children:g.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-current"})}),g.jsx("div",{className:"hidden text-white sm:block mr-2",children:l.status_card&&l.physical_card?"Activa":l.status_card?"Pendiente":"Eliminada"})]})}),g.jsx("td",{className:"py-4 pl-0 pr-4 text-sm leading-6 sm:pr-8 lg:pr-20 text-orange-600",children:"Ver"}),g.jsx("td",{className:"py-4 pl-0 pr-4 text-sm leading-6 sm:pr-8 lg:pr-20 text-orange-600",children:"Borrar"})]},l.id_card))})]})]})]})})},Z1=()=>{const[e,t]=m.useState("Tarjetas"),n=[{name:"Tarjetas"},{name:"Usuarios"},{name:"Ventas"}];function o(...r){return r.filter(Boolean).join(" ")}return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"border-b border-gray-200 pb-5 sm:pb-0 mt-12 mx-4",children:[g.jsx("h3",{className:"text-base font-semibold leading-6",children:"Know Me Admin Panel"}),g.jsxs("div",{className:"mt-3 sm:mt-4",children:[g.jsxs("div",{className:"sm:hidden",children:[g.jsx("label",{htmlFor:"current-tab",className:"sr-only",children:"Select a tab"}),g.jsx("select",{id:"current-tab",name:"current-tab",defaultValue:n.find(r=>r.name==e).name,className:"bg-white block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm",children:n.map(r=>g.jsx("option",{children:r.name},r.name))})]}),g.jsx("div",{className:"hidden sm:block",children:g.jsx("nav",{className:"-mb-px flex space-x-8",children:n.map(r=>g.jsx("a",{onClick:()=>{t(r.name)},"aria-current":r.name==e?"page":void 0,className:o(r.name==e?"border-indigo-500 text-indigo-600 cursor-pointer":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700","whitespace-nowrap border-b-2 px-1 pb-4 text-sm font-medium cursor-pointer"),children:r.name},r.name))})})]})]}),g.jsx("div",{className:"pb-5 sm:pb-0 mt-4 mx-4",children:e=="Tarjetas"?g.jsx(cne,{}):g.jsx(g.Fragment,{})})]})},tm=()=>{const[e,t]=m.useState([]),n=cn(),o=ut(),r=async()=>{const{data:l}=await n.postAdressDetail(e);o("/adressorder"),console.log(l)},i=l=>{const{name:s,value:a}=l.target;t(c=>({...c,[s]:a}))};return g.jsxs("div",{className:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8",children:[g.jsxs("div",{className:"flex items-center sm:col-span-3  justify-between",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Informacin de envo"}),g.jsx("p",{className:"mt-1 text-sm leading-6 text-gray-400",children:"Por favor, completa la informacin de envo para tu paquete."})]}),g.jsx("button",{onClick:r,className:"text-sm py-2 rounded-md bg-orange-500 px-10 text-white",children:"Crear Direccion"})]}),g.jsxs("div",{className:"sm:col-span-3",children:[g.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-white",children:"Nombre"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.fullname,onChange:i,id:"first-name",name:"fullname",type:"text",autoComplete:"given-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"sm:col-span-3",children:[g.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-white",children:"Direccion 1"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.street,onChange:i,id:"first-name",name:"street",type:"text",autoComplete:"given-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"sm:col-span-3",children:[g.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-white",children:"Referencia 1"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.street_1,onChange:i,id:"first-name",name:"street_1",type:"text",autoComplete:"given-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"sm:col-span-3",children:[g.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-white",children:"Referencia 2"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.street_2,onChange:i,id:"first-name",name:"street_2",type:"text",autoComplete:"given-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"sm:col-span-3",children:[g.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-white",children:"Numero exterior"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.outdoor_num,onChange:i,id:"outdoor_num",name:"outdoor_num",type:"text",autoComplete:"given-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"sm:col-span-3",children:[g.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-white",children:"Referencias"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.other_indications,onChange:i,id:"first-name",name:"other_indications",type:"text",autoComplete:"given-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"sm:col-span-3",children:[g.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-white",children:"Concepto"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.work_home,onChange:i,id:"first-name",name:"work_home",type:"text",autoComplete:"given-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{className:"sm:col-span-3 grid grid-cols-1 sm:grid-cols-2 gap-x-8",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"city",className:"block text-sm font-medium leading-6 text-white",children:"Ciudad"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.municipality,onChange:i,id:"city",name:"municipality",type:"text",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"state",className:"block text-sm font-medium leading-6 text-white",children:"Estado"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.state,onChange:i,id:"state",name:"state",type:"text",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]})]}),g.jsxs("div",{className:"sm:col-span-3 grid grid-cols-1 sm:grid-cols-2 gap-x-8",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"postal-code",className:"block text-sm font-medium leading-6 text-white",children:"Cdigo Postal"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.postal_code,onChange:i,id:"postal-code",name:"postal_code",type:"text",autoComplete:"postal-code",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-white",children:"Colonia"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.colony,onChange:i,id:"phone",name:"colony",type:"tel",autoComplete:"tel",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-white",children:"Telfono"}),g.jsx("div",{className:"mt-2",children:g.jsx("input",{value:e.contact_phone,onChange:i,id:"phone",name:"contact_phone",type:"tel",autoComplete:"tel",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]})]}),g.jsx("div",{className:"sm:col-span-3",children:g.jsx(UW,{})})]})},une=()=>{const e=qt(),{total:t,id_order_card:n}=e.state||{},o=cn(),r="https://api.knowmeapp.com",i=async()=>{const{data:f}=await o.getAdressOrder();s(f),console.log(f)},[l,s]=m.useState([]),[a,c]=m.useState([]),u=ut();qt(),m.useState({lat:-3.745,lng:-38.523}),m.useEffect(()=>{i()},[]);const d=(f,A)=>{c(v=>v.some(h=>h.id===f)?[]:[{id:f,name:A}]),console.log(a)},I=localStorage.getItem("token"),C=async()=>{try{const{data:f}=await Ie.post(`${r}/api/payment/pay`,{id_order_card:n,id_address_fk:a[0].id,id_user_fk:1,amount:t},{headers:{"x-token":I}});window.open(f.url,"_self")}catch(f){console.error("Error al crear la sesin de pago:",f)}};return g.jsxs("div",{className:"grid max-w-7xl justify-center px-4 py-16",children:[g.jsxs("div",{className:"flex justify-end mb-10",children:[g.jsxs("button",{onClick:()=>u("/orderdetail"),className:"bg-orange-500 text-white rounded-md px-10 py-2 flex items-center",children:["Agregar direccion ",g.jsx(R9,{className:"ml-1"})]}),g.jsxs("button",{onClick:C,className:"bg-orange-500 text-white rounded-md px-10 py-2 ml-2 flex items-center",children:["Pagar tarjetas ",g.jsx(zS,{className:"ml-1"})]})]}),l&&l.addresses&&l.addresses.length>0?l.addresses.map(f=>g.jsxs("div",{onClick:()=>d(f.id_address,f.work_home),className:` ${a.some(A=>A.id===f.id_address)?"border-2 ":""} max-w-4xl cursor-pointer  flex flex-col items-end rounded-xl w-full mb-4`,children:[g.jsx("button",{className:`h-5 w-5 border m-2 ${a.some(A=>A.id===f.id_address)?"bg-white":""} rounded-full`}),g.jsxs("div",{className:"flex px-2 mb-4",children:[g.jsx("img",{className:"w-1/3 rounded-md",src:"https://autoproyecto.com/wp-content/uploads/2019/11/google_maps.jpg",alt:f.work_home}),g.jsxs("div",{className:"text-white text-sm ml-10",children:[g.jsx("h3",{className:"text-2xl text-orange-700 rounded-md px-2 text-center bg-orange-700 bg-opacity-35 font-bold my-2",children:f.work_home}),g.jsx("p",{children:f.street}),g.jsx("p",{children:f.phone}),g.jsx("p",{children:f.neighborhood}),g.jsx("p",{children:f.postal_code}),g.jsx("p",{children:f.municipality}),g.jsx("p",{children:f.colony}),g.jsx("p",{children:f.other_indications})]})]})]},f.id_address)):g.jsx("p",{children:"No addresses available."})]})},dne=()=>{const e=window.innerWidth,t=e>1300?2:3,n=3,o=4;return g.jsx(g.Fragment,{children:g.jsxs(sJ,{children:[g.jsx(ze,{path:"/",element:g.jsx(So,{children:g.jsx(qte,{})})}),g.jsx(ze,{path:"/login/*",element:g.jsx(So,{children:g.jsx(U3,{})})}),g.jsx(ze,{path:"/forgot/*",element:g.jsx(So,{children:g.jsx(V6,{})})}),g.jsx(ze,{path:"/emailSent/*",element:g.jsx(So,{children:g.jsx(R6,{})})}),g.jsx(ze,{path:"/reset-password/*",element:g.jsx(So,{children:g.jsx(W6,{})})}),g.jsx(ze,{path:"/registro/*",element:g.jsx(So,{children:g.jsx(Q3,{})})}),g.jsx(ze,{path:"/pagedetail/*",element:e>576?g.jsx(So,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(tne,{})})]})}):g.jsxs(So,{children:[g.jsx(Xt,{}),g.jsx($C,{})]})}),g.jsx(ze,{path:"/plans/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx($C,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx($C,{})]})}),g.jsx(ze,{path:"/orderdetail/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(tm,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(tm,{})]})}),g.jsx(ze,{path:"/adressorder/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(une,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(tm,{})]})}),g.jsx(ze,{path:"/plan/*",element:g.jsx(So,{children:g.jsx(XF,{})})}),g.jsx(ze,{path:"/card/*",element:g.jsx(CO,{})}),g.jsx(ze,{path:"/perfil/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(sZ,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(sZ,{})]})}),g.jsx(ze,{path:"/password/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(b1,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(b1,{})]})}),g.jsx(ze,{path:"/business/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(RZ,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(RZ,{})]})}),g.jsx(ze,{path:"/info_org/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(A1,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(A1,{})]})}),g.jsx(ze,{path:"/team_org/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(p1,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(p1,{})]})}),g.jsx(ze,{path:"/contacts/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(VZ,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(VZ,{})]})}),g.jsx(ze,{path:"/addContact/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(SZ,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(SZ,{})]})}),g.jsx(ze,{path:"/share/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(hZ,{})})]})}):g.jsx(Je,{children:g.jsx(hZ,{})})}),g.jsx(ze,{path:"/scanner/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(ZZ,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(ZZ,{})]})}),g.jsx(ze,{path:"/vcard/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(BZ,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(BZ,{})]})}),g.jsx(ze,{path:"/settings/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{children:g.jsx(GZ,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(GZ,{})]})}),g.jsx(ze,{path:"/upgrade/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{sm:12-o,md:12-n,lg:12-t,children:g.jsx(y1,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(y1,{})]})}),g.jsx(ze,{path:"/home/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{sm:12-o,md:12-n,lg:12-t,children:g.jsx(fZ,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(fZ,{})]})}),g.jsx(ze,{path:"/admin/*",element:e>576?g.jsx(Je,{children:g.jsxs(Fe,{children:[g.jsx(Ce,{sm:o,md:n,lg:t,children:g.jsx(Rt,{})}),g.jsx(Ce,{sm:12-o,md:12-n,lg:12-t,children:g.jsx(Z1,{})})]})}):g.jsxs(Je,{children:[g.jsx(Xt,{}),g.jsx(Z1,{})]})}),g.jsx(ze,{path:"/*",element:g.jsx(iA,{to:"/login/"})})]})})};function Ine(){return g.jsx(g.Fragment,{children:g.jsx(CJ,{children:g.jsx(dne,{})})})}nm.createRoot(document.getElementById("root")).render(g.jsx(P.StrictMode,{children:g.jsx(Ine,{})}));
