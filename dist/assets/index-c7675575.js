function iR(e,t){for(var n=0;n<t.length;n++){const l=t[n];if(typeof l!="string"&&!Array.isArray(l)){for(const r in l)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(l,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>l[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ln(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function aR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function l(){return this instanceof l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var r=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(n,l,r.get?r:{enumerable:!0,get:function(){return e[l]}})}),n}var ov={exports:{}},Hc={},iv={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pa=Symbol.for("react.element"),gR=Symbol.for("react.portal"),sR=Symbol.for("react.fragment"),cR=Symbol.for("react.strict_mode"),IR=Symbol.for("react.profiler"),dR=Symbol.for("react.provider"),uR=Symbol.for("react.context"),CR=Symbol.for("react.forward_ref"),AR=Symbol.for("react.suspense"),mR=Symbol.for("react.memo"),hR=Symbol.for("react.lazy"),Kf=Symbol.iterator;function fR(e){return e===null||typeof e!="object"?null:(e=Kf&&e[Kf]||e["@@iterator"],typeof e=="function"?e:null)}var av={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gv=Object.assign,sv={};function Ai(e,t,n){this.props=e,this.context=t,this.refs=sv,this.updater=n||av}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ai.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cv(){}cv.prototype=Ai.prototype;function im(e,t,n){this.props=e,this.context=t,this.refs=sv,this.updater=n||av}var am=im.prototype=new cv;am.constructor=im;gv(am,Ai.prototype);am.isPureReactComponent=!0;var Ef=Array.isArray,Iv=Object.prototype.hasOwnProperty,gm={current:null},dv={key:!0,ref:!0,__self:!0,__source:!0};function uv(e,t,n){var l,r={},o=null,i=null;if(t!=null)for(l in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Iv.call(t,l)&&!dv.hasOwnProperty(l)&&(r[l]=t[l]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var g=Array(a),s=0;s<a;s++)g[s]=arguments[s+2];r.children=g}if(e&&e.defaultProps)for(l in a=e.defaultProps,a)r[l]===void 0&&(r[l]=a[l]);return{$$typeof:Pa,type:e,key:o,ref:i,props:r,_owner:gm.current}}function pR(e,t){return{$$typeof:Pa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pa}function bR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Mf=/\/+/g;function cd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bR(""+e.key):t.toString(36)}function is(e,t,n,l,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Pa:case gR:i=!0}}if(i)return i=e,r=r(i),e=l===""?"."+cd(i,0):l,Ef(r)?(n="",e!=null&&(n=e.replace(Mf,"$&/")+"/"),is(r,t,n,"",function(s){return s})):r!=null&&(sm(r)&&(r=pR(r,n+(!r.key||i&&i.key===r.key?"":(""+r.key).replace(Mf,"$&/")+"/")+e)),t.push(r)),1;if(i=0,l=l===""?".":l+":",Ef(e))for(var a=0;a<e.length;a++){o=e[a];var g=l+cd(o,a);i+=is(o,t,n,g,r)}else if(g=fR(e),typeof g=="function")for(e=g.call(e),a=0;!(o=e.next()).done;)o=o.value,g=l+cd(o,a++),i+=is(o,t,n,g,r);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ag(e,t,n){if(e==null)return e;var l=[],r=0;return is(e,l,"","",function(o){return t.call(n,o,r++)}),l}function yR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ht={current:null},as={transition:null},ZR={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:as,ReactCurrentOwner:gm};Be.Children={map:Ag,forEach:function(e,t,n){Ag(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ag(e,function(){t++}),t},toArray:function(e){return Ag(e,function(t){return t})||[]},only:function(e){if(!sm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Be.Component=Ai;Be.Fragment=sR;Be.Profiler=IR;Be.PureComponent=im;Be.StrictMode=cR;Be.Suspense=AR;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZR;Be.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=gv({},e.props),r=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=gm.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(g in t)Iv.call(t,g)&&!dv.hasOwnProperty(g)&&(l[g]=t[g]===void 0&&a!==void 0?a[g]:t[g])}var g=arguments.length-2;if(g===1)l.children=n;else if(1<g){a=Array(g);for(var s=0;s<g;s++)a[s]=arguments[s+2];l.children=a}return{$$typeof:Pa,type:e.type,key:r,ref:o,props:l,_owner:i}};Be.createContext=function(e){return e={$$typeof:uR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dR,_context:e},e.Consumer=e};Be.createElement=uv;Be.createFactory=function(e){var t=uv.bind(null,e);return t.type=e,t};Be.createRef=function(){return{current:null}};Be.forwardRef=function(e){return{$$typeof:CR,render:e}};Be.isValidElement=sm;Be.lazy=function(e){return{$$typeof:hR,_payload:{_status:-1,_result:e},_init:yR}};Be.memo=function(e,t){return{$$typeof:mR,type:e,compare:t===void 0?null:t}};Be.startTransition=function(e){var t=as.transition;as.transition={};try{e()}finally{as.transition=t}};Be.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Be.useCallback=function(e,t){return Ht.current.useCallback(e,t)};Be.useContext=function(e){return Ht.current.useContext(e)};Be.useDebugValue=function(){};Be.useDeferredValue=function(e){return Ht.current.useDeferredValue(e)};Be.useEffect=function(e,t){return Ht.current.useEffect(e,t)};Be.useId=function(){return Ht.current.useId()};Be.useImperativeHandle=function(e,t,n){return Ht.current.useImperativeHandle(e,t,n)};Be.useInsertionEffect=function(e,t){return Ht.current.useInsertionEffect(e,t)};Be.useLayoutEffect=function(e,t){return Ht.current.useLayoutEffect(e,t)};Be.useMemo=function(e,t){return Ht.current.useMemo(e,t)};Be.useReducer=function(e,t,n){return Ht.current.useReducer(e,t,n)};Be.useRef=function(e){return Ht.current.useRef(e)};Be.useState=function(e){return Ht.current.useState(e)};Be.useSyncExternalStore=function(e,t,n){return Ht.current.useSyncExternalStore(e,t,n)};Be.useTransition=function(){return Ht.current.useTransition()};Be.version="18.2.0";iv.exports=Be;var v=iv.exports;const U=Ln(v),Rs=iR({__proto__:null,default:U},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vR=v,GR=Symbol.for("react.element"),BR=Symbol.for("react.fragment"),SR=Object.prototype.hasOwnProperty,VR=vR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WR={key:!0,ref:!0,__self:!0,__source:!0};function Cv(e,t,n){var l,r={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(l in t)SR.call(t,l)&&!WR.hasOwnProperty(l)&&(r[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)r[l]===void 0&&(r[l]=t[l]);return{$$typeof:GR,type:e,key:o,ref:i,props:r,_owner:VR.current}}Hc.Fragment=BR;Hc.jsx=Cv;Hc.jsxs=Cv;ov.exports=Hc;var c=ov.exports,iC={},Av={exports:{}},gn={},mv={exports:{}},hv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,N){var J=E.length;E.push(N);e:for(;0<J;){var X=J-1>>>1,Y=E[X];if(0<r(Y,N))E[X]=N,E[J]=Y,J=X;else break e}}function n(E){return E.length===0?null:E[0]}function l(E){if(E.length===0)return null;var N=E[0],J=E.pop();if(J!==N){E[0]=J;e:for(var X=0,Y=E.length,F=Y>>>1;X<F;){var z=2*(X+1)-1,L=E[z],K=z+1,j=E[K];if(0>r(L,J))K<Y&&0>r(j,L)?(E[X]=j,E[K]=J,X=K):(E[X]=L,E[z]=J,X=z);else if(K<Y&&0>r(j,J))E[X]=j,E[K]=J,X=K;else break e}}return N}function r(E,N){var J=E.sortIndex-N.sortIndex;return J!==0?J:E.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var g=[],s=[],I=1,d=null,u=3,C=!1,h=!1,f=!1,y=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(E){for(var N=n(s);N!==null;){if(N.callback===null)l(s);else if(N.startTime<=E)l(s),N.sortIndex=N.expirationTime,t(g,N);else break;N=n(s)}}function b(E){if(f=!1,p(E),!h)if(n(g)!==null)h=!0,M(Z);else{var N=n(s);N!==null&&T(b,N.startTime-E)}}function Z(E,N){h=!1,f&&(f=!1,A(G),G=-1),C=!0;var J=u;try{for(p(N),d=n(g);d!==null&&(!(d.expirationTime>N)||E&&!W());){var X=d.callback;if(typeof X=="function"){d.callback=null,u=d.priorityLevel;var Y=X(d.expirationTime<=N);N=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(g)&&l(g),p(N)}else l(g);d=n(g)}if(d!==null)var F=!0;else{var z=n(s);z!==null&&T(b,z.startTime-N),F=!1}return F}finally{d=null,u=J,C=!1}}var V=!1,S=null,G=-1,w=5,B=-1;function W(){return!(e.unstable_now()-B<w)}function R(){if(S!==null){var E=e.unstable_now();B=E;var N=!0;try{N=S(!0,E)}finally{N?k():(V=!1,S=null)}}else V=!1}var k;if(typeof m=="function")k=function(){m(R)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,H=x.port2;x.port1.onmessage=R,k=function(){H.postMessage(null)}}else k=function(){y(R,0)};function M(E){S=E,V||(V=!0,k())}function T(E,N){G=y(function(){E(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){h||C||(h=!0,M(Z))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(g)},e.unstable_next=function(E){switch(u){case 1:case 2:case 3:var N=3;break;default:N=u}var J=u;u=N;try{return E()}finally{u=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,N){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var J=u;u=E;try{return N()}finally{u=J}},e.unstable_scheduleCallback=function(E,N,J){var X=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?X+J:X):J=X,E){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=J+Y,E={id:I++,callback:N,priorityLevel:E,startTime:J,expirationTime:Y,sortIndex:-1},J>X?(E.sortIndex=J,t(s,E),n(g)===null&&E===n(s)&&(f?(A(G),G=-1):f=!0,T(b,J-X))):(E.sortIndex=Y,t(g,E),h||C||(h=!0,M(Z))),E},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(E){var N=u;return function(){var J=u;u=N;try{return E.apply(this,arguments)}finally{u=J}}}})(hv);mv.exports=hv;var RR=mv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=v,on=RR;function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pv=new Set,ba={};function mo(e,t){$o(e,t),$o(e+"Capture",t)}function $o(e,t){for(ba[e]=t,e=0;e<t.length;e++)pv.add(t[e])}var yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aC=Object.prototype.hasOwnProperty,wR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tf={},Lf={};function kR(e){return aC.call(Lf,e)?!0:aC.call(Tf,e)?!1:wR.test(e)?Lf[e]=!0:(Tf[e]=!0,!1)}function XR(e,t,n,l){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xR(e,t,n,l){if(t===null||typeof t>"u"||XR(e,t,n,l))return!0;if(l)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ft(e,t,n,l,r,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bt[e]=new Ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bt[t]=new Ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bt[e]=new Ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bt[e]=new Ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bt[e]=new Ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bt[e]=new Ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bt[e]=new Ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bt[e]=new Ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bt[e]=new Ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var cm=/[\-:]([a-z])/g;function Im(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cm,Im);bt[t]=new Ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cm,Im);bt[t]=new Ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cm,Im);bt[t]=new Ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function dm(e,t,n,l){var r=bt.hasOwnProperty(t)?bt[t]:null;(r!==null?r.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xR(t,n,r,l)&&(n=null),l||r===null?kR(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,l=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,l?e.setAttributeNS(l,t,n):e.setAttribute(t,n))))}var Wl=fv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mg=Symbol.for("react.element"),Wo=Symbol.for("react.portal"),Ro=Symbol.for("react.fragment"),um=Symbol.for("react.strict_mode"),gC=Symbol.for("react.profiler"),bv=Symbol.for("react.provider"),yv=Symbol.for("react.context"),Cm=Symbol.for("react.forward_ref"),sC=Symbol.for("react.suspense"),cC=Symbol.for("react.suspense_list"),Am=Symbol.for("react.memo"),Hl=Symbol.for("react.lazy"),Zv=Symbol.for("react.offscreen"),zf=Symbol.iterator;function Ni(e){return e===null||typeof e!="object"?null:(e=zf&&e[zf]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,Id;function _i(e){if(Id===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Id=t&&t[1]||""}return`
`+Id+e}var dd=!1;function ud(e,t){if(!e||dd)return"";dd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var l=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){l=s}e.call(t.prototype)}else{try{throw Error()}catch(s){l=s}e()}}catch(s){if(s&&l&&typeof s.stack=="string"){for(var r=s.stack.split(`
`),o=l.stack.split(`
`),i=r.length-1,a=o.length-1;1<=i&&0<=a&&r[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(r[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||r[i]!==o[a]){var g=`
`+r[i].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=i&&0<=a);break}}}finally{dd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_i(e):""}function JR(e){switch(e.tag){case 5:return _i(e.type);case 16:return _i("Lazy");case 13:return _i("Suspense");case 19:return _i("SuspenseList");case 0:case 2:case 15:return e=ud(e.type,!1),e;case 11:return e=ud(e.type.render,!1),e;case 1:return e=ud(e.type,!0),e;default:return""}}function IC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ro:return"Fragment";case Wo:return"Portal";case gC:return"Profiler";case um:return"StrictMode";case sC:return"Suspense";case cC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yv:return(e.displayName||"Context")+".Consumer";case bv:return(e._context.displayName||"Context")+".Provider";case Cm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Am:return t=e.displayName||null,t!==null?t:IC(e.type)||"Memo";case Hl:t=e._payload,e=e._init;try{return IC(e(t))}catch{}}return null}function NR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IC(t);case 8:return t===um?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function YR(e){var t=vv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(i){l=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(i){l=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hg(e){e._valueTracker||(e._valueTracker=YR(e))}function Gv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=vv(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dC(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jf(e,t){var n=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;n=sr(t.value!=null?t.value:n),e._wrapperState={initialChecked:l,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bv(e,t){t=t.checked,t!=null&&dm(e,"checked",t,!1)}function uC(e,t){Bv(e,t);var n=sr(t.value),l=t.type;if(n!=null)l==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?CC(e,t.type,n):t.hasOwnProperty("defaultValue")&&CC(e,t.type,sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function CC(e,t,n){(t!=="number"||ws(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var qi=Array.isArray;function jo(e,t,n,l){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&l&&(e[n].defaultSelected=!0)}else{for(n=""+sr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,l&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function AC(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(re(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Df(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(re(92));if(qi(n)){if(1<n.length)throw Error(re(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sr(n)}}function Sv(e,t){var n=sr(t.value),l=sr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),l!=null&&(e.defaultValue=""+l)}function Qf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mC(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fg,Wv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,l,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,l,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fg=fg||document.createElement("div"),fg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ya(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var la={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HR=["Webkit","ms","Moz","O"];Object.keys(la).forEach(function(e){HR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),la[t]=la[e]})});function Rv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||la.hasOwnProperty(e)&&la[e]?(""+t).trim():t+"px"}function wv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var l=n.indexOf("--")===0,r=Rv(n,t[n],l);n==="float"&&(n="cssFloat"),l?e.setProperty(n,r):e[n]=r}}var FR=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hC(e,t){if(t){if(FR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(re(62))}}function fC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pC=null;function mm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bC=null,Uo=null,Do=null;function Pf(e){if(e=qa(e)){if(typeof bC!="function")throw Error(re(280));var t=e.stateNode;t&&(t=Tc(t),bC(e.stateNode,e.type,t))}}function kv(e){Uo?Do?Do.push(e):Do=[e]:Uo=e}function Xv(){if(Uo){var e=Uo,t=Do;if(Do=Uo=null,Pf(e),t)for(e=0;e<t.length;e++)Pf(t[e])}}function xv(e,t){return e(t)}function Jv(){}var Cd=!1;function Nv(e,t,n){if(Cd)return e(t,n);Cd=!0;try{return xv(e,t,n)}finally{Cd=!1,(Uo!==null||Do!==null)&&(Jv(),Xv())}}function Za(e,t){var n=e.stateNode;if(n===null)return null;var l=Tc(n);if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(re(231,t,typeof n));return n}var yC=!1;if(yl)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){yC=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{yC=!1}function KR(e,t,n,l,r,o,i,a,g){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(I){this.onError(I)}}var ra=!1,ks=null,Xs=!1,ZC=null,ER={onError:function(e){ra=!0,ks=e}};function MR(e,t,n,l,r,o,i,a,g){ra=!1,ks=null,KR.apply(ER,arguments)}function TR(e,t,n,l,r,o,i,a,g){if(MR.apply(this,arguments),ra){if(ra){var s=ks;ra=!1,ks=null}else throw Error(re(198));Xs||(Xs=!0,ZC=s)}}function ho(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Of(e){if(ho(e)!==e)throw Error(re(188))}function LR(e){var t=e.alternate;if(!t){if(t=ho(e),t===null)throw Error(re(188));return t!==e?null:e}for(var n=e,l=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(l=r.return,l!==null){n=l;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Of(r),e;if(o===l)return Of(r),t;o=o.sibling}throw Error(re(188))}if(n.return!==l.return)n=r,l=o;else{for(var i=!1,a=r.child;a;){if(a===n){i=!0,n=r,l=o;break}if(a===l){i=!0,l=r,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,l=r;break}if(a===l){i=!0,l=o,n=r;break}a=a.sibling}if(!i)throw Error(re(189))}}if(n.alternate!==l)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?e:t}function Hv(e){return e=LR(e),e!==null?Fv(e):null}function Fv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Fv(e);if(t!==null)return t;e=e.sibling}return null}var Kv=on.unstable_scheduleCallback,_f=on.unstable_cancelCallback,zR=on.unstable_shouldYield,jR=on.unstable_requestPaint,nt=on.unstable_now,UR=on.unstable_getCurrentPriorityLevel,hm=on.unstable_ImmediatePriority,Ev=on.unstable_UserBlockingPriority,xs=on.unstable_NormalPriority,DR=on.unstable_LowPriority,Mv=on.unstable_IdlePriority,Fc=null,el=null;function QR(e){if(el&&typeof el.onCommitFiberRoot=="function")try{el.onCommitFiberRoot(Fc,e,void 0,(e.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:_R,PR=Math.log,OR=Math.LN2;function _R(e){return e>>>=0,e===0?32:31-(PR(e)/OR|0)|0}var pg=64,bg=4194304;function $i(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Js(e,t){var n=e.pendingLanes;if(n===0)return 0;var l=0,r=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~r;a!==0?l=$i(a):(o&=i,o!==0&&(l=$i(o)))}else i=n&~r,i!==0?l=$i(i):o!==0&&(l=$i(o));if(l===0)return 0;if(t!==0&&t!==l&&!(t&r)&&(r=l&-l,o=t&-t,r>=o||r===16&&(o&4194240)!==0))return t;if(l&4&&(l|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)n=31-Yn(t),r=1<<n,l|=e[n],t&=~r;return l}function qR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $R(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Yn(o),a=1<<i,g=r[i];g===-1?(!(a&n)||a&l)&&(r[i]=qR(a,t)):g<=t&&(e.expiredLanes|=a),o&=~a}}function vC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tv(){var e=pg;return pg<<=1,!(pg&4194240)&&(pg=64),e}function Ad(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Oa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yn(t),e[t]=n}function ew(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Yn(n),o=1<<r;t[r]=0,l[r]=-1,e[r]=-1,n&=~o}}function fm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Yn(n),r=1<<l;r&t|e[l]&t&&(e[l]|=t),n&=~r}}var ke=0;function Lv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var zv,pm,jv,Uv,Dv,GC=!1,yg=[],ql=null,$l=null,er=null,va=new Map,Ga=new Map,Tl=[],tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qf(e,t){switch(e){case"focusin":case"focusout":ql=null;break;case"dragenter":case"dragleave":$l=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":va.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ga.delete(t.pointerId)}}function Hi(e,t,n,l,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:o,targetContainers:[r]},t!==null&&(t=qa(t),t!==null&&pm(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function nw(e,t,n,l,r){switch(t){case"focusin":return ql=Hi(ql,e,t,n,l,r),!0;case"dragenter":return $l=Hi($l,e,t,n,l,r),!0;case"mouseover":return er=Hi(er,e,t,n,l,r),!0;case"pointerover":var o=r.pointerId;return va.set(o,Hi(va.get(o)||null,e,t,n,l,r)),!0;case"gotpointercapture":return o=r.pointerId,Ga.set(o,Hi(Ga.get(o)||null,e,t,n,l,r)),!0}return!1}function Qv(e){var t=Dr(e.target);if(t!==null){var n=ho(t);if(n!==null){if(t=n.tag,t===13){if(t=Yv(n),t!==null){e.blockedOn=t,Dv(e.priority,function(){jv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=BC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);pC=l,n.target.dispatchEvent(l),pC=null}else return t=qa(n),t!==null&&pm(t),e.blockedOn=n,!1;t.shift()}return!0}function $f(e,t,n){gs(e)&&n.delete(t)}function lw(){GC=!1,ql!==null&&gs(ql)&&(ql=null),$l!==null&&gs($l)&&($l=null),er!==null&&gs(er)&&(er=null),va.forEach($f),Ga.forEach($f)}function Fi(e,t){e.blockedOn===t&&(e.blockedOn=null,GC||(GC=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,lw)))}function Ba(e){function t(r){return Fi(r,e)}if(0<yg.length){Fi(yg[0],e);for(var n=1;n<yg.length;n++){var l=yg[n];l.blockedOn===e&&(l.blockedOn=null)}}for(ql!==null&&Fi(ql,e),$l!==null&&Fi($l,e),er!==null&&Fi(er,e),va.forEach(t),Ga.forEach(t),n=0;n<Tl.length;n++)l=Tl[n],l.blockedOn===e&&(l.blockedOn=null);for(;0<Tl.length&&(n=Tl[0],n.blockedOn===null);)Qv(n),n.blockedOn===null&&Tl.shift()}var Qo=Wl.ReactCurrentBatchConfig,Ns=!0;function rw(e,t,n,l){var r=ke,o=Qo.transition;Qo.transition=null;try{ke=1,bm(e,t,n,l)}finally{ke=r,Qo.transition=o}}function ow(e,t,n,l){var r=ke,o=Qo.transition;Qo.transition=null;try{ke=4,bm(e,t,n,l)}finally{ke=r,Qo.transition=o}}function bm(e,t,n,l){if(Ns){var r=BC(e,t,n,l);if(r===null)Bd(e,t,l,Ys,n),qf(e,l);else if(nw(r,e,t,n,l))l.stopPropagation();else if(qf(e,l),t&4&&-1<tw.indexOf(e)){for(;r!==null;){var o=qa(r);if(o!==null&&zv(o),o=BC(e,t,n,l),o===null&&Bd(e,t,l,Ys,n),o===r)break;r=o}r!==null&&l.stopPropagation()}else Bd(e,t,l,null,n)}}var Ys=null;function BC(e,t,n,l){if(Ys=null,e=mm(l),e=Dr(e),e!==null)if(t=ho(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Yv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ys=e,null}function Pv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UR()){case hm:return 1;case Ev:return 4;case xs:case DR:return 16;case Mv:return 536870912;default:return 16}default:return 16}}var Ul=null,ym=null,ss=null;function Ov(){if(ss)return ss;var e,t=ym,n=t.length,l,r="value"in Ul?Ul.value:Ul.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var i=n-e;for(l=1;l<=i&&t[n-l]===r[o-l];l++);return ss=r.slice(e,1<l?1-l:void 0)}function cs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zg(){return!0}function ep(){return!1}function sn(e){function t(n,l,r,o,i){this._reactName=n,this._targetInst=r,this.type=l,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Zg:ep,this.isPropagationStopped=ep,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zg)},persist:function(){},isPersistent:Zg}),t}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zm=sn(mi),_a=Pe({},mi,{view:0,detail:0}),iw=sn(_a),md,hd,Ki,Kc=Pe({},_a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ki&&(Ki&&e.type==="mousemove"?(md=e.screenX-Ki.screenX,hd=e.screenY-Ki.screenY):hd=md=0,Ki=e),md)},movementY:function(e){return"movementY"in e?e.movementY:hd}}),tp=sn(Kc),aw=Pe({},Kc,{dataTransfer:0}),gw=sn(aw),sw=Pe({},_a,{relatedTarget:0}),fd=sn(sw),cw=Pe({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Iw=sn(cw),dw=Pe({},mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uw=sn(dw),Cw=Pe({},mi,{data:0}),np=sn(Cw),Aw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hw[e])?!!t[e]:!1}function vm(){return fw}var pw=Pe({},_a,{key:function(e){if(e.key){var t=Aw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vm,charCode:function(e){return e.type==="keypress"?cs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bw=sn(pw),yw=Pe({},Kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lp=sn(yw),Zw=Pe({},_a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vm}),vw=sn(Zw),Gw=Pe({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bw=sn(Gw),Sw=Pe({},Kc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vw=sn(Sw),Ww=[9,13,27,32],Gm=yl&&"CompositionEvent"in window,oa=null;yl&&"documentMode"in document&&(oa=document.documentMode);var Rw=yl&&"TextEvent"in window&&!oa,_v=yl&&(!Gm||oa&&8<oa&&11>=oa),rp=String.fromCharCode(32),op=!1;function qv(e,t){switch(e){case"keyup":return Ww.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $v(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wo=!1;function ww(e,t){switch(e){case"compositionend":return $v(t);case"keypress":return t.which!==32?null:(op=!0,rp);case"textInput":return e=t.data,e===rp&&op?null:e;default:return null}}function kw(e,t){if(wo)return e==="compositionend"||!Gm&&qv(e,t)?(e=Ov(),ss=ym=Ul=null,wo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _v&&t.locale!=="ko"?null:t.data;default:return null}}var Xw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xw[e.type]:t==="textarea"}function eG(e,t,n,l){kv(l),t=Hs(t,"onChange"),0<t.length&&(n=new Zm("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var ia=null,Sa=null;function xw(e){IG(e,0)}function Ec(e){var t=xo(e);if(Gv(t))return e}function Jw(e,t){if(e==="change")return t}var tG=!1;if(yl){var pd;if(yl){var bd="oninput"in document;if(!bd){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),bd=typeof ap.oninput=="function"}pd=bd}else pd=!1;tG=pd&&(!document.documentMode||9<document.documentMode)}function gp(){ia&&(ia.detachEvent("onpropertychange",nG),Sa=ia=null)}function nG(e){if(e.propertyName==="value"&&Ec(Sa)){var t=[];eG(t,Sa,e,mm(e)),Nv(xw,t)}}function Nw(e,t,n){e==="focusin"?(gp(),ia=t,Sa=n,ia.attachEvent("onpropertychange",nG)):e==="focusout"&&gp()}function Yw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ec(Sa)}function Hw(e,t){if(e==="click")return Ec(t)}function Fw(e,t){if(e==="input"||e==="change")return Ec(t)}function Kw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fn=typeof Object.is=="function"?Object.is:Kw;function Va(e,t){if(Fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var r=n[l];if(!aC.call(t,r)||!Fn(e[r],t[r]))return!1}return!0}function sp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cp(e,t){var n=sp(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sp(n)}}function lG(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lG(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rG(){for(var e=window,t=ws();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ws(e.document)}return t}function Bm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ew(e){var t=rG(),n=e.focusedElem,l=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lG(n.ownerDocument.documentElement,n)){if(l!==null&&Bm(n)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(l.start,r);l=l.end===void 0?o:Math.min(l.end,r),!e.extend&&o>l&&(r=l,l=o,o=r),r=cp(n,o);var i=cp(n,l);r&&i&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),o>l?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Mw=yl&&"documentMode"in document&&11>=document.documentMode,ko=null,SC=null,aa=null,VC=!1;function Ip(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;VC||ko==null||ko!==ws(l)||(l=ko,"selectionStart"in l&&Bm(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),aa&&Va(aa,l)||(aa=l,l=Hs(SC,"onSelect"),0<l.length&&(t=new Zm("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=ko)))}function vg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xo={animationend:vg("Animation","AnimationEnd"),animationiteration:vg("Animation","AnimationIteration"),animationstart:vg("Animation","AnimationStart"),transitionend:vg("Transition","TransitionEnd")},yd={},oG={};yl&&(oG=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Mc(e){if(yd[e])return yd[e];if(!Xo[e])return e;var t=Xo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in oG)return yd[e]=t[n];return e}var iG=Mc("animationend"),aG=Mc("animationiteration"),gG=Mc("animationstart"),sG=Mc("transitionend"),cG=new Map,dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(e,t){cG.set(e,t),mo(t,[e])}for(var Zd=0;Zd<dp.length;Zd++){var vd=dp[Zd],Tw=vd.toLowerCase(),Lw=vd[0].toUpperCase()+vd.slice(1);yr(Tw,"on"+Lw)}yr(iG,"onAnimationEnd");yr(aG,"onAnimationIteration");yr(gG,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(sG,"onTransitionEnd");$o("onMouseEnter",["mouseout","mouseover"]);$o("onMouseLeave",["mouseout","mouseover"]);$o("onPointerEnter",["pointerout","pointerover"]);$o("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function up(e,t,n){var l=e.type||"unknown-event";e.currentTarget=n,TR(l,t,void 0,e),e.currentTarget=null}function IG(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],r=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var i=l.length-1;0<=i;i--){var a=l[i],g=a.instance,s=a.currentTarget;if(a=a.listener,g!==o&&r.isPropagationStopped())break e;up(r,a,s),o=g}else for(i=0;i<l.length;i++){if(a=l[i],g=a.instance,s=a.currentTarget,a=a.listener,g!==o&&r.isPropagationStopped())break e;up(r,a,s),o=g}}}if(Xs)throw e=ZC,Xs=!1,ZC=null,e}function Fe(e,t){var n=t[XC];n===void 0&&(n=t[XC]=new Set);var l=e+"__bubble";n.has(l)||(dG(t,e,2,!1),n.add(l))}function Gd(e,t,n){var l=0;t&&(l|=4),dG(n,e,l,t)}var Gg="_reactListening"+Math.random().toString(36).slice(2);function Wa(e){if(!e[Gg]){e[Gg]=!0,pv.forEach(function(n){n!=="selectionchange"&&(zw.has(n)||Gd(n,!1,e),Gd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gg]||(t[Gg]=!0,Gd("selectionchange",!1,t))}}function dG(e,t,n,l){switch(Pv(t)){case 1:var r=rw;break;case 4:r=ow;break;default:r=bm}n=r.bind(null,t,n,e),r=void 0,!yC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Bd(e,t,n,l,r){var o=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var i=l.tag;if(i===3||i===4){var a=l.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(i===4)for(i=l.return;i!==null;){var g=i.tag;if((g===3||g===4)&&(g=i.stateNode.containerInfo,g===r||g.nodeType===8&&g.parentNode===r))return;i=i.return}for(;a!==null;){if(i=Dr(a),i===null)return;if(g=i.tag,g===5||g===6){l=o=i;continue e}a=a.parentNode}}l=l.return}Nv(function(){var s=o,I=mm(n),d=[];e:{var u=cG.get(e);if(u!==void 0){var C=Zm,h=e;switch(e){case"keypress":if(cs(n)===0)break e;case"keydown":case"keyup":C=bw;break;case"focusin":h="focus",C=fd;break;case"focusout":h="blur",C=fd;break;case"beforeblur":case"afterblur":C=fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=gw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=vw;break;case iG:case aG:case gG:C=Iw;break;case sG:C=Bw;break;case"scroll":C=iw;break;case"wheel":C=Vw;break;case"copy":case"cut":case"paste":C=uw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=lp}var f=(t&4)!==0,y=!f&&e==="scroll",A=f?u!==null?u+"Capture":null:u;f=[];for(var m=s,p;m!==null;){p=m;var b=p.stateNode;if(p.tag===5&&b!==null&&(p=b,A!==null&&(b=Za(m,A),b!=null&&f.push(Ra(m,b,p)))),y)break;m=m.return}0<f.length&&(u=new C(u,h,null,n,I),d.push({event:u,listeners:f}))}}if(!(t&7)){e:{if(u=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",u&&n!==pC&&(h=n.relatedTarget||n.fromElement)&&(Dr(h)||h[Zl]))break e;if((C||u)&&(u=I.window===I?I:(u=I.ownerDocument)?u.defaultView||u.parentWindow:window,C?(h=n.relatedTarget||n.toElement,C=s,h=h?Dr(h):null,h!==null&&(y=ho(h),h!==y||h.tag!==5&&h.tag!==6)&&(h=null)):(C=null,h=s),C!==h)){if(f=tp,b="onMouseLeave",A="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(f=lp,b="onPointerLeave",A="onPointerEnter",m="pointer"),y=C==null?u:xo(C),p=h==null?u:xo(h),u=new f(b,m+"leave",C,n,I),u.target=y,u.relatedTarget=p,b=null,Dr(I)===s&&(f=new f(A,m+"enter",h,n,I),f.target=p,f.relatedTarget=y,b=f),y=b,C&&h)t:{for(f=C,A=h,m=0,p=f;p;p=yo(p))m++;for(p=0,b=A;b;b=yo(b))p++;for(;0<m-p;)f=yo(f),m--;for(;0<p-m;)A=yo(A),p--;for(;m--;){if(f===A||A!==null&&f===A.alternate)break t;f=yo(f),A=yo(A)}f=null}else f=null;C!==null&&Cp(d,u,C,f,!1),h!==null&&y!==null&&Cp(d,y,h,f,!0)}}e:{if(u=s?xo(s):window,C=u.nodeName&&u.nodeName.toLowerCase(),C==="select"||C==="input"&&u.type==="file")var Z=Jw;else if(ip(u))if(tG)Z=Fw;else{Z=Yw;var V=Nw}else(C=u.nodeName)&&C.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(Z=Hw);if(Z&&(Z=Z(e,s))){eG(d,Z,n,I);break e}V&&V(e,u,s),e==="focusout"&&(V=u._wrapperState)&&V.controlled&&u.type==="number"&&CC(u,"number",u.value)}switch(V=s?xo(s):window,e){case"focusin":(ip(V)||V.contentEditable==="true")&&(ko=V,SC=s,aa=null);break;case"focusout":aa=SC=ko=null;break;case"mousedown":VC=!0;break;case"contextmenu":case"mouseup":case"dragend":VC=!1,Ip(d,n,I);break;case"selectionchange":if(Mw)break;case"keydown":case"keyup":Ip(d,n,I)}var S;if(Gm)e:{switch(e){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else wo?qv(e,n)&&(G="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(G="onCompositionStart");G&&(_v&&n.locale!=="ko"&&(wo||G!=="onCompositionStart"?G==="onCompositionEnd"&&wo&&(S=Ov()):(Ul=I,ym="value"in Ul?Ul.value:Ul.textContent,wo=!0)),V=Hs(s,G),0<V.length&&(G=new np(G,e,null,n,I),d.push({event:G,listeners:V}),S?G.data=S:(S=$v(n),S!==null&&(G.data=S)))),(S=Rw?ww(e,n):kw(e,n))&&(s=Hs(s,"onBeforeInput"),0<s.length&&(I=new np("onBeforeInput","beforeinput",null,n,I),d.push({event:I,listeners:s}),I.data=S))}IG(d,t)})}function Ra(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hs(e,t){for(var n=t+"Capture",l=[];e!==null;){var r=e,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Za(e,n),o!=null&&l.unshift(Ra(e,o,r)),o=Za(e,t),o!=null&&l.push(Ra(e,o,r))),e=e.return}return l}function yo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cp(e,t,n,l,r){for(var o=t._reactName,i=[];n!==null&&n!==l;){var a=n,g=a.alternate,s=a.stateNode;if(g!==null&&g===l)break;a.tag===5&&s!==null&&(a=s,r?(g=Za(n,o),g!=null&&i.unshift(Ra(n,g,a))):r||(g=Za(n,o),g!=null&&i.push(Ra(n,g,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var jw=/\r\n?/g,Uw=/\u0000|\uFFFD/g;function Ap(e){return(typeof e=="string"?e:""+e).replace(jw,`
`).replace(Uw,"")}function Bg(e,t,n){if(t=Ap(t),Ap(e)!==t&&n)throw Error(re(425))}function Fs(){}var WC=null,RC=null;function wC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kC=typeof setTimeout=="function"?setTimeout:void 0,Dw=typeof clearTimeout=="function"?clearTimeout:void 0,mp=typeof Promise=="function"?Promise:void 0,Qw=typeof queueMicrotask=="function"?queueMicrotask:typeof mp<"u"?function(e){return mp.resolve(null).then(e).catch(Pw)}:kC;function Pw(e){setTimeout(function(){throw e})}function Sd(e,t){var n=t,l=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(l===0){e.removeChild(r),Ba(t);return}l--}else n!=="$"&&n!=="$?"&&n!=="$!"||l++;n=r}while(n);Ba(t)}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),Pn="__reactFiber$"+hi,wa="__reactProps$"+hi,Zl="__reactContainer$"+hi,XC="__reactEvents$"+hi,Ow="__reactListeners$"+hi,_w="__reactHandles$"+hi;function Dr(e){var t=e[Pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zl]||n[Pn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hp(e);e!==null;){if(n=e[Pn])return n;e=hp(e)}return t}e=n,n=e.parentNode}return null}function qa(e){return e=e[Pn]||e[Zl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(re(33))}function Tc(e){return e[wa]||null}var xC=[],Jo=-1;function Zr(e){return{current:e}}function Me(e){0>Jo||(e.current=xC[Jo],xC[Jo]=null,Jo--)}function Ne(e,t){Jo++,xC[Jo]=e.current,e.current=t}var cr={},Rt=Zr(cr),jt=Zr(!1),ro=cr;function ei(e,t){var n=e.type.contextTypes;if(!n)return cr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=t[o];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ut(e){return e=e.childContextTypes,e!=null}function Ks(){Me(jt),Me(Rt)}function fp(e,t,n){if(Rt.current!==cr)throw Error(re(168));Ne(Rt,t),Ne(jt,n)}function uG(e,t,n){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return n;l=l.getChildContext();for(var r in l)if(!(r in t))throw Error(re(108,NR(e)||"Unknown",r));return Pe({},n,l)}function Es(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,ro=Rt.current,Ne(Rt,e),Ne(jt,jt.current),!0}function pp(e,t,n){var l=e.stateNode;if(!l)throw Error(re(169));n?(e=uG(e,t,ro),l.__reactInternalMemoizedMergedChildContext=e,Me(jt),Me(Rt),Ne(Rt,e)):Me(jt),Ne(jt,n)}var Il=null,Lc=!1,Vd=!1;function CG(e){Il===null?Il=[e]:Il.push(e)}function qw(e){Lc=!0,CG(e)}function vr(){if(!Vd&&Il!==null){Vd=!0;var e=0,t=ke;try{var n=Il;for(ke=1;e<n.length;e++){var l=n[e];do l=l(!0);while(l!==null)}Il=null,Lc=!1}catch(r){throw Il!==null&&(Il=Il.slice(e+1)),Kv(hm,vr),r}finally{ke=t,Vd=!1}}return null}var No=[],Yo=0,Ms=null,Ts=0,pn=[],bn=0,oo=null,dl=1,ul="";function Yr(e,t){No[Yo++]=Ts,No[Yo++]=Ms,Ms=e,Ts=t}function AG(e,t,n){pn[bn++]=dl,pn[bn++]=ul,pn[bn++]=oo,oo=e;var l=dl;e=ul;var r=32-Yn(l)-1;l&=~(1<<r),n+=1;var o=32-Yn(t)+r;if(30<o){var i=r-r%5;o=(l&(1<<i)-1).toString(32),l>>=i,r-=i,dl=1<<32-Yn(t)+r|n<<r|l,ul=o+e}else dl=1<<o|n<<r|l,ul=e}function Sm(e){e.return!==null&&(Yr(e,1),AG(e,1,0))}function Vm(e){for(;e===Ms;)Ms=No[--Yo],No[Yo]=null,Ts=No[--Yo],No[Yo]=null;for(;e===oo;)oo=pn[--bn],pn[bn]=null,ul=pn[--bn],pn[bn]=null,dl=pn[--bn],pn[bn]=null}var tn=null,$t=null,Te=!1,Jn=null;function mG(e,t){var n=Gn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tn=e,$t=tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tn=e,$t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=oo!==null?{id:dl,overflow:ul}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,tn=e,$t=null,!0):!1;default:return!1}}function JC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function NC(e){if(Te){var t=$t;if(t){var n=t;if(!bp(e,t)){if(JC(e))throw Error(re(418));t=tr(n.nextSibling);var l=tn;t&&bp(e,t)?mG(l,n):(e.flags=e.flags&-4097|2,Te=!1,tn=e)}}else{if(JC(e))throw Error(re(418));e.flags=e.flags&-4097|2,Te=!1,tn=e}}}function yp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tn=e}function Sg(e){if(e!==tn)return!1;if(!Te)return yp(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wC(e.type,e.memoizedProps)),t&&(t=$t)){if(JC(e))throw hG(),Error(re(418));for(;t;)mG(e,t),t=tr(t.nextSibling)}if(yp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){$t=tr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}$t=null}}else $t=tn?tr(e.stateNode.nextSibling):null;return!0}function hG(){for(var e=$t;e;)e=tr(e.nextSibling)}function ti(){$t=tn=null,Te=!1}function Wm(e){Jn===null?Jn=[e]:Jn.push(e)}var $w=Wl.ReactCurrentBatchConfig;function Xn(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Ls=Zr(null),zs=null,Ho=null,Rm=null;function wm(){Rm=Ho=zs=null}function km(e){var t=Ls.current;Me(Ls),e._currentValue=t}function YC(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Po(e,t){zs=e,Rm=Ho=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Vn(e){var t=e._currentValue;if(Rm!==e)if(e={context:e,memoizedValue:t,next:null},Ho===null){if(zs===null)throw Error(re(308));Ho=e,zs.dependencies={lanes:0,firstContext:e}}else Ho=Ho.next=e;return t}var Qr=null;function Xm(e){Qr===null?Qr=[e]:Qr.push(e)}function fG(e,t,n,l){var r=t.interleaved;return r===null?(n.next=n,Xm(t)):(n.next=r.next,r.next=n),t.interleaved=n,vl(e,l)}function vl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fl=!1;function xm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pG(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Al(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nr(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,We&2){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,vl(e,n)}return r=l.interleaved,r===null?(t.next=t,Xm(l)):(t.next=r.next,r.next=t),l.interleaved=t,vl(e,n)}function Is(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,fm(e,n)}}function Zp(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:l.shared,effects:l.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function js(e,t,n,l){var r=e.updateQueue;Fl=!1;var o=r.firstBaseUpdate,i=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var g=a,s=g.next;g.next=null,i===null?o=s:i.next=s,i=g;var I=e.alternate;I!==null&&(I=I.updateQueue,a=I.lastBaseUpdate,a!==i&&(a===null?I.firstBaseUpdate=s:a.next=s,I.lastBaseUpdate=g))}if(o!==null){var d=r.baseState;i=0,I=s=g=null,a=o;do{var u=a.lane,C=a.eventTime;if((l&u)===u){I!==null&&(I=I.next={eventTime:C,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=e,f=a;switch(u=t,C=n,f.tag){case 1:if(h=f.payload,typeof h=="function"){d=h.call(C,d,u);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=f.payload,u=typeof h=="function"?h.call(C,d,u):h,u==null)break e;d=Pe({},d,u);break e;case 2:Fl=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,u=r.effects,u===null?r.effects=[a]:u.push(a))}else C={eventTime:C,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},I===null?(s=I=C,g=d):I=I.next=C,i|=u;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;u=a,a=u.next,u.next=null,r.lastBaseUpdate=u,r.shared.pending=null}}while(1);if(I===null&&(g=d),r.baseState=g,r.firstBaseUpdate=s,r.lastBaseUpdate=I,t=r.shared.interleaved,t!==null){r=t;do i|=r.lane,r=r.next;while(r!==t)}else o===null&&(r.shared.lanes=0);ao|=i,e.lanes=i,e.memoizedState=d}}function vp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],r=l.callback;if(r!==null){if(l.callback=null,l=n,typeof r!="function")throw Error(re(191,r));r.call(l)}}}var bG=new fv.Component().refs;function HC(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zc={isMounted:function(e){return(e=e._reactInternals)?ho(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Yt(),r=rr(e),o=Al(l,r);o.payload=t,n!=null&&(o.callback=n),t=nr(e,o,r),t!==null&&(Hn(t,e,r,l),Is(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Yt(),r=rr(e),o=Al(l,r);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=nr(e,o,r),t!==null&&(Hn(t,e,r,l),Is(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yt(),l=rr(e),r=Al(n,l);r.tag=2,t!=null&&(r.callback=t),t=nr(e,r,l),t!==null&&(Hn(t,e,l,n),Is(t,e,l))}};function Gp(e,t,n,l,r,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,o,i):t.prototype&&t.prototype.isPureReactComponent?!Va(n,l)||!Va(r,o):!0}function yG(e,t,n){var l=!1,r=cr,o=t.contextType;return typeof o=="object"&&o!==null?o=Vn(o):(r=Ut(t)?ro:Rt.current,l=t.contextTypes,o=(l=l!=null)?ei(e,r):cr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zc,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function Bp(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&zc.enqueueReplaceState(t,t.state,null)}function FC(e,t,n,l){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=bG,xm(e);var o=t.contextType;typeof o=="object"&&o!==null?r.context=Vn(o):(o=Ut(t)?ro:Rt.current,r.context=ei(e,o)),r.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(HC(e,t,o,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&zc.enqueueReplaceState(r,r.state,null),js(e,n,r,l),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Ei(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var l=n.stateNode}if(!l)throw Error(re(147,e));var r=l,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=r.refs;a===bG&&(a=r.refs={}),i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,e))}return e}function Vg(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sp(e){var t=e._init;return t(e._payload)}function ZG(e){function t(A,m){if(e){var p=A.deletions;p===null?(A.deletions=[m],A.flags|=16):p.push(m)}}function n(A,m){if(!e)return null;for(;m!==null;)t(A,m),m=m.sibling;return null}function l(A,m){for(A=new Map;m!==null;)m.key!==null?A.set(m.key,m):A.set(m.index,m),m=m.sibling;return A}function r(A,m){return A=or(A,m),A.index=0,A.sibling=null,A}function o(A,m,p){return A.index=p,e?(p=A.alternate,p!==null?(p=p.index,p<m?(A.flags|=2,m):p):(A.flags|=2,m)):(A.flags|=1048576,m)}function i(A){return e&&A.alternate===null&&(A.flags|=2),A}function a(A,m,p,b){return m===null||m.tag!==6?(m=Jd(p,A.mode,b),m.return=A,m):(m=r(m,p),m.return=A,m)}function g(A,m,p,b){var Z=p.type;return Z===Ro?I(A,m,p.props.children,b,p.key):m!==null&&(m.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Hl&&Sp(Z)===m.type)?(b=r(m,p.props),b.ref=Ei(A,m,p),b.return=A,b):(b=hs(p.type,p.key,p.props,null,A.mode,b),b.ref=Ei(A,m,p),b.return=A,b)}function s(A,m,p,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=Nd(p,A.mode,b),m.return=A,m):(m=r(m,p.children||[]),m.return=A,m)}function I(A,m,p,b,Z){return m===null||m.tag!==7?(m=to(p,A.mode,b,Z),m.return=A,m):(m=r(m,p),m.return=A,m)}function d(A,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Jd(""+m,A.mode,p),m.return=A,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case mg:return p=hs(m.type,m.key,m.props,null,A.mode,p),p.ref=Ei(A,null,m),p.return=A,p;case Wo:return m=Nd(m,A.mode,p),m.return=A,m;case Hl:var b=m._init;return d(A,b(m._payload),p)}if(qi(m)||Ni(m))return m=to(m,A.mode,p,null),m.return=A,m;Vg(A,m)}return null}function u(A,m,p,b){var Z=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return Z!==null?null:a(A,m,""+p,b);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case mg:return p.key===Z?g(A,m,p,b):null;case Wo:return p.key===Z?s(A,m,p,b):null;case Hl:return Z=p._init,u(A,m,Z(p._payload),b)}if(qi(p)||Ni(p))return Z!==null?null:I(A,m,p,b,null);Vg(A,p)}return null}function C(A,m,p,b,Z){if(typeof b=="string"&&b!==""||typeof b=="number")return A=A.get(p)||null,a(m,A,""+b,Z);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mg:return A=A.get(b.key===null?p:b.key)||null,g(m,A,b,Z);case Wo:return A=A.get(b.key===null?p:b.key)||null,s(m,A,b,Z);case Hl:var V=b._init;return C(A,m,p,V(b._payload),Z)}if(qi(b)||Ni(b))return A=A.get(p)||null,I(m,A,b,Z,null);Vg(m,b)}return null}function h(A,m,p,b){for(var Z=null,V=null,S=m,G=m=0,w=null;S!==null&&G<p.length;G++){S.index>G?(w=S,S=null):w=S.sibling;var B=u(A,S,p[G],b);if(B===null){S===null&&(S=w);break}e&&S&&B.alternate===null&&t(A,S),m=o(B,m,G),V===null?Z=B:V.sibling=B,V=B,S=w}if(G===p.length)return n(A,S),Te&&Yr(A,G),Z;if(S===null){for(;G<p.length;G++)S=d(A,p[G],b),S!==null&&(m=o(S,m,G),V===null?Z=S:V.sibling=S,V=S);return Te&&Yr(A,G),Z}for(S=l(A,S);G<p.length;G++)w=C(S,A,G,p[G],b),w!==null&&(e&&w.alternate!==null&&S.delete(w.key===null?G:w.key),m=o(w,m,G),V===null?Z=w:V.sibling=w,V=w);return e&&S.forEach(function(W){return t(A,W)}),Te&&Yr(A,G),Z}function f(A,m,p,b){var Z=Ni(p);if(typeof Z!="function")throw Error(re(150));if(p=Z.call(p),p==null)throw Error(re(151));for(var V=Z=null,S=m,G=m=0,w=null,B=p.next();S!==null&&!B.done;G++,B=p.next()){S.index>G?(w=S,S=null):w=S.sibling;var W=u(A,S,B.value,b);if(W===null){S===null&&(S=w);break}e&&S&&W.alternate===null&&t(A,S),m=o(W,m,G),V===null?Z=W:V.sibling=W,V=W,S=w}if(B.done)return n(A,S),Te&&Yr(A,G),Z;if(S===null){for(;!B.done;G++,B=p.next())B=d(A,B.value,b),B!==null&&(m=o(B,m,G),V===null?Z=B:V.sibling=B,V=B);return Te&&Yr(A,G),Z}for(S=l(A,S);!B.done;G++,B=p.next())B=C(S,A,G,B.value,b),B!==null&&(e&&B.alternate!==null&&S.delete(B.key===null?G:B.key),m=o(B,m,G),V===null?Z=B:V.sibling=B,V=B);return e&&S.forEach(function(R){return t(A,R)}),Te&&Yr(A,G),Z}function y(A,m,p,b){if(typeof p=="object"&&p!==null&&p.type===Ro&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case mg:e:{for(var Z=p.key,V=m;V!==null;){if(V.key===Z){if(Z=p.type,Z===Ro){if(V.tag===7){n(A,V.sibling),m=r(V,p.props.children),m.return=A,A=m;break e}}else if(V.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Hl&&Sp(Z)===V.type){n(A,V.sibling),m=r(V,p.props),m.ref=Ei(A,V,p),m.return=A,A=m;break e}n(A,V);break}else t(A,V);V=V.sibling}p.type===Ro?(m=to(p.props.children,A.mode,b,p.key),m.return=A,A=m):(b=hs(p.type,p.key,p.props,null,A.mode,b),b.ref=Ei(A,m,p),b.return=A,A=b)}return i(A);case Wo:e:{for(V=p.key;m!==null;){if(m.key===V)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(A,m.sibling),m=r(m,p.children||[]),m.return=A,A=m;break e}else{n(A,m);break}else t(A,m);m=m.sibling}m=Nd(p,A.mode,b),m.return=A,A=m}return i(A);case Hl:return V=p._init,y(A,m,V(p._payload),b)}if(qi(p))return h(A,m,p,b);if(Ni(p))return f(A,m,p,b);Vg(A,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(A,m.sibling),m=r(m,p),m.return=A,A=m):(n(A,m),m=Jd(p,A.mode,b),m.return=A,A=m),i(A)):n(A,m)}return y}var ni=ZG(!0),vG=ZG(!1),$a={},tl=Zr($a),ka=Zr($a),Xa=Zr($a);function Pr(e){if(e===$a)throw Error(re(174));return e}function Jm(e,t){switch(Ne(Xa,t),Ne(ka,e),Ne(tl,$a),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mC(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mC(t,e)}Me(tl),Ne(tl,t)}function li(){Me(tl),Me(ka),Me(Xa)}function GG(e){Pr(Xa.current);var t=Pr(tl.current),n=mC(t,e.type);t!==n&&(Ne(ka,e),Ne(tl,n))}function Nm(e){ka.current===e&&(Me(tl),Me(ka))}var ze=Zr(0);function Us(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wd=[];function Ym(){for(var e=0;e<Wd.length;e++)Wd[e]._workInProgressVersionPrimary=null;Wd.length=0}var ds=Wl.ReactCurrentDispatcher,Rd=Wl.ReactCurrentBatchConfig,io=0,De=null,st=null,dt=null,Ds=!1,ga=!1,xa=0,ek=0;function Gt(){throw Error(re(321))}function Hm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fn(e[n],t[n]))return!1;return!0}function Fm(e,t,n,l,r,o){if(io=o,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=e===null||e.memoizedState===null?rk:ok,e=n(l,r),ga){o=0;do{if(ga=!1,xa=0,25<=o)throw Error(re(301));o+=1,dt=st=null,t.updateQueue=null,ds.current=ik,e=n(l,r)}while(ga)}if(ds.current=Qs,t=st!==null&&st.next!==null,io=0,dt=st=De=null,Ds=!1,t)throw Error(re(300));return e}function Km(){var e=xa!==0;return xa=0,e}function Qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?De.memoizedState=dt=e:dt=dt.next=e,dt}function Wn(){if(st===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=dt===null?De.memoizedState:dt.next;if(t!==null)dt=t,st=e;else{if(e===null)throw Error(re(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},dt===null?De.memoizedState=dt=e:dt=dt.next=e}return dt}function Ja(e,t){return typeof t=="function"?t(e):t}function wd(e){var t=Wn(),n=t.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=e;var l=st,r=l.baseQueue,o=n.pending;if(o!==null){if(r!==null){var i=r.next;r.next=o.next,o.next=i}l.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,l=l.baseState;var a=i=null,g=null,s=o;do{var I=s.lane;if((io&I)===I)g!==null&&(g=g.next={lane:0,action:s.action,hasEagerState:s.hasEagerState,eagerState:s.eagerState,next:null}),l=s.hasEagerState?s.eagerState:e(l,s.action);else{var d={lane:I,action:s.action,hasEagerState:s.hasEagerState,eagerState:s.eagerState,next:null};g===null?(a=g=d,i=l):g=g.next=d,De.lanes|=I,ao|=I}s=s.next}while(s!==null&&s!==o);g===null?i=l:g.next=a,Fn(l,t.memoizedState)||(Tt=!0),t.memoizedState=l,t.baseState=i,t.baseQueue=g,n.lastRenderedState=l}if(e=n.interleaved,e!==null){r=e;do o=r.lane,De.lanes|=o,ao|=o,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function kd(e){var t=Wn(),n=t.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=e;var l=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var i=r=r.next;do o=e(o,i.action),i=i.next;while(i!==r);Fn(o,t.memoizedState)||(Tt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,l]}function BG(){}function SG(e,t){var n=De,l=Wn(),r=t(),o=!Fn(l.memoizedState,r);if(o&&(l.memoizedState=r,Tt=!0),l=l.queue,Em(RG.bind(null,n,l,e),[e]),l.getSnapshot!==t||o||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,Na(9,WG.bind(null,n,l,r,t),void 0,null),ut===null)throw Error(re(349));io&30||VG(n,t,r)}return r}function VG(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function WG(e,t,n,l){t.value=n,t.getSnapshot=l,wG(t)&&kG(e)}function RG(e,t,n){return n(function(){wG(t)&&kG(e)})}function wG(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fn(e,n)}catch{return!0}}function kG(e){var t=vl(e,1);t!==null&&Hn(t,e,1,-1)}function Vp(e){var t=Qn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:e},t.queue=e,e=e.dispatch=lk.bind(null,De,e),[t.memoizedState,e]}function Na(e,t,n,l){return e={tag:e,create:t,destroy:n,deps:l,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e)),e}function XG(){return Wn().memoizedState}function us(e,t,n,l){var r=Qn();De.flags|=e,r.memoizedState=Na(1|t,n,void 0,l===void 0?null:l)}function jc(e,t,n,l){var r=Wn();l=l===void 0?null:l;var o=void 0;if(st!==null){var i=st.memoizedState;if(o=i.destroy,l!==null&&Hm(l,i.deps)){r.memoizedState=Na(t,n,o,l);return}}De.flags|=e,r.memoizedState=Na(1|t,n,o,l)}function Wp(e,t){return us(8390656,8,e,t)}function Em(e,t){return jc(2048,8,e,t)}function xG(e,t){return jc(4,2,e,t)}function JG(e,t){return jc(4,4,e,t)}function NG(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function YG(e,t,n){return n=n!=null?n.concat([e]):null,jc(4,4,NG.bind(null,t,e),n)}function Mm(){}function HG(e,t){var n=Wn();t=t===void 0?null:t;var l=n.memoizedState;return l!==null&&t!==null&&Hm(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function FG(e,t){var n=Wn();t=t===void 0?null:t;var l=n.memoizedState;return l!==null&&t!==null&&Hm(t,l[1])?l[0]:(e=e(),n.memoizedState=[e,t],e)}function KG(e,t,n){return io&21?(Fn(n,t)||(n=Tv(),De.lanes|=n,ao|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function tk(e,t){var n=ke;ke=n!==0&&4>n?n:4,e(!0);var l=Rd.transition;Rd.transition={};try{e(!1),t()}finally{ke=n,Rd.transition=l}}function EG(){return Wn().memoizedState}function nk(e,t,n){var l=rr(e);if(n={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null},MG(e))TG(t,n);else if(n=fG(e,t,n,l),n!==null){var r=Yt();Hn(n,e,l,r),LG(n,t,l)}}function lk(e,t,n){var l=rr(e),r={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null};if(MG(e))TG(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(r.hasEagerState=!0,r.eagerState=a,Fn(a,i)){var g=t.interleaved;g===null?(r.next=r,Xm(t)):(r.next=g.next,g.next=r),t.interleaved=r;return}}catch{}finally{}n=fG(e,t,r,l),n!==null&&(r=Yt(),Hn(n,e,l,r),LG(n,t,l))}}function MG(e){var t=e.alternate;return e===De||t!==null&&t===De}function TG(e,t){ga=Ds=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function LG(e,t,n){if(n&4194240){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,fm(e,n)}}var Qs={readContext:Vn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},rk={readContext:Vn,useCallback:function(e,t){return Qn().memoizedState=[e,t===void 0?null:t],e},useContext:Vn,useEffect:Wp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,us(4194308,4,NG.bind(null,t,e),n)},useLayoutEffect:function(e,t){return us(4194308,4,e,t)},useInsertionEffect:function(e,t){return us(4,2,e,t)},useMemo:function(e,t){var n=Qn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var l=Qn();return t=n!==void 0?n(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=nk.bind(null,De,e),[l.memoizedState,e]},useRef:function(e){var t=Qn();return e={current:e},t.memoizedState=e},useState:Vp,useDebugValue:Mm,useDeferredValue:function(e){return Qn().memoizedState=e},useTransition:function(){var e=Vp(!1),t=e[0];return e=tk.bind(null,e[1]),Qn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var l=De,r=Qn();if(Te){if(n===void 0)throw Error(re(407));n=n()}else{if(n=t(),ut===null)throw Error(re(349));io&30||VG(l,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Wp(RG.bind(null,l,o,e),[e]),l.flags|=2048,Na(9,WG.bind(null,l,o,n,t),void 0,null),n},useId:function(){var e=Qn(),t=ut.identifierPrefix;if(Te){var n=ul,l=dl;n=(l&~(1<<32-Yn(l)-1)).toString(32)+n,t=":"+t+"R"+n,n=xa++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ek++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ok={readContext:Vn,useCallback:HG,useContext:Vn,useEffect:Em,useImperativeHandle:YG,useInsertionEffect:xG,useLayoutEffect:JG,useMemo:FG,useReducer:wd,useRef:XG,useState:function(){return wd(Ja)},useDebugValue:Mm,useDeferredValue:function(e){var t=Wn();return KG(t,st.memoizedState,e)},useTransition:function(){var e=wd(Ja)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:BG,useSyncExternalStore:SG,useId:EG,unstable_isNewReconciler:!1},ik={readContext:Vn,useCallback:HG,useContext:Vn,useEffect:Em,useImperativeHandle:YG,useInsertionEffect:xG,useLayoutEffect:JG,useMemo:FG,useReducer:kd,useRef:XG,useState:function(){return kd(Ja)},useDebugValue:Mm,useDeferredValue:function(e){var t=Wn();return st===null?t.memoizedState=e:KG(t,st.memoizedState,e)},useTransition:function(){var e=kd(Ja)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:BG,useSyncExternalStore:SG,useId:EG,unstable_isNewReconciler:!1};function ri(e,t){try{var n="",l=t;do n+=JR(l),l=l.return;while(l);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:r,digest:null}}function Xd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function KC(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ak=typeof WeakMap=="function"?WeakMap:Map;function zG(e,t,n){n=Al(-1,n),n.tag=3,n.payload={element:null};var l=t.value;return n.callback=function(){Os||(Os=!0,PC=l),KC(e,t)},n}function jG(e,t,n){n=Al(-1,n),n.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var r=t.value;n.payload=function(){return l(r)},n.callback=function(){KC(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){KC(e,t),typeof l!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Rp(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new ak;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(n)||(r.add(n),e=yk.bind(null,e,t,n),t.then(e,e))}function wp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kp(e,t,n,l,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Al(-1,1),t.tag=2,nr(n,t,1))),n.lanes|=1),e)}var gk=Wl.ReactCurrentOwner,Tt=!1;function Jt(e,t,n,l){t.child=e===null?vG(t,null,n,l):ni(t,e.child,n,l)}function Xp(e,t,n,l,r){n=n.render;var o=t.ref;return Po(t,r),l=Fm(e,t,n,l,o,r),n=Km(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Gl(e,t,r)):(Te&&n&&Sm(t),t.flags|=1,Jt(e,t,l,r),t.child)}function xp(e,t,n,l,r){if(e===null){var o=n.type;return typeof o=="function"&&!Pm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,UG(e,t,o,l,r)):(e=hs(n.type,null,l,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&r)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Va,n(i,l)&&e.ref===t.ref)return Gl(e,t,r)}return t.flags|=1,e=or(o,l),e.ref=t.ref,e.return=t,t.child=e}function UG(e,t,n,l,r){if(e!==null){var o=e.memoizedProps;if(Va(o,l)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=l=o,(e.lanes&r)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Gl(e,t,r)}return EC(e,t,n,l,r)}function DG(e,t,n){var l=t.pendingProps,r=l.children,o=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Ko,Ot),Ot|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(Ko,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=o!==null?o.baseLanes:n,Ne(Ko,Ot),Ot|=l}else o!==null?(l=o.baseLanes|n,t.memoizedState=null):l=n,Ne(Ko,Ot),Ot|=l;return Jt(e,t,r,n),t.child}function QG(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function EC(e,t,n,l,r){var o=Ut(n)?ro:Rt.current;return o=ei(t,o),Po(t,r),n=Fm(e,t,n,l,o,r),l=Km(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Gl(e,t,r)):(Te&&l&&Sm(t),t.flags|=1,Jt(e,t,n,r),t.child)}function Jp(e,t,n,l,r){if(Ut(n)){var o=!0;Es(t)}else o=!1;if(Po(t,r),t.stateNode===null)Cs(e,t),yG(t,n,l),FC(t,n,l,r),l=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var g=i.context,s=n.contextType;typeof s=="object"&&s!==null?s=Vn(s):(s=Ut(n)?ro:Rt.current,s=ei(t,s));var I=n.getDerivedStateFromProps,d=typeof I=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==l||g!==s)&&Bp(t,i,l,s),Fl=!1;var u=t.memoizedState;i.state=u,js(t,l,i,r),g=t.memoizedState,a!==l||u!==g||jt.current||Fl?(typeof I=="function"&&(HC(t,n,I,l),g=t.memoizedState),(a=Fl||Gp(t,n,a,l,u,g,s))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=g),i.props=l,i.state=g,i.context=s,l=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{i=t.stateNode,pG(e,t),a=t.memoizedProps,s=t.type===t.elementType?a:Xn(t.type,a),i.props=s,d=t.pendingProps,u=i.context,g=n.contextType,typeof g=="object"&&g!==null?g=Vn(g):(g=Ut(n)?ro:Rt.current,g=ei(t,g));var C=n.getDerivedStateFromProps;(I=typeof C=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||u!==g)&&Bp(t,i,l,g),Fl=!1,u=t.memoizedState,i.state=u,js(t,l,i,r);var h=t.memoizedState;a!==d||u!==h||jt.current||Fl?(typeof C=="function"&&(HC(t,n,C,l),h=t.memoizedState),(s=Fl||Gp(t,n,s,l,u,h,g)||!1)?(I||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,h,g),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,h,g)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=h),i.props=l,i.state=h,i.context=g,l=s):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),l=!1)}return MC(e,t,n,l,o,r)}function MC(e,t,n,l,r,o){QG(e,t);var i=(t.flags&128)!==0;if(!l&&!i)return r&&pp(t,n,!1),Gl(e,t,o);l=t.stateNode,gk.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&i?(t.child=ni(t,e.child,null,o),t.child=ni(t,null,a,o)):Jt(e,t,a,o),t.memoizedState=l.state,r&&pp(t,n,!0),t.child}function PG(e){var t=e.stateNode;t.pendingContext?fp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fp(e,t.context,!1),Jm(e,t.containerInfo)}function Np(e,t,n,l,r){return ti(),Wm(r),t.flags|=256,Jt(e,t,n,l),t.child}var TC={dehydrated:null,treeContext:null,retryLane:0};function LC(e){return{baseLanes:e,cachePool:null,transitions:null}}function OG(e,t,n){var l=t.pendingProps,r=ze.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(r&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Ne(ze,r&1),e===null)return NC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=l.children,e=l.fallback,o?(l=t.mode,o=t.child,i={mode:"hidden",children:i},!(l&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Qc(i,l,0,null),e=to(e,l,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=LC(n),t.memoizedState=TC,e):Tm(t,i));if(r=e.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return sk(e,t,i,l,a,r,n);if(o){o=l.fallback,i=t.mode,r=e.child,a=r.sibling;var g={mode:"hidden",children:l.children};return!(i&1)&&t.child!==r?(l=t.child,l.childLanes=0,l.pendingProps=g,t.deletions=null):(l=or(r,g),l.subtreeFlags=r.subtreeFlags&14680064),a!==null?o=or(a,o):(o=to(o,i,n,null),o.flags|=2),o.return=t,l.return=t,l.sibling=o,t.child=l,l=o,o=t.child,i=e.child.memoizedState,i=i===null?LC(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=TC,l}return o=e.child,e=o.sibling,l=or(o,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=n),l.return=t,l.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=l,t.memoizedState=null,l}function Tm(e,t){return t=Qc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wg(e,t,n,l){return l!==null&&Wm(l),ni(t,e.child,null,n),e=Tm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sk(e,t,n,l,r,o,i){if(n)return t.flags&256?(t.flags&=-257,l=Xd(Error(re(422))),Wg(e,t,i,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=l.fallback,r=t.mode,l=Qc({mode:"visible",children:l.children},r,0,null),o=to(o,r,i,null),o.flags|=2,l.return=t,o.return=t,l.sibling=o,t.child=l,t.mode&1&&ni(t,e.child,null,i),t.child.memoizedState=LC(i),t.memoizedState=TC,o);if(!(t.mode&1))return Wg(e,t,i,null);if(r.data==="$!"){if(l=r.nextSibling&&r.nextSibling.dataset,l)var a=l.dgst;return l=a,o=Error(re(419)),l=Xd(o,l,void 0),Wg(e,t,i,l)}if(a=(i&e.childLanes)!==0,Tt||a){if(l=ut,l!==null){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(l.suspendedLanes|i)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,vl(e,r),Hn(l,e,r,-1))}return Qm(),l=Xd(Error(re(421))),Wg(e,t,i,l)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Zk.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,$t=tr(r.nextSibling),tn=t,Te=!0,Jn=null,e!==null&&(pn[bn++]=dl,pn[bn++]=ul,pn[bn++]=oo,dl=e.id,ul=e.overflow,oo=t),t=Tm(t,l.children),t.flags|=4096,t)}function Yp(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),YC(e.return,t,n)}function xd(e,t,n,l,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=l,o.tail=n,o.tailMode=r)}function _G(e,t,n){var l=t.pendingProps,r=l.revealOrder,o=l.tail;if(Jt(e,t,l.children,n),l=ze.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yp(e,n,t);else if(e.tag===19)Yp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ne(ze,l),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Us(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),xd(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Us(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}xd(t,!0,n,null,o);break;case"together":xd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ao|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(re(153));if(t.child!==null){for(e=t.child,n=or(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=or(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ck(e,t,n){switch(t.tag){case 3:PG(t),ti();break;case 5:GG(t);break;case 1:Ut(t.type)&&Es(t);break;case 4:Jm(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,r=t.memoizedProps.value;Ne(Ls,l._currentValue),l._currentValue=r;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Ne(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?OG(e,t,n):(Ne(ze,ze.current&1),e=Gl(e,t,n),e!==null?e.sibling:null);Ne(ze,ze.current&1);break;case 19:if(l=(n&t.childLanes)!==0,e.flags&128){if(l)return _G(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ne(ze,ze.current),l)break;return null;case 22:case 23:return t.lanes=0,DG(e,t,n)}return Gl(e,t,n)}var qG,zC,$G,e1;qG=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zC=function(){};$G=function(e,t,n,l){var r=e.memoizedProps;if(r!==l){e=t.stateNode,Pr(tl.current);var o=null;switch(n){case"input":r=dC(e,r),l=dC(e,l),o=[];break;case"select":r=Pe({},r,{value:void 0}),l=Pe({},l,{value:void 0}),o=[];break;case"textarea":r=AC(e,r),l=AC(e,l),o=[];break;default:typeof r.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Fs)}hC(n,l);var i;n=null;for(s in r)if(!l.hasOwnProperty(s)&&r.hasOwnProperty(s)&&r[s]!=null)if(s==="style"){var a=r[s];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else s!=="dangerouslySetInnerHTML"&&s!=="children"&&s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ba.hasOwnProperty(s)?o||(o=[]):(o=o||[]).push(s,null));for(s in l){var g=l[s];if(a=r!=null?r[s]:void 0,l.hasOwnProperty(s)&&g!==a&&(g!=null||a!=null))if(s==="style")if(a){for(i in a)!a.hasOwnProperty(i)||g&&g.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in g)g.hasOwnProperty(i)&&a[i]!==g[i]&&(n||(n={}),n[i]=g[i])}else n||(o||(o=[]),o.push(s,n)),n=g;else s==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,a=a?a.__html:void 0,g!=null&&a!==g&&(o=o||[]).push(s,g)):s==="children"?typeof g!="string"&&typeof g!="number"||(o=o||[]).push(s,""+g):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&(ba.hasOwnProperty(s)?(g!=null&&s==="onScroll"&&Fe("scroll",e),o||a===g||(o=[])):(o=o||[]).push(s,g))}n&&(o=o||[]).push("style",n);var s=o;(t.updateQueue=s)&&(t.flags|=4)}};e1=function(e,t,n,l){n!==l&&(t.flags|=4)};function Mi(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,l|=r.subtreeFlags&14680064,l|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Ik(e,t,n){var l=t.pendingProps;switch(Vm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return Ut(t.type)&&Ks(),Bt(t),null;case 3:return l=t.stateNode,li(),Me(jt),Me(Rt),Ym(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Sg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jn!==null&&(qC(Jn),Jn=null))),zC(e,t),Bt(t),null;case 5:Nm(t);var r=Pr(Xa.current);if(n=t.type,e!==null&&t.stateNode!=null)$G(e,t,n,l,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(re(166));return Bt(t),null}if(e=Pr(tl.current),Sg(t)){l=t.stateNode,n=t.type;var o=t.memoizedProps;switch(l[Pn]=t,l[wa]=o,e=(t.mode&1)!==0,n){case"dialog":Fe("cancel",l),Fe("close",l);break;case"iframe":case"object":case"embed":Fe("load",l);break;case"video":case"audio":for(r=0;r<ea.length;r++)Fe(ea[r],l);break;case"source":Fe("error",l);break;case"img":case"image":case"link":Fe("error",l),Fe("load",l);break;case"details":Fe("toggle",l);break;case"input":jf(l,o),Fe("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!o.multiple},Fe("invalid",l);break;case"textarea":Df(l,o),Fe("invalid",l)}hC(n,o),r=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?l.textContent!==a&&(o.suppressHydrationWarning!==!0&&Bg(l.textContent,a,e),r=["children",a]):typeof a=="number"&&l.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Bg(l.textContent,a,e),r=["children",""+a]):ba.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Fe("scroll",l)}switch(n){case"input":hg(l),Uf(l,o,!0);break;case"textarea":hg(l),Qf(l);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(l.onclick=Fs)}l=r,t.updateQueue=l,l!==null&&(t.flags|=4)}else{i=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=i.createElement(n,{is:l.is}):(e=i.createElement(n),n==="select"&&(i=e,l.multiple?i.multiple=!0:l.size&&(i.size=l.size))):e=i.createElementNS(e,n),e[Pn]=t,e[wa]=l,qG(e,t,!1,!1),t.stateNode=e;e:{switch(i=fC(n,l),n){case"dialog":Fe("cancel",e),Fe("close",e),r=l;break;case"iframe":case"object":case"embed":Fe("load",e),r=l;break;case"video":case"audio":for(r=0;r<ea.length;r++)Fe(ea[r],e);r=l;break;case"source":Fe("error",e),r=l;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),r=l;break;case"details":Fe("toggle",e),r=l;break;case"input":jf(e,l),r=dC(e,l),Fe("invalid",e);break;case"option":r=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},r=Pe({},l,{value:void 0}),Fe("invalid",e);break;case"textarea":Df(e,l),r=AC(e,l),Fe("invalid",e);break;default:r=l}hC(n,r),a=r;for(o in a)if(a.hasOwnProperty(o)){var g=a[o];o==="style"?wv(e,g):o==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&Wv(e,g)):o==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&ya(e,g):typeof g=="number"&&ya(e,""+g):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ba.hasOwnProperty(o)?g!=null&&o==="onScroll"&&Fe("scroll",e):g!=null&&dm(e,o,g,i))}switch(n){case"input":hg(e),Uf(e,l,!1);break;case"textarea":hg(e),Qf(e);break;case"option":l.value!=null&&e.setAttribute("value",""+sr(l.value));break;case"select":e.multiple=!!l.multiple,o=l.value,o!=null?jo(e,!!l.multiple,o,!1):l.defaultValue!=null&&jo(e,!!l.multiple,l.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Fs)}switch(n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)e1(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(re(166));if(n=Pr(Xa.current),Pr(tl.current),Sg(t)){if(l=t.stateNode,n=t.memoizedProps,l[Pn]=t,(o=l.nodeValue!==n)&&(e=tn,e!==null))switch(e.tag){case 3:Bg(l.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bg(l.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else l=(n.nodeType===9?n:n.ownerDocument).createTextNode(l),l[Pn]=t,t.stateNode=l}return Bt(t),null;case 13:if(Me(ze),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&$t!==null&&t.mode&1&&!(t.flags&128))hG(),ti(),t.flags|=98560,o=!1;else if(o=Sg(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(re(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(re(317));o[Pn]=t}else ti(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),o=!1}else Jn!==null&&(qC(Jn),Jn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?ct===0&&(ct=3):Qm())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return li(),zC(e,t),e===null&&Wa(t.stateNode.containerInfo),Bt(t),null;case 10:return km(t.type._context),Bt(t),null;case 17:return Ut(t.type)&&Ks(),Bt(t),null;case 19:if(Me(ze),o=t.memoizedState,o===null)return Bt(t),null;if(l=(t.flags&128)!==0,i=o.rendering,i===null)if(l)Mi(o,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Us(e),i!==null){for(t.flags|=128,Mi(o,!1),l=i.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=n,n=t.child;n!==null;)o=n,e=l,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ne(ze,ze.current&1|2),t.child}e=e.sibling}o.tail!==null&&nt()>oi&&(t.flags|=128,l=!0,Mi(o,!1),t.lanes=4194304)}else{if(!l)if(e=Us(i),e!==null){if(t.flags|=128,l=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Mi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Te)return Bt(t),null}else 2*nt()-o.renderingStartTime>oi&&n!==1073741824&&(t.flags|=128,l=!0,Mi(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=nt(),t.sibling=null,n=ze.current,Ne(ze,l?n&1|2:n&1),t):(Bt(t),null);case 22:case 23:return Dm(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?Ot&1073741824&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(re(156,t.tag))}function dk(e,t){switch(Vm(t),t.tag){case 1:return Ut(t.type)&&Ks(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return li(),Me(jt),Me(Rt),Ym(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Nm(t),null;case 13:if(Me(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(re(340));ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(ze),null;case 4:return li(),null;case 10:return km(t.type._context),null;case 22:case 23:return Dm(),null;case 24:return null;default:return null}}var Rg=!1,Wt=!1,uk=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Fo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(l){qe(e,t,l)}else n.current=null}function jC(e,t,n){try{n()}catch(l){qe(e,t,l)}}var Hp=!1;function Ck(e,t){if(WC=Ns,e=rG(),Bm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var r=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,g=-1,s=0,I=0,d=e,u=null;t:for(;;){for(var C;d!==n||r!==0&&d.nodeType!==3||(a=i+r),d!==o||l!==0&&d.nodeType!==3||(g=i+l),d.nodeType===3&&(i+=d.nodeValue.length),(C=d.firstChild)!==null;)u=d,d=C;for(;;){if(d===e)break t;if(u===n&&++s===r&&(a=i),u===o&&++I===l&&(g=i),(C=d.nextSibling)!==null)break;d=u,u=d.parentNode}d=C}n=a===-1||g===-1?null:{start:a,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(RC={focusedElem:e,selectionRange:n},Ns=!1,ge=t;ge!==null;)if(t=ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ge=e;else for(;ge!==null;){t=ge;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var f=h.memoizedProps,y=h.memoizedState,A=t.stateNode,m=A.getSnapshotBeforeUpdate(t.elementType===t.type?f:Xn(t.type,f),y);A.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(b){qe(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ge=e;break}ge=t.return}return h=Hp,Hp=!1,h}function sa(e,t,n){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var r=l=l.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,o!==void 0&&jC(t,n,o)}r=r.next}while(r!==l)}}function Uc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var l=n.create;n.destroy=l()}n=n.next}while(n!==t)}}function UC(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function t1(e){var t=e.alternate;t!==null&&(e.alternate=null,t1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pn],delete t[wa],delete t[XC],delete t[Ow],delete t[_w])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function n1(e){return e.tag===5||e.tag===3||e.tag===4}function Fp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||n1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function DC(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fs));else if(l!==4&&(e=e.child,e!==null))for(DC(e,t,n),e=e.sibling;e!==null;)DC(e,t,n),e=e.sibling}function QC(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(QC(e,t,n),e=e.sibling;e!==null;)QC(e,t,n),e=e.sibling}var mt=null,xn=!1;function xl(e,t,n){for(n=n.child;n!==null;)l1(e,t,n),n=n.sibling}function l1(e,t,n){if(el&&typeof el.onCommitFiberUnmount=="function")try{el.onCommitFiberUnmount(Fc,n)}catch{}switch(n.tag){case 5:Wt||Fo(n,t);case 6:var l=mt,r=xn;mt=null,xl(e,t,n),mt=l,xn=r,mt!==null&&(xn?(e=mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(xn?(e=mt,n=n.stateNode,e.nodeType===8?Sd(e.parentNode,n):e.nodeType===1&&Sd(e,n),Ba(e)):Sd(mt,n.stateNode));break;case 4:l=mt,r=xn,mt=n.stateNode.containerInfo,xn=!0,xl(e,t,n),mt=l,xn=r;break;case 0:case 11:case 14:case 15:if(!Wt&&(l=n.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){r=l=l.next;do{var o=r,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&jC(n,t,i),r=r.next}while(r!==l)}xl(e,t,n);break;case 1:if(!Wt&&(Fo(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=n.memoizedProps,l.state=n.memoizedState,l.componentWillUnmount()}catch(a){qe(n,t,a)}xl(e,t,n);break;case 21:xl(e,t,n);break;case 22:n.mode&1?(Wt=(l=Wt)||n.memoizedState!==null,xl(e,t,n),Wt=l):xl(e,t,n);break;default:xl(e,t,n)}}function Kp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new uk),t.forEach(function(l){var r=vk.bind(null,e,l);n.has(l)||(n.add(l),l.then(r,r))})}}function Rn(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var r=n[l];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:mt=a.stateNode,xn=!1;break e;case 3:mt=a.stateNode.containerInfo,xn=!0;break e;case 4:mt=a.stateNode.containerInfo,xn=!0;break e}a=a.return}if(mt===null)throw Error(re(160));l1(o,i,r),mt=null,xn=!1;var g=r.alternate;g!==null&&(g.return=null),r.return=null}catch(s){qe(r,t,s)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)r1(t,e),t=t.sibling}function r1(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rn(t,e),jn(e),l&4){try{sa(3,e,e.return),Uc(3,e)}catch(f){qe(e,e.return,f)}try{sa(5,e,e.return)}catch(f){qe(e,e.return,f)}}break;case 1:Rn(t,e),jn(e),l&512&&n!==null&&Fo(n,n.return);break;case 5:if(Rn(t,e),jn(e),l&512&&n!==null&&Fo(n,n.return),e.flags&32){var r=e.stateNode;try{ya(r,"")}catch(f){qe(e,e.return,f)}}if(l&4&&(r=e.stateNode,r!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Bv(r,o),fC(a,i);var s=fC(a,o);for(i=0;i<g.length;i+=2){var I=g[i],d=g[i+1];I==="style"?wv(r,d):I==="dangerouslySetInnerHTML"?Wv(r,d):I==="children"?ya(r,d):dm(r,I,d,s)}switch(a){case"input":uC(r,o);break;case"textarea":Sv(r,o);break;case"select":var u=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var C=o.value;C!=null?jo(r,!!o.multiple,C,!1):u!==!!o.multiple&&(o.defaultValue!=null?jo(r,!!o.multiple,o.defaultValue,!0):jo(r,!!o.multiple,o.multiple?[]:"",!1))}r[wa]=o}catch(f){qe(e,e.return,f)}}break;case 6:if(Rn(t,e),jn(e),l&4){if(e.stateNode===null)throw Error(re(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(f){qe(e,e.return,f)}}break;case 3:if(Rn(t,e),jn(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{Ba(t.containerInfo)}catch(f){qe(e,e.return,f)}break;case 4:Rn(t,e),jn(e);break;case 13:Rn(t,e),jn(e),r=e.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(jm=nt())),l&4&&Kp(e);break;case 22:if(I=n!==null&&n.memoizedState!==null,e.mode&1?(Wt=(s=Wt)||I,Rn(t,e),Wt=s):Rn(t,e),jn(e),l&8192){if(s=e.memoizedState!==null,(e.stateNode.isHidden=s)&&!I&&e.mode&1)for(ge=e,I=e.child;I!==null;){for(d=ge=I;ge!==null;){switch(u=ge,C=u.child,u.tag){case 0:case 11:case 14:case 15:sa(4,u,u.return);break;case 1:Fo(u,u.return);var h=u.stateNode;if(typeof h.componentWillUnmount=="function"){l=u,n=u.return;try{t=l,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(f){qe(l,n,f)}}break;case 5:Fo(u,u.return);break;case 22:if(u.memoizedState!==null){Mp(d);continue}}C!==null?(C.return=u,ge=C):Mp(d)}I=I.sibling}e:for(I=null,d=e;;){if(d.tag===5){if(I===null){I=d;try{r=d.stateNode,s?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,g=d.memoizedProps.style,i=g!=null&&g.hasOwnProperty("display")?g.display:null,a.style.display=Rv("display",i))}catch(f){qe(e,e.return,f)}}}else if(d.tag===6){if(I===null)try{d.stateNode.nodeValue=s?"":d.memoizedProps}catch(f){qe(e,e.return,f)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;I===d&&(I=null),d=d.return}I===d&&(I=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Rn(t,e),jn(e),l&4&&Kp(e);break;case 21:break;default:Rn(t,e),jn(e)}}function jn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(n1(n)){var l=n;break e}n=n.return}throw Error(re(160))}switch(l.tag){case 5:var r=l.stateNode;l.flags&32&&(ya(r,""),l.flags&=-33);var o=Fp(e);QC(e,o,r);break;case 3:case 4:var i=l.stateNode.containerInfo,a=Fp(e);DC(e,a,i);break;default:throw Error(re(161))}}catch(g){qe(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ak(e,t,n){ge=e,o1(e)}function o1(e,t,n){for(var l=(e.mode&1)!==0;ge!==null;){var r=ge,o=r.child;if(r.tag===22&&l){var i=r.memoizedState!==null||Rg;if(!i){var a=r.alternate,g=a!==null&&a.memoizedState!==null||Wt;a=Rg;var s=Wt;if(Rg=i,(Wt=g)&&!s)for(ge=r;ge!==null;)i=ge,g=i.child,i.tag===22&&i.memoizedState!==null?Tp(r):g!==null?(g.return=i,ge=g):Tp(r);for(;o!==null;)ge=o,o1(o),o=o.sibling;ge=r,Rg=a,Wt=s}Ep(e)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ge=o):Ep(e)}}function Ep(e){for(;ge!==null;){var t=ge;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wt||Uc(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Wt)if(n===null)l.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Xn(t.type,n.memoizedProps);l.componentDidUpdate(r,n.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&vp(t,o,l);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}vp(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var s=t.alternate;if(s!==null){var I=s.memoizedState;if(I!==null){var d=I.dehydrated;d!==null&&Ba(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Wt||t.flags&512&&UC(t)}catch(u){qe(t,t.return,u)}}if(t===e){ge=null;break}if(n=t.sibling,n!==null){n.return=t.return,ge=n;break}ge=t.return}}function Mp(e){for(;ge!==null;){var t=ge;if(t===e){ge=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ge=n;break}ge=t.return}}function Tp(e){for(;ge!==null;){var t=ge;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Uc(4,t)}catch(g){qe(t,n,g)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var r=t.return;try{l.componentDidMount()}catch(g){qe(t,r,g)}}var o=t.return;try{UC(t)}catch(g){qe(t,o,g)}break;case 5:var i=t.return;try{UC(t)}catch(g){qe(t,i,g)}}}catch(g){qe(t,t.return,g)}if(t===e){ge=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ge=a;break}ge=t.return}}var mk=Math.ceil,Ps=Wl.ReactCurrentDispatcher,Lm=Wl.ReactCurrentOwner,Bn=Wl.ReactCurrentBatchConfig,We=0,ut=null,it=null,pt=0,Ot=0,Ko=Zr(0),ct=0,Ya=null,ao=0,Dc=0,zm=0,ca=null,Mt=null,jm=0,oi=1/0,cl=null,Os=!1,PC=null,lr=null,wg=!1,Dl=null,_s=0,Ia=0,OC=null,As=-1,ms=0;function Yt(){return We&6?nt():As!==-1?As:As=nt()}function rr(e){return e.mode&1?We&2&&pt!==0?pt&-pt:$w.transition!==null?(ms===0&&(ms=Tv()),ms):(e=ke,e!==0||(e=window.event,e=e===void 0?16:Pv(e.type)),e):1}function Hn(e,t,n,l){if(50<Ia)throw Ia=0,OC=null,Error(re(185));Oa(e,n,l),(!(We&2)||e!==ut)&&(e===ut&&(!(We&2)&&(Dc|=n),ct===4&&Ll(e,pt)),Dt(e,l),n===1&&We===0&&!(t.mode&1)&&(oi=nt()+500,Lc&&vr()))}function Dt(e,t){var n=e.callbackNode;$R(e,t);var l=Js(e,e===ut?pt:0);if(l===0)n!==null&&_f(n),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(n!=null&&_f(n),t===1)e.tag===0?qw(Lp.bind(null,e)):CG(Lp.bind(null,e)),Qw(function(){!(We&6)&&vr()}),n=null;else{switch(Lv(l)){case 1:n=hm;break;case 4:n=Ev;break;case 16:n=xs;break;case 536870912:n=Mv;break;default:n=xs}n=u1(n,i1.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function i1(e,t){if(As=-1,ms=0,We&6)throw Error(re(327));var n=e.callbackNode;if(Oo()&&e.callbackNode!==n)return null;var l=Js(e,e===ut?pt:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=qs(e,l);else{t=l;var r=We;We|=2;var o=g1();(ut!==e||pt!==t)&&(cl=null,oi=nt()+500,eo(e,t));do try{pk();break}catch(a){a1(e,a)}while(1);wm(),Ps.current=o,We=r,it!==null?t=0:(ut=null,pt=0,t=ct)}if(t!==0){if(t===2&&(r=vC(e),r!==0&&(l=r,t=_C(e,r))),t===1)throw n=Ya,eo(e,0),Ll(e,l),Dt(e,nt()),n;if(t===6)Ll(e,l);else{if(r=e.current.alternate,!(l&30)&&!hk(r)&&(t=qs(e,l),t===2&&(o=vC(e),o!==0&&(l=o,t=_C(e,o))),t===1))throw n=Ya,eo(e,0),Ll(e,l),Dt(e,nt()),n;switch(e.finishedWork=r,e.finishedLanes=l,t){case 0:case 1:throw Error(re(345));case 2:Hr(e,Mt,cl);break;case 3:if(Ll(e,l),(l&130023424)===l&&(t=jm+500-nt(),10<t)){if(Js(e,0)!==0)break;if(r=e.suspendedLanes,(r&l)!==l){Yt(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=kC(Hr.bind(null,e,Mt,cl),t);break}Hr(e,Mt,cl);break;case 4:if(Ll(e,l),(l&4194240)===l)break;for(t=e.eventTimes,r=-1;0<l;){var i=31-Yn(l);o=1<<i,i=t[i],i>r&&(r=i),l&=~o}if(l=r,l=nt()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*mk(l/1960))-l,10<l){e.timeoutHandle=kC(Hr.bind(null,e,Mt,cl),l);break}Hr(e,Mt,cl);break;case 5:Hr(e,Mt,cl);break;default:throw Error(re(329))}}}return Dt(e,nt()),e.callbackNode===n?i1.bind(null,e):null}function _C(e,t){var n=ca;return e.current.memoizedState.isDehydrated&&(eo(e,t).flags|=256),e=qs(e,t),e!==2&&(t=Mt,Mt=n,t!==null&&qC(t)),e}function qC(e){Mt===null?Mt=e:Mt.push.apply(Mt,e)}function hk(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var l=0;l<n.length;l++){var r=n[l],o=r.getSnapshot;r=r.value;try{if(!Fn(o(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ll(e,t){for(t&=~zm,t&=~Dc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yn(t),l=1<<n;e[n]=-1,t&=~l}}function Lp(e){if(We&6)throw Error(re(327));Oo();var t=Js(e,0);if(!(t&1))return Dt(e,nt()),null;var n=qs(e,t);if(e.tag!==0&&n===2){var l=vC(e);l!==0&&(t=l,n=_C(e,l))}if(n===1)throw n=Ya,eo(e,0),Ll(e,t),Dt(e,nt()),n;if(n===6)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hr(e,Mt,cl),Dt(e,nt()),null}function Um(e,t){var n=We;We|=1;try{return e(t)}finally{We=n,We===0&&(oi=nt()+500,Lc&&vr())}}function go(e){Dl!==null&&Dl.tag===0&&!(We&6)&&Oo();var t=We;We|=1;var n=Bn.transition,l=ke;try{if(Bn.transition=null,ke=1,e)return e()}finally{ke=l,Bn.transition=n,We=t,!(We&6)&&vr()}}function Dm(){Ot=Ko.current,Me(Ko)}function eo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Dw(n)),it!==null)for(n=it.return;n!==null;){var l=n;switch(Vm(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Ks();break;case 3:li(),Me(jt),Me(Rt),Ym();break;case 5:Nm(l);break;case 4:li();break;case 13:Me(ze);break;case 19:Me(ze);break;case 10:km(l.type._context);break;case 22:case 23:Dm()}n=n.return}if(ut=e,it=e=or(e.current,null),pt=Ot=t,ct=0,Ya=null,zm=Dc=ao=0,Mt=ca=null,Qr!==null){for(t=0;t<Qr.length;t++)if(n=Qr[t],l=n.interleaved,l!==null){n.interleaved=null;var r=l.next,o=n.pending;if(o!==null){var i=o.next;o.next=r,l.next=i}n.pending=l}Qr=null}return e}function a1(e,t){do{var n=it;try{if(wm(),ds.current=Qs,Ds){for(var l=De.memoizedState;l!==null;){var r=l.queue;r!==null&&(r.pending=null),l=l.next}Ds=!1}if(io=0,dt=st=De=null,ga=!1,xa=0,Lm.current=null,n===null||n.return===null){ct=1,Ya=t,it=null;break}e:{var o=e,i=n.return,a=n,g=t;if(t=pt,a.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var s=g,I=a,d=I.tag;if(!(I.mode&1)&&(d===0||d===11||d===15)){var u=I.alternate;u?(I.updateQueue=u.updateQueue,I.memoizedState=u.memoizedState,I.lanes=u.lanes):(I.updateQueue=null,I.memoizedState=null)}var C=wp(i);if(C!==null){C.flags&=-257,kp(C,i,a,o,t),C.mode&1&&Rp(o,s,t),t=C,g=s;var h=t.updateQueue;if(h===null){var f=new Set;f.add(g),t.updateQueue=f}else h.add(g);break e}else{if(!(t&1)){Rp(o,s,t),Qm();break e}g=Error(re(426))}}else if(Te&&a.mode&1){var y=wp(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),kp(y,i,a,o,t),Wm(ri(g,a));break e}}o=g=ri(g,a),ct!==4&&(ct=2),ca===null?ca=[o]:ca.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var A=zG(o,g,t);Zp(o,A);break e;case 1:a=g;var m=o.type,p=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(lr===null||!lr.has(p)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=jG(o,a,t);Zp(o,b);break e}}o=o.return}while(o!==null)}c1(n)}catch(Z){t=Z,it===n&&n!==null&&(it=n=n.return);continue}break}while(1)}function g1(){var e=Ps.current;return Ps.current=Qs,e===null?Qs:e}function Qm(){(ct===0||ct===3||ct===2)&&(ct=4),ut===null||!(ao&268435455)&&!(Dc&268435455)||Ll(ut,pt)}function qs(e,t){var n=We;We|=2;var l=g1();(ut!==e||pt!==t)&&(cl=null,eo(e,t));do try{fk();break}catch(r){a1(e,r)}while(1);if(wm(),We=n,Ps.current=l,it!==null)throw Error(re(261));return ut=null,pt=0,ct}function fk(){for(;it!==null;)s1(it)}function pk(){for(;it!==null&&!zR();)s1(it)}function s1(e){var t=d1(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?c1(e):it=t,Lm.current=null}function c1(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dk(n,t),n!==null){n.flags&=32767,it=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ct=6,it=null;return}}else if(n=Ik(n,t,Ot),n!==null){it=n;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);ct===0&&(ct=5)}function Hr(e,t,n){var l=ke,r=Bn.transition;try{Bn.transition=null,ke=1,bk(e,t,n,l)}finally{Bn.transition=r,ke=l}return null}function bk(e,t,n,l){do Oo();while(Dl!==null);if(We&6)throw Error(re(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(ew(e,o),e===ut&&(it=ut=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wg||(wg=!0,u1(xs,function(){return Oo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Bn.transition,Bn.transition=null;var i=ke;ke=1;var a=We;We|=4,Lm.current=null,Ck(e,n),r1(n,e),Ew(RC),Ns=!!WC,RC=WC=null,e.current=n,Ak(n),jR(),We=a,ke=i,Bn.transition=o}else e.current=n;if(wg&&(wg=!1,Dl=e,_s=r),o=e.pendingLanes,o===0&&(lr=null),QR(n.stateNode),Dt(e,nt()),t!==null)for(l=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],l(r.value,{componentStack:r.stack,digest:r.digest});if(Os)throw Os=!1,e=PC,PC=null,e;return _s&1&&e.tag!==0&&Oo(),o=e.pendingLanes,o&1?e===OC?Ia++:(Ia=0,OC=e):Ia=0,vr(),null}function Oo(){if(Dl!==null){var e=Lv(_s),t=Bn.transition,n=ke;try{if(Bn.transition=null,ke=16>e?16:e,Dl===null)var l=!1;else{if(e=Dl,Dl=null,_s=0,We&6)throw Error(re(331));var r=We;for(We|=4,ge=e.current;ge!==null;){var o=ge,i=o.child;if(ge.flags&16){var a=o.deletions;if(a!==null){for(var g=0;g<a.length;g++){var s=a[g];for(ge=s;ge!==null;){var I=ge;switch(I.tag){case 0:case 11:case 15:sa(8,I,o)}var d=I.child;if(d!==null)d.return=I,ge=d;else for(;ge!==null;){I=ge;var u=I.sibling,C=I.return;if(t1(I),I===s){ge=null;break}if(u!==null){u.return=C,ge=u;break}ge=C}}}var h=o.alternate;if(h!==null){var f=h.child;if(f!==null){h.child=null;do{var y=f.sibling;f.sibling=null,f=y}while(f!==null)}}ge=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,ge=i;else e:for(;ge!==null;){if(o=ge,o.flags&2048)switch(o.tag){case 0:case 11:case 15:sa(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,ge=A;break e}ge=o.return}}var m=e.current;for(ge=m;ge!==null;){i=ge;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,ge=p;else e:for(i=m;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Uc(9,a)}}catch(Z){qe(a,a.return,Z)}if(a===i){ge=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,ge=b;break e}ge=a.return}}if(We=r,vr(),el&&typeof el.onPostCommitFiberRoot=="function")try{el.onPostCommitFiberRoot(Fc,e)}catch{}l=!0}return l}finally{ke=n,Bn.transition=t}}return!1}function zp(e,t,n){t=ri(n,t),t=zG(e,t,1),e=nr(e,t,1),t=Yt(),e!==null&&(Oa(e,1,t),Dt(e,t))}function qe(e,t,n){if(e.tag===3)zp(e,e,n);else for(;t!==null;){if(t.tag===3){zp(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(lr===null||!lr.has(l))){e=ri(n,e),e=jG(t,e,1),t=nr(t,e,1),e=Yt(),t!==null&&(Oa(t,1,e),Dt(t,e));break}}t=t.return}}function yk(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),t=Yt(),e.pingedLanes|=e.suspendedLanes&n,ut===e&&(pt&n)===n&&(ct===4||ct===3&&(pt&130023424)===pt&&500>nt()-jm?eo(e,0):zm|=n),Dt(e,t)}function I1(e,t){t===0&&(e.mode&1?(t=bg,bg<<=1,!(bg&130023424)&&(bg=4194304)):t=1);var n=Yt();e=vl(e,t),e!==null&&(Oa(e,t,n),Dt(e,n))}function Zk(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),I1(e,n)}function vk(e,t){var n=0;switch(e.tag){case 13:var l=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(re(314))}l!==null&&l.delete(t),I1(e,n)}var d1;d1=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,ck(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Te&&t.flags&1048576&&AG(t,Ts,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Cs(e,t),e=t.pendingProps;var r=ei(t,Rt.current);Po(t,n),r=Fm(null,t,l,e,r,n);var o=Km();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ut(l)?(o=!0,Es(t)):o=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,xm(t),r.updater=zc,t.stateNode=r,r._reactInternals=t,FC(t,l,e,n),t=MC(null,t,l,!0,o,n)):(t.tag=0,Te&&o&&Sm(t),Jt(null,t,r,n),t=t.child),t;case 16:l=t.elementType;e:{switch(Cs(e,t),e=t.pendingProps,r=l._init,l=r(l._payload),t.type=l,r=t.tag=Bk(l),e=Xn(l,e),r){case 0:t=EC(null,t,l,e,n);break e;case 1:t=Jp(null,t,l,e,n);break e;case 11:t=Xp(null,t,l,e,n);break e;case 14:t=xp(null,t,l,Xn(l.type,e),n);break e}throw Error(re(306,l,""))}return t;case 0:return l=t.type,r=t.pendingProps,r=t.elementType===l?r:Xn(l,r),EC(e,t,l,r,n);case 1:return l=t.type,r=t.pendingProps,r=t.elementType===l?r:Xn(l,r),Jp(e,t,l,r,n);case 3:e:{if(PG(t),e===null)throw Error(re(387));l=t.pendingProps,o=t.memoizedState,r=o.element,pG(e,t),js(t,l,null,n);var i=t.memoizedState;if(l=i.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){r=ri(Error(re(423)),t),t=Np(e,t,l,n,r);break e}else if(l!==r){r=ri(Error(re(424)),t),t=Np(e,t,l,n,r);break e}else for($t=tr(t.stateNode.containerInfo.firstChild),tn=t,Te=!0,Jn=null,n=vG(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),l===r){t=Gl(e,t,n);break e}Jt(e,t,l,n)}t=t.child}return t;case 5:return GG(t),e===null&&NC(t),l=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,i=r.children,wC(l,r)?i=null:o!==null&&wC(l,o)&&(t.flags|=32),QG(e,t),Jt(e,t,i,n),t.child;case 6:return e===null&&NC(t),null;case 13:return OG(e,t,n);case 4:return Jm(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ni(t,null,l,n):Jt(e,t,l,n),t.child;case 11:return l=t.type,r=t.pendingProps,r=t.elementType===l?r:Xn(l,r),Xp(e,t,l,r,n);case 7:return Jt(e,t,t.pendingProps,n),t.child;case 8:return Jt(e,t,t.pendingProps.children,n),t.child;case 12:return Jt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(l=t.type._context,r=t.pendingProps,o=t.memoizedProps,i=r.value,Ne(Ls,l._currentValue),l._currentValue=i,o!==null)if(Fn(o.value,i)){if(o.children===r.children&&!jt.current){t=Gl(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var g=a.firstContext;g!==null;){if(g.context===l){if(o.tag===1){g=Al(-1,n&-n),g.tag=2;var s=o.updateQueue;if(s!==null){s=s.shared;var I=s.pending;I===null?g.next=g:(g.next=I.next,I.next=g),s.pending=g}}o.lanes|=n,g=o.alternate,g!==null&&(g.lanes|=n),YC(o.return,n,t),a.lanes|=n;break}g=g.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(re(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),YC(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Jt(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,l=t.pendingProps.children,Po(t,n),r=Vn(r),l=l(r),t.flags|=1,Jt(e,t,l,n),t.child;case 14:return l=t.type,r=Xn(l,t.pendingProps),r=Xn(l.type,r),xp(e,t,l,r,n);case 15:return UG(e,t,t.type,t.pendingProps,n);case 17:return l=t.type,r=t.pendingProps,r=t.elementType===l?r:Xn(l,r),Cs(e,t),t.tag=1,Ut(l)?(e=!0,Es(t)):e=!1,Po(t,n),yG(t,l,r),FC(t,l,r,n),MC(null,t,l,!0,e,n);case 19:return _G(e,t,n);case 22:return DG(e,t,n)}throw Error(re(156,t.tag))};function u1(e,t){return Kv(e,t)}function Gk(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(e,t,n,l){return new Gk(e,t,n,l)}function Pm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bk(e){if(typeof e=="function")return Pm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cm)return 11;if(e===Am)return 14}return 2}function or(e,t){var n=e.alternate;return n===null?(n=Gn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function hs(e,t,n,l,r,o){var i=2;if(l=e,typeof e=="function")Pm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Ro:return to(n.children,r,o,t);case um:i=8,r|=8;break;case gC:return e=Gn(12,n,t,r|2),e.elementType=gC,e.lanes=o,e;case sC:return e=Gn(13,n,t,r),e.elementType=sC,e.lanes=o,e;case cC:return e=Gn(19,n,t,r),e.elementType=cC,e.lanes=o,e;case Zv:return Qc(n,r,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bv:i=10;break e;case yv:i=9;break e;case Cm:i=11;break e;case Am:i=14;break e;case Hl:i=16,l=null;break e}throw Error(re(130,e==null?e:typeof e,""))}return t=Gn(i,n,t,r),t.elementType=e,t.type=l,t.lanes=o,t}function to(e,t,n,l){return e=Gn(7,e,l,t),e.lanes=n,e}function Qc(e,t,n,l){return e=Gn(22,e,l,t),e.elementType=Zv,e.lanes=n,e.stateNode={isHidden:!1},e}function Jd(e,t,n){return e=Gn(6,e,null,t),e.lanes=n,e}function Nd(e,t,n){return t=Gn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sk(e,t,n,l,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ad(0),this.expirationTimes=Ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ad(0),this.identifierPrefix=l,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Om(e,t,n,l,r,o,i,a,g){return e=new Sk(e,t,n,a,g),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Gn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:l,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xm(o),e}function Vk(e,t,n){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wo,key:l==null?null:""+l,children:e,containerInfo:t,implementation:n}}function C1(e){if(!e)return cr;e=e._reactInternals;e:{if(ho(e)!==e||e.tag!==1)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(re(171))}if(e.tag===1){var n=e.type;if(Ut(n))return uG(e,n,t)}return t}function A1(e,t,n,l,r,o,i,a,g){return e=Om(n,l,!0,e,r,o,i,a,g),e.context=C1(null),n=e.current,l=Yt(),r=rr(n),o=Al(l,r),o.callback=t??null,nr(n,o,r),e.current.lanes=r,Oa(e,r,l),Dt(e,l),e}function Pc(e,t,n,l){var r=t.current,o=Yt(),i=rr(r);return n=C1(n),t.context===null?t.context=n:t.pendingContext=n,t=Al(o,i),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=nr(r,t,i),e!==null&&(Hn(e,r,i,o),Is(e,r,i)),i}function $s(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function _m(e,t){jp(e,t),(e=e.alternate)&&jp(e,t)}function Wk(){return null}var m1=typeof reportError=="function"?reportError:function(e){console.error(e)};function qm(e){this._internalRoot=e}Oc.prototype.render=qm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(re(409));Pc(e,t,null,null)};Oc.prototype.unmount=qm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;go(function(){Pc(null,e,null,null)}),t[Zl]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tl.length&&t!==0&&t<Tl[n].priority;n++);Tl.splice(n,0,e),n===0&&Qv(e)}};function $m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Up(){}function Rk(e,t,n,l,r){if(r){if(typeof l=="function"){var o=l;l=function(){var s=$s(i);o.call(s)}}var i=A1(t,l,e,0,null,!1,!1,"",Up);return e._reactRootContainer=i,e[Zl]=i.current,Wa(e.nodeType===8?e.parentNode:e),go(),i}for(;r=e.lastChild;)e.removeChild(r);if(typeof l=="function"){var a=l;l=function(){var s=$s(g);a.call(s)}}var g=Om(e,0,!1,null,null,!1,!1,"",Up);return e._reactRootContainer=g,e[Zl]=g.current,Wa(e.nodeType===8?e.parentNode:e),go(function(){Pc(t,g,n,l)}),g}function qc(e,t,n,l,r){var o=n._reactRootContainer;if(o){var i=o;if(typeof r=="function"){var a=r;r=function(){var g=$s(i);a.call(g)}}Pc(t,i,e,r)}else i=Rk(n,t,e,r,l);return $s(i)}zv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$i(t.pendingLanes);n!==0&&(fm(t,n|1),Dt(t,nt()),!(We&6)&&(oi=nt()+500,vr()))}break;case 13:go(function(){var l=vl(e,1);if(l!==null){var r=Yt();Hn(l,e,1,r)}}),_m(e,1)}};pm=function(e){if(e.tag===13){var t=vl(e,134217728);if(t!==null){var n=Yt();Hn(t,e,134217728,n)}_m(e,134217728)}};jv=function(e){if(e.tag===13){var t=rr(e),n=vl(e,t);if(n!==null){var l=Yt();Hn(n,e,t,l)}_m(e,t)}};Uv=function(){return ke};Dv=function(e,t){var n=ke;try{return ke=e,t()}finally{ke=n}};bC=function(e,t,n){switch(t){case"input":if(uC(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var r=Tc(l);if(!r)throw Error(re(90));Gv(l),uC(l,r)}}}break;case"textarea":Sv(e,n);break;case"select":t=n.value,t!=null&&jo(e,!!n.multiple,t,!1)}};xv=Um;Jv=go;var wk={usingClientEntryPoint:!1,Events:[qa,xo,Tc,kv,Xv,Um]},Ti={findFiberByHostInstance:Dr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},kk={bundleType:Ti.bundleType,version:Ti.version,rendererPackageName:Ti.rendererPackageName,rendererConfig:Ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hv(e),e===null?null:e.stateNode},findFiberByHostInstance:Ti.findFiberByHostInstance||Wk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kg.isDisabled&&kg.supportsFiber)try{Fc=kg.inject(kk),el=kg}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wk;gn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$m(t))throw Error(re(200));return Vk(e,t,null,n)};gn.createRoot=function(e,t){if(!$m(e))throw Error(re(299));var n=!1,l="",r=m1;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Om(e,1,!1,null,null,n,!1,l,r),e[Zl]=t.current,Wa(e.nodeType===8?e.parentNode:e),new qm(t)};gn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(re(188)):(e=Object.keys(e).join(","),Error(re(268,e)));return e=Hv(t),e=e===null?null:e.stateNode,e};gn.flushSync=function(e){return go(e)};gn.hydrate=function(e,t,n){if(!_c(t))throw Error(re(200));return qc(null,e,t,!0,n)};gn.hydrateRoot=function(e,t,n){if(!$m(e))throw Error(re(405));var l=n!=null&&n.hydratedSources||null,r=!1,o="",i=m1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=A1(t,null,e,1,n??null,r,!1,o,i),e[Zl]=t.current,Wa(e),l)for(e=0;e<l.length;e++)n=l[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Oc(t)};gn.render=function(e,t,n){if(!_c(t))throw Error(re(200));return qc(null,e,t,!1,n)};gn.unmountComponentAtNode=function(e){if(!_c(e))throw Error(re(40));return e._reactRootContainer?(go(function(){qc(null,null,e,!1,function(){e._reactRootContainer=null,e[Zl]=null})}),!0):!1};gn.unstable_batchedUpdates=Um;gn.unstable_renderSubtreeIntoContainer=function(e,t,n,l){if(!_c(n))throw Error(re(200));if(e==null||e._reactInternals===void 0)throw Error(re(38));return qc(e,t,n,!1,l)};gn.version="18.2.0-next-9e3b772b8-20220608";function h1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h1)}catch(e){console.error(e)}}h1(),Av.exports=gn;var Kn=Av.exports;const Or=Ln(Kn);var Dp=Kn;iC.createRoot=Dp.createRoot,iC.hydrateRoot=Dp.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ha(){return Ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Ha.apply(this,arguments)}var Ql;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ql||(Ql={}));const Qp="popstate";function Xk(e){e===void 0&&(e={});function t(l,r){let{pathname:o,search:i,hash:a}=l.location;return $C("",{pathname:o,search:i,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(l,r){return typeof r=="string"?r:ec(r)}return Jk(t,n,null,e)}function Qe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function eh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xk(){return Math.random().toString(36).substr(2,8)}function Pp(e,t){return{usr:e.state,key:e.key,idx:t}}function $C(e,t,n,l){return n===void 0&&(n=null),Ha({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?fi(t):t,{state:n,key:t&&t.key||l||xk()})}function ec(e){let{pathname:t="/",search:n="",hash:l=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),l&&l!=="#"&&(t+=l.charAt(0)==="#"?l:"#"+l),t}function fi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let l=e.indexOf("?");l>=0&&(t.search=e.substr(l),e=e.substr(0,l)),e&&(t.pathname=e)}return t}function Jk(e,t,n,l){l===void 0&&(l={});let{window:r=document.defaultView,v5Compat:o=!1}=l,i=r.history,a=Ql.Pop,g=null,s=I();s==null&&(s=0,i.replaceState(Ha({},i.state,{idx:s}),""));function I(){return(i.state||{idx:null}).idx}function d(){a=Ql.Pop;let y=I(),A=y==null?null:y-s;s=y,g&&g({action:a,location:f.location,delta:A})}function u(y,A){a=Ql.Push;let m=$C(f.location,y,A);n&&n(m,y),s=I()+1;let p=Pp(m,s),b=f.createHref(m);try{i.pushState(p,"",b)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;r.location.assign(b)}o&&g&&g({action:a,location:f.location,delta:1})}function C(y,A){a=Ql.Replace;let m=$C(f.location,y,A);n&&n(m,y),s=I();let p=Pp(m,s),b=f.createHref(m);i.replaceState(p,"",b),o&&g&&g({action:a,location:f.location,delta:0})}function h(y){let A=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof y=="string"?y:ec(y);return Qe(A,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,A)}let f={get action(){return a},get location(){return e(r,i)},listen(y){if(g)throw new Error("A history only accepts one active listener");return r.addEventListener(Qp,d),g=y,()=>{r.removeEventListener(Qp,d),g=null}},createHref(y){return t(r,y)},createURL:h,encodeLocation(y){let A=h(y);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:u,replace:C,go(y){return i.go(y)}};return f}var Op;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Op||(Op={}));function Nk(e,t,n){n===void 0&&(n="/");let l=typeof t=="string"?fi(t):t,r=ii(l.pathname||"/",n);if(r==null)return null;let o=f1(e);Yk(o);let i=null;for(let a=0;i==null&&a<o.length;++a)i=jk(o[a],Dk(r));return i}function f1(e,t,n,l){t===void 0&&(t=[]),n===void 0&&(n=[]),l===void 0&&(l="");let r=(o,i,a)=>{let g={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};g.relativePath.startsWith("/")&&(Qe(g.relativePath.startsWith(l),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(l.length));let s=ir([l,g.relativePath]),I=n.concat(g);o.children&&o.children.length>0&&(Qe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+s+'".')),f1(o.children,t,I,s)),!(o.path==null&&!o.index)&&t.push({path:s,score:Lk(s,o.index),routesMeta:I})};return e.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))r(o,i);else for(let g of p1(o.path))r(o,i,g)}),t}function p1(e){let t=e.split("/");if(t.length===0)return[];let[n,...l]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(l.length===0)return r?[o,""]:[o];let i=p1(l.join("/")),a=[];return a.push(...i.map(g=>g===""?o:[o,g].join("/"))),r&&a.push(...i),a.map(g=>e.startsWith("/")&&g===""?"/":g)}function Yk(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:zk(t.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}const Hk=/^:[\w-]+$/,Fk=3,Kk=2,Ek=1,Mk=10,Tk=-2,_p=e=>e==="*";function Lk(e,t){let n=e.split("/"),l=n.length;return n.some(_p)&&(l+=Tk),t&&(l+=Kk),n.filter(r=>!_p(r)).reduce((r,o)=>r+(Hk.test(o)?Fk:o===""?Ek:Mk),l)}function zk(e,t){return e.length===t.length&&e.slice(0,-1).every((l,r)=>l===t[r])?e[e.length-1]-t[t.length-1]:0}function jk(e,t){let{routesMeta:n}=e,l={},r="/",o=[];for(let i=0;i<n.length;++i){let a=n[i],g=i===n.length-1,s=r==="/"?t:t.slice(r.length)||"/",I=eA({path:a.relativePath,caseSensitive:a.caseSensitive,end:g},s);if(!I)return null;Object.assign(l,I.params);let d=a.route;o.push({params:l,pathname:ir([r,I.pathname]),pathnameBase:qk(ir([r,I.pathnameBase])),route:d}),I.pathnameBase!=="/"&&(r=ir([r,I.pathnameBase]))}return o}function eA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,l]=Uk(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],i=o.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:l.reduce((s,I,d)=>{let{paramName:u,isOptional:C}=I;if(u==="*"){let f=a[d]||"";i=o.slice(0,o.length-f.length).replace(/(.)\/+$/,"$1")}const h=a[d];return C&&!h?s[u]=void 0:s[u]=Qk(h||"",u),s},{}),pathname:o,pathnameBase:i,pattern:e}}function Uk(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),eh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,g)=>(l.push({paramName:a,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(l.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),l]}function Dk(e){try{return decodeURI(e)}catch(t){return eh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qk(e,t){try{return decodeURIComponent(e)}catch(n){return eh(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function ii(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,l=e.charAt(n);return l&&l!=="/"?null:e.slice(n)||"/"}function Pk(e,t){t===void 0&&(t="/");let{pathname:n,search:l="",hash:r=""}=typeof e=="string"?fi(e):e;return{pathname:n?n.startsWith("/")?n:Ok(n,t):t,search:$k(l),hash:eX(r)}}function Ok(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Yd(e,t,n,l){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _k(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function th(e,t){let n=_k(e);return t?n.map((l,r)=>r===e.length-1?l.pathname:l.pathnameBase):n.map(l=>l.pathnameBase)}function nh(e,t,n,l){l===void 0&&(l=!1);let r;typeof e=="string"?r=fi(e):(r=Ha({},e),Qe(!r.pathname||!r.pathname.includes("?"),Yd("?","pathname","search",r)),Qe(!r.pathname||!r.pathname.includes("#"),Yd("#","pathname","hash",r)),Qe(!r.search||!r.search.includes("#"),Yd("#","search","hash",r)));let o=e===""||r.pathname==="",i=o?"/":r.pathname,a;if(i==null)a=n;else{let d=t.length-1;if(!l&&i.startsWith("..")){let u=i.split("/");for(;u[0]==="..";)u.shift(),d-=1;r.pathname=u.join("/")}a=d>=0?t[d]:"/"}let g=Pk(r,a),s=i&&i!=="/"&&i.endsWith("/"),I=(o||i===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(s||I)&&(g.pathname+="/"),g}const ir=e=>e.join("/").replace(/\/\/+/g,"/"),qk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$k=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const b1=["post","put","patch","delete"];new Set(b1);const nX=["get",...b1];new Set(nX);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Fa.apply(this,arguments)}const $c=v.createContext(null),y1=v.createContext(null),Rl=v.createContext(null),eI=v.createContext(null),Gr=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Z1=v.createContext(null);function lX(e,t){let{relative:n}=t===void 0?{}:t;pi()||Qe(!1);let{basename:l,navigator:r}=v.useContext(Rl),{hash:o,pathname:i,search:a}=tI(e,{relative:n}),g=i;return l!=="/"&&(g=i==="/"?l:ir([l,i])),r.createHref({pathname:g,search:a,hash:o})}function pi(){return v.useContext(eI)!=null}function cn(){return pi()||Qe(!1),v.useContext(eI).location}function v1(e){v.useContext(Rl).static||v.useLayoutEffect(e)}function It(){let{isDataRoute:e}=v.useContext(Gr);return e?mX():rX()}function rX(){pi()||Qe(!1);let e=v.useContext($c),{basename:t,future:n,navigator:l}=v.useContext(Rl),{matches:r}=v.useContext(Gr),{pathname:o}=cn(),i=JSON.stringify(th(r,n.v7_relativeSplatPath)),a=v.useRef(!1);return v1(()=>{a.current=!0}),v.useCallback(function(s,I){if(I===void 0&&(I={}),!a.current)return;if(typeof s=="number"){l.go(s);return}let d=nh(s,JSON.parse(i),o,I.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:ir([t,d.pathname])),(I.replace?l.replace:l.push)(d,I.state,I)},[t,l,i,o,e])}function tI(e,t){let{relative:n}=t===void 0?{}:t,{future:l}=v.useContext(Rl),{matches:r}=v.useContext(Gr),{pathname:o}=cn(),i=JSON.stringify(th(r,l.v7_relativeSplatPath));return v.useMemo(()=>nh(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function oX(e,t){return iX(e,t)}function iX(e,t,n,l){pi()||Qe(!1);let{navigator:r}=v.useContext(Rl),{matches:o}=v.useContext(Gr),i=o[o.length-1],a=i?i.params:{};i&&i.pathname;let g=i?i.pathnameBase:"/";i&&i.route;let s=cn(),I;if(t){var d;let y=typeof t=="string"?fi(t):t;g==="/"||(d=y.pathname)!=null&&d.startsWith(g)||Qe(!1),I=y}else I=s;let u=I.pathname||"/",C=g==="/"?u:u.slice(g.length)||"/",h=Nk(e,{pathname:C}),f=IX(h&&h.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:ir([g,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?g:ir([g,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,l);return t&&f?v.createElement(eI.Provider,{value:{location:Fa({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:Ql.Pop}},f):f}function aX(){let e=AX(),t=tX(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),n?v.createElement("pre",{style:r},n):null,o)}const gX=v.createElement(aX,null);class sX extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?v.createElement(Gr.Provider,{value:this.props.routeContext},v.createElement(Z1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cX(e){let{routeContext:t,match:n,children:l}=e,r=v.useContext($c);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(Gr.Provider,{value:t},l)}function IX(e,t,n,l){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),l===void 0&&(l=null),e==null){var o;if((o=n)!=null&&o.errors)e=n.matches;else return null}let i=e,a=(r=n)==null?void 0:r.errors;if(a!=null){let I=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));I>=0||Qe(!1),i=i.slice(0,Math.min(i.length,I+1))}let g=!1,s=-1;if(n&&l&&l.v7_partialHydration)for(let I=0;I<i.length;I++){let d=i[I];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(s=I),d.route.id){let{loaderData:u,errors:C}=n,h=d.route.loader&&u[d.route.id]===void 0&&(!C||C[d.route.id]===void 0);if(d.route.lazy||h){g=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((I,d,u)=>{let C,h=!1,f=null,y=null;n&&(C=a&&d.route.id?a[d.route.id]:void 0,f=d.route.errorElement||gX,g&&(s<0&&u===0?(hX("route-fallback",!1),h=!0,y=null):s===u&&(h=!0,y=d.route.hydrateFallbackElement||null)));let A=t.concat(i.slice(0,u+1)),m=()=>{let p;return C?p=f:h?p=y:d.route.Component?p=v.createElement(d.route.Component,null):d.route.element?p=d.route.element:p=I,v.createElement(cX,{match:d,routeContext:{outlet:I,matches:A,isDataRoute:n!=null},children:p})};return n&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?v.createElement(sX,{location:n.location,revalidation:n.revalidation,component:f,error:C,children:m(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):m()},null)}var G1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(G1||{}),tc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(tc||{});function dX(e){let t=v.useContext($c);return t||Qe(!1),t}function uX(e){let t=v.useContext(y1);return t||Qe(!1),t}function CX(e){let t=v.useContext(Gr);return t||Qe(!1),t}function B1(e){let t=CX(),n=t.matches[t.matches.length-1];return n.route.id||Qe(!1),n.route.id}function AX(){var e;let t=v.useContext(Z1),n=uX(tc.UseRouteError),l=B1(tc.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[l]}function mX(){let{router:e}=dX(G1.UseNavigateStable),t=B1(tc.UseNavigateStable),n=v.useRef(!1);return v1(()=>{n.current=!0}),v.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,Fa({fromRouteId:t},o)))},[e,t])}const qp={};function hX(e,t,n){!t&&!qp[e]&&(qp[e]=!0)}function lh(e){let{to:t,replace:n,state:l,relative:r}=e;pi()||Qe(!1);let{future:o,static:i}=v.useContext(Rl),{matches:a}=v.useContext(Gr),{pathname:g}=cn(),s=It(),I=nh(t,th(a,o.v7_relativeSplatPath),g,r==="path"),d=JSON.stringify(I);return v.useEffect(()=>s(JSON.parse(d),{replace:n,state:l,relative:r}),[s,d,r,n,l]),null}function Ke(e){Qe(!1)}function fX(e){let{basename:t="/",children:n=null,location:l,navigationType:r=Ql.Pop,navigator:o,static:i=!1,future:a}=e;pi()&&Qe(!1);let g=t.replace(/^\/*/,"/"),s=v.useMemo(()=>({basename:g,navigator:o,static:i,future:Fa({v7_relativeSplatPath:!1},a)}),[g,a,o,i]);typeof l=="string"&&(l=fi(l));let{pathname:I="/",search:d="",hash:u="",state:C=null,key:h="default"}=l,f=v.useMemo(()=>{let y=ii(I,g);return y==null?null:{location:{pathname:y,search:d,hash:u,state:C,key:h},navigationType:r}},[g,I,d,u,C,h,r]);return f==null?null:v.createElement(Rl.Provider,{value:s},v.createElement(eI.Provider,{children:n,value:f}))}function pX(e){let{children:t,location:n}=e;return oX(tA(t),n)}new Promise(()=>{});function tA(e,t){t===void 0&&(t=[]);let n=[];return v.Children.forEach(e,(l,r)=>{if(!v.isValidElement(l))return;let o=[...t,r];if(l.type===v.Fragment){n.push.apply(n,tA(l.props.children,o));return}l.type!==Ke&&Qe(!1),!l.props.index||!l.props.children||Qe(!1);let i={id:l.props.id||o.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(i.children=tA(l.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},nc.apply(this,arguments)}function S1(e,t){if(e==null)return{};var n={},l=Object.keys(e),r,o;for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function bX(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function yX(e,t){return e.button===0&&(!t||t==="_self")&&!bX(e)}const ZX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],vX=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],GX=v.createContext({isTransitioning:!1}),BX="startTransition",$p=Rs[BX];function SX(e){let{basename:t,children:n,future:l,window:r}=e,o=v.useRef();o.current==null&&(o.current=Xk({window:r,v5Compat:!0}));let i=o.current,[a,g]=v.useState({action:i.action,location:i.location}),{v7_startTransition:s}=l||{},I=v.useCallback(d=>{s&&$p?$p(()=>g(d)):g(d)},[g,s]);return v.useLayoutEffect(()=>i.listen(I),[i,I]),v.createElement(fX,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:i,future:l})}const VX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V1=v.forwardRef(function(t,n){let{onClick:l,relative:r,reloadDocument:o,replace:i,state:a,target:g,to:s,preventScrollReset:I,unstable_viewTransition:d}=t,u=S1(t,ZX),{basename:C}=v.useContext(Rl),h,f=!1;if(typeof s=="string"&&WX.test(s)&&(h=s,VX))try{let p=new URL(window.location.href),b=s.startsWith("//")?new URL(p.protocol+s):new URL(s),Z=ii(b.pathname,C);b.origin===p.origin&&Z!=null?s=Z+b.search+b.hash:f=!0}catch{}let y=lX(s,{relative:r}),A=wX(s,{replace:i,state:a,target:g,preventScrollReset:I,relative:r,unstable_viewTransition:d});function m(p){l&&l(p),p.defaultPrevented||A(p)}return v.createElement("a",nc({},u,{href:h||y,onClick:f||o?l:m,ref:n,target:g}))}),Lr=v.forwardRef(function(t,n){let{"aria-current":l="page",caseSensitive:r=!1,className:o="",end:i=!1,style:a,to:g,unstable_viewTransition:s,children:I}=t,d=S1(t,vX),u=tI(g,{relative:d.relative}),C=cn(),h=v.useContext(y1),{navigator:f,basename:y}=v.useContext(Rl),A=h!=null&&kX(u)&&s===!0,m=f.encodeLocation?f.encodeLocation(u).pathname:u.pathname,p=C.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(p=p.toLowerCase(),b=b?b.toLowerCase():null,m=m.toLowerCase()),b&&y&&(b=ii(b,y)||b);const Z=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let V=p===m||!i&&p.startsWith(m)&&p.charAt(Z)==="/",S=b!=null&&(b===m||!i&&b.startsWith(m)&&b.charAt(m.length)==="/"),G={isActive:V,isPending:S,isTransitioning:A},w=V?l:void 0,B;typeof o=="function"?B=o(G):B=[o,V?"active":null,S?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let W=typeof a=="function"?a(G):a;return v.createElement(V1,nc({},d,{"aria-current":w,className:B,ref:n,style:W,to:g,unstable_viewTransition:s}),typeof I=="function"?I(G):I)});var nA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nA||(nA={}));var e0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(e0||(e0={}));function RX(e){let t=v.useContext($c);return t||Qe(!1),t}function wX(e,t){let{target:n,replace:l,state:r,preventScrollReset:o,relative:i,unstable_viewTransition:a}=t===void 0?{}:t,g=It(),s=cn(),I=tI(e,{relative:i});return v.useCallback(d=>{if(yX(d,n)){d.preventDefault();let u=l!==void 0?l:ec(s)===ec(I);g(e,{replace:u,state:r,preventScrollReset:o,relative:i,unstable_viewTransition:a})}},[s,g,I,l,r,n,e,o,i,a])}function kX(e,t){t===void 0&&(t={});let n=v.useContext(GX);n==null&&Qe(!1);let{basename:l}=RX(nA.useViewTransitionState),r=tI(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=ii(n.currentLocation.pathname,l)||n.currentLocation.pathname,i=ii(n.nextLocation.pathname,l)||n.nextLocation.pathname;return eA(r.pathname,i)!=null||eA(r.pathname,o)!=null}const rh="/assets/KnowMe2-1b6ccfbb.svg";function nI(e,t){if(e==null)return{};var n={},l=Object.keys(e),r,o;for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function ai(){return ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},ai.apply(this,arguments)}function lA(e,t){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,r){return l.__proto__=r,l},lA(e,t)}function W1(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,lA(e,t)}function Hd(e,t,n){if(n||arguments.length===2)for(var l=0,r=t.length,o;l<r;l++)(o||!(l in t))&&(o||(o=Array.prototype.slice.call(t,0,l)),o[l]=t[l]);return e.concat(o||Array.prototype.slice.call(t))}/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var t0=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,XX=/\\([\u000b\u0020-\u00ff])/g,xX=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,JX=NX;function NX(e){if(!e)throw new TypeError("argument string is required");var t=typeof e=="object"?YX(e):e;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var n=t.indexOf(";"),l=n!==-1?t.slice(0,n).trim():t.trim();if(!xX.test(l))throw new TypeError("invalid media type");var r=new HX(l.toLowerCase());if(n!==-1){var o,i,a;for(t0.lastIndex=n;i=t0.exec(t);){if(i.index!==n)throw new TypeError("invalid parameter format");n+=i[0].length,o=i[1].toLowerCase(),a=i[2],a.charCodeAt(0)===34&&(a=a.slice(1,-1),a.indexOf("\\")!==-1&&(a=a.replace(XX,"$1"))),r.parameters[o]=a}if(n!==t.length)throw new TypeError("invalid parameter format")}return r}function YX(e){var t;if(typeof e.getHeader=="function"?t=e.getHeader("content-type"):typeof e.headers=="object"&&(t=e.headers&&e.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function HX(e){this.parameters=Object.create(null),this.type=e}var Vo=new Map,R1=function(t){return t.cloneNode(!0)},n0=function(){return window.location.protocol==="file:"},w1=function(t,n,l){var r=new XMLHttpRequest;r.onreadystatechange=function(){try{if(!/\.svg/i.test(t)&&r.readyState===2){var o=r.getResponseHeader("Content-Type");if(!o)throw new Error("Content type not found");var i=JX(o).type;if(!(i==="image/svg+xml"||i==="text/plain"))throw new Error("Invalid content type: ".concat(i))}if(r.readyState===4){if(r.status===404||r.responseXML===null)throw new Error(n0()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+t);if(r.status===200||n0()&&r.status===0)l(null,r);else throw new Error("There was a problem injecting the SVG: "+r.status+" "+r.statusText)}}catch(a){if(r.abort(),a instanceof Error)l(a,r);else throw a}},r.open("GET",t),r.withCredentials=n,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.send()},zl={},l0=function(t,n){zl[t]=zl[t]||[],zl[t].push(n)},FX=function(t){for(var n=function(i,a){setTimeout(function(){if(Array.isArray(zl[t])){var g=Vo.get(t),s=zl[t][i];g instanceof SVGSVGElement&&s(null,R1(g)),g instanceof Error&&s(g),i===zl[t].length-1&&delete zl[t]}},0)},l=0,r=zl[t].length;l<r;l++)n(l)},KX=function(t,n,l){if(Vo.has(t)){var r=Vo.get(t);if(r===void 0){l0(t,l);return}if(r instanceof SVGSVGElement){l(null,R1(r));return}}Vo.set(t,void 0),l0(t,l),w1(t,n,function(o,i){var a;o?Vo.set(t,o):((a=i.responseXML)===null||a===void 0?void 0:a.documentElement)instanceof SVGSVGElement&&Vo.set(t,i.responseXML.documentElement),FX(t)})},EX=function(t,n,l){w1(t,n,function(r,o){var i;r?l(r):((i=o.responseXML)===null||i===void 0?void 0:i.documentElement)instanceof SVGSVGElement&&l(null,o.responseXML.documentElement)})},MX=0,TX=function(){return++MX},Un=[],r0={},LX="http://www.w3.org/2000/svg",Fd="http://www.w3.org/1999/xlink",o0=function(t,n,l,r,o,i,a){var g=t.getAttribute("data-src")||t.getAttribute("src");if(!g){a(new Error("Invalid data-src or src attribute"));return}if(Un.indexOf(t)!==-1){Un.splice(Un.indexOf(t),1),t=null;return}Un.push(t),t.setAttribute("src","");var s=r?KX:EX;s(g,o,function(I,d){if(!d){Un.splice(Un.indexOf(t),1),t=null,a(I);return}var u=t.getAttribute("id");u&&d.setAttribute("id",u);var C=t.getAttribute("title");C&&d.setAttribute("title",C);var h=t.getAttribute("width");h&&d.setAttribute("width",h);var f=t.getAttribute("height");f&&d.setAttribute("height",f);var y=Array.from(new Set(Hd(Hd(Hd([],(d.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(t.getAttribute("class")||"").split(" "),!0))).join(" ").trim();d.setAttribute("class",y);var A=t.getAttribute("style");A&&d.setAttribute("style",A),d.setAttribute("data-src",g);var m=[].filter.call(t.attributes,function(E){return/^data-\w[\w-]*$/.test(E.name)});if(Array.prototype.forEach.call(m,function(E){E.name&&E.value&&d.setAttribute(E.name,E.value)}),l){var p={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},b,Z,V,S,G;Object.keys(p).forEach(function(E){b=E,V=p[E],Z=d.querySelectorAll(b+"[id]");for(var N=function(F,z){S=Z[F].id,G=S+"-"+TX();var L;Array.prototype.forEach.call(V,function(ae){L=d.querySelectorAll("["+ae+'*="'+S+'"]');for(var ce=0,ie=L.length;ce<ie;ce++){var Ze=L[ce].getAttribute(ae);Ze&&!Ze.match(new RegExp('url\\("?#'+S+'"?\\)'))||L[ce].setAttribute(ae,"url(#"+G+")")}});for(var K=d.querySelectorAll("[*|href]"),j=[],D=0,Q=K.length;D<Q;D++){var O=K[D].getAttributeNS(Fd,"href");O&&O.toString()==="#"+Z[F].id&&j.push(K[D])}for(var ne=0,oe=j.length;ne<oe;ne++)j[ne].setAttributeNS(Fd,"href","#"+G);Z[F].id=G},J=0,X=Z.length;J<X;J++)N(J)})}d.removeAttribute("xmlns:a");for(var w=d.querySelectorAll("script"),B=[],W,R,k=0,x=w.length;k<x;k++)R=w[k].getAttribute("type"),(!R||R==="application/ecmascript"||R==="application/javascript"||R==="text/javascript")&&(W=w[k].innerText||w[k].textContent,W&&B.push(W),d.removeChild(w[k]));if(B.length>0&&(n==="always"||n==="once"&&!r0[g])){for(var H=0,M=B.length;H<M;H++)new Function(B[H])(window);r0[g]=!0}var T=d.querySelectorAll("style");if(Array.prototype.forEach.call(T,function(E){E.textContent+=""}),d.setAttribute("xmlns",LX),d.setAttribute("xmlns:xlink",Fd),i(d),!t.parentNode){Un.splice(Un.indexOf(t),1),t=null,a(new Error("Parent node is null"));return}t.parentNode.replaceChild(d,t),Un.splice(Un.indexOf(t),1),t=null,a(null,d)})},zX=function(t,n){var l=n===void 0?{}:n,r=l.afterAll,o=r===void 0?function(){}:r,i=l.afterEach,a=i===void 0?function(){}:i,g=l.beforeEach,s=g===void 0?function(){}:g,I=l.cacheRequests,d=I===void 0?!0:I,u=l.evalScripts,C=u===void 0?"never":u,h=l.httpRequestWithCredentials,f=h===void 0?!1:h,y=l.renumerateIRIElements,A=y===void 0?!0:y;if(t&&"length"in t)for(var m=0,p=0,b=t.length;p<b;p++)o0(t[p],C,A,d,f,s,function(Z,V){a(Z,V),t&&"length"in t&&t.length===++m&&o(m)});else t?o0(t,C,A,d,f,s,function(Z,V){a(Z,V),o(1),t=null}):o(0)},k1={exports:{}},jX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",UX=jX,DX=UX;function X1(){}function x1(){}x1.resetWarningCache=X1;var QX=function(){function e(l,r,o,i,a,g){if(g!==DX){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:x1,resetWarningCache:X1};return n.PropTypes=n,n};k1.exports=QX();var _e=k1.exports;const ml=Ln(_e);var PX=function(t){var n=(t==null?void 0:t.ownerDocument)||document;return n.defaultView||window},OX=function(t,n){for(var l in t)if(!(l in n))return!0;for(var r in n)if(t[r]!==n[r])return!0;return!1},_X=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],Xg="http://www.w3.org/2000/svg",i0="http://www.w3.org/1999/xlink",bi=function(e){W1(t,e);function t(){for(var l,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return l=e.call.apply(e,[this].concat(o))||this,l.initialState={hasError:!1,isLoading:!0},l.state=l.initialState,l._isMounted=!1,l.reactWrapper=void 0,l.nonReactWrapper=void 0,l.refCallback=function(a){l.reactWrapper=a},l}var n=t.prototype;return n.renderSVG=function(){var r=this;if(this.reactWrapper instanceof PX(this.reactWrapper).Node){var o=this.props,i=o.desc,a=o.evalScripts,g=o.httpRequestWithCredentials,s=o.renumerateIRIElements,I=o.src,d=o.title,u=o.useRequestCache,C=this.props.onError,h=this.props.beforeInjection,f=this.props.afterInjection,y=this.props.wrapper,A,m;y==="svg"?(A=document.createElementNS(Xg,y),A.setAttribute("xmlns",Xg),A.setAttribute("xmlns:xlink",i0),m=document.createElementNS(Xg,y)):(A=document.createElement(y),m=document.createElement(y)),A.appendChild(m),m.dataset.src=I,this.nonReactWrapper=this.reactWrapper.appendChild(A);var p=function(S){if(r.removeSVG(),!r._isMounted){C(S);return}r.setState(function(){return{hasError:!0,isLoading:!1}},function(){C(S)})},b=function(S,G){if(S){p(S);return}r._isMounted&&r.setState(function(){return{isLoading:!1}},function(){try{f(G)}catch(w){p(w)}})},Z=function(S){if(S.setAttribute("role","img"),i){var G=S.querySelector(":scope > desc");G&&S.removeChild(G);var w=document.createElement("desc");w.innerHTML=i,S.prepend(w)}if(d){var B=S.querySelector(":scope > title");B&&S.removeChild(B);var W=document.createElement("title");W.innerHTML=d,S.prepend(W)}try{h(S)}catch(R){p(R)}};zX(m,{afterEach:b,beforeEach:Z,cacheRequests:u,evalScripts:a,httpRequestWithCredentials:g,renumerateIRIElements:s})}},n.removeSVG=function(){var r;(r=this.nonReactWrapper)!=null&&r.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},n.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},n.componentDidUpdate=function(r){var o=this;OX(ai({},r),this.props)&&this.setState(function(){return o.initialState},function(){o.removeSVG(),o.renderSVG()})},n.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},n.render=function(){var r=this.props;r.afterInjection,r.beforeInjection,r.desc,r.evalScripts;var o=r.fallback;r.httpRequestWithCredentials;var i=r.loading;r.renumerateIRIElements,r.src,r.title,r.useRequestCache;var a=r.wrapper,g=nI(r,_X),s=a;return v.createElement(s,ai({},g,{ref:this.refCallback},a==="svg"?{xmlns:Xg,xmlnsXlink:i0}:{}),this.state.isLoading&&i&&v.createElement(i,null),this.state.hasError&&o&&v.createElement(o,null))},t}(v.Component);bi.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};bi.propTypes={afterInjection:_e.func,beforeInjection:_e.func,desc:_e.string,evalScripts:_e.oneOf(["always","once","never"]),fallback:_e.oneOfType([_e.func,_e.object,_e.string]),httpRequestWithCredentials:_e.bool,loading:_e.oneOfType([_e.func,_e.object,_e.string]),onError:_e.func,renumerateIRIElements:_e.bool,src:_e.string.isRequired,title:_e.string,useRequestCache:_e.bool,wrapper:_e.oneOf(["div","span","svg"])};var J1={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",i=0;i<arguments.length;i++){var a=arguments[i];a&&(o=r(o,l(a)))}return o}function l(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var a in o)t.call(o,a)&&o[a]&&(i=r(i,a));return i}function r(o,i){return i?o?o+" "+i:o+i:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(J1);var qX=J1.exports;const we=Ln(qX);function a0(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function $X(e){var t=e5(e,"string");return typeof t=="symbol"?t:String(t)}function e5(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var l=n.call(e,t||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t5(e,t,n){var l=v.useRef(e!==void 0),r=v.useState(t),o=r[0],i=r[1],a=e!==void 0,g=l.current;return l.current=a,!a&&g&&o!==t&&i(t),[a?e:o,v.useCallback(function(s){for(var I=arguments.length,d=new Array(I>1?I-1:0),u=1;u<I;u++)d[u-1]=arguments[u];n&&n.apply(void 0,[s].concat(d)),i(s)},[n])]}function n5(e,t){return Object.keys(t).reduce(function(n,l){var r,o=n,i=o[a0(l)],a=o[l],g=nI(o,[a0(l),l].map($X)),s=t[l],I=t5(a,i,e[s]),d=I[0],u=I[1];return ai({},g,(r={},r[l]=d,r[s]=u,r))},e)}const l5=["xxl","xl","lg","md","sm","xs"],r5="xs",lI=v.createContext({prefixes:{},breakpoints:l5,minBreakpoint:r5});function Oe(e,t){const{prefixes:n}=v.useContext(lI);return e||n[t]||t}function N1(){const{breakpoints:e}=v.useContext(lI);return e}function Y1(){const{minBreakpoint:e}=v.useContext(lI);return e}function o5(){const{dir:e}=v.useContext(lI);return e==="rtl"}function rI(e){return e&&e.ownerDocument||document}function i5(e){var t=rI(e);return t&&t.defaultView||window}function a5(e,t){return i5(e).getComputedStyle(e,t)}var g5=/([A-Z])/g;function s5(e){return e.replace(g5,"-$1").toLowerCase()}var c5=/^ms-/;function xg(e){return s5(e).replace(c5,"-ms-")}var I5=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function d5(e){return!!(e&&I5.test(e))}function no(e,t){var n="",l="";if(typeof t=="string")return e.style.getPropertyValue(xg(t))||a5(e).getPropertyValue(xg(t));Object.keys(t).forEach(function(r){var o=t[r];!o&&o!==0?e.style.removeProperty(xg(r)):d5(r)?l+=r+"("+o+") ":n+=xg(r)+": "+o+";"}),l&&(n+="transform: "+l+";"),e.style.cssText+=";"+n}const g0={disabled:!1},H1=U.createContext(null);var u5=function(t){return t.scrollTop},ta="unmounted",Fr="exited",Kl="entering",zr="entered",rA="exiting",wl=function(e){W1(t,e);function t(l,r){var o;o=e.call(this,l,r)||this;var i=r,a=i&&!i.isMounting?l.enter:l.appear,g;return o.appearStatus=null,l.in?a?(g=Fr,o.appearStatus=Kl):g=zr:l.unmountOnExit||l.mountOnEnter?g=ta:g=Fr,o.state={status:g},o.nextCallback=null,o}t.getDerivedStateFromProps=function(r,o){var i=r.in;return i&&o.status===ta?{status:Fr}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var o=null;if(r!==this.props){var i=this.state.status;this.props.in?i!==Kl&&i!==zr&&(o=Kl):(i===Kl||i===zr)&&(o=rA)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,o,i,a;return o=i=a=r,r!=null&&typeof r!="number"&&(o=r.exit,i=r.enter,a=r.appear!==void 0?r.appear:i),{exit:o,enter:i,appear:a}},n.updateStatus=function(r,o){if(r===void 0&&(r=!1),o!==null)if(this.cancelNextCallback(),o===Kl){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:Or.findDOMNode(this);i&&u5(i)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Fr&&this.setState({status:ta})},n.performEnter=function(r){var o=this,i=this.props.enter,a=this.context?this.context.isMounting:r,g=this.props.nodeRef?[a]:[Or.findDOMNode(this),a],s=g[0],I=g[1],d=this.getTimeouts(),u=a?d.appear:d.enter;if(!r&&!i||g0.disabled){this.safeSetState({status:zr},function(){o.props.onEntered(s)});return}this.props.onEnter(s,I),this.safeSetState({status:Kl},function(){o.props.onEntering(s,I),o.onTransitionEnd(u,function(){o.safeSetState({status:zr},function(){o.props.onEntered(s,I)})})})},n.performExit=function(){var r=this,o=this.props.exit,i=this.getTimeouts(),a=this.props.nodeRef?void 0:Or.findDOMNode(this);if(!o||g0.disabled){this.safeSetState({status:Fr},function(){r.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:rA},function(){r.props.onExiting(a),r.onTransitionEnd(i.exit,function(){r.safeSetState({status:Fr},function(){r.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,o){o=this.setNextCallback(o),this.setState(r,o)},n.setNextCallback=function(r){var o=this,i=!0;return this.nextCallback=function(a){i&&(i=!1,o.nextCallback=null,r(a))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(r,o){this.setNextCallback(o);var i=this.props.nodeRef?this.props.nodeRef.current:Or.findDOMNode(this),a=r==null&&!this.props.addEndListener;if(!i||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var g=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],s=g[0],I=g[1];this.props.addEndListener(s,I)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===ta)return null;var o=this.props,i=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=nI(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return U.createElement(H1.Provider,{value:null},typeof i=="function"?i(r,a):U.cloneElement(U.Children.only(i),a))},t}(U.Component);wl.contextType=H1;wl.propTypes={};function Zo(){}wl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Zo,onEntering:Zo,onEntered:Zo,onExit:Zo,onExiting:Zo,onExited:Zo};wl.UNMOUNTED=ta;wl.EXITED=Fr;wl.ENTERING=Kl;wl.ENTERED=zr;wl.EXITING=rA;const C5=wl,yi=!!(typeof window<"u"&&window.document&&window.document.createElement);var oA=!1,iA=!1;try{var Kd={get passive(){return oA=!0},get once(){return iA=oA=!0}};yi&&(window.addEventListener("test",Kd,Kd),window.removeEventListener("test",Kd,!0))}catch{}function F1(e,t,n,l){if(l&&typeof l!="boolean"&&!iA){var r=l.once,o=l.capture,i=n;!iA&&r&&(i=n.__once||function a(g){this.removeEventListener(t,a,o),n.call(this,g)},n.__once=i),e.addEventListener(t,i,oA?l:o)}e.addEventListener(t,n,l)}function aA(e,t,n,l){var r=l&&typeof l!="boolean"?l.capture:l;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}function lc(e,t,n,l){return F1(e,t,n,l),function(){aA(e,t,n,l)}}function A5(e,t,n,l){if(n===void 0&&(n=!1),l===void 0&&(l=!0),e){var r=document.createEvent("HTMLEvents");r.initEvent(t,n,l),e.dispatchEvent(r)}}function m5(e){var t=no(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function h5(e,t,n){n===void 0&&(n=5);var l=!1,r=setTimeout(function(){l||A5(e,"transitionend",!0)},t+n),o=lc(e,"transitionend",function(){l=!0},{once:!0});return function(){clearTimeout(r),o()}}function K1(e,t,n,l){n==null&&(n=m5(e)||0);var r=h5(e,n,l),o=lc(e,"transitionend",t);return function(){r(),o()}}function s0(e,t){const n=no(e,t)||"",l=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*l}function f5(e,t){const n=s0(e,"transitionDuration"),l=s0(e,"transitionDelay"),r=K1(e,o=>{o.target===e&&(r(),t(o))},n+l)}function p5(e){e.offsetHeight}const c0=e=>!e||typeof e=="function"?e:t=>{e.current=t};function b5(e,t){const n=c0(e),l=c0(t);return r=>{n&&n(r),l&&l(r)}}function oI(e,t){return v.useMemo(()=>b5(e,t),[e,t])}function y5(e){return e&&"setState"in e?Or.findDOMNode(e):e??null}const Z5=U.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:l,onExiting:r,onExited:o,addEndListener:i,children:a,childRef:g,...s},I)=>{const d=v.useRef(null),u=oI(d,g),C=V=>{u(y5(V))},h=V=>S=>{V&&d.current&&V(d.current,S)},f=v.useCallback(h(e),[e]),y=v.useCallback(h(t),[t]),A=v.useCallback(h(n),[n]),m=v.useCallback(h(l),[l]),p=v.useCallback(h(r),[r]),b=v.useCallback(h(o),[o]),Z=v.useCallback(h(i),[i]);return c.jsx(C5,{ref:I,...s,onEnter:f,onEntered:A,onEntering:y,onExit:m,onExited:b,onExiting:p,addEndListener:Z,nodeRef:d,children:typeof a=="function"?(V,S)=>a(V,{...S,ref:C}):U.cloneElement(a,{ref:C})})}),v5=Z5;function G5(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e},[e]),t}function Zn(e){const t=G5(e);return v.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const E1=e=>v.forwardRef((t,n)=>c.jsx("div",{...t,ref:n,className:we(t.className,e)})),M1=E1("h4");M1.displayName="DivStyledAsH4";const T1=v.forwardRef(({className:e,bsPrefix:t,as:n=M1,...l},r)=>(t=Oe(t,"alert-heading"),c.jsx(n,{ref:r,className:we(e,t),...l})));T1.displayName="AlertHeading";const B5=T1;function S5(){return v.useState(null)}function V5(){const e=v.useRef(!0),t=v.useRef(()=>e.current);return v.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function W5(e){const t=v.useRef(null);return v.useEffect(()=>{t.current=e}),t.current}const R5=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",w5=typeof document<"u",I0=w5||R5?v.useLayoutEffect:v.useEffect,k5=["as","disabled"];function X5(e,t){if(e==null)return{};var n={},l=Object.keys(e),r,o;for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function x5(e){return!e||e.trim()==="#"}function oh({tagName:e,disabled:t,href:n,target:l,rel:r,role:o,onClick:i,tabIndex:a=0,type:g}){e||(n!=null||l!=null||r!=null?e="a":e="button");const s={tagName:e};if(e==="button")return[{type:g||"button",disabled:t},s];const I=u=>{if((t||e==="a"&&x5(n))&&u.preventDefault(),t){u.stopPropagation();return}i==null||i(u)},d=u=>{u.key===" "&&(u.preventDefault(),I(u))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:t?void 0:a,href:n,target:e==="a"?l:void 0,"aria-disabled":t||void 0,rel:e==="a"?r:void 0,onClick:I,onKeyDown:d},s]}const J5=v.forwardRef((e,t)=>{let{as:n,disabled:l}=e,r=X5(e,k5);const[o,{tagName:i}]=oh(Object.assign({tagName:n,disabled:l},r));return c.jsx(i,Object.assign({},r,o,{ref:t}))});J5.displayName="Button";const N5=["onKeyDown"];function Y5(e,t){if(e==null)return{};var n={},l=Object.keys(e),r,o;for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function H5(e){return!e||e.trim()==="#"}const L1=v.forwardRef((e,t)=>{let{onKeyDown:n}=e,l=Y5(e,N5);const[r]=oh(Object.assign({tagName:"a"},l)),o=Zn(i=>{r.onKeyDown(i),n==null||n(i)});return H5(l.href)||l.role==="button"?c.jsx("a",Object.assign({ref:t},l,r,{onKeyDown:o})):c.jsx("a",Object.assign({ref:t},l,{onKeyDown:n}))});L1.displayName="Anchor";const F5=L1,z1=v.forwardRef(({className:e,bsPrefix:t,as:n=F5,...l},r)=>(t=Oe(t,"alert-link"),c.jsx(n,{ref:r,className:we(e,t),...l})));z1.displayName="AlertLink";const K5=z1,E5={[Kl]:"show",[zr]:"show"},j1=v.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:l,...r},o)=>{const i={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},a=v.useCallback((g,s)=>{p5(g),l==null||l(g,s)},[l]);return c.jsx(v5,{ref:o,addEndListener:f5,...i,onEnter:a,childRef:t.ref,children:(g,s)=>v.cloneElement(t,{...s,className:we("fade",e,t.props.className,E5[g],n[g])})})});j1.displayName="Fade";const rc=j1,M5={"aria-label":ml.string,onClick:ml.func,variant:ml.oneOf(["white"])},ih=v.forwardRef(({className:e,variant:t,"aria-label":n="Close",...l},r)=>c.jsx("button",{ref:r,type:"button",className:we("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...l}));ih.displayName="CloseButton";ih.propTypes=M5;const U1=ih,D1=v.forwardRef((e,t)=>{const{bsPrefix:n,show:l=!0,closeLabel:r="Close alert",closeVariant:o,className:i,children:a,variant:g="primary",onClose:s,dismissible:I,transition:d=rc,...u}=n5(e,{show:"onClose"}),C=Oe(n,"alert"),h=Zn(A=>{s&&s(!1,A)}),f=d===!0?rc:d,y=c.jsxs("div",{role:"alert",...f?void 0:u,ref:t,className:we(i,C,g&&`${C}-${g}`,I&&`${C}-dismissible`),children:[I&&c.jsx(U1,{onClick:h,"aria-label":r,variant:o}),a]});return f?c.jsx(f,{unmountOnExit:!0,...u,ref:void 0,in:l,children:y}):l?y:null});D1.displayName="Alert";const T5=Object.assign(D1,{Link:K5,Heading:B5}),Q1=v.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:l,active:r=!1,disabled:o=!1,className:i,...a},g)=>{const s=Oe(t,"btn"),[I,{tagName:d}]=oh({tagName:e,disabled:o,...a}),u=d;return c.jsx(u,{...I,...a,ref:g,disabled:o,className:we(i,s,r&&"active",n&&`${s}-${n}`,l&&`${s}-${l}`,a.href&&o&&"disabled")})});Q1.displayName="Button";const et=Q1;function L5(e){const t=v.useRef(e);return t.current=e,t}function P1(e){const t=L5(e);v.useEffect(()=>()=>t.current(),[])}function z5(e,t){return v.Children.toArray(e).some(n=>v.isValidElement(n)&&n.type===t)}function j5({as:e,bsPrefix:t,className:n,...l}){t=Oe(t,"col");const r=N1(),o=Y1(),i=[],a=[];return r.forEach(g=>{const s=l[g];delete l[g];let I,d,u;typeof s=="object"&&s!=null?{span:I,offset:d,order:u}=s:I=s;const C=g!==o?`-${g}`:"";I&&i.push(I===!0?`${t}${C}`:`${t}${C}-${I}`),u!=null&&a.push(`order${C}-${u}`),d!=null&&a.push(`offset${C}-${d}`)}),[{...l,className:we(n,...i,...a)},{as:e,bsPrefix:t,spans:i}]}const O1=v.forwardRef((e,t)=>{const[{className:n,...l},{as:r="div",bsPrefix:o,spans:i}]=j5(e);return c.jsx(r,{...l,ref:t,className:we(n,!i.length&&o)})});O1.displayName="Col";const se=O1;var U5=Function.prototype.bind.call(Function.prototype.call,[].slice);function vo(e,t){return U5(e.querySelectorAll(t))}function d0(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const D5="data-rr-ui-";function Q5(e){return`${D5}${e}`}const _1=v.createContext(yi?window:void 0);_1.Provider;function ah(){return v.useContext(_1)}const P5={type:ml.string,tooltip:ml.bool,as:ml.elementType},gh=v.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:l=!1,...r},o)=>c.jsx(e,{...r,ref:o,className:we(t,`${n}-${l?"tooltip":"feedback"}`)}));gh.displayName="Feedback";gh.propTypes=P5;const q1=gh,O5=v.createContext({}),Bl=O5,$1=v.forwardRef(({id:e,bsPrefix:t,className:n,type:l="checkbox",isValid:r=!1,isInvalid:o=!1,as:i="input",...a},g)=>{const{controlId:s}=v.useContext(Bl);return t=Oe(t,"form-check-input"),c.jsx(i,{...a,ref:g,type:l,id:e||s,className:we(n,t,r&&"is-valid",o&&"is-invalid")})});$1.displayName="FormCheckInput";const eB=$1,tB=v.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...l},r)=>{const{controlId:o}=v.useContext(Bl);return e=Oe(e,"form-check-label"),c.jsx("label",{...l,ref:r,htmlFor:n||o,className:we(t,e)})});tB.displayName="FormCheckLabel";const gA=tB,nB=v.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:l=!1,reverse:r=!1,disabled:o=!1,isValid:i=!1,isInvalid:a=!1,feedbackTooltip:g=!1,feedback:s,feedbackType:I,className:d,style:u,title:C="",type:h="checkbox",label:f,children:y,as:A="input",...m},p)=>{t=Oe(t,"form-check"),n=Oe(n,"form-switch");const{controlId:b}=v.useContext(Bl),Z=v.useMemo(()=>({controlId:e||b}),[b,e]),V=!y&&f!=null&&f!==!1||z5(y,gA),S=c.jsx(eB,{...m,type:h==="switch"?"checkbox":h,ref:p,isValid:i,isInvalid:a,disabled:o,as:A});return c.jsx(Bl.Provider,{value:Z,children:c.jsx("div",{style:u,className:we(d,V&&t,l&&`${t}-inline`,r&&`${t}-reverse`,h==="switch"&&n),children:y||c.jsxs(c.Fragment,{children:[S,V&&c.jsx(gA,{title:C,children:f}),s&&c.jsx(q1,{type:I,tooltip:g,children:s})]})})})});nB.displayName="FormCheck";const oc=Object.assign(nB,{Input:eB,Label:gA}),lB=v.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:l,id:r,className:o,isValid:i=!1,isInvalid:a=!1,plaintext:g,readOnly:s,as:I="input",...d},u)=>{const{controlId:C}=v.useContext(Bl);return e=Oe(e,"form-control"),c.jsx(I,{...d,type:t,size:l,ref:u,readOnly:s,id:r||C,className:we(o,g?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,i&&"is-valid",a&&"is-invalid")})});lB.displayName="FormControl";const _5=Object.assign(lB,{Feedback:q1}),rB=v.forwardRef(({className:e,bsPrefix:t,as:n="div",...l},r)=>(t=Oe(t,"form-floating"),c.jsx(n,{ref:r,className:we(e,t),...l})));rB.displayName="FormFloating";const q5=rB,oB=v.forwardRef(({controlId:e,as:t="div",...n},l)=>{const r=v.useMemo(()=>({controlId:e}),[e]);return c.jsx(Bl.Provider,{value:r,children:c.jsx(t,{...n,ref:l})})});oB.displayName="FormGroup";const iB=oB,aB=v.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:l=!1,className:r,htmlFor:o,...i},a)=>{const{controlId:g}=v.useContext(Bl);t=Oe(t,"form-label");let s="col-form-label";typeof n=="string"&&(s=`${s} ${s}-${n}`);const I=we(r,t,l&&"visually-hidden",n&&s);return o=o||g,n?c.jsx(se,{ref:a,as:"label",className:I,htmlFor:o,...i}):c.jsx(e,{ref:a,className:I,htmlFor:o,...i})});aB.displayName="FormLabel";const $5=aB,gB=v.forwardRef(({bsPrefix:e,className:t,id:n,...l},r)=>{const{controlId:o}=v.useContext(Bl);return e=Oe(e,"form-range"),c.jsx("input",{...l,type:"range",ref:r,className:we(t,e),id:n||o})});gB.displayName="FormRange";const ex=gB,sB=v.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:l,isValid:r=!1,isInvalid:o=!1,id:i,...a},g)=>{const{controlId:s}=v.useContext(Bl);return e=Oe(e,"form-select"),c.jsx("select",{...a,size:n,ref:g,className:we(l,e,t&&`${e}-${t}`,r&&"is-valid",o&&"is-invalid"),id:i||s})});sB.displayName="FormSelect";const tx=sB,cB=v.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:l,...r},o)=>(e=Oe(e,"form-text"),c.jsx(n,{...r,ref:o,className:we(t,e,l&&"text-muted")})));cB.displayName="FormText";const nx=cB,IB=v.forwardRef((e,t)=>c.jsx(oc,{...e,ref:t,type:"switch"}));IB.displayName="Switch";const lx=Object.assign(IB,{Input:oc.Input,Label:oc.Label}),dB=v.forwardRef(({bsPrefix:e,className:t,children:n,controlId:l,label:r,...o},i)=>(e=Oe(e,"form-floating"),c.jsxs(iB,{ref:i,className:we(t,e),controlId:l,...o,children:[n,c.jsx("label",{htmlFor:l,children:r})]})));dB.displayName="FloatingLabel";const rx=dB,ox={_ref:ml.any,validated:ml.bool,as:ml.elementType},sh=v.forwardRef(({className:e,validated:t,as:n="form",...l},r)=>c.jsx(n,{...l,ref:r,className:we(e,t&&"was-validated")}));sh.displayName="Form";sh.propTypes=ox;const ix=Object.assign(sh,{Group:iB,Control:_5,Floating:q5,Check:oc,Switch:lx,Label:$5,Text:nx,Range:ex,Select:tx,FloatingLabel:rx});var Jg;function u0(e){if((!Jg&&Jg!==0||e)&&yi){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Jg=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Jg}function Ed(e){e===void 0&&(e=rI());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function ax(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const C0=Q5("modal-open");class gx{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:l=!1}={}){this.handleContainerOverflow=n,this.isRTL=l,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return ax(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},l=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[l]:r.style[l]},t.scrollBarWidth&&(n[l]=`${parseInt(no(r,l)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(C0,""),no(r,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(C0),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const ch=gx,Md=(e,t)=>yi?e==null?(t||rI()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function sx(e,t){const n=ah(),[l,r]=v.useState(()=>Md(e,n==null?void 0:n.document));if(!l){const o=Md(e);o&&r(o)}return v.useEffect(()=>{t&&l&&t(l)},[t,l]),v.useEffect(()=>{const o=Md(e);o!==l&&r(o)},[e,l]),l}function cx({children:e,in:t,onExited:n,mountOnEnter:l,unmountOnExit:r}){const o=v.useRef(null),i=v.useRef(t),a=Zn(n);v.useEffect(()=>{t?i.current=!0:a(o.current)},[t,a]);const g=oI(o,e.ref),s=v.cloneElement(e,{ref:g});return t?s:r||!i.current&&l?null:s}function Ix({in:e,onTransition:t}){const n=v.useRef(null),l=v.useRef(!0),r=Zn(t);return I0(()=>{if(!n.current)return;let o=!1;return r({in:e,element:n.current,initial:l.current,isStale:()=>o}),()=>{o=!0}},[e,r]),I0(()=>(l.current=!1,()=>{l.current=!0}),[]),n}function dx({children:e,in:t,onExited:n,onEntered:l,transition:r}){const[o,i]=v.useState(!t);t&&o&&i(!1);const a=Ix({in:!!t,onTransition:s=>{const I=()=>{s.isStale()||(s.in?l==null||l(s.element,s.initial):(i(!0),n==null||n(s.element)))};Promise.resolve(r(s)).then(I,d=>{throw s.in||i(!0),d})}}),g=oI(a,e.ref);return o&&!t?null:v.cloneElement(e,{ref:g})}function A0(e,t,n){return e?c.jsx(e,Object.assign({},n)):t?c.jsx(dx,Object.assign({},n,{transition:t})):c.jsx(cx,Object.assign({},n))}function ux(e){return e.code==="Escape"||e.keyCode===27}const Cx=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Ax(e,t){if(e==null)return{};var n={},l=Object.keys(e),r,o;for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}let Td;function mx(e){return Td||(Td=new ch({ownerDocument:e==null?void 0:e.document})),Td}function hx(e){const t=ah(),n=e||mx(t),l=v.useRef({dialog:null,backdrop:null});return Object.assign(l.current,{add:()=>n.add(l.current),remove:()=>n.remove(l.current),isTopModal:()=>n.isTopModal(l.current),setDialogRef:v.useCallback(r=>{l.current.dialog=r},[]),setBackdropRef:v.useCallback(r=>{l.current.backdrop=r},[])})}const uB=v.forwardRef((e,t)=>{let{show:n=!1,role:l="dialog",className:r,style:o,children:i,backdrop:a=!0,keyboard:g=!0,onBackdropClick:s,onEscapeKeyDown:I,transition:d,runTransition:u,backdropTransition:C,runBackdropTransition:h,autoFocus:f=!0,enforceFocus:y=!0,restoreFocus:A=!0,restoreFocusOptions:m,renderDialog:p,renderBackdrop:b=ie=>c.jsx("div",Object.assign({},ie)),manager:Z,container:V,onShow:S,onHide:G=()=>{},onExit:w,onExited:B,onExiting:W,onEnter:R,onEntering:k,onEntered:x}=e,H=Ax(e,Cx);const M=ah(),T=sx(V),E=hx(Z),N=V5(),J=W5(n),[X,Y]=v.useState(!n),F=v.useRef(null);v.useImperativeHandle(t,()=>E,[E]),yi&&!J&&n&&(F.current=Ed(M==null?void 0:M.document)),n&&X&&Y(!1);const z=Zn(()=>{if(E.add(),O.current=lc(document,"keydown",D),Q.current=lc(document,"focus",()=>setTimeout(K),!0),S&&S(),f){var ie,Ze;const ve=Ed((ie=(Ze=E.dialog)==null?void 0:Ze.ownerDocument)!=null?ie:M==null?void 0:M.document);E.dialog&&ve&&!d0(E.dialog,ve)&&(F.current=ve,E.dialog.focus())}}),L=Zn(()=>{if(E.remove(),O.current==null||O.current(),Q.current==null||Q.current(),A){var ie;(ie=F.current)==null||ie.focus==null||ie.focus(m),F.current=null}});v.useEffect(()=>{!n||!T||z()},[n,T,z]),v.useEffect(()=>{X&&L()},[X,L]),P1(()=>{L()});const K=Zn(()=>{if(!y||!N()||!E.isTopModal())return;const ie=Ed(M==null?void 0:M.document);E.dialog&&ie&&!d0(E.dialog,ie)&&E.dialog.focus()}),j=Zn(ie=>{ie.target===ie.currentTarget&&(s==null||s(ie),a===!0&&G())}),D=Zn(ie=>{g&&ux(ie)&&E.isTopModal()&&(I==null||I(ie),ie.defaultPrevented||G())}),Q=v.useRef(),O=v.useRef(),ne=(...ie)=>{Y(!0),B==null||B(...ie)};if(!T)return null;const oe=Object.assign({role:l,ref:E.setDialogRef,"aria-modal":l==="dialog"?!0:void 0},H,{style:o,className:r,tabIndex:-1});let ae=p?p(oe):c.jsx("div",Object.assign({},oe,{children:v.cloneElement(i,{role:"document"})}));ae=A0(d,u,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:w,onExiting:W,onExited:ne,onEnter:R,onEntering:k,onEntered:x,children:ae});let ce=null;return a&&(ce=b({ref:E.setBackdropRef,onClick:j}),ce=A0(C,h,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ce})),c.jsx(c.Fragment,{children:Or.createPortal(c.jsxs(c.Fragment,{children:[ce,ae]}),T)})});uB.displayName="Modal";const fx=Object.assign(uB,{Manager:ch});function px(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function bx(e,t){e.classList?e.classList.add(t):px(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function m0(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function yx(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=m0(e.className,t):e.setAttribute("class",m0(e.className&&e.className.baseVal||"",t))}const Go={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Zx extends ch{adjustAndStore(t,n,l){const r=n.style[t];n.dataset[t]=r,no(n,{[t]:`${parseFloat(no(n,t))+l}px`})}restore(t,n){const l=n.dataset[t];l!==void 0&&(delete n.dataset[t],no(n,{[t]:l}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(bx(n,"modal-open"),!t.scrollBarWidth)return;const l=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";vo(n,Go.FIXED_CONTENT).forEach(o=>this.adjustAndStore(l,o,t.scrollBarWidth)),vo(n,Go.STICKY_CONTENT).forEach(o=>this.adjustAndStore(r,o,-t.scrollBarWidth)),vo(n,Go.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(r,o,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();yx(n,"modal-open");const l=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";vo(n,Go.FIXED_CONTENT).forEach(o=>this.restore(l,o)),vo(n,Go.STICKY_CONTENT).forEach(o=>this.restore(r,o)),vo(n,Go.NAVBAR_TOGGLER).forEach(o=>this.restore(r,o))}}let Ld;function vx(e){return Ld||(Ld=new Zx(e)),Ld}const CB=v.forwardRef(({className:e,bsPrefix:t,as:n="div",...l},r)=>(t=Oe(t,"modal-body"),c.jsx(n,{ref:r,className:we(e,t),...l})));CB.displayName="ModalBody";const Gx=CB,Bx=v.createContext({onHide(){}}),AB=Bx,mB=v.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:l,size:r,fullscreen:o,children:i,scrollable:a,...g},s)=>{e=Oe(e,"modal");const I=`${e}-dialog`,d=typeof o=="string"?`${e}-fullscreen-${o}`:`${e}-fullscreen`;return c.jsx("div",{...g,ref:s,className:we(I,t,r&&`${e}-${r}`,l&&`${I}-centered`,a&&`${I}-scrollable`,o&&d),children:c.jsx("div",{className:we(`${e}-content`,n),children:i})})});mB.displayName="ModalDialog";const hB=mB,fB=v.forwardRef(({className:e,bsPrefix:t,as:n="div",...l},r)=>(t=Oe(t,"modal-footer"),c.jsx(n,{ref:r,className:we(e,t),...l})));fB.displayName="ModalFooter";const Sx=fB,Vx=v.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:l,children:r,...o},i)=>{const a=v.useContext(AB),g=Zn(()=>{a==null||a.onHide(),l==null||l()});return c.jsxs("div",{ref:i,...o,children:[r,n&&c.jsx(U1,{"aria-label":e,variant:t,onClick:g})]})}),Wx=Vx,pB=v.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:l=!1,...r},o)=>(e=Oe(e,"modal-header"),c.jsx(Wx,{ref:o,...r,className:we(t,e),closeLabel:n,closeButton:l})));pB.displayName="ModalHeader";const bB=pB,Rx=E1("h4"),yB=v.forwardRef(({className:e,bsPrefix:t,as:n=Rx,...l},r)=>(t=Oe(t,"modal-title"),c.jsx(n,{ref:r,className:we(e,t),...l})));yB.displayName="ModalTitle";const wx=yB;function kx(e){return c.jsx(rc,{...e,timeout:null})}function Xx(e){return c.jsx(rc,{...e,timeout:null})}const ZB=v.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:l,contentClassName:r,children:o,dialogAs:i=hB,"data-bs-theme":a,"aria-labelledby":g,"aria-describedby":s,"aria-label":I,show:d=!1,animation:u=!0,backdrop:C=!0,keyboard:h=!0,onEscapeKeyDown:f,onShow:y,onHide:A,container:m,autoFocus:p=!0,enforceFocus:b=!0,restoreFocus:Z=!0,restoreFocusOptions:V,onEntered:S,onExit:G,onExiting:w,onEnter:B,onEntering:W,onExited:R,backdropClassName:k,manager:x,...H},M)=>{const[T,E]=v.useState({}),[N,J]=v.useState(!1),X=v.useRef(!1),Y=v.useRef(!1),F=v.useRef(null),[z,L]=S5(),K=oI(M,L),j=Zn(A),D=o5();e=Oe(e,"modal");const Q=v.useMemo(()=>({onHide:j}),[j]);function O(){return x||vx({isRTL:D})}function ne($){if(!yi)return;const fe=O().getScrollbarWidth()>0,ye=$.scrollHeight>rI($).documentElement.clientHeight;E({paddingRight:fe&&!ye?u0():void 0,paddingLeft:!fe&&ye?u0():void 0})}const oe=Zn(()=>{z&&ne(z.dialog)});P1(()=>{aA(window,"resize",oe),F.current==null||F.current()});const ae=()=>{X.current=!0},ce=$=>{X.current&&z&&$.target===z.dialog&&(Y.current=!0),X.current=!1},ie=()=>{J(!0),F.current=K1(z.dialog,()=>{J(!1)})},Ze=$=>{$.target===$.currentTarget&&ie()},ve=$=>{if(C==="static"){Ze($);return}if(Y.current||$.target!==$.currentTarget){Y.current=!1;return}A==null||A()},P=$=>{h?f==null||f($):($.preventDefault(),C==="static"&&ie())},q=($,fe)=>{$&&ne($),B==null||B($,fe)},te=$=>{F.current==null||F.current(),G==null||G($)},le=($,fe)=>{W==null||W($,fe),F1(window,"resize",oe)},_=$=>{$&&($.style.display=""),R==null||R($),aA(window,"resize",oe)},Ie=v.useCallback($=>c.jsx("div",{...$,className:we(`${e}-backdrop`,k,!u&&"show")}),[u,k,e]),Ae={...n,...T};Ae.display="block";const be=$=>c.jsx("div",{role:"dialog",...$,style:Ae,className:we(t,e,N&&`${e}-static`,!u&&"show"),onClick:C?ve:void 0,onMouseUp:ce,"data-bs-theme":a,"aria-label":I,"aria-labelledby":g,"aria-describedby":s,children:c.jsx(i,{...H,onMouseDown:ae,className:l,contentClassName:r,children:o})});return c.jsx(AB.Provider,{value:Q,children:c.jsx(fx,{show:d,ref:K,backdrop:C,container:m,keyboard:!0,autoFocus:p,enforceFocus:b,restoreFocus:Z,restoreFocusOptions:V,onEscapeKeyDown:P,onShow:y,onHide:A,onEnter:q,onEntering:le,onEntered:S,onExit:te,onExiting:w,onExited:_,manager:O(),transition:u?kx:void 0,backdropTransition:u?Xx:void 0,renderBackdrop:Ie,renderDialog:be})})});ZB.displayName="Modal";const vn=Object.assign(ZB,{Body:Gx,Header:bB,Title:wx,Footer:Sx,Dialog:hB,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),vB=v.forwardRef(({bsPrefix:e,className:t,as:n="div",...l},r)=>{const o=Oe(e,"row"),i=N1(),a=Y1(),g=`${o}-cols`,s=[];return i.forEach(I=>{const d=l[I];delete l[I];let u;d!=null&&typeof d=="object"?{cols:u}=d:u=d;const C=I!==a?`-${I}`:"";u!=null&&s.push(`${g}${C}-${u}`)}),c.jsx(n,{ref:r,...l,className:we(t,o,...s)})});vB.displayName="Row";const Re=vB;var GB={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ka=U.createContext&&U.createContext(GB),xx=["attr","size","title"];function Jx(e,t){if(e==null)return{};var n=Nx(e,t),l,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)l=o[r],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}function Nx(e,t){if(e==null)return{};var n={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(t.indexOf(l)>=0)continue;n[l]=e[l]}return n}function ic(){return ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},ic.apply(this,arguments)}function h0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,l)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h0(Object(n),!0).forEach(function(l){Yx(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h0(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function Yx(e,t,n){return t=Hx(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hx(e){var t=Fx(e,"string");return typeof t=="symbol"?t:t+""}function Fx(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var l=n.call(e,t||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BB(e){return e&&e.map((t,n)=>U.createElement(t.tag,ac({key:n},t.attr),BB(t.child)))}function Ce(e){return t=>U.createElement(Kx,ic({attr:ac({},e.attr)},t),BB(e.child))}function Kx(e){var t=n=>{var{attr:l,size:r,title:o}=e,i=Jx(e,xx),a=r||n.size||"1em",g;return n.className&&(g=n.className),e.className&&(g=(g?g+" ":"")+e.className),U.createElement("svg",ic({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,l,i,{className:g,style:ac(ac({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&U.createElement("title",null,o),e.children)};return Ka!==void 0?U.createElement(Ka.Consumer,null,n=>t(n)):t(GB)}function Ex(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"},child:[]}]})(e)}function Mx(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19.05 4.91A9.816 9.816 0 0 0 12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91 0-2.65-1.03-5.14-2.9-7.01zm-7.01 15.24c-1.48 0-2.93-.4-4.2-1.15l-.3-.18-3.12.82.83-3.04-.2-.31a8.264 8.264 0 0 1-1.26-4.38c0-4.54 3.7-8.24 8.24-8.24 2.2 0 4.27.86 5.82 2.42a8.183 8.183 0 0 1 2.41 5.83c.02 4.54-3.68 8.23-8.22 8.23zm4.52-6.16c-.25-.12-1.47-.72-1.69-.81-.23-.08-.39-.12-.56.12-.17.25-.64.81-.78.97-.14.17-.29.19-.54.06-.25-.12-1.05-.39-1.99-1.23-.74-.66-1.23-1.47-1.38-1.72-.14-.25-.02-.38.11-.51.11-.11.25-.29.37-.43s.17-.25.25-.41c.08-.17.04-.31-.02-.43s-.56-1.34-.76-1.84c-.2-.48-.41-.42-.56-.43h-.48c-.17 0-.43.06-.66.31-.22.25-.86.85-.86 2.07 0 1.22.89 2.4 1.01 2.56.12.17 1.75 2.67 4.23 3.74.59.26 1.05.41 1.41.52.59.19 1.13.16 1.56.1.48-.07 1.47-.6 1.67-1.18.21-.58.21-1.07.14-1.18s-.22-.16-.47-.28z"},child:[]}]})(e)}function SB(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"},child:[]}]})(e)}function Tx(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"},child:[]}]})(e)}function Lx(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm90.5 224H272v74.5c0 8.8-7.2 16-16 16-4.4 0-8.4-1.8-11.3-4.7-2.9-2.9-4.7-6.9-4.7-11.3V272h-74.5c-4.4 0-8.4-1.8-11.3-4.7-2.9-2.9-4.7-6.9-4.7-11.3 0-8.8 7.2-16 16-16H240v-74.5c0-8.8 7.2-16 16-16s16 7.2 16 16V240h74.5c8.8 0 16 7.2 16 16s-7.2 16-16 16z"},child:[]}]})(e)}function zx(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(e)}function jx(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216.4 163.7c5.1 5 5.1 13.3.1 18.4L155.8 243h231.3c7.1 0 12.9 5.8 12.9 13s-5.8 13-12.9 13H155.8l60.8 60.9c5 5.1 4.9 13.3-.1 18.4-5.1 5-13.2 5-18.3-.1l-82.4-83c-1.1-1.2-2-2.5-2.7-4.1-.7-1.6-1-3.3-1-5 0-3.4 1.3-6.6 3.7-9.1l82.4-83c4.9-5.2 13.1-5.3 18.2-.3z"},child:[]}]})(e)}function Ux(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z"},child:[]}]})(e)}function VB(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm143.3 263.9c-8.1-2.6-23.7-3.4-29.5-10.4-2.9-3.5-1-16.6-1-16.6 25.2-1.4 31-6.1 31-6.1 3.9-2.3 2.1-2.7.1-6.1-10.9-18.3-6-41.5-6.5-61.6-.4-16.7-4.8-35-20-44.4-7.6-4.7-19.7-6.9-31.4-6.9-9.5 0-18.7 1.4-25.3 4.1-42.4 17-17.4 73.2-31.9 105.4-2.5 5.4-6.1 7.3.2 10.5 0 0 7.5 4.4 28.9 6.3 0 0 .3 12.6 0 13.9-1.1 4.9-11.8 8.3-15.8 9.4-2.7.7-8.7 2.5-16.4 5.7-3.7 1.5-3.1 6.9.8 7.6 3.9.7 8.1 1.7 11.5 2.9 0 0 26.4 6 46 25 13.2 12.7 18.1 27.6 20 44.6.5 4.5-1.7 8.9-5.5 11.5l-5.7 3.6c-1.9 1.1-4.2-.2-4.3-2.4 0-29.5-17.8-55.5-45.8-65.2-13.5-4.7-28.1-5-41.6-9.7-4.1-1.4-12.2-3.1-13.9-7.8-1.6-4.6-1.6-10-1.9-14.8-.2-3.8-.3-7.6-.3-11.4 0-2.5 6.4-7.8 7.8-10.1 5.4-9 5.9-21.1 6.9-31.3 8.7 2.4 9.8-13.7 11.3-18.6 1.1-3.4 5-20.9-2.6-23.6 2.5-4.4 3.5-9.8 4.2-14.7 2-12.8 2.8-26.8-1.1-39.3-8.1-26-33-40.6-59.3-41.4-26.7-.9-53.5 11.9-63.5 37.8-4.8 12.6-4.4 26.3-2.8 39.5.7 6 1.7 12.7 4.7 18.1-6.4 2.8-4.5 17.7-3.4 21.3 1.6 5.1 3 23.4 12.1 20.9.8 8.1 1.7 16.4 3.9 24.3 1.5 5.3 4.6 9.8 8.2 13.9 1.8 2 2.7 2.2 2.6 4.8-.1 7.8.1 16.2-1.9 23.8s-18.7 10.8-25.4 12.2c-14.8 3-28.6 4.7-41.4 11.5C84.8 320.6 76 289 76 256c0-47.9 19.2-94 53.2-127.7C162.7 95 207.1 76.4 254.3 76c47.6-.4 93.7 18.1 127.8 51.5 34.8 34.1 54 79.9 54 128.5 0 24.9-5 48.9-14.5 71.1-5.6-7-13.4-12.3-22.3-15.2z"},child:[]}]})(e)}function Dx(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416.3 256c0-21 13.1-38.9 31.7-46.1-4.9-20.5-13-39.7-23.7-57.1-6.4 2.8-13.2 4.3-20.1 4.3-12.6 0-25.2-4.8-34.9-14.4-14.9-14.9-18.2-36.8-10.2-55-17.3-10.7-36.6-18.8-57-23.7C295 82.5 277 95.7 256 95.7S217 82.5 209.9 64c-20.5 4.9-39.7 13-57.1 23.7 8.1 18.1 4.7 40.1-10.2 55-9.6 9.6-22.3 14.4-34.9 14.4-6.9 0-13.7-1.4-20.1-4.3C77 170.3 68.9 189.5 64 210c18.5 7.1 31.7 25 31.7 46.1 0 21-13.1 38.9-31.6 46.1 4.9 20.5 13 39.7 23.7 57.1 6.4-2.8 13.2-4.2 20-4.2 12.6 0 25.2 4.8 34.9 14.4 14.8 14.8 18.2 36.8 10.2 54.9 17.4 10.7 36.7 18.8 57.1 23.7 7.1-18.5 25-31.6 46-31.6s38.9 13.1 46 31.6c20.5-4.9 39.7-13 57.1-23.7-8-18.1-4.6-40 10.2-54.9 9.6-9.6 22.2-14.4 34.9-14.4 6.8 0 13.7 1.4 20 4.2 10.7-17.4 18.8-36.7 23.7-57.1-18.4-7.2-31.6-25.1-31.6-46.2zm-159.4 79.9c-44.3 0-80-35.9-80-80s35.7-80 80-80 80 35.9 80 80-35.7 80-80 80z"},child:[]}]})(e)}function Qx(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M261 149.3V64H48v384h416V149.3H261zm-127.8 256H90.6v-42.7h42.6v42.7zm0-85.3H90.6v-42.7h42.6V320zm0-85.3H90.6V192h42.6v42.7zm0-85.4H90.6v-42.7h42.6v42.7zm85.2 256h-42.6v-42.7h42.6v42.7zm0-85.3h-42.6v-42.7h42.6V320zm0-85.3h-42.6V192h42.6v42.7zm0-85.4h-42.6v-42.7h42.6v42.7zm203 256H261v-42.7h42.6V320H261v-42.7h42.6v-42.7H261V192h160.4v213.3zm-37.6-170.6h-42.6v42.7h42.6v-42.7zm0 85.3h-42.6v42.7h42.6V320z"},child:[]}]})(e)}function Px(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422s-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256s17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]},{tag:"path",attr:{d:"M360 330.9L330.9 360 256 285.1 181.1 360 152 330.9l74.9-74.9-74.9-74.9 29.1-29.1 74.9 74.9 74.9-74.9 29.1 29.1-74.9 74.9z"},child:[]}]})(e)}function Ox(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(e)}function _x(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M239.208 343.937c-17.78 10.103-38.342 15.876-60.255 15.876-21.909 0-42.467-5.771-60.246-15.87C71.544 358.331 42.643 406 32 448h293.912c-10.639-42-39.537-89.683-86.704-104.063zM178.953 120.035c-58.479 0-105.886 47.394-105.886 105.858 0 58.464 47.407 105.857 105.886 105.857s105.886-47.394 105.886-105.857c0-58.464-47.408-105.858-105.886-105.858zm0 186.488c-33.671 0-62.445-22.513-73.997-50.523H252.95c-11.554 28.011-40.326 50.523-73.997 50.523z"},child:[]},{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M322.602 384H480c-10.638-42-39.537-81.691-86.703-96.072-17.781 10.104-38.343 15.873-60.256 15.873-14.823 0-29.024-2.654-42.168-7.49-7.445 12.47-16.927 25.592-27.974 34.906C289.245 341.354 309.146 364 322.602 384zM306.545 200h100.493c-11.554 28-40.327 50.293-73.997 50.293-8.875 0-17.404-1.692-25.375-4.51a128.411 128.411 0 0 1-6.52 25.118c10.066 3.174 20.779 4.862 31.895 4.862 58.479 0 105.886-47.41 105.886-105.872 0-58.465-47.407-105.866-105.886-105.866-37.49 0-70.427 19.703-89.243 49.09C275.607 131.383 298.961 163 306.545 200z"},child:[]}]}]})(e)}function sA(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M249.2 224c-14.2-40.2-55.1-72-100.2-72-57.2 0-101 46.8-101 104s45.8 104 103 104c45.1 0 84.1-31.8 98.2-72H352v64h69.1v-64H464v-64H249.2zm-97.6 66.5c-19 0-34.5-15.5-34.5-34.5s15.5-34.5 34.5-34.5 34.5 15.5 34.5 34.5-15.5 34.5-34.5 34.5z"},child:[]}]})(e)}function qx(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(e)}function Ih(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function WB(e){return Ce({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(e)}function RB(e){return Ce({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function dh(e){return Ce({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function wB(e){return Ce({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"},child:[]}]})(e)}function kB(e){return Ce({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(e)}function XB(e){return Ce({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"},child:[]}]})(e)}function uh(e){return Ce({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(e)}function xB(e){return Ce({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(e)}function $x(e){return Ce({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-352 96c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm112 236.8c0 10.6-10 19.2-22.4 19.2H86.4C74 384 64 375.4 64 364.8v-19.2c0-31.8 30.1-57.6 67.2-57.6h5c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h5c37.1 0 67.2 25.8 67.2 57.6v19.2zM512 312c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-64c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-64c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function Ch(e){return Ce({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function eJ(e){return Ce({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function so(e){return Ce({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function co(e){return Ce({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function f0(e){return Ce({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function tJ(e){return Ce({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function Ah(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(e)}function nJ(e){return Ce({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}const Br=(e={})=>{const[t,n]=v.useState(e);return{...t,formState:t,onInputChange:({target:g})=>{const{name:s,value:I}=g;n({...t,[s]:I})},onResetForm:()=>{n(e)},onCheckBoxChange:({target:g})=>{const{name:s,value:I,checked:d}=g;n({...t,[s]:d})},updateForm:g=>{n({...g})},onMultiInputChange:g=>{for(const{target:s}of g){const{name:I,value:d}=s;n({...t,[I]:d})}}}};function JB(e,t){return function(){return e.apply(t,arguments)}}const{toString:lJ}=Object.prototype,{getPrototypeOf:mh}=Object,iI=(e=>t=>{const n=lJ.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),rl=e=>(e=e.toLowerCase(),t=>iI(t)===e),aI=e=>t=>typeof t===e,{isArray:Zi}=Array,Ea=aI("undefined");function rJ(e){return e!==null&&!Ea(e)&&e.constructor!==null&&!Ea(e.constructor)&&Sn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const NB=rl("ArrayBuffer");function oJ(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&NB(e.buffer),t}const iJ=aI("string"),Sn=aI("function"),YB=aI("number"),gI=e=>e!==null&&typeof e=="object",aJ=e=>e===!0||e===!1,fs=e=>{if(iI(e)!=="object")return!1;const t=mh(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gJ=rl("Date"),sJ=rl("File"),cJ=rl("Blob"),IJ=rl("FileList"),dJ=e=>gI(e)&&Sn(e.pipe),uJ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Sn(e.append)&&((t=iI(e))==="formdata"||t==="object"&&Sn(e.toString)&&e.toString()==="[object FormData]"))},CJ=rl("URLSearchParams"),AJ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function eg(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let l,r;if(typeof e!="object"&&(e=[e]),Zi(e))for(l=0,r=e.length;l<r;l++)t.call(null,e[l],l,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(l=0;l<i;l++)a=o[l],t.call(null,e[a],a,e)}}function HB(e,t){t=t.toLowerCase();const n=Object.keys(e);let l=n.length,r;for(;l-- >0;)if(r=n[l],t===r.toLowerCase())return r;return null}const FB=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),KB=e=>!Ea(e)&&e!==FB;function cA(){const{caseless:e}=KB(this)&&this||{},t={},n=(l,r)=>{const o=e&&HB(t,r)||r;fs(t[o])&&fs(l)?t[o]=cA(t[o],l):fs(l)?t[o]=cA({},l):Zi(l)?t[o]=l.slice():t[o]=l};for(let l=0,r=arguments.length;l<r;l++)arguments[l]&&eg(arguments[l],n);return t}const mJ=(e,t,n,{allOwnKeys:l}={})=>(eg(t,(r,o)=>{n&&Sn(r)?e[o]=JB(r,n):e[o]=r},{allOwnKeys:l}),e),hJ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),fJ=(e,t,n,l)=>{e.prototype=Object.create(t.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},pJ=(e,t,n,l)=>{let r,o,i;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)i=r[o],(!l||l(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&mh(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},bJ=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const l=e.indexOf(t,n);return l!==-1&&l===n},yJ=e=>{if(!e)return null;if(Zi(e))return e;let t=e.length;if(!YB(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},ZJ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&mh(Uint8Array)),vJ=(e,t)=>{const l=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=l.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},GJ=(e,t)=>{let n;const l=[];for(;(n=e.exec(t))!==null;)l.push(n);return l},BJ=rl("HTMLFormElement"),SJ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,l,r){return l.toUpperCase()+r}),p0=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),VJ=rl("RegExp"),EB=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),l={};eg(n,(r,o)=>{let i;(i=t(r,o,e))!==!1&&(l[o]=i||r)}),Object.defineProperties(e,l)},WJ=e=>{EB(e,(t,n)=>{if(Sn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const l=e[n];if(Sn(l)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},RJ=(e,t)=>{const n={},l=r=>{r.forEach(o=>{n[o]=!0})};return Zi(e)?l(e):l(String(e).split(t)),n},wJ=()=>{},kJ=(e,t)=>(e=+e,Number.isFinite(e)?e:t),zd="abcdefghijklmnopqrstuvwxyz",b0="0123456789",MB={DIGIT:b0,ALPHA:zd,ALPHA_DIGIT:zd+zd.toUpperCase()+b0},XJ=(e=16,t=MB.ALPHA_DIGIT)=>{let n="";const{length:l}=t;for(;e--;)n+=t[Math.random()*l|0];return n};function xJ(e){return!!(e&&Sn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const JJ=e=>{const t=new Array(10),n=(l,r)=>{if(gI(l)){if(t.indexOf(l)>=0)return;if(!("toJSON"in l)){t[r]=l;const o=Zi(l)?[]:{};return eg(l,(i,a)=>{const g=n(i,r+1);!Ea(g)&&(o[a]=g)}),t[r]=void 0,o}}return l};return n(e,0)},NJ=rl("AsyncFunction"),YJ=e=>e&&(gI(e)||Sn(e))&&Sn(e.then)&&Sn(e.catch),ee={isArray:Zi,isArrayBuffer:NB,isBuffer:rJ,isFormData:uJ,isArrayBufferView:oJ,isString:iJ,isNumber:YB,isBoolean:aJ,isObject:gI,isPlainObject:fs,isUndefined:Ea,isDate:gJ,isFile:sJ,isBlob:cJ,isRegExp:VJ,isFunction:Sn,isStream:dJ,isURLSearchParams:CJ,isTypedArray:ZJ,isFileList:IJ,forEach:eg,merge:cA,extend:mJ,trim:AJ,stripBOM:hJ,inherits:fJ,toFlatObject:pJ,kindOf:iI,kindOfTest:rl,endsWith:bJ,toArray:yJ,forEachEntry:vJ,matchAll:GJ,isHTMLForm:BJ,hasOwnProperty:p0,hasOwnProp:p0,reduceDescriptors:EB,freezeMethods:WJ,toObjectSet:RJ,toCamelCase:SJ,noop:wJ,toFiniteNumber:kJ,findKey:HB,global:FB,isContextDefined:KB,ALPHABET:MB,generateString:XJ,isSpecCompliantForm:xJ,toJSONObject:JJ,isAsyncFn:NJ,isThenable:YJ};function Ve(e,t,n,l,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),l&&(this.request=l),r&&(this.response=r)}ee.inherits(Ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const TB=Ve.prototype,LB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{LB[e]={value:e}});Object.defineProperties(Ve,LB);Object.defineProperty(TB,"isAxiosError",{value:!0});Ve.from=(e,t,n,l,r,o)=>{const i=Object.create(TB);return ee.toFlatObject(e,i,function(g){return g!==Error.prototype},a=>a!=="isAxiosError"),Ve.call(i,e.message,t,n,l,r),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const HJ=null;function IA(e){return ee.isPlainObject(e)||ee.isArray(e)}function zB(e){return ee.endsWith(e,"[]")?e.slice(0,-2):e}function y0(e,t,n){return e?e.concat(t).map(function(r,o){return r=zB(r),!n&&o?"["+r+"]":r}).join(n?".":""):t}function FJ(e){return ee.isArray(e)&&!e.some(IA)}const KJ=ee.toFlatObject(ee,{},null,function(t){return/^is[A-Z]/.test(t)});function sI(e,t,n){if(!ee.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ee.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,y){return!ee.isUndefined(y[f])});const l=n.metaTokens,r=n.visitor||I,o=n.dots,i=n.indexes,g=(n.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(t);if(!ee.isFunction(r))throw new TypeError("visitor must be a function");function s(h){if(h===null)return"";if(ee.isDate(h))return h.toISOString();if(!g&&ee.isBlob(h))throw new Ve("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(h)||ee.isTypedArray(h)?g&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function I(h,f,y){let A=h;if(h&&!y&&typeof h=="object"){if(ee.endsWith(f,"{}"))f=l?f:f.slice(0,-2),h=JSON.stringify(h);else if(ee.isArray(h)&&FJ(h)||(ee.isFileList(h)||ee.endsWith(f,"[]"))&&(A=ee.toArray(h)))return f=zB(f),A.forEach(function(p,b){!(ee.isUndefined(p)||p===null)&&t.append(i===!0?y0([f],b,o):i===null?f:f+"[]",s(p))}),!1}return IA(h)?!0:(t.append(y0(y,f,o),s(h)),!1)}const d=[],u=Object.assign(KJ,{defaultVisitor:I,convertValue:s,isVisitable:IA});function C(h,f){if(!ee.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+f.join("."));d.push(h),ee.forEach(h,function(A,m){(!(ee.isUndefined(A)||A===null)&&r.call(t,A,ee.isString(m)?m.trim():m,f,u))===!0&&C(A,f?f.concat(m):[m])}),d.pop()}}if(!ee.isObject(e))throw new TypeError("data must be an object");return C(e),t}function Z0(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return t[l]})}function hh(e,t){this._pairs=[],e&&sI(e,this,t)}const jB=hh.prototype;jB.append=function(t,n){this._pairs.push([t,n])};jB.toString=function(t){const n=t?function(l){return t.call(this,l,Z0)}:Z0;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function EJ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function UB(e,t,n){if(!t)return e;const l=n&&n.encode||EJ,r=n&&n.serialize;let o;if(r?o=r(t,n):o=ee.isURLSearchParams(t)?t.toString():new hh(t,n).toString(l),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class MJ{constructor(){this.handlers=[]}use(t,n,l){return this.handlers.push({fulfilled:t,rejected:n,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ee.forEach(this.handlers,function(l){l!==null&&t(l)})}}const v0=MJ,DB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},TJ=typeof URLSearchParams<"u"?URLSearchParams:hh,LJ=typeof FormData<"u"?FormData:null,zJ=typeof Blob<"u"?Blob:null,jJ={isBrowser:!0,classes:{URLSearchParams:TJ,FormData:LJ,Blob:zJ},protocols:["http","https","file","blob","url","data"]},QB=typeof window<"u"&&typeof document<"u",UJ=(e=>QB&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),DJ=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),QJ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:QB,hasStandardBrowserEnv:UJ,hasStandardBrowserWebWorkerEnv:DJ},Symbol.toStringTag,{value:"Module"})),_n={...QJ,...jJ};function PJ(e,t){return sI(e,new _n.classes.URLSearchParams,Object.assign({visitor:function(n,l,r,o){return _n.isNode&&ee.isBuffer(n)?(this.append(l,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function OJ(e){return ee.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function _J(e){const t={},n=Object.keys(e);let l;const r=n.length;let o;for(l=0;l<r;l++)o=n[l],t[o]=e[o];return t}function PB(e){function t(n,l,r,o){let i=n[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),g=o>=n.length;return i=!i&&ee.isArray(r)?r.length:i,g?(ee.hasOwnProp(r,i)?r[i]=[r[i],l]:r[i]=l,!a):((!r[i]||!ee.isObject(r[i]))&&(r[i]=[]),t(n,l,r[i],o)&&ee.isArray(r[i])&&(r[i]=_J(r[i])),!a)}if(ee.isFormData(e)&&ee.isFunction(e.entries)){const n={};return ee.forEachEntry(e,(l,r)=>{t(OJ(l),r,n,0)}),n}return null}function qJ(e,t,n){if(ee.isString(e))try{return(t||JSON.parse)(e),ee.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(n||JSON.stringify)(e)}const fh={transitional:DB,adapter:["xhr","http"],transformRequest:[function(t,n){const l=n.getContentType()||"",r=l.indexOf("application/json")>-1,o=ee.isObject(t);if(o&&ee.isHTMLForm(t)&&(t=new FormData(t)),ee.isFormData(t))return r&&r?JSON.stringify(PB(t)):t;if(ee.isArrayBuffer(t)||ee.isBuffer(t)||ee.isStream(t)||ee.isFile(t)||ee.isBlob(t))return t;if(ee.isArrayBufferView(t))return t.buffer;if(ee.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(l.indexOf("application/x-www-form-urlencoded")>-1)return PJ(t,this.formSerializer).toString();if((a=ee.isFileList(t))||l.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return sI(a?{"files[]":t}:t,g&&new g,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),qJ(t)):t}],transformResponse:[function(t){const n=this.transitional||fh.transitional,l=n&&n.forcedJSONParsing,r=this.responseType==="json";if(t&&ee.isString(t)&&(l&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?Ve.from(a,Ve.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_n.classes.FormData,Blob:_n.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],e=>{fh.headers[e]={}});const ph=fh,$J=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eN=e=>{const t={};let n,l,r;return e&&e.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),l=i.substring(r+1).trim(),!(!n||t[n]&&$J[n])&&(n==="set-cookie"?t[n]?t[n].push(l):t[n]=[l]:t[n]=t[n]?t[n]+", "+l:l)}),t},G0=Symbol("internals");function Li(e){return e&&String(e).trim().toLowerCase()}function ps(e){return e===!1||e==null?e:ee.isArray(e)?e.map(ps):String(e)}function tN(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=n.exec(e);)t[l[1]]=l[2];return t}const nN=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function jd(e,t,n,l,r){if(ee.isFunction(l))return l.call(this,t,n);if(r&&(t=n),!!ee.isString(t)){if(ee.isString(l))return t.indexOf(l)!==-1;if(ee.isRegExp(l))return l.test(t)}}function lN(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,l)=>n.toUpperCase()+l)}function rN(e,t){const n=ee.toCamelCase(" "+t);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+n,{value:function(r,o,i){return this[l].call(this,t,r,o,i)},configurable:!0})})}class cI{constructor(t){t&&this.set(t)}set(t,n,l){const r=this;function o(a,g,s){const I=Li(g);if(!I)throw new Error("header name must be a non-empty string");const d=ee.findKey(r,I);(!d||r[d]===void 0||s===!0||s===void 0&&r[d]!==!1)&&(r[d||g]=ps(a))}const i=(a,g)=>ee.forEach(a,(s,I)=>o(s,I,g));return ee.isPlainObject(t)||t instanceof this.constructor?i(t,n):ee.isString(t)&&(t=t.trim())&&!nN(t)?i(eN(t),n):t!=null&&o(n,t,l),this}get(t,n){if(t=Li(t),t){const l=ee.findKey(this,t);if(l){const r=this[l];if(!n)return r;if(n===!0)return tN(r);if(ee.isFunction(n))return n.call(this,r,l);if(ee.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Li(t),t){const l=ee.findKey(this,t);return!!(l&&this[l]!==void 0&&(!n||jd(this,this[l],l,n)))}return!1}delete(t,n){const l=this;let r=!1;function o(i){if(i=Li(i),i){const a=ee.findKey(l,i);a&&(!n||jd(l,l[a],a,n))&&(delete l[a],r=!0)}}return ee.isArray(t)?t.forEach(o):o(t),r}clear(t){const n=Object.keys(this);let l=n.length,r=!1;for(;l--;){const o=n[l];(!t||jd(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const n=this,l={};return ee.forEach(this,(r,o)=>{const i=ee.findKey(l,o);if(i){n[i]=ps(r),delete n[o];return}const a=t?lN(o):String(o).trim();a!==o&&delete n[o],n[a]=ps(r),l[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ee.forEach(this,(l,r)=>{l!=null&&l!==!1&&(n[r]=t&&ee.isArray(l)?l.join(", "):l)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const l=new this(t);return n.forEach(r=>l.set(r)),l}static accessor(t){const l=(this[G0]=this[G0]={accessors:{}}).accessors,r=this.prototype;function o(i){const a=Li(i);l[a]||(rN(r,i),l[a]=!0)}return ee.isArray(t)?t.forEach(o):o(t),this}}cI.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(cI.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(l){this[n]=l}}});ee.freezeMethods(cI);const hl=cI;function Ud(e,t){const n=this||ph,l=t||n,r=hl.from(l.headers);let o=l.data;return ee.forEach(e,function(a){o=a.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function OB(e){return!!(e&&e.__CANCEL__)}function tg(e,t,n){Ve.call(this,e??"canceled",Ve.ERR_CANCELED,t,n),this.name="CanceledError"}ee.inherits(tg,Ve,{__CANCEL__:!0});function oN(e,t,n){const l=n.config.validateStatus;!n.status||!l||l(n.status)?e(n):t(new Ve("Request failed with status code "+n.status,[Ve.ERR_BAD_REQUEST,Ve.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const iN=_n.hasStandardBrowserEnv?{write(e,t,n,l,r,o){const i=[e+"="+encodeURIComponent(t)];ee.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),ee.isString(l)&&i.push("path="+l),ee.isString(r)&&i.push("domain="+r),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function aN(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function gN(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function _B(e,t){return e&&!aN(t)?gN(e,t):t}const sN=_n.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let l;function r(o){let i=o;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return l=r(window.location.href),function(i){const a=ee.isString(i)?r(i):i;return a.protocol===l.protocol&&a.host===l.host}}():function(){return function(){return!0}}();function cN(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function IN(e,t){e=e||10;const n=new Array(e),l=new Array(e);let r=0,o=0,i;return t=t!==void 0?t:1e3,function(g){const s=Date.now(),I=l[o];i||(i=s),n[r]=g,l[r]=s;let d=o,u=0;for(;d!==r;)u+=n[d++],d=d%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),s-i<t)return;const C=I&&s-I;return C?Math.round(u*1e3/C):void 0}}function B0(e,t){let n=0;const l=IN(50,250);return r=>{const o=r.loaded,i=r.lengthComputable?r.total:void 0,a=o-n,g=l(a),s=o<=i;n=o;const I={loaded:o,total:i,progress:i?o/i:void 0,bytes:a,rate:g||void 0,estimated:g&&i&&s?(i-o)/g:void 0,event:r};I[t?"download":"upload"]=!0,e(I)}}const dN=typeof XMLHttpRequest<"u",uN=dN&&function(e){return new Promise(function(n,l){let r=e.data;const o=hl.from(e.headers).normalize();let{responseType:i,withXSRFToken:a}=e,g;function s(){e.cancelToken&&e.cancelToken.unsubscribe(g),e.signal&&e.signal.removeEventListener("abort",g)}let I;if(ee.isFormData(r)){if(_n.hasStandardBrowserEnv||_n.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((I=o.getContentType())!==!1){const[f,...y]=I?I.split(";").map(A=>A.trim()).filter(Boolean):[];o.setContentType([f||"multipart/form-data",...y].join("; "))}}let d=new XMLHttpRequest;if(e.auth){const f=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(f+":"+y))}const u=_B(e.baseURL,e.url);d.open(e.method.toUpperCase(),UB(u,e.params,e.paramsSerializer),!0),d.timeout=e.timeout;function C(){if(!d)return;const f=hl.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),A={data:!i||i==="text"||i==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:f,config:e,request:d};oN(function(p){n(p),s()},function(p){l(p),s()},A),d=null}if("onloadend"in d?d.onloadend=C:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(C)},d.onabort=function(){d&&(l(new Ve("Request aborted",Ve.ECONNABORTED,e,d)),d=null)},d.onerror=function(){l(new Ve("Network Error",Ve.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let y=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const A=e.transitional||DB;e.timeoutErrorMessage&&(y=e.timeoutErrorMessage),l(new Ve(y,A.clarifyTimeoutError?Ve.ETIMEDOUT:Ve.ECONNABORTED,e,d)),d=null},_n.hasStandardBrowserEnv&&(a&&ee.isFunction(a)&&(a=a(e)),a||a!==!1&&sN(u))){const f=e.xsrfHeaderName&&e.xsrfCookieName&&iN.read(e.xsrfCookieName);f&&o.set(e.xsrfHeaderName,f)}r===void 0&&o.setContentType(null),"setRequestHeader"in d&&ee.forEach(o.toJSON(),function(y,A){d.setRequestHeader(A,y)}),ee.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),i&&i!=="json"&&(d.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&d.addEventListener("progress",B0(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",B0(e.onUploadProgress)),(e.cancelToken||e.signal)&&(g=f=>{d&&(l(!f||f.type?new tg(null,e,d):f),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(g),e.signal&&(e.signal.aborted?g():e.signal.addEventListener("abort",g)));const h=cN(u);if(h&&_n.protocols.indexOf(h)===-1){l(new Ve("Unsupported protocol "+h+":",Ve.ERR_BAD_REQUEST,e));return}d.send(r||null)})},dA={http:HJ,xhr:uN};ee.forEach(dA,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const S0=e=>`- ${e}`,CN=e=>ee.isFunction(e)||e===null||e===!1,qB={getAdapter:e=>{e=ee.isArray(e)?e:[e];const{length:t}=e;let n,l;const r={};for(let o=0;o<t;o++){n=e[o];let i;if(l=n,!CN(n)&&(l=dA[(i=String(n)).toLowerCase()],l===void 0))throw new Ve(`Unknown adapter '${i}'`);if(l)break;r[i||"#"+o]=l}if(!l){const o=Object.entries(r).map(([a,g])=>`adapter ${a} `+(g===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(S0).join(`
`):" "+S0(o[0]):"as no adapter specified";throw new Ve("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return l},adapters:dA};function Dd(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tg(null,e)}function V0(e){return Dd(e),e.headers=hl.from(e.headers),e.data=Ud.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),qB.getAdapter(e.adapter||ph.adapter)(e).then(function(l){return Dd(e),l.data=Ud.call(e,e.transformResponse,l),l.headers=hl.from(l.headers),l},function(l){return OB(l)||(Dd(e),l&&l.response&&(l.response.data=Ud.call(e,e.transformResponse,l.response),l.response.headers=hl.from(l.response.headers))),Promise.reject(l)})}const W0=e=>e instanceof hl?e.toJSON():e;function gi(e,t){t=t||{};const n={};function l(s,I,d){return ee.isPlainObject(s)&&ee.isPlainObject(I)?ee.merge.call({caseless:d},s,I):ee.isPlainObject(I)?ee.merge({},I):ee.isArray(I)?I.slice():I}function r(s,I,d){if(ee.isUndefined(I)){if(!ee.isUndefined(s))return l(void 0,s,d)}else return l(s,I,d)}function o(s,I){if(!ee.isUndefined(I))return l(void 0,I)}function i(s,I){if(ee.isUndefined(I)){if(!ee.isUndefined(s))return l(void 0,s)}else return l(void 0,I)}function a(s,I,d){if(d in t)return l(s,I);if(d in e)return l(void 0,s)}const g={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(s,I)=>r(W0(s),W0(I),!0)};return ee.forEach(Object.keys(Object.assign({},e,t)),function(I){const d=g[I]||r,u=d(e[I],t[I],I);ee.isUndefined(u)&&d!==a||(n[I]=u)}),n}const $B="1.6.5",bh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{bh[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});const R0={};bh.transitional=function(t,n,l){function r(o,i){return"[Axios v"+$B+"] Transitional option '"+o+"'"+i+(l?". "+l:"")}return(o,i,a)=>{if(t===!1)throw new Ve(r(i," has been removed"+(n?" in "+n:"")),Ve.ERR_DEPRECATED);return n&&!R0[i]&&(R0[i]=!0,console.warn(r(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,a):!0}};function AN(e,t,n){if(typeof e!="object")throw new Ve("options must be an object",Ve.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let r=l.length;for(;r-- >0;){const o=l[r],i=t[o];if(i){const a=e[o],g=a===void 0||i(a,o,e);if(g!==!0)throw new Ve("option "+o+" must be "+g,Ve.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ve("Unknown option "+o,Ve.ERR_BAD_OPTION)}}const uA={assertOptions:AN,validators:bh},Jl=uA.validators;class gc{constructor(t){this.defaults=t,this.interceptors={request:new v0,response:new v0}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=gi(this.defaults,n);const{transitional:l,paramsSerializer:r,headers:o}=n;l!==void 0&&uA.assertOptions(l,{silentJSONParsing:Jl.transitional(Jl.boolean),forcedJSONParsing:Jl.transitional(Jl.boolean),clarifyTimeoutError:Jl.transitional(Jl.boolean)},!1),r!=null&&(ee.isFunction(r)?n.paramsSerializer={serialize:r}:uA.assertOptions(r,{encode:Jl.function,serialize:Jl.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&ee.merge(o.common,o[n.method]);o&&ee.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),n.headers=hl.concat(i,o);const a=[];let g=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(g=g&&f.synchronous,a.unshift(f.fulfilled,f.rejected))});const s=[];this.interceptors.response.forEach(function(f){s.push(f.fulfilled,f.rejected)});let I,d=0,u;if(!g){const h=[V0.bind(this),void 0];for(h.unshift.apply(h,a),h.push.apply(h,s),u=h.length,I=Promise.resolve(n);d<u;)I=I.then(h[d++],h[d++]);return I}u=a.length;let C=n;for(d=0;d<u;){const h=a[d++],f=a[d++];try{C=h(C)}catch(y){f.call(this,y);break}}try{I=V0.call(this,C)}catch(h){return Promise.reject(h)}for(d=0,u=s.length;d<u;)I=I.then(s[d++],s[d++]);return I}getUri(t){t=gi(this.defaults,t);const n=_B(t.baseURL,t.url);return UB(n,t.params,t.paramsSerializer)}}ee.forEach(["delete","get","head","options"],function(t){gc.prototype[t]=function(n,l){return this.request(gi(l||{},{method:t,url:n,data:(l||{}).data}))}});ee.forEach(["post","put","patch"],function(t){function n(l){return function(o,i,a){return this.request(gi(a||{},{method:t,headers:l?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}gc.prototype[t]=n(),gc.prototype[t+"Form"]=n(!0)});const bs=gc;class yh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const l=this;this.promise.then(r=>{if(!l._listeners)return;let o=l._listeners.length;for(;o-- >0;)l._listeners[o](r);l._listeners=null}),this.promise.then=r=>{let o;const i=new Promise(a=>{l.subscribe(a),o=a}).then(r);return i.cancel=function(){l.unsubscribe(o)},i},t(function(o,i,a){l.reason||(l.reason=new tg(o,i,a),n(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new yh(function(r){t=r}),cancel:t}}}const mN=yh;function hN(e){return function(n){return e.apply(null,n)}}function fN(e){return ee.isObject(e)&&e.isAxiosError===!0}const CA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(CA).forEach(([e,t])=>{CA[t]=e});const pN=CA;function e2(e){const t=new bs(e),n=JB(bs.prototype.request,t);return ee.extend(n,bs.prototype,t,{allOwnKeys:!0}),ee.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return e2(gi(e,r))},n}const at=e2(ph);at.Axios=bs;at.CanceledError=tg;at.CancelToken=mN;at.isCancel=OB;at.VERSION=$B;at.toFormData=sI;at.AxiosError=Ve;at.Cancel=at.CanceledError;at.all=function(t){return Promise.all(t)};at.spread=hN;at.isAxiosError=fN;at.mergeConfig=gi;at.AxiosHeaders=hl;at.formToJSON=e=>PB(ee.isHTMLForm(e)?new FormData(e):e);at.getAdapter=qB.getAdapter;at.HttpStatusCode=pN;at.default=at;const pe=at;function bN(e,{insertAt:t}={}){if(!e||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css",t==="top"&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}bN(`html[dir=ltr],[data-sonner-toaster][dir=ltr]{--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}html[dir=rtl],[data-sonner-toaster][dir=rtl]{--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toast][data-theme=dark] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=info],[data-rich-colors=true] [data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true] [data-sonner-toast][data-type=warning],[data-rich-colors=true] [data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);var yN=e=>{switch(e){case"success":return GN;case"info":return SN;case"warning":return BN;case"error":return VN;default:return null}},ZN=Array(12).fill(0),vN=({visible:e})=>U.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},U.createElement("div",{className:"sonner-spinner"},ZN.map((t,n)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),GN=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),BN=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),SN=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),VN=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),AA=1,WN=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;let{message:l,...r}=t,o=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:AA++,i=this.toasts.find(g=>g.id===o),a=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(g=>g.id===o?(this.publish({...g,...t,id:o,title:l}),{...g,...t,id:o,dismissible:a,title:l}):g):this.addToast({title:l,...r,dismissible:a,id:o}),o},this.dismiss=t=>(t||this.toasts.forEach(n=>{this.subscribers.forEach(l=>l({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:t,dismiss:!0})),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let l;n.loading!==void 0&&(l=this.create({...n,promise:t,type:"loading",message:n.loading}));let r=t instanceof Promise?t:t(),o=l!==void 0;return r.then(i=>{if(i&&typeof i.ok=="boolean"&&!i.ok){o=!1;let a=typeof n.error=="function"?n.error(`HTTP error! status: ${i.status}`):n.error;this.create({id:l,type:"error",message:a})}else if(n.success!==void 0){o=!1;let a=typeof n.success=="function"?n.success(i):n.success;this.create({id:l,type:"success",message:a})}}).catch(i=>{if(n.error!==void 0){o=!1;let a=typeof n.error=="function"?n.error(i):n.error;this.create({id:l,type:"error",message:a})}}).finally(()=>{var i;o&&(this.dismiss(l),l=void 0),(i=n.finally)==null||i.call(n)}),l},this.custom=(t,n)=>{let l=(n==null?void 0:n.id)||AA++;return this.create({jsx:t(l),id:l,...n}),l},this.subscribers=[],this.toasts=[]}},kn=new WN,RN=(e,t)=>{let n=(t==null?void 0:t.id)||AA++;return kn.addToast({title:e,...t,id:n}),n},wN=RN,Ge=Object.assign(wN,{success:kn.success,info:kn.info,warning:kn.warning,error:kn.error,custom:kn.custom,message:kn.message,promise:kn.promise,dismiss:kn.dismiss,loading:kn.loading}),kN=3,XN="32px",xN=4e3,JN=356,t2=14,NN=20,YN=200;function Bo(...e){return e.filter(Boolean).join(" ")}var HN=e=>{var t,n,l,r,o,i,a;let{invert:g,toast:s,unstyled:I,interacting:d,setHeights:u,visibleToasts:C,heights:h,index:f,toasts:y,expanded:A,removeToast:m,closeButton:p,style:b,cancelButtonStyle:Z,actionButtonStyle:V,className:S="",descriptionClassName:G="",duration:w,position:B,gap:W=t2,loadingIcon:R,expandByDefault:k,classNames:x,closeButtonAriaLabel:H="Close toast"}=e,[M,T]=U.useState(!1),[E,N]=U.useState(!1),[J,X]=U.useState(!1),[Y,F]=U.useState(!1),[z,L]=U.useState(0),[K,j]=U.useState(0),D=U.useRef(null),Q=U.useRef(null),O=f===0,ne=f+1<=C,oe=s.type,ae=s.dismissible!==!1,ce=s.className||"",ie=s.descriptionClassName||"",Ze=U.useMemo(()=>h.findIndex(de=>de.toastId===s.id)||0,[h,s.id]),ve=U.useMemo(()=>s.duration||w||xN,[s.duration,w]),P=U.useRef(0),q=U.useRef(0);U.useRef(ve);let te=U.useRef(0),le=U.useRef(null),[_,Ie]=B.split("-"),Ae=U.useMemo(()=>h.reduce((de,he,Se)=>Se>=Ze?de:de+he.height,0),[h,Ze]),be=s.invert||g,$=oe==="loading";q.current=U.useMemo(()=>Ze*W+Ae,[Ze,Ae]),U.useEffect(()=>{T(!0)},[]),U.useLayoutEffect(()=>{if(!M)return;let de=Q.current,he=de.style.height;de.style.height="auto";let Se=de.getBoundingClientRect().height;de.style.height=he,j(Se),u(Zt=>Zt.find(kt=>kt.toastId===s.id)?Zt.map(kt=>kt.toastId===s.id?{...kt,height:Se}:kt):[{toastId:s.id,height:Se},...Zt])},[M,s.title,s.description,u,s.id]);let fe=U.useCallback(()=>{N(!0),L(q.current),u(de=>de.filter(he=>he.toastId!==s.id)),setTimeout(()=>{m(s)},YN)},[s,m,u,q]);U.useEffect(()=>{if(s.promise&&oe==="loading"||s.duration===1/0)return;let de,he=ve;return A||d?(()=>{if(te.current<P.current){let Se=new Date().getTime()-P.current;he=he-Se}te.current=new Date().getTime()})():(P.current=new Date().getTime(),de=setTimeout(()=>{var Se;(Se=s.onAutoClose)==null||Se.call(s,s),fe()},he)),()=>clearTimeout(de)},[A,d,k,s,ve,fe,s.promise,oe]),U.useEffect(()=>{let de=Q.current;if(de){let he=de.getBoundingClientRect().height;return j(he),u(Se=>[{toastId:s.id,height:he},...Se]),()=>u(Se=>Se.filter(Zt=>Zt.toastId!==s.id))}},[u,s.id]),U.useEffect(()=>{s.delete&&fe()},[fe,s.delete]);function ye(){return R?U.createElement("div",{className:"loader","data-visible":oe==="loading"},R):U.createElement(vN,{visible:oe==="loading"})}return U.createElement("li",{"aria-live":s.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Q,className:Bo(S,ce,x==null?void 0:x.toast,(t=s==null?void 0:s.classNames)==null?void 0:t.toast,x==null?void 0:x[oe],(n=s==null?void 0:s.classNames)==null?void 0:n[oe]),"data-sonner-toast":"","data-styled":!(s.jsx||s.unstyled||I),"data-mounted":M,"data-promise":!!s.promise,"data-removed":E,"data-visible":ne,"data-y-position":_,"data-x-position":Ie,"data-index":f,"data-front":O,"data-swiping":J,"data-dismissible":ae,"data-type":oe,"data-invert":be,"data-swipe-out":Y,"data-expanded":!!(A||k&&M),style:{"--index":f,"--toasts-before":f,"--z-index":y.length-f,"--offset":`${E?z:q.current}px`,"--initial-height":k?"auto":`${K}px`,...b,...s.style},onPointerDown:de=>{$||!ae||(D.current=new Date,L(q.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(X(!0),le.current={x:de.clientX,y:de.clientY}))},onPointerUp:()=>{var de,he,Se,Zt;if(Y||!ae)return;le.current=null;let kt=Number(((de=Q.current)==null?void 0:de.style.getPropertyValue("--swipe-amount").replace("px",""))||0),zn=new Date().getTime()-((he=D.current)==null?void 0:he.getTime()),xe=Math.abs(kt)/zn;if(Math.abs(kt)>=NN||xe>.11){L(q.current),(Se=s.onDismiss)==null||Se.call(s,s),fe(),F(!0);return}(Zt=Q.current)==null||Zt.style.setProperty("--swipe-amount","0px"),X(!1)},onPointerMove:de=>{var he;if(!le.current||!ae)return;let Se=de.clientY-le.current.y,Zt=de.clientX-le.current.x,kt=(_==="top"?Math.min:Math.max)(0,Se),zn=de.pointerType==="touch"?10:2;Math.abs(kt)>zn?(he=Q.current)==null||he.style.setProperty("--swipe-amount",`${Se}px`):Math.abs(Zt)>zn&&(le.current=null)}},p&&!s.jsx?U.createElement("button",{"aria-label":H,"data-disabled":$,"data-close-button":!0,onClick:$||!ae?()=>{}:()=>{var de;fe(),(de=s.onDismiss)==null||de.call(s,s)},className:Bo(x==null?void 0:x.closeButton,(l=s==null?void 0:s.classNames)==null?void 0:l.closeButton)},U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,s.jsx||U.isValidElement(s.title)?s.jsx||s.title:U.createElement(U.Fragment,null,oe||s.icon||s.promise?U.createElement("div",{"data-icon":""},(s.promise||s.type==="loading")&&!s.icon?ye():null,s.icon||yN(oe)):null,U.createElement("div",{"data-content":""},U.createElement("div",{"data-title":"",className:Bo(x==null?void 0:x.title,(r=s==null?void 0:s.classNames)==null?void 0:r.title)},s.title),s.description?U.createElement("div",{"data-description":"",className:Bo(G,ie,x==null?void 0:x.description,(o=s==null?void 0:s.classNames)==null?void 0:o.description)},s.description):null),s.cancel?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:s.cancelButtonStyle||Z,onClick:()=>{var de;ae&&(fe(),(de=s.cancel)!=null&&de.onClick&&s.cancel.onClick())},className:Bo(x==null?void 0:x.cancelButton,(i=s==null?void 0:s.classNames)==null?void 0:i.cancelButton)},s.cancel.label):null,s.action?U.createElement("button",{"data-button":"",style:s.actionButtonStyle||V,onClick:de=>{var he;(he=s.action)==null||he.onClick(de),!de.defaultPrevented&&fe()},className:Bo(x==null?void 0:x.actionButton,(a=s==null?void 0:s.classNames)==null?void 0:a.actionButton)},s.action.label):null))};function w0(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var In=e=>{let{invert:t,position:n="bottom-right",hotkey:l=["altKey","KeyT"],expand:r,closeButton:o,className:i,offset:a,theme:g="light",richColors:s,duration:I,style:d,visibleToasts:u=kN,toastOptions:C,dir:h=w0(),gap:f,loadingIcon:y,containerAriaLabel:A="Notifications"}=e,[m,p]=U.useState([]),b=U.useMemo(()=>Array.from(new Set([n].concat(m.filter(E=>E.position).map(E=>E.position)))),[m,n]),[Z,V]=U.useState([]),[S,G]=U.useState(!1),[w,B]=U.useState(!1),[W,R]=U.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),k=U.useRef(null),x=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=U.useRef(null),M=U.useRef(!1),T=U.useCallback(E=>p(N=>N.filter(({id:J})=>J!==E.id)),[]);return U.useEffect(()=>kn.subscribe(E=>{if(E.dismiss){p(N=>N.map(J=>J.id===E.id?{...J,delete:!0}:J));return}setTimeout(()=>{Or.flushSync(()=>{p(N=>{let J=N.findIndex(X=>X.id===E.id);return J!==-1?[...N.slice(0,J),{...N[J],...E},...N.slice(J+1)]:[E,...N]})})})}),[]),U.useEffect(()=>{if(g!=="system"){R(g);return}g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:E})=>{R(E?"dark":"light")})},[g]),U.useEffect(()=>{m.length<=1&&G(!1)},[m]),U.useEffect(()=>{let E=N=>{var J,X;l.every(Y=>N[Y]||N.code===Y)&&(G(!0),(J=k.current)==null||J.focus()),N.code==="Escape"&&(document.activeElement===k.current||(X=k.current)!=null&&X.contains(document.activeElement))&&G(!1)};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[l]),U.useEffect(()=>{if(k.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,M.current=!1)}},[k.current]),m.length?U.createElement("section",{"aria-label":`${A} ${x}`,tabIndex:-1},b.map((E,N)=>{var J;let[X,Y]=E.split("-");return U.createElement("ol",{key:E,dir:h==="auto"?w0():h,tabIndex:-1,ref:k,className:i,"data-sonner-toaster":!0,"data-theme":W,"data-rich-colors":s,"data-y-position":X,"data-x-position":Y,style:{"--front-toast-height":`${(J=Z[0])==null?void 0:J.height}px`,"--offset":typeof a=="number"?`${a}px`:a||XN,"--width":`${JN}px`,"--gap":`${t2}px`,...d},onBlur:F=>{M.current&&!F.currentTarget.contains(F.relatedTarget)&&(M.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||M.current||(M.current=!0,H.current=F.relatedTarget)},onMouseEnter:()=>G(!0),onMouseMove:()=>G(!0),onMouseLeave:()=>{w||G(!1)},onPointerDown:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},m.filter(F=>!F.position&&N===0||F.position===E).map((F,z)=>{var L;return U.createElement(HN,{key:F.id,index:z,toast:F,duration:(L=C==null?void 0:C.duration)!=null?L:I,className:C==null?void 0:C.className,descriptionClassName:C==null?void 0:C.descriptionClassName,invert:t,visibleToasts:u,closeButton:o,interacting:w,position:E,style:C==null?void 0:C.style,unstyled:C==null?void 0:C.unstyled,classNames:C==null?void 0:C.classNames,cancelButtonStyle:C==null?void 0:C.cancelButtonStyle,actionButtonStyle:C==null?void 0:C.actionButtonStyle,removeToast:T,toasts:m,heights:Z,setHeights:V,expandByDefault:r,gap:f,loadingIcon:y,expanded:S})}))})):null};const Sr=()=>{const e="https://api.knowmeapp.com";return{createUser:async g=>{const s=new Promise(async(I,d)=>{pe.post(`${e}/api/auth/new`,g).then(u=>(u.error==null?I(u):d(u.error.response.data.msg),u),u=>(d(u.response.data.msg),u))});return Ge.promise(s,{loading:"Creando usuario...",success:I=>"Usuario creado exitosamente",error:I=>I}),await s},login:async g=>await pe.post(`${e}/api/auth/`,g),renewToken:async g=>{const s=localStorage.getItem("token");return s==null?{status:500}:await pe.get(`${e}/api/auth/renew`,{headers:{"x-token":s}})},validateUser:async g=>{const s=new Promise(async(I,d)=>{pe.post(`${e}/api/auth/validate`,g).then(u=>(u.error==null?u.data.msg!="Usuario vlido"?d(u.data.msg):I(u):d(u.error.response.data.msg),u),u=>(d(u.response.data.msg),u))});return Ge.promise(s,{loading:"Validando usuario...",success:I=>(console.log(I.data.msg),"Usuario vlido"),error:I=>I}),await s},createUserByInvitation:async(g,s)=>{const I=localStorage.getItem("token"),d=await pe.post(`${e}/api/auth/user-by-invitation`,g,{headers:{"x-token":I}});if(d.data.ok){const{id:u}=d.data,C={id_organization_fk:s,id_user_fk:u,owner:parseInt(g.id_plan_fk)==9};await pe.post(`${e}/api/org_users_detail`,C,{headers:{"x-token":I}})}return d},addPlan:async(g,s,I)=>await pe.put(`${e}/api/auth/addplan/${g}`,s,{headers:{"x-token":I}}),changePassword:async g=>{const s=localStorage.getItem("token");return await pe.post(`${e}/api/auth/change`,g,{headers:{"x-token":s}})}}};var n2={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.cssValue=si.parseLengthAndUnit=void 0;var FN={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function l2(e){if(typeof e=="number")return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();n.includes(".")?t=parseFloat(n):t=parseInt(n,10);var l=(e.match(/[^0-9]*$/)||"").toString();return FN[l]?{value:t,unit:l}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}si.parseLengthAndUnit=l2;function KN(e){var t=l2(e);return"".concat(t.value).concat(t.unit)}si.cssValue=KN;var II={};Object.defineProperty(II,"__esModule",{value:!0});II.createAnimation=void 0;var EN=function(e,t,n){var l="react-spinners-".concat(e,"-").concat(n);if(typeof window>"u"||!window.document)return l;var r=document.createElement("style");document.head.appendChild(r);var o=r.sheet,i=`
    @keyframes `.concat(l,` {
      `).concat(t,`
    }
  `);return o&&o.insertRule(i,0),l};II.createAnimation=EN;var sc=Ue&&Ue.__assign||function(){return sc=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},sc.apply(this,arguments)},MN=Ue&&Ue.__createBinding||(Object.create?function(e,t,n,l){l===void 0&&(l=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,l,r)}:function(e,t,n,l){l===void 0&&(l=n),e[l]=t[n]}),TN=Ue&&Ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),LN=Ue&&Ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&MN(t,e,n);return TN(t,e),t},zN=Ue&&Ue.__rest||function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]]);return n};Object.defineProperty(n2,"__esModule",{value:!0});var jN=LN(v),k0=si,UN=II,DN=(0,UN.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function QN(e){var t=e.loading,n=t===void 0?!0:t,l=e.color,r=l===void 0?"#000000":l,o=e.speedMultiplier,i=o===void 0?1:o,a=e.cssOverride,g=a===void 0?{}:a,s=e.size,I=s===void 0?35:s,d=zN(e,["loading","color","speedMultiplier","cssOverride","size"]),u=sc({background:"transparent !important",width:(0,k0.cssValue)(I),height:(0,k0.cssValue)(I),borderRadius:"100%",border:"2px solid",borderTopColor:r,borderBottomColor:"transparent",borderLeftColor:r,borderRightColor:r,display:"inline-block",animation:"".concat(DN," ").concat(.75/i,"s 0s infinite linear"),animationFillMode:"both"},g);return n?jN.createElement("span",sc({style:u},d)):null}var PN=n2.default=QN;const Zh=()=>c.jsx("div",{className:"spinner-modal",children:c.jsx("div",{children:c.jsx(PN,{color:"#597393",size:150})})}),yt=v.createContext({user:{}});function ON(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm-7.5 12a2.5 2.5 0 1 1 0-5 2.47 2.47 0 0 1 1.5.512c-.604.456-1 1.173-1 1.988s.396 1.532 1 1.988a2.47 2.47 0 0 1-1.5.512zm4 0a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}const dI=()=>c.jsx(c.Fragment,{children:c.jsx("div",{className:"footer-main",children:c.jsxs("div",{className:"footer-container",children:[c.jsxs("div",{className:"footer-title",children:[c.jsxs("h3",{children:[" ",c.jsxs("a",{href:"https://www.knowmeapp.com/",target:"_blank",rel:"noopener noreferrer",children:["Know Me"," "]})]}),c.jsxs("p",{children:["Made with  by"," ",c.jsx("a",{href:"https://www.inxeniux.com/",target:"_blank",rel:"noopener noreferrer",children:"INXENIUX"})]})]}),c.jsxs("div",{className:"footer-socials",children:[c.jsx("div",{children:c.jsx(Ih,{className:"footer-icon"})}),c.jsx("div",{children:c.jsx(uh,{className:"footer-icon"})}),c.jsx("div",{children:c.jsx(dh,{className:"footer-icon"})})]})]})})});const _N={email:"",password:""},qN=()=>{const[e,t]=v.useState(!1),[n,l]=v.useState(!1),r=It(),{formState:o,onInputChange:i,onResetForm:a}=Br(_N),{user:g}=v.useContext(yt),s=Sr(),I=()=>{t(!e)},d=async()=>{l(!0);try{const C=await s.login(o);if(C.status==200){l(!1);const{email:h,fullname:f,id:y,id_plan_fk:A,username:m,token:p,is_superuser:b}=C.data;g.email=h,g.fullname=f,g.id=y,g.id_plan_fk=A,g.username=m,localStorage.setItem("token",p),localStorage.setItem("fullname",f),localStorage.setItem("email",h),localStorage.setItem("id_plan",A),localStorage.setItem("is_superuser",b),C.data.paymentInfo.completed==!1?(Ge.info("El pago del plan no se ha completado, asignado plan bsico, hasta que se efectue el pago."),setTimeout(()=>{r("/home")},2e3)):r("/home")}}catch{Ge.error("Error al iniciar sesin"),l(!1)}},u=26;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"login-view",children:[n&&c.jsx(Zh,{}),c.jsx(In,{richColors:!0,position:"top-right"}),c.jsxs("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:[c.jsxs(Re,{children:[c.jsx(se,{}),c.jsx(se,{xs:10,md:6,children:c.jsxs("div",{className:"login-card",children:[c.jsx(bi,{src:rh,beforeInjection:C=>{C.classList.add("login-logo")},className:"cursor-pointer",onClick:()=>{r("/")}}),c.jsx("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-white",children:"Inicia sesin"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-white",children:"Correo electrnico"}),c.jsxs("div",{className:"mt-2 flex items-center",children:[c.jsx(SB,{size:u,color:"#FFFFFF",className:"w-10 mr-2"}),c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-orange-600 sm:text-sm sm:leading-6 bg-white px-2",onChange:i,placeholder:"correo electrnico"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-white",children:"Contrasea"}),c.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[c.jsx(sA,{size:u,color:"#FFFFFF",className:"w-10 mr-3"}),c.jsx("input",{id:"password",name:"password",type:e?"text":"password",autoComplete:"current-password",required:!0,value:o.password,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-orange-600 sm:text-sm sm:leading-6 bg-white px-2",onChange:i,placeholder:"contrasea"}),e?c.jsx(so,{size:u,color:"#ffffff",className:"cursor-pointer text-white mx-4",onClick:I}):c.jsx(co,{size:u,color:"#ffffff",className:"cursor-pointer text-white mx-4",onClick:I})]})]}),c.jsx("div",{className:"text-sm flex justify-end my-3",children:c.jsx("span",{className:"font-semibold text-orange-400 hover:text-white cursor-pointer",onClick:()=>{r("/forgot/")},children:"Olvidaste tu contrasea?"})}),c.jsx(et,{className:"flex w-full justify-center rounded-md bg-orange-500 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 border-hidden",onClick:d,children:"Iniciar sesin"})]})}),c.jsx(se,{})]}),c.jsxs(Re,{className:"login-register",children:[c.jsx(se,{xs:12,md:12,children:"No tienes una cuenta?"}),c.jsx(se,{xs:12,md:12,children:c.jsx("span",{onClick:()=>{r("/registro")},children:"Regstrate"})})]})]})]}),c.jsx(dI,{})]})};const $N={nombre:"",apellido:"",email:"",password:"",confirmacion:"",consent:!1,terms:!1},eY=()=>{const[e,t]=v.useState(!1),[n,l]=v.useState(!1),r=It(),{formState:o,onInputChange:i,onResetForm:a,onCheckBoxChange:g}=Br($N),s=()=>{t(!e)},I=async()=>{if(Object.values(o).includes("")||o.terms==!1||o.password!=o.confirmacion)l(!0);else try{const C={name:o.nombre,lastname:o.apellido,email:o.email,password:o.password,mailing_status:o.consent,terms_policies_status:o.terms};r("/plan",{state:{user:o}})}catch{}},d=26;return c.jsxs("div",{className:"register-view",children:[c.jsx(Ch,{className:"registro-back",size:33,color:"#FD6202",onClick:()=>{r("/login")}}),c.jsxs(Re,{children:[c.jsx(se,{}),c.jsx(se,{xs:10,md:6,children:c.jsxs("div",{className:"registro-card",children:[c.jsx("h3",{children:"Registro de sesin"}),c.jsx("h6",{children:"Crea tu cuenta de Know me"}),c.jsx("div",{className:`registro-data ${n&&o.nombre==""?"required-value":""}`,children:c.jsx("input",{type:"text",className:"registro-input",placeholder:"Nombre(s)*",onChange:i,value:o.nombre,name:"nombre"})}),c.jsx("div",{className:`registro-data ${n&&o.apellido==""?"required-value":""}`,children:c.jsx("input",{type:"text",className:"registro-input",placeholder:"Apellido(s)*",onChange:i,value:o.apellido,name:"apellido"})}),c.jsxs("div",{className:`login-email ${n&&o.email==""?"required-value":""}`,children:[c.jsx(SB,{size:d,color:"#F18805"}),c.jsx("input",{type:"text",className:"login-email-input",placeholder:"correo electrnico",onChange:i,value:o.email,name:"email"})]}),c.jsxs("div",{className:`login-password ${n&&o.password==""?"required-value":""}`,children:[c.jsx(sA,{size:d,color:"#F18805"}),c.jsx("input",{type:e?"text":"password",className:"login-email-input",placeholder:"Contrasea*",onChange:i,value:o.password,name:"password"}),e?c.jsx(co,{size:d,color:"#FFFFFF",className:"eye-icon",onClick:s}):c.jsx(so,{size:d,color:"#FFFFFF",className:"eye-icon",onClick:s})]}),c.jsxs("div",{className:`login-password ${n&&o.confirmacion==""?"required-value":""}`,children:[c.jsx(sA,{size:d,color:"#F18805"}),c.jsx("input",{type:e?"text":"password",className:"login-email-input",placeholder:"Confirmar*",onChange:i,value:o.confirmacion,name:"confirmacion"}),e?c.jsx(co,{size:d,color:"#FFFFFF",className:"eye-icon",onClick:s}):c.jsx(so,{size:d,color:"#FFFFFF",className:"eye-icon",onClick:s})]}),c.jsxs(Re,{className:"check-box-option",children:[c.jsx(se,{xs:1,children:c.jsx("input",{type:"checkbox",onChange:g,checked:o.consent,name:"consent"})}),c.jsx(se,{children:c.jsx("span",{children:"Doy mi consentimiento y acepto recibir informacin sobre los servicios y novedades de Know me."})})]}),c.jsxs(Re,{className:"check-box-option",children:[c.jsx(se,{xs:1,children:c.jsx("input",{type:"checkbox",onChange:g,checked:o.terms,name:"terms"})}),c.jsx(se,{children:c.jsx("span",{children:"Al crear la cuenta de usuario aceptas los terminos y condiciones del servicio de Know me, y reconoces que has ledo nuestras polticas de privacidad."})})]}),n&&c.jsx(T5,{variant:"danger",className:"registro-alert",children:o.terms==!1?"Es necesario aceptar terminos y condiciones":"Favor de rellenar los campos marcados en rojo y asegurarse que las contraseas coincidan"}),c.jsx(et,{className:"registro-btn",onClick:I,children:"Crear cuenta"})]})}),c.jsx(se,{})]}),c.jsx(In,{position:"top-center",richColors:!0})]})};function X0(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function vh(e,t){e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(t).forEach(n=>{typeof e[n]>"u"?e[n]=t[n]:X0(t[n])&&X0(e[n])&&Object.keys(t[n]).length>0&&vh(e[n],t[n])})}const r2={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function vi(){const e=typeof document<"u"?document:{};return vh(e,r2),e}const tY={document:r2,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function dn(){const e=typeof window<"u"?window:{};return vh(e,tY),e}function nY(e){return e===void 0&&(e=""),e.trim().split(" ").filter(t=>!!t.trim())}function lY(e){const t=e;Object.keys(t).forEach(n=>{try{t[n]=null}catch{}try{delete t[n]}catch{}})}function mA(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function cc(){return Date.now()}function rY(e){const t=dn();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}function oY(e,t){t===void 0&&(t="x");const n=dn();let l,r,o;const i=rY(e);return n.WebKitCSSMatrix?(r=i.transform||i.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),o=new n.WebKitCSSMatrix(r==="none"?"":r)):(o=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),l=o.toString().split(",")),t==="x"&&(n.WebKitCSSMatrix?r=o.m41:l.length===16?r=parseFloat(l[12]):r=parseFloat(l[4])),t==="y"&&(n.WebKitCSSMatrix?r=o.m42:l.length===16?r=parseFloat(l[13]):r=parseFloat(l[5])),r||0}function Ng(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function iY(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function _t(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const l=n<0||arguments.length<=n?void 0:arguments[n];if(l!=null&&!iY(l)){const r=Object.keys(Object(l)).filter(o=>t.indexOf(o)<0);for(let o=0,i=r.length;o<i;o+=1){const a=r[o],g=Object.getOwnPropertyDescriptor(l,a);g!==void 0&&g.enumerable&&(Ng(e[a])&&Ng(l[a])?l[a].__swiper__?e[a]=l[a]:_t(e[a],l[a]):!Ng(e[a])&&Ng(l[a])?(e[a]={},l[a].__swiper__?e[a]=l[a]:_t(e[a],l[a])):e[a]=l[a])}}}return e}function Yg(e,t,n){e.style.setProperty(t,n)}function o2(e){let{swiper:t,targetPosition:n,side:l}=e;const r=dn(),o=-t.translate;let i=null,a;const g=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const s=n>o?"next":"prev",I=(u,C)=>s==="next"&&u>=C||s==="prev"&&u<=C,d=()=>{a=new Date().getTime(),i===null&&(i=a);const u=Math.max(Math.min((a-i)/g,1),0),C=.5-Math.cos(u*Math.PI)/2;let h=o+C*(n-o);if(I(h,n)&&(h=n),t.wrapperEl.scrollTo({[l]:h}),I(h,n)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[l]:h})}),r.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=r.requestAnimationFrame(d)};d()}function qn(e,t){return t===void 0&&(t=""),[...e.children].filter(n=>n.matches(t))}function Ic(e){try{console.warn(e);return}catch{}}function dc(e,t){t===void 0&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:nY(t)),n}function aY(e,t){const n=[];for(;e.previousElementSibling;){const l=e.previousElementSibling;t?l.matches(t)&&n.push(l):n.push(l),e=l}return n}function gY(e,t){const n=[];for(;e.nextElementSibling;){const l=e.nextElementSibling;t?l.matches(t)&&n.push(l):n.push(l),e=l}return n}function Pl(e,t){return dn().getComputedStyle(e,null).getPropertyValue(t)}function uc(e){let t=e,n;if(t){for(n=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(n+=1);return n}}function i2(e,t){const n=[];let l=e.parentElement;for(;l;)t?l.matches(t)&&n.push(l):n.push(l),l=l.parentElement;return n}function hA(e,t,n){const l=dn();return n?e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(l.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(l.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom")):e.offsetWidth}function al(e){return(Array.isArray(e)?e:[e]).filter(t=>!!t)}let Qd;function sY(){const e=dn(),t=vi();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function a2(){return Qd||(Qd=sY()),Qd}let Pd;function cY(e){let{userAgent:t}=e===void 0?{}:e;const n=a2(),l=dn(),r=l.navigator.platform,o=t||l.navigator.userAgent,i={ios:!1,android:!1},a=l.screen.width,g=l.screen.height,s=o.match(/(Android);?[\s\/]+([\d.]+)?/);let I=o.match(/(iPad).*OS\s([\d_]+)/);const d=o.match(/(iPod)(.*OS\s([\d_]+))?/),u=!I&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),C=r==="Win32";let h=r==="MacIntel";const f=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!I&&h&&n.touch&&f.indexOf(`${a}x${g}`)>=0&&(I=o.match(/(Version)\/([\d.]+)/),I||(I=[0,1,"13_0_0"]),h=!1),s&&!C&&(i.os="android",i.android=!0),(I||u||d)&&(i.os="ios",i.ios=!0),i}function g2(e){return e===void 0&&(e={}),Pd||(Pd=cY(e)),Pd}let Od;function IY(){const e=dn(),t=g2();let n=!1;function l(){const a=e.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(l()){const a=String(e.navigator.userAgent);if(a.includes("Version/")){const[g,s]=a.split("Version/")[1].split(" ")[0].split(".").map(I=>Number(I));n=g<16||g===16&&s<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),o=l(),i=o||r&&t.ios;return{isSafari:n||o,needPerspectiveFix:n,need3dFix:i,isWebView:r}}function dY(){return Od||(Od=IY()),Od}function uY(e){let{swiper:t,on:n,emit:l}=e;const r=dn();let o=null,i=null;const a=()=>{!t||t.destroyed||!t.initialized||(l("beforeResize"),l("resize"))},g=()=>{!t||t.destroyed||!t.initialized||(o=new ResizeObserver(d=>{i=r.requestAnimationFrame(()=>{const{width:u,height:C}=t;let h=u,f=C;d.forEach(y=>{let{contentBoxSize:A,contentRect:m,target:p}=y;p&&p!==t.el||(h=m?m.width:(A[0]||A).inlineSize,f=m?m.height:(A[0]||A).blockSize)}),(h!==u||f!==C)&&a()})}),o.observe(t.el))},s=()=>{i&&r.cancelAnimationFrame(i),o&&o.unobserve&&t.el&&(o.unobserve(t.el),o=null)},I=()=>{!t||t.destroyed||!t.initialized||l("orientationchange")};n("init",()=>{if(t.params.resizeObserver&&typeof r.ResizeObserver<"u"){g();return}r.addEventListener("resize",a),r.addEventListener("orientationchange",I)}),n("destroy",()=>{s(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",I)})}function CY(e){let{swiper:t,extendParams:n,on:l,emit:r}=e;const o=[],i=dn(),a=function(I,d){d===void 0&&(d={});const u=i.MutationObserver||i.WebkitMutationObserver,C=new u(h=>{if(t.__preventObserver__)return;if(h.length===1){r("observerUpdate",h[0]);return}const f=function(){r("observerUpdate",h[0])};i.requestAnimationFrame?i.requestAnimationFrame(f):i.setTimeout(f,0)});C.observe(I,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),o.push(C)},g=()=>{if(t.params.observer){if(t.params.observeParents){const I=i2(t.hostEl);for(let d=0;d<I.length;d+=1)a(I[d])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}},s=()=>{o.forEach(I=>{I.disconnect()}),o.splice(0,o.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),l("init",g),l("destroy",s)}var AY={on(e,t,n){const l=this;if(!l.eventsListeners||l.destroyed||typeof t!="function")return l;const r=n?"unshift":"push";return e.split(" ").forEach(o=>{l.eventsListeners[o]||(l.eventsListeners[o]=[]),l.eventsListeners[o][r](t)}),l},once(e,t,n){const l=this;if(!l.eventsListeners||l.destroyed||typeof t!="function")return l;function r(){l.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t.apply(l,i)}return r.__emitterProxy=t,l.on(e,r,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const l=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[l](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||e.split(" ").forEach(l=>{typeof t>"u"?n.eventsListeners[l]=[]:n.eventsListeners[l]&&n.eventsListeners[l].forEach((r,o)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[l].splice(o,1)})}),n},emit(){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,n,l;for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return typeof o[0]=="string"||Array.isArray(o[0])?(t=o[0],n=o.slice(1,o.length),l=e):(t=o[0].events,n=o[0].data,l=o[0].context||e),n.unshift(l),(Array.isArray(t)?t:t.split(" ")).forEach(g=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(s=>{s.apply(l,[g,...n])}),e.eventsListeners&&e.eventsListeners[g]&&e.eventsListeners[g].forEach(s=>{s.apply(l,n)})}),e}};function mY(){const e=this;let t,n;const l=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=l.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?n=e.params.height:n=l.clientHeight,!(t===0&&e.isHorizontal()||n===0&&e.isVertical())&&(t=t-parseInt(Pl(l,"padding-left")||0,10)-parseInt(Pl(l,"padding-right")||0,10),n=n-parseInt(Pl(l,"padding-top")||0,10)-parseInt(Pl(l,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))}function hY(){const e=this;function t(B,W){return parseFloat(B.getPropertyValue(e.getDirectionLabel(W))||0)}const n=e.params,{wrapperEl:l,slidesEl:r,size:o,rtlTranslate:i,wrongRTL:a}=e,g=e.virtual&&n.virtual.enabled,s=g?e.virtual.slides.length:e.slides.length,I=qn(r,`.${e.params.slideClass}, swiper-slide`),d=g?e.virtual.slides.length:I.length;let u=[];const C=[],h=[];let f=n.slidesOffsetBefore;typeof f=="function"&&(f=n.slidesOffsetBefore.call(e));let y=n.slidesOffsetAfter;typeof y=="function"&&(y=n.slidesOffsetAfter.call(e));const A=e.snapGrid.length,m=e.slidesGrid.length;let p=n.spaceBetween,b=-f,Z=0,V=0;if(typeof o>"u")return;typeof p=="string"&&p.indexOf("%")>=0?p=parseFloat(p.replace("%",""))/100*o:typeof p=="string"&&(p=parseFloat(p)),e.virtualSize=-p,I.forEach(B=>{i?B.style.marginLeft="":B.style.marginRight="",B.style.marginBottom="",B.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Yg(l,"--swiper-centered-offset-before",""),Yg(l,"--swiper-centered-offset-after",""));const S=n.grid&&n.grid.rows>1&&e.grid;S?e.grid.initSlides(I):e.grid&&e.grid.unsetSlides();let G;const w=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(B=>typeof n.breakpoints[B].slidesPerView<"u").length>0;for(let B=0;B<d;B+=1){G=0;let W;if(I[B]&&(W=I[B]),S&&e.grid.updateSlide(B,W,I),!(I[B]&&Pl(W,"display")==="none")){if(n.slidesPerView==="auto"){w&&(I[B].style[e.getDirectionLabel("width")]="");const R=getComputedStyle(W),k=W.style.transform,x=W.style.webkitTransform;if(k&&(W.style.transform="none"),x&&(W.style.webkitTransform="none"),n.roundLengths)G=e.isHorizontal()?hA(W,"width",!0):hA(W,"height",!0);else{const H=t(R,"width"),M=t(R,"padding-left"),T=t(R,"padding-right"),E=t(R,"margin-left"),N=t(R,"margin-right"),J=R.getPropertyValue("box-sizing");if(J&&J==="border-box")G=H+E+N;else{const{clientWidth:X,offsetWidth:Y}=W;G=H+M+T+E+N+(Y-X)}}k&&(W.style.transform=k),x&&(W.style.webkitTransform=x),n.roundLengths&&(G=Math.floor(G))}else G=(o-(n.slidesPerView-1)*p)/n.slidesPerView,n.roundLengths&&(G=Math.floor(G)),I[B]&&(I[B].style[e.getDirectionLabel("width")]=`${G}px`);I[B]&&(I[B].swiperSlideSize=G),h.push(G),n.centeredSlides?(b=b+G/2+Z/2+p,Z===0&&B!==0&&(b=b-o/2-p),B===0&&(b=b-o/2-p),Math.abs(b)<1/1e3&&(b=0),n.roundLengths&&(b=Math.floor(b)),V%n.slidesPerGroup===0&&u.push(b),C.push(b)):(n.roundLengths&&(b=Math.floor(b)),(V-Math.min(e.params.slidesPerGroupSkip,V))%e.params.slidesPerGroup===0&&u.push(b),C.push(b),b=b+G+p),e.virtualSize+=G+p,Z=G,V+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+y,i&&a&&(n.effect==="slide"||n.effect==="coverflow")&&(l.style.width=`${e.virtualSize+p}px`),n.setWrapperSize&&(l.style[e.getDirectionLabel("width")]=`${e.virtualSize+p}px`),S&&e.grid.updateWrapperSize(G,u),!n.centeredSlides){const B=[];for(let W=0;W<u.length;W+=1){let R=u[W];n.roundLengths&&(R=Math.floor(R)),u[W]<=e.virtualSize-o&&B.push(R)}u=B,Math.floor(e.virtualSize-o)-Math.floor(u[u.length-1])>1&&u.push(e.virtualSize-o)}if(g&&n.loop){const B=h[0]+p;if(n.slidesPerGroup>1){const W=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),R=B*n.slidesPerGroup;for(let k=0;k<W;k+=1)u.push(u[u.length-1]+R)}for(let W=0;W<e.virtual.slidesBefore+e.virtual.slidesAfter;W+=1)n.slidesPerGroup===1&&u.push(u[u.length-1]+B),C.push(C[C.length-1]+B),e.virtualSize+=B}if(u.length===0&&(u=[0]),p!==0){const B=e.isHorizontal()&&i?"marginLeft":e.getDirectionLabel("marginRight");I.filter((W,R)=>!n.cssMode||n.loop?!0:R!==I.length-1).forEach(W=>{W.style[B]=`${p}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let B=0;h.forEach(R=>{B+=R+(p||0)}),B-=p;const W=B-o;u=u.map(R=>R<=0?-f:R>W?W+y:R)}if(n.centerInsufficientSlides){let B=0;if(h.forEach(W=>{B+=W+(p||0)}),B-=p,B<o){const W=(o-B)/2;u.forEach((R,k)=>{u[k]=R-W}),C.forEach((R,k)=>{C[k]=R+W})}}if(Object.assign(e,{slides:I,snapGrid:u,slidesGrid:C,slidesSizesGrid:h}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Yg(l,"--swiper-centered-offset-before",`${-u[0]}px`),Yg(l,"--swiper-centered-offset-after",`${e.size/2-h[h.length-1]/2}px`);const B=-e.snapGrid[0],W=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(R=>R+B),e.slidesGrid=e.slidesGrid.map(R=>R+W)}if(d!==s&&e.emit("slidesLengthChange"),u.length!==A&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),C.length!==m&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!g&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const B=`${n.containerModifierClass}backface-hidden`,W=e.el.classList.contains(B);d<=n.maxBackfaceHiddenSlides?W||e.el.classList.add(B):W&&e.el.classList.remove(B)}}function fY(e){const t=this,n=[],l=t.virtual&&t.params.virtual.enabled;let r=0,o;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const i=a=>l?t.slides[t.getSlideIndexByData(a)]:t.slides[a];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(a=>{n.push(a)});else for(o=0;o<Math.ceil(t.params.slidesPerView);o+=1){const a=t.activeIndex+o;if(a>t.slides.length&&!l)break;n.push(i(a))}else n.push(i(t.activeIndex));for(o=0;o<n.length;o+=1)if(typeof n[o]<"u"){const a=n[o].offsetHeight;r=a>r?a:r}(r||r===0)&&(t.wrapperEl.style.height=`${r}px`)}function pY(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let l=0;l<t.length;l+=1)t[l].swiperSlideOffset=(e.isHorizontal()?t[l].offsetLeft:t[l].offsetTop)-n-e.cssOverflowAdjustment()}function bY(e){e===void 0&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:l,rtlTranslate:r,snapGrid:o}=t;if(l.length===0)return;typeof l[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let i=-e;r&&(i=e),l.forEach(g=>{g.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass)}),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=n.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:typeof a=="string"&&(a=parseFloat(a));for(let g=0;g<l.length;g+=1){const s=l[g];let I=s.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(I-=l[0].swiperSlideOffset);const d=(i+(n.centeredSlides?t.minTranslate():0)-I)/(s.swiperSlideSize+a),u=(i-o[0]+(n.centeredSlides?t.minTranslate():0)-I)/(s.swiperSlideSize+a),C=-(i-I),h=C+t.slidesSizesGrid[g],f=C>=0&&C<=t.size-t.slidesSizesGrid[g];(C>=0&&C<t.size-1||h>1&&h<=t.size||C<=0&&h>=t.size)&&(t.visibleSlides.push(s),t.visibleSlidesIndexes.push(g),l[g].classList.add(n.slideVisibleClass)),f&&l[g].classList.add(n.slideFullyVisibleClass),s.progress=r?-d:d,s.originalProgress=r?-u:u}}function yY(e){const t=this;if(typeof e>"u"){const I=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*I||0}const n=t.params,l=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:o,isEnd:i,progressLoop:a}=t;const g=o,s=i;if(l===0)r=0,o=!0,i=!0;else{r=(e-t.minTranslate())/l;const I=Math.abs(e-t.minTranslate())<1,d=Math.abs(e-t.maxTranslate())<1;o=I||r<=0,i=d||r>=1,I&&(r=0),d&&(r=1)}if(n.loop){const I=t.getSlideIndexByData(0),d=t.getSlideIndexByData(t.slides.length-1),u=t.slidesGrid[I],C=t.slidesGrid[d],h=t.slidesGrid[t.slidesGrid.length-1],f=Math.abs(e);f>=u?a=(f-u)/h:a=(f+h-C)/h,a>1&&(a-=1)}Object.assign(t,{progress:r,progressLoop:a,isBeginning:o,isEnd:i}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!g&&t.emit("reachBeginning toEdge"),i&&!s&&t.emit("reachEnd toEdge"),(g&&!o||s&&!i)&&t.emit("fromEdge"),t.emit("progress",r)}const _d=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function ZY(){const e=this,{slides:t,params:n,slidesEl:l,activeIndex:r}=e,o=e.virtual&&n.virtual.enabled,i=e.grid&&n.grid&&n.grid.rows>1,a=d=>qn(l,`.${n.slideClass}${d}, swiper-slide${d}`)[0];let g,s,I;if(o)if(n.loop){let d=r-e.virtual.slidesBefore;d<0&&(d=e.virtual.slides.length+d),d>=e.virtual.slides.length&&(d-=e.virtual.slides.length),g=a(`[data-swiper-slide-index="${d}"]`)}else g=a(`[data-swiper-slide-index="${r}"]`);else i?(g=t.filter(d=>d.column===r)[0],I=t.filter(d=>d.column===r+1)[0],s=t.filter(d=>d.column===r-1)[0]):g=t[r];g&&(i||(I=gY(g,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!I&&(I=t[0]),s=aY(g,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!s===0&&(s=t[t.length-1]))),t.forEach(d=>{_d(d,d===g,n.slideActiveClass),_d(d,d===I,n.slideNextClass),_d(d,d===s,n.slidePrevClass)}),e.emitSlidesClasses()}const ys=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,l=t.closest(n());if(l){let r=l.querySelector(`.${e.params.lazyPreloaderClass}`);!r&&e.isElement&&(l.shadowRoot?r=l.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{l.shadowRoot&&(r=l.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},qd=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},fA=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const l=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const i=r,a=[i-t];a.push(...Array.from({length:t}).map((g,s)=>i+l+s)),e.slides.forEach((g,s)=>{a.includes(g.column)&&qd(e,s)});return}const o=r+l-1;if(e.params.rewind||e.params.loop)for(let i=r-t;i<=o+t;i+=1){const a=(i%n+n)%n;(a<r||a>o)&&qd(e,a)}else for(let i=Math.max(r-t,0);i<=Math.min(o+t,n-1);i+=1)i!==r&&(i>o||i<r)&&qd(e,i)};function vY(e){const{slidesGrid:t,params:n}=e,l=e.rtlTranslate?e.translate:-e.translate;let r;for(let o=0;o<t.length;o+=1)typeof t[o+1]<"u"?l>=t[o]&&l<t[o+1]-(t[o+1]-t[o])/2?r=o:l>=t[o]&&l<t[o+1]&&(r=o+1):l>=t[o]&&(r=o);return n.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function GY(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:l,params:r,activeIndex:o,realIndex:i,snapIndex:a}=t;let g=e,s;const I=C=>{let h=C-t.virtual.slidesBefore;return h<0&&(h=t.virtual.slides.length+h),h>=t.virtual.slides.length&&(h-=t.virtual.slides.length),h};if(typeof g>"u"&&(g=vY(t)),l.indexOf(n)>=0)s=l.indexOf(n);else{const C=Math.min(r.slidesPerGroupSkip,g);s=C+Math.floor((g-C)/r.slidesPerGroup)}if(s>=l.length&&(s=l.length-1),g===o&&!t.params.loop){s!==a&&(t.snapIndex=s,t.emit("snapIndexChange"));return}if(g===o&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=I(g);return}const d=t.grid&&r.grid&&r.grid.rows>1;let u;if(t.virtual&&r.virtual.enabled&&r.loop)u=I(g);else if(d){const C=t.slides.filter(f=>f.column===g)[0];let h=parseInt(C.getAttribute("data-swiper-slide-index"),10);Number.isNaN(h)&&(h=Math.max(t.slides.indexOf(C),0)),u=Math.floor(h/r.grid.rows)}else if(t.slides[g]){const C=t.slides[g].getAttribute("data-swiper-slide-index");C?u=parseInt(C,10):u=g}else u=g;Object.assign(t,{previousSnapIndex:a,snapIndex:s,previousRealIndex:i,realIndex:u,previousIndex:o,activeIndex:g}),t.initialized&&fA(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(i!==u&&t.emit("realIndexChange"),t.emit("slideChange"))}function BY(e,t){const n=this,l=n.params;let r=e.closest(`.${l.slideClass}, swiper-slide`);!r&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(a=>{!r&&a.matches&&a.matches(`.${l.slideClass}, swiper-slide`)&&(r=a)});let o=!1,i;if(r){for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===r){o=!0,i=a;break}}if(r&&o)n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=i;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}l.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var SY={updateSize:mY,updateSlides:hY,updateAutoHeight:fY,updateSlidesOffset:pY,updateSlidesProgress:bY,updateProgress:yY,updateSlidesClasses:ZY,updateActiveIndex:GY,updateClickedSlide:BY};function VY(e){e===void 0&&(e=this.isHorizontal()?"x":"y");const t=this,{params:n,rtlTranslate:l,translate:r,wrapperEl:o}=t;if(n.virtualTranslate)return l?-r:r;if(n.cssMode)return r;let i=oY(o,e);return i+=t.cssOverflowAdjustment(),l&&(i=-i),i||0}function WY(e,t){const n=this,{rtlTranslate:l,params:r,wrapperEl:o,progress:i}=n;let a=0,g=0;const s=0;n.isHorizontal()?a=l?-e:e:g=e,r.roundLengths&&(a=Math.floor(a),g=Math.floor(g)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?a:g,r.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-a:-g:r.virtualTranslate||(n.isHorizontal()?a-=n.cssOverflowAdjustment():g-=n.cssOverflowAdjustment(),o.style.transform=`translate3d(${a}px, ${g}px, ${s}px)`);let I;const d=n.maxTranslate()-n.minTranslate();d===0?I=0:I=(e-n.minTranslate())/d,I!==i&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)}function RY(){return-this.snapGrid[0]}function wY(){return-this.snapGrid[this.snapGrid.length-1]}function kY(e,t,n,l,r){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),n===void 0&&(n=!0),l===void 0&&(l=!0);const o=this,{params:i,wrapperEl:a}=o;if(o.animating&&i.preventInteractionOnTransition)return!1;const g=o.minTranslate(),s=o.maxTranslate();let I;if(l&&e>g?I=g:l&&e<s?I=s:I=e,o.updateProgress(I),i.cssMode){const d=o.isHorizontal();if(t===0)a[d?"scrollLeft":"scrollTop"]=-I;else{if(!o.support.smoothScroll)return o2({swiper:o,targetPosition:-I,side:d?"left":"top"}),!0;a.scrollTo({[d?"left":"top"]:-I,behavior:"smooth"})}return!0}return t===0?(o.setTransition(0),o.setTranslate(I),n&&(o.emit("beforeTransitionStart",t,r),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(I),n&&(o.emit("beforeTransitionStart",t,r),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(u){!o||o.destroyed||u.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,n&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var XY={getTranslate:VY,setTranslate:WY,minTranslate:RY,maxTranslate:wY,translateTo:kY};function xY(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${e}ms`,n.wrapperEl.style.transitionDelay=e===0?"0ms":""),n.emit("setTransition",e,t)}function s2(e){let{swiper:t,runCallbacks:n,direction:l,step:r}=e;const{activeIndex:o,previousIndex:i}=t;let a=l;if(a||(o>i?a="next":o<i?a="prev":a="reset"),t.emit(`transition${r}`),n&&o!==i){if(a==="reset"){t.emit(`slideResetTransition${r}`);return}t.emit(`slideChangeTransition${r}`),a==="next"?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}function JY(e,t){e===void 0&&(e=!0);const n=this,{params:l}=n;l.cssMode||(l.autoHeight&&n.updateAutoHeight(),s2({swiper:n,runCallbacks:e,direction:t,step:"Start"}))}function NY(e,t){e===void 0&&(e=!0);const n=this,{params:l}=n;n.animating=!1,!l.cssMode&&(n.setTransition(0),s2({swiper:n,runCallbacks:e,direction:t,step:"End"}))}var YY={setTransition:xY,transitionStart:JY,transitionEnd:NY};function HY(e,t,n,l,r){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));const o=this;let i=e;i<0&&(i=0);const{params:a,snapGrid:g,slidesGrid:s,previousIndex:I,activeIndex:d,rtlTranslate:u,wrapperEl:C,enabled:h}=o;if(!h&&!l&&!r||o.destroyed||o.animating&&a.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=o.params.speed);const f=Math.min(o.params.slidesPerGroupSkip,i);let y=f+Math.floor((i-f)/o.params.slidesPerGroup);y>=g.length&&(y=g.length-1);const A=-g[y];if(a.normalizeSlideIndex)for(let p=0;p<s.length;p+=1){const b=-Math.floor(A*100),Z=Math.floor(s[p]*100),V=Math.floor(s[p+1]*100);typeof s[p+1]<"u"?b>=Z&&b<V-(V-Z)/2?i=p:b>=Z&&b<V&&(i=p+1):b>=Z&&(i=p)}if(o.initialized&&i!==d&&(!o.allowSlideNext&&(u?A>o.translate&&A>o.minTranslate():A<o.translate&&A<o.minTranslate())||!o.allowSlidePrev&&A>o.translate&&A>o.maxTranslate()&&(d||0)!==i))return!1;i!==(I||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(A);let m;if(i>d?m="next":i<d?m="prev":m="reset",u&&-A===o.translate||!u&&A===o.translate)return o.updateActiveIndex(i),a.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),a.effect!=="slide"&&o.setTranslate(A),m!=="reset"&&(o.transitionStart(n,m),o.transitionEnd(n,m)),!1;if(a.cssMode){const p=o.isHorizontal(),b=u?A:-A;if(t===0){const Z=o.virtual&&o.params.virtual.enabled;Z&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),Z&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{C[p?"scrollLeft":"scrollTop"]=b})):C[p?"scrollLeft":"scrollTop"]=b,Z&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1})}else{if(!o.support.smoothScroll)return o2({swiper:o,targetPosition:b,side:p?"left":"top"}),!0;C.scrollTo({[p?"left":"top"]:b,behavior:"smooth"})}return!0}return o.setTransition(t),o.setTranslate(A),o.updateActiveIndex(i),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,l),o.transitionStart(n,m),t===0?o.transitionEnd(n,m):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(b){!o||o.destroyed||b.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,m))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function FY(e,t,n,l){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));const r=this;if(r.destroyed)return;typeof t>"u"&&(t=r.params.speed);const o=r.grid&&r.params.grid&&r.params.grid.rows>1;let i=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)i=i+r.virtual.slidesBefore;else{let a;if(o){const u=i*r.params.grid.rows;a=r.slides.filter(C=>C.getAttribute("data-swiper-slide-index")*1===u)[0].column}else a=r.getSlideIndexByData(i);const g=o?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:s}=r.params;let I=r.params.slidesPerView;I==="auto"?I=r.slidesPerViewDynamic():(I=Math.ceil(parseFloat(r.params.slidesPerView,10)),s&&I%2===0&&(I=I+1));let d=g-a<I;if(s&&(d=d||a<Math.ceil(I/2)),l&&s&&r.params.slidesPerView!=="auto"&&!o&&(d=!1),d){const u=s?a<r.activeIndex?"prev":"next":a-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:u,slideTo:!0,activeSlideIndex:u==="next"?a+1:a-g+1,slideRealIndex:u==="next"?r.realIndex:void 0})}if(o){const u=i*r.params.grid.rows;i=r.slides.filter(C=>C.getAttribute("data-swiper-slide-index")*1===u)[0].column}else i=r.getSlideIndexByData(i)}return requestAnimationFrame(()=>{r.slideTo(i,t,n,l)}),r}function KY(e,t,n){t===void 0&&(t=!0);const l=this,{enabled:r,params:o,animating:i}=l;if(!r||l.destroyed)return l;typeof e>"u"&&(e=l.params.speed);let a=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(a=Math.max(l.slidesPerViewDynamic("current",!0),1));const g=l.activeIndex<o.slidesPerGroupSkip?1:a,s=l.virtual&&o.virtual.enabled;if(o.loop){if(i&&!s&&o.loopPreventsSliding)return!1;if(l.loopFix({direction:"next"}),l._clientLeft=l.wrapperEl.clientLeft,l.activeIndex===l.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{l.slideTo(l.activeIndex+g,e,t,n)}),!0}return o.rewind&&l.isEnd?l.slideTo(0,e,t,n):l.slideTo(l.activeIndex+g,e,t,n)}function EY(e,t,n){t===void 0&&(t=!0);const l=this,{params:r,snapGrid:o,slidesGrid:i,rtlTranslate:a,enabled:g,animating:s}=l;if(!g||l.destroyed)return l;typeof e>"u"&&(e=l.params.speed);const I=l.virtual&&r.virtual.enabled;if(r.loop){if(s&&!I&&r.loopPreventsSliding)return!1;l.loopFix({direction:"prev"}),l._clientLeft=l.wrapperEl.clientLeft}const d=a?l.translate:-l.translate;function u(A){return A<0?-Math.floor(Math.abs(A)):Math.floor(A)}const C=u(d),h=o.map(A=>u(A));let f=o[h.indexOf(C)-1];if(typeof f>"u"&&r.cssMode){let A;o.forEach((m,p)=>{C>=m&&(A=p)}),typeof A<"u"&&(f=o[A>0?A-1:A])}let y=0;if(typeof f<"u"&&(y=i.indexOf(f),y<0&&(y=l.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(y=y-l.slidesPerViewDynamic("previous",!0)+1,y=Math.max(y,0))),r.rewind&&l.isBeginning){const A=l.params.virtual&&l.params.virtual.enabled&&l.virtual?l.virtual.slides.length-1:l.slides.length-1;return l.slideTo(A,e,t,n)}else if(r.loop&&l.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{l.slideTo(y,e,t,n)}),!0;return l.slideTo(y,e,t,n)}function MY(e,t,n){t===void 0&&(t=!0);const l=this;if(!l.destroyed)return typeof e>"u"&&(e=l.params.speed),l.slideTo(l.activeIndex,e,t,n)}function TY(e,t,n,l){t===void 0&&(t=!0),l===void 0&&(l=.5);const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);let o=r.activeIndex;const i=Math.min(r.params.slidesPerGroupSkip,o),a=i+Math.floor((o-i)/r.params.slidesPerGroup),g=r.rtlTranslate?r.translate:-r.translate;if(g>=r.snapGrid[a]){const s=r.snapGrid[a],I=r.snapGrid[a+1];g-s>(I-s)*l&&(o+=r.params.slidesPerGroup)}else{const s=r.snapGrid[a-1],I=r.snapGrid[a];g-s<=(I-s)*l&&(o-=r.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,r.slidesGrid.length-1),r.slideTo(o,e,t,n)}function LY(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,l=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let r=e.clickedIndex,o;const i=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;o=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?r<e.loopedSlides-l/2||r>e.slides.length-e.loopedSlides+l/2?(e.loopFix(),r=e.getSlideIndex(qn(n,`${i}[data-swiper-slide-index="${o}"]`)[0]),mA(()=>{e.slideTo(r)})):e.slideTo(r):r>e.slides.length-l?(e.loopFix(),r=e.getSlideIndex(qn(n,`${i}[data-swiper-slide-index="${o}"]`)[0]),mA(()=>{e.slideTo(r)})):e.slideTo(r)}else e.slideTo(r)}var zY={slideTo:HY,slideToLoop:FY,slideNext:KY,slidePrev:EY,slideReset:MY,slideToClosest:TY,slideToClickedSlide:LY};function jY(e){const t=this,{params:n,slidesEl:l}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;const r=()=>{qn(l,`.${n.slideClass}, swiper-slide`).forEach((d,u)=>{d.setAttribute("data-swiper-slide-index",u)})},o=t.grid&&n.grid&&n.grid.rows>1,i=n.slidesPerGroup*(o?n.grid.rows:1),a=t.slides.length%i!==0,g=o&&t.slides.length%n.grid.rows!==0,s=I=>{for(let d=0;d<I;d+=1){const u=t.isElement?dc("swiper-slide",[n.slideBlankClass]):dc("div",[n.slideClass,n.slideBlankClass]);t.slidesEl.append(u)}};if(a){if(n.loopAddBlankSlides){const I=i-t.slides.length%i;s(I),t.recalcSlides(),t.updateSlides()}else Ic("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(g){if(n.loopAddBlankSlides){const I=n.grid.rows-t.slides.length%n.grid.rows;s(I),t.recalcSlides(),t.updateSlides()}else Ic("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();t.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next"})}function UY(e){let{slideRealIndex:t,slideTo:n=!0,direction:l,setTranslate:r,activeSlideIndex:o,byController:i,byMousewheel:a}=e===void 0?{}:e;const g=this;if(!g.params.loop)return;g.emit("beforeLoopFix");const{slides:s,allowSlidePrev:I,allowSlideNext:d,slidesEl:u,params:C}=g,{centeredSlides:h}=C;if(g.allowSlidePrev=!0,g.allowSlideNext=!0,g.virtual&&C.virtual.enabled){n&&(!C.centeredSlides&&g.snapIndex===0?g.slideTo(g.virtual.slides.length,0,!1,!0):C.centeredSlides&&g.snapIndex<C.slidesPerView?g.slideTo(g.virtual.slides.length+g.snapIndex,0,!1,!0):g.snapIndex===g.snapGrid.length-1&&g.slideTo(g.virtual.slidesBefore,0,!1,!0)),g.allowSlidePrev=I,g.allowSlideNext=d,g.emit("loopFix");return}let f=C.slidesPerView;f==="auto"?f=g.slidesPerViewDynamic():(f=Math.ceil(parseFloat(C.slidesPerView,10)),h&&f%2===0&&(f=f+1));const y=C.slidesPerGroupAuto?f:C.slidesPerGroup;let A=y;A%y!==0&&(A+=y-A%y),A+=C.loopAdditionalSlides,g.loopedSlides=A;const m=g.grid&&C.grid&&C.grid.rows>1;s.length<f+A?Ic("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):m&&C.grid.fill==="row"&&Ic("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const p=[],b=[];let Z=g.activeIndex;typeof o>"u"?o=g.getSlideIndex(s.filter(k=>k.classList.contains(C.slideActiveClass))[0]):Z=o;const V=l==="next"||!l,S=l==="prev"||!l;let G=0,w=0;const B=m?Math.ceil(s.length/C.grid.rows):s.length,R=(m?s[o].column:o)+(h&&typeof r>"u"?-f/2+.5:0);if(R<A){G=Math.max(A-R,y);for(let k=0;k<A-R;k+=1){const x=k-Math.floor(k/B)*B;if(m){const H=B-x-1;for(let M=s.length-1;M>=0;M-=1)s[M].column===H&&p.push(M)}else p.push(B-x-1)}}else if(R+f>B-A){w=Math.max(R-(B-A*2),y);for(let k=0;k<w;k+=1){const x=k-Math.floor(k/B)*B;m?s.forEach((H,M)=>{H.column===x&&b.push(M)}):b.push(x)}}if(g.__preventObserver__=!0,requestAnimationFrame(()=>{g.__preventObserver__=!1}),S&&p.forEach(k=>{s[k].swiperLoopMoveDOM=!0,u.prepend(s[k]),s[k].swiperLoopMoveDOM=!1}),V&&b.forEach(k=>{s[k].swiperLoopMoveDOM=!0,u.append(s[k]),s[k].swiperLoopMoveDOM=!1}),g.recalcSlides(),C.slidesPerView==="auto"?g.updateSlides():m&&(p.length>0&&S||b.length>0&&V)&&g.slides.forEach((k,x)=>{g.grid.updateSlide(x,k,g.slides)}),C.watchSlidesProgress&&g.updateSlidesOffset(),n){if(p.length>0&&S){if(typeof t>"u"){const k=g.slidesGrid[Z],H=g.slidesGrid[Z+G]-k;a?g.setTranslate(g.translate-H):(g.slideTo(Z+Math.ceil(G),0,!1,!0),r&&(g.touchEventsData.startTranslate=g.touchEventsData.startTranslate-H,g.touchEventsData.currentTranslate=g.touchEventsData.currentTranslate-H))}else if(r){const k=m?p.length/C.grid.rows:p.length;g.slideTo(g.activeIndex+k,0,!1,!0),g.touchEventsData.currentTranslate=g.translate}}else if(b.length>0&&V)if(typeof t>"u"){const k=g.slidesGrid[Z],H=g.slidesGrid[Z-w]-k;a?g.setTranslate(g.translate-H):(g.slideTo(Z-w,0,!1,!0),r&&(g.touchEventsData.startTranslate=g.touchEventsData.startTranslate-H,g.touchEventsData.currentTranslate=g.touchEventsData.currentTranslate-H))}else{const k=m?b.length/C.grid.rows:b.length;g.slideTo(g.activeIndex-k,0,!1,!0)}}if(g.allowSlidePrev=I,g.allowSlideNext=d,g.controller&&g.controller.control&&!i){const k={slideRealIndex:t,direction:l,setTranslate:r,activeSlideIndex:o,byController:!0};Array.isArray(g.controller.control)?g.controller.control.forEach(x=>{!x.destroyed&&x.params.loop&&x.loopFix({...k,slideTo:x.params.slidesPerView===C.slidesPerView?n:!1})}):g.controller.control instanceof g.constructor&&g.controller.control.params.loop&&g.controller.control.loopFix({...k,slideTo:g.controller.control.params.slidesPerView===C.slidesPerView?n:!1})}g.emit("loopFix")}function DY(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const l=[];e.slides.forEach(r=>{const o=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;l[o]=r}),e.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),l.forEach(r=>{n.append(r)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}var QY={loopCreate:jY,loopFix:UY,loopDestroy:DY};function PY(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function OY(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}var _Y={setGrabCursor:PY,unsetGrabCursor:OY};function qY(e,t){t===void 0&&(t=this);function n(l){if(!l||l===vi()||l===dn())return null;l.assignedSlot&&(l=l.assignedSlot);const r=l.closest(e);return!r&&!l.getRootNode?null:r||n(l.getRootNode().host)}return n(t)}function x0(e,t,n){const l=dn(),{params:r}=e,o=r.edgeSwipeDetection,i=r.edgeSwipeThreshold;return o&&(n<=i||n>=l.innerWidth-i)?o==="prevent"?(t.preventDefault(),!0):!1:!0}function $Y(e){const t=this,n=vi();let l=e;l.originalEvent&&(l=l.originalEvent);const r=t.touchEventsData;if(l.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==l.pointerId)return;r.pointerId=l.pointerId}else l.type==="touchstart"&&l.targetTouches.length===1&&(r.touchId=l.targetTouches[0].identifier);if(l.type==="touchstart"){x0(t,l,l.targetTouches[0].pageX);return}const{params:o,touches:i,enabled:a}=t;if(!a||!o.simulateTouch&&l.pointerType==="mouse"||t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let g=l.target;if(o.touchEventsTarget==="wrapper"&&!t.wrapperEl.contains(g)||"which"in l&&l.which===3||"button"in l&&l.button>0||r.isTouched&&r.isMoved)return;const s=!!o.noSwipingClass&&o.noSwipingClass!=="",I=l.composedPath?l.composedPath():l.path;s&&l.target&&l.target.shadowRoot&&I&&(g=I[0]);const d=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,u=!!(l.target&&l.target.shadowRoot);if(o.noSwiping&&(u?qY(d,g):g.closest(d))){t.allowClick=!0;return}if(o.swipeHandler&&!g.closest(o.swipeHandler))return;i.currentX=l.pageX,i.currentY=l.pageY;const C=i.currentX,h=i.currentY;if(!x0(t,l,C))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),i.startX=C,i.startY=h,r.touchStartTime=cc(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(r.allowThresholdMove=!1);let f=!0;g.matches(r.focusableElements)&&(f=!1,g.nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==g&&n.activeElement.blur();const y=f&&t.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||y)&&!g.isContentEditable&&l.preventDefault(),o.freeMode&&o.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",l)}function e9(e){const t=vi(),n=this,l=n.touchEventsData,{params:r,touches:o,rtlTranslate:i,enabled:a}=n;if(!a||!r.simulateTouch&&e.pointerType==="mouse")return;let g=e;if(g.originalEvent&&(g=g.originalEvent),g.type==="pointermove"&&(l.touchId!==null||g.pointerId!==l.pointerId))return;let s;if(g.type==="touchmove"){if(s=[...g.changedTouches].filter(V=>V.identifier===l.touchId)[0],!s||s.identifier!==l.touchId)return}else s=g;if(!l.isTouched){l.startMoving&&l.isScrolling&&n.emit("touchMoveOpposite",g);return}const I=s.pageX,d=s.pageY;if(g.preventedByNestedSwiper){o.startX=I,o.startY=d;return}if(!n.allowTouchMove){g.target.matches(l.focusableElements)||(n.allowClick=!1),l.isTouched&&(Object.assign(o,{startX:I,startY:d,currentX:I,currentY:d}),l.touchStartTime=cc());return}if(r.touchReleaseOnEdges&&!r.loop){if(n.isVertical()){if(d<o.startY&&n.translate<=n.maxTranslate()||d>o.startY&&n.translate>=n.minTranslate()){l.isTouched=!1,l.isMoved=!1;return}}else if(I<o.startX&&n.translate<=n.maxTranslate()||I>o.startX&&n.translate>=n.minTranslate())return}if(t.activeElement&&g.target===t.activeElement&&g.target.matches(l.focusableElements)){l.isMoved=!0,n.allowClick=!1;return}l.allowTouchCallbacks&&n.emit("touchMove",g),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=I,o.currentY=d;const u=o.currentX-o.startX,C=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(u**2+C**2)<n.params.threshold)return;if(typeof l.isScrolling>"u"){let V;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?l.isScrolling=!1:u*u+C*C>=25&&(V=Math.atan2(Math.abs(C),Math.abs(u))*180/Math.PI,l.isScrolling=n.isHorizontal()?V>r.touchAngle:90-V>r.touchAngle)}if(l.isScrolling&&n.emit("touchMoveOpposite",g),typeof l.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(l.startMoving=!0),l.isScrolling||g.type==="touchmove"&&l.preventTouchMoveFromPointerMove){l.isTouched=!1;return}if(!l.startMoving)return;n.allowClick=!1,!r.cssMode&&g.cancelable&&g.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&g.stopPropagation();let h=n.isHorizontal()?u:C,f=n.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;r.oneWayMovement&&(h=Math.abs(h)*(i?1:-1),f=Math.abs(f)*(i?1:-1)),o.diff=h,h*=r.touchRatio,i&&(h=-h,f=-f);const y=n.touchesDirection;n.swipeDirection=h>0?"prev":"next",n.touchesDirection=f>0?"prev":"next";const A=n.params.loop&&!r.cssMode,m=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!l.isMoved){if(A&&m&&n.loopFix({direction:n.swipeDirection}),l.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const V=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(V)}l.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",g)}let p;if(new Date().getTime(),l.isMoved&&l.allowThresholdMove&&y!==n.touchesDirection&&A&&m&&Math.abs(h)>=1){Object.assign(o,{startX:I,startY:d,currentX:I,currentY:d,startTranslate:l.currentTranslate}),l.loopSwapReset=!0,l.startTranslate=l.currentTranslate;return}n.emit("sliderMove",g),l.isMoved=!0,l.currentTranslate=h+l.startTranslate;let b=!0,Z=r.resistanceRatio;if(r.touchReleaseOnEdges&&(Z=0),h>0?(A&&m&&!p&&l.allowThresholdMove&&l.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),l.currentTranslate>n.minTranslate()&&(b=!1,r.resistance&&(l.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+l.startTranslate+h)**Z))):h<0&&(A&&m&&!p&&l.allowThresholdMove&&l.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(r.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),l.currentTranslate<n.maxTranslate()&&(b=!1,r.resistance&&(l.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-l.startTranslate-h)**Z))),b&&(g.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&l.currentTranslate<l.startTranslate&&(l.currentTranslate=l.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&l.currentTranslate>l.startTranslate&&(l.currentTranslate=l.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(l.currentTranslate=l.startTranslate),r.threshold>0)if(Math.abs(h)>r.threshold||l.allowThresholdMove){if(!l.allowThresholdMove){l.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,l.currentTranslate=l.startTranslate,o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{l.currentTranslate=l.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(l.currentTranslate),n.setTranslate(l.currentTranslate))}function t9(e){const t=this,n=t.touchEventsData;let l=e;l.originalEvent&&(l=l.originalEvent);let r;if(l.type==="touchend"||l.type==="touchcancel"){if(r=[...l.changedTouches].filter(Z=>Z.identifier===n.touchId)[0],!r||r.identifier!==n.touchId)return}else{if(n.touchId!==null||l.pointerId!==n.pointerId)return;r=l}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(l.type)&&!(["pointercancel","contextmenu"].includes(l.type)&&(t.browser.isSafari||t.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:i,touches:a,rtlTranslate:g,slidesGrid:s,enabled:I}=t;if(!I||!i.simulateTouch&&l.pointerType==="mouse")return;if(n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&i.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}i.grabCursor&&n.isMoved&&n.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const d=cc(),u=d-n.touchStartTime;if(t.allowClick){const Z=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(Z&&Z[0]||l.target,Z),t.emit("tap click",l),u<300&&d-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(n.lastClickTime=cc(),mA(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||a.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let C;if(i.followFinger?C=g?t.translate:-t.translate:C=-n.currentTranslate,i.cssMode)return;if(i.freeMode&&i.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:C});return}const h=C>=-t.maxTranslate()&&!t.params.loop;let f=0,y=t.slidesSizesGrid[0];for(let Z=0;Z<s.length;Z+=Z<i.slidesPerGroupSkip?1:i.slidesPerGroup){const V=Z<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof s[Z+V]<"u"?(h||C>=s[Z]&&C<s[Z+V])&&(f=Z,y=s[Z+V]-s[Z]):(h||C>=s[Z])&&(f=Z,y=s[s.length-1]-s[s.length-2])}let A=null,m=null;i.rewind&&(t.isBeginning?m=i.virtual&&i.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(A=0));const p=(C-s[f])/y,b=f<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(u>i.longSwipesMs){if(!i.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(p>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?A:f+b):t.slideTo(f)),t.swipeDirection==="prev"&&(p>1-i.longSwipesRatio?t.slideTo(f+b):m!==null&&p<0&&Math.abs(p)>i.longSwipesRatio?t.slideTo(m):t.slideTo(f))}else{if(!i.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(l.target===t.navigation.nextEl||l.target===t.navigation.prevEl)?l.target===t.navigation.nextEl?t.slideTo(f+b):t.slideTo(f):(t.swipeDirection==="next"&&t.slideTo(A!==null?A:f+b),t.swipeDirection==="prev"&&t.slideTo(m!==null?m:f))}}function J0(){const e=this,{params:t,el:n}=e;if(n&&n.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:l,allowSlidePrev:r,snapGrid:o}=e,i=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const a=i&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!a?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!i?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=r,e.allowSlideNext=l,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function n9(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function l9(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:l}=e;if(!l)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let r;const o=e.maxTranslate()-e.minTranslate();o===0?r=0:r=(e.translate-e.minTranslate())/o,r!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function r9(e){const t=this;ys(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function o9(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const c2=(e,t)=>{const n=vi(),{params:l,el:r,wrapperEl:o,device:i}=e,a=!!l.nested,g=t==="on"?"addEventListener":"removeEventListener",s=t;n[g]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:a}),r[g]("touchstart",e.onTouchStart,{passive:!1}),r[g]("pointerdown",e.onTouchStart,{passive:!1}),n[g]("touchmove",e.onTouchMove,{passive:!1,capture:a}),n[g]("pointermove",e.onTouchMove,{passive:!1,capture:a}),n[g]("touchend",e.onTouchEnd,{passive:!0}),n[g]("pointerup",e.onTouchEnd,{passive:!0}),n[g]("pointercancel",e.onTouchEnd,{passive:!0}),n[g]("touchcancel",e.onTouchEnd,{passive:!0}),n[g]("pointerout",e.onTouchEnd,{passive:!0}),n[g]("pointerleave",e.onTouchEnd,{passive:!0}),n[g]("contextmenu",e.onTouchEnd,{passive:!0}),(l.preventClicks||l.preventClicksPropagation)&&r[g]("click",e.onClick,!0),l.cssMode&&o[g]("scroll",e.onScroll),l.updateOnWindowResize?e[s](i.ios||i.android?"resize orientationchange observerUpdate":"resize observerUpdate",J0,!0):e[s]("observerUpdate",J0,!0),r[g]("load",e.onLoad,{capture:!0})};function i9(){const e=this,{params:t}=e;e.onTouchStart=$Y.bind(e),e.onTouchMove=e9.bind(e),e.onTouchEnd=t9.bind(e),e.onDocumentTouchStart=o9.bind(e),t.cssMode&&(e.onScroll=l9.bind(e)),e.onClick=n9.bind(e),e.onLoad=r9.bind(e),c2(e,"on")}function a9(){c2(this,"off")}var g9={attachEvents:i9,detachEvents:a9};const N0=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function s9(){const e=this,{realIndex:t,initialized:n,params:l,el:r}=e,o=l.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const i=e.getBreakpoint(o,e.params.breakpointsBase,e.el);if(!i||e.currentBreakpoint===i)return;const g=(i in o?o[i]:void 0)||e.originalParams,s=N0(e,l),I=N0(e,g),d=e.params.grabCursor,u=g.grabCursor,C=l.enabled;s&&!I?(r.classList.remove(`${l.containerModifierClass}grid`,`${l.containerModifierClass}grid-column`),e.emitContainerClasses()):!s&&I&&(r.classList.add(`${l.containerModifierClass}grid`),(g.grid.fill&&g.grid.fill==="column"||!g.grid.fill&&l.grid.fill==="column")&&r.classList.add(`${l.containerModifierClass}grid-column`),e.emitContainerClasses()),d&&!u?e.unsetGrabCursor():!d&&u&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(p=>{if(typeof g[p]>"u")return;const b=l[p]&&l[p].enabled,Z=g[p]&&g[p].enabled;b&&!Z&&e[p].disable(),!b&&Z&&e[p].enable()});const h=g.direction&&g.direction!==l.direction,f=l.loop&&(g.slidesPerView!==l.slidesPerView||h),y=l.loop;h&&n&&e.changeDirection(),_t(e.params,g);const A=e.params.enabled,m=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),C&&!A?e.disable():!C&&A&&e.enable(),e.currentBreakpoint=i,e.emit("_beforeBreakpoint",g),n&&(f?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!y&&m?(e.loopCreate(t),e.updateSlides()):y&&!m&&e.loopDestroy()),e.emit("breakpoint",g)}function c9(e,t,n){if(t===void 0&&(t="window"),!e||t==="container"&&!n)return;let l=!1;const r=dn(),o=t==="window"?r.innerHeight:n.clientHeight,i=Object.keys(e).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const g=parseFloat(a.substr(1));return{value:o*g,point:a}}return{value:a,point:a}});i.sort((a,g)=>parseInt(a.value,10)-parseInt(g.value,10));for(let a=0;a<i.length;a+=1){const{point:g,value:s}=i[a];t==="window"?r.matchMedia(`(min-width: ${s}px)`).matches&&(l=g):s<=n.clientWidth&&(l=g)}return l||"max"}var I9={setBreakpoint:s9,getBreakpoint:c9};function d9(e,t){const n=[];return e.forEach(l=>{typeof l=="object"?Object.keys(l).forEach(r=>{l[r]&&n.push(t+r)}):typeof l=="string"&&n.push(t+l)}),n}function u9(){const e=this,{classNames:t,params:n,rtl:l,el:r,device:o}=e,i=d9(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:l},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...i),r.classList.add(...t),e.emitContainerClasses()}function C9(){const e=this,{el:t,classNames:n}=e;t.classList.remove(...n),e.emitContainerClasses()}var A9={addClasses:u9,removeClasses:C9};function m9(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:l}=n;if(l){const r=e.slides.length-1,o=e.slidesGrid[r]+e.slidesSizesGrid[r]+l*2;e.isLocked=e.size>o}else e.isLocked=e.snapGrid.length===1;n.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),n.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var h9={checkOverflow:m9},pA={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function f9(e,t){return function(l){l===void 0&&(l={});const r=Object.keys(l)[0],o=l[r];if(typeof o!="object"||o===null){_t(t,l);return}if(e[r]===!0&&(e[r]={enabled:!0}),r==="navigation"&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),!(r in e&&"enabled"in o)){_t(t,l);return}typeof e[r]=="object"&&!("enabled"in e[r])&&(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),_t(t,l)}}const $d={eventsEmitter:AY,update:SY,translate:XY,transition:YY,slide:zY,loop:QY,grabCursor:_Y,events:g9,breakpoints:I9,checkOverflow:h9,classes:A9},eu={};let Gh=class sl{constructor(){let t,n;for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?n=r[0]:[t,n]=r,n||(n={}),n=_t({},n),t&&!n.el&&(n.el=t);const i=vi();if(n.el&&typeof n.el=="string"&&i.querySelectorAll(n.el).length>1){const I=[];return i.querySelectorAll(n.el).forEach(d=>{const u=_t({},n,{el:d});I.push(new sl(u))}),I}const a=this;a.__swiper__=!0,a.support=a2(),a.device=g2({userAgent:n.userAgent}),a.browser=dY(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],n.modules&&Array.isArray(n.modules)&&a.modules.push(...n.modules);const g={};a.modules.forEach(I=>{I({params:n,swiper:a,extendParams:f9(n,g),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const s=_t({},pA,g);return a.params=_t({},s,eu,n),a.originalParams=_t({},a.params),a.passedParams=_t({},n),a.params&&a.params.on&&Object.keys(a.params.on).forEach(I=>{a.on(I,a.params.on[I])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:n,params:l}=this,r=qn(n,`.${l.slideClass}, swiper-slide`),o=uc(r[0]);return uc(t)-o}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===t)[0])}recalcSlides(){const t=this,{slidesEl:n,params:l}=t;t.slides=qn(n,`.${l.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,n){const l=this;t=Math.min(Math.max(t,0),1);const r=l.minTranslate(),i=(l.maxTranslate()-r)*t+r;l.translateTo(i,typeof n>"u"?0:n),l.updateActiveIndex(),l.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=t.el.className.split(" ").filter(l=>l.indexOf("swiper")===0||l.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",n.join(" "))}getSlideClasses(t){const n=this;return n.destroyed?"":t.className.split(" ").filter(l=>l.indexOf("swiper-slide")===0||l.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=[];t.slides.forEach(l=>{const r=t.getSlideClasses(l);n.push({slideEl:l,classNames:r}),t.emit("_slideClass",l,r)}),t.emit("_slideClasses",n)}slidesPerViewDynamic(t,n){t===void 0&&(t="current"),n===void 0&&(n=!1);const l=this,{params:r,slides:o,slidesGrid:i,slidesSizesGrid:a,size:g,activeIndex:s}=l;let I=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let d=o[s]?Math.ceil(o[s].swiperSlideSize):0,u;for(let C=s+1;C<o.length;C+=1)o[C]&&!u&&(d+=Math.ceil(o[C].swiperSlideSize),I+=1,d>g&&(u=!0));for(let C=s-1;C>=0;C-=1)o[C]&&!u&&(d+=o[C].swiperSlideSize,I+=1,d>g&&(u=!0))}else if(t==="current")for(let d=s+1;d<o.length;d+=1)(n?i[d]+a[d]-i[s]<g:i[d]-i[s]<g)&&(I+=1);else for(let d=s-1;d>=0;d-=1)i[s]-i[d]<g&&(I+=1);return I}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:n,params:l}=t;l.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(i=>{i.complete&&ys(t,i)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function r(){const i=t.rtlTranslate?t.translate*-1:t.translate,a=Math.min(Math.max(i,t.maxTranslate()),t.minTranslate());t.setTranslate(a),t.updateActiveIndex(),t.updateSlidesClasses()}let o;if(l.freeMode&&l.freeMode.enabled&&!l.cssMode)r(),l.autoHeight&&t.updateAutoHeight();else{if((l.slidesPerView==="auto"||l.slidesPerView>1)&&t.isEnd&&!l.centeredSlides){const i=t.virtual&&l.virtual.enabled?t.virtual.slides:t.slides;o=t.slideTo(i.length-1,0,!1,!0)}else o=t.slideTo(t.activeIndex,0,!1,!0);o||r()}l.watchOverflow&&n!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,n){n===void 0&&(n=!0);const l=this,r=l.params.direction;return t||(t=r==="horizontal"?"vertical":"horizontal"),t===r||t!=="horizontal"&&t!=="vertical"||(l.el.classList.remove(`${l.params.containerModifierClass}${r}`),l.el.classList.add(`${l.params.containerModifierClass}${t}`),l.emitContainerClasses(),l.params.direction=t,l.slides.forEach(o=>{t==="vertical"?o.style.width="":o.style.height=""}),l.emit("changeDirection"),n&&l.update()),l}changeLanguageDirection(t){const n=this;n.rtl&&t==="rtl"||!n.rtl&&t==="ltr"||(n.rtl=t==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(t){const n=this;if(n.mounted)return!0;let l=t||n.params.el;if(typeof l=="string"&&(l=document.querySelector(l)),!l)return!1;l.swiper=n,l.parentNode&&l.parentNode.host&&l.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let i=(()=>l&&l.shadowRoot&&l.shadowRoot.querySelector?l.shadowRoot.querySelector(r()):qn(l,r())[0])();return!i&&n.params.createElements&&(i=dc("div",n.params.wrapperClass),l.append(i),qn(l,`.${n.params.slideClass}`).forEach(a=>{i.append(a)})),Object.assign(n,{el:l,wrapperEl:i,slidesEl:n.isElement&&!l.parentNode.host.slideSlots?l.parentNode.host:i,hostEl:n.isElement?l.parentNode.host:l,mounted:!0,rtl:l.dir.toLowerCase()==="rtl"||Pl(l,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(l.dir.toLowerCase()==="rtl"||Pl(l,"direction")==="rtl"),wrongRTL:Pl(i,"display")==="-webkit-box"}),!0}init(t){const n=this;if(n.initialized||n.mount(t)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents();const r=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&r.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(o=>{o.complete?ys(n,o):o.addEventListener("load",i=>{ys(n,i.target)})}),fA(n),n.initialized=!0,fA(n),n.emit("init"),n.emit("afterInit"),n}destroy(t,n){t===void 0&&(t=!0),n===void 0&&(n=!0);const l=this,{params:r,el:o,wrapperEl:i,slides:a}=l;return typeof l.params>"u"||l.destroyed||(l.emit("beforeDestroy"),l.initialized=!1,l.detachEvents(),r.loop&&l.loopDestroy(),n&&(l.removeClasses(),o.removeAttribute("style"),i.removeAttribute("style"),a&&a.length&&a.forEach(g=>{g.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),g.removeAttribute("style"),g.removeAttribute("data-swiper-slide-index")})),l.emit("destroy"),Object.keys(l.eventsListeners).forEach(g=>{l.off(g)}),t!==!1&&(l.el.swiper=null,lY(l)),l.destroyed=!0),null}static extendDefaults(t){_t(eu,t)}static get extendedDefaults(){return eu}static get defaults(){return pA}static installModule(t){sl.prototype.__modules__||(sl.prototype.__modules__=[]);const n=sl.prototype.__modules__;typeof t=="function"&&n.indexOf(t)<0&&n.push(t)}static use(t){return Array.isArray(t)?(t.forEach(n=>sl.installModule(n)),sl):(sl.installModule(t),sl)}};Object.keys($d).forEach(e=>{Object.keys($d[e]).forEach(t=>{Gh.prototype[t]=$d[e][t]})});Gh.use([uY,CY]);const I2=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Io(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"&&!e.__swiper__}function _o(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(l=>n.indexOf(l)<0).forEach(l=>{typeof e[l]>"u"?e[l]=t[l]:Io(t[l])&&Io(e[l])&&Object.keys(t[l]).length>0?t[l].__swiper__?e[l]=t[l]:_o(e[l],t[l]):e[l]=t[l]})}function d2(e){return e===void 0&&(e={}),e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function u2(e){return e===void 0&&(e={}),e.pagination&&typeof e.pagination.el>"u"}function C2(e){return e===void 0&&(e={}),e.scrollbar&&typeof e.scrollbar.el>"u"}function A2(e){e===void 0&&(e="");const t=e.split(" ").map(l=>l.trim()).filter(l=>!!l),n=[];return t.forEach(l=>{n.indexOf(l)<0&&n.push(l)}),n.join(" ")}function p9(e){return e===void 0&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function b9(e){let{swiper:t,slides:n,passedParams:l,changedParams:r,nextEl:o,prevEl:i,scrollbarEl:a,paginationEl:g}=e;const s=r.filter(w=>w!=="children"&&w!=="direction"&&w!=="wrapperClass"),{params:I,pagination:d,navigation:u,scrollbar:C,virtual:h,thumbs:f}=t;let y,A,m,p,b,Z,V,S;r.includes("thumbs")&&l.thumbs&&l.thumbs.swiper&&I.thumbs&&!I.thumbs.swiper&&(y=!0),r.includes("controller")&&l.controller&&l.controller.control&&I.controller&&!I.controller.control&&(A=!0),r.includes("pagination")&&l.pagination&&(l.pagination.el||g)&&(I.pagination||I.pagination===!1)&&d&&!d.el&&(m=!0),r.includes("scrollbar")&&l.scrollbar&&(l.scrollbar.el||a)&&(I.scrollbar||I.scrollbar===!1)&&C&&!C.el&&(p=!0),r.includes("navigation")&&l.navigation&&(l.navigation.prevEl||i)&&(l.navigation.nextEl||o)&&(I.navigation||I.navigation===!1)&&u&&!u.prevEl&&!u.nextEl&&(b=!0);const G=w=>{t[w]&&(t[w].destroy(),w==="navigation"?(t.isElement&&(t[w].prevEl.remove(),t[w].nextEl.remove()),I[w].prevEl=void 0,I[w].nextEl=void 0,t[w].prevEl=void 0,t[w].nextEl=void 0):(t.isElement&&t[w].el.remove(),I[w].el=void 0,t[w].el=void 0))};r.includes("loop")&&t.isElement&&(I.loop&&!l.loop?Z=!0:!I.loop&&l.loop?V=!0:S=!0),s.forEach(w=>{if(Io(I[w])&&Io(l[w]))Object.assign(I[w],l[w]),(w==="navigation"||w==="pagination"||w==="scrollbar")&&"enabled"in l[w]&&!l[w].enabled&&G(w);else{const B=l[w];(B===!0||B===!1)&&(w==="navigation"||w==="pagination"||w==="scrollbar")?B===!1&&G(w):I[w]=l[w]}}),s.includes("controller")&&!A&&t.controller&&t.controller.control&&I.controller&&I.controller.control&&(t.controller.control=I.controller.control),r.includes("children")&&n&&h&&I.virtual.enabled?(h.slides=n,h.update(!0)):r.includes("virtual")&&h&&I.virtual.enabled&&(n&&(h.slides=n),h.update(!0)),r.includes("children")&&n&&I.loop&&(S=!0),y&&f.init()&&f.update(!0),A&&(t.controller.control=I.controller.control),m&&(t.isElement&&(!g||typeof g=="string")&&(g=document.createElement("div"),g.classList.add("swiper-pagination"),g.part.add("pagination"),t.el.appendChild(g)),g&&(I.pagination.el=g),d.init(),d.render(),d.update()),p&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),t.el.appendChild(a)),a&&(I.scrollbar.el=a),C.init(),C.updateSize(),C.setTranslate()),b&&(t.isElement&&((!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-next"),o.innerHTML=t.hostEl.constructor.nextButtonSvg,o.part.add("button-next"),t.el.appendChild(o)),(!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-prev"),i.innerHTML=t.hostEl.constructor.prevButtonSvg,i.part.add("button-prev"),t.el.appendChild(i))),o&&(I.navigation.nextEl=o),i&&(I.navigation.prevEl=i),u.init(),u.update()),r.includes("allowSlideNext")&&(t.allowSlideNext=l.allowSlideNext),r.includes("allowSlidePrev")&&(t.allowSlidePrev=l.allowSlidePrev),r.includes("direction")&&t.changeDirection(l.direction,!1),(Z||S)&&t.loopDestroy(),(V||S)&&t.loopCreate(),t.update()}function y9(e,t){e===void 0&&(e={}),t===void 0&&(t=!0);const n={on:{}},l={},r={};_o(n,pA),n._emitClasses=!0,n.init=!1;const o={},i=I2.map(g=>g.replace(/_/,"")),a=Object.assign({},e);return Object.keys(a).forEach(g=>{typeof e[g]>"u"||(i.indexOf(g)>=0?Io(e[g])?(n[g]={},r[g]={},_o(n[g],e[g]),_o(r[g],e[g])):(n[g]=e[g],r[g]=e[g]):g.search(/on[A-Z]/)===0&&typeof e[g]=="function"?t?l[`${g[2].toLowerCase()}${g.substr(3)}`]=e[g]:n.on[`${g[2].toLowerCase()}${g.substr(3)}`]=e[g]:o[g]=e[g])}),["navigation","pagination","scrollbar"].forEach(g=>{n[g]===!0&&(n[g]={}),n[g]===!1&&delete n[g]}),{params:n,passedParams:r,rest:o,events:l}}function Z9(e,t){let{el:n,nextEl:l,prevEl:r,paginationEl:o,scrollbarEl:i,swiper:a}=e;d2(t)&&l&&r&&(a.params.navigation.nextEl=l,a.originalParams.navigation.nextEl=l,a.params.navigation.prevEl=r,a.originalParams.navigation.prevEl=r),u2(t)&&o&&(a.params.pagination.el=o,a.originalParams.pagination.el=o),C2(t)&&i&&(a.params.scrollbar.el=i,a.originalParams.scrollbar.el=i),a.init(n)}function v9(e,t,n,l,r){const o=[];if(!t)return o;const i=g=>{o.indexOf(g)<0&&o.push(g)};if(n&&l){const g=l.map(r),s=n.map(r);g.join("")!==s.join("")&&i("children"),l.length!==n.length&&i("children")}return I2.filter(g=>g[0]==="_").map(g=>g.replace(/_/,"")).forEach(g=>{if(g in e&&g in t)if(Io(e[g])&&Io(t[g])){const s=Object.keys(e[g]),I=Object.keys(t[g]);s.length!==I.length?i(g):(s.forEach(d=>{e[g][d]!==t[g][d]&&i(g)}),I.forEach(d=>{e[g][d]!==t[g][d]&&i(g)}))}else e[g]!==t[g]&&i(g)}),o}const G9=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function Cc(){return Cc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Cc.apply(this,arguments)}function m2(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function h2(e){const t=[];return U.Children.toArray(e).forEach(n=>{m2(n)?t.push(n):n.props&&n.props.children&&h2(n.props.children).forEach(l=>t.push(l))}),t}function B9(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return U.Children.toArray(e).forEach(l=>{if(m2(l))t.push(l);else if(l.props&&l.props.slot&&n[l.props.slot])n[l.props.slot].push(l);else if(l.props&&l.props.children){const r=h2(l.props.children);r.length>0?r.forEach(o=>t.push(o)):n["container-end"].push(l)}else n["container-end"].push(l)}),{slides:t,slots:n}}function S9(e,t,n){if(!n)return null;const l=I=>{let d=I;return I<0?d=t.length+I:d>=t.length&&(d=d-t.length),d},r=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:o,to:i}=n,a=e.params.loop?-t.length:0,g=e.params.loop?t.length*2:t.length,s=[];for(let I=a;I<g;I+=1)I>=o&&I<=i&&s.push(t[l(I)]);return s.map((I,d)=>U.cloneElement(I,{swiper:e,style:r,key:I.props.virtualIndex||I.key||`slide-${d}`}))}function da(e,t){return typeof window>"u"?v.useEffect(e,t):v.useLayoutEffect(e,t)}const Y0=v.createContext(null),V9=v.createContext(null),Bh=v.forwardRef(function(e,t){let{className:n,tag:l="div",wrapperTag:r="div",children:o,onSwiper:i,...a}=e===void 0?{}:e,g=!1;const[s,I]=v.useState("swiper"),[d,u]=v.useState(null),[C,h]=v.useState(!1),f=v.useRef(!1),y=v.useRef(null),A=v.useRef(null),m=v.useRef(null),p=v.useRef(null),b=v.useRef(null),Z=v.useRef(null),V=v.useRef(null),S=v.useRef(null),{params:G,passedParams:w,rest:B,events:W}=y9(a),{slides:R,slots:k}=B9(o),x=()=>{h(!C)};Object.assign(G.on,{_containerClasses(N,J){I(J)}});const H=()=>{Object.assign(G.on,W),g=!0;const N={...G};if(delete N.wrapperClass,A.current=new Gh(N),A.current.virtual&&A.current.params.virtual.enabled){A.current.virtual.slides=R;const J={cache:!1,slides:R,renderExternal:u,renderExternalUpdate:!1};_o(A.current.params.virtual,J),_o(A.current.originalParams.virtual,J)}};y.current||H(),A.current&&A.current.on("_beforeBreakpoint",x);const M=()=>{g||!W||!A.current||Object.keys(W).forEach(N=>{A.current.on(N,W[N])})},T=()=>{!W||!A.current||Object.keys(W).forEach(N=>{A.current.off(N,W[N])})};v.useEffect(()=>()=>{A.current&&A.current.off("_beforeBreakpoint",x)}),v.useEffect(()=>{!f.current&&A.current&&(A.current.emitSlidesClasses(),f.current=!0)}),da(()=>{if(t&&(t.current=y.current),!!y.current)return A.current.destroyed&&H(),Z9({el:y.current,nextEl:b.current,prevEl:Z.current,paginationEl:V.current,scrollbarEl:S.current,swiper:A.current},G),i&&!A.current.destroyed&&i(A.current),()=>{A.current&&!A.current.destroyed&&A.current.destroy(!0,!1)}},[]),da(()=>{M();const N=v9(w,m.current,R,p.current,J=>J.key);return m.current=w,p.current=R,N.length&&A.current&&!A.current.destroyed&&b9({swiper:A.current,slides:R,passedParams:w,changedParams:N,nextEl:b.current,prevEl:Z.current,scrollbarEl:S.current,paginationEl:V.current}),()=>{T()}}),da(()=>{G9(A.current)},[d]);function E(){return G.virtual?S9(A.current,R,d):R.map((N,J)=>U.cloneElement(N,{swiper:A.current,swiperSlideIndex:J}))}return U.createElement(l,Cc({ref:y,className:A2(`${s}${n?` ${n}`:""}`)},B),U.createElement(V9.Provider,{value:A.current},k["container-start"],U.createElement(r,{className:p9(G.wrapperClass)},k["wrapper-start"],E(),k["wrapper-end"]),d2(G)&&U.createElement(U.Fragment,null,U.createElement("div",{ref:Z,className:"swiper-button-prev"}),U.createElement("div",{ref:b,className:"swiper-button-next"})),C2(G)&&U.createElement("div",{ref:S,className:"swiper-scrollbar"}),u2(G)&&U.createElement("div",{ref:V,className:"swiper-pagination"}),k["container-end"]))});Bh.displayName="Swiper";const Sh=v.forwardRef(function(e,t){let{tag:n="div",children:l,className:r="",swiper:o,zoom:i,lazy:a,virtualIndex:g,swiperSlideIndex:s,...I}=e===void 0?{}:e;const d=v.useRef(null),[u,C]=v.useState("swiper-slide"),[h,f]=v.useState(!1);function y(b,Z,V){Z===d.current&&C(V)}da(()=>{if(typeof s<"u"&&(d.current.swiperSlideIndex=s),t&&(t.current=d.current),!(!d.current||!o)){if(o.destroyed){u!=="swiper-slide"&&C("swiper-slide");return}return o.on("_slideClass",y),()=>{o&&o.off("_slideClass",y)}}}),da(()=>{o&&d.current&&!o.destroyed&&C(o.getSlideClasses(d.current))},[o]);const A={isActive:u.indexOf("swiper-slide-active")>=0,isVisible:u.indexOf("swiper-slide-visible")>=0,isPrev:u.indexOf("swiper-slide-prev")>=0,isNext:u.indexOf("swiper-slide-next")>=0},m=()=>typeof l=="function"?l(A):l,p=()=>{f(!0)};return U.createElement(n,Cc({ref:d,className:A2(`${u}${r?` ${r}`:""}`),"data-swiper-slide-index":g,onLoad:p},I),i&&U.createElement(Y0.Provider,{value:A},U.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof i=="number"?i:void 0},m(),a&&!h&&U.createElement("div",{className:"swiper-lazy-preloader"}))),!i&&U.createElement(Y0.Provider,{value:A},m(),a&&!h&&U.createElement("div",{className:"swiper-lazy-preloader"})))});Sh.displayName="SwiperSlide";function W9(e,t,n,l){return e.params.createElements&&Object.keys(l).forEach(r=>{if(!n[r]&&n.auto===!0){let o=qn(e.el,`.${l[r]}`)[0];o||(o=dc("div",l[r]),o.className=l[r],e.el.append(o)),n[r]=o,t[r]=o}}),n}function zi(e){return e===void 0&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function f2(e){let{swiper:t,extendParams:n,on:l,emit:r}=e;const o="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:A=>A,formatFractionTotal:A=>A,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`,paginationDisabledClass:`${o}-disabled`}}),t.pagination={el:null,bullets:[]};let i,a=0;function g(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function s(A,m){const{bulletActiveClass:p}=t.params.pagination;A&&(A=A[`${m==="prev"?"previous":"next"}ElementSibling`],A&&(A.classList.add(`${p}-${m}`),A=A[`${m==="prev"?"previous":"next"}ElementSibling`],A&&A.classList.add(`${p}-${m}-${m}`)))}function I(A){const m=A.target.closest(zi(t.params.pagination.bulletClass));if(!m)return;A.preventDefault();const p=uc(m)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===p)return;t.slideToLoop(p)}else t.slideTo(p)}function d(){const A=t.rtl,m=t.params.pagination;if(g())return;let p=t.pagination.el;p=al(p);let b,Z;const V=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,S=t.params.loop?Math.ceil(V/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(Z=t.previousRealIndex||0,b=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(b=t.snapIndex,Z=t.previousSnapIndex):(Z=t.previousIndex||0,b=t.activeIndex||0),m.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const G=t.pagination.bullets;let w,B,W;if(m.dynamicBullets&&(i=hA(G[0],t.isHorizontal()?"width":"height",!0),p.forEach(R=>{R.style[t.isHorizontal()?"width":"height"]=`${i*(m.dynamicMainBullets+4)}px`}),m.dynamicMainBullets>1&&Z!==void 0&&(a+=b-(Z||0),a>m.dynamicMainBullets-1?a=m.dynamicMainBullets-1:a<0&&(a=0)),w=Math.max(b-a,0),B=w+(Math.min(G.length,m.dynamicMainBullets)-1),W=(B+w)/2),G.forEach(R=>{const k=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(x=>`${m.bulletActiveClass}${x}`)].map(x=>typeof x=="string"&&x.includes(" ")?x.split(" "):x).flat();R.classList.remove(...k)}),p.length>1)G.forEach(R=>{const k=uc(R);k===b?R.classList.add(...m.bulletActiveClass.split(" ")):t.isElement&&R.setAttribute("part","bullet"),m.dynamicBullets&&(k>=w&&k<=B&&R.classList.add(...`${m.bulletActiveClass}-main`.split(" ")),k===w&&s(R,"prev"),k===B&&s(R,"next"))});else{const R=G[b];if(R&&R.classList.add(...m.bulletActiveClass.split(" ")),t.isElement&&G.forEach((k,x)=>{k.setAttribute("part",x===b?"bullet-active":"bullet")}),m.dynamicBullets){const k=G[w],x=G[B];for(let H=w;H<=B;H+=1)G[H]&&G[H].classList.add(...`${m.bulletActiveClass}-main`.split(" "));s(k,"prev"),s(x,"next")}}if(m.dynamicBullets){const R=Math.min(G.length,m.dynamicMainBullets+4),k=(i*R-i)/2-W*i,x=A?"right":"left";G.forEach(H=>{H.style[t.isHorizontal()?x:"top"]=`${k}px`})}}p.forEach((G,w)=>{if(m.type==="fraction"&&(G.querySelectorAll(zi(m.currentClass)).forEach(B=>{B.textContent=m.formatFractionCurrent(b+1)}),G.querySelectorAll(zi(m.totalClass)).forEach(B=>{B.textContent=m.formatFractionTotal(S)})),m.type==="progressbar"){let B;m.progressbarOpposite?B=t.isHorizontal()?"vertical":"horizontal":B=t.isHorizontal()?"horizontal":"vertical";const W=(b+1)/S;let R=1,k=1;B==="horizontal"?R=W:k=W,G.querySelectorAll(zi(m.progressbarFillClass)).forEach(x=>{x.style.transform=`translate3d(0,0,0) scaleX(${R}) scaleY(${k})`,x.style.transitionDuration=`${t.params.speed}ms`})}m.type==="custom"&&m.renderCustom?(G.innerHTML=m.renderCustom(t,b+1,S),w===0&&r("paginationRender",G)):(w===0&&r("paginationRender",G),r("paginationUpdate",G)),t.params.watchOverflow&&t.enabled&&G.classList[t.isLocked?"add":"remove"](m.lockClass)})}function u(){const A=t.params.pagination;if(g())return;const m=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let p=t.pagination.el;p=al(p);let b="";if(A.type==="bullets"){let Z=t.params.loop?Math.ceil(m/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&Z>m&&(Z=m);for(let V=0;V<Z;V+=1)A.renderBullet?b+=A.renderBullet.call(t,V,A.bulletClass):b+=`<${A.bulletElement} ${t.isElement?'part="bullet"':""} class="${A.bulletClass}"></${A.bulletElement}>`}A.type==="fraction"&&(A.renderFraction?b=A.renderFraction.call(t,A.currentClass,A.totalClass):b=`<span class="${A.currentClass}"></span> / <span class="${A.totalClass}"></span>`),A.type==="progressbar"&&(A.renderProgressbar?b=A.renderProgressbar.call(t,A.progressbarFillClass):b=`<span class="${A.progressbarFillClass}"></span>`),t.pagination.bullets=[],p.forEach(Z=>{A.type!=="custom"&&(Z.innerHTML=b||""),A.type==="bullets"&&t.pagination.bullets.push(...Z.querySelectorAll(zi(A.bulletClass)))}),A.type!=="custom"&&r("paginationRender",p[0])}function C(){t.params.pagination=W9(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const A=t.params.pagination;if(!A.el)return;let m;typeof A.el=="string"&&t.isElement&&(m=t.el.querySelector(A.el)),!m&&typeof A.el=="string"&&(m=[...document.querySelectorAll(A.el)]),m||(m=A.el),!(!m||m.length===0)&&(t.params.uniqueNavElements&&typeof A.el=="string"&&Array.isArray(m)&&m.length>1&&(m=[...t.el.querySelectorAll(A.el)],m.length>1&&(m=m.filter(p=>i2(p,".swiper")[0]===t.el)[0])),Array.isArray(m)&&m.length===1&&(m=m[0]),Object.assign(t.pagination,{el:m}),m=al(m),m.forEach(p=>{A.type==="bullets"&&A.clickable&&p.classList.add(...(A.clickableClass||"").split(" ")),p.classList.add(A.modifierClass+A.type),p.classList.add(t.isHorizontal()?A.horizontalClass:A.verticalClass),A.type==="bullets"&&A.dynamicBullets&&(p.classList.add(`${A.modifierClass}${A.type}-dynamic`),a=0,A.dynamicMainBullets<1&&(A.dynamicMainBullets=1)),A.type==="progressbar"&&A.progressbarOpposite&&p.classList.add(A.progressbarOppositeClass),A.clickable&&p.addEventListener("click",I),t.enabled||p.classList.add(A.lockClass)}))}function h(){const A=t.params.pagination;if(g())return;let m=t.pagination.el;m&&(m=al(m),m.forEach(p=>{p.classList.remove(A.hiddenClass),p.classList.remove(A.modifierClass+A.type),p.classList.remove(t.isHorizontal()?A.horizontalClass:A.verticalClass),A.clickable&&(p.classList.remove(...(A.clickableClass||"").split(" ")),p.removeEventListener("click",I))})),t.pagination.bullets&&t.pagination.bullets.forEach(p=>p.classList.remove(...A.bulletActiveClass.split(" ")))}l("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const A=t.params.pagination;let{el:m}=t.pagination;m=al(m),m.forEach(p=>{p.classList.remove(A.horizontalClass,A.verticalClass),p.classList.add(t.isHorizontal()?A.horizontalClass:A.verticalClass)})}),l("init",()=>{t.params.pagination.enabled===!1?y():(C(),u(),d())}),l("activeIndexChange",()=>{typeof t.snapIndex>"u"&&d()}),l("snapIndexChange",()=>{d()}),l("snapGridLengthChange",()=>{u(),d()}),l("destroy",()=>{h()}),l("enable disable",()=>{let{el:A}=t.pagination;A&&(A=al(A),A.forEach(m=>m.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),l("lock unlock",()=>{d()}),l("click",(A,m)=>{const p=m.target,b=al(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&b&&b.length>0&&!p.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&p===t.navigation.nextEl||t.navigation.prevEl&&p===t.navigation.prevEl))return;const Z=b[0].classList.contains(t.params.pagination.hiddenClass);r(Z===!0?"paginationShow":"paginationHide"),b.forEach(V=>V.classList.toggle(t.params.pagination.hiddenClass))}});const f=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:A}=t.pagination;A&&(A=al(A),A.forEach(m=>m.classList.remove(t.params.pagination.paginationDisabledClass))),C(),u(),d()},y=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:A}=t.pagination;A&&(A=al(A),A.forEach(m=>m.classList.add(t.params.pagination.paginationDisabledClass))),h()};Object.assign(t.pagination,{enable:f,disable:y,render:u,update:d,init:C,destroy:h})}const p2=[{className:"basico",plan:"Bsico",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlace a 1 red social","Vnculo perfil Know me"],cost:0,color:"#495456"},{className:"personal",plan:"Personal",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlace a 4 red social","Vnculo perfil Know me","Tarjeta de proximidad con logo"],cost:["99","980"],color:"#38B6FF"},{className:"freelance",plan:"Freelance",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 450 caracteres ","Enlace a 6 red social","Vnculo perfil Know me","Tarjeta de proximidad con diseo personalizado","Alta en network Know me"],cost:["149","1,490"],color:"#38B6FF"},{className:"emprendedor",plan:"Emprendedor",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlaces ilimiados a redes social","Vnculo perfil Know me","1000 Tarjetas de impresas con diseo personalizado","Alta en network Know me","Alta de archivos PDF en tu perfil Emprendedor","Galeria de imagenes"],cost:["199","1,990"],color:"#38B6FF"},{className:"ecommerce",plan:"Ecommerce",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlaces ilimiados a redes social","Vnculo perfil Know me","1000 Tarjetas de impresas con diseo personalizado","Alta en network Know me","Alta de archivos PDF en tu perfil Emprendedor","Galeria de imagenes","Tienda en linea"],cost:["330","3,190"],color:"#FD6202"}],b2={knowme_network:"Plataforma Knowme",proximity_card:["Tarjeta NFC - Blanco","Tarjeta NFC - Personalizada"],qr_code:"Codigo QR",social_media:"Redes Sociales (Links - Apps)",web_page_url:"Link nico para compartir",personal_information:"Informacin Personal",business_information:"Informacin Business",profile_img:"Foto de Perfil",cover_img:"Foto de Portada",share_contact:"Intercambio de Contactos",ai_card_read:"Lectura AI de Tarjetas Tradicionales",contact_management:"Gestin de Contactos Recibidos",payment_links:"Enlaces de Pago",theme_selection:"Eleccin de Tema (Claro / Oscuro)",catalog:"Catlogo (Productos y Servicios)",service_directory:"Directorio de Servicios (Opcional)",directory_key_words:["5 Palabras clave para directorio","15 Palabras clave para directorio","Palabras clave ilimitadas para directorio"],knowme_discount:"Mdulo de descuentos a comunidad KnowMe",business_personalization:"Personalizacin Empresarial (Logotipo y pantalones)",gallery:"Galera",broshure:"Broshure o PDF",video:"Video",dashboard:"Dashboard Empresarial",data_export:"Exportacin de Datos",user_management:"Gestin de Usuarios",masive_import:"Importacin Masiva (csv, sheets, excels",analytics:"Analticas",equipment_management:"Gestin de Equipos",card_reasignment:"Reasignacin de Tarjetas",multiple_sub_business:"Multiples Sub-Empresas",crm_integration:"Automatizaciones personalizadas e integraciones con otros sistemas o CRM's"},ol=()=>{const e="https://api.knowmeapp.com",t=localStorage.getItem("token"),{user:n}=v.useContext(yt);return{getPlans:async()=>await pe.get(`${e}/api/plans`),getProfile:async(G="")=>{let w;return G==""?w=await pe.get(`${e}/api/profile/username/${n.username}`,{headers:{"x-token":t}}):w=await pe.get(`${e}/api/profile/username/${G}`,{headers:{"x-token":t}}),w},getSocialMedia:async(G="")=>{let w;return G==""?w=await pe.get(`${e}/api/social_media_v2/${n.id}`,{headers:{"x-token":t}}):w=await pe.get(`${e}/api/social_media_v2/${G}`,{headers:{"x-token":t}}),w},postScheduleDay:async G=>(G.id_user=n.id,await pe.post(`${e}/api/schedule_day`,G,{headers:{"x-token":t}})),updateSocialMedia:async G=>(G.id_user=n.id,await pe.put(`${e}/api/social_media/${n.id}`,G,{headers:{"x-token":t}})),createProfile:async G=>(G.username=n.username,await pe.post(`${e}/api/profile`,G,{headers:{"x-token":t}})),getSchedule:async(G="")=>{let w;return G==""?w=await pe.get(`${e}/api/schedule_day/${n.id}`,{headers:{"x-token":t}}):w=await pe.get(`${e}/api/schedule_day/${G}`,{headers:{"x-token":t}}),w},updateScheduleDay:async G=>(G.id_user=n.id,await pe.put(`${e}/api/schedule_day/${n.id}/${G.day}`,G,{headers:{"x-token":t}})),updateProfile:async G=>(G.username=n.username,await pe.put(`${e}/api/profile/${n.username}`,G,{headers:{"x-token":t}})),getProfiles:async()=>await pe.get(`${e}/api/profile/`),getCategories:async()=>await pe.get(`${e}/api/categories/`,{headers:{"x-token":t}}),getProfilesFilter:async(G,w)=>await pe.get(`${e}/api/profile/filter/${G}/${w}`),getFilterCategories:async G=>await pe.get(`${e}/api/profile/filter/${G}`),createSocialMedia:async G=>(G.id_user=n.id,await pe.post(`${e}/api/social_media`,G,{headers:{"x-token":t}})),updateProfilePhoto:async G=>await pe.post(`${e}/api/profile/uploadAvatar`,G,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}}),deleteSocialMedia:async(G,w)=>await pe.delete(`${e}/api/social_media_v2/${w}/${G}`,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}}),getUser:async G=>await pe.get(`${e}/api/auth/user/${G}`,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}}),validateUser:async()=>await pe.get(`${e}/api/user`,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}}),getAlgolia:async(G,w)=>await pe.get(`${e}/api/profile/search/${w}?page=${G}&hitsPerPage=6`,{headers:{"x-token":t}}),uploadFromDataUri:async G=>{const w=await pe.post(`${e}/api/profile/uploadFromDataUri`,G,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}});return console.log(w),w},validateCard:async G=>{try{return await pe.get(`${e}/api/card/validate/${G}`,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}})}catch(w){return w.response}}}};const R9=({plan:e,setSelectedPlan:t,cardsPlan:n})=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"plan-card ",style:{borderColor:"#"+n.color_card},children:[c.jsxs("div",{className:"info-card",children:[c.jsx("label",{className:"plan-title",style:{color:"#"+n.color_card},children:n.name_plan}),c.jsx("ul",{className:"plan-list p-4",children:Object.entries(b2).map(l=>{if(n[l[0]]==!0)return typeof l[1]=="string"?c.jsxs("li",{style:{color:"#"+n.color_card},children:[" ",l[1]]},l[0]):c.jsxs("li",{style:{color:"#"+n.color_card},children:[" ",l[1][n[l[0]]-1]]},l[0])})})]}),c.jsxs("div",{className:"plan-footer",children:[c.jsxs(Re,{className:"plan-cost",style:{color:"#"+n.color_card},children:[c.jsx(se,{xs:4,children:parseFloat(n.unique_cost)>0&&parseFloat(n.annual_cost)>0&&"MXN"}),c.jsx(se,{xs:8,className:"plan-month",children:parseFloat(n.unique_cost)<0&&parseFloat(n.annual_cost)<0?"Contctanos":n.unique_cost=="0.00"&&n.annual_cost=="0.00"?"Gratis":n.unique_cost!="0.00"?`$${n.unique_cost} Pago nico`:`$${n.annual_cost} Anual`})]}),c.jsx(et,{className:`plan-btn ${n.name_plan}`,style:{color:"#"+n.color_card,borderColor:"#"+n.color_card,cursor:"pointer"},onClick:()=>{t(n)},children:`Elige ${n.name_plan}`})]})]}),c.jsx("style",{children:`
          button.${n.name_plan}:hover,
          button.${n.name_plan}:active {
            background-color: ${"#"+n.color_card} !important;
            color: linear-gradient(var(--background-gradient)) !important;
          }
        `})]}),w9=({selectedPlan:e,setSelectedPlan:t})=>{const[n,l]=v.useState(null),r=ol(),o=async()=>{const i=await r.getPlans();l(i.data.plans)};return v.useEffect(()=>{o()},[]),c.jsx(c.Fragment,{children:n!=null&&c.jsx(Bh,{slidesPerView:1.3,centeredSlides:!0,spaceBetween:30,modules:[f2],className:"mySwiper",children:p2.map((i,a)=>(i.id_plan=n[a].id_plan,i.cost=[n[a].month_cost,n[a].annual_cost],i.color="#"+n[a].color_card,c.jsx(Sh,{children:c.jsx(R9,{plan:i,setSelectedPlan:t,cardsPlan:n[a]})},a)))})})};const k9=({selectedPlan:e})=>{const[t,n]=v.useState(!1),l=cn(),r=Sr(),o=It();v.useContext(yt),v.useEffect(()=>{l.state==null&&o("/")},[l]);const i=async()=>{const a=window.location.href.replace("plan",""),g={id_plan_fk:e.id_plan,successUrl:`${a}login`,cancelUrl:`${a}registro`},{usuario:s,terms:I,consent:d,email:u,nombre:C,password:h,apellido:f}=l.state.user,y={username:s,name:C,lastname:f,email:u,password:h,mailing_status:d,terms_policies_status:I,id_plan_fk:e.id_plan,id_user_type_fk:2};try{n(!0);const{data:A}=await r.createUser(y),{data:m}=await r.addPlan(A.id,g,A.token);n(!1),window.open(m.user.stripe_session_url,"_self")}catch{n(!1),o("/registro")}};return c.jsxs(c.Fragment,{children:[t&&c.jsx(Zh,{}),c.jsx("div",{className:"plan-pay-option"}),c.jsx("div",{className:"plan-pay-btn",children:c.jsx(et,{onClick:i,children:e.name_plan!="Bsico"?"Pagar con PayPal":"Comenzar"})}),c.jsx(In,{position:"top-center",richColors:!0})]})};var X9={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function x9(e){if(typeof e=="number")return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();n.includes(".")?t=parseFloat(n):t=parseInt(n,10);var l=(e.match(/[^0-9]*$/)||"").toString();return X9[l]?{value:t,unit:l}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function tu(e){var t=x9(e);return"".concat(t.value).concat(t.unit)}var J9=function(e,t,n){var l="react-spinners-".concat(e,"-").concat(n);if(typeof window>"u"||!window.document)return l;var r=document.createElement("style");document.head.appendChild(r);var o=r.sheet,i=`
    @keyframes `.concat(l,` {
      `).concat(t,`
    }
  `);return o&&o.insertRule(i,0),l},Ac=globalThis&&globalThis.__assign||function(){return Ac=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ac.apply(this,arguments)},N9=globalThis&&globalThis.__rest||function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]]);return n},Y9=J9("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");function H9(e){var t=e.loading,n=t===void 0?!0:t,l=e.color,r=l===void 0?"#000000":l,o=e.speedMultiplier,i=o===void 0?1:o,a=e.cssOverride,g=a===void 0?{}:a,s=e.size,I=s===void 0?15:s,d=e.margin,u=d===void 0?2:d,C=N9(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),h=Ac({display:"inherit"},g),f=function(y){return{display:"inline-block",backgroundColor:r,width:tu(I),height:tu(I),margin:tu(u),borderRadius:"100%",animation:"".concat(Y9," ").concat(.7/i,"s ").concat(y%2?"0s":"".concat(.35/i,"s")," infinite linear"),animationFillMode:"both"}};return n?v.createElement("span",Ac({style:h},C),v.createElement("span",{style:f(1)}),v.createElement("span",{style:f(2)}),v.createElement("span",{style:f(3)})):null}const Vr=({fullScreen:e})=>c.jsx("div",{className:"loading-screen",style:e==!0?{height:"100vh"}:{},children:c.jsxs("div",{className:"loading-container",children:[c.jsx(bi,{src:rh,beforeInjection:t=>{t.classList.add("loading-logo")}}),c.jsx(H9,{color:"#597393",size:60,className:"loading-loader"})]})}),F9=()=>{const e=Sr(),t=It(),n=cn(),[l,r]=v.useState(null),o=a=>new Promise(g=>setTimeout(g,a)),i=async()=>{const{usuario:a,terms:g,consent:s,email:I,nombre:d,password:u,apellido:C}=n.state.user,h={username:a,name:d,lastname:C,email:I,password:u,mailing_status:s,terms_policies_status:g,id_plan_fk:l.id_plan,id_user_type_fk:2};try{const f=await e.createUser(h);console.log(f),await o(1e3),t("/")}catch(f){console.log(f),await o(1e3),t("/registro")}};return v.useEffect(()=>{n.state==null&&t("/login")},[]),v.useEffect(()=>{l&&l.unique_cost=="0.00"&&l.annual_cost=="0.00"&&i()},[l]),l&&l.unique_cost=="0.00"&&l.annual_cost=="0.00"?c.jsxs(c.Fragment,{children:[c.jsx(Vr,{fullScreen:!0}),c.jsx(In,{position:"top-center",richColors:!0})]}):c.jsxs("div",{className:"plan-view",children:[c.jsx(Ch,{className:"registro-back",size:33,color:"#FD6202",onClick:()=>{l==null?t("/registro"):r(null)}}),c.jsxs(Re,{children:[c.jsx(se,{}),c.jsx(se,{xs:12,sm:10,className:"plan-container",children:c.jsxs("div",{className:"plan-card-2 ",children:[l!=null&&c.jsxs("label",{className:"plan-title",children:[" ",`Elige tu mtodo de pago para el plan ${l.name_plan}:`]}),l==null&&c.jsxs(c.Fragment,{children:[c.jsx("label",{className:"plan-title",children:"Bienvenido a Know Me!"}),c.jsx("label",{className:"plan-content",children:"Por favor ayudanos a saber como nos adaptamos a ti"}),c.jsx("label",{className:"plan-subtitle",children:"Cul opcin se adapta a tus necesidades?"})]}),l==null?c.jsx(w9,{selectedPlan:l,setSelectedPlan:r}):c.jsx(k9,{selectedPlan:l})]})}),c.jsx(se,{})]}),c.jsx("div",{className:"plan-divider"})]})};function K9(e){return Ce({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"},child:[]}]})(e)}const Ir=({src:e,color:t,size:n,name:l,round:r})=>{const o="https://t4.ftcdn.net/jpg/03/59/58/91/360_F_359589186_JDLl8dIWoBNf1iqEkHxhUeeOulx0wOC5.jpg",i={width:`${n}px`,height:`${n}px`};return c.jsx(c.Fragment,{children:c.jsx("img",{src:e!=""&&e?e:o,alt:l,style:i,className:`inline-block h-6 w-6 object-cover ${r?"rounded-full":"rounded-lg"}`})})};function E9(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.0082 3C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM20 5H4V19H20V5ZM18 15V17H6V15H18ZM12 7V13H6V7H12ZM18 11V13H14V11H18ZM10 9H8V11H10V9ZM18 7V9H14V7H18Z"},child:[]}]})(e)}function M9(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"},child:[]}]})(e)}function y2(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11H13V13H5V16L0 12L5 8V11ZM3.99927 18H6.70835C8.11862 19.2447 9.97111 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C9.97111 4 8.11862 4.75527 6.70835 6H3.99927C5.82368 3.57111 8.72836 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C8.72836 22 5.82368 20.4289 3.99927 18Z"},child:[]}]})(e)}function T9(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 416v64M80 32h192a32 32 0 0 1 32 32v412a4 4 0 0 1-4 4H48h0V64a32 32 0 0 1 32-32zm240 160h112a32 32 0 0 1 32 32v256h0-160 0V208a16 16 0 0 1 16-16z"},child:[]},{tag:"path",attr:{d:"M98.08 431.87a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm80 240a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm80 320a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79z"},child:[]},{tag:"ellipse",attr:{cx:"256",cy:"176",rx:"15.95",ry:"16.03",transform:"rotate(-45 255.99 175.996)"},child:[]},{tag:"path",attr:{d:"M258.08 111.87a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zM400 400a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm-64 160a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16z"},child:[]}]})(e)}function ji(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m184 112 144 144-144 144"},child:[]}]})(e)}function Vh(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}function L9(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M261.56 101.28a8 8 0 0 0-11.06 0L66.4 277.15a8 8 0 0 0-2.47 5.79L63.9 448a32 32 0 0 0 32 32H192a16 16 0 0 0 16-16V328a8 8 0 0 1 8-8h80a8 8 0 0 1 8 8v136a16 16 0 0 0 16 16h96.06a32 32 0 0 0 32-32V282.94a8 8 0 0 0-2.47-5.79z"},child:[]},{tag:"path",attr:{d:"m490.91 244.15-74.8-71.56V64a16 16 0 0 0-16-16h-48a16 16 0 0 0-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0 0 43 267.56L250.5 69.28a8 8 0 0 1 11.06 0l207.52 198.28a16 16 0 0 0 22.59-.44c6.14-6.36 5.63-16.86-.76-22.97z"},child:[]}]})(e)}function z9(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"80",height:"80",x:"336",y:"336",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"64",height:"64",x:"272",y:"272",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"64",height:"64",x:"416",y:"416",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"48",x:"432",y:"272",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"48",x:"272",y:"432",rx:"8",ry:"8"},child:[]},{tag:"path",attr:{d:"M448 32H304a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8zM208 32H64a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8zm32 104H64a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V304a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8z"},child:[]}]})(e)}function j9(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z",clipRule:"evenodd"},child:[]}]})(e)}function U9(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M12,9 L12,0 M15,12 L24,12 M0,12 L9,12 M12,24 L12,15 M12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 Z M3.5,8.5 L1,7.5 M20.5,15.5 L23,16.5 M3,3 L5.5,5.5 M3,3 L5.5,5.5 M18,18 L20.5,20.5 M20.5,3 L18,5.5 M5.5,18 L3,20.5 M12,15 C13.6568542,15 15,13.6568542 15,12 C15,10.3431458 13.6568542,9 12,9 C10.3431458,9 9,10.3431458 9,12 C9,13.6568542 10.3431458,15 12,15 Z M20.5,8.5 L23,7.5 M15.5,3.5 L16.5,1 M15.5,20.5 L16.5,23 M8.5,20.5 L7.5,23 M3.5,15.5 L1,16.5 M8.5,3.5 L7.5,1"},child:[]}]})(e)}const Xr=16,D9=[{option:"Home",icon:c.jsx(tJ,{size:Xr}),url:"/home/"},{option:"Tarjetas",icon:c.jsx(j9,{size:Xr}),url:"/share/"},{option:"Business",icon:c.jsx(T9,{size:Xr}),url:"/business/"},{option:"Contactos",icon:c.jsx(VB,{size:Xr}),url:"/contacts/"},{option:"Perfil",icon:c.jsx(E9,{size:Xr}),url:"/perfil/"},{option:"Ajustes",icon:c.jsx(U9,{style:{rotate:"45deg"},size:Xr}),url:"/settings/"},{option:"Cerrar Sesin",icon:c.jsx(y2,{size:Xr}),url:"/"}];const Xt=()=>{const e=It();v.useContext(yt);const t=()=>{localStorage.removeItem("token"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),localStorage.removeItem("id_plan"),localStorage.removeItem("is_superuser"),e("/login")},n=()=>{e("/upgrade")};return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"sidebar",children:[c.jsx("div",{className:"flex justify-center items-center w-96 pt-10",children:localStorage.getItem("id_plan")=="9"?c.jsx("button",{type:"button",className:"btn bg-gradient-to-r from-pink-500 to-yellow-500 hover:text-slate-100 text-slate-200 subpixel-antialiased",children:"YA ERES BUSINESS"}):c.jsx("button",{onClick:n,type:"button",className:"btn bg-gradient-to-r from-green-400 to-blue-500 hover:from-pink-500 hover:to-yellow-500 text-slate-100 hover:text-slate-200 subpixel-antialiased",children:"UPGRADE"})}),c.jsx("div",{className:"flex flex-col w-96 cursor-pointer",children:c.jsx(Ka.Provider,{value:{color:"#FFF"},children:D9.map(l=>l.option==="Business"&&localStorage.getItem("id_plan")!=="9"?null:c.jsxs("div",{className:"flex justify-start text-white p-2 hover:bg-orange-500 space-x-4 items-center hover:rounded-md",onClick:l.option==="Cerrar Sesin"?t:()=>{e(l.url)},children:[l.icon,c.jsx(V1,{children:l.option})]},l.option))})}),c.jsx("div",{className:"knowme-logo",onClick:()=>e("/home"),children:c.jsx(bi,{src:rh,beforeInjection:l=>{l.classList.add("bottom-logo")}})})]})})};const Z2=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#eeeeee","#795548","#607d8b"],Q9=({setShowCustomButton:e,setCustomButtonParams:t,customButtonParams:n})=>{const[l,r]=v.useState(n.color),{formState:o,onInputChange:i,onResetForm:a,onCheckBoxChange:g}=Br({...n}),s=()=>{t({...o,color:l}),e(!1)};return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"profile-custom-button",children:[c.jsx("div",{className:"profile-x",onClick:()=>{e(!1)},children:c.jsx(Vh,{size:24})}),c.jsx("h5",{children:"Personaliza tu enlace y color del botn:"}),c.jsxs("div",{className:"profile-site",children:[c.jsx(Ah,{size:24,color:"#858585"}),c.jsx("input",{type:"url",className:"profile-site-input",placeholder:o.url,value:o.url,name:"url",onChange:i})]}),c.jsxs("div",{className:"profile-site",children:[c.jsx(K9,{size:24,color:"#858585"}),c.jsx("input",{type:"text",className:"profile-site-input",placeholder:o.text,value:o.text,name:"text",onChange:i})]}),c.jsx("h6",{children:"Elige un color:"}),c.jsx("div",{className:"paleta-color",children:c.jsx(Re,{children:Z2.map(I=>c.jsx(se,{xs:4,md:2,className:"color-option",children:c.jsx("div",{style:{backgroundColor:I,borderColor:l==I?"black":"gray"},onClick:()=>{r(I)}})},I))})}),c.jsx("div",{className:"profile-boton",children:c.jsx(et,{variant:"outline-primary",children:"Ej. CONCENOS"})}),c.jsx("div",{className:"profile-guardar",children:c.jsx(et,{variant:"primary",size:"lg",onClick:s,children:"Guardar"})}),c.jsx("style",{children:`
          .profile-boton button{
            border-color: ${l};
            color: ${l};
          }
          .profile-boton button:hover, .profile-boton button:active{
            background-color: ${l}!important;
            border-color: ${l}!important;
          }
          `})]})})};const H0={Lunes:!1,LunesSt:"08:00",LunesEnd:"17:00",Martes:!1,MartesSt:"08:00",MartesEnd:"17:00",Mircoles:!1,MircolesSt:"08:00",MircolesEnd:"17:00",Jueves:!1,JuevesSt:"08:00",JuevesEnd:"17:00",Viernes:!1,ViernesSt:"08:00",ViernesEnd:"17:00",Sbado:!1,SbadoSt:"08:00",SbadoEnd:"17:00",Domingo:!1,DomingoSt:"08:00",DomingoEnd:"17:00"},ua=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"],P9={6:"PLAN BSICO",7:"PLAN PLUS",8:"PLAN EMPRENDEDOR",9:"PLAN BUSINESS",10:"PLAN MULTIEMPRESAS",23:"PLAN PREMIUM"};function O9({setShowCustomButtonHour:e,setSchedule:t,schedule:n}){const{formState:l,onInputChange:r,onCheckBoxChange:o}=Br(n),[i,a]=v.useState("LunesViernes"),g=()=>{const I={...l};i=="LunesViernes"?ua.forEach(d=>{d=="Sbado"||d=="Domingo"?I[d]=!1:I[d]=!0}):i=="FinesSemana"&&ua.forEach(d=>{d!="Sbado"&&d!="Domingo"?I[d]=!1:I[d]=!0}),e(!1),t(I)},s=()=>i==="LunesViernes"||i==="FinesSemana"?c.jsxs(c.Fragment,{children:[c.jsx("label",{children:"Desde:"}),c.jsx("input",{value:l.LunesSt,name:"LunesSt",onChange:r,type:"time",className:"select-hour-input day-container-hour"}),c.jsx("label",{children:"Hasta:"}),c.jsx("input",{value:l.LunesEnd,name:"LunesEnd",onChange:r,type:"time",className:"select-hour-input day-container-hour"})]}):i==="Personalizado"?ua.map(I=>c.jsxs("div",{className:"day-container-hour",children:[c.jsx("label",{children:I}),c.jsxs(Re,{className:"custom-hour-grid",children:[c.jsx(se,{children:c.jsx("input",{name:`${I}St`,value:l[`${I}St`],onChange:r,type:"time",className:"input-hour-custom select-hour-input"})}),c.jsx(se,{children:c.jsx("input",{name:`${I}End`,value:l[`${I}End`],onChange:r,type:"time",className:"input-hour-custom select-hour-input"})}),c.jsx("input",{name:I,checked:l[I],onChange:o,type:"checkbox",id:`${I}-disponible`})]})]},I)):null;return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"profile-custom-button",children:[c.jsx("div",{className:"profile-x",onClick:()=>{e(!1)},children:c.jsx(Vh,{size:24})}),c.jsx("h5",{children:"Horarios de atencin:"}),c.jsx("p",{children:"En qu horarios te pueden encontrar tus clientes"}),c.jsxs("div",{className:"hour-select-container",children:[c.jsx("label",{children:"Selecciona un horario:"}),c.jsxs("select",{value:i,onChange:I=>a(I.target.value),className:"select-hour-input",children:[c.jsx("option",{value:"LunesViernes",children:"Lunes a Viernes"}),c.jsx("option",{value:"FinesSemana",children:"Fines de Semana"}),c.jsx("option",{value:"Personalizado",children:"Personalizado"})]})]}),c.jsx("div",{className:"custom-inputs-container",children:s()}),c.jsx("div",{className:"schedule-guardar",children:c.jsx(et,{variant:"primary",size:"lg",onClick:g,children:"Guardar"})})]})})}const _9=()=>(v.useState([{coordenadas:[21.88695915277653,-102.29242038583625],popUp:"Zaragoza"},{coordenadas:[21.924763219343827,-102.30465885000585],popUp:"Colosio"},{coordenadas:[21.89441976335907,-102.29520312269968],popUp:"Av. Independencia"},{coordenadas:[21.867415207362505,-102.30284329073551],popUp:"Av Amricas"},{coordenadas:[21.922800254618185,-102.29173215978628],popUp:"Blvd Zacatecas"}]),c.jsx(c.Fragment,{children:c.jsx("div",{className:"profile-map-modal",children:c.jsx("h1",{children:"EN DESARROLLO..."})})}));const q9=({setShowColorPallete:e,setCustomBannerColor:t,customBannerColor:n})=>{const[l,r]=v.useState(n),o=()=>{e(!1)},i=()=>{t(l),e(!1)};return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"color-pallete",children:[c.jsx("div",{className:"profile-x",onClick:i,children:c.jsx(Vh,{size:24})}),c.jsx("div",{className:"paleta-color",children:c.jsx(Re,{children:Z2.map(a=>c.jsx(se,{xs:4,md:2,className:"color-option",children:c.jsx("div",{style:{backgroundColor:a,borderColor:n==a?"black":"gray"},onClick:()=>{t(a)}})},a))})}),c.jsx("div",{className:"pallete-guardar",children:c.jsx(et,{variant:"primary",size:"lg",onClick:o,children:"Guardar"})})]})})};const $9=({handleClick:e,placeText:t})=>{const{formState:n,onInputChange:l}=Br({url:""});return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"input-modal",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:t,onChange:l,name:"url"})}),c.jsx("div",{children:c.jsx(et,{variant:"primary",onClick:()=>{e(n)},children:"Guardar"})})]})})};const ci="/assets/portada-img-default-5dd45fd5.png";function eH(e){return Ce({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm297.1 84L257.3 234.6 379.4 396H283.8L209 298.1 123.3 396H75.8l111-126.9L69.7 116h98l67.7 89.5L313.6 116h47.5zM323.3 367.6L153.4 142.9H125.1L296.9 367.6h26.3z"},child:[]}]})(e)}function tH(e){return Ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(e)}function nH({show:e,setShow:t,activeRed:n,setActiveRed:l}){const r="https://api.knowmeapp.com",o=localStorage.getItem("token"),[i,a]=v.useState(""),[g,s]=v.useState(""),{user:I}=v.useContext(yt),d=async C=>await pe.post(`${r}/api/social_media_v2`,C,{headers:{"x-token":o}}),u=async()=>{let C={name:i,url:g,id:I.id};const h=Ge.loading("Guardando red social");try{await d(C),l([...n,C]),Ge.success(`Red social para ${i} guardado exitosamente`,{id:h}),t(!1)}catch(f){console.error("Failed to update social media:",f),Ge.error("Error al agregar red social",{id:h})}};return c.jsxs(c.Fragment,{children:[c.jsx(In,{position:"top-right",richColors:!0}),c.jsxs(vn,{show:e,centered:!0,onHide:()=>t(!1),children:[c.jsx(vn.Header,{closeButton:!0,children:c.jsx(vn.Title,{children:"Aadir Redes Sociales"})}),c.jsx(vn.Body,{children:i.length===0?c.jsxs(c.Fragment,{children:[c.jsxs(Re,{children:[c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("Facebook"),children:c.jsx(Ih,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})}),c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("Twitter"),children:c.jsx(eH,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})}),c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("TikTok"),children:c.jsx(uh,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})}),c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("Youtube"),children:c.jsx(xB,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})}),c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("Telegram"),children:c.jsx(XB,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})})]}),c.jsxs(Re,{className:"mt-5",children:[c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("Instagram"),children:c.jsx(RB,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})}),c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("Google"),children:c.jsx(WB,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})}),c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("Spotify"),children:c.jsx(kB,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})}),c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("Pinterest"),children:c.jsx(wB,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})}),c.jsx(se,{children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("LinkedIn"),children:c.jsx(dh,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})})]}),c.jsx(Re,{className:"mt-5",children:c.jsx(se,{className:"flex justify-center",children:c.jsx("div",{className:"profileSocial-icon",onClick:()=>a("Custom"),children:c.jsx(Ah,{className:"profileSocial-icon hover:cursor-pointer",color:"orange",size:32})})})})]}):c.jsxs("div",{children:[i==="Custom"?c.jsx(c.Fragment,{children:c.jsx("h2",{className:"addSocial",children:"Aade tu URL personalizada"})}):c.jsx(c.Fragment,{children:c.jsxs("h2",{className:"addSocial",children:["Aade tu usuario de ",i]})}),c.jsx("div",{className:"flex",children:i==="Telegram"?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"number",disabled:!0,placeholder:"+52",className:"mt-3 social-input-info mr-3"}),c.jsx("input",{type:"number",className:"mt-3 social-input-add",value:g,placeholder:"331234912",onChange:C=>s(C.target.value)})]}):c.jsx(c.Fragment,{children:i==="Custom"?c.jsx(c.Fragment,{children:c.jsx("input",{type:"text",className:"mt-3 social-input-add",value:g,placeholder:"www.URL.com",onChange:C=>s(C.target.value)})}):c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",disabled:!0,placeholder:`wwww.${i}.com/`,className:"mt-3 social-input-info mr-3"}),c.jsx("input",{type:"text",className:"mt-3 social-input-add",value:g,placeholder:"usuario",onChange:C=>s(C.target.value)})]})})})]})}),c.jsx(vn.Footer,{children:i.length!==0?c.jsxs(c.Fragment,{children:[c.jsx(et,{variant:"secondary",onClick:()=>a(""),children:"Ir atras"}),c.jsx(et,{variant:"danger",onClick:()=>t(!1),children:"Cerrar"}),c.jsx(et,{variant:"primary",onClick:u,children:"Guardar"})]}):c.jsx(et,{variant:"secondary",onClick:()=>t(!1),children:"Cerrar"})})]})]})}const lH=({name:e,show:t,setShow:n})=>{const l="https://api.knowmeapp.com",r=localStorage.getItem("token"),[o,i]=v.useState(""),{user:a}=v.useContext(yt),g=async I=>await pe.put(`${l}/api/social_media_v2/${a.id}/${e}`,I,{headers:{"x-token":r}}),s=async()=>{const I={name:e,url:o,id:a.id},d=Ge.loading("Guardando red social");try{await g(I),Ge.success(`Red social para ${e} guardado exitosamente`,{id:d}),n(!1)}catch(u){console.error("Failed to update social media:",u),Ge.error("Error al agregar red social",{id:d})}};return c.jsxs(c.Fragment,{children:[c.jsx(In,{position:"top-right",richColors:!0}),c.jsxs(vn,{show:t,centered:!0,onHide:()=>n(!1),children:[c.jsx(vn.Header,{closeButton:!0,children:c.jsxs(vn.Title,{children:["Actualizar ",e]})}),c.jsx(vn.Body,{children:c.jsxs("div",{children:[c.jsxs("h2",{className:"addSocial",children:["Aade tu usuario de ",e]}),c.jsx("input",{type:"text",className:"mt-3 social-input-add",value:o,onChange:I=>i(I.target.value)})]})}),c.jsx(vn.Footer,{children:c.jsxs(c.Fragment,{children:[c.jsx(et,{variant:"danger",onClick:()=>n(!1),children:"Cerrar"}),c.jsx(et,{variant:"primary",onClick:s,children:"Guardar"})]})})]})]})};var bA=function(e,t){return bA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(n[r]=l[r])},bA(e,t)};function rH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");bA(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var St=function(){return St=Object.assign||function(t){for(var n,l=1,r=arguments.length;l<r;l++){n=arguments[l];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},St.apply(this,arguments)};var F0=!1,jr,yA,ZA,Zs,vs,v2,Gs,vA,GA,BA,G2,SA,VA,B2,S2;function Kt(){if(!F0){F0=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(SA=/\b(iPhone|iP[ao]d)/.exec(e),VA=/\b(iP[ao]d)/.exec(e),BA=/Android/i.exec(e),B2=/FBAN\/\w+;/i.exec(e),S2=/Mobile/i.exec(e),G2=!!/Win64/.exec(e),t){jr=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,jr&&document&&document.documentMode&&(jr=document.documentMode);var l=/(?:Trident\/(\d+.\d+))/.exec(e);v2=l?parseFloat(l[1])+4:jr,yA=t[2]?parseFloat(t[2]):NaN,ZA=t[3]?parseFloat(t[3]):NaN,Zs=t[4]?parseFloat(t[4]):NaN,Zs?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),vs=t&&t[1]?parseFloat(t[1]):NaN):vs=NaN}else jr=yA=ZA=vs=Zs=NaN;if(n){if(n[1]){var r=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);Gs=r?parseFloat(r[1].replace("_",".")):!0}else Gs=!1;vA=!!n[2],GA=!!n[3]}else Gs=vA=GA=!1}}var WA={ie:function(){return Kt()||jr},ieCompatibilityMode:function(){return Kt()||v2>jr},ie64:function(){return WA.ie()&&G2},firefox:function(){return Kt()||yA},opera:function(){return Kt()||ZA},webkit:function(){return Kt()||Zs},safari:function(){return WA.webkit()},chrome:function(){return Kt()||vs},windows:function(){return Kt()||vA},osx:function(){return Kt()||Gs},linux:function(){return Kt()||GA},iphone:function(){return Kt()||SA},mobile:function(){return Kt()||SA||VA||BA||S2},nativeApp:function(){return Kt()||B2},android:function(){return Kt()||BA},ipad:function(){return Kt()||VA}},oH=WA,Hg=!!(typeof window<"u"&&window.document&&window.document.createElement),iH={canUseDOM:Hg,canUseWorkers:typeof Worker<"u",canUseEventListeners:Hg&&!!(window.addEventListener||window.attachEvent),canUseViewport:Hg&&!!window.screen,isInWorker:!Hg},aH=iH,V2=aH,W2;V2.canUseDOM&&(W2=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function gH(e,t){if(!V2.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,l=n in document;if(!l){var r=document.createElement("div");r.setAttribute(n,"return;"),l=typeof r[n]=="function"}return!l&&W2&&e==="wheel"&&(l=document.implementation.hasFeature("Events.wheel","3.0")),l}var sH=gH,cH=oH,IH=sH,K0=10,E0=40,M0=800;function R2(e){var t=0,n=0,l=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),l=t*K0,r=n*K0,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(l=e.deltaX),(l||r)&&e.deltaMode&&(e.deltaMode==1?(l*=E0,r*=E0):(l*=M0,r*=M0)),l&&!t&&(t=l<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:l,pixelY:r}}R2.getEventType=function(){return cH.firefox()?"DOMMouseScroll":IH("wheel")?"wheel":"mousewheel"};var dH=R2,uH=dH;const CH=Ln(uH);function AH(e,t,n,l,r,o){o===void 0&&(o=0);var i=Ii(e,t,o),a=i.width,g=i.height,s=Math.min(a,n),I=Math.min(g,l);return s>I*r?{width:I*r,height:I}:{width:s,height:s/r}}function mH(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function Fg(e,t,n,l,r){r===void 0&&(r=0);var o=Ii(t.width,t.height,r),i=o.width,a=o.height;return{x:T0(e.x,i,n.width,l),y:T0(e.y,a,n.height,l)}}function T0(e,t,n,l){var r=t*l/2-n/2;return uI(e,-r,r)}function L0(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function z0(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function hH(e,t,n,l,r,o,i){o===void 0&&(o=0),i===void 0&&(i=!0);var a=i?fH:pH,g=Ii(t.width,t.height,o),s=Ii(t.naturalWidth,t.naturalHeight,o),I={x:a(100,((g.width-n.width/r)/2-e.x/r)/g.width*100),y:a(100,((g.height-n.height/r)/2-e.y/r)/g.height*100),width:a(100,n.width/g.width*100/r),height:a(100,n.height/g.height*100/r)},d=Math.round(a(s.width,I.width*s.width/100)),u=Math.round(a(s.height,I.height*s.height/100)),C=s.width>=s.height*l,h=C?{width:Math.round(u*l),height:u}:{width:d,height:Math.round(d/l)},f=St(St({},h),{x:Math.round(a(s.width-h.width,I.x*s.width/100)),y:Math.round(a(s.height-h.height,I.y*s.height/100))});return{croppedAreaPercentages:I,croppedAreaPixels:f}}function fH(e,t){return Math.min(e,Math.max(0,t))}function pH(e,t){return t}function bH(e,t,n,l,r,o){var i=Ii(t.width,t.height,n),a=uI(l.width/i.width*(100/e.width),r,o),g={x:a*i.width/2-l.width/2-i.width*a*(e.x/100),y:a*i.height/2-l.height/2-i.height*a*(e.y/100)};return{crop:g,zoom:a}}function yH(e,t,n){var l=mH(t);return n.height>n.width?n.height/(e.height*l):n.width/(e.width*l)}function ZH(e,t,n,l,r,o){n===void 0&&(n=0);var i=Ii(t.naturalWidth,t.naturalHeight,n),a=uI(yH(e,t,l),r,o),g=l.height>l.width?l.height/e.height:l.width/e.width,s={x:((i.width-e.width)/2-e.x)*g,y:((i.height-e.height)/2-e.y)*g};return{crop:s,zoom:a}}function j0(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function vH(e){return e*Math.PI/180}function Ii(e,t,n){var l=vH(n);return{width:Math.abs(Math.cos(l)*e)+Math.abs(Math.sin(l)*t),height:Math.abs(Math.sin(l)*e)+Math.abs(Math.cos(l)*t)}}function uI(e,t,n){return Math.min(Math.max(e,t),n)}function Kg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var GH=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,BH=1,SH=3,VH=function(e){rH(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.imageRef=v.createRef(),n.videoRef=v.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var l=!0;n.resizeObserver=new window.ResizeObserver(function(r){if(l){l=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(l){return l.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturemove",n.onGestureMove),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var l=n.computeSizes();l&&(n.emitCropData(),n.setInitialCrop(l)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(l){if(n.props.initialCroppedAreaPercentages){var r=bH(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,l,n.props.minZoom,n.props.maxZoom),o=r.crop,i=r.zoom;n.props.onCropChange(o),n.props.onZoomChange&&n.props.onZoomChange(i)}else if(n.props.initialCroppedAreaPixels){var a=ZH(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,l,n.props.minZoom,n.props.maxZoom),o=a.crop,i=a.zoom;n.props.onCropChange(o),n.props.onZoomChange&&n.props.onZoomChange(i)}},n.computeSizes=function(){var l,r,o,i,a,g,s=n.imageRef.current||n.videoRef.current;if(s&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var I=n.containerRect.width/n.containerRect.height,d=((l=n.imageRef.current)===null||l===void 0?void 0:l.naturalWidth)||((r=n.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,u=((o=n.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,C=s.offsetWidth<d||s.offsetHeight<u,h=d/u,f=void 0;if(C)switch(n.state.mediaObjectFit){default:case"contain":f=I>h?{width:n.containerRect.height*h,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/h};break;case"horizontal-cover":f={width:n.containerRect.width,height:n.containerRect.width/h};break;case"vertical-cover":f={width:n.containerRect.height*h,height:n.containerRect.height};break}else f={width:s.offsetWidth,height:s.offsetHeight};n.mediaSize=St(St({},f),{naturalWidth:d,naturalHeight:u}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var y=n.props.cropSize?n.props.cropSize:AH(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((a=n.state.cropSize)===null||a===void 0?void 0:a.height)!==y.height||((g=n.state.cropSize)===null||g===void 0?void 0:g.width)!==y.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(y),n.setState({cropSize:y},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(y),y}},n.saveContainerPosition=function(){if(n.containerRef){var l=n.containerRef.getBoundingClientRect();n.containerPosition={x:l.left,y:l.top}}},n.onMouseDown=function(l){n.currentDoc&&(l.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(t.getMousePoint(l)))},n.onMouseMove=function(l){return n.onDrag(t.getMousePoint(l))},n.onScroll=function(l){n.currentDoc&&(l.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(l){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(l))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),l.touches.length===2?n.onPinchStart(l):l.touches.length===1&&n.onDragStart(t.getTouchPoint(l.touches[0]))))},n.onTouchMove=function(l){l.preventDefault(),l.touches.length===2?n.onPinchMove(l):l.touches.length===1&&n.onDrag(t.getTouchPoint(l.touches[0]))},n.onGestureStart=function(l){n.currentDoc&&(l.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureMove),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureMove=function(l){if(l.preventDefault(),!n.isTouching){var r=t.getMousePoint(l),o=n.gestureZoomStart-1+l.scale;if(n.setNewZoom(o,r,{shouldUpdatePosition:!0}),n.props.onRotationChange){var i=n.gestureRotationStart+l.rotation;n.props.onRotationChange(i)}}},n.onGestureEnd=function(l){n.cleanEvents()},n.onDragStart=function(l){var r,o,i=l.x,a=l.y;n.dragStartPosition={x:i,y:a},n.dragStartCrop=St({},n.props.crop),(o=(r=n.props).onInteractionStart)===null||o===void 0||o.call(r)},n.onDrag=function(l){var r=l.x,o=l.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(r===void 0||o===void 0)){var i=r-n.dragStartPosition.x,a=o-n.dragStartPosition.y,g={x:n.dragStartCrop.x+i,y:n.dragStartCrop.y+a},s=n.props.restrictPosition?Fg(g,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):g;n.props.onCropChange(s)}}))},n.onDragStopped=function(){var l,r;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(r=(l=n.props).onInteractionEnd)===null||r===void 0||r.call(l)},n.onWheel=function(l){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(l))){l.preventDefault();var r=t.getMousePoint(l),o=CH(l).pixelY,i=n.props.zoom-o*n.props.zoomSpeed/200;n.setNewZoom(i,r,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var a,g;return(g=(a=n.props).onInteractionStart)===null||g===void 0?void 0:g.call(a)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var a,g;return(g=(a=n.props).onInteractionEnd)===null||g===void 0?void 0:g.call(a)})},250)}},n.getPointOnContainer=function(l,r){var o=l.x,i=l.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(o-r.x),y:n.containerRect.height/2-(i-r.y)}},n.getPointOnMedia=function(l){var r=l.x,o=l.y,i=n.props,a=i.crop,g=i.zoom;return{x:(r+a.x)/g,y:(o+a.y)/g}},n.setNewZoom=function(l,r,o){var i=o===void 0?{}:o,a=i.shouldUpdatePosition,g=a===void 0?!0:a;if(!(!n.state.cropSize||!n.props.onZoomChange)){var s=uI(l,n.props.minZoom,n.props.maxZoom);if(g){var I=n.getPointOnContainer(r,n.containerPosition),d=n.getPointOnMedia(I),u={x:d.x*s-I.x,y:d.y*s-I.y},C=n.props.restrictPosition?Fg(u,n.mediaSize,n.state.cropSize,s,n.props.rotation):u;n.props.onCropChange(C)}n.props.onZoomChange(s)}},n.getCropData=function(){if(!n.state.cropSize)return null;var l=n.props.restrictPosition?Fg(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return hH(l,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var l=n.getCropData();if(l){var r=l.croppedAreaPercentages,o=l.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(r,o),n.props.onCropAreaChange&&n.props.onCropAreaChange(r,o)}},n.emitCropAreaChange=function(){var l=n.getCropData();if(l){var r=l.croppedAreaPercentages,o=l.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(r,o)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var l=n.props.restrictPosition?Fg(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;n.props.onCropChange(l),n.emitCropData()}},n}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=GH,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},t.prototype.componentWillUnmount=function(){var n,l;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((l=this.styleRef.parentNode)===null||l===void 0||l.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(n){var l,r,o,i,a,g,s,I,d;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((l=n.cropSize)===null||l===void 0?void 0:l.height)!==((r=this.props.cropSize)===null||r===void 0?void 0:r.height)||((o=n.cropSize)===null||o===void 0?void 0:o.width)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.width)?this.computeSizes():(((a=n.crop)===null||a===void 0?void 0:a.x)!==((g=this.props.crop)===null||g===void 0?void 0:g.x)||((s=n.crop)===null||s===void 0?void 0:s.y)!==((I=this.props.crop)===null||I===void 0?void 0:I.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((d=this.videoRef.current)===null||d===void 0||d.load());var u=this.getObjectFit();u!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:u},this.computeSizes)},t.prototype.getAspect=function(){var n=this.props,l=n.cropSize,r=n.aspect;return l?l.width/l.height:r},t.prototype.getObjectFit=function(){var n,l,r,o;if(this.props.objectFit==="cover"){var i=this.imageRef.current||this.videoRef.current;if(i&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var a=this.containerRect.width/this.containerRect.height,g=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((l=this.videoRef.current)===null||l===void 0?void 0:l.videoWidth)||0,s=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalHeight)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,I=g/s;return I<a?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(n){var l=t.getTouchPoint(n.touches[0]),r=t.getTouchPoint(n.touches[1]);this.lastPinchDistance=L0(l,r),this.lastPinchRotation=z0(l,r),this.onDragStart(j0(l,r))},t.prototype.onPinchMove=function(n){var l=this;if(!(!this.currentDoc||!this.currentWindow)){var r=t.getTouchPoint(n.touches[0]),o=t.getTouchPoint(n.touches[1]),i=j0(r,o);this.onDrag(i),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var a=L0(r,o),g=l.props.zoom*(a/l.lastPinchDistance);l.setNewZoom(g,i,{shouldUpdatePosition:!1}),l.lastPinchDistance=a;var s=z0(r,o),I=l.props.rotation+(s-l.lastPinchRotation);l.props.onRotationChange&&l.props.onRotationChange(I),l.lastPinchRotation=s})}},t.prototype.render=function(){var n=this,l,r=this.props,o=r.image,i=r.video,a=r.mediaProps,g=r.transform,s=r.crop,I=s.x,d=s.y,u=r.rotation,C=r.zoom,h=r.cropShape,f=r.showGrid,y=r.style,A=y.containerStyle,m=y.cropAreaStyle,p=y.mediaStyle,b=r.classes,Z=b.containerClassName,V=b.cropAreaClassName,S=b.mediaClassName,G=(l=this.state.mediaObjectFit)!==null&&l!==void 0?l:this.getObjectFit();return v.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(B){return n.containerRef=B},"data-testid":"container",style:A,className:Kg("reactEasyCrop_Container",Z)},o?v.createElement("img",St({alt:"",className:Kg("reactEasyCrop_Image",G==="contain"&&"reactEasyCrop_Contain",G==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",G==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",S)},a,{src:o,ref:this.imageRef,style:St(St({},p),{transform:g||"translate(".concat(I,"px, ").concat(d,"px) rotate(").concat(u,"deg) scale(").concat(C,")")}),onLoad:this.onMediaLoad})):i&&v.createElement("video",St({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Kg("reactEasyCrop_Video",G==="contain"&&"reactEasyCrop_Contain",G==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",G==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",S)},a,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:St(St({},p),{transform:g||"translate(".concat(I,"px, ").concat(d,"px) rotate(").concat(u,"deg) scale(").concat(C,")")}),controls:!1}),(Array.isArray(i)?i:[{src:i}]).map(function(w){return v.createElement("source",St({key:w.src},w))})),this.state.cropSize&&v.createElement("div",{style:St(St({},m),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:Kg("reactEasyCrop_CropArea",h==="round"&&"reactEasyCrop_CropAreaRound",f&&"reactEasyCrop_CropAreaGrid",V)}))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:SH,minZoom:BH,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},t.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},t.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},t}(v.Component);function WH({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M18 10a.75.75 0 0 1-.75.75H4.66l2.1 1.95a.75.75 0 1 1-1.02 1.1l-3.5-3.25a.75.75 0 0 1 0-1.1l3.5-3.25a.75.75 0 1 1 1.02 1.1l-2.1 1.95h12.59A.75.75 0 0 1 18 10Z",clipRule:"evenodd"}))}const RH=v.forwardRef(WH),wH=RH;function kH({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z",clipRule:"evenodd"}))}const XH=v.forwardRef(kH),xH=XH;function JH({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z",clipRule:"evenodd"}))}const NH=v.forwardRef(JH),YH=NH;function HH({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M15.621 4.379a3 3 0 0 0-4.242 0l-7 7a3 3 0 0 0 4.241 4.243h.001l.497-.5a.75.75 0 0 1 1.064 1.057l-.498.501-.002.002a4.5 4.5 0 0 1-6.364-6.364l7-7a4.5 4.5 0 0 1 6.368 6.36l-3.455 3.553A2.625 2.625 0 1 1 9.52 9.52l3.45-3.451a.75.75 0 1 1 1.061 1.06l-3.45 3.451a1.125 1.125 0 0 0 1.587 1.595l3.454-3.553a3 3 0 0 0 0-4.242Z",clipRule:"evenodd"}))}const FH=v.forwardRef(HH),U0=FH,KH=({cropDone:e,image:t,setImage:n,setShowCrop:l,inputRef:r})=>{const o=window.innerWidth,[i,a]=v.useState({x:0,y:0}),[g,s]=v.useState(1),[I,d]=v.useState(null),[u,C]=v.useState(""),h=(p,b)=>{d(b)},f=()=>{r.current.value="",n(""),l(!1)},y=p=>{const b=document.createElement("canvas");b.width=p.width,b.height=p.height;const Z=b.getContext("2d");let V=new Image;V.src=t,V.onload=function(){Z.drawImage(V,p.x,p.y,p.width,p.height,0,0,p.width,p.height);const S=b.toDataURL("image/jpeg");C(S),e(S),n(""),l(!1)}},A={marginTop:"6rem",width:"80%",height:"70%",marginLeft:"10%",backgroundColor:"#fff"},m={marginTop:"8rem",width:"100%",height:"70%",backgroundColor:"#fff"};return c.jsx(c.Fragment,{children:c.jsx("div",{children:c.jsxs("div",{className:"bg-slate-800 h-screen w-full fixed translate-x-2/4 right-2/4 top-0 z-50",children:[c.jsx("div",{className:"rounded-md bg-blue-50 p-4 absolute translate-x-2/4 right-2/4 top-4 w-full lg:w-8/12",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(YH,{"aria-hidden":"true",className:"h-5 w-5 text-blue-400"})}),c.jsx("div",{className:"ml-3 flex-1 md:flex md:justify-between",children:c.jsx("p",{className:"text-sm text-blue-700",children:"Usa el scroll para ajustar el zoom  y recortar la imagen de perfil correctamente."})})]})}),c.jsx(VH,{image:t,crop:i,zoom:g,aspect:3/3,onCropChange:a,onCropComplete:h,onZoomChange:s,style:{containerStyle:o>600?A:m}}),c.jsx("div",{className:"btn-container absolute bottom-8 translate-x-2/4 right-2/4 w-full",children:c.jsxs("div",{className:"w-fit m-auto",children:[c.jsx("button",{className:"rounded bg-white/10 px-5 py-2.5 font-semibold text-white shadow-sm hover:bg-white/20 mr-4",onClick:f,children:"Cancelar"}),c.jsx("button",{className:"rounded bg-white/10 px-5 py-2.5 font-semibold text-white shadow-sm hover:bg-white/20",onClick:()=>{y(I)},children:"Guardar"})]})})]})})})};function EH(){this.__data__=[],this.size=0}var MH=EH;function TH(e,t){return e===t||e!==e&&t!==t}var w2=TH,LH=w2;function zH(e,t){for(var n=e.length;n--;)if(LH(e[n][0],t))return n;return-1}var CI=zH,jH=CI,UH=Array.prototype,DH=UH.splice;function QH(e){var t=this.__data__,n=jH(t,e);if(n<0)return!1;var l=t.length-1;return n==l?t.pop():DH.call(t,n,1),--this.size,!0}var PH=QH,OH=CI;function _H(e){var t=this.__data__,n=OH(t,e);return n<0?void 0:t[n][1]}var qH=_H,$H=CI;function e3(e){return $H(this.__data__,e)>-1}var t3=e3,n3=CI;function l3(e,t){var n=this.__data__,l=n3(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this}var r3=l3,o3=MH,i3=PH,a3=qH,g3=t3,s3=r3;function Gi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Gi.prototype.clear=o3;Gi.prototype.delete=i3;Gi.prototype.get=a3;Gi.prototype.has=g3;Gi.prototype.set=s3;var AI=Gi,c3=AI;function I3(){this.__data__=new c3,this.size=0}var d3=I3;function u3(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var C3=u3;function A3(e){return this.__data__.get(e)}var m3=A3;function h3(e){return this.__data__.has(e)}var f3=h3,p3=typeof Ue=="object"&&Ue&&Ue.Object===Object&&Ue,k2=p3,b3=k2,y3=typeof self=="object"&&self&&self.Object===Object&&self,Z3=b3||y3||Function("return this")(),kl=Z3,v3=kl,G3=v3.Symbol,Wh=G3,D0=Wh,X2=Object.prototype,B3=X2.hasOwnProperty,S3=X2.toString,Ui=D0?D0.toStringTag:void 0;function V3(e){var t=B3.call(e,Ui),n=e[Ui];try{e[Ui]=void 0;var l=!0}catch{}var r=S3.call(e);return l&&(t?e[Ui]=n:delete e[Ui]),r}var W3=V3,R3=Object.prototype,w3=R3.toString;function k3(e){return w3.call(e)}var X3=k3,Q0=Wh,x3=W3,J3=X3,N3="[object Null]",Y3="[object Undefined]",P0=Q0?Q0.toStringTag:void 0;function H3(e){return e==null?e===void 0?Y3:N3:P0&&P0 in Object(e)?x3(e):J3(e)}var mI=H3;function F3(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var x2=F3,K3=mI,E3=x2,M3="[object AsyncFunction]",T3="[object Function]",L3="[object GeneratorFunction]",z3="[object Proxy]";function j3(e){if(!E3(e))return!1;var t=K3(e);return t==T3||t==L3||t==M3||t==z3}var J2=j3,U3=kl,D3=U3["__core-js_shared__"],Q3=D3,nu=Q3,O0=function(){var e=/[^.]+$/.exec(nu&&nu.keys&&nu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function P3(e){return!!O0&&O0 in e}var O3=P3,_3=Function.prototype,q3=_3.toString;function $3(e){if(e!=null){try{return q3.call(e)}catch{}try{return e+""}catch{}}return""}var N2=$3,eF=J2,tF=O3,nF=x2,lF=N2,rF=/[\\^$.*+?()[\]{}|]/g,oF=/^\[object .+?Constructor\]$/,iF=Function.prototype,aF=Object.prototype,gF=iF.toString,sF=aF.hasOwnProperty,cF=RegExp("^"+gF.call(sF).replace(rF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function IF(e){if(!nF(e)||tF(e))return!1;var t=eF(e)?cF:oF;return t.test(lF(e))}var dF=IF;function uF(e,t){return e==null?void 0:e[t]}var CF=uF,AF=dF,mF=CF;function hF(e,t){var n=mF(e,t);return AF(n)?n:void 0}var Bi=hF,fF=Bi,pF=kl,bF=fF(pF,"Map"),Rh=bF,yF=Bi,ZF=yF(Object,"create"),hI=ZF,_0=hI;function vF(){this.__data__=_0?_0(null):{},this.size=0}var GF=vF;function BF(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var SF=BF,VF=hI,WF="__lodash_hash_undefined__",RF=Object.prototype,wF=RF.hasOwnProperty;function kF(e){var t=this.__data__;if(VF){var n=t[e];return n===WF?void 0:n}return wF.call(t,e)?t[e]:void 0}var XF=kF,xF=hI,JF=Object.prototype,NF=JF.hasOwnProperty;function YF(e){var t=this.__data__;return xF?t[e]!==void 0:NF.call(t,e)}var HF=YF,FF=hI,KF="__lodash_hash_undefined__";function EF(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=FF&&t===void 0?KF:t,this}var MF=EF,TF=GF,LF=SF,zF=XF,jF=HF,UF=MF;function Si(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Si.prototype.clear=TF;Si.prototype.delete=LF;Si.prototype.get=zF;Si.prototype.has=jF;Si.prototype.set=UF;var DF=Si,q0=DF,QF=AI,PF=Rh;function OF(){this.size=0,this.__data__={hash:new q0,map:new(PF||QF),string:new q0}}var _F=OF;function qF(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var $F=qF,eK=$F;function tK(e,t){var n=e.__data__;return eK(t)?n[typeof t=="string"?"string":"hash"]:n.map}var fI=tK,nK=fI;function lK(e){var t=nK(this,e).delete(e);return this.size-=t?1:0,t}var rK=lK,oK=fI;function iK(e){return oK(this,e).get(e)}var aK=iK,gK=fI;function sK(e){return gK(this,e).has(e)}var cK=sK,IK=fI;function dK(e,t){var n=IK(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this}var uK=dK,CK=_F,AK=rK,mK=aK,hK=cK,fK=uK;function Vi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Vi.prototype.clear=CK;Vi.prototype.delete=AK;Vi.prototype.get=mK;Vi.prototype.has=hK;Vi.prototype.set=fK;var Y2=Vi,pK=AI,bK=Rh,yK=Y2,ZK=200;function vK(e,t){var n=this.__data__;if(n instanceof pK){var l=n.__data__;if(!bK||l.length<ZK-1)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new yK(l)}return n.set(e,t),this.size=n.size,this}var GK=vK,BK=AI,SK=d3,VK=C3,WK=m3,RK=f3,wK=GK;function Wi(e){var t=this.__data__=new BK(e);this.size=t.size}Wi.prototype.clear=SK;Wi.prototype.delete=VK;Wi.prototype.get=WK;Wi.prototype.has=RK;Wi.prototype.set=wK;var kK=Wi,XK="__lodash_hash_undefined__";function xK(e){return this.__data__.set(e,XK),this}var JK=xK;function NK(e){return this.__data__.has(e)}var YK=NK,HK=Y2,FK=JK,KK=YK;function mc(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new HK;++t<n;)this.add(e[t])}mc.prototype.add=mc.prototype.push=FK;mc.prototype.has=KK;var EK=mc;function MK(e,t){for(var n=-1,l=e==null?0:e.length;++n<l;)if(t(e[n],n,e))return!0;return!1}var TK=MK;function LK(e,t){return e.has(t)}var zK=LK,jK=EK,UK=TK,DK=zK,QK=1,PK=2;function OK(e,t,n,l,r,o){var i=n&QK,a=e.length,g=t.length;if(a!=g&&!(i&&g>a))return!1;var s=o.get(e),I=o.get(t);if(s&&I)return s==t&&I==e;var d=-1,u=!0,C=n&PK?new jK:void 0;for(o.set(e,t),o.set(t,e);++d<a;){var h=e[d],f=t[d];if(l)var y=i?l(f,h,d,t,e,o):l(h,f,d,e,t,o);if(y!==void 0){if(y)continue;u=!1;break}if(C){if(!UK(t,function(A,m){if(!DK(C,m)&&(h===A||r(h,A,n,l,o)))return C.push(m)})){u=!1;break}}else if(!(h===f||r(h,f,n,l,o))){u=!1;break}}return o.delete(e),o.delete(t),u}var H2=OK,_K=kl,qK=_K.Uint8Array,$K=qK;function eE(e){var t=-1,n=Array(e.size);return e.forEach(function(l,r){n[++t]=[r,l]}),n}var tE=eE;function nE(e){var t=-1,n=Array(e.size);return e.forEach(function(l){n[++t]=l}),n}var lE=nE,$0=Wh,eb=$K,rE=w2,oE=H2,iE=tE,aE=lE,gE=1,sE=2,cE="[object Boolean]",IE="[object Date]",dE="[object Error]",uE="[object Map]",CE="[object Number]",AE="[object RegExp]",mE="[object Set]",hE="[object String]",fE="[object Symbol]",pE="[object ArrayBuffer]",bE="[object DataView]",tb=$0?$0.prototype:void 0,lu=tb?tb.valueOf:void 0;function yE(e,t,n,l,r,o,i){switch(n){case bE:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pE:return!(e.byteLength!=t.byteLength||!o(new eb(e),new eb(t)));case cE:case IE:case CE:return rE(+e,+t);case dE:return e.name==t.name&&e.message==t.message;case AE:case hE:return e==t+"";case uE:var a=iE;case mE:var g=l&gE;if(a||(a=aE),e.size!=t.size&&!g)return!1;var s=i.get(e);if(s)return s==t;l|=sE,i.set(e,t);var I=oE(a(e),a(t),l,r,o,i);return i.delete(e),I;case fE:if(lu)return lu.call(e)==lu.call(t)}return!1}var ZE=yE;function vE(e,t){for(var n=-1,l=t.length,r=e.length;++n<l;)e[r+n]=t[n];return e}var GE=vE,BE=Array.isArray,wh=BE,SE=GE,VE=wh;function WE(e,t,n){var l=t(e);return VE(e)?l:SE(l,n(e))}var RE=WE;function wE(e,t){for(var n=-1,l=e==null?0:e.length,r=0,o=[];++n<l;){var i=e[n];t(i,n,e)&&(o[r++]=i)}return o}var kE=wE;function XE(){return[]}var xE=XE,JE=kE,NE=xE,YE=Object.prototype,HE=YE.propertyIsEnumerable,nb=Object.getOwnPropertySymbols,FE=nb?function(e){return e==null?[]:(e=Object(e),JE(nb(e),function(t){return HE.call(e,t)}))}:NE,KE=FE;function EE(e,t){for(var n=-1,l=Array(e);++n<e;)l[n]=t(n);return l}var ME=EE;function TE(e){return e!=null&&typeof e=="object"}var pI=TE,LE=mI,zE=pI,jE="[object Arguments]";function UE(e){return zE(e)&&LE(e)==jE}var DE=UE,lb=DE,QE=pI,F2=Object.prototype,PE=F2.hasOwnProperty,OE=F2.propertyIsEnumerable,_E=lb(function(){return arguments}())?lb:function(e){return QE(e)&&PE.call(e,"callee")&&!OE.call(e,"callee")},qE=_E,hc={exports:{}};function $E(){return!1}var eM=$E;hc.exports;(function(e,t){var n=kl,l=eM,r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===r,a=i?n.Buffer:void 0,g=a?a.isBuffer:void 0,s=g||l;e.exports=s})(hc,hc.exports);var K2=hc.exports,tM=9007199254740991,nM=/^(?:0|[1-9]\d*)$/;function lM(e,t){var n=typeof e;return t=t??tM,!!t&&(n=="number"||n!="symbol"&&nM.test(e))&&e>-1&&e%1==0&&e<t}var rM=lM,oM=9007199254740991;function iM(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=oM}var E2=iM,aM=mI,gM=E2,sM=pI,cM="[object Arguments]",IM="[object Array]",dM="[object Boolean]",uM="[object Date]",CM="[object Error]",AM="[object Function]",mM="[object Map]",hM="[object Number]",fM="[object Object]",pM="[object RegExp]",bM="[object Set]",yM="[object String]",ZM="[object WeakMap]",vM="[object ArrayBuffer]",GM="[object DataView]",BM="[object Float32Array]",SM="[object Float64Array]",VM="[object Int8Array]",WM="[object Int16Array]",RM="[object Int32Array]",wM="[object Uint8Array]",kM="[object Uint8ClampedArray]",XM="[object Uint16Array]",xM="[object Uint32Array]",Ee={};Ee[BM]=Ee[SM]=Ee[VM]=Ee[WM]=Ee[RM]=Ee[wM]=Ee[kM]=Ee[XM]=Ee[xM]=!0;Ee[cM]=Ee[IM]=Ee[vM]=Ee[dM]=Ee[GM]=Ee[uM]=Ee[CM]=Ee[AM]=Ee[mM]=Ee[hM]=Ee[fM]=Ee[pM]=Ee[bM]=Ee[yM]=Ee[ZM]=!1;function JM(e){return sM(e)&&gM(e.length)&&!!Ee[aM(e)]}var NM=JM;function YM(e){return function(t){return e(t)}}var HM=YM,fc={exports:{}};fc.exports;(function(e,t){var n=k2,l=t&&!t.nodeType&&t,r=l&&!0&&e&&!e.nodeType&&e,o=r&&r.exports===l,i=o&&n.process,a=function(){try{var g=r&&r.require&&r.require("util").types;return g||i&&i.binding&&i.binding("util")}catch{}}();e.exports=a})(fc,fc.exports);var FM=fc.exports,KM=NM,EM=HM,rb=FM,ob=rb&&rb.isTypedArray,MM=ob?EM(ob):KM,M2=MM,TM=ME,LM=qE,zM=wh,jM=K2,UM=rM,DM=M2,QM=Object.prototype,PM=QM.hasOwnProperty;function OM(e,t){var n=zM(e),l=!n&&LM(e),r=!n&&!l&&jM(e),o=!n&&!l&&!r&&DM(e),i=n||l||r||o,a=i?TM(e.length,String):[],g=a.length;for(var s in e)(t||PM.call(e,s))&&!(i&&(s=="length"||r&&(s=="offset"||s=="parent")||o&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||UM(s,g)))&&a.push(s);return a}var _M=OM,qM=Object.prototype;function $M(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||qM;return e===n}var eT=$M;function tT(e,t){return function(n){return e(t(n))}}var nT=tT,lT=nT,rT=lT(Object.keys,Object),oT=rT,iT=eT,aT=oT,gT=Object.prototype,sT=gT.hasOwnProperty;function cT(e){if(!iT(e))return aT(e);var t=[];for(var n in Object(e))sT.call(e,n)&&n!="constructor"&&t.push(n);return t}var IT=cT,dT=J2,uT=E2;function CT(e){return e!=null&&uT(e.length)&&!dT(e)}var AT=CT,mT=_M,hT=IT,fT=AT;function pT(e){return fT(e)?mT(e):hT(e)}var bT=pT,yT=RE,ZT=KE,vT=bT;function GT(e){return yT(e,vT,ZT)}var BT=GT,ib=BT,ST=1,VT=Object.prototype,WT=VT.hasOwnProperty;function RT(e,t,n,l,r,o){var i=n&ST,a=ib(e),g=a.length,s=ib(t),I=s.length;if(g!=I&&!i)return!1;for(var d=g;d--;){var u=a[d];if(!(i?u in t:WT.call(t,u)))return!1}var C=o.get(e),h=o.get(t);if(C&&h)return C==t&&h==e;var f=!0;o.set(e,t),o.set(t,e);for(var y=i;++d<g;){u=a[d];var A=e[u],m=t[u];if(l)var p=i?l(m,A,u,t,e,o):l(A,m,u,e,t,o);if(!(p===void 0?A===m||r(A,m,n,l,o):p)){f=!1;break}y||(y=u=="constructor")}if(f&&!y){var b=e.constructor,Z=t.constructor;b!=Z&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof Z=="function"&&Z instanceof Z)&&(f=!1)}return o.delete(e),o.delete(t),f}var wT=RT,kT=Bi,XT=kl,xT=kT(XT,"DataView"),JT=xT,NT=Bi,YT=kl,HT=NT(YT,"Promise"),FT=HT,KT=Bi,ET=kl,MT=KT(ET,"Set"),TT=MT,LT=Bi,zT=kl,jT=LT(zT,"WeakMap"),UT=jT,RA=JT,wA=Rh,kA=FT,XA=TT,xA=UT,T2=mI,Ri=N2,ab="[object Map]",DT="[object Object]",gb="[object Promise]",sb="[object Set]",cb="[object WeakMap]",Ib="[object DataView]",QT=Ri(RA),PT=Ri(wA),OT=Ri(kA),_T=Ri(XA),qT=Ri(xA),Kr=T2;(RA&&Kr(new RA(new ArrayBuffer(1)))!=Ib||wA&&Kr(new wA)!=ab||kA&&Kr(kA.resolve())!=gb||XA&&Kr(new XA)!=sb||xA&&Kr(new xA)!=cb)&&(Kr=function(e){var t=T2(e),n=t==DT?e.constructor:void 0,l=n?Ri(n):"";if(l)switch(l){case QT:return Ib;case PT:return ab;case OT:return gb;case _T:return sb;case qT:return cb}return t});var $T=Kr,ru=kK,e4=H2,t4=ZE,n4=wT,db=$T,ub=wh,Cb=K2,l4=M2,r4=1,Ab="[object Arguments]",mb="[object Array]",Eg="[object Object]",o4=Object.prototype,hb=o4.hasOwnProperty;function i4(e,t,n,l,r,o){var i=ub(e),a=ub(t),g=i?mb:db(e),s=a?mb:db(t);g=g==Ab?Eg:g,s=s==Ab?Eg:s;var I=g==Eg,d=s==Eg,u=g==s;if(u&&Cb(e)){if(!Cb(t))return!1;i=!0,I=!1}if(u&&!I)return o||(o=new ru),i||l4(e)?e4(e,t,n,l,r,o):t4(e,t,g,n,l,r,o);if(!(n&r4)){var C=I&&hb.call(e,"__wrapped__"),h=d&&hb.call(t,"__wrapped__");if(C||h){var f=C?e.value():e,y=h?t.value():t;return o||(o=new ru),r(f,y,n,l,o)}}return u?(o||(o=new ru),n4(e,t,n,l,r,o)):!1}var a4=i4,g4=a4,fb=pI;function L2(e,t,n,l,r){return e===t?!0:e==null||t==null||!fb(e)&&!fb(t)?e!==e&&t!==t:g4(e,t,n,l,L2,r)}var s4=L2,c4=s4;function I4(e,t){return c4(e,t)}var d4=I4,z2={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(l,r){e.exports=r()})(typeof self<"u"?self:Ue,function(){return function(n){var l={};function r(o){if(l[o])return l[o].exports;var i=l[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=n,r.c=l,r.d=function(o,i,a){r.o(o,i)||Object.defineProperty(o,i,{configurable:!1,enumerable:!0,get:a})},r.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(i,"a",i),i},r.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},r.p="",r(r.s=109)}([function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(17),i=r(18),a=r(19),g=r(45),s=r(46),I=r(47),d=r(48),u=r(49),C=r(12),h=r(32),f=r(33),y=r(31),A=r(1),m={Scope:A.Scope,create:A.create,find:A.find,query:A.query,register:A.register,Container:o.default,Format:i.default,Leaf:a.default,Embed:d.default,Scroll:g.default,Block:I.default,Inline:s.default,Text:u.default,Attributor:{Attribute:C.default,Class:h.default,Style:f.default,Store:y.default}};l.default=m},function(n,l,r){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,m){A.__proto__=m}||function(A,m){for(var p in m)m.hasOwnProperty(p)&&(A[p]=m[p])};return function(A,m){y(A,m);function p(){this.constructor=A}A.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=function(y){o(A,y);function A(m){var p=this;return m="[Parchment] "+m,p=y.call(this,m)||this,p.message=m,p.name=p.constructor.name,p}return A}(Error);l.ParchmentError=i;var a={},g={},s={},I={};l.DATA_KEY="__blot";var d;(function(y){y[y.TYPE=3]="TYPE",y[y.LEVEL=12]="LEVEL",y[y.ATTRIBUTE=13]="ATTRIBUTE",y[y.BLOT=14]="BLOT",y[y.INLINE=7]="INLINE",y[y.BLOCK=11]="BLOCK",y[y.BLOCK_BLOT=10]="BLOCK_BLOT",y[y.INLINE_BLOT=6]="INLINE_BLOT",y[y.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",y[y.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",y[y.ANY=15]="ANY"})(d=l.Scope||(l.Scope={}));function u(y,A){var m=h(y);if(m==null)throw new i("Unable to create "+y+" blot");var p=m,b=y instanceof Node||y.nodeType===Node.TEXT_NODE?y:p.create(A);return new p(b,A)}l.create=u;function C(y,A){return A===void 0&&(A=!1),y==null?null:y[l.DATA_KEY]!=null?y[l.DATA_KEY].blot:A?C(y.parentNode,A):null}l.find=C;function h(y,A){A===void 0&&(A=d.ANY);var m;if(typeof y=="string")m=I[y]||a[y];else if(y instanceof Text||y.nodeType===Node.TEXT_NODE)m=I.text;else if(typeof y=="number")y&d.LEVEL&d.BLOCK?m=I.block:y&d.LEVEL&d.INLINE&&(m=I.inline);else if(y instanceof HTMLElement){var p=(y.getAttribute("class")||"").split(/\s+/);for(var b in p)if(m=g[p[b]],m)break;m=m||s[y.tagName]}return m==null?null:A&d.LEVEL&m.scope&&A&d.TYPE&m.scope?m:null}l.query=h;function f(){for(var y=[],A=0;A<arguments.length;A++)y[A]=arguments[A];if(y.length>1)return y.map(function(b){return f(b)});var m=y[0];if(typeof m.blotName!="string"&&typeof m.attrName!="string")throw new i("Invalid definition");if(m.blotName==="abstract")throw new i("Cannot register abstract class");if(I[m.blotName||m.attrName]=m,typeof m.keyName=="string")a[m.keyName]=m;else if(m.className!=null&&(g[m.className]=m),m.tagName!=null){Array.isArray(m.tagName)?m.tagName=m.tagName.map(function(b){return b.toUpperCase()}):m.tagName=m.tagName.toUpperCase();var p=Array.isArray(m.tagName)?m.tagName:[m.tagName];p.forEach(function(b){(s[b]==null||m.className==null)&&(s[b]=m)})}return m}l.register=f},function(n,l,r){var o=r(51),i=r(11),a=r(3),g=r(20),s=String.fromCharCode(0),I=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};I.prototype.insert=function(d,u){var C={};return d.length===0?this:(C.insert=d,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(C.attributes=u),this.push(C))},I.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},I.prototype.retain=function(d,u){if(d<=0)return this;var C={retain:d};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(C.attributes=u),this.push(C)},I.prototype.push=function(d){var u=this.ops.length,C=this.ops[u-1];if(d=a(!0,{},d),typeof C=="object"){if(typeof d.delete=="number"&&typeof C.delete=="number")return this.ops[u-1]={delete:C.delete+d.delete},this;if(typeof C.delete=="number"&&d.insert!=null&&(u-=1,C=this.ops[u-1],typeof C!="object"))return this.ops.unshift(d),this;if(i(d.attributes,C.attributes)){if(typeof d.insert=="string"&&typeof C.insert=="string")return this.ops[u-1]={insert:C.insert+d.insert},typeof d.attributes=="object"&&(this.ops[u-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof C.retain=="number")return this.ops[u-1]={retain:C.retain+d.retain},typeof d.attributes=="object"&&(this.ops[u-1].attributes=d.attributes),this}}return u===this.ops.length?this.ops.push(d):this.ops.splice(u,0,d),this},I.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},I.prototype.filter=function(d){return this.ops.filter(d)},I.prototype.forEach=function(d){this.ops.forEach(d)},I.prototype.map=function(d){return this.ops.map(d)},I.prototype.partition=function(d){var u=[],C=[];return this.forEach(function(h){var f=d(h)?u:C;f.push(h)}),[u,C]},I.prototype.reduce=function(d,u){return this.ops.reduce(d,u)},I.prototype.changeLength=function(){return this.reduce(function(d,u){return u.insert?d+g.length(u):u.delete?d-u.delete:d},0)},I.prototype.length=function(){return this.reduce(function(d,u){return d+g.length(u)},0)},I.prototype.slice=function(d,u){d=d||0,typeof u!="number"&&(u=1/0);for(var C=[],h=g.iterator(this.ops),f=0;f<u&&h.hasNext();){var y;f<d?y=h.next(d-f):(y=h.next(u-f),C.push(y)),f+=g.length(y)}return new I(C)},I.prototype.compose=function(d){var u=g.iterator(this.ops),C=g.iterator(d.ops),h=[],f=C.peek();if(f!=null&&typeof f.retain=="number"&&f.attributes==null){for(var y=f.retain;u.peekType()==="insert"&&u.peekLength()<=y;)y-=u.peekLength(),h.push(u.next());f.retain-y>0&&C.next(f.retain-y)}for(var A=new I(h);u.hasNext()||C.hasNext();)if(C.peekType()==="insert")A.push(C.next());else if(u.peekType()==="delete")A.push(u.next());else{var m=Math.min(u.peekLength(),C.peekLength()),p=u.next(m),b=C.next(m);if(typeof b.retain=="number"){var Z={};typeof p.retain=="number"?Z.retain=m:Z.insert=p.insert;var V=g.attributes.compose(p.attributes,b.attributes,typeof p.retain=="number");if(V&&(Z.attributes=V),A.push(Z),!C.hasNext()&&i(A.ops[A.ops.length-1],Z)){var S=new I(u.rest());return A.concat(S).chop()}}else typeof b.delete=="number"&&typeof p.retain=="number"&&A.push(b)}return A.chop()},I.prototype.concat=function(d){var u=new I(this.ops.slice());return d.ops.length>0&&(u.push(d.ops[0]),u.ops=u.ops.concat(d.ops.slice(1))),u},I.prototype.diff=function(d,u){if(this.ops===d.ops)return new I;var C=[this,d].map(function(m){return m.map(function(p){if(p.insert!=null)return typeof p.insert=="string"?p.insert:s;var b=m===d?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),h=new I,f=o(C[0],C[1],u),y=g.iterator(this.ops),A=g.iterator(d.ops);return f.forEach(function(m){for(var p=m[1].length;p>0;){var b=0;switch(m[0]){case o.INSERT:b=Math.min(A.peekLength(),p),h.push(A.next(b));break;case o.DELETE:b=Math.min(p,y.peekLength()),y.next(b),h.delete(b);break;case o.EQUAL:b=Math.min(y.peekLength(),A.peekLength(),p);var Z=y.next(b),V=A.next(b);i(Z.insert,V.insert)?h.retain(b,g.attributes.diff(Z.attributes,V.attributes)):h.push(V).delete(b);break}p-=b}}),h.chop()},I.prototype.eachLine=function(d,u){u=u||`
`;for(var C=g.iterator(this.ops),h=new I,f=0;C.hasNext();){if(C.peekType()!=="insert")return;var y=C.peek(),A=g.length(y)-C.peekLength(),m=typeof y.insert=="string"?y.insert.indexOf(u,A)-A:-1;if(m<0)h.push(C.next());else if(m>0)h.push(C.next(m));else{if(d(h,C.next(1).attributes||{},f)===!1)return;f+=1,h=new I}}h.length()>0&&d(h,{},f)},I.prototype.transform=function(d,u){if(u=!!u,typeof d=="number")return this.transformPosition(d,u);for(var C=g.iterator(this.ops),h=g.iterator(d.ops),f=new I;C.hasNext()||h.hasNext();)if(C.peekType()==="insert"&&(u||h.peekType()!=="insert"))f.retain(g.length(C.next()));else if(h.peekType()==="insert")f.push(h.next());else{var y=Math.min(C.peekLength(),h.peekLength()),A=C.next(y),m=h.next(y);if(A.delete)continue;m.delete?f.push(m):f.retain(y,g.attributes.transform(A.attributes,m.attributes,u))}return f.chop()},I.prototype.transformPosition=function(d,u){u=!!u;for(var C=g.iterator(this.ops),h=0;C.hasNext()&&h<=d;){var f=C.peekLength(),y=C.peekType();if(C.next(),y==="delete"){d-=Math.min(f,d-h);continue}else y==="insert"&&(h<d||!u)&&(d+=f);h+=f}return d},n.exports=I},function(n,l){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,g=function(C){return typeof Array.isArray=="function"?Array.isArray(C):o.call(C)==="[object Array]"},s=function(C){if(!C||o.call(C)!=="[object Object]")return!1;var h=r.call(C,"constructor"),f=C.constructor&&C.constructor.prototype&&r.call(C.constructor.prototype,"isPrototypeOf");if(C.constructor&&!h&&!f)return!1;var y;for(y in C);return typeof y>"u"||r.call(C,y)},I=function(C,h){i&&h.name==="__proto__"?i(C,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):C[h.name]=h.newValue},d=function(C,h){if(h==="__proto__")if(r.call(C,h)){if(a)return a(C,h).value}else return;return C[h]};n.exports=function u(){var C,h,f,y,A,m,p=arguments[0],b=1,Z=arguments.length,V=!1;for(typeof p=="boolean"&&(V=p,p=arguments[1]||{},b=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});b<Z;++b)if(C=arguments[b],C!=null)for(h in C)f=d(p,h),y=d(C,h),p!==y&&(V&&y&&(s(y)||(A=g(y)))?(A?(A=!1,m=f&&g(f)?f:[]):m=f&&s(f)?f:{},I(p,{name:h,newValue:u(V,m,y)})):typeof y<"u"&&I(p,{name:h,newValue:y}));return p}},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BlockEmbed=l.bubbleFormats=void 0;var o=function(){function W(R,k){for(var x=0;x<k.length;x++){var H=k[x];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(R,H.key,H)}}return function(R,k,x){return k&&W(R.prototype,k),x&&W(R,x),R}}(),i=function W(R,k,x){R===null&&(R=Function.prototype);var H=Object.getOwnPropertyDescriptor(R,k);if(H===void 0){var M=Object.getPrototypeOf(R);return M===null?void 0:W(M,k,x)}else{if("value"in H)return H.value;var T=H.get;return T===void 0?void 0:T.call(x)}},a=r(3),g=p(a),s=r(2),I=p(s),d=r(0),u=p(d),C=r(16),h=p(C),f=r(6),y=p(f),A=r(7),m=p(A);function p(W){return W&&W.__esModule?W:{default:W}}function b(W,R){if(!(W instanceof R))throw new TypeError("Cannot call a class as a function")}function Z(W,R){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:W}function V(W,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);W.prototype=Object.create(R&&R.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(W,R):W.__proto__=R)}var S=1,G=function(W){V(R,W);function R(){return b(this,R),Z(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return o(R,[{key:"attach",value:function(){i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new I.default().insert(this.value(),(0,g.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(x,H){var M=u.default.query(x,u.default.Scope.BLOCK_ATTRIBUTE);M!=null&&this.attributes.attribute(M,H)}},{key:"formatAt",value:function(x,H,M,T){this.format(M,T)}},{key:"insertAt",value:function(x,H,M){if(typeof H=="string"&&H.endsWith(`
`)){var T=u.default.create(w.blotName);this.parent.insertBefore(T,x===0?this:this.next),T.insertAt(0,H.slice(0,-1))}else i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,x,H,M)}}]),R}(u.default.Embed);G.scope=u.default.Scope.BLOCK_BLOT;var w=function(W){V(R,W);function R(k){b(this,R);var x=Z(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,k));return x.cache={},x}return o(R,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(u.default.Leaf).reduce(function(x,H){return H.length()===0?x:x.insert(H.value(),B(H))},new I.default).insert(`
`,B(this))),this.cache.delta}},{key:"deleteAt",value:function(x,H){i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,x,H),this.cache={}}},{key:"formatAt",value:function(x,H,M,T){H<=0||(u.default.query(M,u.default.Scope.BLOCK)?x+H===this.length()&&this.format(M,T):i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,x,Math.min(H,this.length()-x-1),M,T),this.cache={})}},{key:"insertAt",value:function(x,H,M){if(M!=null)return i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,x,H,M);if(H.length!==0){var T=H.split(`
`),E=T.shift();E.length>0&&(x<this.length()-1||this.children.tail==null?i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,Math.min(x,this.length()-1),E):this.children.tail.insertAt(this.children.tail.length(),E),this.cache={});var N=this;T.reduce(function(J,X){return N=N.split(J,!0),N.insertAt(0,X),X.length},x+E.length)}}},{key:"insertBefore",value:function(x,H){var M=this.children.head;i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,x,H),M instanceof h.default&&M.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(x,H){i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"moveChildren",this).call(this,x,H),this.cache={}}},{key:"optimize",value:function(x){i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,x),this.cache={}}},{key:"path",value:function(x){return i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,x,!0)}},{key:"removeChild",value:function(x){i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"removeChild",this).call(this,x),this.cache={}}},{key:"split",value:function(x){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(H&&(x===0||x>=this.length()-S)){var M=this.clone();return x===0?(this.parent.insertBefore(M,this),this):(this.parent.insertBefore(M,this.next),M)}else{var T=i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"split",this).call(this,x,H);return this.cache={},T}}}]),R}(u.default.Block);w.blotName="block",w.tagName="P",w.defaultChild="break",w.allowedChildren=[y.default,u.default.Embed,m.default];function B(W){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return W==null||(typeof W.formats=="function"&&(R=(0,g.default)(R,W.formats())),W.parent==null||W.parent.blotName=="scroll"||W.parent.statics.scope!==W.statics.scope)?R:B(W.parent,R)}l.bubbleFormats=B,l.BlockEmbed=G,l.default=w},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.overload=l.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i=function(){function N(J,X){var Y=[],F=!0,z=!1,L=void 0;try{for(var K=J[Symbol.iterator](),j;!(F=(j=K.next()).done)&&(Y.push(j.value),!(X&&Y.length===X));F=!0);}catch(D){z=!0,L=D}finally{try{!F&&K.return&&K.return()}finally{if(z)throw L}}return Y}return function(J,X){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return N(J,X);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function N(J,X){for(var Y=0;Y<X.length;Y++){var F=X[Y];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(J,F.key,F)}}return function(J,X,Y){return X&&N(J.prototype,X),Y&&N(J,Y),J}}();r(50);var g=r(2),s=B(g),I=r(14),d=B(I),u=r(8),C=B(u),h=r(9),f=B(h),y=r(0),A=B(y),m=r(15),p=B(m),b=r(3),Z=B(b),V=r(10),S=B(V),G=r(34),w=B(G);function B(N){return N&&N.__esModule?N:{default:N}}function W(N,J,X){return J in N?Object.defineProperty(N,J,{value:X,enumerable:!0,configurable:!0,writable:!0}):N[J]=X,N}function R(N,J){if(!(N instanceof J))throw new TypeError("Cannot call a class as a function")}var k=(0,S.default)("quill"),x=function(){a(N,null,[{key:"debug",value:function(X){X===!0&&(X="log"),S.default.level(X)}},{key:"find",value:function(X){return X.__quill||A.default.find(X)}},{key:"import",value:function(X){return this.imports[X]==null&&k.error("Cannot import "+X+". Are you sure it was registered?"),this.imports[X]}},{key:"register",value:function(X,Y){var F=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof X!="string"){var L=X.attrName||X.blotName;typeof L=="string"?this.register("formats/"+L,X,Y):Object.keys(X).forEach(function(K){F.register(K,X[K],Y)})}else this.imports[X]!=null&&!z&&k.warn("Overwriting "+X+" with",Y),this.imports[X]=Y,(X.startsWith("blots/")||X.startsWith("formats/"))&&Y.blotName!=="abstract"?A.default.register(Y):X.startsWith("modules")&&typeof Y.register=="function"&&Y.register()}}]);function N(J){var X=this,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(R(this,N),this.options=H(J,Y),this.container=this.options.container,this.container==null)return k.error("Invalid Quill container",J);this.options.debug&&N.debug(this.options.debug);var F=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new C.default,this.scroll=A.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(C.default.events.EDITOR_CHANGE,function(L){L===C.default.events.TEXT_CHANGE&&X.root.classList.toggle("ql-blank",X.editor.isBlank())}),this.emitter.on(C.default.events.SCROLL_UPDATE,function(L,K){var j=X.selection.lastRange,D=j&&j.length===0?j.index:void 0;M.call(X,function(){return X.editor.update(null,K,D)},L)});var z=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+F+"<p><br></p></div>");this.setContents(z),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(N,[{key:"addContainer",value:function(X){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof X=="string"){var F=X;X=document.createElement("div"),X.classList.add(F)}return this.container.insertBefore(X,Y),X}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(X,Y,F){var z=this,L=T(X,Y,F),K=i(L,4);return X=K[0],Y=K[1],F=K[3],M.call(this,function(){return z.editor.deleteText(X,Y)},F,X,-1*Y)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(X),this.container.classList.toggle("ql-disabled",!X)}},{key:"focus",value:function(){var X=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=X,this.scrollIntoView()}},{key:"format",value:function(X,Y){var F=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C.default.sources.API;return M.call(this,function(){var L=F.getSelection(!0),K=new s.default;if(L==null)return K;if(A.default.query(X,A.default.Scope.BLOCK))K=F.editor.formatLine(L.index,L.length,W({},X,Y));else{if(L.length===0)return F.selection.format(X,Y),K;K=F.editor.formatText(L.index,L.length,W({},X,Y))}return F.setSelection(L,C.default.sources.SILENT),K},z)}},{key:"formatLine",value:function(X,Y,F,z,L){var K=this,j=void 0,D=T(X,Y,F,z,L),Q=i(D,4);return X=Q[0],Y=Q[1],j=Q[2],L=Q[3],M.call(this,function(){return K.editor.formatLine(X,Y,j)},L,X,0)}},{key:"formatText",value:function(X,Y,F,z,L){var K=this,j=void 0,D=T(X,Y,F,z,L),Q=i(D,4);return X=Q[0],Y=Q[1],j=Q[2],L=Q[3],M.call(this,function(){return K.editor.formatText(X,Y,j)},L,X,0)}},{key:"getBounds",value:function(X){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=void 0;typeof X=="number"?F=this.selection.getBounds(X,Y):F=this.selection.getBounds(X.index,X.length);var z=this.container.getBoundingClientRect();return{bottom:F.bottom-z.top,height:F.height,left:F.left-z.left,right:F.right-z.left,top:F.top-z.top,width:F.width}}},{key:"getContents",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-X,F=T(X,Y),z=i(F,2);return X=z[0],Y=z[1],this.editor.getContents(X,Y)}},{key:"getFormat",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof X=="number"?this.editor.getFormat(X,Y):this.editor.getFormat(X.index,X.length)}},{key:"getIndex",value:function(X){return X.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(X){return this.scroll.leaf(X)}},{key:"getLine",value:function(X){return this.scroll.line(X)}},{key:"getLines",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof X!="number"?this.scroll.lines(X.index,X.length):this.scroll.lines(X,Y)}},{key:"getModule",value:function(X){return this.theme.modules[X]}},{key:"getSelection",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return X&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-X,F=T(X,Y),z=i(F,2);return X=z[0],Y=z[1],this.editor.getText(X,Y)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(X,Y,F){var z=this,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:N.sources.API;return M.call(this,function(){return z.editor.insertEmbed(X,Y,F)},L,X)}},{key:"insertText",value:function(X,Y,F,z,L){var K=this,j=void 0,D=T(X,0,F,z,L),Q=i(D,4);return X=Q[0],j=Q[2],L=Q[3],M.call(this,function(){return K.editor.insertText(X,Y,j)},L,X,Y.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(X,Y,F){this.clipboard.dangerouslyPasteHTML(X,Y,F)}},{key:"removeFormat",value:function(X,Y,F){var z=this,L=T(X,Y,F),K=i(L,4);return X=K[0],Y=K[1],F=K[3],M.call(this,function(){return z.editor.removeFormat(X,Y)},F,X)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(X){var Y=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.default.sources.API;return M.call(this,function(){X=new s.default(X);var z=Y.getLength(),L=Y.editor.deleteText(0,z),K=Y.editor.applyDelta(X),j=K.ops[K.ops.length-1];j!=null&&typeof j.insert=="string"&&j.insert[j.insert.length-1]===`
`&&(Y.editor.deleteText(Y.getLength()-1,1),K.delete(1));var D=L.compose(K);return D},F)}},{key:"setSelection",value:function(X,Y,F){if(X==null)this.selection.setRange(null,Y||N.sources.API);else{var z=T(X,Y,F),L=i(z,4);X=L[0],Y=L[1],F=L[3],this.selection.setRange(new m.Range(X,Y),F),F!==C.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(X){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.default.sources.API,F=new s.default().insert(X);return this.setContents(F,Y)}},{key:"update",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C.default.sources.USER,Y=this.scroll.update(X);return this.selection.update(X),Y}},{key:"updateContents",value:function(X){var Y=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.default.sources.API;return M.call(this,function(){return X=new s.default(X),Y.editor.applyDelta(X,F)},F,!0)}}]),N}();x.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},x.events=C.default.events,x.sources=C.default.sources,x.version="1.3.7",x.imports={delta:s.default,parchment:A.default,"core/module":f.default,"core/theme":w.default};function H(N,J){if(J=(0,Z.default)(!0,{container:N,modules:{clipboard:!0,keyboard:!0,history:!0}},J),!J.theme||J.theme===x.DEFAULTS.theme)J.theme=w.default;else if(J.theme=x.import("themes/"+J.theme),J.theme==null)throw new Error("Invalid theme "+J.theme+". Did you register it?");var X=(0,Z.default)(!0,{},J.theme.DEFAULTS);[X,J].forEach(function(z){z.modules=z.modules||{},Object.keys(z.modules).forEach(function(L){z.modules[L]===!0&&(z.modules[L]={})})});var Y=Object.keys(X.modules).concat(Object.keys(J.modules)),F=Y.reduce(function(z,L){var K=x.import("modules/"+L);return K==null?k.error("Cannot load "+L+" module. Are you sure you registered it?"):z[L]=K.DEFAULTS||{},z},{});return J.modules!=null&&J.modules.toolbar&&J.modules.toolbar.constructor!==Object&&(J.modules.toolbar={container:J.modules.toolbar}),J=(0,Z.default)(!0,{},x.DEFAULTS,{modules:F},X,J),["bounds","container","scrollingContainer"].forEach(function(z){typeof J[z]=="string"&&(J[z]=document.querySelector(J[z]))}),J.modules=Object.keys(J.modules).reduce(function(z,L){return J.modules[L]&&(z[L]=J.modules[L]),z},{}),J}function M(N,J,X,Y){if(this.options.strict&&!this.isEnabled()&&J===C.default.sources.USER)return new s.default;var F=X==null?null:this.getSelection(),z=this.editor.delta,L=N();if(F!=null&&(X===!0&&(X=F.index),Y==null?F=E(F,L,J):Y!==0&&(F=E(F,X,Y,J)),this.setSelection(F,C.default.sources.SILENT)),L.length()>0){var K,j=[C.default.events.TEXT_CHANGE,L,z,J];if((K=this.emitter).emit.apply(K,[C.default.events.EDITOR_CHANGE].concat(j)),J!==C.default.sources.SILENT){var D;(D=this.emitter).emit.apply(D,j)}}return L}function T(N,J,X,Y,F){var z={};return typeof N.index=="number"&&typeof N.length=="number"?typeof J!="number"?(F=Y,Y=X,X=J,J=N.length,N=N.index):(J=N.length,N=N.index):typeof J!="number"&&(F=Y,Y=X,X=J,J=0),(typeof X>"u"?"undefined":o(X))==="object"?(z=X,F=Y):typeof X=="string"&&(Y!=null?z[X]=Y:F=X),F=F||C.default.sources.API,[N,J,z,F]}function E(N,J,X,Y){if(N==null)return null;var F=void 0,z=void 0;if(J instanceof s.default){var L=[N.index,N.index+N.length].map(function(Q){return J.transformPosition(Q,Y!==C.default.sources.USER)}),K=i(L,2);F=K[0],z=K[1]}else{var j=[N.index,N.index+N.length].map(function(Q){return Q<J||Q===J&&Y===C.default.sources.USER?Q:X>=0?Q+X:Math.max(J,Q+X)}),D=i(j,2);F=D[0],z=D[1]}return new m.Range(F,z-F)}l.expandConfig=H,l.overload=T,l.default=x},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function y(A,m){for(var p=0;p<m.length;p++){var b=m[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(A,b.key,b)}}return function(A,m,p){return m&&y(A.prototype,m),p&&y(A,p),A}}(),i=function y(A,m,p){A===null&&(A=Function.prototype);var b=Object.getOwnPropertyDescriptor(A,m);if(b===void 0){var Z=Object.getPrototypeOf(A);return Z===null?void 0:y(Z,m,p)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(p)}},a=r(7),g=d(a),s=r(0),I=d(s);function d(y){return y&&y.__esModule?y:{default:y}}function u(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}function C(y,A){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:y}function h(y,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);y.prototype=Object.create(A&&A.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(y,A):y.__proto__=A)}var f=function(y){h(A,y);function A(){return u(this,A),C(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"formatAt",value:function(p,b,Z,V){if(A.compare(this.statics.blotName,Z)<0&&I.default.query(Z,I.default.Scope.BLOT)){var S=this.isolate(p,b);V&&S.wrap(Z,V)}else i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,p,b,Z,V)}},{key:"optimize",value:function(p){if(i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,p),this.parent instanceof A&&A.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(p,b){var Z=A.order.indexOf(p),V=A.order.indexOf(b);return Z>=0||V>=0?Z-V:p===b?0:p<b?-1:1}}]),A}(I.default.Inline);f.allowedChildren=[f,I.default.Embed,g.default],f.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],l.default=f},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(0),i=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function g(u,C){if(!(u instanceof C))throw new TypeError("Cannot call a class as a function")}function s(u,C){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:u}function I(u,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);u.prototype=Object.create(C&&C.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(u,C):u.__proto__=C)}var d=function(u){I(C,u);function C(){return g(this,C),s(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(i.default.Text);l.default=d},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function m(p,b){for(var Z=0;Z<b.length;Z++){var V=b[Z];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(p,V.key,V)}}return function(p,b,Z){return b&&m(p.prototype,b),Z&&m(p,Z),p}}(),i=function m(p,b,Z){p===null&&(p=Function.prototype);var V=Object.getOwnPropertyDescriptor(p,b);if(V===void 0){var S=Object.getPrototypeOf(p);return S===null?void 0:m(S,b,Z)}else{if("value"in V)return V.value;var G=V.get;return G===void 0?void 0:G.call(Z)}},a=r(54),g=d(a),s=r(10),I=d(s);function d(m){return m&&m.__esModule?m:{default:m}}function u(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function C(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function h(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var f=(0,I.default)("quill:events"),y=["selectionchange","mousedown","mouseup","click"];y.forEach(function(m){document.addEventListener(m,function(){for(var p=arguments.length,b=Array(p),Z=0;Z<p;Z++)b[Z]=arguments[Z];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(V){if(V.__quill&&V.__quill.emitter){var S;(S=V.__quill.emitter).handleDOM.apply(S,b)}})})});var A=function(m){h(p,m);function p(){u(this,p);var b=C(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return b.listeners={},b.on("error",f.error),b}return o(p,[{key:"emit",value:function(){f.log.apply(f,arguments),i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(Z){for(var V=arguments.length,S=Array(V>1?V-1:0),G=1;G<V;G++)S[G-1]=arguments[G];(this.listeners[Z.type]||[]).forEach(function(w){var B=w.node,W=w.handler;(Z.target===B||B.contains(Z.target))&&W.apply(void 0,[Z].concat(S))})}},{key:"listenDOM",value:function(Z,V,S){this.listeners[Z]||(this.listeners[Z]=[]),this.listeners[Z].push({node:V,handler:S})}}]),p}(g.default);A.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},A.sources={API:"api",SILENT:"silent",USER:"user"},l.default=A},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});function o(a,g){if(!(a instanceof g))throw new TypeError("Cannot call a class as a function")}var i=function a(g){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,a),this.quill=g,this.options=s};i.DEFAULTS={},l.default=i},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=["error","warn","log","info"],i="warn";function a(s){if(o.indexOf(s)<=o.indexOf(i)){for(var I,d=arguments.length,u=Array(d>1?d-1:0),C=1;C<d;C++)u[C-1]=arguments[C];(I=console)[s].apply(I,u)}}function g(s){return o.reduce(function(I,d){return I[d]=a.bind(console,d,s),I},{})}a.level=g.level=function(s){i=s},l.default=g},function(n,l,r){var o=Array.prototype.slice,i=r(52),a=r(53),g=n.exports=function(u,C,h){return h||(h={}),u===C?!0:u instanceof Date&&C instanceof Date?u.getTime()===C.getTime():!u||!C||typeof u!="object"&&typeof C!="object"?h.strict?u===C:u==C:d(u,C,h)};function s(u){return u==null}function I(u){return!(!u||typeof u!="object"||typeof u.length!="number"||typeof u.copy!="function"||typeof u.slice!="function"||u.length>0&&typeof u[0]!="number")}function d(u,C,h){var f,y;if(s(u)||s(C)||u.prototype!==C.prototype)return!1;if(a(u))return a(C)?(u=o.call(u),C=o.call(C),g(u,C,h)):!1;if(I(u)){if(!I(C)||u.length!==C.length)return!1;for(f=0;f<u.length;f++)if(u[f]!==C[f])return!1;return!0}try{var A=i(u),m=i(C)}catch{return!1}if(A.length!=m.length)return!1;for(A.sort(),m.sort(),f=A.length-1;f>=0;f--)if(A[f]!=m[f])return!1;for(f=A.length-1;f>=0;f--)if(y=A[f],!g(u[y],C[y],h))return!1;return typeof u==typeof C}},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(1),i=function(){function a(g,s,I){I===void 0&&(I={}),this.attrName=g,this.keyName=s;var d=o.Scope.TYPE&o.Scope.ATTRIBUTE;I.scope!=null?this.scope=I.scope&o.Scope.LEVEL|d:this.scope=o.Scope.ATTRIBUTE,I.whitelist!=null&&(this.whitelist=I.whitelist)}return a.keys=function(g){return[].map.call(g.attributes,function(s){return s.name})},a.prototype.add=function(g,s){return this.canAdd(g,s)?(g.setAttribute(this.keyName,s),!0):!1},a.prototype.canAdd=function(g,s){var I=o.query(g,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return I==null?!1:this.whitelist==null?!0:typeof s=="string"?this.whitelist.indexOf(s.replace(/["']/g,""))>-1:this.whitelist.indexOf(s)>-1},a.prototype.remove=function(g){g.removeAttribute(this.keyName)},a.prototype.value=function(g){var s=g.getAttribute(this.keyName);return this.canAdd(g,s)&&s?s:""},a}();l.default=i},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.Code=void 0;var o=function(){function G(w,B){var W=[],R=!0,k=!1,x=void 0;try{for(var H=w[Symbol.iterator](),M;!(R=(M=H.next()).done)&&(W.push(M.value),!(B&&W.length===B));R=!0);}catch(T){k=!0,x=T}finally{try{!R&&H.return&&H.return()}finally{if(k)throw x}}return W}return function(w,B){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return G(w,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function G(w,B){for(var W=0;W<B.length;W++){var R=B[W];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(w,R.key,R)}}return function(w,B,W){return B&&G(w.prototype,B),W&&G(w,W),w}}(),a=function G(w,B,W){w===null&&(w=Function.prototype);var R=Object.getOwnPropertyDescriptor(w,B);if(R===void 0){var k=Object.getPrototypeOf(w);return k===null?void 0:G(k,B,W)}else{if("value"in R)return R.value;var x=R.get;return x===void 0?void 0:x.call(W)}},g=r(2),s=m(g),I=r(0),d=m(I),u=r(4),C=m(u),h=r(6),f=m(h),y=r(7),A=m(y);function m(G){return G&&G.__esModule?G:{default:G}}function p(G,w){if(!(G instanceof w))throw new TypeError("Cannot call a class as a function")}function b(G,w){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:G}function Z(G,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);G.prototype=Object.create(w&&w.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(G,w):G.__proto__=w)}var V=function(G){Z(w,G);function w(){return p(this,w),b(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return w}(f.default);V.blotName="code",V.tagName="CODE";var S=function(G){Z(w,G);function w(){return p(this,w),b(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"delta",value:function(){var W=this,R=this.domNode.textContent;return R.endsWith(`
`)&&(R=R.slice(0,-1)),R.split(`
`).reduce(function(k,x){return k.insert(x).insert(`
`,W.formats())},new s.default)}},{key:"format",value:function(W,R){if(!(W===this.statics.blotName&&R)){var k=this.descendant(A.default,this.length()-1),x=o(k,1),H=x[0];H!=null&&H.deleteAt(H.length()-1,1),a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,W,R)}}},{key:"formatAt",value:function(W,R,k,x){if(R!==0&&!(d.default.query(k,d.default.Scope.BLOCK)==null||k===this.statics.blotName&&x===this.statics.formats(this.domNode))){var H=this.newlineIndex(W);if(!(H<0||H>=W+R)){var M=this.newlineIndex(W,!0)+1,T=H-M+1,E=this.isolate(M,T),N=E.next;E.format(k,x),N instanceof w&&N.formatAt(0,W-M+R-T,k,x)}}}},{key:"insertAt",value:function(W,R,k){if(k==null){var x=this.descendant(A.default,W),H=o(x,2),M=H[0],T=H[1];M.insertAt(T,R)}}},{key:"length",value:function(){var W=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?W:W+1}},{key:"newlineIndex",value:function(W){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R)return this.domNode.textContent.slice(0,W).lastIndexOf(`
`);var k=this.domNode.textContent.slice(W).indexOf(`
`);return k>-1?W+k:-1}},{key:"optimize",value:function(W){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,W);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===R.statics.formats(R.domNode)&&(R.optimize(W),R.moveChildren(this),R.remove())}},{key:"replace",value:function(W){a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replace",this).call(this,W),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(R){var k=d.default.find(R);k==null?R.parentNode.removeChild(R):k instanceof d.default.Embed?k.remove():k.unwrap()})}}],[{key:"create",value:function(W){var R=a(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,W);return R.setAttribute("spellcheck",!1),R}},{key:"formats",value:function(){return!0}}]),w}(C.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",l.Code=V,l.default=S},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i=function(){function N(J,X){var Y=[],F=!0,z=!1,L=void 0;try{for(var K=J[Symbol.iterator](),j;!(F=(j=K.next()).done)&&(Y.push(j.value),!(X&&Y.length===X));F=!0);}catch(D){z=!0,L=D}finally{try{!F&&K.return&&K.return()}finally{if(z)throw L}}return Y}return function(J,X){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return N(J,X);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function N(J,X){for(var Y=0;Y<X.length;Y++){var F=X[Y];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(J,F.key,F)}}return function(J,X,Y){return X&&N(J.prototype,X),Y&&N(J,Y),J}}(),g=r(2),s=R(g),I=r(20),d=R(I),u=r(0),C=R(u),h=r(13),f=R(h),y=r(24),A=R(y),m=r(4),p=R(m),b=r(16),Z=R(b),V=r(21),S=R(V),G=r(11),w=R(G),B=r(3),W=R(B);function R(N){return N&&N.__esModule?N:{default:N}}function k(N,J,X){return J in N?Object.defineProperty(N,J,{value:X,enumerable:!0,configurable:!0,writable:!0}):N[J]=X,N}function x(N,J){if(!(N instanceof J))throw new TypeError("Cannot call a class as a function")}var H=/^[ -~]*$/,M=function(){function N(J){x(this,N),this.scroll=J,this.delta=this.getDelta()}return a(N,[{key:"applyDelta",value:function(X){var Y=this,F=!1;this.scroll.update();var z=this.scroll.length();return this.scroll.batchStart(),X=E(X),X.reduce(function(L,K){var j=K.retain||K.delete||K.insert.length||1,D=K.attributes||{};if(K.insert!=null){if(typeof K.insert=="string"){var Q=K.insert;Q.endsWith(`
`)&&F&&(F=!1,Q=Q.slice(0,-1)),L>=z&&!Q.endsWith(`
`)&&(F=!0),Y.scroll.insertAt(L,Q);var O=Y.scroll.line(L),ne=i(O,2),oe=ne[0],ae=ne[1],ce=(0,W.default)({},(0,m.bubbleFormats)(oe));if(oe instanceof p.default){var ie=oe.descendant(C.default.Leaf,ae),Ze=i(ie,1),ve=Ze[0];ce=(0,W.default)(ce,(0,m.bubbleFormats)(ve))}D=d.default.attributes.diff(ce,D)||{}}else if(o(K.insert)==="object"){var P=Object.keys(K.insert)[0];if(P==null)return L;Y.scroll.insertAt(L,P,K.insert[P])}z+=j}return Object.keys(D).forEach(function(q){Y.scroll.formatAt(L,j,q,D[q])}),L+j},0),X.reduce(function(L,K){return typeof K.delete=="number"?(Y.scroll.deleteAt(L,K.delete),L):L+(K.retain||K.insert.length||1)},0),this.scroll.batchEnd(),this.update(X)}},{key:"deleteText",value:function(X,Y){return this.scroll.deleteAt(X,Y),this.update(new s.default().retain(X).delete(Y))}},{key:"formatLine",value:function(X,Y){var F=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(z).forEach(function(L){if(!(F.scroll.whitelist!=null&&!F.scroll.whitelist[L])){var K=F.scroll.lines(X,Math.max(Y,1)),j=Y;K.forEach(function(D){var Q=D.length();if(!(D instanceof f.default))D.format(L,z[L]);else{var O=X-D.offset(F.scroll),ne=D.newlineIndex(O+j)-O+1;D.formatAt(O,ne,L,z[L])}j-=Q})}}),this.scroll.optimize(),this.update(new s.default().retain(X).retain(Y,(0,S.default)(z)))}},{key:"formatText",value:function(X,Y){var F=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(z).forEach(function(L){F.scroll.formatAt(X,Y,L,z[L])}),this.update(new s.default().retain(X).retain(Y,(0,S.default)(z)))}},{key:"getContents",value:function(X,Y){return this.delta.slice(X,X+Y)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(X,Y){return X.concat(Y.delta())},new s.default)}},{key:"getFormat",value:function(X){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=[],z=[];Y===0?this.scroll.path(X).forEach(function(K){var j=i(K,1),D=j[0];D instanceof p.default?F.push(D):D instanceof C.default.Leaf&&z.push(D)}):(F=this.scroll.lines(X,Y),z=this.scroll.descendants(C.default.Leaf,X,Y));var L=[F,z].map(function(K){if(K.length===0)return{};for(var j=(0,m.bubbleFormats)(K.shift());Object.keys(j).length>0;){var D=K.shift();if(D==null)return j;j=T((0,m.bubbleFormats)(D),j)}return j});return W.default.apply(W.default,L)}},{key:"getText",value:function(X,Y){return this.getContents(X,Y).filter(function(F){return typeof F.insert=="string"}).map(function(F){return F.insert}).join("")}},{key:"insertEmbed",value:function(X,Y,F){return this.scroll.insertAt(X,Y,F),this.update(new s.default().retain(X).insert(k({},Y,F)))}},{key:"insertText",value:function(X,Y){var F=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Y=Y.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(X,Y),Object.keys(z).forEach(function(L){F.scroll.formatAt(X,Y.length,L,z[L])}),this.update(new s.default().retain(X).insert(Y,(0,S.default)(z)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var X=this.scroll.children.head;return X.statics.blotName!==p.default.blotName||X.children.length>1?!1:X.children.head instanceof Z.default}},{key:"removeFormat",value:function(X,Y){var F=this.getText(X,Y),z=this.scroll.line(X+Y),L=i(z,2),K=L[0],j=L[1],D=0,Q=new s.default;K!=null&&(K instanceof f.default?D=K.newlineIndex(j)-j+1:D=K.length()-j,Q=K.delta().slice(j,j+D-1).insert(`
`));var O=this.getContents(X,Y+D),ne=O.diff(new s.default().insert(F).concat(Q)),oe=new s.default().retain(X).concat(ne);return this.applyDelta(oe)}},{key:"update",value:function(X){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,z=this.delta;if(Y.length===1&&Y[0].type==="characterData"&&Y[0].target.data.match(H)&&C.default.find(Y[0].target)){var L=C.default.find(Y[0].target),K=(0,m.bubbleFormats)(L),j=L.offset(this.scroll),D=Y[0].oldValue.replace(A.default.CONTENTS,""),Q=new s.default().insert(D),O=new s.default().insert(L.value()),ne=new s.default().retain(j).concat(Q.diff(O,F));X=ne.reduce(function(oe,ae){return ae.insert?oe.insert(ae.insert,K):oe.push(ae)},new s.default),this.delta=z.compose(X)}else this.delta=this.getDelta(),(!X||!(0,w.default)(z.compose(X),this.delta))&&(X=z.diff(this.delta,F));return X}}]),N}();function T(N,J){return Object.keys(J).reduce(function(X,Y){return N[Y]==null||(J[Y]===N[Y]?X[Y]=J[Y]:Array.isArray(J[Y])?J[Y].indexOf(N[Y])<0&&(X[Y]=J[Y].concat([N[Y]])):X[Y]=[J[Y],N[Y]]),X},{})}function E(N){return N.reduce(function(J,X){if(X.insert===1){var Y=(0,S.default)(X.attributes);return delete Y.image,J.insert({image:X.attributes.image},Y)}if(X.attributes!=null&&(X.attributes.list===!0||X.attributes.bullet===!0)&&(X=(0,S.default)(X),X.attributes.list?X.attributes.list="ordered":(X.attributes.list="bullet",delete X.attributes.bullet)),typeof X.insert=="string"){var F=X.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return J.insert(F,X.attributes)}return J.push(X)},new s.default)}l.default=M},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.Range=void 0;var o=function(){function G(w,B){var W=[],R=!0,k=!1,x=void 0;try{for(var H=w[Symbol.iterator](),M;!(R=(M=H.next()).done)&&(W.push(M.value),!(B&&W.length===B));R=!0);}catch(T){k=!0,x=T}finally{try{!R&&H.return&&H.return()}finally{if(k)throw x}}return W}return function(w,B){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return G(w,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function G(w,B){for(var W=0;W<B.length;W++){var R=B[W];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(w,R.key,R)}}return function(w,B,W){return B&&G(w.prototype,B),W&&G(w,W),w}}(),a=r(0),g=A(a),s=r(21),I=A(s),d=r(11),u=A(d),C=r(8),h=A(C),f=r(10),y=A(f);function A(G){return G&&G.__esModule?G:{default:G}}function m(G){if(Array.isArray(G)){for(var w=0,B=Array(G.length);w<G.length;w++)B[w]=G[w];return B}else return Array.from(G)}function p(G,w){if(!(G instanceof w))throw new TypeError("Cannot call a class as a function")}var b=(0,y.default)("quill:selection"),Z=function G(w){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;p(this,G),this.index=w,this.length=B},V=function(){function G(w,B){var W=this;p(this,G),this.emitter=B,this.scroll=w,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=g.default.create("cursor",this),this.lastRange=this.savedRange=new Z(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){W.mouseDown||setTimeout(W.update.bind(W,h.default.sources.USER),1)}),this.emitter.on(h.default.events.EDITOR_CHANGE,function(R,k){R===h.default.events.TEXT_CHANGE&&k.length()>0&&W.update(h.default.sources.SILENT)}),this.emitter.on(h.default.events.SCROLL_BEFORE_UPDATE,function(){if(W.hasFocus()){var R=W.getNativeRange();R!=null&&R.start.node!==W.cursor.textNode&&W.emitter.once(h.default.events.SCROLL_UPDATE,function(){try{W.setNativeRange(R.start.node,R.start.offset,R.end.node,R.end.offset)}catch{}})}}),this.emitter.on(h.default.events.SCROLL_OPTIMIZE,function(R,k){if(k.range){var x=k.range,H=x.startNode,M=x.startOffset,T=x.endNode,E=x.endOffset;W.setNativeRange(H,M,T,E)}}),this.update(h.default.sources.SILENT)}return i(G,[{key:"handleComposition",value:function(){var B=this;this.root.addEventListener("compositionstart",function(){B.composing=!0}),this.root.addEventListener("compositionend",function(){if(B.composing=!1,B.cursor.parent){var W=B.cursor.restore();if(!W)return;setTimeout(function(){B.setNativeRange(W.startNode,W.startOffset,W.endNode,W.endOffset)},1)}})}},{key:"handleDragging",value:function(){var B=this;this.emitter.listenDOM("mousedown",document.body,function(){B.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){B.mouseDown=!1,B.update(h.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(B,W){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[B])){this.scroll.update();var R=this.getNativeRange();if(!(R==null||!R.native.collapsed||g.default.query(B,g.default.Scope.BLOCK))){if(R.start.node!==this.cursor.textNode){var k=g.default.find(R.start.node,!1);if(k==null)return;if(k instanceof g.default.Leaf){var x=k.split(R.start.offset);k.parent.insertBefore(this.cursor,x)}else k.insertBefore(this.cursor,R.start.node);this.cursor.attach()}this.cursor.format(B,W),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(B){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=this.scroll.length();B=Math.min(B,R-1),W=Math.min(B+W,R-1)-B;var k=void 0,x=this.scroll.leaf(B),H=o(x,2),M=H[0],T=H[1];if(M==null)return null;var E=M.position(T,!0),N=o(E,2);k=N[0],T=N[1];var J=document.createRange();if(W>0){J.setStart(k,T);var X=this.scroll.leaf(B+W),Y=o(X,2);if(M=Y[0],T=Y[1],M==null)return null;var F=M.position(T,!0),z=o(F,2);return k=z[0],T=z[1],J.setEnd(k,T),J.getBoundingClientRect()}else{var L="left",K=void 0;return k instanceof Text?(T<k.data.length?(J.setStart(k,T),J.setEnd(k,T+1)):(J.setStart(k,T-1),J.setEnd(k,T),L="right"),K=J.getBoundingClientRect()):(K=M.domNode.getBoundingClientRect(),T>0&&(L="right")),{bottom:K.top+K.height,height:K.height,left:K[L],right:K[L],top:K.top,width:0}}}},{key:"getNativeRange",value:function(){var B=document.getSelection();if(B==null||B.rangeCount<=0)return null;var W=B.getRangeAt(0);if(W==null)return null;var R=this.normalizeNative(W);return b.info("getNativeRange",R),R}},{key:"getRange",value:function(){var B=this.getNativeRange();if(B==null)return[null,null];var W=this.normalizedToRange(B);return[W,B]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(B){var W=this,R=[[B.start.node,B.start.offset]];B.native.collapsed||R.push([B.end.node,B.end.offset]);var k=R.map(function(M){var T=o(M,2),E=T[0],N=T[1],J=g.default.find(E,!0),X=J.offset(W.scroll);return N===0?X:J instanceof g.default.Container?X+J.length():X+J.index(E,N)}),x=Math.min(Math.max.apply(Math,m(k)),this.scroll.length()-1),H=Math.min.apply(Math,[x].concat(m(k)));return new Z(H,x-H)}},{key:"normalizeNative",value:function(B){if(!S(this.root,B.startContainer)||!B.collapsed&&!S(this.root,B.endContainer))return null;var W={start:{node:B.startContainer,offset:B.startOffset},end:{node:B.endContainer,offset:B.endOffset},native:B};return[W.start,W.end].forEach(function(R){for(var k=R.node,x=R.offset;!(k instanceof Text)&&k.childNodes.length>0;)if(k.childNodes.length>x)k=k.childNodes[x],x=0;else if(k.childNodes.length===x)k=k.lastChild,x=k instanceof Text?k.data.length:k.childNodes.length+1;else break;R.node=k,R.offset=x}),W}},{key:"rangeToNative",value:function(B){var W=this,R=B.collapsed?[B.index]:[B.index,B.index+B.length],k=[],x=this.scroll.length();return R.forEach(function(H,M){H=Math.min(x-1,H);var T=void 0,E=W.scroll.leaf(H),N=o(E,2),J=N[0],X=N[1],Y=J.position(X,M!==0),F=o(Y,2);T=F[0],X=F[1],k.push(T,X)}),k.length<2&&(k=k.concat(k)),k}},{key:"scrollIntoView",value:function(B){var W=this.lastRange;if(W!=null){var R=this.getBounds(W.index,W.length);if(R!=null){var k=this.scroll.length()-1,x=this.scroll.line(Math.min(W.index,k)),H=o(x,1),M=H[0],T=M;if(W.length>0){var E=this.scroll.line(Math.min(W.index+W.length,k)),N=o(E,1);T=N[0]}if(!(M==null||T==null)){var J=B.getBoundingClientRect();R.top<J.top?B.scrollTop-=J.top-R.top:R.bottom>J.bottom&&(B.scrollTop+=R.bottom-J.bottom)}}}}},{key:"setNativeRange",value:function(B,W){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:B,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:W,x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",B,W,R,k),!(B!=null&&(this.root.parentNode==null||B.parentNode==null||R.parentNode==null))){var H=document.getSelection();if(H!=null)if(B!=null){this.hasFocus()||this.root.focus();var M=(this.getNativeRange()||{}).native;if(M==null||x||B!==M.startContainer||W!==M.startOffset||R!==M.endContainer||k!==M.endOffset){B.tagName=="BR"&&(W=[].indexOf.call(B.parentNode.childNodes,B),B=B.parentNode),R.tagName=="BR"&&(k=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode);var T=document.createRange();T.setStart(B,W),T.setEnd(R,k),H.removeAllRanges(),H.addRange(T)}}else H.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(B){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.default.sources.API;if(typeof W=="string"&&(R=W,W=!1),b.info("setRange",B),B!=null){var k=this.rangeToNative(B);this.setNativeRange.apply(this,m(k).concat([W]))}else this.setNativeRange(null);this.update(R)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h.default.sources.USER,W=this.lastRange,R=this.getRange(),k=o(R,2),x=k[0],H=k[1];if(this.lastRange=x,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,u.default)(W,this.lastRange)){var M;!this.composing&&H!=null&&H.native.collapsed&&H.start.node!==this.cursor.textNode&&this.cursor.restore();var T=[h.default.events.SELECTION_CHANGE,(0,I.default)(this.lastRange),(0,I.default)(W),B];if((M=this.emitter).emit.apply(M,[h.default.events.EDITOR_CHANGE].concat(T)),B!==h.default.sources.SILENT){var E;(E=this.emitter).emit.apply(E,T)}}}}]),G}();function S(G,w){try{w.parentNode}catch{return!1}return w instanceof Text&&(w=w.parentNode),G.contains(w)}l.Range=Z,l.default=V},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function h(f,y){for(var A=0;A<y.length;A++){var m=y[A];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,y,A){return y&&h(f.prototype,y),A&&h(f,A),f}}(),i=function h(f,y,A){f===null&&(f=Function.prototype);var m=Object.getOwnPropertyDescriptor(f,y);if(m===void 0){var p=Object.getPrototypeOf(f);return p===null?void 0:h(p,y,A)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(A)}},a=r(0),g=s(a);function s(h){return h&&h.__esModule?h:{default:h}}function I(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function d(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function u(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var C=function(h){u(f,h);function f(){return I(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return o(f,[{key:"insertInto",value:function(A,m){A.children.length===0?i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"insertInto",this).call(this,A,m):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),f}(g.default.Embed);C.blotName="break",C.tagName="BR",l.default=C},function(n,l,r){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,C){u.__proto__=C}||function(u,C){for(var h in C)C.hasOwnProperty(h)&&(u[h]=C[h])};return function(u,C){d(u,C);function h(){this.constructor=u}u.prototype=C===null?Object.create(C):(h.prototype=C.prototype,new h)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(44),a=r(30),g=r(1),s=function(d){o(u,d);function u(C){var h=d.call(this,C)||this;return h.build(),h}return u.prototype.appendChild=function(C){this.insertBefore(C)},u.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(C){C.attach()})},u.prototype.build=function(){var C=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(h){try{var f=I(h);C.insertBefore(f,C.children.head||void 0)}catch(y){if(y instanceof g.ParchmentError)return;throw y}})},u.prototype.deleteAt=function(C,h){if(C===0&&h===this.length())return this.remove();this.children.forEachAt(C,h,function(f,y,A){f.deleteAt(y,A)})},u.prototype.descendant=function(C,h){var f=this.children.find(h),y=f[0],A=f[1];return C.blotName==null&&C(y)||C.blotName!=null&&y instanceof C?[y,A]:y instanceof u?y.descendant(C,A):[null,-1]},u.prototype.descendants=function(C,h,f){h===void 0&&(h=0),f===void 0&&(f=Number.MAX_VALUE);var y=[],A=f;return this.children.forEachAt(h,f,function(m,p,b){(C.blotName==null&&C(m)||C.blotName!=null&&m instanceof C)&&y.push(m),m instanceof u&&(y=y.concat(m.descendants(C,p,A))),A-=b}),y},u.prototype.detach=function(){this.children.forEach(function(C){C.detach()}),d.prototype.detach.call(this)},u.prototype.formatAt=function(C,h,f,y){this.children.forEachAt(C,h,function(A,m,p){A.formatAt(m,p,f,y)})},u.prototype.insertAt=function(C,h,f){var y=this.children.find(C),A=y[0],m=y[1];if(A)A.insertAt(m,h,f);else{var p=f==null?g.create("text",h):g.create(h,f);this.appendChild(p)}},u.prototype.insertBefore=function(C,h){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(f){return C instanceof f}))throw new g.ParchmentError("Cannot insert "+C.statics.blotName+" into "+this.statics.blotName);C.insertInto(this,h)},u.prototype.length=function(){return this.children.reduce(function(C,h){return C+h.length()},0)},u.prototype.moveChildren=function(C,h){this.children.forEach(function(f){C.insertBefore(f,h)})},u.prototype.optimize=function(C){if(d.prototype.optimize.call(this,C),this.children.length===0)if(this.statics.defaultChild!=null){var h=g.create(this.statics.defaultChild);this.appendChild(h),h.optimize(C)}else this.remove()},u.prototype.path=function(C,h){h===void 0&&(h=!1);var f=this.children.find(C,h),y=f[0],A=f[1],m=[[this,C]];return y instanceof u?m.concat(y.path(A,h)):(y!=null&&m.push([y,A]),m)},u.prototype.removeChild=function(C){this.children.remove(C)},u.prototype.replace=function(C){C instanceof u&&C.moveChildren(this),d.prototype.replace.call(this,C)},u.prototype.split=function(C,h){if(h===void 0&&(h=!1),!h){if(C===0)return this;if(C===this.length())return this.next}var f=this.clone();return this.parent.insertBefore(f,this.next),this.children.forEachAt(C,this.length(),function(y,A,m){y=y.split(A,h),f.appendChild(y)}),f},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(C,h){var f=this,y=[],A=[];C.forEach(function(m){m.target===f.domNode&&m.type==="childList"&&(y.push.apply(y,m.addedNodes),A.push.apply(A,m.removedNodes))}),A.forEach(function(m){if(!(m.parentNode!=null&&m.tagName!=="IFRAME"&&document.body.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var p=g.find(m);p!=null&&(p.domNode.parentNode==null||p.domNode.parentNode===f.domNode)&&p.detach()}}),y.filter(function(m){return m.parentNode==f.domNode}).sort(function(m,p){return m===p?0:m.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(m){var p=null;m.nextSibling!=null&&(p=g.find(m.nextSibling));var b=I(m);(b.next!=p||b.next==null)&&(b.parent!=null&&b.parent.removeChild(f),f.insertBefore(b,p||void 0))})},u}(a.default);function I(d){var u=g.find(d);if(u==null)try{u=g.create(d)}catch{u=g.create(g.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(h){u.domNode.appendChild(h)}),d.parentNode&&d.parentNode.replaceChild(u.domNode,d),u.attach()}return u}l.default=s},function(n,l,r){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,C){u.__proto__=C}||function(u,C){for(var h in C)C.hasOwnProperty(h)&&(u[h]=C[h])};return function(u,C){d(u,C);function h(){this.constructor=u}u.prototype=C===null?Object.create(C):(h.prototype=C.prototype,new h)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(12),a=r(31),g=r(17),s=r(1),I=function(d){o(u,d);function u(C){var h=d.call(this,C)||this;return h.attributes=new a.default(h.domNode),h}return u.formats=function(C){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return C.tagName.toLowerCase()},u.prototype.format=function(C,h){var f=s.query(C);f instanceof i.default?this.attributes.attribute(f,h):h&&f!=null&&(C!==this.statics.blotName||this.formats()[C]!==h)&&this.replaceWith(C,h)},u.prototype.formats=function(){var C=this.attributes.values(),h=this.statics.formats(this.domNode);return h!=null&&(C[this.statics.blotName]=h),C},u.prototype.replaceWith=function(C,h){var f=d.prototype.replaceWith.call(this,C,h);return this.attributes.copy(f),f},u.prototype.update=function(C,h){var f=this;d.prototype.update.call(this,C,h),C.some(function(y){return y.target===f.domNode&&y.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(C,h){var f=d.prototype.wrap.call(this,C,h);return f instanceof u&&f.statics.scope===this.statics.scope&&this.attributes.move(f),f},u}(g.default);l.default=I},function(n,l,r){var o=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,d){I.__proto__=d}||function(I,d){for(var u in d)d.hasOwnProperty(u)&&(I[u]=d[u])};return function(I,d){s(I,d);function u(){this.constructor=I}I.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(30),a=r(1),g=function(s){o(I,s);function I(){return s!==null&&s.apply(this,arguments)||this}return I.value=function(d){return!0},I.prototype.index=function(d,u){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},I.prototype.position=function(d,u){var C=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(C+=1),[this.parent.domNode,C]},I.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},I.scope=a.Scope.INLINE_BLOT,I}(i.default);l.default=g},function(n,l,r){var o=r(11),i=r(3),a={attributes:{compose:function(s,I,d){typeof s!="object"&&(s={}),typeof I!="object"&&(I={});var u=i(!0,{},I);d||(u=Object.keys(u).reduce(function(h,f){return u[f]!=null&&(h[f]=u[f]),h},{}));for(var C in s)s[C]!==void 0&&I[C]===void 0&&(u[C]=s[C]);return Object.keys(u).length>0?u:void 0},diff:function(s,I){typeof s!="object"&&(s={}),typeof I!="object"&&(I={});var d=Object.keys(s).concat(Object.keys(I)).reduce(function(u,C){return o(s[C],I[C])||(u[C]=I[C]===void 0?null:I[C]),u},{});return Object.keys(d).length>0?d:void 0},transform:function(s,I,d){if(typeof s!="object")return I;if(typeof I=="object"){if(!d)return I;var u=Object.keys(I).reduce(function(C,h){return s[h]===void 0&&(C[h]=I[h]),C},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(s){return new g(s)},length:function(s){return typeof s.delete=="number"?s.delete:typeof s.retain=="number"?s.retain:typeof s.insert=="string"?s.insert.length:1}};function g(s){this.ops=s,this.index=0,this.offset=0}g.prototype.hasNext=function(){return this.peekLength()<1/0},g.prototype.next=function(s){s||(s=1/0);var I=this.ops[this.index];if(I){var d=this.offset,u=a.length(I);if(s>=u-d?(s=u-d,this.index+=1,this.offset=0):this.offset+=s,typeof I.delete=="number")return{delete:s};var C={};return I.attributes&&(C.attributes=I.attributes),typeof I.retain=="number"?C.retain=s:typeof I.insert=="string"?C.insert=I.insert.substr(d,s):C.insert=I.insert,C}else return{retain:1/0}},g.prototype.peek=function(){return this.ops[this.index]},g.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},g.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},g.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var s=this.offset,I=this.index,d=this.next(),u=this.ops.slice(this.index);return this.offset=s,this.index=I,[d].concat(u)}else return[]},n.exports=a},function(n,l){var r=function(){function o(f,y){return y!=null&&f instanceof y}var i;try{i=Map}catch{i=function(){}}var a;try{a=Set}catch{a=function(){}}var g;try{g=Promise}catch{g=function(){}}function s(f,y,A,m,p){typeof y=="object"&&(A=y.depth,m=y.prototype,p=y.includeNonEnumerable,y=y.circular);var b=[],Z=[],V=typeof Buffer<"u";typeof y>"u"&&(y=!0),typeof A>"u"&&(A=1/0);function S(G,w){if(G===null)return null;if(w===0)return G;var B,W;if(typeof G!="object")return G;if(o(G,i))B=new i;else if(o(G,a))B=new a;else if(o(G,g))B=new g(function(J,X){G.then(function(Y){J(S(Y,w-1))},function(Y){X(S(Y,w-1))})});else if(s.__isArray(G))B=[];else if(s.__isRegExp(G))B=new RegExp(G.source,h(G)),G.lastIndex&&(B.lastIndex=G.lastIndex);else if(s.__isDate(G))B=new Date(G.getTime());else{if(V&&Buffer.isBuffer(G))return Buffer.allocUnsafe?B=Buffer.allocUnsafe(G.length):B=new Buffer(G.length),G.copy(B),B;o(G,Error)?B=Object.create(G):typeof m>"u"?(W=Object.getPrototypeOf(G),B=Object.create(W)):(B=Object.create(m),W=m)}if(y){var R=b.indexOf(G);if(R!=-1)return Z[R];b.push(G),Z.push(B)}o(G,i)&&G.forEach(function(J,X){var Y=S(X,w-1),F=S(J,w-1);B.set(Y,F)}),o(G,a)&&G.forEach(function(J){var X=S(J,w-1);B.add(X)});for(var k in G){var x;W&&(x=Object.getOwnPropertyDescriptor(W,k)),!(x&&x.set==null)&&(B[k]=S(G[k],w-1))}if(Object.getOwnPropertySymbols)for(var H=Object.getOwnPropertySymbols(G),k=0;k<H.length;k++){var M=H[k],T=Object.getOwnPropertyDescriptor(G,M);T&&!T.enumerable&&!p||(B[M]=S(G[M],w-1),T.enumerable||Object.defineProperty(B,M,{enumerable:!1}))}if(p)for(var E=Object.getOwnPropertyNames(G),k=0;k<E.length;k++){var N=E[k],T=Object.getOwnPropertyDescriptor(G,N);T&&T.enumerable||(B[N]=S(G[N],w-1),Object.defineProperty(B,N,{enumerable:!1}))}return B}return S(f,A)}s.clonePrototype=function(y){if(y===null)return null;var A=function(){};return A.prototype=y,new A};function I(f){return Object.prototype.toString.call(f)}s.__objToStr=I;function d(f){return typeof f=="object"&&I(f)==="[object Date]"}s.__isDate=d;function u(f){return typeof f=="object"&&I(f)==="[object Array]"}s.__isArray=u;function C(f){return typeof f=="object"&&I(f)==="[object RegExp]"}s.__isRegExp=C;function h(f){var y="";return f.global&&(y+="g"),f.ignoreCase&&(y+="i"),f.multiline&&(y+="m"),y}return s.__getRegExpFlags=h,s}();typeof n=="object"&&n.exports&&(n.exports=r)},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function B(W,R){var k=[],x=!0,H=!1,M=void 0;try{for(var T=W[Symbol.iterator](),E;!(x=(E=T.next()).done)&&(k.push(E.value),!(R&&k.length===R));x=!0);}catch(N){H=!0,M=N}finally{try{!x&&T.return&&T.return()}finally{if(H)throw M}}return k}return function(W,R){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return B(W,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function B(W,R){for(var k=0;k<R.length;k++){var x=R[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(W,x.key,x)}}return function(W,R,k){return R&&B(W.prototype,R),k&&B(W,k),W}}(),a=function B(W,R,k){W===null&&(W=Function.prototype);var x=Object.getOwnPropertyDescriptor(W,R);if(x===void 0){var H=Object.getPrototypeOf(W);return H===null?void 0:B(H,R,k)}else{if("value"in x)return x.value;var M=x.get;return M===void 0?void 0:M.call(k)}},g=r(0),s=b(g),I=r(8),d=b(I),u=r(4),C=b(u),h=r(16),f=b(h),y=r(13),A=b(y),m=r(25),p=b(m);function b(B){return B&&B.__esModule?B:{default:B}}function Z(B,W){if(!(B instanceof W))throw new TypeError("Cannot call a class as a function")}function V(B,W){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:B}function S(B,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);B.prototype=Object.create(W&&W.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(B,W):B.__proto__=W)}function G(B){return B instanceof C.default||B instanceof u.BlockEmbed}var w=function(B){S(W,B);function W(R,k){Z(this,W);var x=V(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,R));return x.emitter=k.emitter,Array.isArray(k.whitelist)&&(x.whitelist=k.whitelist.reduce(function(H,M){return H[M]=!0,H},{})),x.domNode.addEventListener("DOMNodeInserted",function(){}),x.optimize(),x.enable(),x}return i(W,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(k,x){var H=this.line(k),M=o(H,2),T=M[0],E=M[1],N=this.line(k+x),J=o(N,1),X=J[0];if(a(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"deleteAt",this).call(this,k,x),X!=null&&T!==X&&E>0){if(T instanceof u.BlockEmbed||X instanceof u.BlockEmbed){this.optimize();return}if(T instanceof A.default){var Y=T.newlineIndex(T.length(),!0);if(Y>-1&&(T=T.split(Y+1),T===X)){this.optimize();return}}else if(X instanceof A.default){var F=X.newlineIndex(0);F>-1&&X.split(F+1)}var z=X.children.head instanceof f.default?null:X.children.head;T.moveChildren(X,z),T.remove()}this.optimize()}},{key:"enable",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",k)}},{key:"formatAt",value:function(k,x,H,M){this.whitelist!=null&&!this.whitelist[H]||(a(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"formatAt",this).call(this,k,x,H,M),this.optimize())}},{key:"insertAt",value:function(k,x,H){if(!(H!=null&&this.whitelist!=null&&!this.whitelist[x])){if(k>=this.length())if(H==null||s.default.query(x,s.default.Scope.BLOCK)==null){var M=s.default.create(this.statics.defaultChild);this.appendChild(M),H==null&&x.endsWith(`
`)&&(x=x.slice(0,-1)),M.insertAt(0,x,H)}else{var T=s.default.create(x,H);this.appendChild(T)}else a(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,k,x,H);this.optimize()}}},{key:"insertBefore",value:function(k,x){if(k.statics.scope===s.default.Scope.INLINE_BLOT){var H=s.default.create(this.statics.defaultChild);H.appendChild(k),k=H}a(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertBefore",this).call(this,k,x)}},{key:"leaf",value:function(k){return this.path(k).pop()||[null,-1]}},{key:"line",value:function(k){return k===this.length()?this.line(k-1):this.descendant(G,k)}},{key:"lines",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,H=function M(T,E,N){var J=[],X=N;return T.children.forEachAt(E,N,function(Y,F,z){G(Y)?J.push(Y):Y instanceof s.default.Container&&(J=J.concat(M(Y,F,X))),X-=z}),J};return H(this,k,x)}},{key:"optimize",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"optimize",this).call(this,k,x),k.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,k,x))}},{key:"path",value:function(k){return a(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"path",this).call(this,k).slice(1)}},{key:"update",value:function(k){if(this.batch!==!0){var x=d.default.sources.USER;typeof k=="string"&&(x=k),Array.isArray(k)||(k=this.observer.takeRecords()),k.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,x,k),a(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"update",this).call(this,k.concat([])),k.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,x,k)}}}]),W}(s.default.Scroll);w.blotName="scroll",w.className="ql-editor",w.tagName="DIV",w.defaultChild="block",w.allowedChildren=[C.default,u.BlockEmbed,p.default],l.default=w},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.SHORTKEY=l.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},i=function(){function K(j,D){var Q=[],O=!0,ne=!1,oe=void 0;try{for(var ae=j[Symbol.iterator](),ce;!(O=(ce=ae.next()).done)&&(Q.push(ce.value),!(D&&Q.length===D));O=!0);}catch(ie){ne=!0,oe=ie}finally{try{!O&&ae.return&&ae.return()}finally{if(ne)throw oe}}return Q}return function(j,D){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return K(j,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function K(j,D){for(var Q=0;Q<D.length;Q++){var O=D[Q];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(j,O.key,O)}}return function(j,D,Q){return D&&K(j.prototype,D),Q&&K(j,Q),j}}(),g=r(21),s=B(g),I=r(11),d=B(I),u=r(3),C=B(u),h=r(2),f=B(h),y=r(20),A=B(y),m=r(0),p=B(m),b=r(5),Z=B(b),V=r(10),S=B(V),G=r(9),w=B(G);function B(K){return K&&K.__esModule?K:{default:K}}function W(K,j,D){return j in K?Object.defineProperty(K,j,{value:D,enumerable:!0,configurable:!0,writable:!0}):K[j]=D,K}function R(K,j){if(!(K instanceof j))throw new TypeError("Cannot call a class as a function")}function k(K,j){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:K}function x(K,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);K.prototype=Object.create(j&&j.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(K,j):K.__proto__=j)}var H=(0,S.default)("quill:keyboard"),M=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",T=function(K){x(j,K),a(j,null,[{key:"match",value:function(Q,O){return O=L(O),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ne){return!!O[ne]!==Q[ne]&&O[ne]!==null})?!1:O.key===(Q.which||Q.keyCode)}}]);function j(D,Q){R(this,j);var O=k(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,D,Q));return O.bindings={},Object.keys(O.options.bindings).forEach(function(ne){ne==="list autofill"&&D.scroll.whitelist!=null&&!D.scroll.whitelist.list||O.options.bindings[ne]&&O.addBinding(O.options.bindings[ne])}),O.addBinding({key:j.keys.ENTER,shiftKey:null},Y),O.addBinding({key:j.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(O.addBinding({key:j.keys.BACKSPACE},{collapsed:!0},N),O.addBinding({key:j.keys.DELETE},{collapsed:!0},J)):(O.addBinding({key:j.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},N),O.addBinding({key:j.keys.DELETE},{collapsed:!0,suffix:/^.?$/},J)),O.addBinding({key:j.keys.BACKSPACE},{collapsed:!1},X),O.addBinding({key:j.keys.DELETE},{collapsed:!1},X),O.addBinding({key:j.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},N),O.listen(),O}return a(j,[{key:"addBinding",value:function(Q){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},oe=L(Q);if(oe==null||oe.key==null)return H.warn("Attempted to add invalid keyboard binding",oe);typeof O=="function"&&(O={handler:O}),typeof ne=="function"&&(ne={handler:ne}),oe=(0,C.default)(oe,O,ne),this.bindings[oe.key]=this.bindings[oe.key]||[],this.bindings[oe.key].push(oe)}},{key:"listen",value:function(){var Q=this;this.quill.root.addEventListener("keydown",function(O){if(!O.defaultPrevented){var ne=O.which||O.keyCode,oe=(Q.bindings[ne]||[]).filter(function(he){return j.match(O,he)});if(oe.length!==0){var ae=Q.quill.getSelection();if(!(ae==null||!Q.quill.hasFocus())){var ce=Q.quill.getLine(ae.index),ie=i(ce,2),Ze=ie[0],ve=ie[1],P=Q.quill.getLeaf(ae.index),q=i(P,2),te=q[0],le=q[1],_=ae.length===0?[te,le]:Q.quill.getLeaf(ae.index+ae.length),Ie=i(_,2),Ae=Ie[0],be=Ie[1],$=te instanceof p.default.Text?te.value().slice(0,le):"",fe=Ae instanceof p.default.Text?Ae.value().slice(be):"",ye={collapsed:ae.length===0,empty:ae.length===0&&Ze.length()<=1,format:Q.quill.getFormat(ae),offset:ve,prefix:$,suffix:fe},de=oe.some(function(he){if(he.collapsed!=null&&he.collapsed!==ye.collapsed||he.empty!=null&&he.empty!==ye.empty||he.offset!=null&&he.offset!==ye.offset)return!1;if(Array.isArray(he.format)){if(he.format.every(function(Se){return ye.format[Se]==null}))return!1}else if(o(he.format)==="object"&&!Object.keys(he.format).every(function(Se){return he.format[Se]===!0?ye.format[Se]!=null:he.format[Se]===!1?ye.format[Se]==null:(0,d.default)(he.format[Se],ye.format[Se])}))return!1;return he.prefix!=null&&!he.prefix.test(ye.prefix)||he.suffix!=null&&!he.suffix.test(ye.suffix)?!1:he.handler.call(Q,ae,ye)!==!0});de&&O.preventDefault()}}}})}}]),j}(w.default);T.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},T.DEFAULTS={bindings:{bold:z("bold"),italic:z("italic"),underline:z("underline"),indent:{key:T.keys.TAB,format:["blockquote","indent","list"],handler:function(j,D){if(D.collapsed&&D.offset!==0)return!0;this.quill.format("indent","+1",Z.default.sources.USER)}},outdent:{key:T.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(j,D){if(D.collapsed&&D.offset!==0)return!0;this.quill.format("indent","-1",Z.default.sources.USER)}},"outdent backspace":{key:T.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(j,D){D.format.indent!=null?this.quill.format("indent","-1",Z.default.sources.USER):D.format.list!=null&&this.quill.format("list",!1,Z.default.sources.USER)}},"indent code-block":F(!0),"outdent code-block":F(!1),"remove tab":{key:T.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(j){this.quill.deleteText(j.index-1,1,Z.default.sources.USER)}},tab:{key:T.keys.TAB,handler:function(j){this.quill.history.cutoff();var D=new f.default().retain(j.index).delete(j.length).insert("	");this.quill.updateContents(D,Z.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(j.index+1,Z.default.sources.SILENT)}},"list empty enter":{key:T.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(j,D){this.quill.format("list",!1,Z.default.sources.USER),D.format.indent&&this.quill.format("indent",!1,Z.default.sources.USER)}},"checklist enter":{key:T.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(j){var D=this.quill.getLine(j.index),Q=i(D,2),O=Q[0],ne=Q[1],oe=(0,C.default)({},O.formats(),{list:"checked"}),ae=new f.default().retain(j.index).insert(`
`,oe).retain(O.length()-ne-1).retain(1,{list:"unchecked"});this.quill.updateContents(ae,Z.default.sources.USER),this.quill.setSelection(j.index+1,Z.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:T.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(j,D){var Q=this.quill.getLine(j.index),O=i(Q,2),ne=O[0],oe=O[1],ae=new f.default().retain(j.index).insert(`
`,D.format).retain(ne.length()-oe-1).retain(1,{header:null});this.quill.updateContents(ae,Z.default.sources.USER),this.quill.setSelection(j.index+1,Z.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(j,D){var Q=D.prefix.length,O=this.quill.getLine(j.index),ne=i(O,2),oe=ne[0],ae=ne[1];if(ae>Q)return!0;var ce=void 0;switch(D.prefix.trim()){case"[]":case"[ ]":ce="unchecked";break;case"[x]":ce="checked";break;case"-":case"*":ce="bullet";break;default:ce="ordered"}this.quill.insertText(j.index," ",Z.default.sources.USER),this.quill.history.cutoff();var ie=new f.default().retain(j.index-ae).delete(Q+1).retain(oe.length()-2-ae).retain(1,{list:ce});this.quill.updateContents(ie,Z.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(j.index-Q,Z.default.sources.SILENT)}},"code exit":{key:T.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(j){var D=this.quill.getLine(j.index),Q=i(D,2),O=Q[0],ne=Q[1],oe=new f.default().retain(j.index+O.length()-ne-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(oe,Z.default.sources.USER)}},"embed left":E(T.keys.LEFT,!1),"embed left shift":E(T.keys.LEFT,!0),"embed right":E(T.keys.RIGHT,!1),"embed right shift":E(T.keys.RIGHT,!0)}};function E(K,j){var D,Q=K===T.keys.LEFT?"prefix":"suffix";return D={key:K,shiftKey:j,altKey:null},W(D,Q,/^$/),W(D,"handler",function(ne){var oe=ne.index;K===T.keys.RIGHT&&(oe+=ne.length+1);var ae=this.quill.getLeaf(oe),ce=i(ae,1),ie=ce[0];return ie instanceof p.default.Embed?(K===T.keys.LEFT?j?this.quill.setSelection(ne.index-1,ne.length+1,Z.default.sources.USER):this.quill.setSelection(ne.index-1,Z.default.sources.USER):j?this.quill.setSelection(ne.index,ne.length+1,Z.default.sources.USER):this.quill.setSelection(ne.index+ne.length+1,Z.default.sources.USER),!1):!0}),D}function N(K,j){if(!(K.index===0||this.quill.getLength()<=1)){var D=this.quill.getLine(K.index),Q=i(D,1),O=Q[0],ne={};if(j.offset===0){var oe=this.quill.getLine(K.index-1),ae=i(oe,1),ce=ae[0];if(ce!=null&&ce.length()>1){var ie=O.formats(),Ze=this.quill.getFormat(K.index-1,1);ne=A.default.attributes.diff(ie,Ze)||{}}}var ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(j.prefix)?2:1;this.quill.deleteText(K.index-ve,ve,Z.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(K.index-ve,ve,ne,Z.default.sources.USER),this.quill.focus()}}function J(K,j){var D=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(j.suffix)?2:1;if(!(K.index>=this.quill.getLength()-D)){var Q={},O=0,ne=this.quill.getLine(K.index),oe=i(ne,1),ae=oe[0];if(j.offset>=ae.length()-1){var ce=this.quill.getLine(K.index+1),ie=i(ce,1),Ze=ie[0];if(Ze){var ve=ae.formats(),P=this.quill.getFormat(K.index,1);Q=A.default.attributes.diff(ve,P)||{},O=Ze.length()}}this.quill.deleteText(K.index,D,Z.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine(K.index+O-1,D,Q,Z.default.sources.USER)}}function X(K){var j=this.quill.getLines(K),D={};if(j.length>1){var Q=j[0].formats(),O=j[j.length-1].formats();D=A.default.attributes.diff(O,Q)||{}}this.quill.deleteText(K,Z.default.sources.USER),Object.keys(D).length>0&&this.quill.formatLine(K.index,1,D,Z.default.sources.USER),this.quill.setSelection(K.index,Z.default.sources.SILENT),this.quill.focus()}function Y(K,j){var D=this;K.length>0&&this.quill.scroll.deleteAt(K.index,K.length);var Q=Object.keys(j.format).reduce(function(O,ne){return p.default.query(ne,p.default.Scope.BLOCK)&&!Array.isArray(j.format[ne])&&(O[ne]=j.format[ne]),O},{});this.quill.insertText(K.index,`
`,Q,Z.default.sources.USER),this.quill.setSelection(K.index+1,Z.default.sources.SILENT),this.quill.focus(),Object.keys(j.format).forEach(function(O){Q[O]==null&&(Array.isArray(j.format[O])||O!=="link"&&D.quill.format(O,j.format[O],Z.default.sources.USER))})}function F(K){return{key:T.keys.TAB,shiftKey:!K,format:{"code-block":!0},handler:function(D){var Q=p.default.query("code-block"),O=D.index,ne=D.length,oe=this.quill.scroll.descendant(Q,O),ae=i(oe,2),ce=ae[0],ie=ae[1];if(ce!=null){var Ze=this.quill.getIndex(ce),ve=ce.newlineIndex(ie,!0)+1,P=ce.newlineIndex(Ze+ie+ne),q=ce.domNode.textContent.slice(ve,P).split(`
`);ie=0,q.forEach(function(te,le){K?(ce.insertAt(ve+ie,Q.TAB),ie+=Q.TAB.length,le===0?O+=Q.TAB.length:ne+=Q.TAB.length):te.startsWith(Q.TAB)&&(ce.deleteAt(ve+ie,Q.TAB.length),ie-=Q.TAB.length,le===0?O-=Q.TAB.length:ne-=Q.TAB.length),ie+=te.length+1}),this.quill.update(Z.default.sources.USER),this.quill.setSelection(O,ne,Z.default.sources.SILENT)}}}}function z(K){return{key:K[0].toUpperCase(),shortKey:!0,handler:function(D,Q){this.quill.format(K,!Q.format[K],Z.default.sources.USER)}}}function L(K){if(typeof K=="string"||typeof K=="number")return L({key:K});if((typeof K>"u"?"undefined":o(K))==="object"&&(K=(0,s.default)(K,!1)),typeof K.key=="string")if(T.keys[K.key.toUpperCase()]!=null)K.key=T.keys[K.key.toUpperCase()];else if(K.key.length===1)K.key=K.key.toUpperCase().charCodeAt(0);else return null;return K.shortKey&&(K[M]=K.shortKey,delete K.shortKey),K}l.default=T,l.SHORTKEY=M},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function A(m,p){var b=[],Z=!0,V=!1,S=void 0;try{for(var G=m[Symbol.iterator](),w;!(Z=(w=G.next()).done)&&(b.push(w.value),!(p&&b.length===p));Z=!0);}catch(B){V=!0,S=B}finally{try{!Z&&G.return&&G.return()}finally{if(V)throw S}}return b}return function(m,p){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return A(m,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function A(m,p,b){m===null&&(m=Function.prototype);var Z=Object.getOwnPropertyDescriptor(m,p);if(Z===void 0){var V=Object.getPrototypeOf(m);return V===null?void 0:A(V,p,b)}else{if("value"in Z)return Z.value;var S=Z.get;return S===void 0?void 0:S.call(b)}},a=function(){function A(m,p){for(var b=0;b<p.length;b++){var Z=p[b];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(m,Z.key,Z)}}return function(m,p,b){return p&&A(m.prototype,p),b&&A(m,b),m}}(),g=r(0),s=u(g),I=r(7),d=u(I);function u(A){return A&&A.__esModule?A:{default:A}}function C(A,m){if(!(A instanceof m))throw new TypeError("Cannot call a class as a function")}function h(A,m){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:A}function f(A,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);A.prototype=Object.create(m&&m.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(A,m):A.__proto__=m)}var y=function(A){f(m,A),a(m,null,[{key:"value",value:function(){}}]);function m(p,b){C(this,m);var Z=h(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,p));return Z.selection=b,Z.textNode=document.createTextNode(m.CONTENTS),Z.domNode.appendChild(Z.textNode),Z._length=0,Z}return a(m,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,Z){if(this._length!==0)return i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,b,Z);for(var V=this,S=0;V!=null&&V.statics.scope!==s.default.Scope.BLOCK_BLOT;)S+=V.offset(V.parent),V=V.parent;V!=null&&(this._length=m.CONTENTS.length,V.optimize(),V.formatAt(S,m.CONTENTS.length,b,Z),this._length=0)}},{key:"index",value:function(b,Z){return b===this.textNode?0:i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,b,Z)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,Z=this.selection.getNativeRange(),V=void 0,S=void 0,G=void 0;if(Z!=null&&Z.start.node===b&&Z.end.node===b){var w=[b,Z.start.offset,Z.end.offset];V=w[0],S=w[1],G=w[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==m.CONTENTS){var B=this.textNode.data.split(m.CONTENTS).join("");this.next instanceof d.default?(V=this.next.domNode,this.next.insertAt(0,B),this.textNode.data=m.CONTENTS):(this.textNode.data=B,this.parent.insertBefore(s.default.create(this.textNode),this),this.textNode=document.createTextNode(m.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var W=[S,G].map(function(k){return Math.max(0,Math.min(V.data.length,k-1))}),R=o(W,2);return S=R[0],G=R[1],{startNode:V,startOffset:S,endNode:V,endOffset:G}}}}},{key:"update",value:function(b,Z){var V=this;if(b.some(function(G){return G.type==="characterData"&&G.target===V.textNode})){var S=this.restore();S&&(Z.range=S)}}},{key:"value",value:function(){return""}}]),m}(s.default.Embed);y.blotName="cursor",y.className="ql-cursor",y.tagName="span",y.CONTENTS="\uFEFF",l.default=y},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(0),i=s(o),a=r(4),g=s(a);function s(h){return h&&h.__esModule?h:{default:h}}function I(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function d(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function u(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var C=function(h){u(f,h);function f(){return I(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(i.default.Container);C.allowedChildren=[g.default,a.BlockEmbed,C],l.default=C},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorStyle=l.ColorClass=l.ColorAttributor=void 0;var o=function(){function y(A,m){for(var p=0;p<m.length;p++){var b=m[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(A,b.key,b)}}return function(A,m,p){return m&&y(A.prototype,m),p&&y(A,p),A}}(),i=function y(A,m,p){A===null&&(A=Function.prototype);var b=Object.getOwnPropertyDescriptor(A,m);if(b===void 0){var Z=Object.getPrototypeOf(A);return Z===null?void 0:y(Z,m,p)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(p)}},a=r(0),g=s(a);function s(y){return y&&y.__esModule?y:{default:y}}function I(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}function d(y,A){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:y}function u(y,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);y.prototype=Object.create(A&&A.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(y,A):y.__proto__=A)}var C=function(y){u(A,y);function A(){return I(this,A),d(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"value",value:function(p){var b=i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"value",this).call(this,p);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(Z){return("00"+parseInt(Z).toString(16)).slice(-2)}).join("")):b}}]),A}(g.default.Attributor.Style),h=new g.default.Attributor.Class("color","ql-color",{scope:g.default.Scope.INLINE}),f=new C("color","color",{scope:g.default.Scope.INLINE});l.ColorAttributor=C,l.ColorClass=h,l.ColorStyle=f},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.sanitize=l.default=void 0;var o=function(){function f(y,A){for(var m=0;m<A.length;m++){var p=A[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(y,p.key,p)}}return function(y,A,m){return A&&f(y.prototype,A),m&&f(y,m),y}}(),i=function f(y,A,m){y===null&&(y=Function.prototype);var p=Object.getOwnPropertyDescriptor(y,A);if(p===void 0){var b=Object.getPrototypeOf(y);return b===null?void 0:f(b,A,m)}else{if("value"in p)return p.value;var Z=p.get;return Z===void 0?void 0:Z.call(m)}},a=r(6),g=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function I(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}function d(f,y){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:f}function u(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(f,y):f.__proto__=y)}var C=function(f){u(y,f);function y(){return I(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,[{key:"format",value:function(m,p){if(m!==this.statics.blotName||!p)return i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,m,p);p=this.constructor.sanitize(p),this.domNode.setAttribute("href",p)}}],[{key:"create",value:function(m){var p=i(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,m);return m=this.sanitize(m),p.setAttribute("href",m),p.setAttribute("rel","noopener noreferrer"),p.setAttribute("target","_blank"),p}},{key:"formats",value:function(m){return m.getAttribute("href")}},{key:"sanitize",value:function(m){return h(m,this.PROTOCOL_WHITELIST)?m:this.SANITIZED_URL}}]),y}(g.default);C.blotName="link",C.tagName="A",C.SANITIZED_URL="about:blank",C.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function h(f,y){var A=document.createElement("a");A.href=f;var m=A.href.slice(0,A.href.indexOf(":"));return y.indexOf(m)>-1}l.default=C,l.sanitize=h},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i=function(){function y(A,m){for(var p=0;p<m.length;p++){var b=m[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(A,b.key,b)}}return function(A,m,p){return m&&y(A.prototype,m),p&&y(A,p),A}}(),a=r(23),g=d(a),s=r(107),I=d(s);function d(y){return y&&y.__esModule?y:{default:y}}function u(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}var C=0;function h(y,A){y.setAttribute(A,y.getAttribute(A)!=="true")}var f=function(){function y(A){var m=this;u(this,y),this.select=A,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){m.togglePicker()}),this.label.addEventListener("keydown",function(p){switch(p.keyCode){case g.default.keys.ENTER:m.togglePicker();break;case g.default.keys.ESCAPE:m.escape(),p.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return i(y,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),h(this.label,"aria-expanded"),h(this.options,"aria-hidden")}},{key:"buildItem",value:function(m){var p=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),m.hasAttribute("value")&&b.setAttribute("data-value",m.getAttribute("value")),m.textContent&&b.setAttribute("data-label",m.textContent),b.addEventListener("click",function(){p.selectItem(b,!0)}),b.addEventListener("keydown",function(Z){switch(Z.keyCode){case g.default.keys.ENTER:p.selectItem(b,!0),Z.preventDefault();break;case g.default.keys.ESCAPE:p.escape(),Z.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var m=document.createElement("span");return m.classList.add("ql-picker-label"),m.innerHTML=I.default,m.tabIndex="0",m.setAttribute("role","button"),m.setAttribute("aria-expanded","false"),this.container.appendChild(m),m}},{key:"buildOptions",value:function(){var m=this,p=document.createElement("span");p.classList.add("ql-picker-options"),p.setAttribute("aria-hidden","true"),p.tabIndex="-1",p.id="ql-picker-options-"+C,C+=1,this.label.setAttribute("aria-controls",p.id),this.options=p,[].slice.call(this.select.options).forEach(function(b){var Z=m.buildItem(b);p.appendChild(Z),b.selected===!0&&m.selectItem(Z)}),this.container.appendChild(p)}},{key:"buildPicker",value:function(){var m=this;[].slice.call(this.select.attributes).forEach(function(p){m.container.setAttribute(p.name,p.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var m=this;this.close(),setTimeout(function(){return m.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(m){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(m!==b&&(b!=null&&b.classList.remove("ql-selected"),m!=null&&(m.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(m.parentNode.children,m),m.hasAttribute("data-value")?this.label.setAttribute("data-value",m.getAttribute("data-value")):this.label.removeAttribute("data-value"),m.hasAttribute("data-label")?this.label.setAttribute("data-label",m.getAttribute("data-label")):this.label.removeAttribute("data-label"),p))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var Z=document.createEvent("Event");Z.initEvent("change",!0,!0),this.select.dispatchEvent(Z)}this.close()}}},{key:"update",value:function(){var m=void 0;if(this.select.selectedIndex>-1){var p=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];m=this.select.options[this.select.selectedIndex],this.selectItem(p)}else this.selectItem(null);var b=m!=null&&m!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),y}();l.default=f},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(0),i=H(o),a=r(5),g=H(a),s=r(4),I=H(s),d=r(16),u=H(d),C=r(25),h=H(C),f=r(24),y=H(f),A=r(35),m=H(A),p=r(6),b=H(p),Z=r(22),V=H(Z),S=r(7),G=H(S),w=r(55),B=H(w),W=r(42),R=H(W),k=r(23),x=H(k);function H(M){return M&&M.__esModule?M:{default:M}}g.default.register({"blots/block":I.default,"blots/block/embed":s.BlockEmbed,"blots/break":u.default,"blots/container":h.default,"blots/cursor":y.default,"blots/embed":m.default,"blots/inline":b.default,"blots/scroll":V.default,"blots/text":G.default,"modules/clipboard":B.default,"modules/history":R.default,"modules/keyboard":x.default}),i.default.register(I.default,u.default,y.default,b.default,V.default,G.default),l.default=g.default},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(1),i=function(){function a(g){this.domNode=g,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(g){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var s;return Array.isArray(this.tagName)?(typeof g=="string"&&(g=g.toUpperCase(),parseInt(g).toString()===g&&(g=parseInt(g))),typeof g=="number"?s=document.createElement(this.tagName[g-1]):this.tagName.indexOf(g)>-1?s=document.createElement(g):s=document.createElement(this.tagName[0])):s=document.createElement(this.tagName),this.className&&s.classList.add(this.className),s},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var g=this.domNode.cloneNode(!1);return o.create(g)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},a.prototype.deleteAt=function(g,s){var I=this.isolate(g,s);I.remove()},a.prototype.formatAt=function(g,s,I,d){var u=this.isolate(g,s);if(o.query(I,o.Scope.BLOT)!=null&&d)u.wrap(I,d);else if(o.query(I,o.Scope.ATTRIBUTE)!=null){var C=o.create(this.statics.scope);u.wrap(C),C.format(I,d)}},a.prototype.insertAt=function(g,s,I){var d=I==null?o.create("text",s):o.create(s,I),u=this.split(g);this.parent.insertBefore(d,u)},a.prototype.insertInto=function(g,s){s===void 0&&(s=null),this.parent!=null&&this.parent.children.remove(this);var I=null;g.children.insertBefore(this,s),s!=null&&(I=s.domNode),(this.domNode.parentNode!=g.domNode||this.domNode.nextSibling!=I)&&g.domNode.insertBefore(this.domNode,I),this.parent=g,this.attach()},a.prototype.isolate=function(g,s){var I=this.split(g);return I.split(s),I},a.prototype.length=function(){return 1},a.prototype.offset=function(g){return g===void 0&&(g=this.parent),this.parent==null||this==g?0:this.parent.children.offset(this)+this.parent.offset(g)},a.prototype.optimize=function(g){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(g){g.parent!=null&&(g.parent.insertBefore(this,g.next),g.remove())},a.prototype.replaceWith=function(g,s){var I=typeof g=="string"?o.create(g,s):g;return I.replace(this),I},a.prototype.split=function(g,s){return g===0?this:this.next},a.prototype.update=function(g,s){},a.prototype.wrap=function(g,s){var I=typeof g=="string"?o.create(g,s):g;return this.parent!=null&&this.parent.insertBefore(I,this.next),I.appendChild(this),I},a.blotName="abstract",a}();l.default=i},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(12),i=r(32),a=r(33),g=r(1),s=function(){function I(d){this.attributes={},this.domNode=d,this.build()}return I.prototype.attribute=function(d,u){u?d.add(this.domNode,u)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},I.prototype.build=function(){var d=this;this.attributes={};var u=o.default.keys(this.domNode),C=i.default.keys(this.domNode),h=a.default.keys(this.domNode);u.concat(C).concat(h).forEach(function(f){var y=g.query(f,g.Scope.ATTRIBUTE);y instanceof o.default&&(d.attributes[y.attrName]=y)})},I.prototype.copy=function(d){var u=this;Object.keys(this.attributes).forEach(function(C){var h=u.attributes[C].value(u.domNode);d.format(C,h)})},I.prototype.move=function(d){var u=this;this.copy(d),Object.keys(this.attributes).forEach(function(C){u.attributes[C].remove(u.domNode)}),this.attributes={}},I.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(u,C){return u[C]=d.attributes[C].value(d.domNode),u},{})},I}();l.default=s},function(n,l,r){var o=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,d){I.__proto__=d}||function(I,d){for(var u in d)d.hasOwnProperty(u)&&(I[u]=d[u])};return function(I,d){s(I,d);function u(){this.constructor=I}I.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(12);function a(s,I){var d=s.getAttribute("class")||"";return d.split(/\s+/).filter(function(u){return u.indexOf(I+"-")===0})}var g=function(s){o(I,s);function I(){return s!==null&&s.apply(this,arguments)||this}return I.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},I.prototype.add=function(d,u){return this.canAdd(d,u)?(this.remove(d),d.classList.add(this.keyName+"-"+u),!0):!1},I.prototype.remove=function(d){var u=a(d,this.keyName);u.forEach(function(C){d.classList.remove(C)}),d.classList.length===0&&d.removeAttribute("class")},I.prototype.value=function(d){var u=a(d,this.keyName)[0]||"",C=u.slice(this.keyName.length+1);return this.canAdd(d,C)?C:""},I}(i.default);l.default=g},function(n,l,r){var o=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,d){I.__proto__=d}||function(I,d){for(var u in d)d.hasOwnProperty(u)&&(I[u]=d[u])};return function(I,d){s(I,d);function u(){this.constructor=I}I.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(12);function a(s){var I=s.split("-"),d=I.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return I[0]+d}var g=function(s){o(I,s);function I(){return s!==null&&s.apply(this,arguments)||this}return I.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(u){var C=u.split(":");return C[0].trim()})},I.prototype.add=function(d,u){return this.canAdd(d,u)?(d.style[a(this.keyName)]=u,!0):!1},I.prototype.remove=function(d){d.style[a(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},I.prototype.value=function(d){var u=d.style[a(this.keyName)];return this.canAdd(d,u)?u:""},I}(i.default);l.default=g},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function g(s,I){for(var d=0;d<I.length;d++){var u=I[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,u.key,u)}}return function(s,I,d){return I&&g(s.prototype,I),d&&g(s,d),s}}();function i(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}var a=function(){function g(s,I){i(this,g),this.quill=s,this.options=I,this.modules={}}return o(g,[{key:"init",value:function(){var I=this;Object.keys(this.options.modules).forEach(function(d){I.modules[d]==null&&I.addModule(d)})}},{key:"addModule",value:function(I){var d=this.quill.constructor.import("modules/"+I);return this.modules[I]=new d(this.quill,this.options.modules[I]||{}),this.modules[I]}}]),g}();a.DEFAULTS={modules:{}},a.themes={default:a},l.default=a},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function A(m,p){for(var b=0;b<p.length;b++){var Z=p[b];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(m,Z.key,Z)}}return function(m,p,b){return p&&A(m.prototype,p),b&&A(m,b),m}}(),i=function A(m,p,b){m===null&&(m=Function.prototype);var Z=Object.getOwnPropertyDescriptor(m,p);if(Z===void 0){var V=Object.getPrototypeOf(m);return V===null?void 0:A(V,p,b)}else{if("value"in Z)return Z.value;var S=Z.get;return S===void 0?void 0:S.call(b)}},a=r(0),g=d(a),s=r(7),I=d(s);function d(A){return A&&A.__esModule?A:{default:A}}function u(A,m){if(!(A instanceof m))throw new TypeError("Cannot call a class as a function")}function C(A,m){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:A}function h(A,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);A.prototype=Object.create(m&&m.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(A,m):A.__proto__=m)}var f="\uFEFF",y=function(A){h(m,A);function m(p){u(this,m);var b=C(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,p));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(Z){b.contentNode.appendChild(Z)}),b.leftGuard=document.createTextNode(f),b.rightGuard=document.createTextNode(f),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return o(m,[{key:"index",value:function(b,Z){return b===this.leftGuard?0:b===this.rightGuard?1:i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,b,Z)}},{key:"restore",value:function(b){var Z=void 0,V=void 0,S=b.data.split(f).join("");if(b===this.leftGuard)if(this.prev instanceof I.default){var G=this.prev.length();this.prev.insertAt(G,S),Z={startNode:this.prev.domNode,startOffset:G+S.length}}else V=document.createTextNode(S),this.parent.insertBefore(g.default.create(V),this),Z={startNode:V,startOffset:S.length};else b===this.rightGuard&&(this.next instanceof I.default?(this.next.insertAt(0,S),Z={startNode:this.next.domNode,startOffset:S.length}):(V=document.createTextNode(S),this.parent.insertBefore(g.default.create(V),this.next),Z={startNode:V,startOffset:S.length}));return b.data=f,Z}},{key:"update",value:function(b,Z){var V=this;b.forEach(function(S){if(S.type==="characterData"&&(S.target===V.leftGuard||S.target===V.rightGuard)){var G=V.restore(S.target);G&&(Z.range=G)}})}}]),m}(g.default.Embed);l.default=y},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.AlignStyle=l.AlignClass=l.AlignAttribute=void 0;var o=r(0),i=a(o);function a(u){return u&&u.__esModule?u:{default:u}}var g={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},s=new i.default.Attributor.Attribute("align","align",g),I=new i.default.Attributor.Class("align","ql-align",g),d=new i.default.Attributor.Style("align","text-align",g);l.AlignAttribute=s,l.AlignClass=I,l.AlignStyle=d},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundStyle=l.BackgroundClass=void 0;var o=r(0),i=g(o),a=r(26);function g(d){return d&&d.__esModule?d:{default:d}}var s=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),I=new a.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});l.BackgroundClass=s,l.BackgroundStyle=I},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.DirectionStyle=l.DirectionClass=l.DirectionAttribute=void 0;var o=r(0),i=a(o);function a(u){return u&&u.__esModule?u:{default:u}}var g={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},s=new i.default.Attributor.Attribute("direction","dir",g),I=new i.default.Attributor.Class("direction","ql-direction",g),d=new i.default.Attributor.Style("direction","direction",g);l.DirectionAttribute=s,l.DirectionClass=I,l.DirectionStyle=d},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.FontClass=l.FontStyle=void 0;var o=function(){function A(m,p){for(var b=0;b<p.length;b++){var Z=p[b];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(m,Z.key,Z)}}return function(m,p,b){return p&&A(m.prototype,p),b&&A(m,b),m}}(),i=function A(m,p,b){m===null&&(m=Function.prototype);var Z=Object.getOwnPropertyDescriptor(m,p);if(Z===void 0){var V=Object.getPrototypeOf(m);return V===null?void 0:A(V,p,b)}else{if("value"in Z)return Z.value;var S=Z.get;return S===void 0?void 0:S.call(b)}},a=r(0),g=s(a);function s(A){return A&&A.__esModule?A:{default:A}}function I(A,m){if(!(A instanceof m))throw new TypeError("Cannot call a class as a function")}function d(A,m){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:A}function u(A,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);A.prototype=Object.create(m&&m.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(A,m):A.__proto__=m)}var C={scope:g.default.Scope.INLINE,whitelist:["serif","monospace"]},h=new g.default.Attributor.Class("font","ql-font",C),f=function(A){u(m,A);function m(){return I(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"value",value:function(b){return i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),m}(g.default.Attributor.Style),y=new f("font","font-family",C);l.FontStyle=y,l.FontClass=h},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.SizeStyle=l.SizeClass=void 0;var o=r(0),i=a(o);function a(I){return I&&I.__esModule?I:{default:I}}var g=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),s=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});l.SizeClass=g,l.SizeStyle=s},function(n,l,r){n.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.getLastChangeIndex=l.default=void 0;var o=function(){function p(b,Z){for(var V=0;V<Z.length;V++){var S=Z[V];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,Z,V){return Z&&p(b.prototype,Z),V&&p(b,V),b}}(),i=r(0),a=u(i),g=r(5),s=u(g),I=r(9),d=u(I);function u(p){return p&&p.__esModule?p:{default:p}}function C(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function h(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function f(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var y=function(p){f(b,p);function b(Z,V){C(this,b);var S=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,Z,V));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(s.default.events.EDITOR_CHANGE,function(G,w,B,W){G!==s.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||W===s.default.sources.USER?S.record(w,B):S.transform(w))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return o(b,[{key:"change",value:function(V,S){if(this.stack[V].length!==0){var G=this.stack[V].pop();this.stack[S].push(G),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(G[V],s.default.sources.USER),this.ignoreChange=!1;var w=m(G[V]);this.quill.setSelection(w)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(V,S){if(V.ops.length!==0){this.stack.redo=[];var G=this.quill.getContents().diff(S),w=Date.now();if(this.lastRecorded+this.options.delay>w&&this.stack.undo.length>0){var B=this.stack.undo.pop();G=G.compose(B.undo),V=B.redo.compose(V)}else this.lastRecorded=w;this.stack.undo.push({redo:V,undo:G}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(V){this.stack.undo.forEach(function(S){S.undo=V.transform(S.undo,!0),S.redo=V.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=V.transform(S.undo,!0),S.redo=V.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(d.default);y.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function A(p){var b=p.ops[p.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(Z){return a.default.query(Z,a.default.Scope.BLOCK)!=null}):!1}function m(p){var b=p.reduce(function(V,S){return V+=S.delete||0,V},0),Z=p.length()-b;return A(p)&&(Z-=1),Z}l.default=y,l.getLastChangeIndex=m},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BaseTooltip=void 0;var o=function(){function Y(F,z){for(var L=0;L<z.length;L++){var K=z[L];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(F,K.key,K)}}return function(F,z,L){return z&&Y(F.prototype,z),L&&Y(F,L),F}}(),i=function Y(F,z,L){F===null&&(F=Function.prototype);var K=Object.getOwnPropertyDescriptor(F,z);if(K===void 0){var j=Object.getPrototypeOf(F);return j===null?void 0:Y(j,z,L)}else{if("value"in K)return K.value;var D=K.get;return D===void 0?void 0:D.call(L)}},a=r(3),g=w(a),s=r(2),I=w(s),d=r(8),u=w(d),C=r(23),h=w(C),f=r(34),y=w(f),A=r(59),m=w(A),p=r(60),b=w(p),Z=r(28),V=w(Z),S=r(61),G=w(S);function w(Y){return Y&&Y.__esModule?Y:{default:Y}}function B(Y,F){if(!(Y instanceof F))throw new TypeError("Cannot call a class as a function")}function W(Y,F){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:Y}function R(Y,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);Y.prototype=Object.create(F&&F.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,F):Y.__proto__=F)}var k=[!1,"center","right","justify"],x=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],H=[!1,"serif","monospace"],M=["1","2","3",!1],T=["small",!1,"large","huge"],E=function(Y){R(F,Y);function F(z,L){B(this,F);var K=W(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,z,L)),j=function D(Q){if(!document.body.contains(z.root))return document.body.removeEventListener("click",D);K.tooltip!=null&&!K.tooltip.root.contains(Q.target)&&document.activeElement!==K.tooltip.textbox&&!K.quill.hasFocus()&&K.tooltip.hide(),K.pickers!=null&&K.pickers.forEach(function(O){O.container.contains(Q.target)||O.close()})};return z.emitter.listenDOM("click",document.body,j),K}return o(F,[{key:"addModule",value:function(L){var K=i(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"addModule",this).call(this,L);return L==="toolbar"&&this.extendToolbar(K),K}},{key:"buildButtons",value:function(L,K){L.forEach(function(j){var D=j.getAttribute("class")||"";D.split(/\s+/).forEach(function(Q){if(Q.startsWith("ql-")&&(Q=Q.slice(3),K[Q]!=null))if(Q==="direction")j.innerHTML=K[Q][""]+K[Q].rtl;else if(typeof K[Q]=="string")j.innerHTML=K[Q];else{var O=j.value||"";O!=null&&K[Q][O]&&(j.innerHTML=K[Q][O])}})})}},{key:"buildPickers",value:function(L,K){var j=this;this.pickers=L.map(function(Q){if(Q.classList.contains("ql-align"))return Q.querySelector("option")==null&&X(Q,k),new b.default(Q,K.align);if(Q.classList.contains("ql-background")||Q.classList.contains("ql-color")){var O=Q.classList.contains("ql-background")?"background":"color";return Q.querySelector("option")==null&&X(Q,x,O==="background"?"#ffffff":"#000000"),new m.default(Q,K[O])}else return Q.querySelector("option")==null&&(Q.classList.contains("ql-font")?X(Q,H):Q.classList.contains("ql-header")?X(Q,M):Q.classList.contains("ql-size")&&X(Q,T)),new V.default(Q)});var D=function(){j.pickers.forEach(function(O){O.update()})};this.quill.on(u.default.events.EDITOR_CHANGE,D)}}]),F}(y.default);E.DEFAULTS=(0,g.default)(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var F=this,z=this.container.querySelector("input.ql-image[type=file]");z==null&&(z=document.createElement("input"),z.setAttribute("type","file"),z.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),z.classList.add("ql-image"),z.addEventListener("change",function(){if(z.files!=null&&z.files[0]!=null){var L=new FileReader;L.onload=function(K){var j=F.quill.getSelection(!0);F.quill.updateContents(new I.default().retain(j.index).delete(j.length).insert({image:K.target.result}),u.default.sources.USER),F.quill.setSelection(j.index+1,u.default.sources.SILENT),z.value=""},L.readAsDataURL(z.files[0])}}),this.container.appendChild(z)),z.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var N=function(Y){R(F,Y);function F(z,L){B(this,F);var K=W(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,z,L));return K.textbox=K.root.querySelector('input[type="text"]'),K.listen(),K}return o(F,[{key:"listen",value:function(){var L=this;this.textbox.addEventListener("keydown",function(K){h.default.match(K,"enter")?(L.save(),K.preventDefault()):h.default.match(K,"escape")&&(L.cancel(),K.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),K!=null?this.textbox.value=K:L!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+L)||""),this.root.setAttribute("data-mode",L)}},{key:"restoreFocus",value:function(){var L=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=L}},{key:"save",value:function(){var L=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var K=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",L,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",L,u.default.sources.USER)),this.quill.root.scrollTop=K;break}case"video":L=J(L);case"formula":{if(!L)break;var j=this.quill.getSelection(!0);if(j!=null){var D=j.index+j.length;this.quill.insertEmbed(D,this.root.getAttribute("data-mode"),L,u.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(D+1," ",u.default.sources.USER),this.quill.setSelection(D+2,u.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),F}(G.default);function J(Y){var F=Y.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||Y.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return F?(F[1]||"https")+"://www.youtube.com/embed/"+F[2]+"?showinfo=0":(F=Y.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(F[1]||"https")+"://player.vimeo.com/video/"+F[2]+"/":Y}function X(Y,F){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;F.forEach(function(L){var K=document.createElement("option");L===z?K.setAttribute("selected","selected"):K.setAttribute("value",L),Y.appendChild(K)})}l.BaseTooltip=N,l.default=E},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function i(){this.head=this.tail=null,this.length=0}return i.prototype.append=function(){for(var a=[],g=0;g<arguments.length;g++)a[g]=arguments[g];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},i.prototype.contains=function(a){for(var g,s=this.iterator();g=s();)if(g===a)return!0;return!1},i.prototype.insertBefore=function(a,g){a&&(a.next=g,g!=null?(a.prev=g.prev,g.prev!=null&&(g.prev.next=a),g.prev=a,g===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},i.prototype.offset=function(a){for(var g=0,s=this.head;s!=null;){if(s===a)return g;g+=s.length(),s=s.next}return-1},i.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},i.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var g=a;return a!=null&&(a=a.next),g}},i.prototype.find=function(a,g){g===void 0&&(g=!1);for(var s,I=this.iterator();s=I();){var d=s.length();if(a<d||g&&a===d&&(s.next==null||s.next.length()!==0))return[s,a];a-=d}return[null,0]},i.prototype.forEach=function(a){for(var g,s=this.iterator();g=s();)a(g)},i.prototype.forEachAt=function(a,g,s){if(!(g<=0))for(var I=this.find(a),d=I[0],u=I[1],C,h=a-u,f=this.iterator(d);(C=f())&&h<a+g;){var y=C.length();a>h?s(C,a-h,Math.min(g,h+y-a)):s(C,0,Math.min(y,a+g-h)),h+=y}},i.prototype.map=function(a){return this.reduce(function(g,s){return g.push(a(s)),g},[])},i.prototype.reduce=function(a,g){for(var s,I=this.iterator();s=I();)g=a(g,s);return g},i}();l.default=o},function(n,l,r){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,C){u.__proto__=C}||function(u,C){for(var h in C)C.hasOwnProperty(h)&&(u[h]=C[h])};return function(u,C){d(u,C);function h(){this.constructor=u}u.prototype=C===null?Object.create(C):(h.prototype=C.prototype,new h)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(17),a=r(1),g={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},s=100,I=function(d){o(u,d);function u(C){var h=d.call(this,C)||this;return h.scroll=h,h.observer=new MutationObserver(function(f){h.update(f)}),h.observer.observe(h.domNode,g),h.attach(),h}return u.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},u.prototype.deleteAt=function(C,h){this.update(),C===0&&h===this.length()?this.children.forEach(function(f){f.remove()}):d.prototype.deleteAt.call(this,C,h)},u.prototype.formatAt=function(C,h,f,y){this.update(),d.prototype.formatAt.call(this,C,h,f,y)},u.prototype.insertAt=function(C,h,f){this.update(),d.prototype.insertAt.call(this,C,h,f)},u.prototype.optimize=function(C,h){var f=this;C===void 0&&(C=[]),h===void 0&&(h={}),d.prototype.optimize.call(this,h);for(var y=[].slice.call(this.observer.takeRecords());y.length>0;)C.push(y.pop());for(var A=function(Z,V){V===void 0&&(V=!0),!(Z==null||Z===f)&&Z.domNode.parentNode!=null&&(Z.domNode[a.DATA_KEY].mutations==null&&(Z.domNode[a.DATA_KEY].mutations=[]),V&&A(Z.parent))},m=function(Z){Z.domNode[a.DATA_KEY]==null||Z.domNode[a.DATA_KEY].mutations==null||(Z instanceof i.default&&Z.children.forEach(m),Z.optimize(h))},p=C,b=0;p.length>0;b+=1){if(b>=s)throw new Error("[Parchment] Maximum optimize iterations reached");for(p.forEach(function(Z){var V=a.find(Z.target,!0);V!=null&&(V.domNode===Z.target&&(Z.type==="childList"?(A(a.find(Z.previousSibling,!1)),[].forEach.call(Z.addedNodes,function(S){var G=a.find(S,!1);A(G,!1),G instanceof i.default&&G.children.forEach(function(w){A(w,!1)})})):Z.type==="attributes"&&A(V.prev)),A(V))}),this.children.forEach(m),p=[].slice.call(this.observer.takeRecords()),y=p.slice();y.length>0;)C.push(y.pop())}},u.prototype.update=function(C,h){var f=this;h===void 0&&(h={}),C=C||this.observer.takeRecords(),C.map(function(y){var A=a.find(y.target,!0);return A==null?null:A.domNode[a.DATA_KEY].mutations==null?(A.domNode[a.DATA_KEY].mutations=[y],A):(A.domNode[a.DATA_KEY].mutations.push(y),null)}).forEach(function(y){y==null||y===f||y.domNode[a.DATA_KEY]==null||y.update(y.domNode[a.DATA_KEY].mutations||[],h)}),this.domNode[a.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,h),this.optimize(C,h)},u.blotName="scroll",u.defaultChild="block",u.scope=a.Scope.BLOCK_BLOT,u.tagName="DIV",u}(i.default);l.default=I},function(n,l,r){var o=this&&this.__extends||function(){var I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var C in u)u.hasOwnProperty(C)&&(d[C]=u[C])};return function(d,u){I(d,u);function C(){this.constructor=d}d.prototype=u===null?Object.create(u):(C.prototype=u.prototype,new C)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(18),a=r(1);function g(I,d){if(Object.keys(I).length!==Object.keys(d).length)return!1;for(var u in I)if(I[u]!==d[u])return!1;return!0}var s=function(I){o(d,I);function d(){return I!==null&&I.apply(this,arguments)||this}return d.formats=function(u){if(u.tagName!==d.tagName)return I.formats.call(this,u)},d.prototype.format=function(u,C){var h=this;u===this.statics.blotName&&!C?(this.children.forEach(function(f){f instanceof i.default||(f=f.wrap(d.blotName,!0)),h.attributes.copy(f)}),this.unwrap()):I.prototype.format.call(this,u,C)},d.prototype.formatAt=function(u,C,h,f){if(this.formats()[h]!=null||a.query(h,a.Scope.ATTRIBUTE)){var y=this.isolate(u,C);y.format(h,f)}else I.prototype.formatAt.call(this,u,C,h,f)},d.prototype.optimize=function(u){I.prototype.optimize.call(this,u);var C=this.formats();if(Object.keys(C).length===0)return this.unwrap();var h=this.next;h instanceof d&&h.prev===this&&g(C,h.formats())&&(h.moveChildren(this),h.remove())},d.blotName="inline",d.scope=a.Scope.INLINE_BLOT,d.tagName="SPAN",d}(i.default);l.default=s},function(n,l,r){var o=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,d){I.__proto__=d}||function(I,d){for(var u in d)d.hasOwnProperty(u)&&(I[u]=d[u])};return function(I,d){s(I,d);function u(){this.constructor=I}I.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(18),a=r(1),g=function(s){o(I,s);function I(){return s!==null&&s.apply(this,arguments)||this}return I.formats=function(d){var u=a.query(I.blotName).tagName;if(d.tagName!==u)return s.formats.call(this,d)},I.prototype.format=function(d,u){a.query(d,a.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!u?this.replaceWith(I.blotName):s.prototype.format.call(this,d,u))},I.prototype.formatAt=function(d,u,C,h){a.query(C,a.Scope.BLOCK)!=null?this.format(C,h):s.prototype.formatAt.call(this,d,u,C,h)},I.prototype.insertAt=function(d,u,C){if(C==null||a.query(u,a.Scope.INLINE)!=null)s.prototype.insertAt.call(this,d,u,C);else{var h=this.split(d),f=a.create(u,C);h.parent.insertBefore(f,h)}},I.prototype.update=function(d,u){navigator.userAgent.match(/Trident/)?this.build():s.prototype.update.call(this,d,u)},I.blotName="block",I.scope=a.Scope.BLOCK_BLOT,I.tagName="P",I}(i.default);l.default=g},function(n,l,r){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,I){s.__proto__=I}||function(s,I){for(var d in I)I.hasOwnProperty(d)&&(s[d]=I[d])};return function(s,I){g(s,I);function d(){this.constructor=s}s.prototype=I===null?Object.create(I):(d.prototype=I.prototype,new d)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(19),a=function(g){o(s,g);function s(){return g!==null&&g.apply(this,arguments)||this}return s.formats=function(I){},s.prototype.format=function(I,d){g.prototype.formatAt.call(this,0,this.length(),I,d)},s.prototype.formatAt=function(I,d,u,C){I===0&&d===this.length()?this.format(u,C):g.prototype.formatAt.call(this,I,d,u,C)},s.prototype.formats=function(){return this.statics.formats(this.domNode)},s}(i.default);l.default=a},function(n,l,r){var o=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,d){I.__proto__=d}||function(I,d){for(var u in d)d.hasOwnProperty(u)&&(I[u]=d[u])};return function(I,d){s(I,d);function u(){this.constructor=I}I.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=r(19),a=r(1),g=function(s){o(I,s);function I(d){var u=s.call(this,d)||this;return u.text=u.statics.value(u.domNode),u}return I.create=function(d){return document.createTextNode(d)},I.value=function(d){var u=d.data;return u.normalize&&(u=u.normalize()),u},I.prototype.deleteAt=function(d,u){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+u)},I.prototype.index=function(d,u){return this.domNode===d?u:-1},I.prototype.insertAt=function(d,u,C){C==null?(this.text=this.text.slice(0,d)+u+this.text.slice(d),this.domNode.data=this.text):s.prototype.insertAt.call(this,d,u,C)},I.prototype.length=function(){return this.text.length},I.prototype.optimize=function(d){s.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof I&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},I.prototype.position=function(d,u){return[this.domNode,d]},I.prototype.split=function(d,u){if(u===void 0&&(u=!1),!u){if(d===0)return this;if(d===this.length())return this.next}var C=a.create(this.domNode.splitText(d));return this.parent.insertBefore(C,this.next),this.text=this.statics.value(this.domNode),C},I.prototype.update=function(d,u){var C=this;d.some(function(h){return h.type==="characterData"&&h.target===C.domNode})&&(this.text=this.statics.value(this.domNode))},I.prototype.value=function(){return this.text},I.blotName="text",I.scope=a.Scope.INLINE_BLOT,I}(i.default);l.default=g},function(n,l,r){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,g){return arguments.length>1&&!this.contains(a)==!g?g:i.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,g){return g=g||0,this.substr(g,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,g){var s=this.toString();(typeof g!="number"||!isFinite(g)||Math.floor(g)!==g||g>s.length)&&(g=s.length),g-=a.length;var I=s.indexOf(a,g);return I!==-1&&I===g}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(g){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof g!="function")throw new TypeError("predicate must be a function");for(var s=Object(this),I=s.length>>>0,d=arguments[1],u,C=0;C<I;C++)if(u=s[C],g.call(d,u,C,s))return u}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,l){var r=-1,o=1,i=0;function a(b,Z,V){if(b==Z)return b?[[i,b]]:[];(V<0||b.length<V)&&(V=null);var S=d(b,Z),G=b.substring(0,S);b=b.substring(S),Z=Z.substring(S),S=u(b,Z);var w=b.substring(b.length-S);b=b.substring(0,b.length-S),Z=Z.substring(0,Z.length-S);var B=g(b,Z);return G&&B.unshift([i,G]),w&&B.push([i,w]),h(B),V!=null&&(B=A(B,V)),B=m(B),B}function g(b,Z){var V;if(!b)return[[o,Z]];if(!Z)return[[r,b]];var S=b.length>Z.length?b:Z,G=b.length>Z.length?Z:b,w=S.indexOf(G);if(w!=-1)return V=[[o,S.substring(0,w)],[i,G],[o,S.substring(w+G.length)]],b.length>Z.length&&(V[0][0]=V[2][0]=r),V;if(G.length==1)return[[r,b],[o,Z]];var B=C(b,Z);if(B){var W=B[0],R=B[1],k=B[2],x=B[3],H=B[4],M=a(W,k),T=a(R,x);return M.concat([[i,H]],T)}return s(b,Z)}function s(b,Z){for(var V=b.length,S=Z.length,G=Math.ceil((V+S)/2),w=G,B=2*G,W=new Array(B),R=new Array(B),k=0;k<B;k++)W[k]=-1,R[k]=-1;W[w+1]=0,R[w+1]=0;for(var x=V-S,H=x%2!=0,M=0,T=0,E=0,N=0,J=0;J<G;J++){for(var X=-J+M;X<=J-T;X+=2){var Y=w+X,F;X==-J||X!=J&&W[Y-1]<W[Y+1]?F=W[Y+1]:F=W[Y-1]+1;for(var z=F-X;F<V&&z<S&&b.charAt(F)==Z.charAt(z);)F++,z++;if(W[Y]=F,F>V)T+=2;else if(z>S)M+=2;else if(H){var L=w+x-X;if(L>=0&&L<B&&R[L]!=-1){var K=V-R[L];if(F>=K)return I(b,Z,F,z)}}}for(var j=-J+E;j<=J-N;j+=2){var L=w+j,K;j==-J||j!=J&&R[L-1]<R[L+1]?K=R[L+1]:K=R[L-1]+1;for(var D=K-j;K<V&&D<S&&b.charAt(V-K-1)==Z.charAt(S-D-1);)K++,D++;if(R[L]=K,K>V)N+=2;else if(D>S)E+=2;else if(!H){var Y=w+x-j;if(Y>=0&&Y<B&&W[Y]!=-1){var F=W[Y],z=w+F-Y;if(K=V-K,F>=K)return I(b,Z,F,z)}}}}return[[r,b],[o,Z]]}function I(b,Z,V,S){var G=b.substring(0,V),w=Z.substring(0,S),B=b.substring(V),W=Z.substring(S),R=a(G,w),k=a(B,W);return R.concat(k)}function d(b,Z){if(!b||!Z||b.charAt(0)!=Z.charAt(0))return 0;for(var V=0,S=Math.min(b.length,Z.length),G=S,w=0;V<G;)b.substring(w,G)==Z.substring(w,G)?(V=G,w=V):S=G,G=Math.floor((S-V)/2+V);return G}function u(b,Z){if(!b||!Z||b.charAt(b.length-1)!=Z.charAt(Z.length-1))return 0;for(var V=0,S=Math.min(b.length,Z.length),G=S,w=0;V<G;)b.substring(b.length-G,b.length-w)==Z.substring(Z.length-G,Z.length-w)?(V=G,w=V):S=G,G=Math.floor((S-V)/2+V);return G}function C(b,Z){var V=b.length>Z.length?b:Z,S=b.length>Z.length?Z:b;if(V.length<4||S.length*2<V.length)return null;function G(T,E,N){for(var J=T.substring(N,N+Math.floor(T.length/4)),X=-1,Y="",F,z,L,K;(X=E.indexOf(J,X+1))!=-1;){var j=d(T.substring(N),E.substring(X)),D=u(T.substring(0,N),E.substring(0,X));Y.length<D+j&&(Y=E.substring(X-D,X)+E.substring(X,X+j),F=T.substring(0,N-D),z=T.substring(N+j),L=E.substring(0,X-D),K=E.substring(X+j))}return Y.length*2>=T.length?[F,z,L,K,Y]:null}var w=G(V,S,Math.ceil(V.length/4)),B=G(V,S,Math.ceil(V.length/2)),W;if(!w&&!B)return null;B?w?W=w[4].length>B[4].length?w:B:W=B:W=w;var R,k,x,H;b.length>Z.length?(R=W[0],k=W[1],x=W[2],H=W[3]):(x=W[0],H=W[1],R=W[2],k=W[3]);var M=W[4];return[R,k,x,H,M]}function h(b){b.push([i,""]);for(var Z=0,V=0,S=0,G="",w="",B;Z<b.length;)switch(b[Z][0]){case o:S++,w+=b[Z][1],Z++;break;case r:V++,G+=b[Z][1],Z++;break;case i:V+S>1?(V!==0&&S!==0&&(B=d(w,G),B!==0&&(Z-V-S>0&&b[Z-V-S-1][0]==i?b[Z-V-S-1][1]+=w.substring(0,B):(b.splice(0,0,[i,w.substring(0,B)]),Z++),w=w.substring(B),G=G.substring(B)),B=u(w,G),B!==0&&(b[Z][1]=w.substring(w.length-B)+b[Z][1],w=w.substring(0,w.length-B),G=G.substring(0,G.length-B))),V===0?b.splice(Z-S,V+S,[o,w]):S===0?b.splice(Z-V,V+S,[r,G]):b.splice(Z-V-S,V+S,[r,G],[o,w]),Z=Z-V-S+(V?1:0)+(S?1:0)+1):Z!==0&&b[Z-1][0]==i?(b[Z-1][1]+=b[Z][1],b.splice(Z,1)):Z++,S=0,V=0,G="",w="";break}b[b.length-1][1]===""&&b.pop();var W=!1;for(Z=1;Z<b.length-1;)b[Z-1][0]==i&&b[Z+1][0]==i&&(b[Z][1].substring(b[Z][1].length-b[Z-1][1].length)==b[Z-1][1]?(b[Z][1]=b[Z-1][1]+b[Z][1].substring(0,b[Z][1].length-b[Z-1][1].length),b[Z+1][1]=b[Z-1][1]+b[Z+1][1],b.splice(Z-1,1),W=!0):b[Z][1].substring(0,b[Z+1][1].length)==b[Z+1][1]&&(b[Z-1][1]+=b[Z+1][1],b[Z][1]=b[Z][1].substring(b[Z+1][1].length)+b[Z+1][1],b.splice(Z+1,1),W=!0)),Z++;W&&h(b)}var f=a;f.INSERT=o,f.DELETE=r,f.EQUAL=i,n.exports=f;function y(b,Z){if(Z===0)return[i,b];for(var V=0,S=0;S<b.length;S++){var G=b[S];if(G[0]===r||G[0]===i){var w=V+G[1].length;if(Z===w)return[S+1,b];if(Z<w){b=b.slice();var B=Z-V,W=[G[0],G[1].slice(0,B)],R=[G[0],G[1].slice(B)];return b.splice(S,1,W,R),[S+1,b]}else V=w}}throw new Error("cursor_pos is out of bounds!")}function A(b,Z){var V=y(b,Z),S=V[1],G=V[0],w=S[G],B=S[G+1];if(w==null)return b;if(w[0]!==i)return b;if(B!=null&&w[1]+B[1]===B[1]+w[1])return S.splice(G,2,B,w),p(S,G,2);if(B!=null&&B[1].indexOf(w[1])===0){S.splice(G,2,[B[0],w[1]],[0,w[1]]);var W=B[1].slice(w[1].length);return W.length>0&&S.splice(G+2,0,[B[0],W]),p(S,G,3)}else return b}function m(b){for(var Z=!1,V=function(B){return B.charCodeAt(0)>=56320&&B.charCodeAt(0)<=57343},S=function(B){return B.charCodeAt(B.length-1)>=55296&&B.charCodeAt(B.length-1)<=56319},G=2;G<b.length;G+=1)b[G-2][0]===i&&S(b[G-2][1])&&b[G-1][0]===r&&V(b[G-1][1])&&b[G][0]===o&&V(b[G][1])&&(Z=!0,b[G-1][1]=b[G-2][1].slice(-1)+b[G-1][1],b[G][1]=b[G-2][1].slice(-1)+b[G][1],b[G-2][1]=b[G-2][1].slice(0,-1));if(!Z)return b;for(var w=[],G=0;G<b.length;G+=1)b[G][1].length>0&&w.push(b[G]);return w}function p(b,Z,V){for(var S=Z+V-1;S>=0&&S>=Z-1;S--)if(S+1<b.length){var G=b[S],w=b[S+1];G[0]===w[1]&&b.splice(S,2,[G[0],G[1]+w[1]])}return b}},function(n,l){l=n.exports=typeof Object.keys=="function"?Object.keys:r,l.shim=r;function r(o){var i=[];for(var a in o)i.push(a);return i}},function(n,l){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";l=n.exports=r?o:i,l.supported=o;function o(a){return Object.prototype.toString.call(a)=="[object Arguments]"}l.unsupported=i;function i(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(n,l){var r=Object.prototype.hasOwnProperty,o="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(o=!1));function a(s,I,d){this.fn=s,this.context=I,this.once=d||!1}function g(){this._events=new i,this._eventsCount=0}g.prototype.eventNames=function(){var I=[],d,u;if(this._eventsCount===0)return I;for(u in d=this._events)r.call(d,u)&&I.push(o?u.slice(1):u);return Object.getOwnPropertySymbols?I.concat(Object.getOwnPropertySymbols(d)):I},g.prototype.listeners=function(I,d){var u=o?o+I:I,C=this._events[u];if(d)return!!C;if(!C)return[];if(C.fn)return[C.fn];for(var h=0,f=C.length,y=new Array(f);h<f;h++)y[h]=C[h].fn;return y},g.prototype.emit=function(I,d,u,C,h,f){var y=o?o+I:I;if(!this._events[y])return!1;var A=this._events[y],m=arguments.length,p,b;if(A.fn){switch(A.once&&this.removeListener(I,A.fn,void 0,!0),m){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,d),!0;case 3:return A.fn.call(A.context,d,u),!0;case 4:return A.fn.call(A.context,d,u,C),!0;case 5:return A.fn.call(A.context,d,u,C,h),!0;case 6:return A.fn.call(A.context,d,u,C,h,f),!0}for(b=1,p=new Array(m-1);b<m;b++)p[b-1]=arguments[b];A.fn.apply(A.context,p)}else{var Z=A.length,V;for(b=0;b<Z;b++)switch(A[b].once&&this.removeListener(I,A[b].fn,void 0,!0),m){case 1:A[b].fn.call(A[b].context);break;case 2:A[b].fn.call(A[b].context,d);break;case 3:A[b].fn.call(A[b].context,d,u);break;case 4:A[b].fn.call(A[b].context,d,u,C);break;default:if(!p)for(V=1,p=new Array(m-1);V<m;V++)p[V-1]=arguments[V];A[b].fn.apply(A[b].context,p)}}return!0},g.prototype.on=function(I,d,u){var C=new a(d,u||this),h=o?o+I:I;return this._events[h]?this._events[h].fn?this._events[h]=[this._events[h],C]:this._events[h].push(C):(this._events[h]=C,this._eventsCount++),this},g.prototype.once=function(I,d,u){var C=new a(d,u||this,!0),h=o?o+I:I;return this._events[h]?this._events[h].fn?this._events[h]=[this._events[h],C]:this._events[h].push(C):(this._events[h]=C,this._eventsCount++),this},g.prototype.removeListener=function(I,d,u,C){var h=o?o+I:I;if(!this._events[h])return this;if(!d)return--this._eventsCount===0?this._events=new i:delete this._events[h],this;var f=this._events[h];if(f.fn)f.fn===d&&(!C||f.once)&&(!u||f.context===u)&&(--this._eventsCount===0?this._events=new i:delete this._events[h]);else{for(var y=0,A=[],m=f.length;y<m;y++)(f[y].fn!==d||C&&!f[y].once||u&&f[y].context!==u)&&A.push(f[y]);A.length?this._events[h]=A.length===1?A[0]:A:--this._eventsCount===0?this._events=new i:delete this._events[h]}return this},g.prototype.removeAllListeners=function(I){var d;return I?(d=o?o+I:I,this._events[d]&&(--this._eventsCount===0?this._events=new i:delete this._events[d])):(this._events=new i,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prototype.setMaxListeners=function(){return this},g.prefixed=o,g.EventEmitter=g,typeof n<"u"&&(n.exports=g)},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.matchText=l.matchSpacing=l.matchNewline=l.matchBlot=l.matchAttributor=l.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},i=function(){function P(q,te){var le=[],_=!0,Ie=!1,Ae=void 0;try{for(var be=q[Symbol.iterator](),$;!(_=($=be.next()).done)&&(le.push($.value),!(te&&le.length===te));_=!0);}catch(fe){Ie=!0,Ae=fe}finally{try{!_&&be.return&&be.return()}finally{if(Ie)throw Ae}}return le}return function(q,te){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return P(q,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function P(q,te){for(var le=0;le<te.length;le++){var _=te[le];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(q,_.key,_)}}return function(q,te,le){return te&&P(q.prototype,te),le&&P(q,le),q}}(),g=r(3),s=R(g),I=r(2),d=R(I),u=r(0),C=R(u),h=r(5),f=R(h),y=r(10),A=R(y),m=r(9),p=R(m),b=r(36),Z=r(37),V=r(13),S=R(V),G=r(26),w=r(38),B=r(39),W=r(40);function R(P){return P&&P.__esModule?P:{default:P}}function k(P,q,te){return q in P?Object.defineProperty(P,q,{value:te,enumerable:!0,configurable:!0,writable:!0}):P[q]=te,P}function x(P,q){if(!(P instanceof q))throw new TypeError("Cannot call a class as a function")}function H(P,q){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:P}function M(P,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);P.prototype=Object.create(q&&q.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(P,q):P.__proto__=q)}var T=(0,A.default)("quill:clipboard"),E="__ql-matcher",N=[[Node.TEXT_NODE,ve],[Node.TEXT_NODE,ce],["br",ne],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,O],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,Q],[Node.ELEMENT_NODE,Ze],["li",ae],["b",D.bind(D,"bold")],["i",D.bind(D,"italic")],["style",oe]],J=[b.AlignAttribute,w.DirectionAttribute].reduce(function(P,q){return P[q.keyName]=q,P},{}),X=[b.AlignStyle,Z.BackgroundStyle,G.ColorStyle,w.DirectionStyle,B.FontStyle,W.SizeStyle].reduce(function(P,q){return P[q.keyName]=q,P},{}),Y=function(P){M(q,P);function q(te,le){x(this,q);var _=H(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,te,le));return _.quill.root.addEventListener("paste",_.onPaste.bind(_)),_.container=_.quill.addContainer("ql-clipboard"),_.container.setAttribute("contenteditable",!0),_.container.setAttribute("tabindex",-1),_.matchers=[],N.concat(_.options.matchers).forEach(function(Ie){var Ae=i(Ie,2),be=Ae[0],$=Ae[1];!le.matchVisual&&$===ie||_.addMatcher(be,$)}),_}return a(q,[{key:"addMatcher",value:function(le,_){this.matchers.push([le,_])}},{key:"convert",value:function(le){if(typeof le=="string")return this.container.innerHTML=le.replace(/\>\r?\n +\</g,"><"),this.convert();var _=this.quill.getFormat(this.quill.selection.savedRange.index);if(_[S.default.blotName]){var Ie=this.container.innerText;return this.container.innerHTML="",new d.default().insert(Ie,k({},S.default.blotName,_[S.default.blotName]))}var Ae=this.prepareMatching(),be=i(Ae,2),$=be[0],fe=be[1],ye=j(this.container,$,fe);return L(ye,`
`)&&ye.ops[ye.ops.length-1].attributes==null&&(ye=ye.compose(new d.default().retain(ye.length()-1).delete(1))),T.log("convert",this.container.innerHTML,ye),this.container.innerHTML="",ye}},{key:"dangerouslyPasteHTML",value:function(le,_){var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.default.sources.API;if(typeof le=="string")this.quill.setContents(this.convert(le),_),this.quill.setSelection(0,f.default.sources.SILENT);else{var Ae=this.convert(_);this.quill.updateContents(new d.default().retain(le).concat(Ae),Ie),this.quill.setSelection(le+Ae.length(),f.default.sources.SILENT)}}},{key:"onPaste",value:function(le){var _=this;if(!(le.defaultPrevented||!this.quill.isEnabled())){var Ie=this.quill.getSelection(),Ae=new d.default().retain(Ie.index),be=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(f.default.sources.SILENT),setTimeout(function(){Ae=Ae.concat(_.convert()).delete(Ie.length),_.quill.updateContents(Ae,f.default.sources.USER),_.quill.setSelection(Ae.length()-Ie.length,f.default.sources.SILENT),_.quill.scrollingContainer.scrollTop=be,_.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var le=this,_=[],Ie=[];return this.matchers.forEach(function(Ae){var be=i(Ae,2),$=be[0],fe=be[1];switch($){case Node.TEXT_NODE:Ie.push(fe);break;case Node.ELEMENT_NODE:_.push(fe);break;default:[].forEach.call(le.container.querySelectorAll($),function(ye){ye[E]=ye[E]||[],ye[E].push(fe)});break}}),[_,Ie]}}]),q}(p.default);Y.DEFAULTS={matchers:[],matchVisual:!0};function F(P,q,te){return(typeof q>"u"?"undefined":o(q))==="object"?Object.keys(q).reduce(function(le,_){return F(le,_,q[_])},P):P.reduce(function(le,_){return _.attributes&&_.attributes[q]?le.push(_):le.insert(_.insert,(0,s.default)({},k({},q,te),_.attributes))},new d.default)}function z(P){if(P.nodeType!==Node.ELEMENT_NODE)return{};var q="__ql-computed-style";return P[q]||(P[q]=window.getComputedStyle(P))}function L(P,q){for(var te="",le=P.ops.length-1;le>=0&&te.length<q.length;--le){var _=P.ops[le];if(typeof _.insert!="string")break;te=_.insert+te}return te.slice(-1*q.length)===q}function K(P){if(P.childNodes.length===0)return!1;var q=z(P);return["block","list-item"].indexOf(q.display)>-1}function j(P,q,te){return P.nodeType===P.TEXT_NODE?te.reduce(function(le,_){return _(P,le)},new d.default):P.nodeType===P.ELEMENT_NODE?[].reduce.call(P.childNodes||[],function(le,_){var Ie=j(_,q,te);return _.nodeType===P.ELEMENT_NODE&&(Ie=q.reduce(function(Ae,be){return be(_,Ae)},Ie),Ie=(_[E]||[]).reduce(function(Ae,be){return be(_,Ae)},Ie)),le.concat(Ie)},new d.default):new d.default}function D(P,q,te){return F(te,P,!0)}function Q(P,q){var te=C.default.Attributor.Attribute.keys(P),le=C.default.Attributor.Class.keys(P),_=C.default.Attributor.Style.keys(P),Ie={};return te.concat(le).concat(_).forEach(function(Ae){var be=C.default.query(Ae,C.default.Scope.ATTRIBUTE);be!=null&&(Ie[be.attrName]=be.value(P),Ie[be.attrName])||(be=J[Ae],be!=null&&(be.attrName===Ae||be.keyName===Ae)&&(Ie[be.attrName]=be.value(P)||void 0),be=X[Ae],be!=null&&(be.attrName===Ae||be.keyName===Ae)&&(be=X[Ae],Ie[be.attrName]=be.value(P)||void 0))}),Object.keys(Ie).length>0&&(q=F(q,Ie)),q}function O(P,q){var te=C.default.query(P);if(te==null)return q;if(te.prototype instanceof C.default.Embed){var le={},_=te.value(P);_!=null&&(le[te.blotName]=_,q=new d.default().insert(le,te.formats(P)))}else typeof te.formats=="function"&&(q=F(q,te.blotName,te.formats(P)));return q}function ne(P,q){return L(q,`
`)||q.insert(`
`),q}function oe(){return new d.default}function ae(P,q){var te=C.default.query(P);if(te==null||te.blotName!=="list-item"||!L(q,`
`))return q;for(var le=-1,_=P.parentNode;!_.classList.contains("ql-clipboard");)(C.default.query(_)||{}).blotName==="list"&&(le+=1),_=_.parentNode;return le<=0?q:q.compose(new d.default().retain(q.length()-1).retain(1,{indent:le}))}function ce(P,q){return L(q,`
`)||(K(P)||q.length()>0&&P.nextSibling&&K(P.nextSibling))&&q.insert(`
`),q}function ie(P,q){if(K(P)&&P.nextElementSibling!=null&&!L(q,`

`)){var te=P.offsetHeight+parseFloat(z(P).marginTop)+parseFloat(z(P).marginBottom);P.nextElementSibling.offsetTop>P.offsetTop+te*1.5&&q.insert(`
`)}return q}function Ze(P,q){var te={},le=P.style||{};return le.fontStyle&&z(P).fontStyle==="italic"&&(te.italic=!0),le.fontWeight&&(z(P).fontWeight.startsWith("bold")||parseInt(z(P).fontWeight)>=700)&&(te.bold=!0),Object.keys(te).length>0&&(q=F(q,te)),parseFloat(le.textIndent||0)>0&&(q=new d.default().insert("	").concat(q)),q}function ve(P,q){var te=P.data;if(P.parentNode.tagName==="O:P")return q.insert(te.trim());if(te.trim().length===0&&P.parentNode.classList.contains("ql-clipboard"))return q;if(!z(P.parentNode).whiteSpace.startsWith("pre")){var le=function(Ie,Ae){return Ae=Ae.replace(/[^\u00a0]/g,""),Ae.length<1&&Ie?" ":Ae};te=te.replace(/\r\n/g," ").replace(/\n/g," "),te=te.replace(/\s\s+/g,le.bind(le,!0)),(P.previousSibling==null&&K(P.parentNode)||P.previousSibling!=null&&K(P.previousSibling))&&(te=te.replace(/^\s+/,le.bind(le,!1))),(P.nextSibling==null&&K(P.parentNode)||P.nextSibling!=null&&K(P.nextSibling))&&(te=te.replace(/\s+$/,le.bind(le,!1)))}return q.insert(te)}l.default=Y,l.matchAttributor=Q,l.matchBlot=O,l.matchNewline=ce,l.matchSpacing=ie,l.matchText=ve},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function h(f,y){for(var A=0;A<y.length;A++){var m=y[A];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,y,A){return y&&h(f.prototype,y),A&&h(f,A),f}}(),i=function h(f,y,A){f===null&&(f=Function.prototype);var m=Object.getOwnPropertyDescriptor(f,y);if(m===void 0){var p=Object.getPrototypeOf(f);return p===null?void 0:h(p,y,A)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(A)}},a=r(6),g=s(a);function s(h){return h&&h.__esModule?h:{default:h}}function I(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function d(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function u(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var C=function(h){u(f,h);function f(){return I(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return o(f,[{key:"optimize",value:function(A){i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"optimize",this).call(this,A),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return i(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),f}(g.default);C.blotName="bold",C.tagName=["STRONG","B"],l.default=C},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.addControls=l.default=void 0;var o=function(){function W(R,k){var x=[],H=!0,M=!1,T=void 0;try{for(var E=R[Symbol.iterator](),N;!(H=(N=E.next()).done)&&(x.push(N.value),!(k&&x.length===k));H=!0);}catch(J){M=!0,T=J}finally{try{!H&&E.return&&E.return()}finally{if(M)throw T}}return x}return function(R,k){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return W(R,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function W(R,k){for(var x=0;x<k.length;x++){var H=k[x];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(R,H.key,H)}}return function(R,k,x){return k&&W(R.prototype,k),x&&W(R,x),R}}(),a=r(2),g=A(a),s=r(0),I=A(s),d=r(5),u=A(d),C=r(10),h=A(C),f=r(9),y=A(f);function A(W){return W&&W.__esModule?W:{default:W}}function m(W,R,k){return R in W?Object.defineProperty(W,R,{value:k,enumerable:!0,configurable:!0,writable:!0}):W[R]=k,W}function p(W,R){if(!(W instanceof R))throw new TypeError("Cannot call a class as a function")}function b(W,R){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:W}function Z(W,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);W.prototype=Object.create(R&&R.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(W,R):W.__proto__=R)}var V=(0,h.default)("quill:toolbar"),S=function(W){Z(R,W);function R(k,x){p(this,R);var H=b(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,k,x));if(Array.isArray(H.options.container)){var M=document.createElement("div");w(M,H.options.container),k.container.parentNode.insertBefore(M,k.container),H.container=M}else typeof H.options.container=="string"?H.container=document.querySelector(H.options.container):H.container=H.options.container;if(!(H.container instanceof HTMLElement)){var T;return T=V.error("Container required for toolbar",H.options),b(H,T)}return H.container.classList.add("ql-toolbar"),H.controls=[],H.handlers={},Object.keys(H.options.handlers).forEach(function(E){H.addHandler(E,H.options.handlers[E])}),[].forEach.call(H.container.querySelectorAll("button, select"),function(E){H.attach(E)}),H.quill.on(u.default.events.EDITOR_CHANGE,function(E,N){E===u.default.events.SELECTION_CHANGE&&H.update(N)}),H.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){var E=H.quill.selection.getRange(),N=o(E,1),J=N[0];H.update(J)}),H}return i(R,[{key:"addHandler",value:function(x,H){this.handlers[x]=H}},{key:"attach",value:function(x){var H=this,M=[].find.call(x.classList,function(E){return E.indexOf("ql-")===0});if(M){if(M=M.slice(3),x.tagName==="BUTTON"&&x.setAttribute("type","button"),this.handlers[M]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[M]==null){V.warn("ignoring attaching to disabled format",M,x);return}if(I.default.query(M)==null){V.warn("ignoring attaching to nonexistent format",M,x);return}}var T=x.tagName==="SELECT"?"change":"click";x.addEventListener(T,function(E){var N=void 0;if(x.tagName==="SELECT"){if(x.selectedIndex<0)return;var J=x.options[x.selectedIndex];J.hasAttribute("selected")?N=!1:N=J.value||!1}else x.classList.contains("ql-active")?N=!1:N=x.value||!x.hasAttribute("value"),E.preventDefault();H.quill.focus();var X=H.quill.selection.getRange(),Y=o(X,1),F=Y[0];if(H.handlers[M]!=null)H.handlers[M].call(H,N);else if(I.default.query(M).prototype instanceof I.default.Embed){if(N=prompt("Enter "+M),!N)return;H.quill.updateContents(new g.default().retain(F.index).delete(F.length).insert(m({},M,N)),u.default.sources.USER)}else H.quill.format(M,N,u.default.sources.USER);H.update(F)}),this.controls.push([M,x])}}},{key:"update",value:function(x){var H=x==null?{}:this.quill.getFormat(x);this.controls.forEach(function(M){var T=o(M,2),E=T[0],N=T[1];if(N.tagName==="SELECT"){var J=void 0;if(x==null)J=null;else if(H[E]==null)J=N.querySelector("option[selected]");else if(!Array.isArray(H[E])){var X=H[E];typeof X=="string"&&(X=X.replace(/\"/g,'\\"')),J=N.querySelector('option[value="'+X+'"]')}J==null?(N.value="",N.selectedIndex=-1):J.selected=!0}else if(x==null)N.classList.remove("ql-active");else if(N.hasAttribute("value")){var Y=H[E]===N.getAttribute("value")||H[E]!=null&&H[E].toString()===N.getAttribute("value")||H[E]==null&&!N.getAttribute("value");N.classList.toggle("ql-active",Y)}else N.classList.toggle("ql-active",H[E]!=null)})}}]),R}(y.default);S.DEFAULTS={};function G(W,R,k){var x=document.createElement("button");x.setAttribute("type","button"),x.classList.add("ql-"+R),k!=null&&(x.value=k),W.appendChild(x)}function w(W,R){Array.isArray(R[0])||(R=[R]),R.forEach(function(k){var x=document.createElement("span");x.classList.add("ql-formats"),k.forEach(function(H){if(typeof H=="string")G(x,H);else{var M=Object.keys(H)[0],T=H[M];Array.isArray(T)?B(x,M,T):G(x,M,T)}}),W.appendChild(x)})}function B(W,R,k){var x=document.createElement("select");x.classList.add("ql-"+R),k.forEach(function(H){var M=document.createElement("option");H!==!1?M.setAttribute("value",H):M.setAttribute("selected","selected"),x.appendChild(M)}),W.appendChild(x)}S.DEFAULTS={container:null,handlers:{clean:function(){var R=this,k=this.quill.getSelection();if(k!=null)if(k.length==0){var x=this.quill.getFormat();Object.keys(x).forEach(function(H){I.default.query(H,I.default.Scope.INLINE)!=null&&R.quill.format(H,!1)})}else this.quill.removeFormat(k,u.default.sources.USER)},direction:function(R){var k=this.quill.getFormat().align;R==="rtl"&&k==null?this.quill.format("align","right",u.default.sources.USER):!R&&k==="right"&&this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",R,u.default.sources.USER)},indent:function(R){var k=this.quill.getSelection(),x=this.quill.getFormat(k),H=parseInt(x.indent||0);if(R==="+1"||R==="-1"){var M=R==="+1"?1:-1;x.direction==="rtl"&&(M*=-1),this.quill.format("indent",H+M,u.default.sources.USER)}},link:function(R){R===!0&&(R=prompt("Enter link URL:")),this.quill.format("link",R,u.default.sources.USER)},list:function(R){var k=this.quill.getSelection(),x=this.quill.getFormat(k);R==="check"?x.list==="checked"||x.list==="unchecked"?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",R,u.default.sources.USER)}}},l.default=S,l.addControls=w},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function h(f,y){for(var A=0;A<y.length;A++){var m=y[A];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,y,A){return y&&h(f.prototype,y),A&&h(f,A),f}}(),i=function h(f,y,A){f===null&&(f=Function.prototype);var m=Object.getOwnPropertyDescriptor(f,y);if(m===void 0){var p=Object.getPrototypeOf(f);return p===null?void 0:h(p,y,A)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(A)}},a=r(28),g=s(a);function s(h){return h&&h.__esModule?h:{default:h}}function I(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function d(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function u(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var C=function(h){u(f,h);function f(y,A){I(this,f);var m=d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,y));return m.label.innerHTML=A,m.container.classList.add("ql-color-picker"),[].slice.call(m.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(p){p.classList.add("ql-primary")}),m}return o(f,[{key:"buildItem",value:function(A){var m=i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"buildItem",this).call(this,A);return m.style.backgroundColor=A.getAttribute("value")||"",m}},{key:"selectItem",value:function(A,m){i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"selectItem",this).call(this,A,m);var p=this.label.querySelector(".ql-color-label"),b=A&&A.getAttribute("data-value")||"";p&&(p.tagName==="line"?p.style.stroke=b:p.style.fill=b)}}]),f}(g.default);l.default=C},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function h(f,y){for(var A=0;A<y.length;A++){var m=y[A];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,y,A){return y&&h(f.prototype,y),A&&h(f,A),f}}(),i=function h(f,y,A){f===null&&(f=Function.prototype);var m=Object.getOwnPropertyDescriptor(f,y);if(m===void 0){var p=Object.getPrototypeOf(f);return p===null?void 0:h(p,y,A)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(A)}},a=r(28),g=s(a);function s(h){return h&&h.__esModule?h:{default:h}}function I(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function d(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function u(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var C=function(h){u(f,h);function f(y,A){I(this,f);var m=d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,y));return m.container.classList.add("ql-icon-picker"),[].forEach.call(m.container.querySelectorAll(".ql-picker-item"),function(p){p.innerHTML=A[p.getAttribute("data-value")||""]}),m.defaultItem=m.container.querySelector(".ql-selected"),m.selectItem(m.defaultItem),m}return o(f,[{key:"selectItem",value:function(A,m){i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"selectItem",this).call(this,A,m),A=A||this.defaultItem,this.label.innerHTML=A.innerHTML}}]),f}(g.default);l.default=C},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function g(s,I){for(var d=0;d<I.length;d++){var u=I[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,u.key,u)}}return function(s,I,d){return I&&g(s.prototype,I),d&&g(s,d),s}}();function i(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}var a=function(){function g(s,I){var d=this;i(this,g),this.quill=s,this.boundsContainer=I||document.body,this.root=s.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return o(g,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(I){var d=I.left+I.width/2-this.root.offsetWidth/2,u=I.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=u+"px",this.root.classList.remove("ql-flip");var C=this.boundsContainer.getBoundingClientRect(),h=this.root.getBoundingClientRect(),f=0;if(h.right>C.right&&(f=C.right-h.right,this.root.style.left=d+f+"px"),h.left<C.left&&(f=C.left-h.left,this.root.style.left=d+f+"px"),h.bottom>C.bottom){var y=h.bottom-h.top,A=I.bottom-I.top+y;this.root.style.top=u-A+"px",this.root.classList.add("ql-flip")}return f}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),g}();l.default=a},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function B(W,R){var k=[],x=!0,H=!1,M=void 0;try{for(var T=W[Symbol.iterator](),E;!(x=(E=T.next()).done)&&(k.push(E.value),!(R&&k.length===R));x=!0);}catch(N){H=!0,M=N}finally{try{!x&&T.return&&T.return()}finally{if(H)throw M}}return k}return function(W,R){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return B(W,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function B(W,R,k){W===null&&(W=Function.prototype);var x=Object.getOwnPropertyDescriptor(W,R);if(x===void 0){var H=Object.getPrototypeOf(W);return H===null?void 0:B(H,R,k)}else{if("value"in x)return x.value;var M=x.get;return M===void 0?void 0:M.call(k)}},a=function(){function B(W,R){for(var k=0;k<R.length;k++){var x=R[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(W,x.key,x)}}return function(W,R,k){return R&&B(W.prototype,R),k&&B(W,k),W}}(),g=r(3),s=p(g),I=r(8),d=p(I),u=r(43),C=p(u),h=r(27),f=p(h),y=r(15),A=r(41),m=p(A);function p(B){return B&&B.__esModule?B:{default:B}}function b(B,W){if(!(B instanceof W))throw new TypeError("Cannot call a class as a function")}function Z(B,W){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:B}function V(B,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);B.prototype=Object.create(W&&W.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(B,W):B.__proto__=W)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],G=function(B){V(W,B);function W(R,k){b(this,W),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=S);var x=Z(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,R,k));return x.quill.container.classList.add("ql-snow"),x}return a(W,[{key:"extendToolbar",value:function(k){k.container.classList.add("ql-snow"),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),m.default),this.tooltip=new w(this.quill,this.options.bounds),k.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(x,H){k.handlers.link.call(k,!H.format.link)})}}]),W}(C.default);G.DEFAULTS=(0,s.default)(!0,{},C.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(W){if(W){var R=this.quill.getSelection();if(R==null||R.length==0)return;var k=this.quill.getText(R);/^\S+@\S+\.\S+$/.test(k)&&k.indexOf("mailto:")!==0&&(k="mailto:"+k);var x=this.quill.theme.tooltip;x.edit("link",k)}else this.quill.format("link",!1)}}}}});var w=function(B){V(W,B);function W(R,k){b(this,W);var x=Z(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,R,k));return x.preview=x.root.querySelector("a.ql-preview"),x}return a(W,[{key:"listen",value:function(){var k=this;i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(x){k.root.classList.contains("ql-editing")?k.save():k.edit("link",k.preview.textContent),x.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(x){if(k.linkRange!=null){var H=k.linkRange;k.restoreFocus(),k.quill.formatText(H,"link",!1,d.default.sources.USER),delete k.linkRange}x.preventDefault(),k.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(x,H,M){if(x!=null){if(x.length===0&&M===d.default.sources.USER){var T=k.quill.scroll.descendant(f.default,x.index),E=o(T,2),N=E[0],J=E[1];if(N!=null){k.linkRange=new y.Range(x.index-J,N.length());var X=f.default.formats(N.domNode);k.preview.textContent=X,k.preview.setAttribute("href",X),k.show(),k.position(k.quill.getBounds(k.linkRange));return}}else delete k.linkRange;k.hide()}})}},{key:"show",value:function(){i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),W}(u.BaseTooltip);w.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),l.default=G},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(29),i=_(o),a=r(36),g=r(38),s=r(64),I=r(65),d=_(I),u=r(66),C=_(u),h=r(67),f=_(h),y=r(37),A=r(26),m=r(39),p=r(40),b=r(56),Z=_(b),V=r(68),S=_(V),G=r(27),w=_(G),B=r(69),W=_(B),R=r(70),k=_(R),x=r(71),H=_(x),M=r(72),T=_(M),E=r(73),N=_(E),J=r(13),X=_(J),Y=r(74),F=_(Y),z=r(75),L=_(z),K=r(57),j=_(K),D=r(41),Q=_(D),O=r(28),ne=_(O),oe=r(59),ae=_(oe),ce=r(60),ie=_(ce),Ze=r(61),ve=_(Ze),P=r(108),q=_(P),te=r(62),le=_(te);function _(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}}i.default.register({"attributors/attribute/direction":g.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":y.BackgroundClass,"attributors/class/color":A.ColorClass,"attributors/class/direction":g.DirectionClass,"attributors/class/font":m.FontClass,"attributors/class/size":p.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":y.BackgroundStyle,"attributors/style/color":A.ColorStyle,"attributors/style/direction":g.DirectionStyle,"attributors/style/font":m.FontStyle,"attributors/style/size":p.SizeStyle},!0),i.default.register({"formats/align":a.AlignClass,"formats/direction":g.DirectionClass,"formats/indent":s.IndentClass,"formats/background":y.BackgroundStyle,"formats/color":A.ColorStyle,"formats/font":m.FontClass,"formats/size":p.SizeClass,"formats/blockquote":d.default,"formats/code-block":X.default,"formats/header":C.default,"formats/list":f.default,"formats/bold":Z.default,"formats/code":J.Code,"formats/italic":S.default,"formats/link":w.default,"formats/script":W.default,"formats/strike":k.default,"formats/underline":H.default,"formats/image":T.default,"formats/video":N.default,"formats/list/item":h.ListItem,"modules/formula":F.default,"modules/syntax":L.default,"modules/toolbar":j.default,"themes/bubble":q.default,"themes/snow":le.default,"ui/icons":Q.default,"ui/picker":ne.default,"ui/icon-picker":ie.default,"ui/color-picker":ae.default,"ui/tooltip":ve.default},!0),l.default=i.default},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.IndentClass=void 0;var o=function(){function f(y,A){for(var m=0;m<A.length;m++){var p=A[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(y,p.key,p)}}return function(y,A,m){return A&&f(y.prototype,A),m&&f(y,m),y}}(),i=function f(y,A,m){y===null&&(y=Function.prototype);var p=Object.getOwnPropertyDescriptor(y,A);if(p===void 0){var b=Object.getPrototypeOf(y);return b===null?void 0:f(b,A,m)}else{if("value"in p)return p.value;var Z=p.get;return Z===void 0?void 0:Z.call(m)}},a=r(0),g=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function I(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}function d(f,y){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:f}function u(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(f,y):f.__proto__=y)}var C=function(f){u(y,f);function y(){return I(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,[{key:"add",value:function(m,p){if(p==="+1"||p==="-1"){var b=this.value(m)||0;p=p==="+1"?b+1:b-1}return p===0?(this.remove(m),!0):i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"add",this).call(this,m,p)}},{key:"canAdd",value:function(m,p){return i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,m,p)||i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,m,parseInt(p))}},{key:"value",value:function(m){return parseInt(i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,m))||void 0}}]),y}(g.default.Attributor.Class),h=new C("indent","ql-indent",{scope:g.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});l.IndentClass=h},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(4),i=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function g(u,C){if(!(u instanceof C))throw new TypeError("Cannot call a class as a function")}function s(u,C){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:u}function I(u,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);u.prototype=Object.create(C&&C.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(u,C):u.__proto__=C)}var d=function(u){I(C,u);function C(){return g(this,C),s(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(i.default);d.blotName="blockquote",d.tagName="blockquote",l.default=d},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function C(h,f){for(var y=0;y<f.length;y++){var A=f[y];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(h,A.key,A)}}return function(h,f,y){return f&&C(h.prototype,f),y&&C(h,y),h}}(),i=r(4),a=g(i);function g(C){return C&&C.__esModule?C:{default:C}}function s(C,h){if(!(C instanceof h))throw new TypeError("Cannot call a class as a function")}function I(C,h){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:C}function d(C,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);C.prototype=Object.create(h&&h.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(C,h):C.__proto__=h)}var u=function(C){d(h,C);function h(){return s(this,h),I(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return o(h,null,[{key:"formats",value:function(y){return this.tagName.indexOf(y.tagName)+1}}]),h}(a.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],l.default=u},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.ListItem=void 0;var o=function(){function b(Z,V){for(var S=0;S<V.length;S++){var G=V[S];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(Z,G.key,G)}}return function(Z,V,S){return V&&b(Z.prototype,V),S&&b(Z,S),Z}}(),i=function b(Z,V,S){Z===null&&(Z=Function.prototype);var G=Object.getOwnPropertyDescriptor(Z,V);if(G===void 0){var w=Object.getPrototypeOf(Z);return w===null?void 0:b(w,V,S)}else{if("value"in G)return G.value;var B=G.get;return B===void 0?void 0:B.call(S)}},a=r(0),g=C(a),s=r(4),I=C(s),d=r(25),u=C(d);function C(b){return b&&b.__esModule?b:{default:b}}function h(b,Z,V){return Z in b?Object.defineProperty(b,Z,{value:V,enumerable:!0,configurable:!0,writable:!0}):b[Z]=V,b}function f(b,Z){if(!(b instanceof Z))throw new TypeError("Cannot call a class as a function")}function y(b,Z){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:b}function A(b,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);b.prototype=Object.create(Z&&Z.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(b,Z):b.__proto__=Z)}var m=function(b){A(Z,b);function Z(){return f(this,Z),y(this,(Z.__proto__||Object.getPrototypeOf(Z)).apply(this,arguments))}return o(Z,[{key:"format",value:function(S,G){S===p.blotName&&!G?this.replaceWith(g.default.create(this.statics.scope)):i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"format",this).call(this,S,G)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,G){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,G),this):(this.parent.unwrap(),i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"replaceWith",this).call(this,S,G))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:i(Z.__proto__||Object.getPrototypeOf(Z),"formats",this).call(this,S)}}]),Z}(I.default);m.blotName="list-item",m.tagName="LI";var p=function(b){A(Z,b),o(Z,null,[{key:"create",value:function(S){var G=S==="ordered"?"OL":"UL",w=i(Z.__proto__||Object.getPrototypeOf(Z),"create",this).call(this,G);return(S==="checked"||S==="unchecked")&&w.setAttribute("data-checked",S==="checked"),w}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function Z(V){f(this,Z);var S=y(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,V)),G=function(B){if(B.target.parentNode===V){var W=S.statics.formats(V),R=g.default.find(B.target);W==="checked"?R.format("list","unchecked"):W==="unchecked"&&R.format("list","checked")}};return V.addEventListener("touchstart",G),V.addEventListener("mousedown",G),S}return o(Z,[{key:"format",value:function(S,G){this.children.length>0&&this.children.tail.format(S,G)}},{key:"formats",value:function(){return h({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,G){if(S instanceof m)i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"insertBefore",this).call(this,S,G);else{var w=G==null?this.length():G.offset(this),B=this.split(w);B.parent.insertBefore(S,B)}}},{key:"optimize",value:function(S){i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"optimize",this).call(this,S);var G=this.next;G!=null&&G.prev===this&&G.statics.blotName===this.statics.blotName&&G.domNode.tagName===this.domNode.tagName&&G.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(G.moveChildren(this),G.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var G=g.default.create(this.statics.defaultChild);S.moveChildren(G),this.appendChild(G)}i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"replace",this).call(this,S)}}]),Z}(u.default);p.blotName="list",p.scope=g.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[m],l.ListItem=m,l.default=p},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(56),i=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function g(u,C){if(!(u instanceof C))throw new TypeError("Cannot call a class as a function")}function s(u,C){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:u}function I(u,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);u.prototype=Object.create(C&&C.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(u,C):u.__proto__=C)}var d=function(u){I(C,u);function C(){return g(this,C),s(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(i.default);d.blotName="italic",d.tagName=["EM","I"],l.default=d},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function h(f,y){for(var A=0;A<y.length;A++){var m=y[A];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,y,A){return y&&h(f.prototype,y),A&&h(f,A),f}}(),i=function h(f,y,A){f===null&&(f=Function.prototype);var m=Object.getOwnPropertyDescriptor(f,y);if(m===void 0){var p=Object.getPrototypeOf(f);return p===null?void 0:h(p,y,A)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(A)}},a=r(6),g=s(a);function s(h){return h&&h.__esModule?h:{default:h}}function I(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function d(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function u(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var C=function(h){u(f,h);function f(){return I(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return o(f,null,[{key:"create",value:function(A){return A==="super"?document.createElement("sup"):A==="sub"?document.createElement("sub"):i(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,A)}},{key:"formats",value:function(A){if(A.tagName==="SUB")return"sub";if(A.tagName==="SUP")return"super"}}]),f}(g.default);C.blotName="script",C.tagName=["SUB","SUP"],l.default=C},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(6),i=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function g(u,C){if(!(u instanceof C))throw new TypeError("Cannot call a class as a function")}function s(u,C){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:u}function I(u,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);u.prototype=Object.create(C&&C.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(u,C):u.__proto__=C)}var d=function(u){I(C,u);function C(){return g(this,C),s(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(i.default);d.blotName="strike",d.tagName="S",l.default=d},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=r(6),i=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function g(u,C){if(!(u instanceof C))throw new TypeError("Cannot call a class as a function")}function s(u,C){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:u}function I(u,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);u.prototype=Object.create(C&&C.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(u,C):u.__proto__=C)}var d=function(u){I(C,u);function C(){return g(this,C),s(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(i.default);d.blotName="underline",d.tagName="U",l.default=d},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function y(A,m){for(var p=0;p<m.length;p++){var b=m[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(A,b.key,b)}}return function(A,m,p){return m&&y(A.prototype,m),p&&y(A,p),A}}(),i=function y(A,m,p){A===null&&(A=Function.prototype);var b=Object.getOwnPropertyDescriptor(A,m);if(b===void 0){var Z=Object.getPrototypeOf(A);return Z===null?void 0:y(Z,m,p)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(p)}},a=r(0),g=I(a),s=r(27);function I(y){return y&&y.__esModule?y:{default:y}}function d(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}function u(y,A){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:y}function C(y,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);y.prototype=Object.create(A&&A.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(y,A):y.__proto__=A)}var h=["alt","height","width"],f=function(y){C(A,y);function A(){return d(this,A),u(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"format",value:function(p,b){h.indexOf(p)>-1?b?this.domNode.setAttribute(p,b):this.domNode.removeAttribute(p):i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,p,b)}}],[{key:"create",value:function(p){var b=i(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,p);return typeof p=="string"&&b.setAttribute("src",this.sanitize(p)),b}},{key:"formats",value:function(p){return h.reduce(function(b,Z){return p.hasAttribute(Z)&&(b[Z]=p.getAttribute(Z)),b},{})}},{key:"match",value:function(p){return/\.(jpe?g|gif|png)$/.test(p)||/^data:image\/.+;base64/.test(p)}},{key:"sanitize",value:function(p){return(0,s.sanitize)(p,["http","https","data"])?p:"//:0"}},{key:"value",value:function(p){return p.getAttribute("src")}}]),A}(g.default.Embed);f.blotName="image",f.tagName="IMG",l.default=f},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0});var o=function(){function y(A,m){for(var p=0;p<m.length;p++){var b=m[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(A,b.key,b)}}return function(A,m,p){return m&&y(A.prototype,m),p&&y(A,p),A}}(),i=function y(A,m,p){A===null&&(A=Function.prototype);var b=Object.getOwnPropertyDescriptor(A,m);if(b===void 0){var Z=Object.getPrototypeOf(A);return Z===null?void 0:y(Z,m,p)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(p)}},a=r(4),g=r(27),s=I(g);function I(y){return y&&y.__esModule?y:{default:y}}function d(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}function u(y,A){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:y}function C(y,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);y.prototype=Object.create(A&&A.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(y,A):y.__proto__=A)}var h=["height","width"],f=function(y){C(A,y);function A(){return d(this,A),u(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"format",value:function(p,b){h.indexOf(p)>-1?b?this.domNode.setAttribute(p,b):this.domNode.removeAttribute(p):i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,p,b)}}],[{key:"create",value:function(p){var b=i(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,p);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(p)),b}},{key:"formats",value:function(p){return h.reduce(function(b,Z){return p.hasAttribute(Z)&&(b[Z]=p.getAttribute(Z)),b},{})}},{key:"sanitize",value:function(p){return s.default.sanitize(p)}},{key:"value",value:function(p){return p.getAttribute("src")}}]),A}(a.BlockEmbed);f.blotName="video",f.className="ql-video",f.tagName="IFRAME",l.default=f},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.FormulaBlot=void 0;var o=function(){function p(b,Z){for(var V=0;V<Z.length;V++){var S=Z[V];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,Z,V){return Z&&p(b.prototype,Z),V&&p(b,V),b}}(),i=function p(b,Z,V){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,Z);if(S===void 0){var G=Object.getPrototypeOf(b);return G===null?void 0:p(G,Z,V)}else{if("value"in S)return S.value;var w=S.get;return w===void 0?void 0:w.call(V)}},a=r(35),g=C(a),s=r(5),I=C(s),d=r(9),u=C(d);function C(p){return p&&p.__esModule?p:{default:p}}function h(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function f(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function y(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var A=function(p){y(b,p);function b(){return h(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,null,[{key:"create",value:function(V){var S=i(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,V);return typeof V=="string"&&(window.katex.render(V,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",V)),S}},{key:"value",value:function(V){return V.getAttribute("data-value")}}]),b}(g.default);A.blotName="formula",A.className="ql-formula",A.tagName="SPAN";var m=function(p){y(b,p),o(b,null,[{key:"register",value:function(){I.default.register(A,!0)}}]);function b(){h(this,b);var Z=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return Z}return b}(u.default);l.FormulaBlot=A,l.default=m},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.CodeToken=l.CodeBlock=void 0;var o=function(){function V(S,G){for(var w=0;w<G.length;w++){var B=G[w];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(S,B.key,B)}}return function(S,G,w){return G&&V(S.prototype,G),w&&V(S,w),S}}(),i=function V(S,G,w){S===null&&(S=Function.prototype);var B=Object.getOwnPropertyDescriptor(S,G);if(B===void 0){var W=Object.getPrototypeOf(S);return W===null?void 0:V(W,G,w)}else{if("value"in B)return B.value;var R=B.get;return R===void 0?void 0:R.call(w)}},a=r(0),g=f(a),s=r(5),I=f(s),d=r(9),u=f(d),C=r(13),h=f(C);function f(V){return V&&V.__esModule?V:{default:V}}function y(V,S){if(!(V instanceof S))throw new TypeError("Cannot call a class as a function")}function A(V,S){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:V}function m(V,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);V.prototype=Object.create(S&&S.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(V,S):V.__proto__=S)}var p=function(V){m(S,V);function S(){return y(this,S),A(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,[{key:"replaceWith",value:function(w){this.domNode.textContent=this.domNode.textContent,this.attach(),i(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,w)}},{key:"highlight",value:function(w){var B=this.domNode.textContent;this.cachedText!==B&&((B.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=w(B),this.domNode.normalize(),this.attach()),this.cachedText=B)}}]),S}(h.default);p.className="ql-syntax";var b=new g.default.Attributor.Class("token","hljs",{scope:g.default.Scope.INLINE}),Z=function(V){m(S,V),o(S,null,[{key:"register",value:function(){I.default.register(b,!0),I.default.register(p,!0)}}]);function S(G,w){y(this,S);var B=A(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,G,w));if(typeof B.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var W=null;return B.quill.on(I.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(W),W=setTimeout(function(){B.highlight(),W=null},B.options.interval)}),B.highlight(),B}return o(S,[{key:"highlight",value:function(){var w=this;if(!this.quill.selection.composing){this.quill.update(I.default.sources.USER);var B=this.quill.getSelection();this.quill.scroll.descendants(p).forEach(function(W){W.highlight(w.options.highlight)}),this.quill.update(I.default.sources.SILENT),B!=null&&this.quill.setSelection(B,I.default.sources.SILENT)}}}]),S}(u.default);Z.DEFAULTS={highlight:function(){return window.hljs==null?null:function(V){var S=window.hljs.highlightAuto(V);return S.value}}(),interval:1e3},l.CodeBlock=p,l.CodeToken=b,l.default=Z},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,l){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,l){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,l){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,l){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,l){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BubbleTooltip=void 0;var o=function S(G,w,B){G===null&&(G=Function.prototype);var W=Object.getOwnPropertyDescriptor(G,w);if(W===void 0){var R=Object.getPrototypeOf(G);return R===null?void 0:S(R,w,B)}else{if("value"in W)return W.value;var k=W.get;return k===void 0?void 0:k.call(B)}},i=function(){function S(G,w){for(var B=0;B<w.length;B++){var W=w[B];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(G,W.key,W)}}return function(G,w,B){return w&&S(G.prototype,w),B&&S(G,B),G}}(),a=r(3),g=y(a),s=r(8),I=y(s),d=r(43),u=y(d),C=r(15),h=r(41),f=y(h);function y(S){return S&&S.__esModule?S:{default:S}}function A(S,G){if(!(S instanceof G))throw new TypeError("Cannot call a class as a function")}function m(S,G){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:S}function p(S,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);S.prototype=Object.create(G&&G.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(S,G):S.__proto__=G)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Z=function(S){p(G,S);function G(w,B){A(this,G),B.modules.toolbar!=null&&B.modules.toolbar.container==null&&(B.modules.toolbar.container=b);var W=m(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,w,B));return W.quill.container.classList.add("ql-bubble"),W}return i(G,[{key:"extendToolbar",value:function(B){this.tooltip=new V(this.quill,this.options.bounds),this.tooltip.root.appendChild(B.container),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),f.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),f.default)}}]),G}(u.default);Z.DEFAULTS=(0,g.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(G){G?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var V=function(S){p(G,S);function G(w,B){A(this,G);var W=m(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,w,B));return W.quill.on(I.default.events.EDITOR_CHANGE,function(R,k,x,H){if(R===I.default.events.SELECTION_CHANGE)if(k!=null&&k.length>0&&H===I.default.sources.USER){W.show(),W.root.style.left="0px",W.root.style.width="",W.root.style.width=W.root.offsetWidth+"px";var M=W.quill.getLines(k.index,k.length);if(M.length===1)W.position(W.quill.getBounds(k));else{var T=M[M.length-1],E=W.quill.getIndex(T),N=Math.min(T.length()-1,k.index+k.length-E),J=W.quill.getBounds(new C.Range(E,N));W.position(J)}}else document.activeElement!==W.textbox&&W.quill.hasFocus()&&W.hide()}),W}return i(G,[{key:"listen",value:function(){var B=this;o(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){B.root.classList.remove("ql-editing")}),this.quill.on(I.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!B.root.classList.contains("ql-hidden")){var W=B.quill.getSelection();W!=null&&B.position(B.quill.getBounds(W))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(B){var W=o(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"position",this).call(this,B),R=this.root.querySelector(".ql-tooltip-arrow");if(R.style.marginLeft="",W===0)return W;R.style.marginLeft=-1*W-R.offsetWidth/2+"px"}}]),G}(d.BaseTooltip);V.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),l.BubbleTooltip=V,l.default=Z},function(n,l,r){n.exports=r(63)}]).default})})(z2);var u4=z2.exports,C4=Ue&&Ue.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var o in r)r.hasOwnProperty(o)&&(l[o]=r[o])},e(t,n)};return function(t,n){e(t,n);function l(){this.constructor=t}t.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)}}(),pc=Ue&&Ue.__assign||function(){return pc=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pc.apply(this,arguments)},A4=Ue&&Ue.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var l=Array(e),r=0,t=0;t<n;t++)for(var o=arguments[t],i=0,a=o.length;i<a;i++,r++)l[r]=o[i];return l},bI=Ue&&Ue.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Dn=bI(v),m4=bI(Kn),Di=bI(d4),pb=bI(u4),h4=function(e){C4(t,e);function t(n){var l=e.call(this,n)||this;l.dirtyProps=["modules","formats","bounds","theme","children"],l.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],l.state={generation:0},l.selection=null,l.onEditorChange=function(o,i,a,g){var s,I,d,u;o==="text-change"?(I=(s=l).onEditorChangeText)===null||I===void 0||I.call(s,l.editor.root.innerHTML,i,g,l.unprivilegedEditor):o==="selection-change"&&((u=(d=l).onEditorChangeSelection)===null||u===void 0||u.call(d,i,g,l.unprivilegedEditor))};var r=l.isControlled()?n.value:n.defaultValue;return l.value=r??"",l}return t.prototype.validateProps=function(n){var l;if(Dn.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Dn.default.Children.count(n.children)){var r=Dn.default.Children.only(n.children);if(((l=r)===null||l===void 0?void 0:l.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(n,l){var r=this,o;if(this.validateProps(n),!this.editor||this.state.generation!==l.generation)return!0;if("value"in n){var i=this.getEditorContents(),a=(o=n.value,o??"");this.isEqualValue(a,i)||this.setEditorContents(this.editor,a)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),A4(this.cleanProps,this.dirtyProps).some(function(g){return!Di.default(n[g],r.props[g])})},t.prototype.shouldComponentRegenerate=function(n){var l=this;return this.dirtyProps.some(function(r){return!Di.default(n[r],l.props[r])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(n,l){var r=this;if(this.editor&&this.shouldComponentRegenerate(n)){var o=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==l.generation){var a=this.regenerationSnapshot,o=a.delta,g=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var s=this.editor;s.setContents(o),bb(function(){return r.setEditorSelection(s,g)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(n,l){var r=new pb.default(n,l);return l.tabIndex!=null&&this.setEditorTabIndex(r,l.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(n){return n&&n.ops},t.prototype.isEqualValue=function(n,l){return this.isDelta(n)&&this.isDelta(l)?Di.default(n.ops,l.ops):Di.default(n,l)},t.prototype.setEditorContents=function(n,l){var r=this;this.value=l;var o=this.getEditorSelection();typeof l=="string"?n.setContents(n.clipboard.convert(l)):n.setContents(l),bb(function(){return r.setEditorSelection(n,o)})},t.prototype.setEditorSelection=function(n,l){if(this.selection=l,l){var r=n.getLength();l.index=Math.max(0,Math.min(l.index,r-1)),l.length=Math.max(0,Math.min(l.length,r-1-l.index)),n.setSelection(l)}},t.prototype.setEditorTabIndex=function(n,l){var r,o;!((o=(r=n)===null||r===void 0?void 0:r.scroll)===null||o===void 0)&&o.domNode&&(n.scroll.domNode.tabIndex=l)},t.prototype.setEditorReadOnly=function(n,l){l?n.disable():n.enable()},t.prototype.makeUnprivilegedEditor=function(n){var l=n;return{getHTML:function(){return l.root.innerHTML},getLength:l.getLength.bind(l),getText:l.getText.bind(l),getContents:l.getContents.bind(l),getSelection:l.getSelection.bind(l),getBounds:l.getBounds.bind(l)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=m4.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},t.prototype.renderEditingArea=function(){var n=this,l=this.props,r=l.children,o=l.preserveWhitespace,i=this.state.generation,a={key:i,ref:function(g){n.editingArea=g}};return Dn.default.Children.count(r)?Dn.default.cloneElement(Dn.default.Children.only(r),a):o?Dn.default.createElement("pre",pc({},a)):Dn.default.createElement("div",pc({},a))},t.prototype.render=function(){var n;return Dn.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(n,l,r,o){var i,a;if(this.editor){var g=this.isDelta(this.value)?o.getContents():o.getHTML();g!==this.getEditorContents()&&(this.lastDeltaChangeSet=l,this.value=g,(a=(i=this.props).onChange)===null||a===void 0||a.call(i,n,l,r,o))}},t.prototype.onEditorChangeSelection=function(n,l,r){var o,i,a,g,s,I;if(this.editor){var d=this.getEditorSelection(),u=!d&&n,C=d&&!n;Di.default(n,d)||(this.selection=n,(i=(o=this.props).onChangeSelection)===null||i===void 0||i.call(o,n,l,r),u?(g=(a=this.props).onFocus)===null||g===void 0||g.call(a,n,l,r):C&&((I=(s=this.props).onBlur)===null||I===void 0||I.call(s,d,l,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=pb.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(Dn.default.Component);function bb(e){Promise.resolve().then(e)}var f4=h4;const p4=Ln(f4),kh=e=>({Facebook:c.jsx(Ih,{onClick:()=>{Pt(`https://www.facebook.com/${e}`)}},"Facebook"),Twitter:c.jsx(tH,{onClick:()=>{Pt(`https://x.com/${e}`)}},"Twitter"),TikTok:c.jsx(uh,{onClick:()=>{Pt(`https://www.tiktok.com/@${e}`)}},"TikTok"),Youtube:c.jsx(xB,{onClick:()=>{Pt(`https://www.youtube.com/@${e}`)}},"Youtube"),Telegram:c.jsx(XB,{onClick:()=>{Pt(`https://t.me/+52${e}`)}},"Telegram"),Messenger:c.jsx(qx,{onClick:()=>{Pt(`https://www.facebook.com/${e}`)}},"Messenger"),Google:c.jsx(WB,{onClick:()=>{Pt(e)}},"Google"),Spotify:c.jsx(kB,{onClick:()=>{Pt(`https://open.spotify.com/user/${e}`)}},"Spotify"),Pinterest:c.jsx(wB,{onClick:()=>{Pt(`https://www.pinterest.com.mx/${e}`)}},"Pinterest"),Instagram:c.jsx(RB,{onClick:()=>{Pt(`https://www.instagram.com/${e}`)}},"Instagram"),LinkedIn:c.jsx(dh,{onClick:()=>{e.includes("company")||e.includes("in")?Pt(`https://www.linkedin.com/${e}`):Pt(`https://www.linkedin.com/in/${e}`)}},"LinkedIn"),Custom:c.jsx(Ah,{onClick:()=>{Pt(`${e}`)}},"Custom")}),Pt=e=>{window.open(e.includes("https://")?e:`https://${e}`,"_blank","noreferrer")},xr=[{code:"+52",name:"Mxico"},{code:"+57",name:"Colombia"},{code:"+55",name:"Brasil"},{code:"+593",name:"Ecuador"},{code:"+1",name:"Estados Unidos"},{code:"+34",name:"Espaa"}],yb=({name:e,onChange:t,value:n,initialLada:l})=>{const[r,o]=v.useState(!1),[i,a]=v.useState(xr.find(d=>d.code===l)||xr[0]);v.useEffect(()=>{if(l){const d=xr.find(u=>u.code===l);a(d||xr[0])}else a(xr[0]),t({target:{name:e==="secondary_phone"?"lada_2":"lada",value:xr[0].code}})},[l,t,e]);const g=()=>{o(!r)},s=d=>{a(d),o(!1),t({target:{name:e==="secondary_phone"?"lada_2":"lada",value:d.code}})},I=d=>{/^\d*$/.test(d.target.value)&&(d.target.value.length<=10?t({target:{name:e,value:d.target.value}}):alert("El nmero de telfono no puede exceder los 10 dgitos."))};return c.jsx("div",{className:"col-span-full",children:c.jsxs("div",{className:"mt-2 relative",children:[c.jsxs("div",{className:"absolute top-0 left-0 flex items-center pl-3 h-full",children:[c.jsxs("button",{type:"button",id:"dropdownButton",className:"h-full text-sm flex justify-center items-center bg-transparent text-white focus:outline-none",onClick:g,children:[c.jsx("span",{id:"dropdownSpan",children:i.code}),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-4 w-4 ml-1",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]}),r&&c.jsx("div",{id:"dropdownMenu",className:"min-w-[150px] overflow-hidden absolute left-0 w-full mt-10 bg-white border border-slate-200 rounded-md shadow-lg z-10",children:c.jsx("ul",{id:"dropdownOptions",children:xr.map(d=>c.jsxs("li",{className:"px-4 py-2 text-slate-800 hover:bg-slate-100 text-sm cursor-pointer",onClick:()=>s(d),children:[d.name," (",d.code,")"]},d.code))})})]}),c.jsx("input",{type:"text",value:n,onChange:I,className:"block w-full rounded-md border-0 bg-white/5 py-1.5 pl-20 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6",placeholder:"777-777-7777"})]})})},b4=({avatar:e,inputRef:t,handleOnChange:n,formState:l,onInputChange:r,onCheckBoxChangeWA:o,setShowCustomButtonHour:i,initStateSchedule:a,schedule:g,categories:s,onCheckBoxChange:I,handleUpdateDB:d,activeRed:u,handleRemoveSM:C,handleUpdateSM:h,setSocialMedia:f,selectedPDFFile:y,handlePDFFileChange:A,secondaryPDFFile:m,handleSecondaryPDFFileChange:p,onMultiInputChange:b})=>{const[Z,V]=v.useState(!1),S=["bold","italic","underline","strike","blockquote","list","bullet","indent"],G=v.useMemo(()=>({toolbar:{container:[["bold","italic","underline"],["clean"]]}}),[]),w=R=>(R/(1024*1024)).toFixed(1)+" MB",B=()=>{window.open(l.pdf_file_url.includes("https://")?l.pdf_file_url:`https://${l.pdf_file_url}`,"_blank","noreferrer")},W=()=>{window.open(l.pdf_file_url.includes("https://")?l.secondary_pdf_file_url:`https://${l.secondary_pdf_file_url}`,"_blank","noreferrer")};return c.jsxs(c.Fragment,{children:[Z&&c.jsx("div",{className:"bg-red-500 text-white p-3 rounded-lg mb-4",children:c.jsx("p",{children:"El nmero de telfono no puede exceder los 10 dgitos."})}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:t,onChange:n}),c.jsx("div",{className:"",children:c.jsxs("div",{className:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Informacin personal"}),c.jsx("p",{className:"mt-1 text-sm leading-6 text-gray-400"})]}),c.jsx("form",{className:"md:col-span-2",onSubmit:R=>{R.preventDefault()},children:c.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6",children:[c.jsxs("div",{className:"col-span-full flex items-center gap-x-8",children:[c.jsx("img",{alt:"",src:e,className:"h-24 w-24 flex-none rounded-lg bg-gray-800 object-cover"}),c.jsxs("div",{children:[c.jsx("button",{type:"button",className:"rounded-md bg-white/10 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20",onClick:()=>{t.current.value="",t.current.click()},children:"Cambiar Avatar"}),c.jsx("p",{className:"mt-2 text-xs leading-5 text-gray-400",children:"JPG, GIF o PNG. 1MB max."})]})]}),c.jsx(Re,{className:"col-span-full",children:c.jsxs("div",{className:"social-media-icon-container",children:[u.length===0?c.jsx(c.Fragment,{}):c.jsx(c.Fragment,{children:u==null?void 0:u.map(R=>{const k=kh(R.url)[R.name];return c.jsxs("div",{className:"social-media-icon",children:[k,c.jsx(nJ,{className:"social-media-delete",color:"#970220",onClick:async()=>{await C(R.name)}}),c.jsx(eJ,{className:"social-media-edit",color:"#4a88da",onClick:async()=>{await h(R.name)}})]},R.name)})}),c.jsx("div",{className:"social-media-icon add-social-media",onClick:()=>{f(!0)},children:c.jsx(Lx,{})})]})}),c.jsxs("div",{className:"sm:col-span-3",children:[c.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium leading-6 text-white",children:"Nombre"}),c.jsx("div",{className:"mt-2",children:c.jsx("input",{id:"first-name",value:l.nombre,name:"nombre",onChange:r,type:"text",autoComplete:"given-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),c.jsxs("div",{className:"sm:col-span-3",children:[c.jsx("label",{htmlFor:"last-name",className:"block text-sm font-medium leading-6 text-white",children:"Apellido"}),c.jsx("div",{className:"mt-2",children:c.jsx("input",{id:"last-name",value:l.apellido,name:"apellido",onChange:r,type:"text",autoComplete:"family-name",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),c.jsxs("div",{className:"col-span-full",children:[c.jsx("label",{htmlFor:"cargo",className:"block text-sm font-medium leading-6 text-white",children:"Cargo o Puesto"}),c.jsx("div",{className:"mt-2",children:c.jsx("input",{id:"cargo",value:l.ocupacion,name:"ocupacion",onChange:r,type:"text",autoComplete:"cargo",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),c.jsxs("div",{className:"col-span-full",children:[c.jsx("label",{htmlFor:"origin",className:"block text-sm font-medium leading-6 text-white",children:"Empresa de origen"}),c.jsx("div",{className:"mt-2",children:c.jsx("input",{id:"origin",value:l.business,name:"business",onChange:r,type:"text",autoComplete:"origin",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),c.jsxs("div",{className:"col-span-full",children:[c.jsx("label",{htmlFor:"description",className:"block text-sm font-medium leading-6 text-white",children:"Descripcin"}),c.jsx("br",{}),c.jsx("div",{className:"lg:pr-12",children:c.jsx(p4,{className:"lg:w-full h-auto mx-4 text-gray-900 bg-white text-2xl",theme:"snow",value:l.descripcion,formats:S,modules:G,onChange:R=>r({target:{name:"descripcion",value:R}})})})]}),c.jsxs("div",{className:"col-span-full",children:[c.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-white",children:"Telfono"}),c.jsx("div",{className:"mt-2",children:c.jsx(yb,{name:"telefono",initialLada:l.lada,value:l.telefono,onChange:r})})]}),c.jsx("div",{className:"mx-4 md:mx-10 col-span-full",children:c.jsxs("div",{className:"relative flex gap-x-3",children:[c.jsx("div",{className:"flex h-6 items-center",children:c.jsx("input",{name:"whatsapp_option",type:"checkbox",checked:`${l.lada}-${l.telefono}`===l.whatsapp_option,onChange:o,className:"h-5 w-5 rounded border-gray-300 text-orange-600 focus:ring-orange-600"})}),c.jsxs("div",{className:"text-sm leading-6",children:[c.jsx("label",{htmlFor:"comments",className:"font-medium text-white",children:"Mismo nmero para WhatsApp"}),c.jsx("p",{className:"text-white",children:'Activa esta opcin para incluir un enlace directo a tu perfil de WhatsApp. Al activar la casilla, cualquier persona que visite tu perfil podr contactarte fcilmente a travs de WhatsApp con solo hacer clic en el nmero de telfono proporcionado."'})]})]})}),c.jsxs("div",{className:"col-span-full",children:[c.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-white",children:"Telfono Secundario"}),c.jsx("div",{className:"mt-2",children:c.jsx(yb,{name:"secondary_phone",initialLada:l.lada_2,value:l.secondary_phone,onChange:R=>r(R,!0)})})]}),c.jsxs("div",{className:"col-span-full",children:[c.jsx("label",{htmlFor:"web",className:"block text-sm font-medium leading-6 text-white",children:"Correo electrnico"}),c.jsx("div",{className:"mt-2",children:c.jsx("input",{id:"web",value:l.email,name:"email",onChange:r,type:"text",autoComplete:"email",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),c.jsxs("div",{className:"col-span-full",children:[c.jsx("label",{htmlFor:"web",className:"block text-sm font-medium leading-6 text-white",children:"Pgina web"}),c.jsx("div",{className:"mt-2",children:c.jsx("input",{id:"web",value:l.web_page_url,name:"web_page_url",onChange:r,type:"text",autoComplete:"web",className:"px-1.5 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6"})})]}),c.jsx("div",{className:"col-span-full",children:c.jsx("div",{className:"mt-2",children:c.jsx(et,{variant:"outline-primary",className:"px-1.5 block w-full rounded-md border-0 hover:bg-blue-900 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-orange-500 sm:text-sm sm:leading-6",onClick:()=>{i(!0)},children:a===g?"Establecer Horarios":"Modificar Horarios"})})}),c.jsxs(Re,{className:"perfil-multi-field col-span-full",children:[c.jsx(se,{children:c.jsxs("div",{className:"perfil-field-data mx-0",children:[c.jsx("label",{htmlFor:"work",className:"block text-sm font-medium leading-6 text-white",children:"Area de trabajo"}),c.jsxs(ix.Select,{"aria-label":"Categorias",onChange:r,name:"id_categorie",value:l.id_categorie,className:"perfil-categoria",children:[c.jsx("option",{value:-1,children:"Seleccione un area de trabajo"}),s.map(R=>c.jsx("option",{value:R.id_categorie,children:R.name},R.name))]})]})}),c.jsx(se,{xs:6,children:localStorage.getItem("id_plan")!=6&&c.jsxs("div",{className:"perfil-checkbox mx-0",children:[c.jsx("label",{htmlFor:"show",className:"block text-sm font-medium leading-6 text-white",children:"Mostrar perfil al pblico"}),c.jsx("input",{type:"checkbox",onChange:I,checked:l.show_profile,name:"show_profile"})]})})]}),localStorage.getItem("id_plan")>=9&&c.jsxs("div",{className:"py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0 col-span-full",children:[c.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-400 ",children:"Brochure(s)"}),c.jsx("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:c.jsxs("ul",{role:"list",className:"divide-y divide-gray-100 rounded-md border border-gray-200",children:[c.jsxs("li",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[c.jsxs("div",{className:"flex w-0 flex-1 items-center",children:[c.jsx(U0,{"aria-hidden":"true",className:"h-5 w-5 flex-shrink-0 text-gray-400"}),c.jsxs("div",{className:"ml-4 flex min-w-0 flex-1 gap-2",children:[c.jsx("span",{className:"truncate font-medium",children:y?y.name:l.pdf_file_url?"Brochure 01 listo":"Sube tu archivo"}),c.jsxs("span",{className:"flex-shrink-0 text-white",children:[y?w(y.size):""," "]})]})]}),c.jsxs("div",{className:"ml-4 flex",children:[c.jsx("button",{className:"font-medium text-orange-600 hover:text-orange-500 mr-4",onClick:()=>{document.getElementById("pdf_file").click()},children:y||l.pdf_file_url?"Cambiar":"Subir"}),l.pdf_file_url&&c.jsx(f0,{size:24,onClick:B,className:"cursor-pointer"})]}),c.jsx("input",{type:"file",id:"pdf_file",accept:".pdf",className:"hidden",onChange:A})]}),c.jsxs("li",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[c.jsxs("div",{className:"flex w-0 flex-1 items-center",children:[c.jsx(U0,{"aria-hidden":"true",className:"h-5 w-5 flex-shrink-0 text-gray-400"}),c.jsxs("div",{className:"ml-4 flex min-w-0 flex-1 gap-2",children:[c.jsx("span",{className:"truncate font-medium",children:m?m.name:l.secondary_pdf_file_url?"Brochure 02 listo":"Sube tu archivo"}),c.jsxs("span",{className:"flex-shrink-0 text-white",children:[m?w(m.size):""," "]})]})]}),c.jsxs("div",{className:"ml-4 flex",children:[c.jsx("button",{className:"font-medium text-orange-600 hover:text-orange-500 mr-4",onClick:()=>{document.getElementById("pdf_file_2nd").click()},children:m||l.secondary_pdf_file_url?"Cambiar":"Subir"}),l.secondary_pdf_file_url&&c.jsx(f0,{size:24,onClick:W,className:"cursor-pointer"})]}),c.jsx("input",{type:"file",id:"pdf_file_2nd",accept:".pdf",className:"hidden",onChange:p})]})]})})]}),c.jsx("div",{className:"mt-8 flex",children:c.jsx("button",{onClick:d,type:"submit",className:"whitespace-nowrap rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500",children:"Guardar cambios"})})]})})]})})]})},y4={nombre:"",apellido:"",descripcion:"",lada:"",telefono:"",whatsapp_option:"",secondary_phone:"",email:"",web_page_url:"",ocupacion:"",direccion:"",avatar:"",id_categorie:10,id_social_media:"",show_profile:!1,pdf_file_url:"",custom_img_url:"",business:"",secondary_pdf_file_url:"",lada_2:""},Z4=()=>{const e=ol(),{user:t}=v.useContext(yt),n=It(),[l,r]=v.useState(null),{formState:o,onInputChange:i,updateForm:a,onCheckBoxChange:g,onMultiInputChange:s}=Br(y4),[I,d]=v.useState(),[u,C]=v.useState([]),[h,f]=v.useState(H0),[y,A]=v.useState([]),[m,p]=v.useState(!1),[b,Z]=v.useState(!1),[V,S]=v.useState(!1),[G,w]=v.useState(!1),[B,W]=v.useState(!1),[R,k]=v.useState(!1),[x,H]=v.useState(!1),[M,T]=v.useState(!1),[E,N]=v.useState(""),[J,X]=v.useState("#FD6202"),[Y,F]=v.useState(!1),[z,L]=v.useState(null),[K,j]=v.useState(null),[D,Q]=v.useState({url:"www.ejemplo.com",text:"Ej. CONCENOS",color:"#FD6202"}),[O,ne]=v.useState(""),[oe,ae]=v.useState(!1),[ce,ie]=v.useState(null),Ze=$=>{const{name:fe,checked:ye}=$.target,de=ye?`${o.lada}-${o.telefono}`:"0";a({...o,[fe]:de})},ve=async()=>{if(o.nombre==""||o.apellido==""||o.descripcion==""||o.telefono==""||o.email==""||o.ocupacion==""){F(!0),Ge.error("Termine de completar los campos");return}const $=Ge.loading("Guardando perfil");try{const fe=o.avatar;if(fe!=null){const xe=new FormData;xe.append("recfile",fe),xe.append("username",t.username),xe.append("dataURI",o.avatar);const vt=await e.uploadFromDataUri(xe);o.avatar=vt.data.dataLocationResponse}const ye=document.getElementById("pdf_file"),de=ye?ye.files[0]:void 0;if(de!=null){const xe=new FormData;xe.append("recfile",de),xe.append("username",localStorage.getItem("token"));const vt=await e.updateProfilePhoto(xe);o.pdf_file_url=vt.data.dataLocationResponse}const he=document.getElementById("pdf_file_2nd"),Se=he?he.files[0]:void 0;if(Se!=null){const xe=new FormData;xe.append("recfile",Se),xe.append("username",localStorage.getItem("token"));const vt=await e.updateProfilePhoto(xe);o.secondary_pdf_file_url=vt.data.dataLocationResponse}const Zt=document.getElementById("photo_cover"),kt=Zt?Zt.files[0]:void 0;if(kt!=null){const xe=new FormData;xe.append("recfile",kt),xe.append("username",localStorage.getItem("token"));const vt=await e.updateProfilePhoto(xe);o.custom_img_url=vt.data.dataLocationResponse}const zn={profile_img_url:o.avatar,background_color:J,custom_btn_color:D.color,custom_btn_text:D.text,custom_btn_url:D.url,title_profile:`${o.nombre} ${o.apellido}`,description_profile:o.descripcion,personal_phone:`${o.lada}-${o.telefono}`,whatsapp_option:`${o.whatsapp_option}`,secondary_phone:`${o.secondary_phone==""?"":`${o.lada_2}-${o.secondary_phone}`}`,email:o.email,web_page_url:o.web_page_url,ocupation_role:o.ocupacion,location:o.direccion,id_categorie:o.id_categorie,id_social_media:o.id_social_media,show_profile:o.show_profile,pdf_file_url:o.pdf_file_url,custom_img_url:o.custom_img_url,id_profile:t.id,organization_name:o.business,secondary_pdf_file_url:o.secondary_pdf_file_url};if(l){t.first_login=!1;const xe=await e.createSocialMedia({...u});zn.id_social_media=xe.data.id;const vt=await e.createProfile(zn);ua.forEach(async il=>{const sd={day:il,start_time:h[il+"St"],end_time:h[il+"End"],status_schedule_day:h[il]};await e.postScheduleDay(sd)})}else{const xe=await e.updateSocialMedia({...u}),vt=await e.updateProfile(zn);ua.forEach(async il=>{const sd={day:il,start_time:h[il+"St"],end_time:h[il+"End"],status_schedule_day:h[il]};await e.updateScheduleDay(sd)})}Ge.success("Perfil guardado exitosamente",{id:$}),t.avatar_url=o.avatar,n("/home")}catch(fe){console.log(fe),Ge.error("Error al guardar perfil",{id:$})}};v.useEffect(()=>{P()},[]);const P=async()=>{try{const{data:$}=await e.getProfile();d($);const{data:fe}=await e.getCategories();if(A(fe.categories),$.msg.includes("No existe el perfil")){r(!0);const ye=$.title_profile.indexOf(" ")==-1?$.title_profile.length:$.title_profile.indexOf(" "),de={nombre:$.title_profile.slice(0,ye),apellido:$.title_profile.slice(ye,$.title_profile.length),email:localStorage.getItem("email")};a(de)}else{const{data:ye}=await e.getSocialMedia(),{data:de}=await e.getSchedule(),{social_media:he}=ye,{scheduleDays:Se}=de,Zt=$.title_profile.indexOf(" ")==-1?$.title_profile.length:$.title_profile.indexOf(" "),kt={nombre:$.title_profile.slice(0,Zt),apellido:$.title_profile.slice(Zt,$.title_profile.length),descripcion:$.description_profile,telefono:$.personal_phone==null||$.personal_phone==""?"":$.personal_phone.split("-")[1],lada:$.personal_phone==null||$.personal_phone==""?"+52":$.personal_phone.split("-")[0],whatsapp_option:$.whatsapp_option,lada_2:$.secondary_phone==null||$.secondary_phone==""?"+52":$.secondary_phone.split("-")[0],secondary_phone:$.secondary_phone==null||$.secondary_phone==""?"":$.secondary_phone.split("-")[1],email:$.email,web_page_url:$.web_page_url,ocupacion:$.ocupation_role,direccion:$.location,avatar:$.profile_img_url,id_categorie:$.id_categorie,id_social_media:he.id_social_media,show_profile:$.show_profile,pdf_file_url:$.pdf_file_url,custom_img_url:$.custom_img_url,business:$.organization_name!=null?$.organization_name:$.organization!=null?$.organization.business_name:"",secondary_pdf_file_url:$.secondary_pdf_file_url},zn={media:he},xe={};Se.forEach(vt=>{xe[vt.day]=vt.status_schedule_day,xe[vt.day+"St"]=vt.start_time,xe[vt.day+"End"]=vt.end_time}),a(kt),X($.background_color),Q({color:$.custom_btn_color,text:$.custom_btn_text,url:$.custom_btn_url}),C(zn.media),f(xe),ie($.custom_img_url),r(!1)}}catch($){console.log($)}},q=$=>{const fe=$.target.files[0];L(fe)},te=$=>{const fe=$.target.files[0];j(fe)},le=$=>{const fe=$.target.files[0];ie(URL.createObjectURL(fe))},_=async $=>{const fe=Ge.loading("Eliminando red social");(await e.deleteSocialMedia($,t.id)).status==200?(C([...u.filter(de=>de.name!=$)]),Ge.success(`Red social para ${$} eliminado exitosamente`,{id:fe})):Ge.error("Error al eliminar red social")},Ie=async $=>{T(!0),N($)},Ae=$=>{const fe=new FileReader;fe.readAsDataURL($.target.files[0]),fe.onload=function(ye){ne(fe.result)},ae(!0)},be=v.useRef();return l==null?c.jsx(Vr,{}):c.jsxs(Ka.Provider,{value:{color:"#FFFFFF"},children:[c.jsx(In,{position:"top-right",richColors:!0}),(m||V||B||G||b||R||x||M||oe)&&c.jsx("div",{className:"profile-modal-background",onClick:()=>{S(!1),W(!1),w(!1),k(!1),H(!1),p(!1),T(!1),ae(!1)},children:c.jsx("div",{})}),c.jsxs("div",{className:"perfil-container mx-4",children:[b&&c.jsx(q9,{setShowColorPallete:Z,setCustomBannerColor:X,customBannerColor:J}),B&&c.jsx(_9,{}),V&&c.jsx(Q9,{customButtonParams:D,setCustomButtonParams:Q,setShowCustomButton:S}),x&&c.jsx($9,{placeText:"url de foto...",handleClick:$=>{i({target:{name:"avatar",value:$.url}}),H(!1)}}),G&&c.jsx(O9,{setShowCustomButtonHour:w,setSchedule:f,schedule:h}),M&&c.jsx(lH,{name:E,setShow:T,show:M}),oe&&c.jsx(KH,{cropDone:$=>{i({target:{name:"avatar",value:$}})},image:O,setImage:ne,setShowCrop:ae,inputRef:be}),localStorage.getItem("id_plan")!=6&&c.jsxs("div",{className:"col-span-full mt-4 max-w-2xl m-auto",children:[c.jsx("label",{htmlFor:"photo_cover",className:"block text-sm font-medium leading-6 text-white",children:"Imagen de portada para tu perfil"}),c.jsxs("p",{className:"mt-1 text-sm leading-6 text-white",children:["Para una presentacin visualmente atractiva, te sugerimos considerar una imagen con dimensiones de"," ",c.jsx("span",{className:"font-bold",children:"688x224 px"}),"."]}),c.jsxs("div",{className:"my-2 items-center rounded-lg gap-x-3 h-36 overflow-hidden",children:[ce?c.jsx("div",{className:"front-page",style:{backgroundImage:`url("${ce??ci}")`}}):c.jsx("img",{src:ci,alt:"Selected",className:"object-scale-down rounded-lg"}),c.jsx("input",{type:"file",id:"photo_cover",accept:"image/*",className:"hidden",onChange:le})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",onClick:()=>{document.getElementById("photo_cover").click()},children:"Cambiar"})})]}),c.jsx(b4,{avatar:o.avatar,inputRef:be,handleOnChange:Ae,formState:o,onInputChange:i,onCheckBoxChangeWA:Ze,setShowCustomButtonHour:w,initStateSchedule:H0,schedule:h,categories:y,onCheckBoxChange:g,handleUpdateDB:ve,activeRed:u,handleRemoveSM:_,handleUpdateSM:Ie,setSocialMedia:p,selectedPDFFile:z,handlePDFFileChange:q,secondaryPDFFile:K,handleSecondaryPDFFileChange:te,onMultiInputChange:s}),m&&c.jsx(nH,{show:m,setShow:p,activeRed:u,setActiveRed:C})]})]})},Zb=()=>c.jsx(Z4,{});function j2(e){var t,n,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=j2(e[t]))&&(l&&(l+=" "),l+=n)}else for(n in e)e[n]&&(l&&(l+=" "),l+=n);return l}function tt(){for(var e,t,n=0,l="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=j2(e))&&(l&&(l+=" "),l+=t);return l}const Je=({children:e})=>{const t=Sr(),n=It(),[l,r]=v.useState(!0),[o,i]=v.useState(!1),{user:a}=v.useContext(yt),g=ol();v.useEffect(()=>{s(),I()},[]);const s=()=>{window.location.href.includes("/business")&&localStorage.getItem("id_plan")!=9&&n("/home")},I=async()=>{try{let d=!1;const u=await t.renewToken(),{email:C,fullname:h,id:f,id_plan_fk:y,username:A,token:m,avatar_url:p,first_login:b}=u.data;if(a.email=C,a.fullname=h,a.id=f,a.id_plan_fk=y,a.username=A,a.avatar_url=p,a.first_login=b,u.status==200&&(d=!0,y!=localStorage.getItem("id_plan")&&(localStorage.setItem("id_plan",y),console.log("redirect"),n("/home"))),d&&window.location.href.includes("/vcard/")){const Z=window.location.href.split("/vcard/")[1],{data:V}=await g.validateCard(Z);if(V.ok){const S=`/card?username=${V.username}&id=${V.id_profile}`;n(S)}r(!1)}else r(!1);i(d)}catch(d){console.log(d),r(!1)}};return o&&!l&&a.first_login&&(window.location.href.includes("/home")||window.location.href.includes("/business"))&&n("/perfil"),l?c.jsx(Vr,{fullScreen:!0}):o?e:c.jsx(lh,{to:"/login/"})},U2=typeof document<"u"?U.useLayoutEffect:()=>{};function v4(e){const t=v.useRef(null);return U2(()=>{t.current=e},[e]),v.useCallback((...n)=>{const l=t.current;return l==null?void 0:l(...n)},[])}const ng=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},_r=e=>e&&"window"in e&&e.window===e?e:ng(e).defaultView||window;function G4(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function B4(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function S4(){return B4(/^Mac/i)}function V4(){return G4(/Android/i)}function W4(e){return e.mozInputSource===0&&e.isTrusted?!0:V4()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}class R4{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=t}}function D2(e){let t=v.useRef({isFocused:!1,observer:null});U2(()=>{const l=t.current;return()=>{l.observer&&(l.observer.disconnect(),l.observer=null)}},[]);let n=v4(l=>{e==null||e(l)});return v.useCallback(l=>{if(l.target instanceof HTMLButtonElement||l.target instanceof HTMLInputElement||l.target instanceof HTMLTextAreaElement||l.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=l.target,o=i=>{t.current.isFocused=!1,r.disabled&&n(new R4("blur",i)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var i;(i=t.current.observer)===null||i===void 0||i.disconnect();let a=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function w4(e){let{isDisabled:t,onFocus:n,onBlur:l,onFocusChange:r}=e;const o=v.useCallback(g=>{if(g.target===g.currentTarget)return l&&l(g),r&&r(!1),!0},[l,r]),i=D2(o),a=v.useCallback(g=>{const s=ng(g.target);g.target===g.currentTarget&&s.activeElement===g.target&&(n&&n(g),r&&r(!0),i(g))},[r,n,i]);return{focusProps:{onFocus:!t&&(n||r||l)?a:void 0,onBlur:!t&&(l||r)?o:void 0}}}let lg=null,JA=new Set,Ca=new Map,uo=!1,NA=!1;const k4={Tab:!0,Escape:!0};function Xh(e,t){for(let n of JA)n(e,t)}function X4(e){return!(e.metaKey||!S4()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function bc(e){uo=!0,X4(e)&&(lg="keyboard",Xh("keyboard",e))}function yn(e){lg="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(uo=!0,Xh("pointer",e))}function Q2(e){W4(e)&&(uo=!0,lg="virtual")}function P2(e){e.target===window||e.target===document||(!uo&&!NA&&(lg="virtual",Xh("virtual",e)),uo=!1,NA=!1)}function O2(){uo=!1,NA=!0}function YA(e){if(typeof window>"u"||Ca.get(_r(e)))return;const t=_r(e),n=ng(e);let l=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){uo=!0,l.apply(this,arguments)},n.addEventListener("keydown",bc,!0),n.addEventListener("keyup",bc,!0),n.addEventListener("click",Q2,!0),t.addEventListener("focus",P2,!0),t.addEventListener("blur",O2,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",yn,!0),n.addEventListener("pointermove",yn,!0),n.addEventListener("pointerup",yn,!0)):(n.addEventListener("mousedown",yn,!0),n.addEventListener("mousemove",yn,!0),n.addEventListener("mouseup",yn,!0)),t.addEventListener("beforeunload",()=>{_2(e)},{once:!0}),Ca.set(t,{focus:l})}const _2=(e,t)=>{const n=_r(e),l=ng(e);t&&l.removeEventListener("DOMContentLoaded",t),Ca.has(n)&&(n.HTMLElement.prototype.focus=Ca.get(n).focus,l.removeEventListener("keydown",bc,!0),l.removeEventListener("keyup",bc,!0),l.removeEventListener("click",Q2,!0),n.removeEventListener("focus",P2,!0),n.removeEventListener("blur",O2,!1),typeof PointerEvent<"u"?(l.removeEventListener("pointerdown",yn,!0),l.removeEventListener("pointermove",yn,!0),l.removeEventListener("pointerup",yn,!0)):(l.removeEventListener("mousedown",yn,!0),l.removeEventListener("mousemove",yn,!0),l.removeEventListener("mouseup",yn,!0)),Ca.delete(n))};function x4(e){const t=ng(e);let n;return t.readyState!=="loading"?YA(e):(n=()=>{YA(e)},t.addEventListener("DOMContentLoaded",n)),()=>_2(e,n)}typeof document<"u"&&x4();function q2(){return lg!=="pointer"}const J4=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function N4(e,t,n){var l;const r=typeof window<"u"?_r(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?_r(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,i=typeof window<"u"?_r(n==null?void 0:n.target).HTMLElement:HTMLElement,a=typeof window<"u"?_r(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||(n==null?void 0:n.target)instanceof r&&!J4.has(n==null||(l=n.target)===null||l===void 0?void 0:l.type)||(n==null?void 0:n.target)instanceof o||(n==null?void 0:n.target)instanceof i&&(n==null?void 0:n.target.isContentEditable),!(e&&t==="keyboard"&&n instanceof a&&!k4[n.key])}function Y4(e,t,n){YA(),v.useEffect(()=>{let l=(r,o)=>{N4(!!(n!=null&&n.isTextInput),r,o)&&e(q2())};return JA.add(l),()=>{JA.delete(l)}},t)}function H4(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:l,onFocusWithinChange:r}=e,o=v.useRef({isFocusWithin:!1}),i=v.useCallback(s=>{o.current.isFocusWithin&&!s.currentTarget.contains(s.relatedTarget)&&(o.current.isFocusWithin=!1,n&&n(s),r&&r(!1))},[n,r,o]),a=D2(i),g=v.useCallback(s=>{!o.current.isFocusWithin&&document.activeElement===s.target&&(l&&l(s),r&&r(!0),o.current.isFocusWithin=!0,a(s))},[l,r,a]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:g,onBlur:i}}}let yc=!1,ou=0;function HA(){yc=!0,setTimeout(()=>{yc=!1},50)}function vb(e){e.pointerType==="touch"&&HA()}function F4(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",vb):document.addEventListener("touchend",HA),ou++,()=>{ou--,!(ou>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",vb):document.removeEventListener("touchend",HA))}}function xh(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:l,isDisabled:r}=e,[o,i]=v.useState(!1),a=v.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;v.useEffect(F4,[]);let{hoverProps:g,triggerHoverEnd:s}=v.useMemo(()=>{let I=(C,h)=>{if(a.pointerType=h,r||h==="touch"||a.isHovered||!C.currentTarget.contains(C.target))return;a.isHovered=!0;let f=C.currentTarget;a.target=f,t&&t({type:"hoverstart",target:f,pointerType:h}),n&&n(!0),i(!0)},d=(C,h)=>{if(a.pointerType="",a.target=null,h==="touch"||!a.isHovered)return;a.isHovered=!1;let f=C.currentTarget;l&&l({type:"hoverend",target:f,pointerType:h}),n&&n(!1),i(!1)},u={};return typeof PointerEvent<"u"?(u.onPointerEnter=C=>{yc&&C.pointerType==="mouse"||I(C,C.pointerType)},u.onPointerLeave=C=>{!r&&C.currentTarget.contains(C.target)&&d(C,C.pointerType)}):(u.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},u.onMouseEnter=C=>{!a.ignoreEmulatedMouseEvents&&!yc&&I(C,"mouse"),a.ignoreEmulatedMouseEvents=!1},u.onMouseLeave=C=>{!r&&C.currentTarget.contains(C.target)&&d(C,"mouse")}),{hoverProps:u,triggerHoverEnd:d}},[t,n,l,r,a]);return v.useEffect(()=>{r&&s({currentTarget:a.target},a.pointerType)},[r]),{hoverProps:g,isHovered:o}}function Jh(e={}){let{autoFocus:t=!1,isTextInput:n,within:l}=e,r=v.useRef({isFocused:!1,isFocusVisible:t||q2()}),[o,i]=v.useState(!1),[a,g]=v.useState(()=>r.current.isFocused&&r.current.isFocusVisible),s=v.useCallback(()=>g(r.current.isFocused&&r.current.isFocusVisible),[]),I=v.useCallback(C=>{r.current.isFocused=C,i(C),s()},[s]);Y4(C=>{r.current.isFocusVisible=C,s()},[],{isTextInput:n});let{focusProps:d}=w4({isDisabled:l,onFocusChange:I}),{focusWithinProps:u}=H4({isDisabled:!l,onFocusWithinChange:I});return{isFocused:o,isFocusVisible:a,focusProps:l?u:d}}var K4=Object.defineProperty,E4=(e,t,n)=>t in e?K4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iu=(e,t,n)=>(E4(e,typeof t!="symbol"?t+"":t,n),n);let M4=class{constructor(){iu(this,"current",this.detect()),iu(this,"handoffState","pending"),iu(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},lo=new M4;function fo(e){return lo.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function yI(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Wr(){let e=[],t={addEventListener(n,l,r,o){return n.addEventListener(l,r,o),t.add(()=>n.removeEventListener(l,r,o))},requestAnimationFrame(...n){let l=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(l))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let l=setTimeout(...n);return t.add(()=>clearTimeout(l))},microTask(...n){let l={current:!0};return yI(()=>{l.current&&n[0]()}),t.add(()=>{l.current=!1})},style(n,l,r){let o=n.style.getPropertyValue(l);return Object.assign(n.style,{[l]:r}),this.add(()=>{Object.assign(n.style,{[l]:o})})},group(n){let l=Wr();return n(l),this.add(()=>l.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let l=e.indexOf(n);if(l>=0)for(let r of e.splice(l,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function wi(){let[e]=v.useState(Wr);return v.useEffect(()=>()=>e.dispose(),[e]),e}let He=(e,t)=>{lo.isServer?v.useEffect(e,t):v.useLayoutEffect(e,t)};function En(e){let t=v.useRef(e);return He(()=>{t.current=e},[e]),t}let ue=function(e){let t=En(e);return U.useCallback((...n)=>t.current(...n),[t])};function T4(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function L4(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function z4({disabled:e=!1}={}){let t=v.useRef(null),[n,l]=v.useState(!1),r=wi(),o=ue(()=>{t.current=null,l(!1),r.dispose()}),i=ue(a=>{if(r.dispose(),t.current===null){t.current=a.currentTarget,l(!0);{let g=fo(a.currentTarget);r.addEventListener(g,"pointerup",o,!1),r.addEventListener(g,"pointermove",s=>{if(t.current){let I=T4(s);l(L4(I,t.current.getBoundingClientRect()))}},!1),r.addEventListener(g,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:i,onPointerUp:o,onClick:o}}}let j4=v.createContext(void 0);function ZI(){return v.useContext(j4)}function FA(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function wt(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let l=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,wt),l}var dr=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(dr||{}),Ol=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ol||{});function rt({ourProps:e,theirProps:t,slot:n,defaultTag:l,features:r,visible:o=!0,name:i,mergeRefs:a}){a=a??D4;let g=$2(t,e);if(o)return Mg(g,n,l,i,a);let s=r??0;if(s&2){let{static:I=!1,...d}=g;if(I)return Mg(d,n,l,i,a)}if(s&1){let{unmount:I=!0,...d}=g;return wt(I?0:1,{0(){return null},1(){return Mg({...d,hidden:!0,style:{display:"none"}},n,l,i,a)}})}return Mg(g,n,l,i,a)}function Mg(e,t={},n,l,r){let{as:o=n,children:i,refName:a="ref",...g}=au(e,["unmount","static"]),s=e.ref!==void 0?{[a]:e.ref}:{},I=typeof i=="function"?i(t):i;"className"in g&&g.className&&typeof g.className=="function"&&(g.className=g.className(t)),g["aria-labelledby"]&&g["aria-labelledby"]===g.id&&(g["aria-labelledby"]=void 0);let d={};if(t){let u=!1,C=[];for(let[h,f]of Object.entries(t))typeof f=="boolean"&&(u=!0),f===!0&&C.push(h.replace(/([A-Z])/g,y=>`-${y.toLowerCase()}`));if(u){d["data-headlessui-state"]=C.join(" ");for(let h of C)d[`data-${h}`]=""}}if(o===v.Fragment&&(Object.keys(El(g)).length>0||Object.keys(El(d)).length>0))if(!v.isValidElement(I)||Array.isArray(I)&&I.length>1){if(Object.keys(El(g)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${l} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(El(g)).concat(Object.keys(El(d))).map(u=>`  - ${u}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}else{let u=I.props,C=u==null?void 0:u.className,h=typeof C=="function"?(...A)=>FA(C(...A),g.className):FA(C,g.className),f=h?{className:h}:{},y=$2(I.props,El(au(g,["ref"])));for(let A in d)A in y&&delete d[A];return v.cloneElement(I,Object.assign({},y,d,s,{ref:r(I.ref,s.ref)},f))}return v.createElement(o,Object.assign({},au(g,["ref"]),o!==v.Fragment&&s,o!==v.Fragment&&d),I)}function U4(){let e=v.useRef([]),t=v.useCallback(n=>{for(let l of e.current)l!=null&&(typeof l=="function"?l(n):l.current=n)},[]);return(...n)=>{if(!n.every(l=>l==null))return e.current=n,t}}function D4(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function $2(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let l of e)for(let r in l)r.startsWith("on")&&typeof l[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(l[r])):t[r]=l[r];if(t.disabled||t["aria-disabled"])for(let l in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(l)&&(n[l]=[r=>{var o;return(o=r==null?void 0:r.preventDefault)==null?void 0:o.call(r)}]);for(let l in n)Object.assign(t,{[l](r,...o){let i=n[l];for(let a of i){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;a(r,...o)}}});return t}function Ma(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let l of e)for(let r in l)r.startsWith("on")&&typeof l[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(l[r])):t[r]=l[r];for(let l in n)Object.assign(t,{[l](...r){let o=n[l];for(let i of o)i==null||i(...r)}});return t}function Le(e){var t;return Object.assign(v.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function El(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function au(e,t=[]){let n=Object.assign({},e);for(let l of t)l in n&&delete n[l];return n}function Q4(e,t,n){let[l,r]=v.useState(n),o=e!==void 0,i=v.useRef(o),a=v.useRef(!1),g=v.useRef(!1);return o&&!i.current&&!a.current?(a.current=!0,i.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!o&&i.current&&!g.current&&(g.current=!0,i.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[o?e:l,ue(s=>(o||r(s),t==null?void 0:t(s)))]}function P4(e){let[t]=v.useState(e);return t}function eS(e={},t=null,n=[]){for(let[l,r]of Object.entries(e))nS(n,tS(t,l),r);return n}function tS(e,t){return e?e+"["+t+"]":t}function nS(e,t,n){if(Array.isArray(n))for(let[l,r]of n.entries())nS(e,tS(t,l.toString()),r);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):eS(n,t,e)}function O4(e){var t,n;let l=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(l){for(let r of l.elements)if(r!==e&&(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image")){r.click();return}(n=l.requestSubmit)==null||n.call(l)}}let _4="span";var Sl=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Sl||{});function q4(e,t){var n;let{features:l=1,...r}=e,o={ref:t,"aria-hidden":(l&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(l&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(l&4)===4&&(l&2)!==2&&{display:"none"}}};return rt({ourProps:o,theirProps:r,slot:{},defaultTag:_4,name:"Hidden"})}let ur=Le(q4),$4=v.createContext(null);function eL({children:e}){let t=v.useContext($4);if(!t)return U.createElement(U.Fragment,null,e);let{target:n}=t;return n?Kn.createPortal(U.createElement(U.Fragment,null,e),n):null}function tL({data:e,form:t,disabled:n,onReset:l,overrides:r}){let[o,i]=v.useState(null),a=wi();return v.useEffect(()=>{if(l&&o)return a.addEventListener(o,"reset",l)},[o,t,l]),U.createElement(eL,null,U.createElement(nL,{setForm:i,formId:t}),eS(e).map(([g,s])=>U.createElement(ur,{features:Sl.Hidden,...El({key:g,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:t,disabled:n,name:g,value:s,...r})})))}function nL({setForm:e,formId:t}){return v.useEffect(()=>{if(t){let n=document.getElementById(t);n&&e(n)}},[e,t]),t?null:U.createElement(ur,{features:Sl.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let l=n.closest("form");l&&e(l)}})}let lL=v.createContext(void 0);function lS(){return v.useContext(lL)}function vI(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let l=(t==null?void 0:t.getAttribute("disabled"))==="";return l&&rL(n)?!1:l}function rL(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}let rS=Symbol();function oS(e,t=!0){return Object.assign(e,{[rS]:t})}function gt(...e){let t=v.useRef(e);v.useEffect(()=>{t.current=e},[e]);let n=ue(l=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(l):r.current=l)});return e.every(l=>l==null||(l==null?void 0:l[rS]))?void 0:n}let GI=v.createContext(null);GI.displayName="DescriptionContext";function iS(){let e=v.useContext(GI);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,iS),t}return e}function oL(){var e,t;return(t=(e=v.useContext(GI))==null?void 0:e.value)!=null?t:void 0}function Nh(){let[e,t]=v.useState([]);return[e.length>0?e.join(" "):void 0,v.useMemo(()=>function(n){let l=ue(o=>(t(i=>[...i,o]),()=>t(i=>{let a=i.slice(),g=a.indexOf(o);return g!==-1&&a.splice(g,1),a}))),r=v.useMemo(()=>({register:l,slot:n.slot,name:n.name,props:n.props,value:n.value}),[l,n.slot,n.name,n.props,n.value]);return U.createElement(GI.Provider,{value:r},n.children)},[t])]}let iL="p";function aL(e,t){let n=v.useId(),l=ZI(),{id:r=`headlessui-description-${n}`,...o}=e,i=iS(),a=gt(t);He(()=>i.register(r),[r,i.register]);let g=l||!1,s=v.useMemo(()=>({...i.slot,disabled:g}),[i.slot,g]),I={ref:a,...i.props,id:r};return rt({ourProps:I,theirProps:o,slot:s,defaultTag:iL,name:i.name||"Description"})}let gL=Le(aL),aS=Object.assign(gL,{});var Nt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Nt||{});let BI=v.createContext(null);BI.displayName="LabelContext";function gS(){let e=v.useContext(BI);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,gS),t}return e}function sS(e){var t,n,l;let r=(n=(t=v.useContext(BI))==null?void 0:t.value)!=null?n:void 0;return((l=e==null?void 0:e.length)!=null?l:0)>0?[r,...e].filter(Boolean).join(" "):r}function cS({inherit:e=!1}={}){let t=sS(),[n,l]=v.useState([]),r=e?[t,...n].filter(Boolean):n;return[r.length>0?r.join(" "):void 0,v.useMemo(()=>function(o){let i=ue(g=>(l(s=>[...s,g]),()=>l(s=>{let I=s.slice(),d=I.indexOf(g);return d!==-1&&I.splice(d,1),I}))),a=v.useMemo(()=>({register:i,slot:o.slot,name:o.name,props:o.props,value:o.value}),[i,o.slot,o.name,o.props,o.value]);return U.createElement(BI.Provider,{value:a},o.children)},[l])]}let sL="label";function cL(e,t){var n;let l=v.useId(),r=gS(),o=lS(),i=ZI(),{id:a=`headlessui-label-${l}`,htmlFor:g=o??((n=r.props)==null?void 0:n.htmlFor),passive:s=!1,...I}=e,d=gt(t);He(()=>r.register(a),[a,r.register]);let u=ue(y=>{let A=y.currentTarget;if(A instanceof HTMLLabelElement&&y.preventDefault(),r.props&&"onClick"in r.props&&typeof r.props.onClick=="function"&&r.props.onClick(y),A instanceof HTMLLabelElement){let m=document.getElementById(A.htmlFor);if(m){let p=m.getAttribute("disabled");if(p==="true"||p==="")return;let b=m.getAttribute("aria-disabled");if(b==="true"||b==="")return;(m instanceof HTMLInputElement&&(m.type==="radio"||m.type==="checkbox")||m.role==="radio"||m.role==="checkbox"||m.role==="switch")&&m.click(),m.focus({preventScroll:!0})}}}),C=i||!1,h=v.useMemo(()=>({...r.slot,disabled:C}),[r.slot,C]),f={ref:d,...r.props,id:a,htmlFor:g,onClick:u};return s&&("onClick"in f&&(delete f.htmlFor,delete f.onClick),"onClick"in I&&delete I.onClick),rt({ourProps:f,theirProps:I,slot:h,defaultTag:g?sL:"div",name:r.name||"Label"})}let IL=Le(cL),dL=Object.assign(IL,{}),uL=v.createContext(()=>{});function IS({value:e,children:t}){return U.createElement(uL.Provider,{value:e},t)}function CL(e,t){return e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&"id"in e&&"id"in t?e.id===t.id:e===t}function AL(e=CL){return v.useCallback((t,n)=>{if(typeof e=="string"){let l=e;return(t==null?void 0:t[l])===(n==null?void 0:n[l])}return e(t,n)},[e])}function mL(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function hL(e,t=!1){let n=e===null?null:"current"in e?e.current:e,[l,r]=v.useReducer(()=>({}),{}),o=v.useMemo(()=>mL(n),[n,l]);return He(()=>{if(!n)return;let i=new ResizeObserver(r);return i.observe(n),()=>{i.disconnect()}},[n]),t?{width:`${o.width}px`,height:`${o.height}px`}:o}let fL=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function dS(e,t){let n=e(),l=new Set;return{getSnapshot(){return n},subscribe(r){return l.add(r),()=>l.delete(r)},dispatch(r,...o){let i=t[r].call(n,...o);i&&(n=i,l.forEach(a=>a()))}}}function uS(e){return v.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let pL=new fL(()=>dS(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function ki(e,t){let n=pL.get(t),l=v.useId(),r=uS(n);if(He(()=>{if(e)return n.dispatch("ADD",l),()=>n.dispatch("REMOVE",l)},[n,e]),!e)return!1;let o=r.indexOf(l),i=r.length;return o===-1&&(o=i,i+=1),o===i-1}let KA=new Map,Aa=new Map;function Gb(e){var t;let n=(t=Aa.get(e))!=null?t:0;return Aa.set(e,n+1),n!==0?()=>Bb(e):(KA.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Bb(e))}function Bb(e){var t;let n=(t=Aa.get(e))!=null?t:1;if(n===1?Aa.delete(e):Aa.set(e,n-1),n!==1)return;let l=KA.get(e);l&&(l["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",l["aria-hidden"]),e.inert=l.inert,KA.delete(e))}function bL(e,{allowed:t,disallowed:n}={}){let l=ki(e,"inert-others");He(()=>{var r,o;if(!l)return;let i=Wr();for(let g of(r=n==null?void 0:n())!=null?r:[])g&&i.add(Gb(g));let a=(o=t==null?void 0:t())!=null?o:[];for(let g of a){if(!g)continue;let s=fo(g);if(!s)continue;let I=g.parentElement;for(;I&&I!==s.body;){for(let d of I.children)a.some(u=>d.contains(u))||i.add(Gb(d));I=I.parentElement}}return i.dispose},[l,t,n])}function Yh(e,t,n){let l=En(r=>{let o=r.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});v.useEffect(()=>{if(!e)return;let r=t===null?null:t instanceof HTMLElement?t:t.current;if(!r)return;let o=Wr();if(typeof ResizeObserver<"u"){let i=new ResizeObserver(()=>l.current(r));i.observe(r),o.add(()=>i.disconnect())}if(typeof IntersectionObserver<"u"){let i=new IntersectionObserver(()=>l.current(r));i.observe(r),o.add(()=>i.disconnect())}return()=>o.dispose()},[t,l,e])}let Zc=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),yL=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var lt=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(lt||{}),Cr=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Cr||{}),ZL=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(ZL||{});function SI(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Zc)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function vL(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(yL)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Hh=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Hh||{});function CS(e,t=0){var n;return e===((n=fo(e))==null?void 0:n.body)?!1:wt(t,{0(){return e.matches(Zc)},1(){let l=e;for(;l!==null;){if(l.matches(Zc))return!0;l=l.parentElement}return!1}})}var GL=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(GL||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function fl(e){e==null||e.focus({preventScroll:!0})}let BL=["textarea","input"].join(",");function SL(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,BL))!=null?n:!1}function AS(e,t=n=>n){return e.slice().sort((n,l)=>{let r=t(n),o=t(l);if(r===null||o===null)return 0;let i=r.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Lt(e,t,{sorted:n=!0,relativeTo:l=null,skipElements:r=[]}={}){let o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,i=Array.isArray(e)?n?AS(e):e:t&64?vL(e):SI(e);r.length>0&&i.length>1&&(i=i.filter(C=>!r.some(h=>h!=null&&"current"in h?(h==null?void 0:h.current)===C:h===C))),l=l??o.activeElement;let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),g=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,i.indexOf(l))-1;if(t&4)return Math.max(0,i.indexOf(l))+1;if(t&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),s=t&32?{preventScroll:!0}:{},I=0,d=i.length,u;do{if(I>=d||I+d<=0)return 0;let C=g+I;if(t&16)C=(C+d)%d;else{if(C<0)return 3;if(C>=d)return 1}u=i[C],u==null||u.focus(s),I+=a}while(u!==o.activeElement);return t&6&&SL(u)&&u.select(),2}function mS(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function VL(){return/Android/gi.test(window.navigator.userAgent)}function WL(){return mS()||VL()}function Qi(e,t,n,l){let r=En(n);v.useEffect(()=>{if(!e)return;function o(i){r.current(i)}return document.addEventListener(t,o,l),()=>document.removeEventListener(t,o,l)},[e,t,l])}function hS(e,t,n,l){let r=En(n);v.useEffect(()=>{if(!e)return;function o(i){r.current(i)}return window.addEventListener(t,o,l),()=>window.removeEventListener(t,o,l)},[e,t,l])}const Sb=30;function fS(e,t,n){let l=ki(e,"outside-click"),r=En(n),o=v.useCallback(function(g,s){if(g.defaultPrevented)return;let I=s(g);if(I===null||!I.getRootNode().contains(I)||!I.isConnected)return;let d=function u(C){return typeof C=="function"?u(C()):Array.isArray(C)||C instanceof Set?C:[C]}(t);for(let u of d){if(u===null)continue;let C=u instanceof HTMLElement?u:u.current;if(C!=null&&C.contains(I)||g.composed&&g.composedPath().includes(C))return}return!CS(I,Hh.Loose)&&I.tabIndex!==-1&&g.preventDefault(),r.current(g,I)},[r]),i=v.useRef(null);Qi(l,"pointerdown",g=>{var s,I;i.current=((I=(s=g.composedPath)==null?void 0:s.call(g))==null?void 0:I[0])||g.target},!0),Qi(l,"mousedown",g=>{var s,I;i.current=((I=(s=g.composedPath)==null?void 0:s.call(g))==null?void 0:I[0])||g.target},!0),Qi(l,"click",g=>{WL()||i.current&&(o(g,()=>i.current),i.current=null)},!0);let a=v.useRef({x:0,y:0});Qi(l,"touchstart",g=>{a.current.x=g.touches[0].clientX,a.current.y=g.touches[0].clientY},!0),Qi(l,"touchend",g=>{let s={x:g.changedTouches[0].clientX,y:g.changedTouches[0].clientY};if(!(Math.abs(s.x-a.current.x)>=Sb||Math.abs(s.y-a.current.y)>=Sb))return o(g,()=>g.target instanceof HTMLElement?g.target:null)},!0),hS(l,"blur",g=>o(g,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Rr(...e){return v.useMemo(()=>fo(...e),[...e])}function Fh(e,t,n,l){let r=En(n);v.useEffect(()=>{e=e??window;function o(i){r.current(i)}return e.addEventListener(t,o,l),()=>e.removeEventListener(t,o,l)},[e,t,l])}function Vb(e){var t;if(e.type)return e.type;let n=(t=e.as)!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function RL(e,t){let[n,l]=v.useState(()=>Vb(e));return He(()=>{l(Vb(e))},[e.type,e.as]),He(()=>{n||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&l("button")},[n,t]),n}function wL(){let e;return{before({doc:t}){var n;let l=t.documentElement,r=(n=t.defaultView)!=null?n:window;e=Math.max(0,r.innerWidth-l.clientWidth)},after({doc:t,d:n}){let l=t.documentElement,r=Math.max(0,l.clientWidth-l.offsetWidth),o=Math.max(0,e-r);n.style(l,"paddingRight",`${o}px`)}}}function kL(){return mS()?{before({doc:e,d:t,meta:n}){function l(r){return n.containers.flatMap(o=>o()).some(o=>o.contains(r))}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=Wr();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let o=(r=window.scrollY)!=null?r:window.pageYOffset,i=null;t.addEventListener(e,"click",a=>{if(a.target instanceof HTMLElement)try{let g=a.target.closest("a");if(!g)return;let{hash:s}=new URL(g.href),I=e.querySelector(s);I&&!l(I)&&(i=I)}catch{}},!0),t.addEventListener(e,"touchstart",a=>{if(a.target instanceof HTMLElement)if(l(a.target)){let g=a.target;for(;g.parentElement&&l(g.parentElement);)g=g.parentElement;t.style(g,"overscrollBehavior","contain")}else t.style(a.target,"touchAction","none")}),t.addEventListener(e,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(l(a.target)){let g=a.target;for(;g.parentElement&&g.dataset.headlessuiPortal!==""&&!(g.scrollHeight>g.clientHeight||g.scrollWidth>g.clientWidth);)g=g.parentElement;g.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let g=(a=window.scrollY)!=null?a:window.pageYOffset;o!==g&&window.scrollTo(0,o),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function XL(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function xL(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let qr=dS(()=>new Map,{PUSH(e,t){var n;let l=(n=this.get(e))!=null?n:{doc:e,count:0,d:Wr(),meta:new Set};return l.count++,l.meta.add(t),this.set(e,l),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let l={doc:e,d:t,meta:xL(n)},r=[kL(),wL(),XL()];r.forEach(({before:o})=>o==null?void 0:o(l)),r.forEach(({after:o})=>o==null?void 0:o(l))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});qr.subscribe(()=>{let e=qr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let l=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!l||!r&&l)&&qr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&qr.dispatch("TEARDOWN",n)}});function JL(e,t,n=()=>({containers:[]})){let l=uS(qr),r=t?l.get(t):void 0,o=r?r.count>0:!1;return He(()=>{if(!(!t||!e))return qr.dispatch("PUSH",t,n),()=>qr.dispatch("POP",t,n)},[e,t]),o}function pS(e,t,n=()=>[document.body]){let l=ki(e,"scroll-lock");JL(l,t,r=>{var o;return{containers:[...(o=r.containers)!=null?o:[],n]}})}function NL(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function YL(e=0){let[t,n]=v.useState(e),l=v.useCallback(g=>n(g),[t]),r=v.useCallback(g=>n(s=>s|g),[t]),o=v.useCallback(g=>(t&g)===g,[t]),i=v.useCallback(g=>n(s=>s&~g),[n]),a=v.useCallback(g=>n(s=>s^g),[n]);return{flags:t,setFlag:l,addFlag:r,hasFlag:o,removeFlag:i,toggleFlag:a}}var HL=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(HL||{});function Kh(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function Eh(e,t,n,l){let[r,o]=v.useState(n),{hasFlag:i,addFlag:a,removeFlag:g}=YL(e&&r?3:0),s=v.useRef(!1),I=v.useRef(!1),d=wi();return He(function u(){var C;if(!e)return;n&&o(!0);let h=t.current;return h?((C=l==null?void 0:l.start)==null||C.call(l,n),FL(h,{inFlight:s,prepare(){I.current?I.current=!1:I.current=s.current,s.current=!0,!I.current&&(n?(a(3),g(4)):(a(4),g(2)))},run(){I.current?n?(g(3),a(4)):(g(4),a(3)):n?g(1):a(1)},done(){var f;I.current&&typeof h.getAnimations=="function"&&h.getAnimations().length>0||(s.current=!1,g(7),n||o(!1),(f=l==null?void 0:l.end)==null||f.call(l,n))}})):n?(a(3),d.nextFrame(()=>u())):void 0},[e,n,t,d]),e?[r,{closed:i(1),enter:i(2),leave:i(4),transition:i(2)||i(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function FL(e,{prepare:t,run:n,done:l,inFlight:r}){let o=Wr();return EL(e,{prepare:t,inFlight:r}),o.nextFrame(()=>{o.add(KL(e,l)),n()}),o.dispose}function KL(e,t){let n=NL(t),l=Wr();if(!e)return l.dispose;let{transitionDuration:r,transitionDelay:o}=getComputedStyle(e),[i,a]=[r,o].map(s=>{let[I=0]=s.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,u)=>u-d);return I}),g=i+a;if(g!==0){let s=l.group(I=>{let d=I.setTimeout(()=>{n(),I.dispose()},g);I.addEventListener(e,"transitionrun",u=>{u.target===u.currentTarget&&(d(),I.addEventListener(e,"transitioncancel",C=>{C.target===C.currentTarget&&(n(),s())}))})});l.addEventListener(e,"transitionend",I=>{I.target===I.currentTarget&&(n(),l.dispose())})}else n();return l.dispose}function EL(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let l=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=l}function Mh(e,t){let n=v.useRef([]),l=ue(e);v.useEffect(()=>{let r=[...n.current];for(let[o,i]of t.entries())if(n.current[o]!==i){let a=l(t,r);return n.current=t,a}},[l,...t])}function Xi(e){return bS(e)?(e.nodeName||"").toLowerCase():"#document"}function nn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Xl(e){var t;return(t=(bS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bS(e){return e instanceof Node||e instanceof nn(e).Node}function zt(e){return e instanceof Element||e instanceof nn(e).Element}function ll(e){return e instanceof HTMLElement||e instanceof nn(e).HTMLElement}function Wb(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof nn(e).ShadowRoot}function rg(e){const{overflow:t,overflowX:n,overflowY:l,display:r}=Mn(e);return/auto|scroll|overlay|hidden|clip/.test(t+l+n)&&!["inline","contents"].includes(r)}function ML(e){return["table","td","th"].includes(Xi(e))}function VI(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Th(e){const t=Lh(),n=Mn(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(l=>(n.willChange||"").includes(l))||["paint","layout","strict","content"].some(l=>(n.contain||"").includes(l))}function TL(e){let t=Ar(e);for(;ll(t)&&!di(t);){if(VI(t))return null;if(Th(t))return t;t=Ar(t)}return null}function Lh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function di(e){return["html","body","#document"].includes(Xi(e))}function Mn(e){return nn(e).getComputedStyle(e)}function WI(e){return zt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ar(e){if(Xi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Wb(e)&&e.host||Xl(e);return Wb(t)?t.host:t}function yS(e){const t=Ar(e);return di(t)?e.ownerDocument?e.ownerDocument.body:e.body:ll(t)&&rg(t)?t:yS(t)}function Ta(e,t,n){var l;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=yS(e),o=r===((l=e.ownerDocument)==null?void 0:l.body),i=nn(r);return o?t.concat(i,i.visualViewport||[],rg(r)?r:[],i.frameElement&&n?Ta(i.frameElement):[]):t.concat(r,Ta(r,[],n))}function LL(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:l}=t;return n+"/"+l}).join(" "):navigator.userAgent}const _l=Math.min,qt=Math.max,vc=Math.round,Tg=Math.floor,mr=e=>({x:e,y:e}),zL={left:"right",right:"left",bottom:"top",top:"bottom"},jL={start:"end",end:"start"};function Rb(e,t,n){return qt(e,_l(t,n))}function xi(e,t){return typeof e=="function"?e(t):e}function hr(e){return e.split("-")[0]}function og(e){return e.split("-")[1]}function ZS(e){return e==="x"?"y":"x"}function vS(e){return e==="y"?"height":"width"}function Co(e){return["top","bottom"].includes(hr(e))?"y":"x"}function GS(e){return ZS(Co(e))}function UL(e,t,n){n===void 0&&(n=!1);const l=og(e),r=GS(e),o=vS(r);let i=r==="x"?l===(n?"end":"start")?"right":"left":l==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Gc(i)),[i,Gc(i)]}function DL(e){const t=Gc(e);return[EA(e),t,EA(t)]}function EA(e){return e.replace(/start|end/g,t=>jL[t])}function QL(e,t,n){const l=["left","right"],r=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:l:t?l:r;case"left":case"right":return t?o:i;default:return[]}}function PL(e,t,n,l){const r=og(e);let o=QL(hr(e),n==="start",l);return r&&(o=o.map(i=>i+"-"+r),t&&(o=o.concat(o.map(EA)))),o}function Gc(e){return e.replace(/left|right|bottom|top/g,t=>zL[t])}function OL(e){return{top:0,right:0,bottom:0,left:0,...e}}function _L(e){return typeof e!="number"?OL(e):{top:e,right:e,bottom:e,left:e}}function Bc(e){const{x:t,y:n,width:l,height:r}=e;return{width:l,height:r,top:n,left:t,right:t+l,bottom:n+r,x:t,y:n}}function wb(e,t,n){let{reference:l,floating:r}=e;const o=Co(t),i=GS(t),a=vS(i),g=hr(t),s=o==="y",I=l.x+l.width/2-r.width/2,d=l.y+l.height/2-r.height/2,u=l[a]/2-r[a]/2;let C;switch(g){case"top":C={x:I,y:l.y-r.height};break;case"bottom":C={x:I,y:l.y+l.height};break;case"right":C={x:l.x+l.width,y:d};break;case"left":C={x:l.x-r.width,y:d};break;default:C={x:l.x,y:l.y}}switch(og(t)){case"start":C[i]-=u*(n&&s?-1:1);break;case"end":C[i]+=u*(n&&s?-1:1);break}return C}const qL=async(e,t,n)=>{const{placement:l="bottom",strategy:r="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),g=await(i.isRTL==null?void 0:i.isRTL(t));let s=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:I,y:d}=wb(s,l,g),u=l,C={},h=0;for(let f=0;f<a.length;f++){const{name:y,fn:A}=a[f],{x:m,y:p,data:b,reset:Z}=await A({x:I,y:d,initialPlacement:l,placement:u,strategy:r,middlewareData:C,rects:s,platform:i,elements:{reference:e,floating:t}});I=m??I,d=p??d,C={...C,[y]:{...C[y],...b}},Z&&h<=50&&(h++,typeof Z=="object"&&(Z.placement&&(u=Z.placement),Z.rects&&(s=Z.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:r}):Z.rects),{x:I,y:d}=wb(s,u,g)),f=-1)}return{x:I,y:d,placement:u,strategy:r,middlewareData:C}};async function RI(e,t){var n;t===void 0&&(t={});const{x:l,y:r,platform:o,rects:i,elements:a,strategy:g}=e,{boundary:s="clippingAncestors",rootBoundary:I="viewport",elementContext:d="floating",altBoundary:u=!1,padding:C=0}=xi(t,e),h=_L(C),y=a[u?d==="floating"?"reference":"floating":d],A=Bc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(y)))==null||n?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:s,rootBoundary:I,strategy:g})),m=d==="floating"?{x:l,y:r,width:i.floating.width,height:i.floating.height}:i.reference,p=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),b=await(o.isElement==null?void 0:o.isElement(p))?await(o.getScale==null?void 0:o.getScale(p))||{x:1,y:1}:{x:1,y:1},Z=Bc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:p,strategy:g}):m);return{top:(A.top-Z.top+h.top)/b.y,bottom:(Z.bottom-A.bottom+h.bottom)/b.y,left:(A.left-Z.left+h.left)/b.x,right:(Z.right-A.right+h.right)/b.x}}const $L=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,l;const{placement:r,middlewareData:o,rects:i,initialPlacement:a,platform:g,elements:s}=t,{mainAxis:I=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:f=!0,...y}=xi(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const A=hr(r),m=Co(a),p=hr(a)===a,b=await(g.isRTL==null?void 0:g.isRTL(s.floating)),Z=u||(p||!f?[Gc(a)]:DL(a)),V=h!=="none";!u&&V&&Z.push(...PL(a,f,h,b));const S=[a,...Z],G=await RI(t,y),w=[];let B=((l=o.flip)==null?void 0:l.overflows)||[];if(I&&w.push(G[A]),d){const x=UL(r,i,b);w.push(G[x[0]],G[x[1]])}if(B=[...B,{placement:r,overflows:w}],!w.every(x=>x<=0)){var W,R;const x=(((W=o.flip)==null?void 0:W.index)||0)+1,H=S[x];if(H)return{data:{index:x,overflows:B},reset:{placement:H}};let M=(R=B.filter(T=>T.overflows[0]<=0).sort((T,E)=>T.overflows[1]-E.overflows[1])[0])==null?void 0:R.placement;if(!M)switch(C){case"bestFit":{var k;const T=(k=B.filter(E=>{if(V){const N=Co(E.placement);return N===m||N==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(N=>N>0).reduce((N,J)=>N+J,0)]).sort((E,N)=>E[1]-N[1])[0])==null?void 0:k[0];T&&(M=T);break}case"initialPlacement":M=a;break}if(r!==M)return{reset:{placement:M}}}return{}}}};async function ez(e,t){const{placement:n,platform:l,elements:r}=e,o=await(l.isRTL==null?void 0:l.isRTL(r.floating)),i=hr(n),a=og(n),g=Co(n)==="y",s=["left","top"].includes(i)?-1:1,I=o&&g?-1:1,d=xi(t,e);let{mainAxis:u,crossAxis:C,alignmentAxis:h}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof h=="number"&&(C=a==="end"?h*-1:h),g?{x:C*I,y:u*s}:{x:u*s,y:C*I}}const tz=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,l;const{x:r,y:o,placement:i,middlewareData:a}=t,g=await ez(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(l=a.arrow)!=null&&l.alignmentOffset?{}:{x:r+g.x,y:o+g.y,data:{...g,placement:i}}}}},nz=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:l,placement:r}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:y=>{let{x:A,y:m}=y;return{x:A,y:m}}},...g}=xi(e,t),s={x:n,y:l},I=await RI(t,g),d=Co(hr(r)),u=ZS(d);let C=s[u],h=s[d];if(o){const y=u==="y"?"top":"left",A=u==="y"?"bottom":"right",m=C+I[y],p=C-I[A];C=Rb(m,C,p)}if(i){const y=d==="y"?"top":"left",A=d==="y"?"bottom":"right",m=h+I[y],p=h-I[A];h=Rb(m,h,p)}const f=a.fn({...t,[u]:C,[d]:h});return{...f,data:{x:f.x-n,y:f.y-l}}}}},lz=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:l,platform:r,elements:o}=t,{apply:i=()=>{},...a}=xi(e,t),g=await RI(t,a),s=hr(n),I=og(n),d=Co(n)==="y",{width:u,height:C}=l.floating;let h,f;s==="top"||s==="bottom"?(h=s,f=I===(await(r.isRTL==null?void 0:r.isRTL(o.floating))?"start":"end")?"left":"right"):(f=s,h=I==="end"?"top":"bottom");const y=C-g.top-g.bottom,A=u-g.left-g.right,m=_l(C-g[h],y),p=_l(u-g[f],A),b=!t.middlewareData.shift;let Z=m,V=p;if(d?V=I||b?_l(p,A):A:Z=I||b?_l(m,y):y,b&&!I){const G=qt(g.left,0),w=qt(g.right,0),B=qt(g.top,0),W=qt(g.bottom,0);d?V=u-2*(G!==0||w!==0?G+w:qt(g.left,g.right)):Z=C-2*(B!==0||W!==0?B+W:qt(g.top,g.bottom))}await i({...t,availableWidth:V,availableHeight:Z});const S=await r.getDimensions(o.floating);return u!==S.width||C!==S.height?{reset:{rects:!0}}:{}}}};function BS(e){const t=Mn(e);let n=parseFloat(t.width)||0,l=parseFloat(t.height)||0;const r=ll(e),o=r?e.offsetWidth:n,i=r?e.offsetHeight:l,a=vc(n)!==o||vc(l)!==i;return a&&(n=o,l=i),{width:n,height:l,$:a}}function zh(e){return zt(e)?e:e.contextElement}function qo(e){const t=zh(e);if(!ll(t))return mr(1);const n=t.getBoundingClientRect(),{width:l,height:r,$:o}=BS(t);let i=(o?vc(n.width):n.width)/l,a=(o?vc(n.height):n.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const rz=mr(0);function SS(e){const t=nn(e);return!Lh()||!t.visualViewport?rz:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function oz(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==nn(e)?!1:t}function Ao(e,t,n,l){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=zh(e);let i=mr(1);t&&(l?zt(l)&&(i=qo(l)):i=qo(e));const a=oz(o,n,l)?SS(o):mr(0);let g=(r.left+a.x)/i.x,s=(r.top+a.y)/i.y,I=r.width/i.x,d=r.height/i.y;if(o){const u=nn(o),C=l&&zt(l)?nn(l):l;let h=u,f=h.frameElement;for(;f&&l&&C!==h;){const y=qo(f),A=f.getBoundingClientRect(),m=Mn(f),p=A.left+(f.clientLeft+parseFloat(m.paddingLeft))*y.x,b=A.top+(f.clientTop+parseFloat(m.paddingTop))*y.y;g*=y.x,s*=y.y,I*=y.x,d*=y.y,g+=p,s+=b,h=nn(f),f=h.frameElement}}return Bc({width:I,height:d,x:g,y:s})}function iz(e){let{elements:t,rect:n,offsetParent:l,strategy:r}=e;const o=r==="fixed",i=Xl(l),a=t?VI(t.floating):!1;if(l===i||a&&o)return n;let g={scrollLeft:0,scrollTop:0},s=mr(1);const I=mr(0),d=ll(l);if((d||!d&&!o)&&((Xi(l)!=="body"||rg(i))&&(g=WI(l)),ll(l))){const u=Ao(l);s=qo(l),I.x=u.x+l.clientLeft,I.y=u.y+l.clientTop}return{width:n.width*s.x,height:n.height*s.y,x:n.x*s.x-g.scrollLeft*s.x+I.x,y:n.y*s.y-g.scrollTop*s.y+I.y}}function az(e){return Array.from(e.getClientRects())}function VS(e){return Ao(Xl(e)).left+WI(e).scrollLeft}function gz(e){const t=Xl(e),n=WI(e),l=e.ownerDocument.body,r=qt(t.scrollWidth,t.clientWidth,l.scrollWidth,l.clientWidth),o=qt(t.scrollHeight,t.clientHeight,l.scrollHeight,l.clientHeight);let i=-n.scrollLeft+VS(e);const a=-n.scrollTop;return Mn(l).direction==="rtl"&&(i+=qt(t.clientWidth,l.clientWidth)-r),{width:r,height:o,x:i,y:a}}function sz(e,t){const n=nn(e),l=Xl(e),r=n.visualViewport;let o=l.clientWidth,i=l.clientHeight,a=0,g=0;if(r){o=r.width,i=r.height;const s=Lh();(!s||s&&t==="fixed")&&(a=r.offsetLeft,g=r.offsetTop)}return{width:o,height:i,x:a,y:g}}function cz(e,t){const n=Ao(e,!0,t==="fixed"),l=n.top+e.clientTop,r=n.left+e.clientLeft,o=ll(e)?qo(e):mr(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,g=r*o.x,s=l*o.y;return{width:i,height:a,x:g,y:s}}function kb(e,t,n){let l;if(t==="viewport")l=sz(e,n);else if(t==="document")l=gz(Xl(e));else if(zt(t))l=cz(t,n);else{const r=SS(e);l={...t,x:t.x-r.x,y:t.y-r.y}}return Bc(l)}function WS(e,t){const n=Ar(e);return n===t||!zt(n)||di(n)?!1:Mn(n).position==="fixed"||WS(n,t)}function Iz(e,t){const n=t.get(e);if(n)return n;let l=Ta(e,[],!1).filter(a=>zt(a)&&Xi(a)!=="body"),r=null;const o=Mn(e).position==="fixed";let i=o?Ar(e):e;for(;zt(i)&&!di(i);){const a=Mn(i),g=Th(i);!g&&a.position==="fixed"&&(r=null),(o?!g&&!r:!g&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||rg(i)&&!g&&WS(e,i))?l=l.filter(I=>I!==i):r=a,i=Ar(i)}return t.set(e,l),l}function dz(e){let{element:t,boundary:n,rootBoundary:l,strategy:r}=e;const i=[...n==="clippingAncestors"?VI(t)?[]:Iz(t,this._c):[].concat(n),l],a=i[0],g=i.reduce((s,I)=>{const d=kb(t,I,r);return s.top=qt(d.top,s.top),s.right=_l(d.right,s.right),s.bottom=_l(d.bottom,s.bottom),s.left=qt(d.left,s.left),s},kb(t,a,r));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function uz(e){const{width:t,height:n}=BS(e);return{width:t,height:n}}function Cz(e,t,n){const l=ll(t),r=Xl(t),o=n==="fixed",i=Ao(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const g=mr(0);if(l||!l&&!o)if((Xi(t)!=="body"||rg(r))&&(a=WI(t)),l){const d=Ao(t,!0,o,t);g.x=d.x+t.clientLeft,g.y=d.y+t.clientTop}else r&&(g.x=VS(r));const s=i.left+a.scrollLeft-g.x,I=i.top+a.scrollTop-g.y;return{x:s,y:I,width:i.width,height:i.height}}function gu(e){return Mn(e).position==="static"}function Xb(e,t){return!ll(e)||Mn(e).position==="fixed"?null:t?t(e):e.offsetParent}function RS(e,t){const n=nn(e);if(VI(e))return n;if(!ll(e)){let r=Ar(e);for(;r&&!di(r);){if(zt(r)&&!gu(r))return r;r=Ar(r)}return n}let l=Xb(e,t);for(;l&&ML(l)&&gu(l);)l=Xb(l,t);return l&&di(l)&&gu(l)&&!Th(l)?n:l||TL(e)||n}const Az=async function(e){const t=this.getOffsetParent||RS,n=this.getDimensions,l=await n(e.floating);return{reference:Cz(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function mz(e){return Mn(e).direction==="rtl"}const hz={convertOffsetParentRelativeRectToViewportRelativeRect:iz,getDocumentElement:Xl,getClippingRect:dz,getOffsetParent:RS,getElementRects:Az,getClientRects:az,getDimensions:uz,getScale:qo,isElement:zt,isRTL:mz};function fz(e,t){let n=null,l;const r=Xl(e);function o(){var a;clearTimeout(l),(a=n)==null||a.disconnect(),n=null}function i(a,g){a===void 0&&(a=!1),g===void 0&&(g=1),o();const{left:s,top:I,width:d,height:u}=e.getBoundingClientRect();if(a||t(),!d||!u)return;const C=Tg(I),h=Tg(r.clientWidth-(s+d)),f=Tg(r.clientHeight-(I+u)),y=Tg(s),m={rootMargin:-C+"px "+-h+"px "+-f+"px "+-y+"px",threshold:qt(0,_l(1,g))||1};let p=!0;function b(Z){const V=Z[0].intersectionRatio;if(V!==g){if(!p)return i();V?i(!1,V):l=setTimeout(()=>{i(!1,1e-7)},1e3)}p=!1}try{n=new IntersectionObserver(b,{...m,root:r.ownerDocument})}catch{n=new IntersectionObserver(b,m)}n.observe(e)}return i(!0),o}function pz(e,t,n,l){l===void 0&&(l={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:g=!1}=l,s=zh(e),I=r||o?[...s?Ta(s):[],...Ta(t)]:[];I.forEach(A=>{r&&A.addEventListener("scroll",n,{passive:!0}),o&&A.addEventListener("resize",n)});const d=s&&a?fz(s,n):null;let u=-1,C=null;i&&(C=new ResizeObserver(A=>{let[m]=A;m&&m.target===s&&C&&(C.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var p;(p=C)==null||p.observe(t)})),n()}),s&&!g&&C.observe(s),C.observe(t));let h,f=g?Ao(e):null;g&&y();function y(){const A=Ao(e);f&&(A.x!==f.x||A.y!==f.y||A.width!==f.width||A.height!==f.height)&&n(),f=A,h=requestAnimationFrame(y)}return n(),()=>{var A;I.forEach(m=>{r&&m.removeEventListener("scroll",n),o&&m.removeEventListener("resize",n)}),d==null||d(),(A=C)==null||A.disconnect(),C=null,g&&cancelAnimationFrame(h)}}const su=RI,bz=tz,yz=nz,Zz=$L,vz=lz,Gz=(e,t,n)=>{const l=new Map,r={platform:hz,...n},o={...r.platform,_c:l};return qL(e,t,{...r,platform:o})};var Bs=typeof document<"u"?v.useLayoutEffect:v.useEffect;function Sc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,l,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(l=n;l--!==0;)if(!Sc(e[l],t[l]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(l=n;l--!==0;)if(!{}.hasOwnProperty.call(t,r[l]))return!1;for(l=n;l--!==0;){const o=r[l];if(!(o==="_owner"&&e.$$typeof)&&!Sc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function wS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function xb(e,t){const n=wS(e);return Math.round(t*n)/n}function Jb(e){const t=v.useRef(e);return Bs(()=>{t.current=e}),t}function Bz(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:l=[],platform:r,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:g,open:s}=e,[I,d]=v.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,C]=v.useState(l);Sc(u,l)||C(l);const[h,f]=v.useState(null),[y,A]=v.useState(null),m=v.useCallback(T=>{T!==V.current&&(V.current=T,f(T))},[]),p=v.useCallback(T=>{T!==S.current&&(S.current=T,A(T))},[]),b=o||h,Z=i||y,V=v.useRef(null),S=v.useRef(null),G=v.useRef(I),w=g!=null,B=Jb(g),W=Jb(r),R=v.useCallback(()=>{if(!V.current||!S.current)return;const T={placement:t,strategy:n,middleware:u};W.current&&(T.platform=W.current),Gz(V.current,S.current,T).then(E=>{const N={...E,isPositioned:!0};k.current&&!Sc(G.current,N)&&(G.current=N,Kn.flushSync(()=>{d(N)}))})},[u,t,n,W]);Bs(()=>{s===!1&&G.current.isPositioned&&(G.current.isPositioned=!1,d(T=>({...T,isPositioned:!1})))},[s]);const k=v.useRef(!1);Bs(()=>(k.current=!0,()=>{k.current=!1}),[]),Bs(()=>{if(b&&(V.current=b),Z&&(S.current=Z),b&&Z){if(B.current)return B.current(b,Z,R);R()}},[b,Z,R,B,w]);const x=v.useMemo(()=>({reference:V,floating:S,setReference:m,setFloating:p}),[m,p]),H=v.useMemo(()=>({reference:b,floating:Z}),[b,Z]),M=v.useMemo(()=>{const T={position:n,left:0,top:0};if(!H.floating)return T;const E=xb(H.floating,I.x),N=xb(H.floating,I.y);return a?{...T,transform:"translate("+E+"px, "+N+"px)",...wS(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:E,top:N}},[n,a,H.floating,I.x,I.y]);return v.useMemo(()=>({...I,update:R,refs:x,elements:H,floatingStyles:M}),[I,R,x,H,M])}const kS=(e,t)=>({...bz(e),options:[e,t]}),Sz=(e,t)=>({...yz(e),options:[e,t]}),Vz=(e,t)=>({...Zz(e),options:[e,t]}),Wz=(e,t)=>({...vz(e),options:[e,t]}),XS={...Rs},Rz=XS.useInsertionEffect,wz=Rz||(e=>e());function xS(e){const t=v.useRef(()=>{});return wz(()=>{t.current=e}),v.useCallback(function(){for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t.current==null?void 0:t.current(...l)},[])}var MA=typeof document<"u"?v.useLayoutEffect:v.useEffect;let Nb=!1,kz=0;const Yb=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+kz++;function Xz(){const[e,t]=v.useState(()=>Nb?Yb():void 0);return MA(()=>{e==null&&t(Yb())},[]),v.useEffect(()=>{Nb=!0},[]),e}const xz=XS.useId,Jz=xz||Xz;function Nz(){const e=new Map;return{emit(t,n){var l;(l=e.get(t))==null||l.forEach(r=>r(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var l;e.set(t,((l=e.get(t))==null?void 0:l.filter(r=>r!==n))||[])}}}const Yz=v.createContext(null),Hz=v.createContext(null),Fz=()=>{var e;return((e=v.useContext(Yz))==null?void 0:e.id)||null},Kz=()=>v.useContext(Hz);function Ez(e){const{open:t=!1,onOpenChange:n,elements:l}=e,r=Jz(),o=v.useRef({}),[i]=v.useState(()=>Nz()),a=Fz()!=null,[g,s]=v.useState(l.reference),I=xS((C,h,f)=>{o.current.openEvent=C?h:void 0,i.emit("openchange",{open:C,event:h,reason:f,nested:a}),n==null||n(C,h,f)}),d=v.useMemo(()=>({setPositionReference:s}),[]),u=v.useMemo(()=>({reference:g||l.reference||null,floating:l.floating||null,domReference:l.reference}),[g,l.reference,l.floating]);return v.useMemo(()=>({dataRef:o,open:t,onOpenChange:I,elements:u,events:i,floatingId:r,refs:d}),[t,I,u,i,r,d])}function Mz(e){e===void 0&&(e={});const{nodeId:t}=e,n=Ez({...e,elements:{reference:null,floating:null,...e.elements}}),l=e.rootContext||n,r=l.elements,[o,i]=v.useState(null),[a,g]=v.useState(null),I=(r==null?void 0:r.reference)||o,d=v.useRef(null),u=Kz();MA(()=>{I&&(d.current=I)},[I]);const C=Bz({...e,elements:{...r,...a&&{reference:a}}}),h=v.useCallback(p=>{const b=zt(p)?{getBoundingClientRect:()=>p.getBoundingClientRect(),contextElement:p}:p;g(b),C.refs.setReference(b)},[C.refs]),f=v.useCallback(p=>{(zt(p)||p===null)&&(d.current=p,i(p)),(zt(C.refs.reference.current)||C.refs.reference.current===null||p!==null&&!zt(p))&&C.refs.setReference(p)},[C.refs]),y=v.useMemo(()=>({...C.refs,setReference:f,setPositionReference:h,domReference:d}),[C.refs,f,h]),A=v.useMemo(()=>({...C.elements,domReference:I}),[C.elements,I]),m=v.useMemo(()=>({...C,...l,refs:y,elements:A,nodeId:t}),[C,y,A,t,l]);return MA(()=>{l.dataRef.current.floatingContext=m;const p=u==null?void 0:u.nodesRef.current.find(b=>b.id===t);p&&(p.context=m)}),v.useMemo(()=>({...C,context:m,refs:y,elements:A}),[C,y,A,m])}const Hb="active",Fb="selected";function cu(e,t,n){const l=new Map,r=n==="item";let o=e;if(r&&e){const{[Hb]:i,[Fb]:a,...g}=e;o=g}return{...n==="floating"&&{tabIndex:-1},...o,...t.map(i=>{const a=i?i[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((i,a)=>(a&&Object.entries(a).forEach(g=>{let[s,I]=g;if(!(r&&[Hb,Fb].includes(s)))if(s.indexOf("on")===0){if(l.has(s)||l.set(s,[]),typeof I=="function"){var d;(d=l.get(s))==null||d.push(I),i[s]=function(){for(var u,C=arguments.length,h=new Array(C),f=0;f<C;f++)h[f]=arguments[f];return(u=l.get(s))==null?void 0:u.map(y=>y(...h)).find(y=>y!==void 0)}}}else i[s]=I}),i),{})}}function Tz(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),l=e.map(a=>a==null?void 0:a.item),r=v.useCallback(a=>cu(a,e,"reference"),t),o=v.useCallback(a=>cu(a,e,"floating"),n),i=v.useCallback(a=>cu(a,e,"item"),l);return v.useMemo(()=>({getReferenceProps:r,getFloatingProps:o,getItemProps:i}),[r,o,i])}function Kb(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Lz=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:l,onFallbackChange:r,offset:o=0,index:i=0,minItemsVisible:a=4,referenceOverflowThreshold:g=0,scrollRef:s,...I}=xi(e,t),{rects:d,elements:{floating:u}}=t,C=n.current[i];if(!C)return{};const h={...t,...await kS(-C.offsetTop-u.clientTop-d.reference.height/2-C.offsetHeight/2-o).fn(t)},f=(s==null?void 0:s.current)||u,y=await su(Kb(h,f.scrollHeight),I),A=await su(h,{...I,elementContext:"reference"}),m=Math.max(0,y.top),p=h.y+m,b=Math.max(0,f.scrollHeight-m-Math.max(0,y.bottom));return f.style.maxHeight=b+"px",f.scrollTop=m,r&&(f.offsetHeight<C.offsetHeight*Math.min(a,n.current.length-1)-1||A.top>=-g||A.bottom>=-g?Kn.flushSync(()=>r(!0)):Kn.flushSync(()=>r(!1))),l&&(l.current=await su(Kb({...h,y:p},f.offsetHeight),I)),{y:p}}});function zz(e,t){const{open:n,elements:l}=e,{enabled:r=!0,overflowRef:o,scrollRef:i,onChange:a}=t,g=xS(a),s=v.useRef(!1),I=v.useRef(null),d=v.useRef(null);v.useEffect(()=>{if(!r)return;function C(f){if(f.ctrlKey||!h||o.current==null)return;const y=f.deltaY,A=o.current.top>=-.5,m=o.current.bottom>=-.5,p=h.scrollHeight-h.clientHeight,b=y<0?-1:1,Z=y<0?"max":"min";h.scrollHeight<=h.clientHeight||(!A&&y>0||!m&&y<0?(f.preventDefault(),Kn.flushSync(()=>{g(V=>V+Math[Z](y,p*b))})):/firefox/i.test(LL())&&(h.scrollTop+=y))}const h=(i==null?void 0:i.current)||l.floating;if(n&&h)return h.addEventListener("wheel",C),requestAnimationFrame(()=>{I.current=h.scrollTop,o.current!=null&&(d.current={...o.current})}),()=>{I.current=null,d.current=null,h.removeEventListener("wheel",C)}},[r,n,l.floating,o,i,g]);const u=v.useMemo(()=>({onKeyDown(){s.current=!0},onWheel(){s.current=!1},onPointerMove(){s.current=!1},onScroll(){const C=(i==null?void 0:i.current)||l.floating;if(!(!o.current||!C||!s.current)){if(I.current!==null){const h=C.scrollTop-I.current;(o.current.bottom<-.5&&h<-1||o.current.top<-.5&&h>1)&&Kn.flushSync(()=>g(f=>f+h))}requestAnimationFrame(()=>{I.current=C.scrollTop})}}}),[l.floating,g,o,i]);return v.useMemo(()=>r?{floating:u}:{},[r,u])}let ig=v.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});ig.displayName="FloatingContext";let jh=v.createContext(null);jh.displayName="PlacementContext";function jz(e){return v.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function Uz(){return v.useContext(ig).setReference}function Dz(){let{getFloatingProps:e,slot:t}=v.useContext(ig);return v.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function Qz(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=v.useContext(jh),n=v.useMemo(()=>e,[JSON.stringify(e,typeof HTMLElement<"u"?(r,o)=>o instanceof HTMLElement?o.outerHTML:o:void 0)]);He(()=>{t==null||t(n??null)},[t,n]);let l=v.useContext(ig);return v.useMemo(()=>[l.setFloating,e?l.styles:{}],[l.setFloating,e,l.styles])}let Eb=4;function Pz({children:e,enabled:t=!0}){let[n,l]=v.useState(null),[r,o]=v.useState(0),i=v.useRef(null),[a,g]=v.useState(null);Oz(a);let s=t&&n!==null&&a!==null,{to:I="bottom",gap:d=0,offset:u=0,padding:C=0,inner:h}=_z(n,a),[f,y="center"]=I.split(" ");He(()=>{s&&o(0)},[s]);let{refs:A,floatingStyles:m,context:p}=Mz({open:s,placement:f==="selection"?y==="center"?"bottom":`bottom-${y}`:y==="center"?`${f}`:`${f}-${y}`,strategy:"absolute",transform:!1,middleware:[kS({mainAxis:f==="selection"?0:d,crossAxis:u}),Sz({padding:C}),f!=="selection"&&Vz({padding:C}),f==="selection"&&h?Lz({...h,padding:C,overflowRef:i,offset:r,minItemsVisible:Eb,referenceOverflowThreshold:C,onFallbackChange(W){var R,k;if(!W)return;let x=p.elements.floating;if(!x)return;let H=parseFloat(getComputedStyle(x).scrollPaddingBottom)||0,M=Math.min(Eb,x.childElementCount),T=0,E=0;for(let N of(k=(R=p.elements.floating)==null?void 0:R.childNodes)!=null?k:[])if(N instanceof HTMLElement){let J=N.offsetTop,X=J+N.clientHeight+H,Y=x.scrollTop,F=Y+x.clientHeight;if(J>=Y&&X<=F)M--;else{E=Math.max(0,Math.min(X,F)-Math.max(J,Y)),T=N.clientHeight;break}}M>=1&&o(N=>{let J=T*M-E+H;return N>=J?N:J})}}):null,Wz({padding:C,apply({availableWidth:W,availableHeight:R,elements:k}){Object.assign(k.floating.style,{overflow:"auto",maxWidth:`${W}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${R}px)`})}})].filter(Boolean),whileElementsMounted:pz}),[b=f,Z=y]=p.placement.split("-");f==="selection"&&(b="selection");let V=v.useMemo(()=>({anchor:[b,Z].filter(Boolean).join(" ")}),[b,Z]),S=zz(p,{overflowRef:i,onChange:o}),{getReferenceProps:G,getFloatingProps:w}=Tz([S]),B=ue(W=>{g(W),A.setFloating(W)});return v.createElement(jh.Provider,{value:l},v.createElement(ig.Provider,{value:{setFloating:B,setReference:A.setReference,styles:m,getReferenceProps:G,getFloatingProps:w,slot:V}},e))}function Oz(e){He(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,l=parseFloat(n);if(isNaN(l))return;let r=parseInt(n);isNaN(r)||l!==r&&(e.style.maxHeight=`${Math.ceil(l)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function _z(e,t){var n,l,r;let o=Iu((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),i=Iu((l=e==null?void 0:e.offset)!=null?l:"var(--anchor-offset, 0)",t),a=Iu((r=e==null?void 0:e.padding)!=null?r:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:i,padding:a}}function Iu(e,t,n=void 0){let l=wi(),r=ue((g,s)=>{if(g==null)return[n,null];if(typeof g=="number")return[g,null];if(typeof g=="string"){if(!s)return[n,null];let I=Mb(g,s);return[I,d=>{let u=JS(g);{let C=u.map(h=>window.getComputedStyle(s).getPropertyValue(h));l.requestAnimationFrame(function h(){l.nextFrame(h);let f=!1;for(let[A,m]of u.entries()){let p=window.getComputedStyle(s).getPropertyValue(m);if(C[A]!==p){C[A]=p,f=!0;break}}if(!f)return;let y=Mb(g,s);I!==y&&(d(y),I=y)})}return l.dispose}]}return[n,null]}),o=v.useMemo(()=>r(e,t)[0],[e,t]),[i=o,a]=v.useState();return He(()=>{let[g,s]=r(e,t);if(a(g),!!s)return s(a)},[e,t]),i}function JS(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let l=t[1].slice(0,n).trim(),r=t[1].slice(n+1).trim();return r?[l,...JS(r)]:[l]}return[]}function Mb(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let l=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),l}let wI=v.createContext(null);wI.displayName="OpenClosedContext";var ft=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ft||{});function Ji(){return v.useContext(wI)}function NS({value:e,children:t}){return U.createElement(wI.Provider,{value:e},t)}function YS({children:e}){return U.createElement(wI.Provider,{value:null},e)}function qz(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let jl=[];qz(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||jl[0]===t.target)return;let n=t.target;n=n.closest(Zc),jl.unshift(n??t.target),jl=jl.filter(l=>l!=null&&l.isConnected),jl.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function HS(e){let t=ue(e),n=v.useRef(!1);v.useEffect(()=>(n.current=!1,()=>{n.current=!0,yI(()=>{n.current&&t()})}),[t])}function $z(){let e=typeof document>"u";return"useSyncExternalStore"in Rs?(t=>t.useSyncExternalStore)(Rs)(()=>()=>{},()=>!1,()=>!e):!1}function ag(){let e=$z(),[t,n]=v.useState(lo.isHandoffComplete);return t&&lo.isHandoffComplete===!1&&n(!1),v.useEffect(()=>{t!==!0&&n(!0)},[t]),v.useEffect(()=>lo.handoff(),[]),e?!1:t}let FS=v.createContext(!1);function ej(){return v.useContext(FS)}function Tb(e){return U.createElement(FS.Provider,{value:e.force},e.children)}function tj(e){let t=ej(),n=v.useContext(ES),l=Rr(e),[r,o]=v.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(lo.isServer)return null;let a=l==null?void 0:l.getElementById("headlessui-portal-root");if(a)return a;if(l===null)return null;let g=l.createElement("div");return g.setAttribute("id","headlessui-portal-root"),l.body.appendChild(g)});return v.useEffect(()=>{r!==null&&(l!=null&&l.body.contains(r)||l==null||l.body.appendChild(r))},[r,l]),v.useEffect(()=>{t||n!==null&&o(n.current)},[n,o,t]),r}let KS=v.Fragment,nj=Le(function(e,t){let n=e,l=v.useRef(null),r=gt(oS(I=>{l.current=I}),t),o=Rr(l),i=tj(l),[a]=v.useState(()=>{var I;return lo.isServer?null:(I=o==null?void 0:o.createElement("div"))!=null?I:null}),g=v.useContext(TA),s=ag();return He(()=>{!i||!a||i.contains(a)||(a.setAttribute("data-headlessui-portal",""),i.appendChild(a))},[i,a]),He(()=>{if(a&&g)return g.register(a)},[g,a]),HS(()=>{var I;!i||!a||(a instanceof Node&&i.contains(a)&&i.removeChild(a),i.childNodes.length<=0&&((I=i.parentElement)==null||I.removeChild(i)))}),s?!i||!a?null:Kn.createPortal(rt({ourProps:{ref:r},theirProps:n,slot:{},defaultTag:KS,name:"Portal"}),a):null});function lj(e,t){let n=gt(t),{enabled:l=!0,...r}=e;return l?U.createElement(nj,{...r,ref:n}):rt({ourProps:{ref:n},theirProps:r,slot:{},defaultTag:KS,name:"Portal"})}let rj=v.Fragment,ES=v.createContext(null);function oj(e,t){let{target:n,...l}=e,r={ref:gt(t)};return U.createElement(ES.Provider,{value:n},rt({ourProps:r,theirProps:l,defaultTag:rj,name:"Popover.Group"}))}let TA=v.createContext(null);function MS(){let e=v.useContext(TA),t=v.useRef([]),n=ue(o=>(t.current.push(o),e&&e.register(o),()=>l(o))),l=ue(o=>{let i=t.current.indexOf(o);i!==-1&&t.current.splice(i,1),e&&e.unregister(o)}),r=v.useMemo(()=>({register:n,unregister:l,portals:t}),[n,l,t]);return[t,v.useMemo(()=>function({children:o}){return U.createElement(TA.Provider,{value:r},o)},[r])]}let ij=Le(lj),TS=Le(oj),LS=Object.assign(ij,{Group:TS});function aj(e,t=typeof document<"u"?document.defaultView:null,n){let l=ki(e,"escape");Fh(t,"keydown",r=>{l&&(r.defaultPrevented||r.key===Nt.Escape&&n(r))})}function gj(){var e;let[t]=v.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,l]=v.useState((e=t==null?void 0:t.matches)!=null?e:!1);return He(()=>{if(!t)return;function r(o){l(o.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),n}function zS({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let l=Rr(n),r=ue(()=>{var o,i;let a=[];for(let g of e)g!==null&&(g instanceof HTMLElement?a.push(g):"current"in g&&g.current instanceof HTMLElement&&a.push(g.current));if(t!=null&&t.current)for(let g of t.current)a.push(g);for(let g of(o=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?o:[])g!==document.body&&g!==document.head&&g instanceof HTMLElement&&g.id!=="headlessui-portal-root"&&(n&&(g.contains(n)||g.contains((i=n==null?void 0:n.getRootNode())==null?void 0:i.host))||a.some(s=>g.contains(s))||a.push(g));return a});return{resolveContainers:r,contains:ue(o=>r().some(i=>i.contains(o)))}}let jS=v.createContext(null);function Vc({children:e,node:t}){let[n,l]=v.useState(null),r=Uh(t??n);return U.createElement(jS.Provider,{value:r},e,r===null&&U.createElement(ur,{features:Sl.Hidden,ref:o=>{var i,a;if(o){for(let g of(a=(i=fo(o))==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?a:[])if(g!==document.body&&g!==document.head&&g instanceof HTMLElement&&g!=null&&g.contains(o)){l(g);break}}}}))}function Uh(e=null){var t;return(t=v.useContext(jS))!=null?t:e}function Dh(){let e=v.useRef(!1);return He(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var en=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(en||{});function Qh(){let e=v.useRef(0);return hS(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function US(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let sj="div";var Ur=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Ur||{});function cj(e,t){let n=v.useRef(null),l=gt(n,t),{initialFocus:r,initialFocusFallback:o,containers:i,features:a=15,...g}=e;ag()||(a=0);let s=Rr(n);Cj(a,{ownerDocument:s});let I=Aj(a,{ownerDocument:s,container:n,initialFocus:r,initialFocusFallback:o});mj(a,{ownerDocument:s,container:n,containers:i,previousActiveElement:I});let d=Qh(),u=ue(A=>{let m=n.current;m&&(p=>p())(()=>{wt(d.current,{[en.Forwards]:()=>{Lt(m,lt.First,{skipElements:[A.relatedTarget,o]})},[en.Backwards]:()=>{Lt(m,lt.Last,{skipElements:[A.relatedTarget,o]})}})})}),C=ki(!!(a&2),"focus-trap#tab-lock"),h=wi(),f=v.useRef(!1),y={ref:l,onKeyDown(A){A.key=="Tab"&&(f.current=!0,h.requestAnimationFrame(()=>{f.current=!1}))},onBlur(A){if(!(a&4))return;let m=US(i);n.current instanceof HTMLElement&&m.add(n.current);let p=A.relatedTarget;p instanceof HTMLElement&&p.dataset.headlessuiFocusGuard!=="true"&&(DS(m,p)||(f.current?Lt(n.current,wt(d.current,{[en.Forwards]:()=>lt.Next,[en.Backwards]:()=>lt.Previous})|lt.WrapAround,{relativeTo:A.target}):A.target instanceof HTMLElement&&fl(A.target)))}};return U.createElement(U.Fragment,null,C&&U.createElement(ur,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Sl.Focusable}),rt({ourProps:y,theirProps:g,defaultTag:sj,name:"FocusTrap"}),C&&U.createElement(ur,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Sl.Focusable}))}let Ij=Le(cj),dj=Object.assign(Ij,{features:Ur});function uj(e=!0){let t=v.useRef(jl.slice());return Mh(([n],[l])=>{l===!0&&n===!1&&yI(()=>{t.current.splice(0)}),l===!1&&n===!0&&(t.current=jl.slice())},[e,jl,t]),ue(()=>{var n;return(n=t.current.find(l=>l!=null&&l.isConnected))!=null?n:null})}function Cj(e,{ownerDocument:t}){let n=!!(e&8),l=uj(n);Mh(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&fl(l())},[n]),HS(()=>{n&&fl(l())})}function Aj(e,{ownerDocument:t,container:n,initialFocus:l,initialFocusFallback:r}){let o=v.useRef(null),i=ki(!!(e&1),"focus-trap#initial-focus"),a=Dh();return Mh(()=>{if(e===0)return;if(!i){r!=null&&r.current&&fl(r.current);return}let g=n.current;g&&yI(()=>{if(!a.current)return;let s=t==null?void 0:t.activeElement;if(l!=null&&l.current){if((l==null?void 0:l.current)===s){o.current=s;return}}else if(g.contains(s)){o.current=s;return}if(l!=null&&l.current)fl(l.current);else{if(e&16){if(Lt(g,lt.First|lt.AutoFocus)!==Cr.Error)return}else if(Lt(g,lt.First)!==Cr.Error)return;if(r!=null&&r.current&&(fl(r.current),(t==null?void 0:t.activeElement)===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t==null?void 0:t.activeElement})},[r,i,e]),o}function mj(e,{ownerDocument:t,container:n,containers:l,previousActiveElement:r}){let o=Dh(),i=!!(e&4);Fh(t==null?void 0:t.defaultView,"focus",a=>{if(!i||!o.current)return;let g=US(l);n.current instanceof HTMLElement&&g.add(n.current);let s=r.current;if(!s)return;let I=a.target;I&&I instanceof HTMLElement?DS(g,I)?(r.current=I,fl(I)):(a.preventDefault(),a.stopPropagation(),fl(s)):fl(r.current)},!0)}function DS(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function QS(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:OS)!==v.Fragment||U.Children.count(e.children)===1}let kI=v.createContext(null);kI.displayName="TransitionContext";var hj=(e=>(e.Visible="visible",e.Hidden="hidden",e))(hj||{});function fj(){let e=v.useContext(kI);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function pj(){let e=v.useContext(XI);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let XI=v.createContext(null);XI.displayName="NestingContext";function xI(e){return"children"in e?xI(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function PS(e,t){let n=En(e),l=v.useRef([]),r=Dh(),o=wi(),i=ue((C,h=Ol.Hidden)=>{let f=l.current.findIndex(({el:y})=>y===C);f!==-1&&(wt(h,{[Ol.Unmount](){l.current.splice(f,1)},[Ol.Hidden](){l.current[f].state="hidden"}}),o.microTask(()=>{var y;!xI(l)&&r.current&&((y=n.current)==null||y.call(n))}))}),a=ue(C=>{let h=l.current.find(({el:f})=>f===C);return h?h.state!=="visible"&&(h.state="visible"):l.current.push({el:C,state:"visible"}),()=>i(C,Ol.Unmount)}),g=v.useRef([]),s=v.useRef(Promise.resolve()),I=v.useRef({enter:[],leave:[]}),d=ue((C,h,f)=>{g.current.splice(0),t&&(t.chains.current[h]=t.chains.current[h].filter(([y])=>y!==C)),t==null||t.chains.current[h].push([C,new Promise(y=>{g.current.push(y)})]),t==null||t.chains.current[h].push([C,new Promise(y=>{Promise.all(I.current[h].map(([A,m])=>m)).then(()=>y())})]),h==="enter"?s.current=s.current.then(()=>t==null?void 0:t.wait.current).then(()=>f(h)):f(h)}),u=ue((C,h,f)=>{Promise.all(I.current[h].splice(0).map(([y,A])=>A)).then(()=>{var y;(y=g.current.shift())==null||y()}).then(()=>f(h))});return v.useMemo(()=>({children:l,register:a,unregister:i,onStart:d,onStop:u,wait:s,chains:I}),[a,i,l,d,u,I,s])}let OS=v.Fragment,_S=dr.RenderStrategy;function bj(e,t){var n,l;let{transition:r=!0,beforeEnter:o,afterEnter:i,beforeLeave:a,afterLeave:g,enter:s,enterFrom:I,enterTo:d,entered:u,leave:C,leaveFrom:h,leaveTo:f,...y}=e,A=v.useRef(null),m=QS(e),p=gt(...m?[A,t]:t===null?[]:[t]),b=(n=y.unmount)==null||n?Ol.Unmount:Ol.Hidden,{show:Z,appear:V,initial:S}=fj(),[G,w]=v.useState(Z?"visible":"hidden"),B=pj(),{register:W,unregister:R}=B;He(()=>W(A),[W,A]),He(()=>{if(b===Ol.Hidden&&A.current){if(Z&&G!=="visible"){w("visible");return}return wt(G,{hidden:()=>R(A),visible:()=>W(A)})}},[G,A,W,R,Z,b]);let k=ag();He(()=>{if(m&&k&&G==="visible"&&A.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[A,G,k,m]);let x=S&&!V,H=V&&Z&&S,M=v.useRef(!1),T=PS(()=>{M.current||(w("hidden"),R(A))},B),E=ue(z=>{M.current=!0;let L=z?"enter":"leave";T.onStart(A,L,K=>{K==="enter"?o==null||o():K==="leave"&&(a==null||a())})}),N=ue(z=>{let L=z?"enter":"leave";M.current=!1,T.onStop(A,L,K=>{K==="enter"?i==null||i():K==="leave"&&(g==null||g())}),L==="leave"&&!xI(T)&&(w("hidden"),R(A))});v.useEffect(()=>{m&&r||(E(Z),N(Z))},[Z,m,r]);let J=(()=>!(!r||!m||!k||x))(),[,X]=Eh(J,A,Z,{start:E,end:N}),Y=El({ref:p,className:((l=FA(y.className,H&&s,H&&I,X.enter&&s,X.enter&&X.closed&&I,X.enter&&!X.closed&&d,X.leave&&C,X.leave&&!X.closed&&h,X.leave&&X.closed&&f,!X.transition&&Z&&u))==null?void 0:l.trim())||void 0,...Kh(X)}),F=0;return G==="visible"&&(F|=ft.Open),G==="hidden"&&(F|=ft.Closed),X.enter&&(F|=ft.Opening),X.leave&&(F|=ft.Closing),U.createElement(XI.Provider,{value:T},U.createElement(NS,{value:F},rt({ourProps:Y,theirProps:y,defaultTag:OS,features:_S,visible:G==="visible",name:"Transition.Child"})))}function yj(e,t){let{show:n,appear:l=!1,unmount:r=!0,...o}=e,i=v.useRef(null),a=QS(e),g=gt(...a?[i,t]:t===null?[]:[t]);ag();let s=Ji();if(n===void 0&&s!==null&&(n=(s&ft.Open)===ft.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[I,d]=v.useState(n?"visible":"hidden"),u=PS(()=>{n||d("hidden")}),[C,h]=v.useState(!0),f=v.useRef([n]);He(()=>{C!==!1&&f.current[f.current.length-1]!==n&&(f.current.push(n),h(!1))},[f,n]);let y=v.useMemo(()=>({show:n,appear:l,initial:C}),[n,l,C]);Yh(n,i,()=>d("hidden")),He(()=>{n?d("visible"):!xI(u)&&i.current!==null&&d("hidden")},[n,u]);let A={unmount:r},m=ue(()=>{var b;C&&h(!1),(b=e.beforeEnter)==null||b.call(e)}),p=ue(()=>{var b;C&&h(!1),(b=e.beforeLeave)==null||b.call(e)});return U.createElement(XI.Provider,{value:u},U.createElement(kI.Provider,{value:y},rt({ourProps:{...A,as:v.Fragment,children:U.createElement(qS,{ref:g,...A,...o,beforeEnter:m,beforeLeave:p})},theirProps:{},defaultTag:v.Fragment,features:_S,visible:I==="visible",name:"Transition"})))}function Zj(e,t){let n=v.useContext(kI)!==null,l=Ji()!==null;return U.createElement(U.Fragment,null,!n&&l?U.createElement(LA,{ref:t,...e}):U.createElement(qS,{ref:t,...e}))}let LA=Le(yj),qS=Le(bj),Ph=Le(Zj),ln=Object.assign(LA,{Child:Ph,Root:LA});var vj=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(vj||{}),Gj=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Gj||{});let Bj={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Oh=v.createContext(null);Oh.displayName="DialogContext";function JI(e){let t=v.useContext(Oh);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,JI),n}return t}function Sj(e,t){return wt(t.type,Bj,e,t)}let Lb=Le(function(e,t){let n=v.useId(),{id:l=`headlessui-dialog-${n}`,open:r,onClose:o,initialFocus:i,role:a="dialog",autoFocus:g=!0,__demoMode:s=!1,unmount:I=!1,...d}=e,u=v.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(u.current||(u.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let C=Ji();r===void 0&&C!==null&&(r=(C&ft.Open)===ft.Open);let h=v.useRef(null),f=gt(h,t),y=Rr(h),A=r?0:1,[m,p]=v.useReducer(Sj,{titleId:null,descriptionId:null,panelRef:v.createRef()}),b=ue(()=>o(!1)),Z=ue(J=>p({type:0,id:J})),V=ag()?A===0:!1,[S,G]=MS(),w={get current(){var J;return(J=m.panelRef.current)!=null?J:h.current}},B=Uh(),{resolveContainers:W}=zS({mainTreeNode:B,portals:S,defaultContainers:[w]}),R=C!==null?(C&ft.Closing)===ft.Closing:!1;bL(s||R?!1:V,{allowed:ue(()=>{var J,X;return[(X=(J=h.current)==null?void 0:J.closest("[data-headlessui-portal]"))!=null?X:null]}),disallowed:ue(()=>{var J;return[(J=B==null?void 0:B.closest("body > *:not(#headlessui-portal-root)"))!=null?J:null]})}),fS(V,W,J=>{J.preventDefault(),b()}),aj(V,y==null?void 0:y.defaultView,J=>{J.preventDefault(),J.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),b()}),pS(s||R?!1:V,y,W),Yh(V,h,b);let[k,x]=Nh(),H=v.useMemo(()=>[{dialogState:A,close:b,setTitleId:Z,unmount:I},m],[A,m,b,Z,I]),M=v.useMemo(()=>({open:A===0}),[A]),T={ref:f,id:l,role:a,tabIndex:-1,"aria-modal":s?void 0:A===0?!0:void 0,"aria-labelledby":m.titleId,"aria-describedby":k,unmount:I},E=!gj(),N=Ur.None;return V&&!s&&(N|=Ur.RestoreFocus,N|=Ur.TabLock,g&&(N|=Ur.AutoFocus),E&&(N|=Ur.InitialFocus)),U.createElement(YS,null,U.createElement(Tb,{force:!0},U.createElement(LS,null,U.createElement(Oh.Provider,{value:H},U.createElement(TS,{target:h},U.createElement(Tb,{force:!1},U.createElement(x,{slot:M},U.createElement(G,null,U.createElement(dj,{initialFocus:i,initialFocusFallback:h,containers:W,features:N},U.createElement(IS,{value:b},rt({ourProps:T,theirProps:d,slot:M,defaultTag:Vj,features:Wj,visible:A===0,name:"Dialog"})))))))))))}),Vj="div",Wj=dr.RenderStrategy|dr.Static;function Rj(e,t){let{transition:n=!1,open:l,...r}=e,o=Ji(),i=e.hasOwnProperty("open")||o!==null,a=e.hasOwnProperty("onClose");if(!i&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!i)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(l!==void 0||n)&&!r.static?U.createElement(Vc,null,U.createElement(ln,{show:l,transition:n,unmount:r.unmount},U.createElement(Lb,{ref:t,...r}))):U.createElement(Vc,null,U.createElement(Lb,{ref:t,open:l,...r}))}let wj="div";function kj(e,t){let n=v.useId(),{id:l=`headlessui-dialog-panel-${n}`,transition:r=!1,...o}=e,[{dialogState:i,unmount:a},g]=JI("Dialog.Panel"),s=gt(t,g.panelRef),I=v.useMemo(()=>({open:i===0}),[i]),d=ue(C=>{C.stopPropagation()}),u={ref:s,id:l,onClick:d};return U.createElement(r?Ph:v.Fragment,{...r?{unmount:a}:{}},rt({ourProps:u,theirProps:o,slot:I,defaultTag:wj,name:"Dialog.Panel"}))}let Xj="div";function xj(e,t){let{transition:n=!1,...l}=e,[{dialogState:r,unmount:o}]=JI("Dialog.Backdrop"),i=v.useMemo(()=>({open:r===0}),[r]),a={ref:t,"aria-hidden":!0};return U.createElement(n?Ph:v.Fragment,{...n?{unmount:o}:{}},rt({ourProps:a,theirProps:l,slot:i,defaultTag:Xj,name:"Dialog.Backdrop"}))}let Jj="h2";function Nj(e,t){let n=v.useId(),{id:l=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:o,setTitleId:i}]=JI("Dialog.Title"),a=gt(t);v.useEffect(()=>(i(l),()=>i(null)),[l,i]);let g=v.useMemo(()=>({open:o===0}),[o]);return rt({ourProps:{ref:a,id:l},theirProps:r,slot:g,defaultTag:Jj,name:"Dialog.Title"})}let Yj=Le(Rj),$S=Le(kj),Hj=Le(xj),Fj=Le(Nj),rn=Object.assign(Yj,{Panel:$S,Title:Fj,Description:aS});var Kj=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Kj||{}),Ej=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Ej||{});let Mj={0:e=>({...e,popoverState:wt(e.popoverState,{0:1,1:0}),__demoMode:!1}),1(e){return e.popoverState===1?e:{...e,popoverState:1,__demoMode:!1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},_h=v.createContext(null);_h.displayName="PopoverContext";function NI(e){let t=v.useContext(_h);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,NI),n}return t}let YI=v.createContext(null);YI.displayName="PopoverAPIContext";function qh(e){let t=v.useContext(YI);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,qh),n}return t}let $h=v.createContext(null);$h.displayName="PopoverGroupContext";function eV(){return v.useContext($h)}let HI=v.createContext(null);HI.displayName="PopoverPanelContext";function Tj(){return v.useContext(HI)}function Lj(e,t){return wt(t.type,Mj,e,t)}let zj="div";function jj(e,t){var n;let{__demoMode:l=!1,...r}=e,o=v.useRef(null),i=gt(t,oS(E=>{o.current=E})),a=v.useRef([]),g=v.useReducer(Lj,{__demoMode:l,popoverState:l?0:1,buttons:a,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:v.createRef(),afterPanelSentinel:v.createRef(),afterButtonSentinel:v.createRef()}),[{popoverState:s,button:I,buttonId:d,panel:u,panelId:C,beforePanelSentinel:h,afterPanelSentinel:f,afterButtonSentinel:y},A]=g,m=Rr((n=o.current)!=null?n:I),p=v.useMemo(()=>{if(!I||!u)return!1;for(let z of document.querySelectorAll("body > *"))if(Number(z==null?void 0:z.contains(I))^Number(z==null?void 0:z.contains(u)))return!0;let E=SI(),N=E.indexOf(I),J=(N+E.length-1)%E.length,X=(N+1)%E.length,Y=E[J],F=E[X];return!u.contains(Y)&&!u.contains(F)},[I,u]),b=En(d),Z=En(C),V=v.useMemo(()=>({buttonId:b,panelId:Z,close:()=>A({type:1})}),[b,Z,A]),S=eV(),G=S==null?void 0:S.registerPopover,w=ue(()=>{var E;return(E=S==null?void 0:S.isFocusWithinPopoverGroup())!=null?E:(m==null?void 0:m.activeElement)&&((I==null?void 0:I.contains(m.activeElement))||(u==null?void 0:u.contains(m.activeElement)))});v.useEffect(()=>G==null?void 0:G(V),[G,V]);let[B,W]=MS(),R=Uh(I),k=zS({mainTreeNode:R,portals:B,defaultContainers:[I,u]});Fh(m==null?void 0:m.defaultView,"focus",E=>{var N,J,X,Y,F,z;E.target!==window&&E.target instanceof HTMLElement&&s===0&&(w()||I&&u&&(k.contains(E.target)||(J=(N=h.current)==null?void 0:N.contains)!=null&&J.call(N,E.target)||(Y=(X=f.current)==null?void 0:X.contains)!=null&&Y.call(X,E.target)||(z=(F=y.current)==null?void 0:F.contains)!=null&&z.call(F,E.target)||A({type:1})))},!0),fS(s===0,k.resolveContainers,(E,N)=>{A({type:1}),CS(N,Hh.Loose)||(E.preventDefault(),I==null||I.focus())});let x=ue(E=>{A({type:1});let N=(()=>E?E instanceof HTMLElement?E:"current"in E&&E.current instanceof HTMLElement?E.current:I:I)();N==null||N.focus()}),H=v.useMemo(()=>({close:x,isPortalled:p}),[x,p]),M=v.useMemo(()=>({open:s===0,close:x}),[s,x]),T={ref:i};return U.createElement(Vc,{node:R},U.createElement(Pz,null,U.createElement(HI.Provider,{value:null},U.createElement(_h.Provider,{value:g},U.createElement(YI.Provider,{value:H},U.createElement(IS,{value:x},U.createElement(NS,{value:wt(s,{0:ft.Open,1:ft.Closed})},U.createElement(W,null,rt({ourProps:T,theirProps:r,slot:M,defaultTag:zj,name:"Popover"})))))))))}let Uj="button";function Dj(e,t){let n=v.useId(),{id:l=`headlessui-popover-button-${n}`,disabled:r=!1,autoFocus:o=!1,...i}=e,[a,g]=NI("Popover.Button"),{isPortalled:s}=qh("Popover.Button"),I=v.useRef(null),d=`headlessui-focus-sentinel-${v.useId()}`,u=eV(),C=u==null?void 0:u.closeOthers,h=Tj()!==null;v.useEffect(()=>{if(!h)return g({type:3,buttonId:l}),()=>{g({type:3,buttonId:null})}},[h,l,g]);let[f]=v.useState(()=>Symbol()),y=gt(I,t,Uz(),h?null:N=>{if(N)a.buttons.current.push(f);else{let J=a.buttons.current.indexOf(f);J!==-1&&a.buttons.current.splice(J,1)}a.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),N&&g({type:2,button:N})}),A=gt(I,t),m=Rr(I),p=ue(N=>{var J,X,Y;if(h){if(a.popoverState===1)return;switch(N.key){case Nt.Space:case Nt.Enter:N.preventDefault(),(X=(J=N.target).click)==null||X.call(J),g({type:1}),(Y=a.button)==null||Y.focus();break}}else switch(N.key){case Nt.Space:case Nt.Enter:N.preventDefault(),N.stopPropagation(),a.popoverState===1&&(C==null||C(a.buttonId)),g({type:0});break;case Nt.Escape:if(a.popoverState!==0)return C==null?void 0:C(a.buttonId);if(!I.current||m!=null&&m.activeElement&&!I.current.contains(m.activeElement))return;N.preventDefault(),N.stopPropagation(),g({type:1});break}}),b=ue(N=>{h||N.key===Nt.Space&&N.preventDefault()}),Z=ue(N=>{var J,X;vI(N.currentTarget)||r||(h?(g({type:1}),(J=a.button)==null||J.focus()):(N.preventDefault(),N.stopPropagation(),a.popoverState===1&&(C==null||C(a.buttonId)),g({type:0}),(X=a.button)==null||X.focus()))}),V=ue(N=>{N.preventDefault(),N.stopPropagation()}),{isFocusVisible:S,focusProps:G}=Jh({autoFocus:o}),{isHovered:w,hoverProps:B}=xh({isDisabled:r}),{pressed:W,pressProps:R}=z4({disabled:r}),k=a.popoverState===0,x=v.useMemo(()=>({open:k,active:W||k,disabled:r,hover:w,focus:S,autofocus:o}),[k,w,S,W,r,o]),H=RL(e,I),M=Ma(h?{ref:A,type:H,onKeyDown:p,onClick:Z,disabled:r||void 0,autoFocus:o}:{ref:y,id:a.buttonId,type:H,"aria-expanded":a.popoverState===0,"aria-controls":a.panel?a.panelId:void 0,disabled:r||void 0,autoFocus:o,onKeyDown:p,onKeyUp:b,onClick:Z,onMouseDown:V},G,B,R),T=Qh(),E=ue(()=>{let N=a.panel;if(!N)return;function J(){wt(T.current,{[en.Forwards]:()=>Lt(N,lt.First),[en.Backwards]:()=>Lt(N,lt.Last)})===Cr.Error&&Lt(SI().filter(X=>X.dataset.headlessuiFocusGuard!=="true"),wt(T.current,{[en.Forwards]:lt.Next,[en.Backwards]:lt.Previous}),{relativeTo:a.button})}J()});return U.createElement(U.Fragment,null,rt({ourProps:M,theirProps:i,slot:x,defaultTag:Uj,name:"Popover.Button"}),k&&!h&&s&&U.createElement(ur,{id:d,ref:a.afterButtonSentinel,features:Sl.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:E}))}let Qj="div",Pj=dr.RenderStrategy|dr.Static;function tV(e,t){let n=v.useId(),{id:l=`headlessui-popover-backdrop-${n}`,transition:r=!1,...o}=e,[{popoverState:i},a]=NI("Popover.Backdrop"),g=v.useRef(null),s=gt(t,g),I=Ji(),[d,u]=Eh(r,g,I!==null?(I&ft.Open)===ft.Open:i===0),C=ue(y=>{if(vI(y.currentTarget))return y.preventDefault();a({type:1})}),h=v.useMemo(()=>({open:i===0}),[i]),f={ref:s,id:l,"aria-hidden":!0,onClick:C,...Kh(u)};return rt({ourProps:f,theirProps:o,slot:h,defaultTag:Qj,features:Pj,visible:d,name:"Popover.Backdrop"})}let Oj="div",_j=dr.RenderStrategy|dr.Static;function qj(e,t){let n=v.useId(),{id:l=`headlessui-popover-panel-${n}`,focus:r=!1,anchor:o,portal:i=!1,modal:a=!1,transition:g=!1,...s}=e,[I,d]=NI("Popover.Panel"),{close:u,isPortalled:C}=qh("Popover.Panel"),h=`headlessui-focus-sentinel-before-${n}`,f=`headlessui-focus-sentinel-after-${n}`,y=v.useRef(null),A=jz(o),[m,p]=Qz(A),b=Dz();A&&(i=!0);let Z=gt(y,t,A?m:null,E=>{d({type:4,panel:E})}),V=Rr(y),S=U4();He(()=>(d({type:5,panelId:l}),()=>{d({type:5,panelId:null})}),[l,d]);let G=Ji(),[w,B]=Eh(g,y,G!==null?(G&ft.Open)===ft.Open:I.popoverState===0);Yh(w,I.button,()=>{d({type:1})});let W=I.__demoMode?!1:a&&w;pS(W,V);let R=ue(E=>{var N;switch(E.key){case Nt.Escape:if(I.popoverState!==0||!y.current||V!=null&&V.activeElement&&!y.current.contains(V.activeElement))return;E.preventDefault(),E.stopPropagation(),d({type:1}),(N=I.button)==null||N.focus();break}});v.useEffect(()=>{var E;e.static||I.popoverState===1&&((E=e.unmount)==null||E)&&d({type:4,panel:null})},[I.popoverState,e.unmount,e.static,d]),v.useEffect(()=>{if(I.__demoMode||!r||I.popoverState!==0||!y.current)return;let E=V==null?void 0:V.activeElement;y.current.contains(E)||Lt(y.current,lt.First)},[I.__demoMode,r,y.current,I.popoverState]);let k=v.useMemo(()=>({open:I.popoverState===0,close:u}),[I.popoverState,u]),x=Ma(A?b():{},{ref:Z,id:l,onKeyDown:R,onBlur:r&&I.popoverState===0?E=>{var N,J,X,Y,F;let z=E.relatedTarget;z&&y.current&&((N=y.current)!=null&&N.contains(z)||(d({type:1}),((X=(J=I.beforePanelSentinel.current)==null?void 0:J.contains)!=null&&X.call(J,z)||(F=(Y=I.afterPanelSentinel.current)==null?void 0:Y.contains)!=null&&F.call(Y,z))&&z.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...s.style,...p,"--button-width":hL(I.button,!0).width},...Kh(B)}),H=Qh(),M=ue(()=>{let E=y.current;if(!E)return;function N(){wt(H.current,{[en.Forwards]:()=>{var J;Lt(E,lt.First)===Cr.Error&&((J=I.afterPanelSentinel.current)==null||J.focus())},[en.Backwards]:()=>{var J;(J=I.button)==null||J.focus({preventScroll:!0})}})}N()}),T=ue(()=>{let E=y.current;if(!E)return;function N(){wt(H.current,{[en.Forwards]:()=>{var J;if(!I.button)return;let X=SI(),Y=X.indexOf(I.button),F=X.slice(0,Y+1),z=[...X.slice(Y+1),...F];for(let L of z.slice())if(L.dataset.headlessuiFocusGuard==="true"||(J=I.panel)!=null&&J.contains(L)){let K=z.indexOf(L);K!==-1&&z.splice(K,1)}Lt(z,lt.First,{sorted:!1})},[en.Backwards]:()=>{var J;Lt(E,lt.Previous)===Cr.Error&&((J=I.button)==null||J.focus())}})}N()});return U.createElement(YS,null,U.createElement(HI.Provider,{value:l},U.createElement(YI.Provider,{value:{close:u,isPortalled:C}},U.createElement(LS,{enabled:i?e.static||w:!1},w&&C&&U.createElement(ur,{id:h,ref:I.beforePanelSentinel,features:Sl.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:M}),rt({mergeRefs:S,ourProps:x,theirProps:s,slot:k,defaultTag:Oj,features:_j,visible:w,name:"Popover.Panel"}),w&&C&&U.createElement(ur,{id:f,ref:I.afterPanelSentinel,features:Sl.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:T})))))}let $j="div";function eU(e,t){let n=v.useRef(null),l=gt(n,t),[r,o]=v.useState([]),i=ue(h=>{o(f=>{let y=f.indexOf(h);if(y!==-1){let A=f.slice();return A.splice(y,1),A}return f})}),a=ue(h=>(o(f=>[...f,h]),()=>i(h))),g=ue(()=>{var h;let f=fo(n);if(!f)return!1;let y=f.activeElement;return(h=n.current)!=null&&h.contains(y)?!0:r.some(A=>{var m,p;return((m=f.getElementById(A.buttonId.current))==null?void 0:m.contains(y))||((p=f.getElementById(A.panelId.current))==null?void 0:p.contains(y))})}),s=ue(h=>{for(let f of r)f.buttonId.current!==h&&f.close()}),I=v.useMemo(()=>({registerPopover:a,unregisterPopover:i,isFocusWithinPopoverGroup:g,closeOthers:s}),[a,i,g,s]),d=v.useMemo(()=>({}),[]),u=e,C={ref:l};return U.createElement(Vc,null,U.createElement($h.Provider,{value:I},rt({ourProps:C,theirProps:u,slot:d,defaultTag:$j,name:"Popover.Group"})))}let tU=Le(jj),nV=Le(Dj),lV=Le(tV),nU=Le(tV),rV=Le(qj),lU=Le(eU),rU=Object.assign(tU,{Button:nV,Backdrop:nU,Overlay:lV,Panel:rV,Group:lU});var oU=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(oU||{});let iU={0(e,t){let n=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:AS(n,l=>l.element.current)}},1(e,t){let n=e.options.slice(),l=e.options.findIndex(r=>r.id===t.id);return l===-1?e:(n.splice(l,1),{...e,options:n})}},ef=v.createContext(null);ef.displayName="RadioGroupDataContext";function tf(e){let t=v.useContext(ef);if(t===null){let n=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,tf),n}return t}let nf=v.createContext(null);nf.displayName="RadioGroupActionsContext";function lf(e){let t=v.useContext(nf);if(t===null){let n=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,lf),n}return t}function aU(e,t){return wt(t.type,iU,e,t)}let gU="div";function sU(e,t){let n=v.useId(),l=ZI(),{id:r=`headlessui-radiogroup-${n}`,value:o,form:i,name:a,onChange:g,by:s,disabled:I=l||!1,defaultValue:d,...u}=e,C=AL(s),[h,f]=v.useReducer(aU,{options:[]}),y=h.options,[A,m]=cS(),[p,b]=Nh(),Z=v.useRef(null),V=gt(Z,t),S=P4(d),[G,w]=Q4(o,g,S),B=v.useMemo(()=>y.find(J=>!J.propsRef.current.disabled),[y]),W=v.useMemo(()=>y.some(J=>C(J.propsRef.current.value,G)),[y,G]),R=ue(J=>{var X;if(I||C(J,G))return!1;let Y=(X=y.find(F=>C(F.propsRef.current.value,J)))==null?void 0:X.propsRef.current;return Y!=null&&Y.disabled?!1:(w==null||w(J),!0)}),k=ue(J=>{let X=Z.current;if(!X)return;let Y=fo(X),F=y.filter(z=>z.propsRef.current.disabled===!1).map(z=>z.element.current);switch(J.key){case Nt.Enter:O4(J.currentTarget);break;case Nt.ArrowLeft:case Nt.ArrowUp:if(J.preventDefault(),J.stopPropagation(),Lt(F,lt.Previous|lt.WrapAround)===Cr.Success){let z=y.find(L=>L.element.current===(Y==null?void 0:Y.activeElement));z&&R(z.propsRef.current.value)}break;case Nt.ArrowRight:case Nt.ArrowDown:if(J.preventDefault(),J.stopPropagation(),Lt(F,lt.Next|lt.WrapAround)===Cr.Success){let z=y.find(L=>L.element.current===(Y==null?void 0:Y.activeElement));z&&R(z.propsRef.current.value)}break;case Nt.Space:{J.preventDefault(),J.stopPropagation();let z=y.find(L=>L.element.current===(Y==null?void 0:Y.activeElement));z&&R(z.propsRef.current.value)}break}}),x=ue(J=>(f({type:0,...J}),()=>f({type:1,id:J.id}))),H=v.useMemo(()=>({value:G,firstOption:B,containsCheckedOption:W,disabled:I,compare:C,...h}),[G,B,W,I,C,h]),M=v.useMemo(()=>({registerOption:x,change:R}),[x,R]),T={ref:V,id:r,role:"radiogroup","aria-labelledby":A,"aria-describedby":p,onKeyDown:k},E=v.useMemo(()=>({value:G}),[G]),N=v.useCallback(()=>{if(S!==void 0)return R(S)},[R,S]);return U.createElement(b,{name:"RadioGroup.Description"},U.createElement(m,{name:"RadioGroup.Label"},U.createElement(nf.Provider,{value:M},U.createElement(ef.Provider,{value:H},a!=null&&U.createElement(tL,{disabled:I,data:{[a]:G||"on"},overrides:{type:"radio",checked:G!=null},form:i,onReset:N}),rt({ourProps:T,theirProps:u,slot:E,defaultTag:gU,name:"RadioGroup"})))))}let cU="div";function IU(e,t){var n;let l=tf("RadioGroup.Option"),r=lf("RadioGroup.Option"),o=v.useId(),{id:i=`headlessui-radiogroup-option-${o}`,value:a,disabled:g=l.disabled||!1,autoFocus:s=!1,...I}=e,d=v.useRef(null),u=gt(d,t),[C,h]=cS(),[f,y]=Nh(),A=En({value:a,disabled:g});He(()=>r.registerOption({id:i,element:d,propsRef:A}),[i,r,d,A]);let m=ue(W=>{var R;if(vI(W.currentTarget))return W.preventDefault();r.change(a)&&((R=d.current)==null||R.focus())}),p=((n=l.firstOption)==null?void 0:n.id)===i,{isFocusVisible:b,focusProps:Z}=Jh({autoFocus:s}),{isHovered:V,hoverProps:S}=xh({isDisabled:g}),G=l.compare(l.value,a),w=Ma({ref:u,id:i,role:"radio","aria-checked":G?"true":"false","aria-labelledby":C,"aria-describedby":f,"aria-disabled":g?!0:void 0,tabIndex:(()=>g?-1:G||!l.containsCheckedOption&&p?0:-1)(),onClick:g?void 0:m,autoFocus:s},Z,S),B=v.useMemo(()=>({checked:G,disabled:g,active:b,hover:V,focus:b,autofocus:s}),[G,g,V,b,s]);return U.createElement(y,{name:"RadioGroup.Description"},U.createElement(h,{name:"RadioGroup.Label"},rt({ourProps:w,theirProps:I,slot:B,defaultTag:cU,name:"RadioGroup.Option"})))}let dU="span";function uU(e,t){var n;let l=tf("Radio"),r=lf("Radio"),o=v.useId(),i=lS(),a=ZI(),{id:g=i||`headlessui-radio-${o}`,value:s,disabled:I=l.disabled||a||!1,autoFocus:d=!1,...u}=e,C=v.useRef(null),h=gt(C,t),f=sS(),y=oL(),A=En({value:s,disabled:I});He(()=>r.registerOption({id:g,element:C,propsRef:A}),[g,r,C,A]);let m=ue(W=>{var R;if(vI(W.currentTarget))return W.preventDefault();r.change(s)&&((R=C.current)==null||R.focus())}),{isFocusVisible:p,focusProps:b}=Jh({autoFocus:d}),{isHovered:Z,hoverProps:V}=xh({isDisabled:I}),S=((n=l.firstOption)==null?void 0:n.id)===g,G=l.compare(l.value,s),w=Ma({ref:h,id:g,role:"radio","aria-checked":G?"true":"false","aria-labelledby":f,"aria-describedby":y,"aria-disabled":I?!0:void 0,tabIndex:(()=>I?-1:G||!l.containsCheckedOption&&S?0:-1)(),autoFocus:d,onClick:I?void 0:m},b,V),B=v.useMemo(()=>({checked:G,disabled:I,hover:Z,focus:p,autofocus:d}),[G,I,Z,p,d]);return rt({ourProps:w,theirProps:u,slot:B,defaultTag:dU,name:"Radio"})}let CU=Le(sU),AU=Le(IU),oV=Le(uU),mU=dL,hU=aS,fU=Object.assign(CU,{Option:AU,Radio:oV,Label:mU,Description:hU});const pU=({schedule:e})=>{const[t,n]=v.useState(!1);return c.jsxs("div",{className:"schedule",children:[c.jsxs("div",{className:"schedules_info_title",onClick:()=>{n(!t)},children:["Horario disponible",t?c.jsx(Ux,{className:"foldable_icon"}):c.jsx(zx,{className:"foldable_icon"})]}),c.jsx("div",{className:`schedules_foldable ${t?"schedules_foldable_active":""}`,children:Object.values(e).map((l,r)=>c.jsx("div",{children:c.jsxs("div",{className:"schedules_info_schedule",children:[c.jsx("label",{style:{textDecoration:l.status_schedule_day?"":"Line-through"},children:l.day}),c.jsxs("label",{className:"schedules_info_time flex",children:[c.jsx("div",{className:"mt-1 flex items-center gap-x-1.5 mr-2",children:c.jsx("div",{className:"flex-none rounded-full bg-emerald-500/20 p-1",children:c.jsx("div",{className:l.status_schedule_day?"h-1.5 w-1.5 rounded-full bg-emerald-500":"h-1.5 w-1.5 rounded-full bg-red-500"})})}),l.status_schedule_day?`${l.start_time} - ${l.end_time}`:"No disponible"]})]})},r))})]})};function bU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M7.5 5.25a3 3 0 0 1 3-3h3a3 3 0 0 1 3 3v.205c.933.085 1.857.197 2.774.334 1.454.218 2.476 1.483 2.476 2.917v3.033c0 1.211-.734 2.352-1.936 2.752A24.726 24.726 0 0 1 12 15.75c-2.73 0-5.357-.442-7.814-1.259-1.202-.4-1.936-1.541-1.936-2.752V8.706c0-1.434 1.022-2.7 2.476-2.917A48.814 48.814 0 0 1 7.5 5.455V5.25Zm7.5 0v.09a49.488 49.488 0 0 0-6 0v-.09a1.5 1.5 0 0 1 1.5-1.5h3a1.5 1.5 0 0 1 1.5 1.5Zm-3 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}),v.createElement("path",{d:"M3 18.4v-2.796a4.3 4.3 0 0 0 .713.31A26.226 26.226 0 0 0 12 17.25c2.892 0 5.68-.468 8.287-1.335.252-.084.49-.189.713-.311V18.4c0 1.452-1.047 2.728-2.523 2.923-2.12.282-4.282.427-6.477.427a49.19 49.19 0 0 1-6.477-.427C4.047 21.128 3 19.852 3 18.4Z"}))}const yU=v.forwardRef(bU),ZU=yU;function vU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M4.5 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5h-.75V3.75a.75.75 0 0 0 0-1.5h-15ZM9 6a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm-.75 3.75A.75.75 0 0 1 9 9h1.5a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM9 12a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm3.75-5.25A.75.75 0 0 1 13.5 6H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM13.5 9a.75.75 0 0 0 0 1.5H15A.75.75 0 0 0 15 9h-1.5Zm-.75 3.75a.75.75 0 0 1 .75-.75H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM9 19.5v-2.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 9 19.5Z",clipRule:"evenodd"}))}const GU=v.forwardRef(vU),rf=GU;function BU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))}const SU=v.forwardRef(BU),VU=SU;function WU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),v.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const RU=v.forwardRef(WU),wU=RU;function kU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),v.createElement("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"}))}const XU=v.forwardRef(kU),gg=XU;function xU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const JU=v.forwardRef(xU),NU=JU;function YU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{d:"M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"}))}const HU=v.forwardRef(YU),FI=HU;function FU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{d:"M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z"}),v.createElement("path",{fillRule:"evenodd",d:"M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z",clipRule:"evenodd"}))}const KU=v.forwardRef(FU),EU=KU;function MU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"}))}const TU=v.forwardRef(MU),LU=TU;function zU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const jU=v.forwardRef(zU),UU=jU;function DU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z",clipRule:"evenodd"}))}const QU=v.forwardRef(DU),Wc=QU;function PU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 9.375v-4.5ZM4.875 4.5a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 0 1-1.875-1.875v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75A.75.75 0 0 1 6 7.5v-.75Zm9.75 0A.75.75 0 0 1 16.5 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 19.125v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875-.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM6 16.5a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm9.75 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm-3 3a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Z",clipRule:"evenodd"}))}const OU=v.forwardRef(PU),_U=OU;function qU({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 0 1 .75.75c0 5.056-2.383 9.555-6.084 12.436A6.75 6.75 0 0 1 9.75 22.5a.75.75 0 0 1-.75-.75v-4.131A15.838 15.838 0 0 1 6.382 15H2.25a.75.75 0 0 1-.75-.75 6.75 6.75 0 0 1 7.815-6.666ZM15 6.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"}),v.createElement("path",{d:"M5.26 17.242a.75.75 0 1 0-.897-1.203 5.243 5.243 0 0 0-2.05 5.022.75.75 0 0 0 .625.627 5.243 5.243 0 0 0 5.022-2.051.75.75 0 1 0-1.202-.897 3.744 3.744 0 0 1-3.008 1.51c0-1.23.592-2.323 1.51-3.008Z"}))}const $U=v.forwardRef(qU),eD=$U;function tD({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}const nD=v.forwardRef(tD),iV=nD;function lD({title:e,titleId:t,...n},l){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const rD=v.forwardRef(lD),zb=rD,oD={},iD=Object.freeze(Object.defineProperty({__proto__:null,default:oD},Symbol.toStringTag,{value:"Module"})),du=aR(iD);var uu={exports:{}},jb;function Ub(){return jb||(jb=1,function(){var t="3";function n(a){return a?(typeof a!="string"&&(a=""+a),a.replace(/\n/g,"\\n").replace(/,/g,"\\,").replace(/;/g,"\\;")):""}function l(){return`\r
`}function r(a,g,s,I){var d;t>=4?d=I?";ENCODING=b;MEDIATYPE=image/":";MEDIATYPE=image/":t===3?d=I?";ENCODING=b;TYPE=":";TYPE=":d=I?";ENCODING=BASE64;":";";var u=a+d+s+":"+n(g)+l();return u}function o(a,g){var s="";return(g.details.label||g.details.street||g.details.city||g.details.stateProvince||g.details.postalCode||g.details.countryRegion)&&(t>=4?s="ADR"+a+";TYPE="+g.type+(g.details.label?';LABEL="'+n(g.details.label)+'"':"")+":;;"+n(g.details.street)+";"+n(g.details.city)+";"+n(g.details.stateProvince)+";"+n(g.details.postalCode)+";"+n(g.details.countryRegion)+l():(g.details.label&&(s="LABEL"+a+";TYPE="+g.type+":"+n(g.details.label)+l()),s+="ADR"+a+";TYPE="+g.type+":;;"+n(g.details.street)+";"+n(g.details.city)+";"+n(g.details.stateProvince)+";"+n(g.details.postalCode)+";"+n(g.details.countryRegion)+l())),s}function i(a){return a.getFullYear()+("0"+(a.getMonth()+1)).slice(-2)+("0"+a.getDate()).slice(-2)}uu.exports={getFormattedString:function(a){t=a.getMajorVersion();var g="";g+="BEGIN:VCARD"+l(),g+="VERSION:"+a.version+l();var s=t>=4?"":";CHARSET=UTF-8",I=a.formattedName;if(I||(I="",[a.firstName,a.middleName,a.lastName].forEach(function(u){u&&I&&(I+=" "),I+=u})),g+="FN"+s+":"+n(I)+l(),g+="N"+s+":"+n(a.lastName)+";"+n(a.firstName)+";"+n(a.middleName)+";"+n(a.namePrefix)+";"+n(a.nameSuffix)+l(),a.nickname&&t>=3&&(g+="NICKNAME"+s+":"+n(a.nickname)+l()),a.gender&&(g+="GENDER:"+n(a.gender)+l()),a.uid&&(g+="UID"+s+":"+n(a.uid)+l()),a.birthday&&(g+="BDAY:"+i(a.birthday)+l()),a.anniversary&&(g+="ANNIVERSARY:"+i(a.anniversary)+l()),a.email&&(Array.isArray(a.email)||(a.email=[a.email]),a.email.forEach(function(u){t>=4?g+="EMAIL"+s+";type=HOME:"+n(u)+l():t>=3&&t<4?g+="EMAIL"+s+";type=HOME,INTERNET:"+n(u)+l():g+="EMAIL"+s+";HOME;INTERNET:"+n(u)+l()})),a.workEmail&&(Array.isArray(a.workEmail)||(a.workEmail=[a.workEmail]),a.workEmail.forEach(function(u){t>=4?g+="EMAIL"+s+";type=WORK:"+n(u)+l():t>=3&&t<4?g+="EMAIL"+s+";type=WORK,INTERNET:"+n(u)+l():g+="EMAIL"+s+";WORK;INTERNET:"+n(u)+l()})),a.otherEmail&&(Array.isArray(a.otherEmail)||(a.otherEmail=[a.otherEmail]),a.otherEmail.forEach(function(u){t>=4?g+="EMAIL"+s+";type=OTHER:"+n(u)+l():t>=3&&t<4?g+="EMAIL"+s+";type=OTHER,INTERNET:"+n(u)+l():g+="EMAIL"+s+";OTHER;INTERNET:"+n(u)+l()})),a.logo.url&&(g+=r("LOGO",a.logo.url,a.logo.mediaType,a.logo.base64)),a.photo.url&&(g+=r("PHOTO",a.photo.url,a.photo.mediaType,a.photo.base64)),a.cellPhone&&(Array.isArray(a.cellPhone)||(a.cellPhone=[a.cellPhone]),a.cellPhone.forEach(function(u){t>=4?g+='TEL;VALUE=uri;TYPE="voice,cell":tel:'+n(u)+l():g+="TEL;TYPE=CELL:"+n(u)+l()})),a.pagerPhone&&(Array.isArray(a.pagerPhone)||(a.pagerPhone=[a.pagerPhone]),a.pagerPhone.forEach(function(u){t>=4?g+='TEL;VALUE=uri;TYPE="pager,cell":tel:'+n(u)+l():g+="TEL;TYPE=PAGER:"+n(u)+l()})),a.homePhone&&(Array.isArray(a.homePhone)||(a.homePhone=[a.homePhone]),a.homePhone.forEach(function(u){t>=4?g+='TEL;VALUE=uri;TYPE="voice,home":tel:'+n(u)+l():g+="TEL;TYPE=HOME,VOICE:"+n(u)+l()})),a.workPhone&&(Array.isArray(a.workPhone)||(a.workPhone=[a.workPhone]),a.workPhone.forEach(function(u){t>=4?g+='TEL;VALUE=uri;TYPE="voice,work":tel:'+n(u)+l():g+="TEL;TYPE=WORK,VOICE:"+n(u)+l()})),a.homeFax&&(Array.isArray(a.homeFax)||(a.homeFax=[a.homeFax]),a.homeFax.forEach(function(u){t>=4?g+='TEL;VALUE=uri;TYPE="fax,home":tel:'+n(u)+l():g+="TEL;TYPE=HOME,FAX:"+n(u)+l()})),a.workFax&&(Array.isArray(a.workFax)||(a.workFax=[a.workFax]),a.workFax.forEach(function(u){t>=4?g+='TEL;VALUE=uri;TYPE="fax,work":tel:'+n(u)+l():g+="TEL;TYPE=WORK,FAX:"+n(u)+l()})),a.otherPhone&&(Array.isArray(a.otherPhone)||(a.otherPhone=[a.otherPhone]),a.otherPhone.forEach(function(u){t>=4?g+='TEL;VALUE=uri;TYPE="voice,other":tel:'+n(u)+l():g+="TEL;TYPE=OTHER:"+n(u)+l()})),[{details:a.homeAddress,type:"HOME"},{details:a.workAddress,type:"WORK"}].forEach(function(u){g+=o(s,u)}),a.title&&(g+="TITLE"+s+":"+n(a.title)+l()),a.role&&(g+="ROLE"+s+":"+n(a.role)+l()),a.organization&&(g+="ORG"+s+":"+n(a.organization)+l()),a.url&&(g+="URL"+s+":"+n(a.url)+l()),a.workUrl&&(g+="URL;type=WORK"+s+":"+n(a.workUrl)+l()),a.note&&(g+="NOTE"+s+":"+n(a.note)+l()),a.socialUrls)for(var d in a.socialUrls)a.socialUrls.hasOwnProperty(d)&&a.socialUrls[d]&&(g+="X-SOCIALPROFILE"+s+";TYPE="+d+":"+n(a.socialUrls[d])+l());return a.source&&(g+="SOURCE"+s+":"+n(a.source)+l()),g+="REV:"+new Date().toISOString()+l(),a.isOrganization&&(g+="X-ABShowAs:COMPANY"+l()),g+="END:VCARD"+l(),g}}}()),uu.exports}var aD=function(){function e(){return{url:"",mediaType:"",base64:!1,attachFromUrl:function(l,r){this.url=l,this.mediaType=r,this.base64=!1},embedFromFile:function(l){var r=du,o=du;this.mediaType=o.extname(l).toUpperCase().replace(/\./g,"");var i=r.readFileSync(l);this.url=i.toString("base64"),this.base64=!0},embedFromString:function(l,r){this.mediaType=r,this.url=l,this.base64=!0}}}function t(){return{label:"",street:"",city:"",stateProvince:"",postalCode:"",countryRegion:""}}function n(){return{facebook:"",linkedIn:"",twitter:"",flickr:""}}return{uid:"",birthday:"",cellPhone:"",pagerPhone:"",email:"",workEmail:"",firstName:"",formattedName:"",gender:"",homeAddress:t(),homePhone:"",homeFax:"",lastName:"",logo:e(),middleName:"",namePrefix:"",nameSuffix:"",nickname:"",note:"",organization:"",photo:e(),role:"",socialUrls:n(),source:"",title:"",url:"",workUrl:"",workAddress:t(),workPhone:"",workFax:"",version:"3.0",getMajorVersion:function(){var l=this.version?this.version.split(".")[0]:"4";return isNaN(l)?4:parseInt(l)},getFormattedString:function(){var l=Ub();return l.getFormattedString(this)},saveToFile:function(l){var r=Ub(),o=r.getFormattedString(this),i=du;i.writeFileSync(l,o,{encoding:"utf8"})}}},gD=aD;const sD=Ln(gD),KI="/assets/contactIcon-7010a161.png",cD=e=>{const[t,n]=v.useState(!1);v.useState(!0);const{org:l}=e,r=v.useRef(null),o=()=>{n(!0),console.log(l)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"relative max-w-xl mx-auto mt-2 py-4 flex w-full flex-col lg:flex-grow rounded-lg backdrop-blur-sm bg-blue-950/10 px-4 text-white shadow-none border-4 border-white/10 hover:border-white/30 hover:cursor-pointer",onClick:o,children:[c.jsxs("div",{className:"relative flex items-center gap-4 pt-0 mx-0 overflow-hidden text-white bg-transparent shadow-none rounded-xl bg-clip-border",children:[c.jsx("div",{className:"h-[58px] w-[70px]",children:c.jsx(Ir,{name:"titulo",size:"58",src:l.logo_url??KI})}),c.jsxs("div",{className:"flex w-full flex-col gap-0.5",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("p",{className:"block font-sans text-base antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[22rem]",children:"Este usuario pertenece a"})}),c.jsx("h4",{className:"block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-orange-500 text-ellipsis overflow-hidden max-w-[22rem]",children:l.name})]})]}),c.jsx("div",{className:"flex flex-row items-end pb-2 justify-end absolute bottom-1 right-5",children:c.jsx("span",{className:"inline-flex items-center rounded-md bg-orange-50 px-2 py-1 text-xs font-medium text-orange-700 ring-1 ring-inset ring-orange-700/10 hover:text-white hover:ring-white hover:bg-orange-500",children:"Ver ms"})})]}),c.jsx(ln.Root,{show:t,as:v.Fragment,children:c.jsxs(rn,{className:"relative z-10",initialFocus:r,onClose:n,children:[c.jsx(ln.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),c.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:c.jsx("div",{className:"flex items-end justify-center p-4 text-center sm:items-center sm:p-0",children:c.jsx(ln.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:c.jsx(rn.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full max-w-lg h-xl",children:c.jsx("div",{className:"bg-white px-4 pb-4 sm:p-6 sm:pb-4",children:c.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[c.jsx(rn.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:l.name}),c.jsxs("div",{className:"bg-white rounded-lg max-w-3xl",children:[c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"sm:col-span-4",children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Industria"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:c.jsx(eD,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),c.jsx("textarea",{name:"industry",id:"industry",autoComplete:"industry",disabled:!0,value:l.industry,style:{height:"100%"},className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Telfono"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:c.jsx(Wc,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),c.jsx("a",{href:`tel:${l.phone}`,className:"block border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2 cursor-pointer break-all",children:l.phone})]})}),c.jsx("label",{htmlFor:"website",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Sitio web"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:c.jsx(FI,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),c.jsx("a",{href:l.website.includes("https://")?l.website:`https://${l.website}`,target:"_blank",rel:"noopener noreferrer",className:"block border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2 cursor-pointer break-all",children:l.website})]})}),c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Correo electrnico"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:c.jsx(gg,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),c.jsx("a",{href:`mailto:${l.email}`,className:"block border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2 cursor-pointer  break-all",children:l.email})]})})]})}),c.jsx("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:c.jsx("button",{type:"button",onClick:()=>n(!1),ref:r,className:"text-sm font-semibold  text-gray-900 p-3 hover:text-red-600",children:"Cerrar"})})]})]})})})})})})]})})]})};var zA={exports:{}},Tn={};Tn._=Tn._interop_require_default=ID;function ID(e){return e&&e.__esModule?e:{default:e}}var La={};function aV(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(aV=function(l){return l?n:t})(e)}La._=La._interop_require_wildcard=dD;function dD(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=aV(t);if(n&&n.has(e))return n.get(e);var l={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(l,o,i):l[o]=e[o]}return l.default=e,n&&n.set(e,l),l}var Cu={},Db;function uD(){return Db||(Db=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return o}});const t=v,n=typeof window>"u",l=n?()=>{}:t.useLayoutEffect,r=n?()=>{}:t.useEffect;function o(i){const{headManager:a,reduceComponentsToState:g}=i;function s(){if(a&&a.mountedInstances){const d=t.Children.toArray(Array.from(a.mountedInstances).filter(Boolean));a.updateHead(g(d,i))}}if(n){var I;a==null||(I=a.mountedInstances)==null||I.add(i.children),s()}return l(()=>{var d;return a==null||(d=a.mountedInstances)==null||d.add(i.children),()=>{var u;a==null||(u=a.mountedInstances)==null||u.delete(i.children)}}),l(()=>(a&&(a._pendingUpdate=s),()=>{a&&(a._pendingUpdate=s)})),r(()=>(a&&a._pendingUpdate&&(a._pendingUpdate(),a._pendingUpdate=null),()=>{a&&a._pendingUpdate&&(a._pendingUpdate(),a._pendingUpdate=null)})),null}}(Cu)),Cu}var Au={},Qb;function CD(){return Qb||(Qb=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AmpStateContext",{enumerable:!0,get:function(){return l}});const l=Tn._(v).default.createContext({})}(Au)),Au}var mu={},Pb;function AD(){return Pb||(Pb=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"HeadManagerContext",{enumerable:!0,get:function(){return l}});const l=Tn._(v).default.createContext({})}(mu)),mu}var hu={},Ob;function mD(){return Ob||(Ob=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isInAmpMode",{enumerable:!0,get:function(){return t}});function t(n){let{ampFirst:l=!1,hybrid:r=!1,hasQuery:o=!1}=n===void 0?{}:n;return l||r&&o}}(hu)),hu}var fu={},_b;function of(){return _b||(_b=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"warnOnce",{enumerable:!0,get:function(){return t}});let t=n=>{}}(fu)),fu}(function(e,t){"use client";Object.defineProperty(t,"__esModule",{value:!0});function n(m,p){for(var b in p)Object.defineProperty(m,b,{enumerable:!0,get:p[b]})}n(t,{default:function(){return A},defaultHead:function(){return d}});const l=Tn,r=La,o=c,i=r._(v),a=l._(uD()),g=CD(),s=AD(),I=mD();of();function d(m){m===void 0&&(m=!1);const p=[(0,o.jsx)("meta",{charSet:"utf-8"})];return m||p.push((0,o.jsx)("meta",{name:"viewport",content:"width=device-width"})),p}function u(m,p){return typeof p=="string"||typeof p=="number"?m:p.type===i.default.Fragment?m.concat(i.default.Children.toArray(p.props.children).reduce((b,Z)=>typeof Z=="string"||typeof Z=="number"?b:b.concat(Z),[])):m.concat(p)}const C=["name","httpEquiv","charSet","itemProp"];function h(){const m=new Set,p=new Set,b=new Set,Z={};return V=>{let S=!0,G=!1;if(V.key&&typeof V.key!="number"&&V.key.indexOf("$")>0){G=!0;const w=V.key.slice(V.key.indexOf("$")+1);m.has(w)?S=!1:m.add(w)}switch(V.type){case"title":case"base":p.has(V.type)?S=!1:p.add(V.type);break;case"meta":for(let w=0,B=C.length;w<B;w++){const W=C[w];if(V.props.hasOwnProperty(W))if(W==="charSet")b.has(W)?S=!1:b.add(W);else{const R=V.props[W],k=Z[W]||new Set;(W!=="name"||!G)&&k.has(R)?S=!1:(k.add(R),Z[W]=k)}}break}return S}}function f(m,p){const{inAmpMode:b}=p;return m.reduce(u,[]).reverse().concat(d(b).reverse()).filter(h()).reverse().map((Z,V)=>{const S=Z.key||V;if({}.__NEXT_OPTIMIZE_FONTS&&!b&&Z.type==="link"&&Z.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(G=>Z.props.href.startsWith(G))){const G={...Z.props||{}};return G["data-href"]=G.href,G.href=void 0,G["data-optimized-fonts"]=!0,i.default.cloneElement(Z,G)}return i.default.cloneElement(Z,{key:S})})}function y(m){let{children:p}=m;const b=(0,i.useContext)(g.AmpStateContext),Z=(0,i.useContext)(s.HeadManagerContext);return(0,o.jsx)(a.default,{reduceComponentsToState:f,headManager:Z,inAmpMode:(0,I.isInAmpMode)(b),children:p})}const A=y;(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)})(zA,zA.exports);var gV=zA.exports,hD=gV;const fD=Ln(hD),pD={Lunes:0,Martes:1,Mircoles:2,Jueves:3,Viernes:4,Sbado:5,Domingo:6};function bD(){const e=new URLSearchParams(window.location.search),t=ol(),n=e.get("username"),l=e.get("id"),[r,o]=v.useState({}),[i,a]=v.useState({}),[g,s]=v.useState({}),[I,d]=v.useState(!0);v.useState(!1);const[u,C]=v.useState(0),h=`${window.location.origin}/card?username=${i.username}&id=${i.id_user}`,[f,y]=v.useState(!1),A=v.useRef(null);v.useEffect(()=>{m()},[]);const m=async()=>{const{data:B}=await t.getUser(l),{data:W}=await t.getProfile(n),R=await t.getSocialMedia(l),{data:k}=await t.getSchedule(l),x={};Object.values(k.scheduleDays).forEach(H=>{x[pD[H.day]]=H}),C(B.user.id_plan_fk),o(R.data.social_media),a({...W}),s({...x}),d(!1)},p=async()=>{try{console.log(i),navigator.share?await navigator.share({title:"KnowMe",text:`Conecta con ${i.username} en KnowMe!`,url:h}):Ge.warning("No se puede compartir el enlace desde este dispositivo ")}catch(B){console.error("Error sharing:",B)}},b=B=>{const W=document.createElement("a"),R=new Blob([B],{type:"text/plain;charset=utf-8"});W.href=URL.createObjectURL(R),W.download="contact.vcf",document.body.appendChild(W),W.click()},Z=()=>{const B=sD();return B.firstName=i.title_profile,B.middleName="",B.lastName="",B.organization=i.ocupation_role,B.cellPhone=i.whatsapp_option,B.workPhone=i.personal_phone,B.email=i.email,B.birthday="",B.title=i.ocupation_role,B.url=h,B.note="Contacto obtenido por knowmeapp.com",B.getFormattedString()},V=B=>{window.open(B,"_blank","noreferrer")},S=()=>{window.open(i.pdf_file_url.includes("https://")?i.pdf_file_url:`https://${i.pdf_file_url}`,"_blank","noreferrer")},G=()=>{window.open(i.pdf_file_url.includes("https://")?i.secondary_pdf_file_url:`https://${i.secondary_pdf_file_url}`,"_blank","noreferrer")},w=B=>{window.open(B.includes("https://")?B:`https://${B}`,"_blank","noreferrer")};return I?c.jsx(c.Fragment,{children:c.jsx(Vr,{fullScreen:!0})}):c.jsxs("div",{className:"card-view",children:[c.jsxs(fD,{children:[c.jsx("title",{children:i.title_profile}),c.jsx("meta",{name:"description",content:i.description_profile}),c.jsx("meta",{property:"og:title",content:i.title_profile}),c.jsx("meta",{property:"og:description",content:i.description_profile}),c.jsx("meta",{property:"og:image",content:i.profile_img_url}),c.jsx("meta",{property:"og:url",content:window.location.href}),c.jsx("meta",{property:"og:type",content:"website"})]}),c.jsx(In,{position:"top-right",richColors:!0}),i.organization.id_organization&&u>=9&&c.jsx(cD,{org:i.organization}),c.jsx("div",{className:"max-w-xl m-auto pb-8 mt-2",children:c.jsx("div",{className:"border-solid border-4 border-white/10 rounded-lg pb-8",children:c.jsxs("div",{className:"flex flex-col justify-center",children:[c.jsxs("div",{className:"relative items-center gap-x-3 h-36 mb-12",children:[c.jsxs("div",{className:"m-auto w-full p-4 absolute z-10 flex justify-center items-center top-28",children:[c.jsx("div",{className:"w-0 md:w-32 h-10 mt-20"}),c.jsx(Ir,{name:i.username,size:"150",src:i.profile_img_url}),c.jsxs("div",{className:"w-40 flex mb-24 px-2 items-center justify-between",children:[c.jsx("div",{children:c.jsx(Tx,{className:"h-12 w-12 text-white cursor-pointer p-1 rounded-lg hover:bg-gray-700",onClick:()=>b(Z())},"whatsapp_3")}),c.jsx("div",{children:c.jsx(Ex,{className:"h-10 w-10 text-white cursor-pointer p-1 rounded-lg hover:bg-gray-700",onClick:p},"share")}),i.whatsapp_option!=="0"?c.jsx("div",{children:c.jsx(Mx,{className:"h-12 w-12 text-white cursor-pointer p-1 rounded-lg hover:bg-gray-700",onClick:()=>{V(`https://wa.me/${i.whatsapp_option.replace("-","")}?text=Hola%21%0AEncontr+tu+contacto+por+knowmeapp.com`)}},"whatsapp")}):c.jsx("div",{className:"h-9 w-9 text-white p-1 rounded-lg "})]},"whatsapp_2")]}),u!=6&&c.jsx("div",{className:"pt-1 pr-1 pl-1 w-full h-28 absolute top-0 left-0 z-0 overflow-hidden ",children:c.jsx("img",{src:i.custom_img_url??i.organization.cover_url??ci,alt:"imagen_portada",className:"object-scale-down rounded-lg"})})]}),c.jsxs("div",{className:"share-personal-data mt-28",children:[c.jsx("label",{className:"full-name",children:i.title_profile}),c.jsx("label",{className:"ocupation",children:i.ocupation_role}),c.jsx("label",{className:"ocupation",children:i.organization_name})]}),c.jsx(Ka.Provider,{value:{color:"#FFF"},children:c.jsx(Re,{children:c.jsx("div",{className:"social-media-icon-container",children:r==null?void 0:r.map(B=>{const W=kh(B.url)[B.name];return c.jsx("div",{className:"social-media-icon",children:W},`${B.name}_`)})})})}),c.jsx("div",{className:"share-description max-w-96 text-left md:max-w-xl ",dangerouslySetInnerHTML:{__html:i.description_profile}}),c.jsxs("div",{className:"share-general-data",children:[c.jsx("h4",{className:"title-data",children:"Informacin General"}),i.web_page_url&&c.jsxs("div",{className:"perfil-field-data",children:["Sitio web",c.jsxs("div",{className:"flex m-2",children:[c.jsx(FI,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsx("p",{onClick:()=>w(i.web_page_url),className:"telefono pb-1 cursor-pointer",children:i.web_page_url})]})]}),c.jsxs("div",{className:"perfil-field-data",children:["Correo electrnico",c.jsxs("div",{className:"flex m-2",children:[c.jsx(gg,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsx("a",{href:`mailto:${i.email}`,className:"telefono pb-1",children:i.email})]})]}),c.jsxs("div",{className:"perfil-field-data",children:["Telfono",c.jsxs("div",{className:"flex m-2",children:[c.jsx(Wc,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsx("a",{href:`tel:${i.personal_phone}`,className:"telefono pb-1",children:i.personal_phone})]})]}),i.secondary_phone&&i.secondary_phone!=""&&c.jsxs("div",{className:"perfil-field-data",children:["Telfono Secundario",c.jsxs("div",{className:"flex m-2",children:[c.jsx(Wc,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsx("a",{href:`tel:${i.secondary_phone}`,className:"telefono pb-1",children:i.secondary_phone})]})]}),c.jsx("div",{className:"perfil-field-data",children:c.jsx(pU,{schedule:g})}),c.jsx("div",{className:"w-fit m-auto",children:c.jsxs("div",{className:"flex",children:[i.pdf_file_url&&u>=9&&c.jsx("div",{className:"flex justify-center m-4",children:c.jsx("button",{onClick:S,className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",children:"Ver Brochure"})}),i.secondary_pdf_file_url&&u>=9&&c.jsx("div",{className:"flex justify-center m-4",children:c.jsx("button",{onClick:G,className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",children:"Ver Brochure"})})]})})]})]})})}),c.jsx("div",{className:"fixed bottom-0 w-full bg-blue-950 lg:px-96",children:c.jsx(dI,{})}),c.jsx(ln.Root,{show:f,as:v.Fragment,children:c.jsxs(rn,{className:"relative z-10",initialFocus:A,onClose:y,children:[c.jsx(ln.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),c.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:c.jsx("div",{className:"flex items-end justify-center p-4 text-center sm:items-center sm:p-0",children:c.jsx(ln.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:c.jsxs(rn.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full max-w-lg h-xl",children:[c.jsx("div",{className:"bg-white px-4 pb-4 sm:p-6 sm:pb-4",children:c.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[c.jsx(rn.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"Brochure"}),c.jsx("div",{className:"mt-2 w-full h-96",children:c.jsx("iframe",{src:i.pdf_file_url,className:"w-full h-full"})})]})}),c.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:c.jsx("button",{type:"button",className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",onClick:()=>y(!1),ref:A,children:"Cerrar"})})]})})})})]})})]})}const wn=({children:e})=>{const t=Sr(),[n,l]=v.useState(!0),[r,o]=v.useState(!1);v.useContext(yt),v.useEffect(()=>{i()},[]);const i=async()=>{try{(await t.renewToken()).status==200&&o(!0),l(!1)}catch(a){console.log(a),l(!1)}};return n?c.jsx(Vr,{fullScreen:!0}):r?c.jsx(lh,{to:"/home/"}):e};var EI={},sV={L:1,M:0,Q:3,H:2},cV={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},yD=cV;function IV(e){this.mode=yD.MODE_8BIT_BYTE,this.data=e}IV.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var ZD=IV,Lg=sV;function On(e,t){this.totalCount=e,this.dataCount=t}On.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];On.getRSBlocks=function(e,t){var n=On.getRsBlockTable(e,t);if(n==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var l=n.length/3,r=new Array,o=0;o<l;o++)for(var i=n[o*3+0],a=n[o*3+1],g=n[o*3+2],s=0;s<i;s++)r.push(new On(a,g));return r};On.getRsBlockTable=function(e,t){switch(t){case Lg.L:return On.RS_BLOCK_TABLE[(e-1)*4+0];case Lg.M:return On.RS_BLOCK_TABLE[(e-1)*4+1];case Lg.Q:return On.RS_BLOCK_TABLE[(e-1)*4+2];case Lg.H:return On.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var vD=On;function dV(){this.buffer=new Array,this.length=0}dV.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var GD=dV,Nn={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Nn.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Nn.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var ht=0;ht<8;ht++)Nn.EXP_TABLE[ht]=1<<ht;for(var ht=8;ht<256;ht++)Nn.EXP_TABLE[ht]=Nn.EXP_TABLE[ht-4]^Nn.EXP_TABLE[ht-5]^Nn.EXP_TABLE[ht-6]^Nn.EXP_TABLE[ht-8];for(var ht=0;ht<255;ht++)Nn.LOG_TABLE[Nn.EXP_TABLE[ht]]=ht;var uV=Nn,Jr=uV;function Ss(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&e[n]==0;)n++;this.num=new Array(e.length-n+t);for(var l=0;l<e.length-n;l++)this.num[l]=e[l+n]}Ss.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var l=0;l<e.getLength();l++)t[n+l]^=Jr.gexp(Jr.glog(this.get(n))+Jr.glog(e.get(l)));return new Ss(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Jr.glog(this.get(0))-Jr.glog(e.get(0)),n=new Array(this.getLength()),l=0;l<this.getLength();l++)n[l]=this.get(l);for(var l=0;l<e.getLength();l++)n[l]^=Jr.gexp(Jr.glog(e.get(l))+t);return new Ss(n,0).mod(e)}};var CV=Ss,An=cV,qb=CV,BD=uV,Nl={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},At={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;At.getBCHDigit(t)-At.getBCHDigit(At.G15)>=0;)t^=At.G15<<At.getBCHDigit(t)-At.getBCHDigit(At.G15);return(e<<10|t)^At.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;At.getBCHDigit(t)-At.getBCHDigit(At.G18)>=0;)t^=At.G18<<At.getBCHDigit(t)-At.getBCHDigit(At.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return At.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case Nl.PATTERN000:return(t+n)%2==0;case Nl.PATTERN001:return t%2==0;case Nl.PATTERN010:return n%3==0;case Nl.PATTERN011:return(t+n)%3==0;case Nl.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case Nl.PATTERN101:return t*n%2+t*n%3==0;case Nl.PATTERN110:return(t*n%2+t*n%3)%2==0;case Nl.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new qb([1],0),n=0;n<e;n++)t=t.multiply(new qb([1,BD.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case An.MODE_NUMBER:return 10;case An.MODE_ALPHA_NUM:return 9;case An.MODE_8BIT_BYTE:return 8;case An.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case An.MODE_NUMBER:return 12;case An.MODE_ALPHA_NUM:return 11;case An.MODE_8BIT_BYTE:return 16;case An.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case An.MODE_NUMBER:return 14;case An.MODE_ALPHA_NUM:return 13;case An.MODE_8BIT_BYTE:return 16;case An.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,l=0;l<t;l++)for(var r=0;r<t;r++){for(var o=0,i=e.isDark(l,r),a=-1;a<=1;a++)if(!(l+a<0||t<=l+a))for(var g=-1;g<=1;g++)r+g<0||t<=r+g||a==0&&g==0||i==e.isDark(l+a,r+g)&&o++;o>5&&(n+=3+o-5)}for(var l=0;l<t-1;l++)for(var r=0;r<t-1;r++){var s=0;e.isDark(l,r)&&s++,e.isDark(l+1,r)&&s++,e.isDark(l,r+1)&&s++,e.isDark(l+1,r+1)&&s++,(s==0||s==4)&&(n+=3)}for(var l=0;l<t;l++)for(var r=0;r<t-6;r++)e.isDark(l,r)&&!e.isDark(l,r+1)&&e.isDark(l,r+2)&&e.isDark(l,r+3)&&e.isDark(l,r+4)&&!e.isDark(l,r+5)&&e.isDark(l,r+6)&&(n+=40);for(var r=0;r<t;r++)for(var l=0;l<t-6;l++)e.isDark(l,r)&&!e.isDark(l+1,r)&&e.isDark(l+2,r)&&e.isDark(l+3,r)&&e.isDark(l+4,r)&&!e.isDark(l+5,r)&&e.isDark(l+6,r)&&(n+=40);for(var I=0,r=0;r<t;r++)for(var l=0;l<t;l++)e.isDark(l,r)&&I++;var d=Math.abs(100*I/t/t-50)/5;return n+=d*10,n}},SD=At,VD=ZD,AV=vD,mV=GD,wr=SD,WD=CV;function $n(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var un=$n.prototype;un.addData=function(e){var t=new VD(e);this.dataList.push(t),this.dataCache=null};un.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};un.getModuleCount=function(){return this.moduleCount};un.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=AV.getRSBlocks(e,this.errorCorrectLevel),n=new mV,l=0,r=0;r<t.length;r++)l+=t[r].dataCount;for(var r=0;r<this.dataList.length;r++){var o=this.dataList[r];n.put(o.mode,4),n.put(o.getLength(),wr.getLengthInBits(o.mode,e)),o.write(n)}if(n.getLengthInBits()<=l*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};un.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var l=0;l<this.moduleCount;l++)this.modules[n][l]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=$n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};un.setupPositionProbePattern=function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var l=-1;l<=7;l++)t+l<=-1||this.moduleCount<=t+l||(0<=n&&n<=6&&(l==0||l==6)||0<=l&&l<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=l&&l<=4?this.modules[e+n][t+l]=!0:this.modules[e+n][t+l]=!1)};un.getBestMaskPattern=function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var l=wr.getLostPoint(this);(n==0||e>l)&&(e=l,t=n)}return t};un.createMovieClip=function(e,t,n){var l=e.createEmptyMovieClip(t,n),r=1;this.make();for(var o=0;o<this.modules.length;o++)for(var i=o*r,a=0;a<this.modules[o].length;a++){var g=a*r,s=this.modules[o][a];s&&(l.beginFill(0,100),l.moveTo(g,i),l.lineTo(g+r,i),l.lineTo(g+r,i+r),l.lineTo(g,i+r),l.endFill())}return l};un.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};un.setupPositionAdjustPattern=function(){for(var e=wr.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var l=e[t],r=e[n];if(this.modules[l][r]==null)for(var o=-2;o<=2;o++)for(var i=-2;i<=2;i++)o==-2||o==2||i==-2||i==2||o==0&&i==0?this.modules[l+o][r+i]=!0:this.modules[l+o][r+i]=!1}};un.setupTypeNumber=function(e){for(var t=wr.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var l=!e&&(t>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=l}for(var n=0;n<18;n++){var l=!e&&(t>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=l}};un.setupTypeInfo=function(e,t){for(var n=this.errorCorrectLevel<<3|t,l=wr.getBCHTypeInfo(n),r=0;r<15;r++){var o=!e&&(l>>r&1)==1;r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(var r=0;r<15;r++){var o=!e&&(l>>r&1)==1;r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!e};un.mapData=function(e,t){for(var n=-1,l=this.moduleCount-1,r=7,o=0,i=this.moduleCount-1;i>0;i-=2)for(i==6&&i--;;){for(var a=0;a<2;a++)if(this.modules[l][i-a]==null){var g=!1;o<e.length&&(g=(e[o]>>>r&1)==1);var s=wr.getMask(t,l,i-a);s&&(g=!g),this.modules[l][i-a]=g,r--,r==-1&&(o++,r=7)}if(l+=n,l<0||this.moduleCount<=l){l-=n,n=-n;break}}};$n.PAD0=236;$n.PAD1=17;$n.createData=function(e,t,n){for(var l=AV.getRSBlocks(e,t),r=new mV,o=0;o<n.length;o++){var i=n[o];r.put(i.mode,4),r.put(i.getLength(),wr.getLengthInBits(i.mode,e)),i.write(r)}for(var a=0,o=0;o<l.length;o++)a+=l[o].dataCount;if(r.getLengthInBits()>a*8)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+a*8+")");for(r.getLengthInBits()+4<=a*8&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=a*8||(r.put($n.PAD0,8),r.getLengthInBits()>=a*8));)r.put($n.PAD1,8);return $n.createBytes(r,l)};$n.createBytes=function(e,t){for(var n=0,l=0,r=0,o=new Array(t.length),i=new Array(t.length),a=0;a<t.length;a++){var g=t[a].dataCount,s=t[a].totalCount-g;l=Math.max(l,g),r=Math.max(r,s),o[a]=new Array(g);for(var I=0;I<o[a].length;I++)o[a][I]=255&e.buffer[I+n];n+=g;var d=wr.getErrorCorrectPolynomial(s),u=new WD(o[a],d.getLength()-1),C=u.mod(d);i[a]=new Array(d.getLength()-1);for(var I=0;I<i[a].length;I++){var h=I+C.getLength()-i[a].length;i[a][I]=h>=0?C.get(h):0}}for(var f=0,I=0;I<t.length;I++)f+=t[I].totalCount;for(var y=new Array(f),A=0,I=0;I<l;I++)for(var a=0;a<t.length;a++)I<o[a].length&&(y[A++]=o[a][I]);for(var I=0;I<r;I++)for(var a=0;a<t.length;a++)I<i[a].length&&(y[A++]=i[a][I]);return y};var RD=$n,af={};Object.defineProperty(af,"__esModule",{value:!0});var wD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},kD=_e,mn=fV(kD),hV=v,zg=fV(hV);function fV(e){return e&&e.__esModule?e:{default:e}}function XD(e,t){var n={};for(var l in e)t.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(e,l)&&(n[l]=e[l]);return n}var xD={bgColor:mn.default.oneOfType([mn.default.object,mn.default.string]).isRequired,bgD:mn.default.string.isRequired,fgColor:mn.default.oneOfType([mn.default.object,mn.default.string]).isRequired,fgD:mn.default.string.isRequired,size:mn.default.number.isRequired,title:mn.default.string,viewBoxSize:mn.default.number.isRequired,xmlns:mn.default.string},gf=(0,hV.forwardRef)(function(e,t){var n=e.bgColor,l=e.bgD,r=e.fgD,o=e.fgColor,i=e.size,a=e.title,g=e.viewBoxSize,s=e.xmlns,I=s===void 0?"http://www.w3.org/2000/svg":s,d=XD(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return zg.default.createElement("svg",wD({},d,{height:i,ref:t,viewBox:"0 0 "+g+" "+g,width:i,xmlns:I}),a?zg.default.createElement("title",null,a):null,zg.default.createElement("path",{d:l,fill:n}),zg.default.createElement("path",{d:r,fill:o}))});gf.displayName="QRCodeSvg";gf.propTypes=xD;af.default=gf;Object.defineProperty(EI,"__esModule",{value:!0});EI.QRCode=void 0;var JD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},ND=_e,gl=sg(ND),YD=sV,HD=sg(YD),FD=RD,KD=sg(FD),pV=v,ED=sg(pV),MD=af,TD=sg(MD);function sg(e){return e&&e.__esModule?e:{default:e}}function LD(e,t){var n={};for(var l in e)t.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(e,l)&&(n[l]=e[l]);return n}var zD={bgColor:gl.default.oneOfType([gl.default.object,gl.default.string]),fgColor:gl.default.oneOfType([gl.default.object,gl.default.string]),level:gl.default.string,size:gl.default.number,value:gl.default.string.isRequired},MI=(0,pV.forwardRef)(function(e,t){var n=e.bgColor,l=n===void 0?"#FFFFFF":n,r=e.fgColor,o=r===void 0?"#000000":r,i=e.level,a=i===void 0?"L":i,g=e.size,s=g===void 0?256:g,I=e.value,d=LD(e,["bgColor","fgColor","level","size","value"]),u=new KD.default(-1,HD.default[a]);u.addData(I),u.make();var C=u.modules;return ED.default.createElement(TD.default,JD({},d,{bgColor:l,bgD:C.map(function(h,f){return h.map(function(y,A){return y?"":"M "+A+" "+f+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:o,fgD:C.map(function(h,f){return h.map(function(y,A){return y?"M "+A+" "+f+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:s,viewBoxSize:C.length}))});EI.QRCode=MI;MI.displayName="QRCode";MI.propTypes=zD;var bV=EI.default=MI;const $b=()=>{const{user:e}=v.useContext(yt),t=ol(),[n,l]=v.useState();v.useState("");const r=window.location.origin+`/card?username=${e.username}&id=${e.id}`,[o,i]=v.useState(!1),a=async()=>{const{data:I}=await t.getProfile();l({...I})},g=async()=>{try{navigator.share?await navigator.share({title:"KnowMe",text:`Conecta con ${n.username} en KnowMe!`,url:r}):alert("Ocurrio un error :(")}catch(I){console.error("Error sharing:",I)}},s=()=>{navigator.clipboard.writeText(r),i(!0),setTimeout(()=>{i(!1)},2e3)};return v.useEffect(()=>{a()},[]),n==null?c.jsx(Vr,{}):c.jsxs(c.Fragment,{children:[c.jsx(Lr,{to:"/home/",className:"back-icon-container",children:c.jsx(jx,{className:"back-icon"})}),c.jsxs("div",{className:"share-container lg:mx-28",children:[c.jsx("div",{className:"share-avatar",children:c.jsx(Ir,{name:n.title_profile,size:"130",src:n.profile_img_url})}),c.jsxs("div",{className:"share-qr-container border-solid border-4 border-white/10 rounded-lg ",children:[c.jsxs("div",{className:"share-header",children:[c.jsx("h1",{children:n.title_profile}),c.jsx("h4",{children:n.ocupation_role})]}),c.jsx("div",{className:"share-qr-code flex justify-center",children:c.jsx(bV,{size:256,style:{height:"auto",maxWidth:"100%",width:"90%"},bgColor:"#ffffff",fgColor:"#000000",value:r,viewBox:"0 0 256 256"})}),c.jsxs("div",{className:"mt-4",children:[c.jsx("button",{type:"button",className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 m-1",onClick:g,children:"Compartir Tarjeta"}),c.jsx("button",{type:"button",className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 m-1",onClick:s,children:o?"Copiado! ":"Copiar URL"})]})]})]})]})};function jD({searchActive:e}){const t=ol(),[n,l]=v.useState({}),{email:r,title_profile:o,username:i}=n,[a,g]=v.useState("");return v.useEffect(()=>{(async()=>{try{const I=await t.getProfile();l(I.data),g(I.data.profile_img_url)}catch(I){console.error("Error fetching profile:",I)}})()},[]),c.jsxs("div",{className:"relative z-0 isolate px-6 pt-14 lg:px-8",children:[c.jsx("div",{className:"absolute inset-x-0 top-[calc(100%-13rem)] transform-gpu overflow-hidden blur-3xl sm:top-[calc(30%-30rem)]","aria-hidden":"true",children:c.jsx("div",{className:"relative left-[calc(50%+3rem)] aspect-[1155/678] w-[1.125rem] -translate-x-1/2 bg-gradient-to-tr from-[#fde68a] to-[#9a3412] opacity-20 sm:left-[calc(40%+5rem)] sm:w-[70.1875rem]",style:{clipPath:"polygon(90.76% 75.84%, 100% 66%, 85.5% 36.72%, 85.5% 0%, 75.14% 15.81%, 38.66% 15.81%, 65.1% 45.92%, 61.5% 85.83%, 20% 27.29%, 0% 35.42%, 29.3% 73.96%, 0% 89%, 20% 100%, 32.79% 91.48%, 76.1% 102%, 78% 48%)"}})}),c.jsx("div",{className:"flex justify-center items-center",children:c.jsxs("div",{className:"max-w-md w-full backdrop-blur-sm bg-blue-950/30 rounded-lg overflow-hidden shadow-lg pb-4",children:[c.jsxs("div",{className:"px-6 py-4",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx(Ir,{name:i,size:"100",src:a})}),c.jsxs("div",{className:"text-center m-2",children:[c.jsxs("h3",{className:"text-xl font-semibold",children:["Hola, ",o,"!"]}),c.jsx("p",{className:"text-sm m-1 text-white",children:r}),c.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10 m-1",children:P9[localStorage.getItem("id_plan")]})]})]}),c.jsx("div",{className:"px-2 flex justify-center",children:c.jsxs(Lr,{type:"button",to:"/share/",className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:[c.jsx(_U,{className:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),"Compartir QR"]})})]})})]})}function UD(e){return Ce({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.917 7A6.002 6.002 0 0 0 2.083 7H1.071a7.002 7.002 0 0 1 13.858 0h-1.012z"},child:[]}]})(e)}const DD=({totalPages:e,currentPage:t,setCurrentPage:n})=>c.jsxs("nav",{className:"my-8 flex items-center justify-between",children:[c.jsx("div",{className:"-mt-px flex w-0 flex-1",children:c.jsxs("a",{onClick:()=>{t>1&&n(t-1)},className:`inline-flex items-center border-t-2 border-transparent pr-1 pt-4 text-sm font-medium text-orange-500 ${t>1?"hover:border-orange-500 hover:cursor-pointer":"hover:cursor-default"}`,children:[c.jsx(wH,{className:"mr-3 h-5 w-5 text-orange-400","aria-hidden":"true"}),"Anterior"]})}),c.jsxs("div",{className:"hidden md:-mt-px md:flex",children:[t-3>0&&c.jsx("span",{className:"hover:cursor-default inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500",children:"..."}),t-2>0&&c.jsx("a",{onClick:()=>{n(t-2)},className:"hover:cursor-pointer inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500 hover:border-orange-500",children:t-2}),t-1>0&&c.jsx("a",{onClick:()=>{n(t-1)},className:"hover:cursor-pointer inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500 hover:border-orange-500",children:t-1}),c.jsx("a",{className:"hover:cursor-default inline-flex items-center border-t-2 border-white px-4 pt-4 text-sm font-medium text-white","aria-current":"page",children:t}),t+1<=e&&c.jsx("a",{onClick:()=>{n(t+1)},className:"hover:cursor-pointer inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500 hover:border-orange-500",children:t+1}),t+2<=e&&c.jsx("a",{onClick:()=>{n(t+2)},className:"hover:cursor-pointer inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500 hover:border-orange-500",children:t+2}),t+3<=e&&c.jsx("span",{className:"hover:cursor-default inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-orange-500",children:"..."})]}),c.jsx("div",{className:"-mt-px flex w-0 flex-1 justify-end",children:c.jsxs("a",{onClick:()=>{t+1<=e&&n(t+1)},className:`inline-flex items-center border-t-2 border-transparent pr-1 pt-4 text-sm font-medium text-orange-500 ${t<e?"hover:border-orange-500 hover:cursor-pointer":"hover:cursor-default"}`,children:["Siguiente",c.jsx(xH,{className:"ml-3 h-5 w-5 text-orange-400","aria-hidden":"true"})]})})]});const QD=({handleSearchTerm:e,term:t})=>{const{formState:n,onInputChange:l}=Br({search:t=="<"?"":t}),r=o=>{o.preventDefault(),e(n.search)};return c.jsxs("form",{className:"relative flex max-w-80 m-auto border-b search-border rounded mb-4",onSubmit:r,children:[c.jsx("input",{type:"search",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary data-[twe-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none dark:text-white dark:placeholder:text-neutral-300 dark:autofill:shadow-autofill dark:peer-focus:text-primary [&:not([data-twe-input-placeholder-active])]:placeholder:opacity-0",placeholder:"Buscar por el texto...",name:"search",value:n.search,onChange:l}),c.jsx("label",{className:`pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] text-neutral-500 transition-all duration-200 ease-out 
        ${n.search!=""?"-translate-y-[0.9rem] scale-[0.8] dark:text-primary dark:text-neutral-400":""}
      peer-focus:-translate-y-[0.9rem] peer-focus:scale-[0.8] peer-focus:text-primary 
      peer-data-[twe-input-state-active]:-translate-y-[0.9rem] peer-data-[twe-input-state-active]:scale-[0.8] motion-reduce:transition-none dark:text-neutral-400 dark:peer-focus:text-primary`,children:"Buscar por el texto..."}),c.jsx("button",{className:"relative z-[2] -ms-0.5 flex items-center rounded-e px-2 text-xs font-medium uppercase leading-normal text-white shadow-primary-3 transition duration-150 ease-in-out hover:shadow-primary-2 focus:bg-primary-accent-300 focus:shadow-primary-2 focus:outline-none focus:ring-0 active:bg-primary-600 active:shadow-primary-2 dark:shadow-black/30 dark:hover:shadow-dark-strong dark:focus:shadow-dark-strong dark:active:shadow-dark-strong",type:"submit",children:c.jsx("span",{className:"[&>svg]:h-5 [&>svg]:w-5",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})})})]})};function PD(e){return Ce({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4.75 17.25a.75.75 0 0 1 .75.75v2.25c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V18a.75.75 0 0 1 1.5 0v2.25A1.75 1.75 0 0 1 18.25 22H5.75A1.75 1.75 0 0 1 4 20.25V18a.75.75 0 0 1 .75-.75Z"},child:[]},{tag:"path",attr:{d:"M5.22 9.97a.749.749 0 0 1 1.06 0l4.97 4.969V2.75a.75.75 0 0 1 1.5 0v12.189l4.97-4.969a.749.749 0 1 1 1.06 1.06l-6.25 6.25a.749.749 0 0 1-1.06 0l-6.25-6.25a.749.749 0 0 1 0-1.06Z"},child:[]}]})(e)}const OD=e=>{const t=l=>{const r=window.getComputedStyle(l),o={};for(let i=0;i<r.length;i++)o[r[i]]=r.getPropertyValue(r[i]);for(const i in o)l.style[i]=o[i];return o},n=document.querySelector(e);t(n),n.querySelectorAll("*").forEach(l=>t(l))},_D=({target:e,scale:t,format:n,quality:l})=>{var r=document.querySelector(e),o=new XMLSerializer().serializeToString(r),i=document.createElement("canvas"),a=r.getBoundingClientRect();i.width=a.width*t,i.height=a.height*t,i.style.width=a.width,i.style.height=a.height;var g=i.getContext("2d");g.scale(t,t);var s=document.createElement("img");return s.setAttribute("src","data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(o)))),new Promise(I=>{s.onload=()=>{g.drawImage(s,0,0);const d=i.toDataURL(`image/${n}`,n="png",l);I(d)}})},qD=({file:e,name:t,format:n})=>{var l=document.createElement("a");l.className="display-none",l.download=`${t}.${n}`,l.href=e,document.body.appendChild(l),l.click()};var $D=async(e,t,{scale:n=1,format:l="png",quality:r=.92,download:o=!0,ignore:i=null}={})=>{const a=document.querySelector(e),g=a.innerHTML;if(i!=null){const s=document.querySelector(i);s.parentNode.removeChild(s)}return OD(e),await _D({target:e,scale:n,format:l,quality:r}).then(s=>(o&&qD({file:s,name:t,format:l}),a.innerHTML=g,s)).catch(console.error)};const eQ=Ln($D),tQ=({open:e,setOpen:t,modalInfo:n})=>{const l=U.createRef(),r=()=>{eQ("#QRCode",`QR_${n.username}`,{download:!0,quality:1})};return c.jsx(c.Fragment,{children:c.jsxs(rn,{open:e,onClose:t,className:"relative z-10",children:[c.jsx(Hj,{transition:!0,className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity data-[closed]:opacity-0 data-[enter]:duration-300 data-[leave]:duration-200 data-[enter]:ease-out data-[leave]:ease-in"}),c.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:c.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:c.jsxs($S,{transition:!0,className:"relative qr-dialog transform overflow-hidden rounded-lg px-4 pb-4 pt-5 text-left shadow-xl transition-all data-[closed]:translate-y-4 data-[closed]:opacity-0 data-[enter]:duration-300 data-[leave]:duration-200 data-[enter]:ease-out data-[leave]:ease-in sm:my-8 sm:w-full sm:max-w-lg sm:p-6 data-[closed]:sm:translate-y-0 data-[closed]:sm:scale-95",children:[c.jsx(Ox,{color:"white",size:25,className:"right-6 top-6 absolute cursor-pointer",onClick:()=>{t(!1)}}),c.jsx("div",{children:c.jsx("div",{className:"mx-auto flex items-center justify-center m-2",children:c.jsx("div",{className:"p-8 mx-4 bg-white rounded",children:c.jsx(bV,{name:"QRCode",ref:l,id:"QRCode",value:n.url})})})}),c.jsxs("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3 qr-buttons",children:[c.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(n.url)},className:"inline-flex w-full justify-center rounded-md px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:col-start-2",children:"Copiar URL"}),c.jsxs("button",{type:"button",onClick:r,className:"inline-flex w-full justify-center rounded-md px-3 py-2 text-sm text-white shadow-sm ring-1 ring-inset ring-gray-300 sm:col-start-1 sm:mt-0",children:["Descargar QR"," ",c.jsx(PD,{id:"GoDownload",size:18})]})]})]})})})]})})};function nQ({selectedCategory:e}){const t=ol(),[n,l]=v.useState([]),[r,o]=v.useState(!0),[i,a]=v.useState(1),[g,s]=v.useState(1),[I,d]=v.useState("<"),[u,C]=v.useState(!1),[h,f]=v.useState({url:"",username:""}),y=async()=>{if(o(!0),e==null||e==="todos")try{const{data:Z}=await t.getAlgolia(g,I);a(Z.totalPages),l(Z.profiles)}catch(Z){console.error("Error fetching user cards:",Z)}else try{const Z=await t.getFilterCategories(e);l(Z.data.profiles)}catch(Z){console.error("Error fetching user cards:",Z)}o(!1)},A=Z=>{o(!0),l([]),s(Z)},m=async Z=>{o(!0),l([]),s(1),Z==""&&(Z="<");try{const{data:V}=await t.getAlgolia(g,Z);d(Z),a(V.totalPages),l(V.profiles)}catch(V){console.error("Error fetching user cards:",V)}};v.useEffect(()=>{y()},[g]);const p=(Z,V)=>{const S=`${window.location.origin}/card?username=${Z}&id=${V}`;window.open(S,"_blank","noreferrer")},b=Z=>{const V=window.location.origin+`/card?username=${Z.username}&id=${Z.id_profile}`;f({url:V,username:Z.title_profile}),C(!0)};return c.jsxs(c.Fragment,{children:[c.jsx(tQ,{setOpen:C,open:u,modalInfo:h}),u&&c.jsx("div",{className:"profile-modal-background",onClick:()=>{C(!1)},children:c.jsx("div",{})}),c.jsx(QD,{handleSearchTerm:m,term:I}),n.length===0?c.jsx(c.Fragment,{children:r?c.jsx("div",{className:"",children:c.jsxs("button",{type:"button",className:" flex mx-auto my-5 lg:my-20 rounded-md bg-gray-600 px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 cursor-not-allowed",disabled:!0,children:[c.jsx(UD,{className:"animate-spin h-5 w-5 text-white mr-4","aria-hidden":"true"}),"Cargando"]})}):c.jsx("div",{className:"no-card",children:c.jsx("p",{children:"No hay usuarios que hagan match con este filtro "})})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex grid grid-cols-1 lg:grid-cols-2 gap-4",children:n==null?void 0:n.map(Z=>c.jsxs("div",{className:"m-auto relative h-52 flex w-full max-w-[26rem] flex-col lg:flex-grow rounded-xl backdrop-blur-sm bg-blue-950/10 px-4 text-white shadow-none border-1 border-white/10 hover:border-white/30 hover:cursor-pointer",onClick:({target:V})=>{V.id!="QR_download"&&p(Z.username,Z.id_profile)},children:[c.jsxs("div",{className:"relative flex items-center gap-4 pt-0 mx-0 mt-4 overflow-hidden text-white bg-transparent shadow-none rounded-xl bg-clip-border",children:[c.jsx("div",{className:"h-[58px] w-[70px]",children:c.jsx(Ir,{name:Z.title_profile,size:"58",src:Z.profile_img_url})}),c.jsxs("div",{className:"flex w-full flex-col gap-0.5",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-orange-500 text-ellipsis overflow-hidden max-w-[9rem]",children:Z.title_profile}),c.jsx("div",{className:"flex items-center gap-0.5",children:c.jsxs("div",{className:"mt-1 flex items-center gap-x-1.5",children:[c.jsx("div",{className:"flex-none rounded-full bg-emerald-500/20 p-1",children:c.jsx("div",{className:Z.availability_status=="Disponible"?"h-1.5 w-1.5 rounded-full bg-emerald-500":"h-1.5 w-1.5 rounded-full bg-gray-500"})}),c.jsx("p",{className:"text-xs leading-5 text-white",children:Z.availability_status})]})})]}),c.jsx("p",{className:"block font-sans text-base antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[10rem]",children:Z.ocupation_role}),c.jsx("p",{className:"block font-sans text-base antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[10rem]",children:Z.organization_name}),c.jsx("div",{className:"flex flex-row",children:Object.entries(kh(Z.social_media)).map(V=>{if(Z.social_media_v2&&Z.social_media_v2.find(S=>S.name==V[0]))return c.jsx("div",{className:"text-orange-500 text-2xl m-2",children:V[1]},V[0])})})]})]}),c.jsxs("div",{className:"flex flex-row items-end pb-2 justify-end absolute bottom-2 right-5",children:[localStorage.getItem("is_superuser")=="true"&&c.jsxs("span",{id:"QR_download",onClick:()=>b(Z),className:"z-50 inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-blue-900 ring-1 ring-inset m-1 cursor-pointer",children:["",c.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",version:"1.1",viewBox:"0 0 16 16",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",id:"QR_download",children:c.jsx("path",{id:"QR_download",d:"M5 1h-4v4h4v-4zM6 0v0 6h-6v-6h6zM2 2h2v2h-2zM15 1h-4v4h4v-4zM16 0v0 6h-6v-6h6zM12 2h2v2h-2zM5 11h-4v4h4v-4zM6 10v0 6h-6v-6h6zM2 12h2v2h-2zM7 0h1v1h-1zM8 1h1v1h-1zM7 2h1v1h-1zM8 3h1v1h-1zM7 4h1v1h-1zM8 5h1v1h-1zM7 6h1v1h-1zM7 8h1v1h-1zM8 9h1v1h-1zM7 10h1v1h-1zM8 11h1v1h-1zM7 12h1v1h-1zM8 13h1v1h-1zM7 14h1v1h-1zM8 15h1v1h-1zM15 8h1v1h-1zM1 8h1v1h-1zM2 7h1v1h-1zM0 7h1v1h-1zM4 7h1v1h-1zM5 8h1v1h-1zM6 7h1v1h-1zM9 8h1v1h-1zM10 7h1v1h-1zM11 8h1v1h-1zM12 7h1v1h-1zM13 8h1v1h-1zM14 7h1v1h-1zM15 10h1v1h-1zM9 10h1v1h-1zM10 9h1v1h-1zM11 10h1v1h-1zM13 10h1v1h-1zM14 9h1v1h-1zM15 12h1v1h-1zM9 12h1v1h-1zM10 11h1v1h-1zM12 11h1v1h-1zM13 12h1v1h-1zM14 11h1v1h-1zM15 14h1v1h-1zM10 13h1v1h-1zM11 14h1v1h-1zM12 13h1v1h-1zM13 14h1v1h-1zM10 15h1v1h-1zM12 15h1v1h-1zM14 15h1v1h-1z"})})]}),Z.categories&&c.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-blue-900 ring-1 ring-inset m-1",children:Z.categories.name})]})]},Z.id_profile))}),c.jsx(DD,{totalPages:i,currentPage:g,setCurrentPage:A})]})]})}const lQ="/assets/banner-knowme-f9e342ef.png";function ey(){const e=ol();v.useState([]);const[t,n]=v.useState("todos"),l=cn(),[r,o]=v.useState(!0),{user:i}=v.useContext(yt),a=async()=>{try{const{data:g}=await e.validateUser(),s=g.usuario.id_plan_fk;g.userPayment.stripe_session_status=="open"&&s!=i.id_plan_fk&&(i[s]=6,localStorage.setItem("id_plan",6),window.location.reload())}catch(g){console.error("Error fetching profile:",g)}o(!1)};return v.useEffect(()=>{a()},[l]),r?c.jsx(Vr,{fullScreen:!0}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"z-0 mx-auto mt-6 max-w-2xl sm:px-6 lg:grid lg:max-w-7xl lg:grid-cols-3 lg:gap-x-8 lg:px-8",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsx(jD,{searchActive:!0})}),c.jsx("div",{className:"hidden overflow-hidden rounded-lg lg:block w-full lg:w-auto lg:col-span-2 m-8",children:c.jsx("img",{src:lQ,alt:"Walnut card tray with white powder coated steel divider and 3 punchout holes.",className:"aspect-h-2 aspect-w-3 overflow-hidden rounded-lg h-full object-contain"})})]}),c.jsx("div",{className:"md:mx-14 lg:mx-4",children:c.jsx(nQ,{selectedCategory:t})})]})}function Et(){const e=cn(),t=n=>e.pathname===n;return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"navbar-container",children:[c.jsx(Lr,{to:"/home/",className:`navbar-link ${t("/home")?"active":""}`,children:c.jsxs("div",{className:"navbar-icon-container",children:[c.jsx(L9,{className:"navbar-icon"}),t("/home")||t("/home/")&&c.jsx("div",{className:"active-dot"})]})}),c.jsx(Lr,{to:"/perfil/",className:`navbar-link ${t("/profile")?"active":""}`,children:c.jsxs("div",{className:"navbar-icon-container",children:[c.jsx($x,{className:"navbar-icon"}),t("/perfil/")&&c.jsx("div",{className:"active-dot"})]})}),c.jsx(Lr,{to:"/scanner/",className:`navbar-link ${t("/scanner")?"active":""}`,children:c.jsx("div",{className:"navbar-icon-container",children:c.jsxs("div",{className:"navbar-scanner",children:[c.jsx(z9,{className:"navbar-icon"}),t("/scanner/")&&c.jsx("div",{className:"active-dot"})]})})}),c.jsx(Lr,{to:"/contacts/",className:`navbar-link ${t("/contacts/")?"active":""}`,children:c.jsxs("div",{className:"navbar-icon-container",children:[c.jsx(VB,{className:"navbar-icon"}),t("/contacts/")&&c.jsx("div",{className:"active-dot"})]})}),c.jsx(Lr,{to:"/settings/",className:`navbar-link ${t("/settings/")?"active":""}`,children:c.jsxs("div",{className:"navbar-icon-container",children:[c.jsx(Dx,{className:"navbar-icon"}),t("/settings/")&&c.jsx("div",{className:"active-dot"})]})})]})})}function za(e){"@babel/helpers - typeof";return za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},za(e)}function rQ(e,t){if(za(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var l=n.call(e,t||"default");if(za(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oQ(e){var t=rQ(e,"string");return za(t)=="symbol"?t:String(t)}function iQ(e,t,n){return t=oQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aQ(e){if(Array.isArray(e))return e}function gQ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var l,r,o,i,a=[],g=!0,s=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;g=!1}else for(;!(g=(l=o.call(n)).done)&&(a.push(l.value),a.length!==t);g=!0);}catch(I){s=!0,r=I}finally{try{if(!g&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return a}}function ty(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}function sQ(e,t){if(e){if(typeof e=="string")return ty(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ty(e,t)}}function cQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IQ(e,t){return aQ(e)||gQ(e,t)||sQ(e,t)||cQ()}function dQ(e,t){if(e==null)return{};var n=nI(e,t),l,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)l=o[r],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}var yV={exports:{}},Xe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=typeof Symbol=="function"&&Symbol.for,sf=Ct?Symbol.for("react.element"):60103,cf=Ct?Symbol.for("react.portal"):60106,TI=Ct?Symbol.for("react.fragment"):60107,LI=Ct?Symbol.for("react.strict_mode"):60108,zI=Ct?Symbol.for("react.profiler"):60114,jI=Ct?Symbol.for("react.provider"):60109,UI=Ct?Symbol.for("react.context"):60110,If=Ct?Symbol.for("react.async_mode"):60111,DI=Ct?Symbol.for("react.concurrent_mode"):60111,QI=Ct?Symbol.for("react.forward_ref"):60112,PI=Ct?Symbol.for("react.suspense"):60113,uQ=Ct?Symbol.for("react.suspense_list"):60120,OI=Ct?Symbol.for("react.memo"):60115,_I=Ct?Symbol.for("react.lazy"):60116,CQ=Ct?Symbol.for("react.block"):60121,AQ=Ct?Symbol.for("react.fundamental"):60117,mQ=Ct?Symbol.for("react.responder"):60118,hQ=Ct?Symbol.for("react.scope"):60119;function Cn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case sf:switch(e=e.type,e){case If:case DI:case TI:case zI:case LI:case PI:return e;default:switch(e=e&&e.$$typeof,e){case UI:case QI:case _I:case OI:case jI:return e;default:return t}}case cf:return t}}}function ZV(e){return Cn(e)===DI}Xe.AsyncMode=If;Xe.ConcurrentMode=DI;Xe.ContextConsumer=UI;Xe.ContextProvider=jI;Xe.Element=sf;Xe.ForwardRef=QI;Xe.Fragment=TI;Xe.Lazy=_I;Xe.Memo=OI;Xe.Portal=cf;Xe.Profiler=zI;Xe.StrictMode=LI;Xe.Suspense=PI;Xe.isAsyncMode=function(e){return ZV(e)||Cn(e)===If};Xe.isConcurrentMode=ZV;Xe.isContextConsumer=function(e){return Cn(e)===UI};Xe.isContextProvider=function(e){return Cn(e)===jI};Xe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===sf};Xe.isForwardRef=function(e){return Cn(e)===QI};Xe.isFragment=function(e){return Cn(e)===TI};Xe.isLazy=function(e){return Cn(e)===_I};Xe.isMemo=function(e){return Cn(e)===OI};Xe.isPortal=function(e){return Cn(e)===cf};Xe.isProfiler=function(e){return Cn(e)===zI};Xe.isStrictMode=function(e){return Cn(e)===LI};Xe.isSuspense=function(e){return Cn(e)===PI};Xe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===TI||e===DI||e===zI||e===LI||e===PI||e===uQ||typeof e=="object"&&e!==null&&(e.$$typeof===_I||e.$$typeof===OI||e.$$typeof===jI||e.$$typeof===UI||e.$$typeof===QI||e.$$typeof===AQ||e.$$typeof===mQ||e.$$typeof===hQ||e.$$typeof===CQ)};Xe.typeOf=Cn;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ny=Object.getOwnPropertySymbols,fQ=Object.prototype.hasOwnProperty,pQ=Object.prototype.propertyIsEnumerable;function bQ(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function yQ(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var l=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(l.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(o){r[o]=o}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}yQ();var ZQ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vQ=ZQ;Function.call.bind(Object.prototype.hasOwnProperty);var GQ=vQ;function vV(){}function GV(){}GV.resetWarningCache=vV;var BQ=function(){function e(l,r,o,i,a,g){if(g!==GQ){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:GV,resetWarningCache:vV};return n.PropTypes=n,n};yV.exports=BQ();var So=yV.exports;function SQ(e,t){var n=atob(e);if(t){for(var l=new Uint8Array(n.length),r=0,o=n.length;r<o;++r)l[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(l.buffer))}return n}function VQ(e,t,n){var l=t===void 0?null:t,r=n===void 0?!1:n,o=SQ(e,r),i=o.indexOf(`
`,10)+1,a=o.substring(i)+(l?"//# sourceMappingURL="+l:""),g=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(g)}function WQ(e,t,n){var l;return function(o){return l=l||VQ(e,t,n),new Worker(l,o)}}var RQ=WQ("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),wQ=["constraints","onError","onLoad","onScan","resolution","qrArea"];function ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,l)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ly(Object(n),!0).forEach(function(l){iQ(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ly(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}var kQ=function(){return new RQ},oy=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(n){t.removeTrack(n),n.stop()}),t.getAudioTracks().forEach(function(n){t.removeTrack(n),n.stop()})):t.stop())},df=function(t){var n=t.constraints,l=t.onError,r=t.onLoad,o=t.onScan,i=t.resolution,a=t.qrArea,g=dQ(t,wQ),s=v.useRef(null),I=v.useRef(null),d=v.useRef(document.createElement("canvas")),u=v.useRef(null),C=v.useRef(),h=v.useState(null),f=IQ(h,2),y=f[0],A=f[1],m=v.useRef(!1),p=v.useRef();v.useEffect(function(){p.current=kQ();var S=p.current;return S.onmessage=function(G){o&&o(G.data?ry(ry({},G.data),{},{canvas:d.current}):null),m.current=!1},function(){S.terminate()}},[o]);var b=JSON.stringify(a),Z=v.useCallback(function(){var S=JSON.parse(b),G=p.current,w=I.current&&I.current.readyState===I.current.HAVE_ENOUGH_DATA;if(!m.current&&w){m.current=!0;var B=I.current.videoWidth,W=I.current.videoHeight,R=B>W?B:W,k=Math.floor(i/R*100)/100;W=Math.floor(k*W),B=Math.floor(k*B),d.current.width=B,d.current.height=W,u.current=d.current.getContext("2d"),u.current.drawImage(I.current,0,0,B,W);var x;S&&S.length===2&&S[0]>0&&S[1]>0?x=u.current.getImageData(Math.floor((B-S[0])/2),Math.floor((W-S[1])/2),S[0],S[1]):x=u.current.getImageData(0,0,B,W),G.postMessage(x)}C.current=requestAnimationFrame(Z)},[i,b]),V=JSON.stringify(n);return v.useEffect(function(){var S=JSON.parse(V),G=!0;return navigator.mediaDevices.getUserMedia(S).then(function(w){if(!G)oy(w);else{s.current=w;try{I.current&&(I.current.srcObject=w,I.current.setAttribute("playsinline",!0))}catch{A(window.URL.createObjectURL(w))}r&&r(),C.current=requestAnimationFrame(Z)}}).catch(function(w){return G?l(w):null}),function(){cancelAnimationFrame(C.current),G=!1,oy(s.current),y&&window.URL.revokeObjectURL(y)}},[Z,V,l,r,y]),v.createElement("video",ai({autoPlay:!0,playsInline:!0,src:y,ref:I},g))};df.propTypes={constraints:So.object,onError:So.func.isRequired,onLoad:So.func,onScan:So.func.isRequired,resolution:So.number,qrArea:So.array};df.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};function iy(){const e=n=>{n&&(window.location.href=n.text),console.log(`Enlace QR: ${JSON.stringify(n)}`)},t=n=>{console.error(n)};return c.jsxs("div",{className:"scanner-container",children:[c.jsx("h2",{children:"Escanea el QR"}),c.jsx(df,{onScan:e,onError:t,style:{width:"100%",height:"95%",borderStyle:"dotted",borderColor:"rgba(255, 255, 255, 0.5)",borderWidth:"2px"}})]})}function ay(){const e=It(),t=()=>{e("/contacts")},n=()=>{e("/business")},l=()=>{e("/password")},r=()=>{localStorage.removeItem("token"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),localStorage.removeItem("id_plan"),e("/login")},o=()=>{e("/upgrade")};return c.jsxs("div",{className:"setting-container",children:[localStorage.getItem("id_plan")==9&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"setting-link",onClick:n,children:[c.jsx("div",{className:"setting-icon",children:c.jsx(Qx,{})}),c.jsxs("div",{className:"setting-name",children:[c.jsx("h4",{children:"Business"}),c.jsx("p",{children:"Gestiona tu empresa"})]}),c.jsx("div",{className:"setting-goto",children:c.jsx(ji,{})})]}),c.jsx("div",{className:"separador"})]}),c.jsxs("div",{className:"setting-link",onClick:t,children:[c.jsx("div",{className:"setting-icon",children:c.jsx(_x,{})}),c.jsxs("div",{className:"setting-name",children:[c.jsx("h4",{children:"Contactos"}),c.jsx("p",{children:"Visualiza tus contactos"})]}),c.jsx("div",{className:"setting-goto",children:c.jsx(ji,{})})]}),c.jsx("div",{className:"separador"}),c.jsxs("div",{className:"setting-link",onClick:o,children:[c.jsx("div",{className:"setting-icon",children:c.jsx(ON,{})}),c.jsxs("div",{className:"setting-name",children:[c.jsx("h4",{children:"Subscripcin"}),c.jsx("p",{children:"Administra tu subscripcin"})]}),c.jsx("div",{className:"setting-goto",children:c.jsx(ji,{})})]}),c.jsx("div",{className:"separador"}),c.jsxs("div",{className:"setting-link",onClick:l,children:[c.jsx("div",{className:"setting-icon",children:c.jsx(M9,{})}),c.jsxs("div",{className:"setting-name",children:[c.jsx("h4",{children:"Contrasea"}),c.jsx("p",{children:"Cambia de contrasea"})]}),c.jsx("div",{className:"setting-goto",children:c.jsx(ji,{})})]}),c.jsx("div",{className:"separador"}),c.jsxs("div",{className:"setting-link",onClick:r,children:[c.jsx("div",{className:"setting-icon",children:c.jsx(y2,{})}),c.jsxs("div",{className:"setting-name",children:[c.jsx("h4",{children:"Cerrar Sesin"}),c.jsx("p",{children:"Te vamos a extraar "})]}),c.jsx("div",{className:"setting-goto",children:c.jsx(ji,{})})]})]})}const XQ="/assets/Shark-482b1a86.svg",gy=()=>c.jsxs("div",{className:"not-found-view",children:[c.jsx(bi,{src:XQ,className:"shark-container",beforeInjection:e=>{e.classList.add("not-found-shark")}}),c.jsxs("div",{className:"not-found-warning",children:["Cuidado con la aleta!",c.jsx("br",{}),"Estamos trabajando bajo el agua del cdigo para darle un nuevo aspecto y funcionalidades impresionantes a Know Me."]})]});function sy(){const e="https://api.knowmeapp.com",{user:t}=v.useContext(yt),n=localStorage.getItem("token"),[l,r]=v.useState({id_user_fk:parseInt(t.id),name:"",email:"",phone:"",company:"",position:"",url_web_company:"",notes:""}),o=a=>{const{name:g,value:s}=a.target;r({...l,[g]:s})},i=async a=>{a.preventDefault();try{await pe.post(`${e}/api/contact`,{id_user_fk:parseInt(t.id),name:l.name,email:l.email,phone:l.phone,company:l.company,position:l.position,url_web_company:l.url_web_company,notes:l.notes},{headers:{"x-token":n}}),Ge.success("Contacto guardado exitosamente"),r({id_user_fk:parseInt(t.id),name:"",email:"",phone:"",company:"",position:"",url_web_company:"",notes:""})}catch(g){Ge.error("Error al crear contacto, por favor intenta de nuevo"),console.error("Error al enviar el formulario:",g)}};return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"contact-container",children:[c.jsx(In,{richColors:!0,position:"top-right"}),c.jsx("div",{className:"contact-icon-container",children:c.jsx(Ir,{src:KI,size:100})}),c.jsx("h3",{children:"Crea un nuevo contacto"}),c.jsx("p",{children:"Aade un nuevo contacto y descubre la mejor forma de mantener tu agenda en lnea siempre actualizada y a mano!"}),c.jsxs("div",{className:"contact-form-container",children:[c.jsx("div",{className:"title-contact-data",children:c.jsx("p",{children:"Datos de contacto "})}),c.jsx("div",{className:"contact-form",children:c.jsxs("form",{onSubmit:i,children:[c.jsx("div",{children:c.jsx("label",{children:"Nombre:"})}),c.jsx("input",{type:"text",name:"name",className:"contact-input",value:l.name,onChange:o}),c.jsx("div",{children:c.jsx("label",{children:"Correo:"})}),c.jsx("input",{type:"email",name:"email",className:"contact-input",value:l.email,onChange:o}),c.jsx("div",{children:c.jsx("label",{children:"Tlefono:"})}),c.jsx("input",{type:"tel",name:"phone",className:"contact-input",value:l.phone,onChange:o}),c.jsx("div",{children:c.jsx("label",{children:"Empresa:"})}),c.jsx("input",{type:"text",name:"company",className:"contact-input",value:l.company,onChange:o}),c.jsx("div",{children:c.jsx("label",{children:"Cargo:"})}),c.jsx("input",{type:"text",name:"position",className:"contact-input",value:l.position,onChange:o}),c.jsx("div",{children:c.jsx("label",{children:"Sitio Web:"})}),c.jsx("input",{type:"text",name:"url_web_company",className:"contact-input",value:l.url_web_company,onChange:o}),c.jsx("div",{children:c.jsx("label",{children:"Notas:"})}),c.jsx("textarea",{name:"notes",className:"contact-input",value:l.notes,onChange:o}),c.jsx("div",{className:"perfil-guardar",children:c.jsx(et,{variant:"primary",size:"lg",type:"submit",children:"Guardar cambios"})})]})})]})]})})}function cy(){const[e,t]=v.useState([]),n="https://api.knowmeapp.com",l=localStorage.getItem("token"),{user:r}=v.useContext(yt),o=It(),[i,a]=v.useState(null),[g,s]=v.useState(!1),[I,d]=v.useState(!1),[u,C]=v.useState({id_contact_fk:null,id_profile_fk:4,id_user_fk:r.id,title:"",id_task_type_fk:1,details:"",cantidad:1,recurrence:"mes",start_date:"",end_date:"",send_whatsapp:0,send_email:1}),h=p=>{const{name:b,value:Z}=p.target;C({...u,[b]:Z})},f=async p=>{p.preventDefault();try{console.log(`Datos que voy a enviar ${JSON.stringify(u)}`),console.log(`user ${JSON.stringify(r)}`)}catch(b){console.error("Error al crear la tarea:",b)}};v.useEffect(()=>{(async()=>{try{const b=await pe.get(`${n}/api/contact/user/${r.id}`,{headers:{"x-token":l}});t(b.data.contacts)}catch(b){console.error("Error fetching contacts:",b)}})()},[]);const y=()=>{o("/addContact")},A=async p=>{a(p);try{const b=await pe.get(`${n}/api/contact_history/contact_detail/${p.id}`,{headers:{"x-token":l}});console.log(JSON.stringify(b.data))}catch(b){console.error("Error fetching contacts:",b)}s(!0)},m=()=>{s(!1)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"agenda-container",children:[c.jsxs("div",{className:"agenda-header",children:[c.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Bienvenid@ a tu agenda de contactos"}),c.jsx("div",{className:"my-4 flex space-x-2",children:c.jsx(et,{variant:"primary",size:"sm",onClick:y,className:"inline-flex items-center rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500",children:"Agregar Contacto"})})]}),c.jsx("div",{children:e.length===0?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"relative flex items-center gap-x-4 mt-10 bg-blue-500/10 rounded-md p-10 w-70 border-dashed md:w-96",children:[c.jsx("img",{src:KI,alt:"",className:"h-10 w-10 rounded-full bg-gray-50"}),c.jsx("div",{className:"text-sm leading-6",children:c.jsx("p",{className:"text-white",children:"Aun no tienes contactos agregados"})})]})}):c.jsx(c.Fragment,{children:c.jsx("div",{className:"flex flex-wrap items-center",children:e==null?void 0:e.map(p=>c.jsx("div",{className:"relative flex w-full max-w-[26rem] flex-col lg:flex-grow rounded-xl backdrop-blur-sm bg-blue-950/10 m-2 px-4 text-white shadow-none border-1 border-white/10 hover:border-white/30 hover:cursor-pointer pb-4 min-h-40",onClick:()=>A(p),children:c.jsxs("div",{className:"relative flex items-center gap-4 pt-0 mx-0 mt-4 overflow-hidden text-white bg-transparent shadow-none rounded-xl bg-clip-border",children:[c.jsx("div",{className:"h-[58px] w-[70px]",children:c.jsx(Ir,{name:p.title_profile,size:"58",src:p.profile_img_url})}),c.jsxs("div",{className:"flex w-full flex-col gap-0.5",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-orange-500 text-ellipsis overflow-hidden max-w-[9rem]",children:p.name}),c.jsx("div",{className:"flex items-center gap-0.5",children:c.jsxs("div",{className:"mt-1 flex items-center gap-x-1.5",children:[c.jsx("div",{className:"flex-none rounded-full bg-emerald-500/20 p-1",children:c.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"})}),c.jsx("p",{className:"text-xs leading-5 text-white",children:"Contacto"})]})})]}),c.jsx("p",{className:"block font-sans text-base antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[10rem]",children:p.position})]})]})},p.id_contact_detail))})})})]}),c.jsxs(vn,{show:g,onHide:m,centered:!0,scrollable:!0,children:[c.jsx(bB,{closeButton:!0,closeVariant:"white",className:"bg-[#151f3e]"}),c.jsx(vn.Body,{className:"contact-modal-card",children:i&&c.jsxs("div",{className:"m-4",children:[c.jsxs("div",{className:"modal-contact-header",children:[c.jsx("div",{className:"user-avatar-card",children:c.jsx(Ir,{name:i.name,size:"100",src:""})}),c.jsx("div",{className:"my-2",children:c.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:i.name})})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-base font-semibold text-white",children:"Correo electrnico"}),c.jsxs("div",{className:"flex m-2",children:[c.jsx(gg,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsx("a",{href:`mailto:${i.email}`,className:"contact-modal-content-a",children:i.email})]})]}),c.jsx("div",{className:"contact-modal-separador"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-base font-semibold text-white",children:"Telfono"}),c.jsxs("div",{className:"flex m-2",children:[c.jsx(Wc,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsx("a",{href:`tel:${i.phone}`,className:"contact-modal-content-a",children:i.phone})]})]}),c.jsx("div",{className:"contact-modal-separador"}),c.jsx("p",{className:"text-base font-semibold text-white",children:"Empresa"}),c.jsxs("div",{className:"flex m-2",children:[c.jsx(rf,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsx("p",{className:"contact-modal-content",children:i.company})]}),c.jsx("div",{className:"contact-modal-separador"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-base font-semibold text-white",children:"Cargo"}),c.jsxs("div",{className:"flex m-2",children:[c.jsx(ZU,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsx("p",{className:"contact-modal-content",children:i.position})]})]}),c.jsx("div",{className:"contact-modal-separador"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-base font-semibold text-white",children:"Sitio Web"}),c.jsxs("div",{className:"flex m-2",children:[c.jsx(FI,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsx("p",{className:"contact-modal-content",children:i.url_web_company!=""?c.jsx(c.Fragment,{children:c.jsx("a",{href:`https://${i.url_web_company}`,className:"contact-modal-content-a",target:"_blank",rel:"noopener noreferrer",children:i.url_web_company})}):c.jsxs(c.Fragment,{children:[" ",c.jsx("p",{children:"No hay web registrada"})]})})]})]}),c.jsx("div",{className:"contact-modal-separador"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-base font-semibold text-white",children:"Notas"}),c.jsxs("div",{className:"flex m-2",children:[c.jsx(wU,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),c.jsxs("p",{className:"contact-modal-content",children:[" ",i.notes!=""?c.jsx(c.Fragment,{children:c.jsx("p",{children:i.notes})}):c.jsxs(c.Fragment,{children:[" ",c.jsx("p",{children:"No hay nota registrada"})]})]})]})]}),c.jsx("div",{className:"contact-modal-separador"}),localStorage.getItem("id_plan")!=6&&c.jsx(et,{variant:"primary",size:"sm",onClick:()=>{d(!0),u.id_contact_fk=i.id_contact,m()},className:"inline-flex items-center rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500",children:"Crear Tarea"})]})})]}),c.jsx(ln,{appear:!0,show:I,as:v.Fragment,children:c.jsxs(rn,{as:"div",className:"relative z-10",onClose:()=>d(!1),children:[c.jsx(ln.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),c.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:c.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:c.jsx(ln.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:c.jsxs(rn.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[c.jsx(rn.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Crear nueva tarea"}),c.jsxs("form",{onSubmit:f,children:[c.jsx("div",{className:"mt-2",children:c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Ttulo",c.jsx("input",{type:"text",name:"title",className:"mt-1 block w-full rounded-md bg-white p-2 border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",value:u.title,onChange:h,required:!0})]})}),c.jsx("div",{className:"mt-2",children:c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Detalles",c.jsx("textarea",{name:"details",rows:"3",className:"mt-1 block w-full rounded-md bg-white p-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:u.details,onChange:h,required:!0})]})}),c.jsx("div",{className:"mt-2",children:c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Fecha de Inicio",c.jsx("input",{type:"date",name:"start_date",className:"mt-1 block w-full rounded-md bg-white p-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:u.start_date,onChange:h,required:!0})]})}),c.jsx("div",{className:"mt-2",children:c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Fecha de Fin",c.jsx("input",{type:"date",name:"end_date",className:"mt-1 block w-full rounded-md bg-white p-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:u.end_date,onChange:h,required:!0})]})}),c.jsxs("div",{className:"mt-4",children:[c.jsx("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-orange-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Guardar"}),c.jsx("button",{type:"button",className:"ml-2 inline-flex justify-center rounded-md border border-transparent bg-gray-300 px-4 py-2 text-sm font-medium text-black shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",onClick:()=>d(!1),children:"Cancelar"})]})]})]})})})})]})})]})}const uf=()=>{const e="https://api.knowmeapp.com",t=localStorage.getItem("token"),{user:n}=v.useContext(yt);return{getOrgUser:async()=>{let a;if(a=await pe.get(`${e}/api/org_users_detail/owner/${n.id}`,{headers:{"x-token":t}}),a.data.ok){const{orgUsersDetail:g}=a.data;return a=await pe.get(`${e}/api/organization/${g.id_organization_fk}`,{headers:{"x-token":t}}),a={owner:g.owner,...a},a}else return a},createOrg:async a=>{let g;if(g=await pe.post(`${e}/api/organization`,a,{headers:{"x-token":t}}),g.data.ok){const{organization:s}=g.data,I={id_organization_fk:s.id_organization,id_user_fk:n.id,owner:!0};return g=await pe.post(`${e}/api/org_users_detail`,I,{headers:{"x-token":t}}),g}return g},updateOrg:async a=>await pe.put(`${e}/api/organization/${a.id_organization}`,a,{headers:{"x-token":t}}),getUsersTeamOrg:async()=>{let a;return a=await pe.get(`${e}/api/user/owner/${n.id}`,{headers:{"x-token":t}}),a.data.ok,a}}},xQ=e=>{const{userOrg:t}=e,[n,l]=v.useState(null),[r,o]=v.useState(null),i=It(),a=()=>{i("/info_org",{state:{userOrg:t}})};return v.useEffect(()=>{l(t.logo_url??null),o(t.cover_url??null)},[]),c.jsxs("div",{className:"bg-gray-900/50 rounded-lg mt-2 pt-6 px-10 w-full max-w-3xl",children:[c.jsxs("div",{className:"relative items-center gap-x-3 h-36 mb-4",children:[n?c.jsx("img",{src:n,alt:"Selected",className:"h-16 w-16 rounded-full border-white border-2 object-cover absolute bottom-0 left-5 z-10"}):c.jsx(iV,{className:"h-16 w-16 text-white absolute bottom-0 left-5 z-10","aria-hidden":"true"}),c.jsx("div",{className:"rounded-lg w-full h-28 absolute top-0 left-0 z-0 overflow-hidden",children:c.jsx("div",{className:"front-page",style:{backgroundImage:`url("${r??ci}")`}})})]}),c.jsxs("div",{className:"px-4 sm:px-0",children:[c.jsx("h3",{className:"text-base font-semibold leading-7 text-white",children:t.name}),c.jsx("p",{className:"mt-1 max-w-2xl text-sm leading-6 text-white",children:t.industry})]}),c.jsxs("div",{className:"mt-6 border-t border-blue-100/20",children:[c.jsxs("dl",{className:"divide-y divide-blue-100/20",children:[c.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[c.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Razn social"}),c.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.business_name})]}),c.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[c.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Domicilio fiscal"}),c.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.fiscal_address})]}),c.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[c.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Telfono"}),c.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.phone})]}),c.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[c.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Correo"}),c.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.email})]}),c.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[c.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Web"}),c.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.website})]})]}),c.jsx("div",{className:" py-4",children:c.jsx("button",{type:"button",onClick:a,disabled:!t.owner,className:`inline-flex items-center rounded-md  px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${t.owner??!1?"bg-orange-500 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500 hover:bg-orange-600 cursor-pointer":"bg-gray-500 focus-visible:outline-gray-600 border-gray-600 hover:border-gray-500 hover:bg-gray-600 cursor-not-allowed"}`,children:"Actualizar informacin"})})]})]})};function Iy(){const[e,t]=v.useState({});localStorage.getItem("token"),v.useContext(yt);const[n,l]=v.useState(!0),r=It(),o=uf();v.useEffect(()=>{i()},[]);const i=async()=>{const{data:s,owner:I}=await o.getOrgUser();s.ok?t({...s.organization,owner:I}):t({}),l(!1)},a=()=>{r("/team_org",{state:{userOrg:e}})},g=()=>{r("/info_org")};return n?c.jsx(c.Fragment,{children:c.jsx(Vr,{fullScreen:!0})}):c.jsx(c.Fragment,{children:c.jsxs("div",{className:"agenda-container",children:[c.jsxs("div",{className:"agenda-header",children:[c.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Tu empresa"}),e.name?c.jsxs("div",{className:"my-4",children:[c.jsx(xQ,{userOrg:e}),c.jsx("div",{className:"my-4 max-w-3xl",children:c.jsxs("div",{className:"bg-gray-900/50 px-10 rounded-lg mt-2 pt-6",children:[c.jsxs("div",{className:"sm:px-0",children:[c.jsxs("h3",{className:"text-base font-semibold leading-7 text-white",children:["Team: ",e.name]}),c.jsx("p",{className:"mt-1 max-w-2xl text-sm leading-6 text-white",children:"Gestiona los miembros de tu organizacin."})]}),c.jsx("div",{className:"py-4",children:c.jsx("button",{type:"button",onClick:a,disabled:!e.owner,className:`inline-flex items-center rounded-md  px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${e.owner??!1?"bg-orange-500 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500 hover:bg-orange-600 cursor-pointer":"bg-gray-500 focus-visible:outline-gray-600 border-gray-600 hover:border-gray-500 hover:bg-gray-600 cursor-not-allowed"}`,children:"Gestionar usuarios"})})]})})]}):c.jsx("div",{className:"my-4",children:c.jsxs("div",{className:"bg-gray-900/50 rounded-lg mt-2 pt-6",children:[c.jsxs("div",{className:"px-4 sm:px-0",children:[c.jsx("h3",{className:"text-base font-semibold leading-7 text-white",children:"No tienes una organizacin an "}),c.jsx("p",{className:"mt-1 max-w-2xl text-sm leading-6 text-white",children:"Completa los datos para tu organizacin y empieza a crear usuarios."})]}),c.jsx("div",{className:" p-4",children:c.jsx("button",{type:"button",onClick:g,disabled:localStorage.getItem(!1),className:`inline-flex items-center rounded-md  px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${localStorage.getItem("id_plan")==="9"?"bg-orange-500 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500 hover:bg-orange-600 cursor-pointer":"bg-gray-500 focus-visible:outline-gray-600 border-gray-600 hover:border-gray-500 hover:bg-gray-600 cursor-not-allowed"}`,children:"Completa el registro de tu organizacin"})})]})})]}),c.jsx("div",{className:"h-40"})]})})}function JQ(){const e="https://api.knowmeapp.com",[t,n]=v.useState({email:""}),l=It(),[r,o]=v.useState(""),i=g=>{n({...t,[g.target.name]:g.target.value})},a=async g=>{g.preventDefault(),o("");try{const s=await pe.post(`${e}/api/auth/request-reset`,t);o(""),s.status===200&&l("/emailSent")}catch(s){console.error("Error al enviar el formulario:",s),o(`El email ${t.email} no esta registrado`)}};return c.jsxs(c.Fragment,{children:[c.jsx(Ch,{className:"registro-back",size:33,color:"#FD6202",onClick:()=>{l("/login")}}),c.jsxs("div",{className:"forgot-container max-w-5xl mx-auto",children:[c.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Recupera tu cuenta"}),c.jsx("p",{children:"Cul es tu correo electrnico?"}),c.jsx("form",{onSubmit:a,className:"form-forget",children:c.jsxs("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-3",children:[c.jsxs("div",{className:"col-span-full",children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Correo:"}),c.jsx("input",{type:"email",name:"email",id:"email",className:"block w-full rounded-md border-0 p-2 bg-white text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-orange-600 sm:text-sm sm:leading-6",value:t.email,onChange:i,placeholder:"correo electrnico"}),c.jsx("div",{className:"error-mail",children:r})]}),c.jsx("div",{className:"sm:col-span-3 flex items-end justify-end",children:c.jsx("button",{type:"submit",className:"inline-flex items-center rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Restablecer Contrasea"})})]})})]})]})}function NQ(){const e=It();return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"emailSent-container max-w-5xl mx-auto",children:[c.jsx("h3",{className:"text-base font-semibold leading-7 text-white ",children:"Se envi el correo electrnico"}),c.jsx("p",{className:"py-2",children:"Enviamos un correo electrnico. Si este correo est vinculado a una cuenta Know Me, podrs restablecer tu contrasea."}),c.jsx("div",{className:"backtohome hover:text-orange-500",onClick:()=>{e("/login/")},children:"Volver al inicio"})]})})}function YQ(){const e="https://api.knowmeapp.com",[t,n]=v.useState(!1),[l,r]=v.useState({newPassword:"",token:""}),o=It(),[i,a]=v.useState(""),g=26,s=cn();v.useEffect(()=>{const h=new URLSearchParams(s.search).get("token");h&&r({...l,token:h})},[s.search]);const I=()=>{n(!t)},d=C=>{r({...l,[C.target.name]:C.target.value})},u=async C=>{if(C.preventDefault(),a(""),l.newPassword!==l.confirmPassword){a("Las contraseas no coinciden");return}try{const h=await pe.post(`${e}/api/auth/reset`,l);a(""),h.status===200&&o("/login")}catch(h){console.error("Error al enviar el formulario:",h),a("Ocurrio un problema por favor intenta de nuevo")}};return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"forgot-container",children:[c.jsx("h3",{children:"Ingresa tu nueva contrasea"}),c.jsx("p",{}),c.jsxs("form",{onSubmit:u,className:"form-forget",children:[c.jsxs("div",{children:[c.jsx("div",{children:c.jsx("label",{children:"Contrasea:"})}),c.jsxs("div",{className:"login-password",children:[c.jsx("input",{type:t?"text":"password",className:"contact-input-recover",placeholder:"******",value:l.newPassword,name:"newPassword",onChange:d}),t?c.jsx(co,{size:g,color:"#fff",className:"eye-icon",onClick:I}):c.jsx(so,{size:g,color:"#fff",className:"eye-icon",onClick:I})]})]}),c.jsxs("div",{className:"mt-5",children:[c.jsx("div",{children:c.jsx("label",{children:"Reingresa Contrasea:"})}),c.jsxs("div",{className:"login-password",children:[c.jsx("input",{type:t?"text":"password",className:"contact-input-recover",placeholder:"******",name:"confirmPassword",onChange:d}),t?c.jsx(co,{size:g,color:"#fff",className:"eye-icon",onClick:I}):c.jsx(so,{size:g,color:"#fff",className:"eye-icon",onClick:I})]})]}),c.jsx("div",{className:"error-mail",children:i}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"forgot-btn",children:"Restablecer Contrasea"})})]})]})})}var jA={exports:{}},jg={exports:{}},pu={},dy;function BV(){return dy||(dy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,a){for(var g in a)Object.defineProperty(i,g,{enumerable:!0,get:a[g]})}t(e,{assign:function(){return o},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return r}});function n(i){const a={};return i.forEach((g,s)=>{typeof a[s]>"u"?a[s]=g:Array.isArray(a[s])?a[s].push(g):a[s]=[a[s],g]}),a}function l(i){return typeof i=="string"||typeof i=="number"&&!isNaN(i)||typeof i=="boolean"?String(i):""}function r(i){const a=new URLSearchParams;return Object.entries(i).forEach(g=>{let[s,I]=g;Array.isArray(I)?I.forEach(d=>a.append(s,l(d))):a.set(s,l(I))}),a}function o(i){for(var a=arguments.length,g=new Array(a>1?a-1:0),s=1;s<a;s++)g[s-1]=arguments[s];return g.forEach(I=>{Array.from(I.keys()).forEach(d=>i.delete(d)),I.forEach((d,u)=>i.append(u,d))}),i}}(pu)),pu}var bu={},uy;function SV(){return uy||(uy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,s){for(var I in s)Object.defineProperty(g,I,{enumerable:!0,get:s[I]})}t(e,{formatUrl:function(){return o},formatWithValidation:function(){return a},urlObjectKeys:function(){return i}});const l=La._(BV()),r=/https?|ftp|gopher|file/;function o(g){let{auth:s,hostname:I}=g,d=g.protocol||"",u=g.pathname||"",C=g.hash||"",h=g.query||"",f=!1;s=s?encodeURIComponent(s).replace(/%3A/i,":")+"@":"",g.host?f=s+g.host:I&&(f=s+(~I.indexOf(":")?"["+I+"]":I),g.port&&(f+=":"+g.port)),h&&typeof h=="object"&&(h=String(l.urlQueryToSearchParams(h)));let y=g.search||h&&"?"+h||"";return d&&!d.endsWith(":")&&(d+=":"),g.slashes||(!d||r.test(d))&&f!==!1?(f="//"+(f||""),u&&u[0]!=="/"&&(u="/"+u)):f||(f=""),C&&C[0]!=="#"&&(C="#"+C),y&&y[0]!=="?"&&(y="?"+y),u=u.replace(/[?#]/g,encodeURIComponent),y=y.replace("#","%23"),""+d+f+u+y+C}const i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function a(g){return o(g)}}(bu)),bu}var yu={},Cy;function HQ(){return Cy||(Cy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"omit",{enumerable:!0,get:function(){return t}});function t(n,l){const r={};return Object.keys(n).forEach(o=>{l.includes(o)||(r[o]=n[o])}),r}}(yu)),yu}var Zu={},Ay;function qI(){return Ay||(Ay=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(b,Z){for(var V in Z)Object.defineProperty(b,V,{enumerable:!0,get:Z[V]})}t(e,{DecodeError:function(){return h},MiddlewareNotFoundError:function(){return m},MissingStaticPage:function(){return A},NormalizeError:function(){return f},PageNotFoundError:function(){return y},SP:function(){return u},ST:function(){return C},WEB_VITALS:function(){return n},execOnce:function(){return l},getDisplayName:function(){return g},getLocationOrigin:function(){return i},getURL:function(){return a},isAbsoluteUrl:function(){return o},isResSent:function(){return s},loadGetInitialProps:function(){return d},normalizeRepeatedSlashes:function(){return I},stringifyError:function(){return p}});const n=["CLS","FCP","FID","INP","LCP","TTFB"];function l(b){let Z=!1,V;return function(){for(var S=arguments.length,G=new Array(S),w=0;w<S;w++)G[w]=arguments[w];return Z||(Z=!0,V=b(...G)),V}}const r=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=b=>r.test(b);function i(){const{protocol:b,hostname:Z,port:V}=window.location;return b+"//"+Z+(V?":"+V:"")}function a(){const{href:b}=window.location,Z=i();return b.substring(Z.length)}function g(b){return typeof b=="string"?b:b.displayName||b.name||"Unknown"}function s(b){return b.finished||b.headersSent}function I(b){const Z=b.split("?");return Z[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(Z[1]?"?"+Z.slice(1).join("?"):"")}async function d(b,Z){const V=Z.res||Z.ctx&&Z.ctx.res;if(!b.getInitialProps)return Z.ctx&&Z.Component?{pageProps:await d(Z.Component,Z.ctx)}:{};const S=await b.getInitialProps(Z);if(V&&s(V))return S;if(!S){const G='"'+g(b)+'.getInitialProps()" should resolve to an object. But found "'+S+'" instead.';throw new Error(G)}return S}const u=typeof performance<"u",C=u&&["mark","measure","getEntriesByName"].every(b=>typeof performance[b]=="function");class h extends Error{}class f extends Error{}class y extends Error{constructor(Z){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+Z}}class A extends Error{constructor(Z,V){super(),this.message="Failed to load static file for page: "+Z+" "+V}}class m extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function p(b){return JSON.stringify({message:b.message,stack:b.stack})}}(Zu)),Zu}var Ug={exports:{}},vu={},my;function VV(){return my||(my=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"removeTrailingSlash",{enumerable:!0,get:function(){return t}});function t(n){return n.replace(/\/$/,"")||"/"}}(vu)),vu}var Gu={},hy;function Cf(){return hy||(hy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"parsePath",{enumerable:!0,get:function(){return t}});function t(n){const l=n.indexOf("#"),r=n.indexOf("?"),o=r>-1&&(l<0||r<l);return o||l>-1?{pathname:n.substring(0,o?r:l),query:o?n.substring(r,l>-1?l:void 0):"",hash:l>-1?n.slice(l):""}:{pathname:n,query:"",hash:""}}}(Gu)),Gu}var fy;function $I(){return fy||(fy=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return r}});const n=VV(),l=Cf(),r=o=>{if(!o.startsWith("/")||{}.__NEXT_MANUAL_TRAILING_SLASH)return o;const{pathname:i,query:a,hash:g}=(0,l.parsePath)(o);return{}.__NEXT_TRAILING_SLASH?/\.[^/]+\/?$/.test(i)?""+(0,n.removeTrailingSlash)(i)+a+g:i.endsWith("/")?""+i+a+g:i+"/"+a+g:""+(0,n.removeTrailingSlash)(i)+a+g};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Ug,Ug.exports)),Ug.exports}var Bu={},Dg={exports:{}},Su={},py;function WV(){return py||(py=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"pathHasPrefix",{enumerable:!0,get:function(){return n}});const t=Cf();function n(l,r){if(typeof l!="string")return!1;const{pathname:o}=(0,t.parsePath)(l);return o===r||o.startsWith(r+"/")}}(Su)),Su}var by;function FQ(){return by||(by=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hasBasePath",{enumerable:!0,get:function(){return r}});const n=WV(),l={}.__NEXT_ROUTER_BASEPATH||"";function r(o){return(0,n.pathHasPrefix)(o,l)}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Dg,Dg.exports)),Dg.exports}var yy;function RV(){return yy||(yy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isLocalURL",{enumerable:!0,get:function(){return l}});const t=qI(),n=FQ();function l(r){if(!(0,t.isAbsoluteUrl)(r))return!0;try{const o=(0,t.getLocationOrigin)(),i=new URL(r,o);return i.origin===o&&(0,n.hasBasePath)(i.pathname)}catch{return!1}}}(Bu)),Bu}var Vu={},Wu={},Zy;function KQ(){return Zy||(Zy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getSortedRoutes",{enumerable:!0,get:function(){return n}});class t{insert(r){this._insert(r.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(r){r===void 0&&(r="/");const o=[...this.children.keys()].sort();this.slugName!==null&&o.splice(o.indexOf("[]"),1),this.restSlugName!==null&&o.splice(o.indexOf("[...]"),1),this.optionalRestSlugName!==null&&o.splice(o.indexOf("[[...]]"),1);const i=o.map(a=>this.children.get(a)._smoosh(""+r+a+"/")).reduce((a,g)=>[...a,...g],[]);if(this.slugName!==null&&i.push(...this.children.get("[]")._smoosh(r+"["+this.slugName+"]/")),!this.placeholder){const a=r==="/"?"/":r.slice(0,-1);if(this.optionalRestSlugName!=null)throw new Error('You cannot define a route with the same specificity as a optional catch-all route ("'+a+'" and "'+a+"[[..."+this.optionalRestSlugName+']]").');i.unshift(a)}return this.restSlugName!==null&&i.push(...this.children.get("[...]")._smoosh(r+"[..."+this.restSlugName+"]/")),this.optionalRestSlugName!==null&&i.push(...this.children.get("[[...]]")._smoosh(r+"[[..."+this.optionalRestSlugName+"]]/")),i}_insert(r,o,i){if(r.length===0){this.placeholder=!1;return}if(i)throw new Error("Catch-all must be the last part of the URL.");let a=r[0];if(a.startsWith("[")&&a.endsWith("]")){let d=function(u,C){if(u!==null&&u!==C)throw new Error("You cannot use different slug names for the same dynamic path ('"+u+"' !== '"+C+"').");o.forEach(h=>{if(h===C)throw new Error('You cannot have the same slug name "'+C+'" repeat within a single dynamic path');if(h.replace(/\W/g,"")===a.replace(/\W/g,""))throw new Error('You cannot have the slug names "'+h+'" and "'+C+'" differ only by non-word symbols within a single dynamic path')}),o.push(C)};var g=d;let s=a.slice(1,-1),I=!1;if(s.startsWith("[")&&s.endsWith("]")&&(s=s.slice(1,-1),I=!0),s.startsWith("...")&&(s=s.substring(3),i=!0),s.startsWith("[")||s.endsWith("]"))throw new Error("Segment names may not start or end with extra brackets ('"+s+"').");if(s.startsWith("."))throw new Error("Segment names may not start with erroneous periods ('"+s+"').");if(i)if(I){if(this.restSlugName!=null)throw new Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+r[0]+'" ).');d(this.optionalRestSlugName,s),this.optionalRestSlugName=s,a="[[...]]"}else{if(this.optionalRestSlugName!=null)throw new Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+r[0]+'").');d(this.restSlugName,s),this.restSlugName=s,a="[...]"}else{if(I)throw new Error('Optional route parameters are not yet supported ("'+r[0]+'").');d(this.slugName,s),this.slugName=s,a="[]"}}this.children.has(a)||this.children.set(a,new t),this.children.get(a)._insert(r.slice(1),o,i)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(l){const r=new t;return l.forEach(o=>r.insert(o)),r.smoosh()}}(Wu)),Wu}var Ru={},wu={},ku={},Xu={},vy;function EQ(){return vy||(vy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ensureLeadingSlash",{enumerable:!0,get:function(){return t}});function t(n){return n.startsWith("/")?n:"/"+n}}(Xu)),Xu}var xu={},Gy;function MQ(){return Gy||(Gy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(o,i){for(var a in i)Object.defineProperty(o,a,{enumerable:!0,get:i[a]})}t(e,{DEFAULT_SEGMENT_KEY:function(){return r},PAGE_SEGMENT_KEY:function(){return l},isGroupSegment:function(){return n}});function n(o){return o[0]==="("&&o.endsWith(")")}const l="__PAGE__",r="__DEFAULT__"}(xu)),xu}var By;function TQ(){return By||(By=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,a){for(var g in a)Object.defineProperty(i,g,{enumerable:!0,get:a[g]})}t(e,{normalizeAppPath:function(){return r},normalizeRscURL:function(){return o}});const n=EQ(),l=MQ();function r(i){return(0,n.ensureLeadingSlash)(i.split("/").reduce((a,g,s,I)=>!g||(0,l.isGroupSegment)(g)||g[0]==="@"||(g==="page"||g==="route")&&s===I.length-1?a:a+"/"+g,""))}function o(i){return i.replace(/\.rsc($|\?)/,"$1")}}(ku)),ku}var Sy;function wV(){return Sy||(Sy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,a){for(var g in a)Object.defineProperty(i,g,{enumerable:!0,get:a[g]})}t(e,{INTERCEPTION_ROUTE_MARKERS:function(){return l},extractInterceptionRouteInformation:function(){return o},isInterceptionRouteAppPath:function(){return r}});const n=TQ(),l=["(..)(..)","(.)","(..)","(...)"];function r(i){return i.split("/").find(a=>l.find(g=>a.startsWith(g)))!==void 0}function o(i){let a,g,s;for(const I of i.split("/"))if(g=l.find(d=>I.startsWith(d)),g){[a,s]=i.split(g,2);break}if(!a||!g||!s)throw new Error(`Invalid interception route: ${i}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(a=(0,n.normalizeAppPath)(a),g){case"(.)":a==="/"?s=`/${s}`:s=a+"/"+s;break;case"(..)":if(a==="/")throw new Error(`Invalid interception route: ${i}. Cannot use (..) marker at the root level, use (.) instead.`);s=a.split("/").slice(0,-1).concat(s).join("/");break;case"(...)":s="/"+s;break;case"(..)(..)":const I=a.split("/");if(I.length<=2)throw new Error(`Invalid interception route: ${i}. Cannot use (..)(..) marker at the root level or one level up.`);s=I.slice(0,-2).concat(s).join("/");break;default:throw new Error("Invariant: unexpected marker")}return{interceptingRoute:a,interceptedRoute:s}}}(wu)),wu}var Vy;function LQ(){return Vy||(Vy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isDynamicRoute",{enumerable:!0,get:function(){return l}});const t=wV(),n=/\/\[[^/]+?\](?=\/|$)/;function l(r){return(0,t.isInterceptionRouteAppPath)(r)&&(r=(0,t.extractInterceptionRouteInformation)(r).interceptedRoute),n.test(r)}}(Ru)),Ru}var Wy;function zQ(){return Wy||(Wy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(r,o){for(var i in o)Object.defineProperty(r,i,{enumerable:!0,get:o[i]})}t(e,{getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return l.isDynamicRoute}});const n=KQ(),l=LQ()}(Vu)),Vu}var Ju={},Nu={},Ry;function jQ(){return Ry||(Ry=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getRouteMatcher",{enumerable:!0,get:function(){return n}});const t=qI();function n(l){let{re:r,groups:o}=l;return i=>{const a=r.exec(i);if(!a)return!1;const g=I=>{try{return decodeURIComponent(I)}catch{throw new t.DecodeError("failed to decode param")}},s={};return Object.keys(o).forEach(I=>{const d=o[I],u=a[d.pos];u!==void 0&&(s[I]=~u.indexOf("/")?u.split("/").map(C=>g(C)):d.repeat?[g(u)]:g(u))}),s}}}(Nu)),Nu}var Yu={},Hu={},wy;function UQ(){return wy||(wy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"escapeStringRegexp",{enumerable:!0,get:function(){return l}});const t=/[|\\{}()[\]^$+*?.-]/,n=/[|\\{}()[\]^$+*?.-]/g;function l(r){return t.test(r)?r.replace(n,"\\$&"):r}}(Hu)),Hu}var ky;function DQ(){return ky||(ky=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,y){for(var A in y)Object.defineProperty(f,A,{enumerable:!0,get:y[A]})}t(e,{getNamedMiddlewareRegex:function(){return h},getNamedRouteRegex:function(){return C},getRouteRegex:function(){return s}});const n=wV(),l=UQ(),r=VV(),o="nxtP",i="nxtI";function a(f){const y=f.startsWith("[")&&f.endsWith("]");y&&(f=f.slice(1,-1));const A=f.startsWith("...");return A&&(f=f.slice(3)),{key:f,repeat:A,optional:y}}function g(f){const y=(0,r.removeTrailingSlash)(f).slice(1).split("/"),A={};let m=1;return{parameterizedRoute:y.map(p=>{const b=n.INTERCEPTION_ROUTE_MARKERS.find(V=>p.startsWith(V)),Z=p.match(/\[((?:\[.*\])|.+)\]/);if(b&&Z){const{key:V,optional:S,repeat:G}=a(Z[1]);return A[V]={pos:m++,repeat:G,optional:S},"/"+(0,l.escapeStringRegexp)(b)+"([^/]+?)"}else if(Z){const{key:V,repeat:S,optional:G}=a(Z[1]);return A[V]={pos:m++,repeat:S,optional:G},S?G?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}else return"/"+(0,l.escapeStringRegexp)(p)}).join(""),groups:A}}function s(f){const{parameterizedRoute:y,groups:A}=g(f);return{re:new RegExp("^"+y+"(?:/)?$"),groups:A}}function I(){let f=0;return()=>{let y="",A=++f;for(;A>0;)y+=String.fromCharCode(97+(A-1)%26),A=Math.floor((A-1)/26);return y}}function d(f){let{interceptionMarker:y,getSafeRouteKey:A,segment:m,routeKeys:p,keyPrefix:b}=f;const{key:Z,optional:V,repeat:S}=a(m);let G=Z.replace(/\W/g,"");b&&(G=""+b+G);let w=!1;(G.length===0||G.length>30)&&(w=!0),isNaN(parseInt(G.slice(0,1)))||(w=!0),w&&(G=A()),b?p[G]=""+b+Z:p[G]=Z;const B=y?(0,l.escapeStringRegexp)(y):"";return S?V?"(?:/"+B+"(?<"+G+">.+?))?":"/"+B+"(?<"+G+">.+?)":"/"+B+"(?<"+G+">[^/]+?)"}function u(f,y){const A=(0,r.removeTrailingSlash)(f).slice(1).split("/"),m=I(),p={};return{namedParameterizedRoute:A.map(b=>{const Z=n.INTERCEPTION_ROUTE_MARKERS.some(S=>b.startsWith(S)),V=b.match(/\[((?:\[.*\])|.+)\]/);if(Z&&V){const[S]=b.split(V[0]);return d({getSafeRouteKey:m,interceptionMarker:S,segment:V[1],routeKeys:p,keyPrefix:y?i:void 0})}else return V?d({getSafeRouteKey:m,segment:V[1],routeKeys:p,keyPrefix:y?o:void 0}):"/"+(0,l.escapeStringRegexp)(b)}).join(""),routeKeys:p}}function C(f,y){const A=u(f,y);return{...s(f),namedRegex:"^"+A.namedParameterizedRoute+"(?:/)?$",routeKeys:A.routeKeys}}function h(f,y){const{parameterizedRoute:A}=g(f),{catchAll:m=!0}=y;if(A==="/")return{namedRegex:"^/"+(m?".*":"")+"$"};const{namedParameterizedRoute:p}=u(f,!1);let b=m?"(?:(/.*)?)":"";return{namedRegex:"^"+p+b+"$"}}}(Yu)),Yu}var Xy;function QQ(){return Xy||(Xy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"interpolateAs",{enumerable:!0,get:function(){return l}});const t=jQ(),n=DQ();function l(r,o,i){let a="";const g=(0,n.getRouteRegex)(r),s=g.groups,I=(o!==r?(0,t.getRouteMatcher)(g)(o):"")||i;a=r;const d=Object.keys(s);return d.every(u=>{let C=I[u]||"";const{repeat:h,optional:f}=s[u];let y="["+(h?"...":"")+u+"]";return f&&(y=(C?"":"/")+"["+y+"]"),h&&!Array.isArray(C)&&(C=[C]),(f||u in I)&&(a=a.replace(y,h?C.map(A=>encodeURIComponent(A)).join("/"):encodeURIComponent(C))||"/")})||(a=""),{params:d,result:a}}}(Ju)),Ju}var xy;function PQ(){return xy||(xy=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resolveHref",{enumerable:!0,get:function(){return I}});const n=BV(),l=SV(),r=HQ(),o=qI(),i=$I(),a=RV(),g=zQ(),s=QQ();function I(d,u,C){let h,f=typeof u=="string"?u:(0,l.formatWithValidation)(u);const y=f.match(/^[a-zA-Z]{1,}:\/\//),A=y?f.slice(y[0].length):f;if((A.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+f+"' passed to next/router in page: '"+d.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");const p=(0,o.normalizeRepeatedSlashes)(A);f=(y?y[0]:"")+p}if(!(0,a.isLocalURL)(f))return C?[f]:f;try{h=new URL(f.startsWith("#")?d.asPath:d.pathname,"http://n")}catch{h=new URL("/","http://n")}try{const p=new URL(f,h);p.pathname=(0,i.normalizePathTrailingSlash)(p.pathname);let b="";if((0,g.isDynamicRoute)(p.pathname)&&p.searchParams&&C){const V=(0,n.searchParamsToUrlQuery)(p.searchParams),{result:S,params:G}=(0,s.interpolateAs)(p.pathname,p.pathname,V);S&&(b=(0,l.formatWithValidation)({pathname:S,hash:p.hash,query:(0,r.omit)(V,G)}))}const Z=p.origin===h.origin?p.href.slice(p.origin.length):p.href;return C?[Z,b||Z]:Z}catch{return C?[f]:f}}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(jg,jg.exports)),jg.exports}var Qg={exports:{}},Fu={},Ku={},Jy;function kV(){return Jy||(Jy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addPathPrefix",{enumerable:!0,get:function(){return n}});const t=Cf();function n(l,r){if(!l.startsWith("/")||!r)return l;const{pathname:o,query:i,hash:a}=(0,t.parsePath)(l);return""+r+o+i+a}}(Ku)),Ku}var Ny;function OQ(){return Ny||(Ny=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addLocale",{enumerable:!0,get:function(){return l}});const t=kV(),n=WV();function l(r,o,i,a){if(!o||o===i)return r;const g=r.toLowerCase();return!a&&((0,n.pathHasPrefix)(g,"/api")||(0,n.pathHasPrefix)(g,"/"+o.toLowerCase()))?r:(0,t.addPathPrefix)(r,"/"+o)}}(Fu)),Fu}var Yy;function _Q(){return Yy||(Yy=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return l}});const n=$I(),l=function(r){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return{}.__NEXT_I18N_SUPPORT?(0,n.normalizePathTrailingSlash)(OQ().addLocale(r,...i)):r};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Qg,Qg.exports)),Qg.exports}var Eu={},Hy;function XV(){return Hy||(Hy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"RouterContext",{enumerable:!0,get:function(){return l}});const l=Tn._(v).default.createContext(null)}(Eu)),Eu}var Mu={},Fy;function qQ(){return Fy||(Fy=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0});function t(s,I){for(var d in I)Object.defineProperty(s,d,{enumerable:!0,get:I[d]})}t(e,{AppRouterContext:function(){return r},GlobalLayoutRouterContext:function(){return i},LayoutRouterContext:function(){return o},MissingSlotContext:function(){return g},TemplateContext:function(){return a}});const l=Tn._(v),r=l.default.createContext(null),o=l.default.createContext(null),i=l.default.createContext(null),a=l.default.createContext(null),g=l.default.createContext(new Set)}(Mu)),Mu}var Pg={exports:{}},Og={exports:{}},Ky;function $Q(){return Ky||(Ky=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(o,i){for(var a in i)Object.defineProperty(o,a,{enumerable:!0,get:i[a]})}n(t,{cancelIdleCallback:function(){return r},requestIdleCallback:function(){return l}});const l=typeof self<"u"&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(o){let i=Date.now();return self.setTimeout(function(){o({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-i))}})},1)},r=typeof self<"u"&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(o){return clearTimeout(o)};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Og,Og.exports)),Og.exports}var Ey;function eP(){return Ey||(Ey=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return s}});const n=v,l=$Q(),r=typeof IntersectionObserver=="function",o=new Map,i=[];function a(I){const d={root:I.root||null,margin:I.rootMargin||""},u=i.find(y=>y.root===d.root&&y.margin===d.margin);let C;if(u&&(C=o.get(u),C))return C;const h=new Map,f=new IntersectionObserver(y=>{y.forEach(A=>{const m=h.get(A.target),p=A.isIntersecting||A.intersectionRatio>0;m&&p&&m(p)})},I);return C={id:d,observer:f,elements:h},i.push(d),o.set(d,C),C}function g(I,d,u){const{id:C,observer:h,elements:f}=a(u);return f.set(I,d),h.observe(I),function(){if(f.delete(I),h.unobserve(I),f.size===0){h.disconnect(),o.delete(C);const A=i.findIndex(m=>m.root===C.root&&m.margin===C.margin);A>-1&&i.splice(A,1)}}}function s(I){let{rootRef:d,rootMargin:u,disabled:C}=I;const h=C||!r,[f,y]=(0,n.useState)(!1),A=(0,n.useRef)(null),m=(0,n.useCallback)(b=>{A.current=b},[]);(0,n.useEffect)(()=>{if(r){if(h||f)return;const b=A.current;if(b&&b.tagName)return g(b,V=>V&&y(V),{root:d==null?void 0:d.current,rootMargin:u})}else if(!f){const b=(0,l.requestIdleCallback)(()=>y(!0));return()=>(0,l.cancelIdleCallback)(b)}},[h,u,d,f,A.current]);const p=(0,n.useCallback)(()=>{y(!1)},[]);return[m,f,p]}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Pg,Pg.exports)),Pg.exports}var _g={exports:{}},qg={exports:{}},Tu={},My;function tP(){return My||(My=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"normalizeLocalePath",{enumerable:!0,get:function(){return t}});function t(n,l){let r;const o=n.split("/");return(l||[]).some(i=>o[1]&&o[1].toLowerCase()===i.toLowerCase()?(r=i,o.splice(1,1),n=o.join("/")||"/",!0):!1),{pathname:n,detectedLocale:r}}}(Tu)),Tu}var Ty;function nP(){return Ty||(Ty=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return n}});const n=(l,r)=>({}).__NEXT_I18N_SUPPORT?tP().normalizeLocalePath(l,r):{pathname:l,detectedLocale:void 0};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(qg,qg.exports)),qg.exports}var $g={exports:{}},Lu={},Ly;function lP(){return Ly||(Ly=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"detectDomainLocale",{enumerable:!0,get:function(){return t}});function t(n,l,r){if(n){r&&(r=r.toLowerCase());for(const a of n){var o,i;const g=(o=a.domain)==null?void 0:o.split(":",1)[0].toLowerCase();if(l===g||r===a.defaultLocale.toLowerCase()||(i=a.locales)!=null&&i.some(s=>s.toLowerCase()===r))return a}}}}(Lu)),Lu}var zy;function rP(){return zy||(zy=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectDomainLocale",{enumerable:!0,get:function(){return n}});const n=function(){for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];if({}.__NEXT_I18N_SUPPORT)return lP().detectDomainLocale(...r)};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}($g,$g.exports)),$g.exports}var jy;function oP(){return jy||(jy=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return r}});const n=$I(),l={}.__NEXT_ROUTER_BASEPATH||"";function r(o,i,a,g){if({}.__NEXT_I18N_SUPPORT){const s=nP().normalizeLocalePath,I=rP().detectDomainLocale,d=i||s(o,a).detectedLocale,u=I(g,void 0,d);if(u){const C="http"+(u.http?"":"s")+"://",h=d===u.defaultLocale?"":"/"+d;return""+C+u.domain+(0,n.normalizePathTrailingSlash)(""+l+h+o)}return!1}else return!1}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(_g,_g.exports)),_g.exports}var es={exports:{}},Uy;function iP(){return Uy||(Uy=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addBasePath",{enumerable:!0,get:function(){return o}});const n=kV(),l=$I(),r={}.__NEXT_ROUTER_BASEPATH||"";function o(i,a){return(0,l.normalizePathTrailingSlash)({}.__NEXT_MANUAL_CLIENT_BASE_PATH&&!a?i:(0,n.addPathPrefix)(i,r))}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(es,es.exports)),es.exports}var ts={exports:{}},Dy;function aP(){return Dy||(Dy=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(C,h){for(var f in h)Object.defineProperty(C,f,{enumerable:!0,get:h[f]})}n(t,{ACTION_FAST_REFRESH:function(){return g},ACTION_NAVIGATE:function(){return r},ACTION_PREFETCH:function(){return a},ACTION_REFRESH:function(){return l},ACTION_RESTORE:function(){return o},ACTION_SERVER_ACTION:function(){return s},ACTION_SERVER_PATCH:function(){return i},PrefetchCacheEntryStatus:function(){return d},PrefetchKind:function(){return I},isThenable:function(){return u}});const l="refresh",r="navigate",o="restore",i="server-patch",a="prefetch",g="fast-refresh",s="server-action";var I;(function(C){C.AUTO="auto",C.FULL="full",C.TEMPORARY="temporary"})(I||(I={}));var d;(function(C){C.fresh="fresh",C.reusable="reusable",C.expired="expired",C.stale="stale"})(d||(d={}));function u(C){return C&&(typeof C=="object"||typeof C=="function")&&typeof C.then=="function"}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(ts,ts.exports)),ts.exports}(function(e,t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return V}});const n=Tn,l=c,r=n._(v),o=PQ(),i=RV(),a=SV(),g=qI(),s=_Q(),I=XV(),d=qQ(),u=eP(),C=oP(),h=iP(),f=aP(),y=new Set;function A(S,G,w,B,W,R){if(typeof window>"u"||!R&&!(0,i.isLocalURL)(G))return;if(!B.bypassPrefetchedCheck){const x=typeof B.locale<"u"?B.locale:"locale"in S?S.locale:void 0,H=G+"%"+w+"%"+x;if(y.has(H))return;y.add(H)}const k=R?S.prefetch(G,W):S.prefetch(G,w,B);Promise.resolve(k).catch(x=>{})}function m(S){const w=S.currentTarget.getAttribute("target");return w&&w!=="_self"||S.metaKey||S.ctrlKey||S.shiftKey||S.altKey||S.nativeEvent&&S.nativeEvent.which===2}function p(S,G,w,B,W,R,k,x,H){const{nodeName:M}=S.currentTarget;if(M.toUpperCase()==="A"&&(m(S)||!H&&!(0,i.isLocalURL)(w)))return;S.preventDefault();const E=()=>{const N=k??!0;"beforePopState"in G?G[W?"replace":"push"](w,B,{shallow:R,locale:x,scroll:N}):G[W?"replace":"push"](B||w,{scroll:N})};H?r.default.startTransition(E):E()}function b(S){return typeof S=="string"?S:(0,a.formatUrl)(S)}const V=r.default.forwardRef(function(G,w){let B;const{href:W,as:R,children:k,prefetch:x=null,passHref:H,replace:M,shallow:T,scroll:E,locale:N,onClick:J,onMouseEnter:X,onTouchStart:Y,legacyBehavior:F=!1,...z}=G;B=k,F&&(typeof B=="string"||typeof B=="number")&&(B=(0,l.jsx)("a",{children:B}));const L=r.default.useContext(I.RouterContext),K=r.default.useContext(d.AppRouterContext),j=L??K,D=!L,Q=x!==!1,O=x===null?f.PrefetchKind.AUTO:f.PrefetchKind.FULL,{href:ne,as:oe}=r.default.useMemo(()=>{if(!L){const Ae=b(W);return{href:Ae,as:R?b(R):Ae}}const[_,Ie]=(0,o.resolveHref)(L,W,!0);return{href:_,as:R?(0,o.resolveHref)(L,R):Ie||_}},[L,W,R]),ae=r.default.useRef(ne),ce=r.default.useRef(oe);let ie;F&&(ie=r.default.Children.only(B));const Ze=F?ie&&typeof ie=="object"&&ie.ref:w,[ve,P,q]=(0,u.useIntersection)({rootMargin:"200px"}),te=r.default.useCallback(_=>{(ce.current!==oe||ae.current!==ne)&&(q(),ce.current=oe,ae.current=ne),ve(_),Ze&&(typeof Ze=="function"?Ze(_):typeof Ze=="object"&&(Ze.current=_))},[oe,Ze,ne,q,ve]);r.default.useEffect(()=>{j&&(!P||!Q||A(j,ne,oe,{locale:N},{kind:O},D))},[oe,ne,P,N,Q,L==null?void 0:L.locale,j,D,O]);const le={ref:te,onClick(_){!F&&typeof J=="function"&&J(_),F&&ie.props&&typeof ie.props.onClick=="function"&&ie.props.onClick(_),j&&(_.defaultPrevented||p(_,j,ne,oe,M,T,E,N,D))},onMouseEnter(_){!F&&typeof X=="function"&&X(_),F&&ie.props&&typeof ie.props.onMouseEnter=="function"&&ie.props.onMouseEnter(_),j&&(!Q&&D||A(j,ne,oe,{locale:N,priority:!0,bypassPrefetchedCheck:!0},{kind:O},D))},onTouchStart:{}.__NEXT_LINK_NO_TOUCH_START?void 0:function(Ie){!F&&typeof Y=="function"&&Y(Ie),F&&ie.props&&typeof ie.props.onTouchStart=="function"&&ie.props.onTouchStart(Ie),j&&(!Q&&D||A(j,ne,oe,{locale:N,priority:!0,bypassPrefetchedCheck:!0},{kind:O},D))}};if((0,g.isAbsoluteUrl)(oe))le.href=oe;else if(!F||H||ie.type==="a"&&!("href"in ie.props)){const _=typeof N<"u"?N:L==null?void 0:L.locale,Ie=(L==null?void 0:L.isLocaleDomain)&&(0,C.getDomainLocale)(oe,_,L==null?void 0:L.locales,L==null?void 0:L.domainLocales);le.href=Ie||(0,h.addBasePath)((0,s.addLocale)(oe,_,L==null?void 0:L.defaultLocale))}return F?r.default.cloneElement(ie,le):(0,l.jsx)("a",{...z,...le,children:B})});(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)})(jA,jA.exports);var gP=jA.exports,sP=gP;const Af=Ln(sP),cP={solid:"inline-flex justify-center rounded-lg py-2 px-3 text-sm font-semibold outline-2 outline-offset-2 transition-colors",outline:"inline-flex justify-center rounded-lg border py-[calc(theme(spacing.2)-1px)] px-[calc(theme(spacing.3)-1px)] text-sm outline-2 outline-offset-2 transition-colors"},Qy={solid:{cyan:"relative overflow-hidden bg-cyan-500 text-white before:absolute before:inset-0 active:before:bg-transparent hover:before:bg-white/10 active:bg-cyan-600 active:text-white/80 before:transition-colors",white:"bg-white text-cyan-900 hover:bg-white/90 active:bg-white/90 active:text-cyan-900/70",gray:"bg-gray-800 text-white hover:bg-gray-900 active:bg-gray-800 active:text-white/80"},outline:{gray:"border-gray-300 text-gray-700 hover:border-gray-400 active:bg-gray-100 active:text-gray-700/80"}},Eo=({className:e,...t})=>(t.variant??(t.variant="solid"),t.color??(t.color="gray"),e=tt(cP[t.variant],t.variant==="outline"?Qy.outline[t.color]:t.variant==="solid"?Qy.solid[t.color]:void 0,e),typeof t.href>"u"?c.jsx("button",{className:e,...t}):c.jsx(Af,{className:e,...t})),IP=({color:e,...t})=>{let n=v.useId();return c.jsxs("svg",{viewBox:"0 0 558 558",width:"558",height:"558",fill:"none","aria-hidden":"true",...t,children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:n,x1:"79",y1:"16",x2:"105",y2:"237",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{stopColor:e}),c.jsx("stop",{offset:"1",stopColor:e,stopOpacity:"0"})]})}),c.jsx("path",{opacity:".2",d:"M1 279C1 125.465 125.465 1 279 1s278 124.465 278 278-124.465 278-278 278S1 432.535 1 279Z",stroke:e}),c.jsx("path",{d:"M1 279C1 125.465 125.465 1 279 1",stroke:`url(#${n})`,strokeLinecap:"round"})]})},cg=({className:e,...t})=>c.jsx("div",{className:tt("mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",e),...t}),dP=()=>c.jsxs("section",{id:"get-free-shares-today",className:"relative overflow-hidden bg-gray-900 py-20 sm:py-28",children:[c.jsx("div",{className:"absolute left-20 top-1/2 -translate-y-1/2 sm:left-1/2 sm:-translate-x-1/2",children:c.jsx(IP,{color:"#fff",className:"animate-spin-slower"})}),c.jsx(cg,{className:"relative",children:c.jsxs("div",{className:"mx-auto max-w-md sm:text-center",children:[c.jsx("h2",{className:"text-3xl font-medium tracking-tight text-white sm:text-4xl",children:"Networking en un mundo digital"}),c.jsxs("ul",{children:[c.jsx("li",{className:"mt-4 text-lg text-gray-300",children:"Comparte tu informacin de contacto, botn directo a whatsapp, redes sociales, archivos, enlaces personalizados y mucho ms."}),c.jsx("li",{className:"mt-4 text-lg text-gray-300",children:"Efecto WOW garantizado."}),c.jsxs("li",{className:"mt-4 text-lg text-gray-300",children:["Comparte tu perfil con tu tarjeta NFC sin contacto, por cdigo qr o tu link."," "]}),c.jsx("li",{className:"mt-4 text-lg text-gray-300",children:"Gestiona tus contactos y vuelve tu red ms eficiente."})]}),c.jsx("div",{className:"mt-8 flex justify-center",children:c.jsx(Eo,{href:"/registro",className:"hidden lg:block",children:"Unirme ahora"})})]})})]});var xV={},mf={},JV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getImageBlurSvg",{enumerable:!0,get:function(){return t}});function t(n){let{widthInt:l,heightInt:r,blurWidth:o,blurHeight:i,blurDataURL:a,objectFit:g}=n;const s=20,I=o?o*40:l,d=i?i*40:r,u=I&&d?"viewBox='0 0 "+I+" "+d+"'":"",C=u?"none":g==="contain"?"xMidYMid":g==="cover"?"xMidYMid slice":"none";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+u+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='"+s+"'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='"+s+"'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+C+"' style='filter: url(%23b);' href='"+a+"'/%3E%3C/svg%3E"}})(JV);var ed={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(r,o){for(var i in o)Object.defineProperty(r,i,{enumerable:!0,get:o[i]})}t(e,{VALID_LOADERS:function(){return n},imageConfigDefault:function(){return l}});const n=["default","imgix","cloudinary","akamai","custom"],l={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}})(ed);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getImgProps",{enumerable:!0,get:function(){return s}}),of();const t=JV,n=ed;function l(I){return I.default!==void 0}function r(I){return I.src!==void 0}function o(I){return typeof I=="object"&&(l(I)||r(I))}function i(I){return typeof I>"u"?I:typeof I=="number"?Number.isFinite(I)?I:NaN:typeof I=="string"&&/^[0-9]+$/.test(I)?parseInt(I,10):NaN}function a(I,d,u){let{deviceSizes:C,allSizes:h}=I;if(u){const y=/(^|\s)(1?\d?\d)vw/g,A=[];for(let m;m=y.exec(u);m)A.push(parseInt(m[2]));if(A.length){const m=Math.min(...A)*.01;return{widths:h.filter(p=>p>=C[0]*m),kind:"w"}}return{widths:h,kind:"w"}}return typeof d!="number"?{widths:C,kind:"w"}:{widths:[...new Set([d,d*2].map(y=>h.find(A=>A>=y)||h[h.length-1]))],kind:"x"}}function g(I){let{config:d,src:u,unoptimized:C,width:h,quality:f,sizes:y,loader:A}=I;if(C)return{src:u,srcSet:void 0,sizes:void 0};const{widths:m,kind:p}=a(d,h,y),b=m.length-1;return{sizes:!y&&p==="w"?"100vw":y,srcSet:m.map((Z,V)=>A({config:d,src:u,quality:f,width:Z})+" "+(p==="w"?Z:V+1)+p).join(", "),src:A({config:d,src:u,quality:f,width:m[b]})}}function s(I,d){let{src:u,sizes:C,unoptimized:h=!1,priority:f=!1,loading:y,className:A,quality:m,width:p,height:b,fill:Z=!1,style:V,overrideSrc:S,onLoad:G,onLoadingComplete:w,placeholder:B="empty",blurDataURL:W,fetchPriority:R,layout:k,objectFit:x,objectPosition:H,lazyBoundary:M,lazyRoot:T,...E}=I;const{imgConf:N,showAltText:J,blurComplete:X,defaultLoader:Y}=d;let F,z=N||n.imageConfigDefault;if("allSizes"in z)F=z;else{const te=[...z.deviceSizes,...z.imageSizes].sort((_,Ie)=>_-Ie),le=z.deviceSizes.sort((_,Ie)=>_-Ie);F={...z,allSizes:te,deviceSizes:le}}if(typeof Y>"u")throw new Error(`images.loaderFile detected but the file is missing default export.
Read more: https://nextjs.org/docs/messages/invalid-images-config`);let L=E.loader||Y;delete E.loader,delete E.srcSet;const K="__next_img_default"in L;if(K){if(F.loader==="custom")throw new Error('Image with src "'+u+`" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`)}else{const te=L;L=le=>{const{config:_,...Ie}=le;return te(Ie)}}if(k){k==="fill"&&(Z=!0);const te={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}},le={responsive:"100vw",fill:"100vw"},_=te[k];_&&(V={...V,..._});const Ie=le[k];Ie&&!C&&(C=Ie)}let j="",D=i(p),Q=i(b),O,ne;if(o(u)){const te=l(u)?u.default:u;if(!te.src)throw new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(te));if(!te.height||!te.width)throw new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(te));if(O=te.blurWidth,ne=te.blurHeight,W=W||te.blurDataURL,j=te.src,!Z){if(!D&&!Q)D=te.width,Q=te.height;else if(D&&!Q){const le=D/te.width;Q=Math.round(te.height*le)}else if(!D&&Q){const le=Q/te.height;D=Math.round(te.width*le)}}}u=typeof u=="string"?u:j;let oe=!f&&(y==="lazy"||typeof y>"u");(!u||u.startsWith("data:")||u.startsWith("blob:"))&&(h=!0,oe=!1),F.unoptimized&&(h=!0),K&&u.endsWith(".svg")&&!F.dangerouslyAllowSVG&&(h=!0),f&&(R="high");const ae=i(m),ce=Object.assign(Z?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:x,objectPosition:H}:{},J?{}:{color:"transparent"},V),ie=!X&&B!=="empty"?B==="blur"?'url("data:image/svg+xml;charset=utf-8,'+(0,t.getImageBlurSvg)({widthInt:D,heightInt:Q,blurWidth:O,blurHeight:ne,blurDataURL:W||"",objectFit:ce.objectFit})+'")':'url("'+B+'")':null;let Ze=ie?{backgroundSize:ce.objectFit||"cover",backgroundPosition:ce.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:ie}:{};const ve=g({config:F,src:u,unoptimized:h,width:D,quality:ae,sizes:C,loader:L});return{props:{...E,loading:oe?"lazy":y,fetchPriority:R,width:D,height:Q,decoding:"async",className:A,style:{...ce,...Ze},sizes:ve.sizes,srcSet:ve.srcSet,src:S||ve.src},meta:{unoptimized:h,priority:f,placeholder:B,fill:Z}}}})(mf);var UA={exports:{}},zu={},Py;function uP(){return Py||(Py=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ImageConfigContext",{enumerable:!0,get:function(){return r}});const n=Tn._(v),l=ed,r=n.default.createContext(l.imageConfigDefault)}(zu)),zu}var ju={},Oy;function NV(){return Oy||(Oy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}});function t(l){let{config:r,src:o,width:i,quality:a}=l;return r.path+"?url="+encodeURIComponent(o)+"&w="+i+"&q="+(a||75)+({}.NEXT_DEPLOYMENT_ID?"&dpl="+{}.NEXT_DEPLOYMENT_ID:"")}t.__next_img_default=!0;const n=t}(ju)),ju}(function(e,t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return m}});const n=Tn,l=La,r=c,o=l._(v),i=n._(Kn),a=n._(gV),g=mf,s=ed,I=uP();of();const d=XV(),u=n._(NV()),C={}.__NEXT_IMAGE_OPTS;typeof window>"u"&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);function h(p,b,Z,V,S,G,w){const B=p==null?void 0:p.src;if(!p||p["data-loaded-src"]===B)return;p["data-loaded-src"]=B,("decode"in p?p.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(!(!p.parentElement||!p.isConnected)){if(b!=="empty"&&S(!0),Z!=null&&Z.current){const R=new Event("load");Object.defineProperty(R,"target",{writable:!1,value:p});let k=!1,x=!1;Z.current({...R,nativeEvent:R,currentTarget:p,target:p,isDefaultPrevented:()=>k,isPropagationStopped:()=>x,persist:()=>{},preventDefault:()=>{k=!0,R.preventDefault()},stopPropagation:()=>{x=!0,R.stopPropagation()}})}V!=null&&V.current&&V.current(p)}})}function f(p){const[b,Z]=o.version.split(".",2),V=parseInt(b,10),S=parseInt(Z,10);return V>18||V===18&&S>=3?{fetchPriority:p}:{fetchpriority:p}}const y=(0,o.forwardRef)((p,b)=>{let{src:Z,srcSet:V,sizes:S,height:G,width:w,decoding:B,className:W,style:R,fetchPriority:k,placeholder:x,loading:H,unoptimized:M,fill:T,onLoadRef:E,onLoadingCompleteRef:N,setBlurComplete:J,setShowAltText:X,sizesInput:Y,onLoad:F,onError:z,...L}=p;return(0,r.jsx)("img",{...L,...f(k),loading:H,width:w,height:G,decoding:B,"data-nimg":T?"fill":"1",className:W,style:R,sizes:S,srcSet:V,src:Z,ref:(0,o.useCallback)(K=>{b&&(typeof b=="function"?b(K):typeof b=="object"&&(b.current=K)),K&&(z&&(K.src=K.src),K.complete&&h(K,x,E,N,J))},[Z,x,E,N,J,z,M,Y,b]),onLoad:K=>{const j=K.currentTarget;h(j,x,E,N,J)},onError:K=>{X(!0),x!=="empty"&&J(!0),z&&z(K)}})});function A(p){let{isAppRouter:b,imgAttributes:Z}=p;const V={as:"image",imageSrcSet:Z.srcSet,imageSizes:Z.sizes,crossOrigin:Z.crossOrigin,referrerPolicy:Z.referrerPolicy,...f(Z.fetchPriority)};return b&&i.default.preload?(i.default.preload(Z.src,V),null):(0,r.jsx)(a.default,{children:(0,r.jsx)("link",{rel:"preload",href:Z.srcSet?void 0:Z.src,...V},"__nimg-"+Z.src+Z.srcSet+Z.sizes)})}const m=(0,o.forwardRef)((p,b)=>{const V=!(0,o.useContext)(d.RouterContext),S=(0,o.useContext)(I.ImageConfigContext),G=(0,o.useMemo)(()=>{const N=C||S||s.imageConfigDefault,J=[...N.deviceSizes,...N.imageSizes].sort((Y,F)=>Y-F),X=N.deviceSizes.sort((Y,F)=>Y-F);return{...N,allSizes:J,deviceSizes:X}},[S]),{onLoad:w,onLoadingComplete:B}=p,W=(0,o.useRef)(w);(0,o.useEffect)(()=>{W.current=w},[w]);const R=(0,o.useRef)(B);(0,o.useEffect)(()=>{R.current=B},[B]);const[k,x]=(0,o.useState)(!1),[H,M]=(0,o.useState)(!1),{props:T,meta:E}=(0,g.getImgProps)(p,{defaultLoader:u.default,imgConf:G,blurComplete:k,showAltText:H});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{...T,unoptimized:E.unoptimized,placeholder:E.placeholder,fill:E.fill,onLoadRef:W,onLoadingCompleteRef:R,setBlurComplete:x,setShowAltText:M,sizesInput:p.sizes,ref:b}),E.priority?(0,r.jsx)(A,{isAppRouter:V,imgAttributes:T}):null]})});(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)})(UA,UA.exports);var CP=UA.exports;(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,s){for(var I in s)Object.defineProperty(g,I,{enumerable:!0,get:s[I]})}t(e,{default:function(){return a},getImageProps:function(){return i}});const n=Tn,l=mf,r=CP,o=n._(NV());function i(g){const{props:s}=(0,l.getImgProps)(g,{defaultLoader:o.default,imgConf:{}.__NEXT_IMAGE_OPTS});for(const[I,d]of Object.entries(s))d===void 0&&delete s[I];return{props:s}}const a=r.Image})(xV);var AP=xV;const YV=Ln(AP),HV=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),td=v.createContext({}),nd=v.createContext(null),ld=typeof document<"u",hf=ld?v.useLayoutEffect:v.useEffect,FV=v.createContext({strict:!1}),ff=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),mP="framerAppearId",KV="data-"+ff(mP);function hP(e,t,n,l){const{visualElement:r}=v.useContext(td),o=v.useContext(FV),i=v.useContext(nd),a=v.useContext(HV).reducedMotion,g=v.useRef();l=l||o.renderer,!g.current&&l&&(g.current=l(e,{visualState:t,parent:r,props:n,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:a}));const s=g.current;v.useInsertionEffect(()=>{s&&s.update(n,i)});const I=v.useRef(!!(n[KV]&&!window.HandoffComplete));return hf(()=>{s&&(s.render(),I.current&&s.animationState&&s.animationState.animateChanges())}),v.useEffect(()=>{s&&(s.updateFeatures(),!I.current&&s.animationState&&s.animationState.animateChanges(),I.current&&(I.current=!1,window.HandoffComplete=!0))}),s}function Mo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function fP(e,t,n){return v.useCallback(l=>{l&&e.mount&&e.mount(l),t&&(l?t.mount(l):t.unmount()),n&&(typeof n=="function"?n(l):Mo(n)&&(n.current=l))},[t])}function ja(e){return typeof e=="string"||Array.isArray(e)}function rd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const pf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bf=["initial",...pf];function od(e){return rd(e.animate)||bf.some(t=>ja(e[t]))}function EV(e){return!!(od(e)||e.variants)}function pP(e,t){if(od(e)){const{initial:n,animate:l}=e;return{initial:n===!1||ja(n)?n:void 0,animate:ja(l)?l:void 0}}return e.inherit!==!1?t:{}}function bP(e){const{initial:t,animate:n}=pP(e,v.useContext(td));return v.useMemo(()=>({initial:t,animate:n}),[_y(t),_y(n)])}function _y(e){return Array.isArray(e)?e.join(" "):e}const qy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ua={};for(const e in qy)Ua[e]={isEnabled:t=>qy[e].some(n=>!!t[n])};function yP(e){for(const t in e)Ua[t]={...Ua[t],...e[t]}}const yf=v.createContext({}),MV=v.createContext({}),ZP=Symbol.for("motionComponentSymbol");function vP({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:l,Component:r}){e&&yP(e);function o(a,g){let s;const I={...v.useContext(HV),...a,layoutId:GP(a)},{isStatic:d}=I,u=bP(a),C=l(a,d);if(!d&&ld){u.visualElement=hP(r,C,I,t);const h=v.useContext(MV),f=v.useContext(FV).strict;u.visualElement&&(s=u.visualElement.loadFeatures(I,f,e,h))}return v.createElement(td.Provider,{value:u},s&&u.visualElement?v.createElement(s,{visualElement:u.visualElement,...I}):null,n(r,a,fP(C,u.visualElement,g),C,d,u.visualElement))}const i=v.forwardRef(o);return i[ZP]=r,i}function GP({layoutId:e}){const t=v.useContext(yf).id;return t&&e!==void 0?t+"-"+e:e}function BP(e){function t(l,r={}){return vP(e(l,r))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(l,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const SP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zf(e){return typeof e!="string"||e.includes("-")?!1:!!(SP.indexOf(e)>-1||/[A-Z]/.test(e))}const Rc={};function VP(e){Object.assign(Rc,e)}const Ig=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],po=new Set(Ig);function TV(e,{layout:t,layoutId:n}){return po.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Rc[e]||e==="opacity")}const Qt=e=>!!(e&&e.getVelocity),WP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},RP=Ig.length;function wP(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},l,r){let o="";for(let i=0;i<RP;i++){const a=Ig[i];if(e[a]!==void 0){const g=WP[a]||a;o+=`${g}(${e[a]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(e,l?"":o):n&&l&&(o="none"),o}const LV=e=>t=>typeof t=="string"&&t.startsWith(e),zV=LV("--"),DA=LV("var(--"),kP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,XP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,fr=(e,t,n)=>Math.min(Math.max(n,e),t),bo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ma={...bo,transform:e=>fr(0,1,e)},ns={...bo,default:1},ha=e=>Math.round(e*1e5)/1e5,id=/(-)?([\d]*\.?[\d])+/g,jV=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,xP=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function dg(e){return typeof e=="string"}const ug=e=>({test:t=>dg(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Yl=ug("deg"),nl=ug("%"),me=ug("px"),JP=ug("vh"),NP=ug("vw"),$y={...nl,parse:e=>nl.parse(e)/100,transform:e=>nl.transform(e*100)},eZ={...bo,transform:Math.round},UV={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,size:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,rotate:Yl,rotateX:Yl,rotateY:Yl,rotateZ:Yl,scale:ns,scaleX:ns,scaleY:ns,scaleZ:ns,skew:Yl,skewX:Yl,skewY:Yl,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:ma,originX:$y,originY:$y,originZ:me,zIndex:eZ,fillOpacity:ma,strokeOpacity:ma,numOctaves:eZ};function vf(e,t,n,l){const{style:r,vars:o,transform:i,transformOrigin:a}=e;let g=!1,s=!1,I=!0;for(const d in t){const u=t[d];if(zV(d)){o[d]=u;continue}const C=UV[d],h=XP(u,C);if(po.has(d)){if(g=!0,i[d]=h,!I)continue;u!==(C.default||0)&&(I=!1)}else d.startsWith("origin")?(s=!0,a[d]=h):r[d]=h}if(t.transform||(g||l?r.transform=wP(e.transform,n,I,l):r.transform&&(r.transform="none")),s){const{originX:d="50%",originY:u="50%",originZ:C=0}=a;r.transformOrigin=`${d} ${u} ${C}`}}const Gf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function DV(e,t,n){for(const l in t)!Qt(t[l])&&!TV(l,n)&&(e[l]=t[l])}function YP({transformTemplate:e},t,n){return v.useMemo(()=>{const l=Gf();return vf(l,t,{enableHardwareAcceleration:!n},e),Object.assign({},l.vars,l.style)},[t])}function HP(e,t,n){const l=e.style||{},r={};return DV(r,l,e),Object.assign(r,YP(e,t,n)),e.transformValues?e.transformValues(r):r}function FP(e,t,n){const l={},r=HP(e,t,n);return e.drag&&e.dragListener!==!1&&(l.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(l.tabIndex=0),l.style=r,l}const KP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||KP.has(e)}let QV=e=>!wc(e);function EP(e){e&&(QV=t=>t.startsWith("on")?!wc(t):e(t))}try{EP(require("@emotion/is-prop-valid").default)}catch{}function MP(e,t,n){const l={};for(const r in e)r==="values"&&typeof e.values=="object"||(QV(r)||n===!0&&wc(r)||!t&&!wc(r)||e.draggable&&r.startsWith("onDrag"))&&(l[r]=e[r]);return l}function tZ(e,t,n){return typeof e=="string"?e:me.transform(t+n*e)}function TP(e,t,n){const l=tZ(t,e.x,e.width),r=tZ(n,e.y,e.height);return`${l} ${r}`}const LP={offset:"stroke-dashoffset",array:"stroke-dasharray"},zP={offset:"strokeDashoffset",array:"strokeDasharray"};function jP(e,t,n=1,l=0,r=!0){e.pathLength=1;const o=r?LP:zP;e[o.offset]=me.transform(-l);const i=me.transform(t),a=me.transform(n);e[o.array]=`${i} ${a}`}function Bf(e,{attrX:t,attrY:n,attrScale:l,originX:r,originY:o,pathLength:i,pathSpacing:a=1,pathOffset:g=0,...s},I,d,u){if(vf(e,s,I,u),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:C,style:h,dimensions:f}=e;C.transform&&(f&&(h.transform=C.transform),delete C.transform),f&&(r!==void 0||o!==void 0||h.transform)&&(h.transformOrigin=TP(f,r!==void 0?r:.5,o!==void 0?o:.5)),t!==void 0&&(C.x=t),n!==void 0&&(C.y=n),l!==void 0&&(C.scale=l),i!==void 0&&jP(C,i,a,g,!1)}const PV=()=>({...Gf(),attrs:{}}),Sf=e=>typeof e=="string"&&e.toLowerCase()==="svg";function UP(e,t,n,l){const r=v.useMemo(()=>{const o=PV();return Bf(o,t,{enableHardwareAcceleration:!1},Sf(l),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};DV(o,e.style,e),r.style={...o,...r.style}}return r}function DP(e=!1){return(n,l,r,{latestValues:o},i)=>{const g=(Zf(n)?UP:FP)(l,o,i,n),I={...MP(l,typeof n=="string",e),...g,ref:r},{children:d}=l,u=v.useMemo(()=>Qt(d)?d.get():d,[d]);return v.createElement(n,{...I,children:u})}}function OV(e,{style:t,vars:n},l,r){Object.assign(e.style,t,r&&r.getProjectionStyles(l));for(const o in n)e.style.setProperty(o,n[o])}const _V=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qV(e,t,n,l){OV(e,t,void 0,l);for(const r in t.attrs)e.setAttribute(_V.has(r)?r:ff(r),t.attrs[r])}function Vf(e,t){const{style:n}=e,l={};for(const r in n)(Qt(n[r])||t.style&&Qt(t.style[r])||TV(r,e))&&(l[r]=n[r]);return l}function $V(e,t){const n=Vf(e,t);for(const l in e)if(Qt(e[l])||Qt(t[l])){const r=Ig.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;n[r]=e[l]}return n}function Wf(e,t,n,l={},r={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,l,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,l,r)),t}function eW(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const kc=e=>Array.isArray(e),QP=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),PP=e=>kc(e)?e[e.length-1]||0:e;function Vs(e){const t=Qt(e)?e.get():e;return QP(t)?t.toValue():t}function OP({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},l,r,o){const i={latestValues:_P(l,r,o,e),renderState:t()};return n&&(i.mount=a=>n(l,a,i)),i}const tW=e=>(t,n)=>{const l=v.useContext(td),r=v.useContext(nd),o=()=>OP(e,t,l,r);return n?o():eW(o)};function _P(e,t,n,l){const r={},o=l(e,{});for(const u in o)r[u]=Vs(o[u]);let{initial:i,animate:a}=e;const g=od(e),s=EV(e);t&&s&&!g&&e.inherit!==!1&&(i===void 0&&(i=t.initial),a===void 0&&(a=t.animate));let I=n?n.initial===!1:!1;I=I||i===!1;const d=I?a:i;return d&&typeof d!="boolean"&&!rd(d)&&(Array.isArray(d)?d:[d]).forEach(C=>{const h=Wf(e,C);if(!h)return;const{transitionEnd:f,transition:y,...A}=h;for(const m in A){let p=A[m];if(Array.isArray(p)){const b=I?p.length-1:0;p=p[b]}p!==null&&(r[m]=p)}for(const m in f)r[m]=f[m]}),r}const $e=e=>e;class nZ{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function qP(e){let t=new nZ,n=new nZ,l=0,r=!1,o=!1;const i=new WeakSet,a={schedule:(g,s=!1,I=!1)=>{const d=I&&r,u=d?t:n;return s&&i.add(g),u.add(g)&&d&&r&&(l=t.order.length),g},cancel:g=>{n.remove(g),i.delete(g)},process:g=>{if(r){o=!0;return}if(r=!0,[t,n]=[n,t],n.clear(),l=t.order.length,l)for(let s=0;s<l;s++){const I=t.order[s];I(g),i.has(I)&&(a.schedule(I),e())}r=!1,o&&(o=!1,a.process(g))}};return a}const ls=["prepare","read","update","preRender","render","postRender"],$P=40;function e8(e,t){let n=!1,l=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=ls.reduce((d,u)=>(d[u]=qP(()=>n=!0),d),{}),i=d=>o[d].process(r),a=()=>{const d=performance.now();n=!1,r.delta=l?1e3/60:Math.max(Math.min(d-r.timestamp,$P),1),r.timestamp=d,r.isProcessing=!0,ls.forEach(i),r.isProcessing=!1,n&&t&&(l=!1,e(a))},g=()=>{n=!0,l=!0,r.isProcessing||e(a)};return{schedule:ls.reduce((d,u)=>{const C=o[u];return d[u]=(h,f=!1,y=!1)=>(n||g(),C.schedule(h,f,y)),d},{}),cancel:d=>ls.forEach(u=>o[u].cancel(d)),state:r,steps:o}}const{schedule:Ye,cancel:Vl,state:Vt,steps:Uu}=e8(typeof requestAnimationFrame<"u"?requestAnimationFrame:$e,!0),t8={useVisualState:tW({scrapeMotionValuesFromProps:$V,createRenderState:PV,onMount:(e,t,{renderState:n,latestValues:l})=>{Ye.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ye.render(()=>{Bf(n,l,{enableHardwareAcceleration:!1},Sf(t.tagName),e.transformTemplate),qV(t,n)})}})},n8={useVisualState:tW({scrapeMotionValuesFromProps:Vf,createRenderState:Gf})};function l8(e,{forwardMotionProps:t=!1},n,l){return{...Zf(e)?t8:n8,preloadedFeatures:n,useRender:DP(t),createVisualElement:l,Component:e}}function Cl(e,t,n,l={passive:!0}){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n)}const nW=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ad(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const r8=e=>t=>nW(t)&&e(t,ad(t));function pl(e,t,n,l){return Cl(e,t,r8(n),l)}const o8=(e,t)=>n=>t(e(n)),ar=(...e)=>e.reduce(o8);function lW(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const lZ=lW("dragHorizontal"),rZ=lW("dragVertical");function rW(e){let t=!1;if(e==="y")t=rZ();else if(e==="x")t=lZ();else{const n=lZ(),l=rZ();n&&l?t=()=>{n(),l()}:(n&&n(),l&&l())}return t}function oW(){const e=rW(!0);return e?(e(),!1):!0}class kr{constructor(t){this.isMounted=!1,this.node=t}update(){}}function oZ(e,t){const n="pointer"+(t?"enter":"leave"),l="onHover"+(t?"Start":"End"),r=(o,i)=>{if(o.pointerType==="touch"||oW())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[l]&&Ye.update(()=>a[l](o,i))};return pl(e.current,n,r,{passive:!e.getProps()[l]})}class i8 extends kr{mount(){this.unmount=ar(oZ(this.node,!0),oZ(this.node,!1))}unmount(){}}class a8 extends kr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ar(Cl(this.node.current,"focus",()=>this.onFocus()),Cl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const iW=(e,t)=>t?e===t?!0:iW(e,t.parentElement):!1;function Du(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,ad(n))}class g8 extends kr{constructor(){super(...arguments),this.removeStartListeners=$e,this.removeEndListeners=$e,this.removeAccessibleListeners=$e,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const l=this.node.getProps(),o=pl(window,"pointerup",(a,g)=>{if(!this.checkPressEnd())return;const{onTap:s,onTapCancel:I,globalTapTarget:d}=this.node.getProps();Ye.update(()=>{!d&&!iW(this.node.current,a.target)?I&&I(a,g):s&&s(a,g)})},{passive:!(l.onTap||l.onPointerUp)}),i=pl(window,"pointercancel",(a,g)=>this.cancelPress(a,g),{passive:!(l.onTapCancel||l.onPointerCancel)});this.removeEndListeners=ar(o,i),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const i=a=>{a.key!=="Enter"||!this.checkPressEnd()||Du("up",(g,s)=>{const{onTap:I}=this.node.getProps();I&&Ye.update(()=>I(g,s))})};this.removeEndListeners(),this.removeEndListeners=Cl(this.node.current,"keyup",i),Du("down",(a,g)=>{this.startPress(a,g)})},n=Cl(this.node.current,"keydown",t),l=()=>{this.isPressing&&Du("cancel",(o,i)=>this.cancelPress(o,i))},r=Cl(this.node.current,"blur",l);this.removeAccessibleListeners=ar(n,r)}}startPress(t,n){this.isPressing=!0;const{onTapStart:l,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),l&&Ye.update(()=>l(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!oW()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:l}=this.node.getProps();l&&Ye.update(()=>l(t,n))}mount(){const t=this.node.getProps(),n=pl(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),l=Cl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ar(n,l)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const QA=new WeakMap,Qu=new WeakMap,s8=e=>{const t=QA.get(e.target);t&&t(e)},c8=e=>{e.forEach(s8)};function I8({root:e,...t}){const n=e||document;Qu.has(n)||Qu.set(n,{});const l=Qu.get(n),r=JSON.stringify(t);return l[r]||(l[r]=new IntersectionObserver(c8,{root:e,...t})),l[r]}function d8(e,t,n){const l=I8(t);return QA.set(e,n),l.observe(e),()=>{QA.delete(e),l.unobserve(e)}}const u8={some:0,all:1};class C8 extends kr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:l,amount:r="some",once:o}=t,i={root:n?n.current:void 0,rootMargin:l,threshold:typeof r=="number"?r:u8[r]},a=g=>{const{isIntersecting:s}=g;if(this.isInView===s||(this.isInView=s,o&&!s&&this.hasEnteredView))return;s&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",s);const{onViewportEnter:I,onViewportLeave:d}=this.node.getProps(),u=s?I:d;u&&u(g)};return d8(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(A8(t,n))&&this.startObserver()}unmount(){}}function A8({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const m8={inView:{Feature:C8},tap:{Feature:g8},focus:{Feature:a8},hover:{Feature:i8}};function aW(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let l=0;l<n;l++)if(t[l]!==e[l])return!1;return!0}function h8(e){const t={};return e.values.forEach((n,l)=>t[l]=n.get()),t}function f8(e){const t={};return e.values.forEach((n,l)=>t[l]=n.getVelocity()),t}function gd(e,t,n){const l=e.getProps();return Wf(l,t,n!==void 0?n:l.custom,h8(e),f8(e))}let p8=$e,Rf=$e;const gr=e=>e*1e3,bl=e=>e/1e3,b8={current:!1},gW=e=>Array.isArray(e)&&typeof e[0]=="number";function sW(e){return!!(!e||typeof e=="string"&&cW[e]||gW(e)||Array.isArray(e)&&e.every(sW))}const na=([e,t,n,l])=>`cubic-bezier(${e}, ${t}, ${n}, ${l})`,cW={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:na([0,.65,.55,1]),circOut:na([.55,0,1,.45]),backIn:na([.31,.01,.66,-.59]),backOut:na([.33,1.53,.69,.99])};function IW(e){if(e)return gW(e)?na(e):Array.isArray(e)?e.map(IW):cW[e]}function y8(e,t,n,{delay:l=0,duration:r,repeat:o=0,repeatType:i="loop",ease:a,times:g}={}){const s={[t]:n};g&&(s.offset=g);const I=IW(a);return Array.isArray(I)&&(s.easing=I),e.animate(s,{delay:l,duration:r,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}function Z8(e,{repeat:t,repeatType:n="loop"}){const l=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[l]}const dW=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,v8=1e-7,G8=12;function B8(e,t,n,l,r){let o,i,a=0;do i=t+(n-t)/2,o=dW(i,l,r)-e,o>0?n=i:t=i;while(Math.abs(o)>v8&&++a<G8);return i}function Cg(e,t,n,l){if(e===t&&n===l)return $e;const r=o=>B8(o,0,1,e,n);return o=>o===0||o===1?o:dW(r(o),t,l)}const S8=Cg(.42,0,1,1),V8=Cg(0,0,.58,1),uW=Cg(.42,0,.58,1),W8=e=>Array.isArray(e)&&typeof e[0]!="number",CW=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,AW=e=>t=>1-e(1-t),wf=e=>1-Math.sin(Math.acos(e)),mW=AW(wf),R8=CW(wf),hW=Cg(.33,1.53,.69,.99),kf=AW(hW),w8=CW(kf),k8=e=>(e*=2)<1?.5*kf(e):.5*(2-Math.pow(2,-10*(e-1))),X8={linear:$e,easeIn:S8,easeInOut:uW,easeOut:V8,circIn:wf,circInOut:R8,circOut:mW,backIn:kf,backInOut:w8,backOut:hW,anticipate:k8},iZ=e=>{if(Array.isArray(e)){Rf(e.length===4);const[t,n,l,r]=e;return Cg(t,n,l,r)}else if(typeof e=="string")return X8[e];return e},Xf=(e,t)=>n=>!!(dg(n)&&xP.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),fW=(e,t,n)=>l=>{if(!dg(l))return l;const[r,o,i,a]=l.match(id);return{[e]:parseFloat(r),[t]:parseFloat(o),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},x8=e=>fr(0,255,e),Pu={...bo,transform:e=>Math.round(x8(e))},$r={test:Xf("rgb","red"),parse:fW("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:l=1})=>"rgba("+Pu.transform(e)+", "+Pu.transform(t)+", "+Pu.transform(n)+", "+ha(ma.transform(l))+")"};function J8(e){let t="",n="",l="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),l=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),l=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,l+=l,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(l,16),alpha:r?parseInt(r,16)/255:1}}const PA={test:Xf("#"),parse:J8,transform:$r.transform},To={test:Xf("hsl","hue"),parse:fW("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:l=1})=>"hsla("+Math.round(e)+", "+nl.transform(ha(t))+", "+nl.transform(ha(n))+", "+ha(ma.transform(l))+")"},xt={test:e=>$r.test(e)||PA.test(e)||To.test(e),parse:e=>$r.test(e)?$r.parse(e):To.test(e)?To.parse(e):PA.parse(e),transform:e=>dg(e)?e:e.hasOwnProperty("red")?$r.transform(e):To.transform(e)},je=(e,t,n)=>-n*e+n*t+e;function Ou(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function N8({hue:e,saturation:t,lightness:n,alpha:l}){e/=360,t/=100,n/=100;let r=0,o=0,i=0;if(!t)r=o=i=n;else{const a=n<.5?n*(1+t):n+t-n*t,g=2*n-a;r=Ou(g,a,e+1/3),o=Ou(g,a,e),i=Ou(g,a,e-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:l}}const _u=(e,t,n)=>{const l=e*e;return Math.sqrt(Math.max(0,n*(t*t-l)+l))},Y8=[PA,$r,To],H8=e=>Y8.find(t=>t.test(e));function aZ(e){const t=H8(e);let n=t.parse(e);return t===To&&(n=N8(n)),n}const pW=(e,t)=>{const n=aZ(e),l=aZ(t),r={...n};return o=>(r.red=_u(n.red,l.red,o),r.green=_u(n.green,l.green,o),r.blue=_u(n.blue,l.blue,o),r.alpha=je(n.alpha,l.alpha,o),$r.transform(r))};function F8(e){var t,n;return isNaN(e)&&dg(e)&&(((t=e.match(id))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(jV))===null||n===void 0?void 0:n.length)||0)>0}const bW={regex:kP,countKey:"Vars",token:"${v}",parse:$e},yW={regex:jV,countKey:"Colors",token:"${c}",parse:xt.parse},ZW={regex:id,countKey:"Numbers",token:"${n}",parse:bo.parse};function qu(e,{regex:t,countKey:n,token:l,parse:r}){const o=e.tokenised.match(t);o&&(e["num"+n]=o.length,e.tokenised=e.tokenised.replace(t,l),e.values.push(...o.map(r)))}function Xc(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&qu(n,bW),qu(n,yW),qu(n,ZW),n}function vW(e){return Xc(e).values}function GW(e){const{values:t,numColors:n,numVars:l,tokenised:r}=Xc(e),o=t.length;return i=>{let a=r;for(let g=0;g<o;g++)g<l?a=a.replace(bW.token,i[g]):g<l+n?a=a.replace(yW.token,xt.transform(i[g])):a=a.replace(ZW.token,ha(i[g]));return a}}const K8=e=>typeof e=="number"?0:e;function E8(e){const t=vW(e);return GW(e)(t.map(K8))}const pr={test:F8,parse:vW,createTransformer:GW,getAnimatableNone:E8},BW=(e,t)=>n=>`${n>0?t:e}`;function SW(e,t){return typeof e=="number"?n=>je(e,t,n):xt.test(e)?pW(e,t):e.startsWith("var(")?BW(e,t):WW(e,t)}const VW=(e,t)=>{const n=[...e],l=n.length,r=e.map((o,i)=>SW(o,t[i]));return o=>{for(let i=0;i<l;i++)n[i]=r[i](o);return n}},M8=(e,t)=>{const n={...e,...t},l={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(l[r]=SW(e[r],t[r]));return r=>{for(const o in l)n[o]=l[o](r);return n}},WW=(e,t)=>{const n=pr.createTransformer(t),l=Xc(e),r=Xc(t);return l.numVars===r.numVars&&l.numColors===r.numColors&&l.numNumbers>=r.numNumbers?ar(VW(l.values,r.values),n):BW(e,t)},Da=(e,t,n)=>{const l=t-e;return l===0?1:(n-e)/l},gZ=(e,t)=>n=>je(e,t,n);function T8(e){return typeof e=="number"?gZ:typeof e=="string"?xt.test(e)?pW:WW:Array.isArray(e)?VW:typeof e=="object"?M8:gZ}function L8(e,t,n){const l=[],r=n||T8(e[0]),o=e.length-1;for(let i=0;i<o;i++){let a=r(e[i],e[i+1]);if(t){const g=Array.isArray(t)?t[i]||$e:t;a=ar(g,a)}l.push(a)}return l}function RW(e,t,{clamp:n=!0,ease:l,mixer:r}={}){const o=e.length;if(Rf(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=L8(t,l,r),a=i.length,g=s=>{let I=0;if(a>1)for(;I<e.length-2&&!(s<e[I+1]);I++);const d=Da(e[I],e[I+1],s);return i[I](d)};return n?s=>g(fr(e[0],e[o-1],s)):g}function z8(e,t){const n=e[e.length-1];for(let l=1;l<=t;l++){const r=Da(0,t,l);e.push(je(n,1,r))}}function j8(e){const t=[0];return z8(t,e.length-1),t}function U8(e,t){return e.map(n=>n*t)}function D8(e,t){return e.map(()=>t||uW).splice(0,e.length-1)}function xc({duration:e=300,keyframes:t,times:n,ease:l="easeInOut"}){const r=W8(l)?l.map(iZ):iZ(l),o={done:!1,value:t[0]},i=U8(n&&n.length===t.length?n:j8(t),e),a=RW(i,t,{ease:Array.isArray(r)?r:D8(t,r)});return{calculatedDuration:e,next:g=>(o.value=a(g),o.done=g>=e,o)}}function wW(e,t){return t?e*(1e3/t):0}const Q8=5;function kW(e,t,n){const l=Math.max(t-Q8,0);return wW(n-e(l),t-l)}const $u=.001,P8=.01,sZ=10,O8=.05,_8=1;function q8({duration:e=800,bounce:t=.25,velocity:n=0,mass:l=1}){let r,o;p8(e<=gr(sZ));let i=1-t;i=fr(O8,_8,i),e=fr(P8,sZ,bl(e)),i<1?(r=s=>{const I=s*i,d=I*e,u=I-n,C=OA(s,i),h=Math.exp(-d);return $u-u/C*h},o=s=>{const d=s*i*e,u=d*n+n,C=Math.pow(i,2)*Math.pow(s,2)*e,h=Math.exp(-d),f=OA(Math.pow(s,2),i);return(-r(s)+$u>0?-1:1)*((u-C)*h)/f}):(r=s=>{const I=Math.exp(-s*e),d=(s-n)*e+1;return-$u+I*d},o=s=>{const I=Math.exp(-s*e),d=(n-s)*(e*e);return I*d});const a=5/e,g=e7(r,o,a);if(e=gr(e),isNaN(g))return{stiffness:100,damping:10,duration:e};{const s=Math.pow(g,2)*l;return{stiffness:s,damping:i*2*Math.sqrt(l*s),duration:e}}}const $8=12;function e7(e,t,n){let l=n;for(let r=1;r<$8;r++)l=l-e(l)/t(l);return l}function OA(e,t){return e*Math.sqrt(1-t*t)}const t7=["duration","bounce"],n7=["stiffness","damping","mass"];function cZ(e,t){return t.some(n=>e[n]!==void 0)}function l7(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!cZ(e,n7)&&cZ(e,t7)){const n=q8(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function XW({keyframes:e,restDelta:t,restSpeed:n,...l}){const r=e[0],o=e[e.length-1],i={done:!1,value:r},{stiffness:a,damping:g,mass:s,duration:I,velocity:d,isResolvedFromDuration:u}=l7({...l,velocity:-bl(l.velocity||0)}),C=d||0,h=g/(2*Math.sqrt(a*s)),f=o-r,y=bl(Math.sqrt(a/s)),A=Math.abs(f)<5;n||(n=A?.01:2),t||(t=A?.005:.5);let m;if(h<1){const p=OA(y,h);m=b=>{const Z=Math.exp(-h*y*b);return o-Z*((C+h*y*f)/p*Math.sin(p*b)+f*Math.cos(p*b))}}else if(h===1)m=p=>o-Math.exp(-y*p)*(f+(C+y*f)*p);else{const p=y*Math.sqrt(h*h-1);m=b=>{const Z=Math.exp(-h*y*b),V=Math.min(p*b,300);return o-Z*((C+h*y*f)*Math.sinh(V)+p*f*Math.cosh(V))/p}}return{calculatedDuration:u&&I||null,next:p=>{const b=m(p);if(u)i.done=p>=I;else{let Z=C;p!==0&&(h<1?Z=kW(m,p,b):Z=0);const V=Math.abs(Z)<=n,S=Math.abs(o-b)<=t;i.done=V&&S}return i.value=i.done?o:b,i}}}function IZ({keyframes:e,velocity:t=0,power:n=.8,timeConstant:l=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:i,min:a,max:g,restDelta:s=.5,restSpeed:I}){const d=e[0],u={done:!1,value:d},C=G=>a!==void 0&&G<a||g!==void 0&&G>g,h=G=>a===void 0?g:g===void 0||Math.abs(a-G)<Math.abs(g-G)?a:g;let f=n*t;const y=d+f,A=i===void 0?y:i(y);A!==y&&(f=A-d);const m=G=>-f*Math.exp(-G/l),p=G=>A+m(G),b=G=>{const w=m(G),B=p(G);u.done=Math.abs(w)<=s,u.value=u.done?A:B};let Z,V;const S=G=>{C(u.value)&&(Z=G,V=XW({keyframes:[u.value,h(u.value)],velocity:kW(p,G,u.value),damping:r,stiffness:o,restDelta:s,restSpeed:I}))};return S(0),{calculatedDuration:null,next:G=>{let w=!1;return!V&&Z===void 0&&(w=!0,b(G),S(G)),Z!==void 0&&G>Z?V.next(G-Z):(!w&&b(G),u)}}}const r7=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ye.update(t,!0),stop:()=>Vl(t),now:()=>Vt.isProcessing?Vt.timestamp:performance.now()}},dZ=2e4;function uZ(e){let t=0;const n=50;let l=e.next(t);for(;!l.done&&t<dZ;)t+=n,l=e.next(t);return t>=dZ?1/0:t}const o7={decay:IZ,inertia:IZ,tween:xc,keyframes:xc,spring:XW};function Jc({autoplay:e=!0,delay:t=0,driver:n=r7,keyframes:l,type:r="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:a="loop",onPlay:g,onStop:s,onComplete:I,onUpdate:d,...u}){let C=1,h=!1,f,y;const A=()=>{y=new Promise(X=>{f=X})};A();let m;const p=o7[r]||xc;let b;p!==xc&&typeof l[0]!="number"&&(b=RW([0,100],l,{clamp:!1}),l=[0,100]);const Z=p({...u,keyframes:l});let V;a==="mirror"&&(V=p({...u,keyframes:[...l].reverse(),velocity:-(u.velocity||0)}));let S="idle",G=null,w=null,B=null;Z.calculatedDuration===null&&o&&(Z.calculatedDuration=uZ(Z));const{calculatedDuration:W}=Z;let R=1/0,k=1/0;W!==null&&(R=W+i,k=R*(o+1)-i);let x=0;const H=X=>{if(w===null)return;C>0&&(w=Math.min(w,X)),C<0&&(w=Math.min(X-k/C,w)),G!==null?x=G:x=Math.round(X-w)*C;const Y=x-t*(C>=0?1:-1),F=C>=0?Y<0:Y>k;x=Math.max(Y,0),S==="finished"&&G===null&&(x=k);let z=x,L=Z;if(o){const Q=Math.min(x,k)/R;let O=Math.floor(Q),ne=Q%1;!ne&&Q>=1&&(ne=1),ne===1&&O--,O=Math.min(O,o+1),!!(O%2)&&(a==="reverse"?(ne=1-ne,i&&(ne-=i/R)):a==="mirror"&&(L=V)),z=fr(0,1,ne)*R}const K=F?{done:!1,value:l[0]}:L.next(z);b&&(K.value=b(K.value));let{done:j}=K;!F&&W!==null&&(j=C>=0?x>=k:x<=0);const D=G===null&&(S==="finished"||S==="running"&&j);return d&&d(K.value),D&&E(),K},M=()=>{m&&m.stop(),m=void 0},T=()=>{S="idle",M(),f(),A(),w=B=null},E=()=>{S="finished",I&&I(),M(),f()},N=()=>{if(h)return;m||(m=n(H));const X=m.now();g&&g(),G!==null?w=X-G:(!w||S==="finished")&&(w=X),S==="finished"&&A(),B=w,G=null,S="running",m.start()};e&&N();const J={then(X,Y){return y.then(X,Y)},get time(){return bl(x)},set time(X){X=gr(X),x=X,G!==null||!m||C===0?G=X:w=m.now()-X/C},get duration(){const X=Z.calculatedDuration===null?uZ(Z):Z.calculatedDuration;return bl(X)},get speed(){return C},set speed(X){X===C||!m||(C=X,J.time=bl(x))},get state(){return S},play:N,pause:()=>{S="paused",G=x},stop:()=>{h=!0,S!=="idle"&&(S="idle",s&&s(),T())},cancel:()=>{B!==null&&H(B),T()},complete:()=>{S="finished"},sample:X=>(w=0,H(X))};return J}function i7(e){let t;return()=>(t===void 0&&(t=e()),t)}const a7=i7(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),g7=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),rs=10,s7=2e4,c7=(e,t)=>t.type==="spring"||e==="backgroundColor"||!sW(t.ease);function I7(e,t,{onUpdate:n,onComplete:l,...r}){if(!(a7()&&g7.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let i=!1,a,g,s=!1;const I=()=>{g=new Promise(p=>{a=p})};I();let{keyframes:d,duration:u=300,ease:C,times:h}=r;if(c7(t,r)){const p=Jc({...r,repeat:0,delay:0});let b={done:!1,value:d[0]};const Z=[];let V=0;for(;!b.done&&V<s7;)b=p.sample(V),Z.push(b.value),V+=rs;h=void 0,d=Z,u=V-rs,C="linear"}const f=y8(e.owner.current,t,d,{...r,duration:u,ease:C,times:h}),y=()=>{s=!1,f.cancel()},A=()=>{s=!0,Ye.update(y),a(),I()};return f.onfinish=()=>{s||(e.set(Z8(d,r)),l&&l(),A())},{then(p,b){return g.then(p,b)},attachTimeline(p){return f.timeline=p,f.onfinish=null,$e},get time(){return bl(f.currentTime||0)},set time(p){f.currentTime=gr(p)},get speed(){return f.playbackRate},set speed(p){f.playbackRate=p},get duration(){return bl(u)},play:()=>{i||(f.play(),Vl(y))},pause:()=>f.pause(),stop:()=>{if(i=!0,f.playState==="idle")return;const{currentTime:p}=f;if(p){const b=Jc({...r,autoplay:!1});e.setWithVelocity(b.sample(p-rs).value,b.sample(p).value,rs)}A()},complete:()=>{s||f.finish()},cancel:A}}function d7({keyframes:e,delay:t,onUpdate:n,onComplete:l}){const r=()=>(n&&n(e[e.length-1]),l&&l(),{time:0,speed:1,duration:0,play:$e,pause:$e,stop:$e,then:o=>(o(),Promise.resolve()),cancel:$e,complete:$e});return t?Jc({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const u7={type:"spring",stiffness:500,damping:25,restSpeed:10},C7=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),A7={type:"keyframes",duration:.8},m7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},h7=(e,{keyframes:t})=>t.length>2?A7:po.has(e)?e.startsWith("scale")?C7(t[1]):u7:m7,_A=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(pr.test(t)||t==="0")&&!t.startsWith("url(")),f7=new Set(["brightness","contrast","saturate","opacity"]);function p7(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[l]=n.match(id)||[];if(!l)return e;const r=n.replace(l,"");let o=f7.has(t)?1:0;return l!==n&&(o*=100),t+"("+o+r+")"}const b7=/([a-z-]*)\(.*?\)/g,qA={...pr,getAnimatableNone:e=>{const t=e.match(b7);return t?t.map(p7).join(" "):e}},y7={...UV,color:xt,backgroundColor:xt,outlineColor:xt,fill:xt,stroke:xt,borderColor:xt,borderTopColor:xt,borderRightColor:xt,borderBottomColor:xt,borderLeftColor:xt,filter:qA,WebkitFilter:qA},xf=e=>y7[e];function xW(e,t){let n=xf(e);return n!==qA&&(n=pr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const JW=e=>/^0[^.\s]+$/.test(e);function Z7(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||JW(e)}function v7(e,t,n,l){const r=_A(t,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const i=l.from!==void 0?l.from:e.get();let a;const g=[];for(let s=0;s<o.length;s++)o[s]===null&&(o[s]=s===0?i:o[s-1]),Z7(o[s])&&g.push(s),typeof o[s]=="string"&&o[s]!=="none"&&o[s]!=="0"&&(a=o[s]);if(r&&g.length&&a)for(let s=0;s<g.length;s++){const I=g[s];o[I]=xW(t,a)}return o}function G7({when:e,delay:t,delayChildren:n,staggerChildren:l,staggerDirection:r,repeat:o,repeatType:i,repeatDelay:a,from:g,elapsed:s,...I}){return!!Object.keys(I).length}function Jf(e,t){return e[t]||e.default||e}const B7={skipAnimations:!1},Nf=(e,t,n,l={})=>r=>{const o=Jf(l,e)||{},i=o.delay||l.delay||0;let{elapsed:a=0}=l;a=a-gr(i);const g=v7(t,e,n,o),s=g[0],I=g[g.length-1],d=_A(e,s),u=_A(e,I);let C={keyframes:g,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(G7(o)||(C={...C,...h7(e,C)}),C.duration&&(C.duration=gr(C.duration)),C.repeatDelay&&(C.repeatDelay=gr(C.repeatDelay)),!d||!u||b8.current||o.type===!1||B7.skipAnimations)return d7(C);if(!l.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const h=I7(t,e,C);if(h)return h}return Jc(C)};function Nc(e){return!!(Qt(e)&&e.add)}const NW=e=>/^\-?\d*\.?\d+$/.test(e);function Yf(e,t){e.indexOf(t)===-1&&e.push(t)}function Hf(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ff{constructor(){this.subscriptions=[]}add(t){return Yf(this.subscriptions,t),()=>Hf(this.subscriptions,t)}notify(t,n,l){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,l);else for(let o=0;o<r;o++){const i=this.subscriptions[o];i&&i(t,n,l)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const S7=e=>!isNaN(parseFloat(e));class V7{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(l,r=!0)=>{this.prev=this.current,this.current=l;const{delta:o,timestamp:i}=Vt;this.lastUpdated!==i&&(this.timeDelta=o,this.lastUpdated=i,Ye.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ye.postRender(this.velocityCheck),this.velocityCheck=({timestamp:l})=>{l!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=S7(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ff);const l=this.events[t].add(n);return t==="change"?()=>{l(),Ye.read(()=>{this.events.change.getSize()||this.stop()})}:l}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,l){this.set(n),this.prev=t,this.timeDelta=l}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?wW(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ui(e,t){return new V7(e,t)}const YW=e=>t=>t.test(e),W7={test:e=>e==="auto",parse:e=>e},HW=[bo,me,nl,Yl,NP,JP,W7],Pi=e=>HW.find(YW(e)),R7=[...HW,xt,pr],w7=e=>R7.find(YW(e));function k7(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ui(n))}function X7(e,t){const n=gd(e,t);let{transitionEnd:l={},transition:r={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...l};for(const i in o){const a=PP(o[i]);k7(e,i,a)}}function x7(e,t,n){var l,r;const o=Object.keys(t).filter(a=>!e.hasValue(a)),i=o.length;if(i)for(let a=0;a<i;a++){const g=o[a],s=t[g];let I=null;Array.isArray(s)&&(I=s[0]),I===null&&(I=(r=(l=n[g])!==null&&l!==void 0?l:e.readValue(g))!==null&&r!==void 0?r:t[g]),I!=null&&(typeof I=="string"&&(NW(I)||JW(I))?I=parseFloat(I):!w7(I)&&pr.test(s)&&(I=xW(g,s)),e.addValue(g,ui(I,{owner:e})),n[g]===void 0&&(n[g]=I),I!==null&&e.setBaseTarget(g,I))}}function J7(e,t){return t?(t[e]||t.default||t).from:void 0}function N7(e,t,n){const l={};for(const r in e){const o=J7(r,t);if(o!==void 0)l[r]=o;else{const i=n.getValue(r);i&&(l[r]=i.get())}}return l}function Y7({protectedKeys:e,needsAnimating:t},n){const l=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,l}function H7(e,t){const n=e.get();if(Array.isArray(t)){for(let l=0;l<t.length;l++)if(t[l]!==n)return!0}else return n!==t}function FW(e,t,{delay:n=0,transitionOverride:l,type:r}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:i,...a}=e.makeTargetAnimatable(t);const g=e.getValue("willChange");l&&(o=l);const s=[],I=r&&e.animationState&&e.animationState.getState()[r];for(const d in a){const u=e.getValue(d),C=a[d];if(!u||C===void 0||I&&Y7(I,d))continue;const h={delay:n,elapsed:0,...Jf(o||{},d)};if(window.HandoffAppearAnimations){const A=e.getProps()[KV];if(A){const m=window.HandoffAppearAnimations(A,d,u,Ye);m!==null&&(h.elapsed=m,h.isHandoff=!0)}}let f=!h.isHandoff&&!H7(u,C);if(h.type==="spring"&&(u.getVelocity()||h.velocity)&&(f=!1),u.animation&&(f=!1),f)continue;u.start(Nf(d,u,C,e.shouldReduceMotion&&po.has(d)?{type:!1}:h));const y=u.animation;Nc(g)&&(g.add(d),y.then(()=>g.remove(d))),s.push(y)}return i&&Promise.all(s).then(()=>{i&&X7(e,i)}),s}function $A(e,t,n={}){const l=gd(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=l||{};n.transitionOverride&&(r=n.transitionOverride);const o=l?()=>Promise.all(FW(e,l,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(g=0)=>{const{delayChildren:s=0,staggerChildren:I,staggerDirection:d}=r;return F7(e,t,s+g,I,d,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[g,s]=a==="beforeChildren"?[o,i]:[i,o];return g().then(()=>s())}else return Promise.all([o(),i(n.delay)])}function F7(e,t,n=0,l=0,r=1,o){const i=[],a=(e.variantChildren.size-1)*l,g=r===1?(s=0)=>s*l:(s=0)=>a-s*l;return Array.from(e.variantChildren).sort(K7).forEach((s,I)=>{s.notify("AnimationStart",t),i.push($A(s,t,{...o,delay:n+g(I)}).then(()=>s.notify("AnimationComplete",t)))}),Promise.all(i)}function K7(e,t){return e.sortNodePosition(t)}function E7(e,t,n={}){e.notify("AnimationStart",t);let l;if(Array.isArray(t)){const r=t.map(o=>$A(e,o,n));l=Promise.all(r)}else if(typeof t=="string")l=$A(e,t,n);else{const r=typeof t=="function"?gd(e,t,n.custom):t;l=Promise.all(FW(e,r,n))}return l.then(()=>e.notify("AnimationComplete",t))}const M7=[...pf].reverse(),T7=pf.length;function L7(e){return t=>Promise.all(t.map(({animation:n,options:l})=>E7(e,n,l)))}function z7(e){let t=L7(e);const n=U7();let l=!0;const r=(g,s)=>{const I=gd(e,s);if(I){const{transition:d,transitionEnd:u,...C}=I;g={...g,...C,...u}}return g};function o(g){t=g(e)}function i(g,s){const I=e.getProps(),d=e.getVariantContext(!0)||{},u=[],C=new Set;let h={},f=1/0;for(let A=0;A<T7;A++){const m=M7[A],p=n[m],b=I[m]!==void 0?I[m]:d[m],Z=ja(b),V=m===s?p.isActive:null;V===!1&&(f=A);let S=b===d[m]&&b!==I[m]&&Z;if(S&&l&&e.manuallyAnimateOnMount&&(S=!1),p.protectedKeys={...h},!p.isActive&&V===null||!b&&!p.prevProp||rd(b)||typeof b=="boolean")continue;let w=j7(p.prevProp,b)||m===s&&p.isActive&&!S&&Z||A>f&&Z,B=!1;const W=Array.isArray(b)?b:[b];let R=W.reduce(r,{});V===!1&&(R={});const{prevResolvedValues:k={}}=p,x={...k,...R},H=M=>{w=!0,C.has(M)&&(B=!0,C.delete(M)),p.needsAnimating[M]=!0};for(const M in x){const T=R[M],E=k[M];if(h.hasOwnProperty(M))continue;let N=!1;kc(T)&&kc(E)?N=!aW(T,E):N=T!==E,N?T!==void 0?H(M):C.add(M):T!==void 0&&C.has(M)?H(M):p.protectedKeys[M]=!0}p.prevProp=b,p.prevResolvedValues=R,p.isActive&&(h={...h,...R}),l&&e.blockInitialAnimation&&(w=!1),w&&(!S||B)&&u.push(...W.map(M=>({animation:M,options:{type:m,...g}})))}if(C.size){const A={};C.forEach(m=>{const p=e.getBaseTarget(m);p!==void 0&&(A[m]=p)}),u.push({animation:A})}let y=!!u.length;return l&&(I.initial===!1||I.initial===I.animate)&&!e.manuallyAnimateOnMount&&(y=!1),l=!1,y?t(u):Promise.resolve()}function a(g,s,I){var d;if(n[g].isActive===s)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(C=>{var h;return(h=C.animationState)===null||h===void 0?void 0:h.setActive(g,s)}),n[g].isActive=s;const u=i(I,g);for(const C in n)n[C].protectedKeys={};return u}return{animateChanges:i,setActive:a,setAnimateFunction:o,getState:()=>n}}function j7(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!aW(t,e):!1}function Nr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function U7(){return{animate:Nr(!0),whileInView:Nr(),whileHover:Nr(),whileTap:Nr(),whileDrag:Nr(),whileFocus:Nr(),exit:Nr()}}class D7 extends kr{constructor(t){super(t),t.animationState||(t.animationState=z7(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),rd(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Q7=0;class P7 extends kr{constructor(){super(...arguments),this.id=Q7++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:l}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t,{custom:l??this.node.getProps().custom});n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const O7={animation:{Feature:D7},exit:{Feature:P7}},CZ=(e,t)=>Math.abs(e-t);function _7(e,t){const n=CZ(e.x,t.x),l=CZ(e.y,t.y);return Math.sqrt(n**2+l**2)}class KW{constructor(t,n,{transformPagePoint:l,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=tC(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,C=_7(d.offset,{x:0,y:0})>=3;if(!u&&!C)return;const{point:h}=d,{timestamp:f}=Vt;this.history.push({...h,timestamp:f});const{onStart:y,onMove:A}=this.handlers;u||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,d)},this.handlePointerMove=(d,u)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=eC(u,this.transformPagePoint),Ye.update(this.updatePoint,!0)},this.handlePointerUp=(d,u)=>{this.end();const{onEnd:C,onSessionEnd:h,resumeAnimation:f}=this.handlers;if(this.dragSnapToOrigin&&f&&f(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=tC(d.type==="pointercancel"?this.lastMoveEventInfo:eC(u,this.transformPagePoint),this.history);this.startEvent&&C&&C(d,y),h&&h(d,y)},!nW(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=l,this.contextWindow=r||window;const i=ad(t),a=eC(i,this.transformPagePoint),{point:g}=a,{timestamp:s}=Vt;this.history=[{...g,timestamp:s}];const{onSessionStart:I}=n;I&&I(t,tC(a,this.history)),this.removeListeners=ar(pl(this.contextWindow,"pointermove",this.handlePointerMove),pl(this.contextWindow,"pointerup",this.handlePointerUp),pl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Vl(this.updatePoint)}}function eC(e,t){return t?{point:t(e.point)}:e}function AZ(e,t){return{x:e.x-t.x,y:e.y-t.y}}function tC({point:e},t){return{point:e,delta:AZ(e,EW(t)),offset:AZ(e,q7(t)),velocity:$7(t,.1)}}function q7(e){return e[0]}function EW(e){return e[e.length-1]}function $7(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,l=null;const r=EW(e);for(;n>=0&&(l=e[n],!(r.timestamp-l.timestamp>gr(t)));)n--;if(!l)return{x:0,y:0};const o=bl(r.timestamp-l.timestamp);if(o===0)return{x:0,y:0};const i={x:(r.x-l.x)/o,y:(r.y-l.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function an(e){return e.max-e.min}function em(e,t=0,n=.01){return Math.abs(e-t)<=n}function mZ(e,t,n,l=.5){e.origin=l,e.originPoint=je(t.min,t.max,e.origin),e.scale=an(n)/an(t),(em(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=je(n.min,n.max,e.origin)-e.originPoint,(em(e.translate)||isNaN(e.translate))&&(e.translate=0)}function fa(e,t,n,l){mZ(e.x,t.x,n.x,l?l.originX:void 0),mZ(e.y,t.y,n.y,l?l.originY:void 0)}function hZ(e,t,n){e.min=n.min+t.min,e.max=e.min+an(t)}function eO(e,t,n){hZ(e.x,t.x,n.x),hZ(e.y,t.y,n.y)}function fZ(e,t,n){e.min=t.min-n.min,e.max=e.min+an(t)}function pa(e,t,n){fZ(e.x,t.x,n.x),fZ(e.y,t.y,n.y)}function tO(e,{min:t,max:n},l){return t!==void 0&&e<t?e=l?je(t,e,l.min):Math.max(e,t):n!==void 0&&e>n&&(e=l?je(n,e,l.max):Math.min(e,n)),e}function pZ(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function nO(e,{top:t,left:n,bottom:l,right:r}){return{x:pZ(e.x,n,r),y:pZ(e.y,t,l)}}function bZ(e,t){let n=t.min-e.min,l=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,l]=[l,n]),{min:n,max:l}}function lO(e,t){return{x:bZ(e.x,t.x),y:bZ(e.y,t.y)}}function rO(e,t){let n=.5;const l=an(e),r=an(t);return r>l?n=Da(t.min,t.max-l,e.min):l>r&&(n=Da(e.min,e.max-r,t.min)),fr(0,1,n)}function oO(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const tm=.35;function iO(e=tm){return e===!1?e=0:e===!0&&(e=tm),{x:yZ(e,"left","right"),y:yZ(e,"top","bottom")}}function yZ(e,t,n){return{min:ZZ(e,t),max:ZZ(e,n)}}function ZZ(e,t){return typeof e=="number"?e:e[t]||0}const vZ=()=>({translate:0,scale:1,origin:0,originPoint:0}),Lo=()=>({x:vZ(),y:vZ()}),GZ=()=>({min:0,max:0}),ot=()=>({x:GZ(),y:GZ()});function fn(e){return[e("x"),e("y")]}function MW({top:e,left:t,right:n,bottom:l}){return{x:{min:t,max:n},y:{min:e,max:l}}}function aO({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function gO(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),l=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:l.y,right:l.x}}function nC(e){return e===void 0||e===1}function nm({scale:e,scaleX:t,scaleY:n}){return!nC(e)||!nC(t)||!nC(n)}function Er(e){return nm(e)||TW(e)||e.z||e.rotate||e.rotateX||e.rotateY}function TW(e){return BZ(e.x)||BZ(e.y)}function BZ(e){return e&&e!=="0%"}function Yc(e,t,n){const l=e-n,r=t*l;return n+r}function SZ(e,t,n,l,r){return r!==void 0&&(e=Yc(e,r,l)),Yc(e,n,l)+t}function lm(e,t=0,n=1,l,r){e.min=SZ(e.min,t,n,l,r),e.max=SZ(e.max,t,n,l,r)}function LW(e,{x:t,y:n}){lm(e.x,t.translate,t.scale,t.originPoint),lm(e.y,n.translate,n.scale,n.originPoint)}function sO(e,t,n,l=!1){const r=n.length;if(!r)return;t.x=t.y=1;let o,i;for(let a=0;a<r;a++){o=n[a],i=o.projectionDelta;const g=o.instance;g&&g.style&&g.style.display==="contents"||(l&&o.options.layoutScroll&&o.scroll&&o!==o.root&&zo(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,LW(e,i)),l&&Er(o.latestValues)&&zo(e,o.latestValues))}t.x=VZ(t.x),t.y=VZ(t.y)}function VZ(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ml(e,t){e.min=e.min+t,e.max=e.max+t}function WZ(e,t,[n,l,r]){const o=t[r]!==void 0?t[r]:.5,i=je(e.min,e.max,o);lm(e,t[n],t[l],i,t.scale)}const cO=["x","scaleX","originX"],IO=["y","scaleY","originY"];function zo(e,t){WZ(e.x,t,cO),WZ(e.y,t,IO)}function zW(e,t){return MW(gO(e.getBoundingClientRect(),t))}function dO(e,t,n){const l=zW(e,n),{scroll:r}=t;return r&&(Ml(l.x,r.offset.x),Ml(l.y,r.offset.y)),l}const jW=({current:e})=>e?e.ownerDocument.defaultView:null,uO=new WeakMap;class CO{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ot(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const r=I=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ad(I,"page").point)},o=(I,d)=>{const{drag:u,dragPropagation:C,onDragStart:h}=this.getProps();if(u&&!C&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=rW(u),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fn(y=>{let A=this.getAxisMotionValue(y).get()||0;if(nl.test(A)){const{projection:m}=this.visualElement;if(m&&m.layout){const p=m.layout.layoutBox[y];p&&(A=an(p)*(parseFloat(A)/100))}}this.originPoint[y]=A}),h&&Ye.update(()=>h(I,d),!1,!0);const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},i=(I,d)=>{const{dragPropagation:u,dragDirectionLock:C,onDirectionLock:h,onDrag:f}=this.getProps();if(!u&&!this.openGlobalLock)return;const{offset:y}=d;if(C&&this.currentDirection===null){this.currentDirection=AO(y),this.currentDirection!==null&&h&&h(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),f&&f(I,d)},a=(I,d)=>this.stop(I,d),g=()=>fn(I=>{var d;return this.getAnimationState(I)==="paused"&&((d=this.getAxisMotionValue(I).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:s}=this.getProps();this.panSession=new KW(t,{onSessionStart:r,onStart:o,onMove:i,onSessionEnd:a,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,contextWindow:jW(this.visualElement)})}stop(t,n){const l=this.isDragging;if(this.cancel(),!l)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Ye.update(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:l}=this.getProps();!l&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,l){const{drag:r}=this.getProps();if(!l||!os(t,r,this.currentDirection))return;const o=this.getAxisMotionValue(t);let i=this.originPoint[t]+l[t];this.constraints&&this.constraints[t]&&(i=tO(i,this.constraints[t],this.elastic[t])),o.set(i)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:l}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&Mo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=nO(r.layoutBox,n):this.constraints=!1,this.elastic=iO(l),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fn(i=>{this.getAxisMotionValue(i)&&(this.constraints[i]=oO(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Mo(t))return!1;const l=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=dO(l,r.root,this.visualElement.getTransformPagePoint());let i=lO(r.layout.layoutBox,o);if(n){const a=n(aO(i));this.hasMutatedConstraints=!!a,a&&(i=MW(a))}return i}startAnimation(t){const{drag:n,dragMomentum:l,dragElastic:r,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),g=this.constraints||{},s=fn(I=>{if(!os(I,n,this.currentDirection))return;let d=g&&g[I]||{};i&&(d={min:0,max:0});const u=r?200:1e6,C=r?40:1e7,h={type:"inertia",velocity:l?t[I]:0,bounceStiffness:u,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...o,...d};return this.startAxisValueAnimation(I,h)});return Promise.all(s).then(a)}startAxisValueAnimation(t,n){const l=this.getAxisMotionValue(t);return l.start(Nf(t,l,0,n))}stopAnimation(){fn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),l=this.visualElement.getProps(),r=l[n];return r||this.visualElement.getValue(t,(l.initial?l.initial[t]:void 0)||0)}snapToCursor(t){fn(n=>{const{drag:l}=this.getProps();if(!os(n,l,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:i,max:a}=r.layout.layoutBox[n];o.set(t[n]-je(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:l}=this.visualElement;if(!Mo(n)||!l||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};fn(i=>{const a=this.getAxisMotionValue(i);if(a){const g=a.get();r[i]=rO({min:g,max:g},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",l.root&&l.root.updateScroll(),l.updateLayout(),this.resolveConstraints(),fn(i=>{if(!os(i,t,null))return;const a=this.getAxisMotionValue(i),{min:g,max:s}=this.constraints[i];a.set(je(g,s,r[i]))})}addListeners(){if(!this.visualElement.current)return;uO.set(this.visualElement,this);const t=this.visualElement.current,n=pl(t,"pointerdown",g=>{const{drag:s,dragListener:I=!0}=this.getProps();s&&I&&this.start(g)}),l=()=>{const{dragConstraints:g}=this.getProps();Mo(g)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",l);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),l();const i=Cl(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:g,hasLayoutChanged:s})=>{this.isDragging&&s&&(fn(I=>{const d=this.getAxisMotionValue(I);d&&(this.originPoint[I]+=g[I].translate,d.set(d.get()+g[I].translate))}),this.visualElement.render())});return()=>{i(),n(),o(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:l=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:i=tm,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:l,dragPropagation:r,dragConstraints:o,dragElastic:i,dragMomentum:a}}}function os(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function AO(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class mO extends kr{constructor(t){super(t),this.removeGroupControls=$e,this.removeListeners=$e,this.controls=new CO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$e}unmount(){this.removeGroupControls(),this.removeListeners()}}const RZ=e=>(t,n)=>{e&&Ye.update(()=>e(t,n))};class hO extends kr{constructor(){super(...arguments),this.removePointerDownListener=$e}onPointerDown(t){this.session=new KW(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jW(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:l,onPanEnd:r}=this.node.getProps();return{onSessionStart:RZ(t),onStart:RZ(n),onMove:l,onEnd:(o,i)=>{delete this.session,r&&Ye.update(()=>r(o,i))}}}mount(){this.removePointerDownListener=pl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function fO(){const e=v.useContext(nd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:l}=e,r=v.useId();return v.useEffect(()=>l(r),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}const Ws={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wZ(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Oi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(me.test(e))e=parseFloat(e);else return e;const n=wZ(e,t.target.x),l=wZ(e,t.target.y);return`${n}% ${l}%`}},pO={correct:(e,{treeScale:t,projectionDelta:n})=>{const l=e,r=pr.parse(e);if(r.length>5)return l;const o=pr.createTransformer(e),i=typeof r[0]!="number"?1:0,a=n.x.scale*t.x,g=n.y.scale*t.y;r[0+i]/=a,r[1+i]/=g;const s=je(a,g,.5);return typeof r[2+i]=="number"&&(r[2+i]/=s),typeof r[3+i]=="number"&&(r[3+i]/=s),o(r)}};class bO extends U.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:l,layoutId:r}=this.props,{projection:o}=t;VP(yO),o&&(n.group&&n.group.add(o),l&&l.register&&r&&l.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ws.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:l,drag:r,isPresent:o}=this.props,i=l.projection;return i&&(i.isPresent=o,r||t.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?i.promote():i.relegate()||Ye.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:l}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),l&&l.deregister&&l.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function UW(e){const[t,n]=fO(),l=v.useContext(yf);return U.createElement(bO,{...e,layoutGroup:l,switchLayoutGroup:v.useContext(MV),isPresent:t,safeToRemove:n})}const yO={borderRadius:{...Oi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oi,borderTopRightRadius:Oi,borderBottomLeftRadius:Oi,borderBottomRightRadius:Oi,boxShadow:pO},DW=["TopLeft","TopRight","BottomLeft","BottomRight"],ZO=DW.length,kZ=e=>typeof e=="string"?parseFloat(e):e,XZ=e=>typeof e=="number"||me.test(e);function vO(e,t,n,l,r,o){r?(e.opacity=je(0,n.opacity!==void 0?n.opacity:1,GO(l)),e.opacityExit=je(t.opacity!==void 0?t.opacity:1,0,BO(l))):o&&(e.opacity=je(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,l));for(let i=0;i<ZO;i++){const a=`border${DW[i]}Radius`;let g=xZ(t,a),s=xZ(n,a);if(g===void 0&&s===void 0)continue;g||(g=0),s||(s=0),g===0||s===0||XZ(g)===XZ(s)?(e[a]=Math.max(je(kZ(g),kZ(s),l),0),(nl.test(s)||nl.test(g))&&(e[a]+="%")):e[a]=s}(t.rotate||n.rotate)&&(e.rotate=je(t.rotate||0,n.rotate||0,l))}function xZ(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const GO=QW(0,.5,mW),BO=QW(.5,.95,$e);function QW(e,t,n){return l=>l<e?0:l>t?1:n(Da(e,t,l))}function JZ(e,t){e.min=t.min,e.max=t.max}function hn(e,t){JZ(e.x,t.x),JZ(e.y,t.y)}function NZ(e,t,n,l,r){return e-=t,e=Yc(e,1/n,l),r!==void 0&&(e=Yc(e,1/r,l)),e}function SO(e,t=0,n=1,l=.5,r,o=e,i=e){if(nl.test(t)&&(t=parseFloat(t),t=je(i.min,i.max,t/100)-i.min),typeof t!="number")return;let a=je(o.min,o.max,l);e===o&&(a-=t),e.min=NZ(e.min,t,n,a,r),e.max=NZ(e.max,t,n,a,r)}function YZ(e,t,[n,l,r],o,i){SO(e,t[n],t[l],t[r],t.scale,o,i)}const VO=["x","scaleX","originX"],WO=["y","scaleY","originY"];function HZ(e,t,n,l){YZ(e.x,t,VO,n?n.x:void 0,l?l.x:void 0),YZ(e.y,t,WO,n?n.y:void 0,l?l.y:void 0)}function FZ(e){return e.translate===0&&e.scale===1}function PW(e){return FZ(e.x)&&FZ(e.y)}function RO(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function OW(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function KZ(e){return an(e.x)/an(e.y)}class wO{constructor(){this.members=[]}add(t){Yf(this.members,t),t.scheduleRender()}remove(t){if(Hf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let l;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){l=o;break}}return l?(this.promote(l),!0):!1}promote(t,n){const l=this.lead;if(t!==l&&(this.prevLead=l,this.lead=t,t.show(),l)){l.instance&&l.scheduleRender(),t.scheduleRender(),t.resumeFrom=l,n&&(t.resumeFrom.preserveOpacity=!0),l.snapshot&&(t.snapshot=l.snapshot,t.snapshot.latestValues=l.animationValues||l.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&l.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:l}=t;n.onExitComplete&&n.onExitComplete(),l&&l.options.onExitComplete&&l.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function EZ(e,t,n){let l="";const r=e.x.translate/t.x,o=e.y.translate/t.y;if((r||o)&&(l=`translate3d(${r}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(l+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:g,rotateX:s,rotateY:I}=n;g&&(l+=`rotate(${g}deg) `),s&&(l+=`rotateX(${s}deg) `),I&&(l+=`rotateY(${I}deg) `)}const i=e.x.scale*t.x,a=e.y.scale*t.y;return(i!==1||a!==1)&&(l+=`scale(${i}, ${a})`),l||"none"}const kO=(e,t)=>e.depth-t.depth;class XO{constructor(){this.children=[],this.isDirty=!1}add(t){Yf(this.children,t),this.isDirty=!0}remove(t){Hf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(kO),this.isDirty=!1,this.children.forEach(t)}}function xO(e,t){const n=performance.now(),l=({timestamp:r})=>{const o=r-n;o>=t&&(Vl(l),e(o-t))};return Ye.read(l,!0),()=>Vl(l)}function JO(e){window.MotionDebug&&window.MotionDebug.record(e)}function NO(e){return e instanceof SVGElement&&e.tagName!=="svg"}function YO(e,t,n){const l=Qt(e)?e:ui(e);return l.start(Nf("",l,t,n)),l.animation}const MZ=["","X","Y","Z"],HO={visibility:"hidden"},TZ=1e3;let FO=0;const Mr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function _W({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:l,resetTransform:r}){return class{constructor(i={},a=t==null?void 0:t()){this.id=FO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Mr.totalNodes=Mr.resolvedTargetDeltas=Mr.recalculatedProjection=0,this.nodes.forEach(MO),this.nodes.forEach(UO),this.nodes.forEach(DO),this.nodes.forEach(TO),JO(Mr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new XO)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Ff),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const g=this.eventHandlers.get(i);g&&g.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=NO(i),this.instance=i;const{layoutId:g,layout:s,visualElement:I}=this.options;if(I&&!I.current&&I.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(s||g)&&(this.isLayoutDirty=!0),e){let d;const u=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=xO(u,250),Ws.hasAnimatedSinceResize&&(Ws.hasAnimatedSinceResize=!1,this.nodes.forEach(zZ))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&I&&(g||s)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:u,hasRelativeTargetChanged:C,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||I.getDefaultTransition()||qO,{onLayoutAnimationStart:y,onLayoutAnimationComplete:A}=I.getProps(),m=!this.targetLayout||!OW(this.targetLayout,h)||C,p=!u&&C;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||p||u&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,p);const b={...Jf(f,"layout"),onPlay:y,onComplete:A};(I.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else u||zZ(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Vl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QO),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let I=0;I<this.path.length;I++){const d=this.path[I];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:g}=this.options;if(a===void 0&&!g)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(LZ);return}this.isUpdating||this.nodes.forEach(zO),this.isUpdating=!1,this.nodes.forEach(jO),this.nodes.forEach(KO),this.nodes.forEach(EO),this.clearAllSnapshots();const a=performance.now();Vt.delta=fr(0,1e3/60,a-Vt.timestamp),Vt.timestamp=a,Vt.isProcessing=!0,Uu.update.process(Vt),Uu.preRender.process(Vt),Uu.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(LO),this.sharedNodes.forEach(PO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ot(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:i,isRoot:l(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const i=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!PW(this.projectionDelta),g=this.getTransformTemplate(),s=g?g(this.latestValues,""):void 0,I=s!==this.prevTransformTemplateValue;i&&(a||Er(this.latestValues)||I)&&(r(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let g=this.removeElementScroll(a);return i&&(g=this.removeTransform(g)),$O(g),{animationId:this.root.animationId,measuredBox:a,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return ot();const a=i.measureViewportBox(),{scroll:g}=this.root;return g&&(Ml(a.x,g.offset.x),Ml(a.y,g.offset.y)),a}removeElementScroll(i){const a=ot();hn(a,i);for(let g=0;g<this.path.length;g++){const s=this.path[g],{scroll:I,options:d}=s;if(s!==this.root&&I&&d.layoutScroll){if(I.isRoot){hn(a,i);const{scroll:u}=this.root;u&&(Ml(a.x,-u.offset.x),Ml(a.y,-u.offset.y))}Ml(a.x,I.offset.x),Ml(a.y,I.offset.y)}}return a}applyTransform(i,a=!1){const g=ot();hn(g,i);for(let s=0;s<this.path.length;s++){const I=this.path[s];!a&&I.options.layoutScroll&&I.scroll&&I!==I.root&&zo(g,{x:-I.scroll.offset.x,y:-I.scroll.offset.y}),Er(I.latestValues)&&zo(g,I.latestValues)}return Er(this.latestValues)&&zo(g,this.latestValues),g}removeTransform(i){const a=ot();hn(a,i);for(let g=0;g<this.path.length;g++){const s=this.path[g];if(!s.instance||!Er(s.latestValues))continue;nm(s.latestValues)&&s.updateSnapshot();const I=ot(),d=s.measurePageBox();hn(I,d),HZ(a,s.latestValues,s.snapshot?s.snapshot.layoutBox:void 0,I)}return Er(this.latestValues)&&HZ(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var a;const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const s=!!this.resumingFrom||this!==g;if(!(i||s&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:u}=this.options;if(!(!this.layout||!(d||u))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const C=this.getClosestProjectingParent();C&&C.layout&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),pa(this.relativeTargetOrigin,this.layout.layoutBox,C.layout.layoutBox),hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ot(),this.targetWithTransforms=ot()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hn(this.target,this.layout.layoutBox),LW(this.target,this.targetDelta)):hn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const C=this.getClosestProjectingParent();C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),pa(this.relativeTargetOrigin,this.target,C.target),hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Mr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||nm(this.parent.latestValues)||TW(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const a=this.getLead(),g=!!this.resumingFrom||this!==a;let s=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(s=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(s=!1),s)return;const{layout:I,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(I||d))return;hn(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,C=this.treeScale.y;sO(this.layoutCorrected,this.treeScale,this.path,g),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:h}=a;if(!h){this.projectionTransform&&(this.projectionDelta=Lo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Lo(),this.projectionDeltaWithTransform=Lo());const f=this.projectionTransform;fa(this.projectionDelta,this.layoutCorrected,h,this.latestValues),this.projectionTransform=EZ(this.projectionDelta,this.treeScale),(this.projectionTransform!==f||this.treeScale.x!==u||this.treeScale.y!==C)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h)),Mr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),i){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(i,a=!1){const g=this.snapshot,s=g?g.latestValues:{},I={...this.latestValues},d=Lo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const u=ot(),C=g?g.source:void 0,h=this.layout?this.layout.source:void 0,f=C!==h,y=this.getStack(),A=!y||y.members.length<=1,m=!!(f&&!A&&this.options.crossfade===!0&&!this.path.some(_O));this.animationProgress=0;let p;this.mixTargetDelta=b=>{const Z=b/1e3;jZ(d.x,i.x,Z),jZ(d.y,i.y,Z),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pa(u,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OO(this.relativeTarget,this.relativeTargetOrigin,u,Z),p&&RO(this.relativeTarget,p)&&(this.isProjectionDirty=!1),p||(p=ot()),hn(p,this.relativeTarget)),f&&(this.animationValues=I,vO(I,s,this.latestValues,Z,m,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Vl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ye.update(()=>{Ws.hasAnimatedSinceResize=!0,this.currentAnimation=YO(0,TZ,{...i,onUpdate:a=>{this.mixTargetDelta(a),i.onUpdate&&i.onUpdate(a)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TZ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:g,layout:s,latestValues:I}=i;if(!(!a||!g||!s)){if(this!==i&&this.layout&&s&&qW(this.options.animationType,this.layout.layoutBox,s.layoutBox)){g=this.target||ot();const d=an(this.layout.layoutBox.x);g.x.min=i.target.x.min,g.x.max=g.x.min+d;const u=an(this.layout.layoutBox.y);g.y.min=i.target.y.min,g.y.max=g.y.min+u}hn(a,g),zo(a,I),fa(this.projectionDeltaWithTransform,this.layoutCorrected,a,I)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new wO),this.sharedNodes.get(i).add(a);const s=a.options.initialPromotionConfig;a.promote({transition:s?s.transition:void 0,preserveFollowOpacity:s&&s.shouldPreserveFollowOpacity?s.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:a}=this.options;return a?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:a}=this.options;return a?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:g}={}){const s=this.getStack();s&&s.promote(this,g),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:g}=i;if((g.rotate||g.rotateX||g.rotateY||g.rotateZ)&&(a=!0),!a)return;const s={};for(let I=0;I<MZ.length;I++){const d="rotate"+MZ[I];g[d]&&(s[d]=g[d],i.setStaticValue(d,0))}i.render();for(const I in s)i.setStaticValue(I,s[I]);i.scheduleRender()}getProjectionStyles(i){var a,g;if(!this.instance||this.isSVG)return;if(!this.isVisible)return HO;const s={visibility:""},I=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=Vs(i==null?void 0:i.pointerEvents)||"",s.transform=I?I(this.latestValues,""):"none",s;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=Vs(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Er(this.latestValues)&&(f.transform=I?I({},""):"none",this.hasProjected=!1),f}const u=d.animationValues||d.latestValues;this.applyTransformsToTarget(),s.transform=EZ(this.projectionDeltaWithTransform,this.treeScale,u),I&&(s.transform=I(u,s.transform));const{x:C,y:h}=this.projectionDelta;s.transformOrigin=`${C.origin*100}% ${h.origin*100}% 0`,d.animationValues?s.opacity=d===this?(g=(a=u.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&g!==void 0?g:1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:s.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const f in Rc){if(u[f]===void 0)continue;const{correct:y,applyTo:A}=Rc[f],m=s.transform==="none"?u[f]:y(u[f],d);if(A){const p=A.length;for(let b=0;b<p;b++)s[A[b]]=m}else s[f]=m}return this.options.layoutId&&(s.pointerEvents=d===this?Vs(i==null?void 0:i.pointerEvents)||"":"none"),s}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(LZ),this.root.sharedNodes.clear()}}}function KO(e){e.updateLayout()}function EO(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:l,measuredBox:r}=e.layout,{animationType:o}=e.options,i=n.source!==e.layout.source;o==="size"?fn(d=>{const u=i?n.measuredBox[d]:n.layoutBox[d],C=an(u);u.min=l[d].min,u.max=u.min+C}):qW(o,n.layoutBox,l)&&fn(d=>{const u=i?n.measuredBox[d]:n.layoutBox[d],C=an(l[d]);u.max=u.min+C,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+C)});const a=Lo();fa(a,l,n.layoutBox);const g=Lo();i?fa(g,e.applyTransform(r,!0),n.measuredBox):fa(g,l,n.layoutBox);const s=!PW(a);let I=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:u,layout:C}=d;if(u&&C){const h=ot();pa(h,n.layoutBox,u.layoutBox);const f=ot();pa(f,l,C.layoutBox),OW(h,f)||(I=!0),d.options.layoutRoot&&(e.relativeTarget=f,e.relativeTargetOrigin=h,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:l,snapshot:n,delta:g,layoutDelta:a,hasLayoutChanged:s,hasRelativeTargetChanged:I})}else if(e.isLead()){const{onExitComplete:l}=e.options;l&&l()}e.options.transition=void 0}function MO(e){Mr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function TO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function LO(e){e.clearSnapshot()}function LZ(e){e.clearMeasurements()}function zO(e){e.isLayoutDirty=!1}function jO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function zZ(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function UO(e){e.resolveTargetDelta()}function DO(e){e.calcProjection()}function QO(e){e.resetRotation()}function PO(e){e.removeLeadSnapshot()}function jZ(e,t,n){e.translate=je(t.translate,0,n),e.scale=je(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function UZ(e,t,n,l){e.min=je(t.min,n.min,l),e.max=je(t.max,n.max,l)}function OO(e,t,n,l){UZ(e.x,t.x,n.x,l),UZ(e.y,t.y,n.y,l)}function _O(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const qO={duration:.45,ease:[.4,0,.1,1]},DZ=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),QZ=DZ("applewebkit/")&&!DZ("chrome/")?Math.round:$e;function PZ(e){e.min=QZ(e.min),e.max=QZ(e.max)}function $O(e){PZ(e.x),PZ(e.y)}function qW(e,t,n){return e==="position"||e==="preserve-aspect"&&!em(KZ(t),KZ(n),.2)}const e_=_W({attachResizeListener:(e,t)=>Cl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lC={current:void 0},$W=_W({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!lC.current){const e=new e_({});e.mount(window),e.setOptions({layoutScroll:!0}),lC.current=e}return lC.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),t_={pan:{Feature:hO},drag:{Feature:mO,ProjectionNode:$W,MeasureLayout:UW}},n_=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function l_(e){const t=n_.exec(e);if(!t)return[,];const[,n,l]=t;return[n,l]}function rm(e,t,n=1){const[l,r]=l_(e);if(!l)return;const o=window.getComputedStyle(t).getPropertyValue(l);if(o){const i=o.trim();return NW(i)?parseFloat(i):i}else return DA(r)?rm(r,t,n+1):r}function r_(e,{...t},n){const l=e.current;if(!(l instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(r=>{const o=r.get();if(!DA(o))return;const i=rm(o,l);i&&r.set(i)});for(const r in t){const o=t[r];if(!DA(o))continue;const i=rm(o,l);i&&(t[r]=i,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:t,transitionEnd:n}}const o_=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),eR=e=>o_.has(e),i_=e=>Object.keys(e).some(eR),OZ=e=>e===bo||e===me,_Z=(e,t)=>parseFloat(e.split(", ")[t]),qZ=(e,t)=>(n,{transform:l})=>{if(l==="none"||!l)return 0;const r=l.match(/^matrix3d\((.+)\)$/);if(r)return _Z(r[1],t);{const o=l.match(/^matrix\((.+)\)$/);return o?_Z(o[1],e):0}},a_=new Set(["x","y","z"]),g_=Ig.filter(e=>!a_.has(e));function s_(e){const t=[];return g_.forEach(n=>{const l=e.getValue(n);l!==void 0&&(t.push([n,l.get()]),l.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Ci={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:qZ(4,13),y:qZ(5,14)};Ci.translateX=Ci.x;Ci.translateY=Ci.y;const c_=(e,t,n)=>{const l=t.measureViewportBox(),r=t.current,o=getComputedStyle(r),{display:i}=o,a={};i==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(s=>{a[s]=Ci[s](l,o)}),t.render();const g=t.measureViewportBox();return n.forEach(s=>{const I=t.getValue(s);I&&I.jump(a[s]),e[s]=Ci[s](g,o)}),e},I_=(e,t,n={},l={})=>{t={...t},l={...l};const r=Object.keys(t).filter(eR);let o=[],i=!1;const a=[];if(r.forEach(g=>{const s=e.getValue(g);if(!e.hasValue(g))return;let I=n[g],d=Pi(I);const u=t[g];let C;if(kc(u)){const h=u.length,f=u[0]===null?1:0;I=u[f],d=Pi(I);for(let y=f;y<h&&u[y]!==null;y++)C?Rf(Pi(u[y])===C):C=Pi(u[y])}else C=Pi(u);if(d!==C)if(OZ(d)&&OZ(C)){const h=s.get();typeof h=="string"&&s.set(parseFloat(h)),typeof u=="string"?t[g]=parseFloat(u):Array.isArray(u)&&C===me&&(t[g]=u.map(parseFloat))}else d!=null&&d.transform&&(C!=null&&C.transform)&&(I===0||u===0)?I===0?s.set(C.transform(I)):t[g]=d.transform(u):(i||(o=s_(e),i=!0),a.push(g),l[g]=l[g]!==void 0?l[g]:t[g],s.jump(u))}),a.length){const g=a.indexOf("height")>=0?window.pageYOffset:null,s=c_(t,e,a);return o.length&&o.forEach(([I,d])=>{e.getValue(I).set(d)}),e.render(),ld&&g!==null&&window.scrollTo({top:g}),{target:s,transitionEnd:l}}else return{target:t,transitionEnd:l}};function d_(e,t,n,l){return i_(t)?I_(e,t,n,l):{target:t,transitionEnd:l}}const u_=(e,t,n,l)=>{const r=r_(e,t,l);return t=r.target,l=r.transitionEnd,d_(e,t,n,l)},om={current:null},tR={current:!1};function C_(){if(tR.current=!0,!!ld)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>om.current=e.matches;e.addListener(t),t()}else om.current=!1}function A_(e,t,n){const{willChange:l}=t;for(const r in t){const o=t[r],i=n[r];if(Qt(o))e.addValue(r,o),Nc(l)&&l.add(r);else if(Qt(i))e.addValue(r,ui(o,{owner:e})),Nc(l)&&l.remove(r);else if(i!==o)if(e.hasValue(r)){const a=e.getValue(r);!a.hasAnimated&&a.set(o)}else{const a=e.getStaticValue(r);e.addValue(r,ui(a!==void 0?a:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const $Z=new WeakMap,nR=Object.keys(Ua),m_=nR.length,ev=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],h_=bf.length;class f_{constructor({parent:t,props:n,presenceContext:l,reducedMotionConfig:r,visualState:o},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ye.render(this.render,!1,!0);const{latestValues:a,renderState:g}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=g,this.parent=t,this.props=n,this.presenceContext=l,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=i,this.isControllingVariants=od(n),this.isVariantNode=EV(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:s,...I}=this.scrapeMotionValuesFromProps(n,{});for(const d in I){const u=I[d];a[d]!==void 0&&Qt(u)&&(u.set(a[d],!1),Nc(s)&&s.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,$Z.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,l)=>this.bindToMotionValue(l,n)),tR.current||C_(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:om.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$Z.delete(this.current),this.projection&&this.projection.unmount(),Vl(this.notifyUpdate),Vl(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const l=po.has(t),r=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Ye.update(this.notifyUpdate,!1,!0),l&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},l,r,o){let i,a;for(let g=0;g<m_;g++){const s=nR[g],{isEnabled:I,Feature:d,ProjectionNode:u,MeasureLayout:C}=Ua[s];u&&(i=u),I(n)&&(!this.features[s]&&d&&(this.features[s]=new d(this)),C&&(a=C))}if((this.type==="html"||this.type==="svg")&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:g,layout:s,drag:I,dragConstraints:d,layoutScroll:u,layoutRoot:C}=n;this.projection.setOptions({layoutId:g,layout:s,alwaysMeasureLayout:!!I||d&&Mo(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof s=="string"?s:"both",initialPromotionConfig:o,layoutScroll:u,layoutRoot:C})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ot()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let l=0;l<ev.length;l++){const r=ev[l];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=t["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=A_(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const l=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(l.initial=this.props.initial),l}const n={};for(let l=0;l<h_;l++){const r=bf[l],o=this.props[r];(ja(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let l=this.values.get(t);return l===void 0&&n!==void 0&&(l=ui(n,{owner:this}),this.addValue(t,l)),l}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:l}=this.props,r=typeof l=="string"||typeof l=="object"?(n=Wf(this.props,l))===null||n===void 0?void 0:n[t]:void 0;if(l&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Qt(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ff),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class lR extends f_{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:l}){delete n[t],delete l[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...l},{transformValues:r},o){let i=N7(l,t||{},this);if(r&&(n&&(n=r(n)),l&&(l=r(l)),i&&(i=r(i))),o){x7(this,l,i);const a=u_(this,l,i,n);n=a.transitionEnd,l=a.target}return{transition:t,transitionEnd:n,...l}}}function p_(e){return window.getComputedStyle(e)}class b_ extends lR{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(po.has(n)){const l=xf(n);return l&&l.default||0}else{const l=p_(t),r=(zV(n)?l.getPropertyValue(n):l[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return zW(t,n)}build(t,n,l,r){vf(t,n,l,r.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Vf(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,l,r){OV(t,n,l,r)}}class y_ extends lR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(po.has(n)){const l=xf(n);return l&&l.default||0}return n=_V.has(n)?n:ff(n),t.getAttribute(n)}measureInstanceViewportBox(){return ot()}scrapeMotionValuesFromProps(t,n){return $V(t,n)}build(t,n,l,r){Bf(t,n,l,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,l,r){qV(t,n,l,r)}mount(t){this.isSVGTag=Sf(t.tagName),super.mount(t)}}const Z_=(e,t)=>Zf(e)?new y_(t,{enableHardwareAcceleration:!1}):new b_(t,{enableHardwareAcceleration:!0}),v_={layout:{ProjectionNode:$W,MeasureLayout:UW}},G_={...O7,...m8,...t_,...v_},Qa=BP((e,t)=>l8(e,t,G_,Z_));function rR(){const e=v.useRef(!1);return hf(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function B_(){const e=rR(),[t,n]=v.useState(0),l=v.useCallback(()=>{e.current&&n(t+1)},[t]);return[v.useCallback(()=>Ye.postRender(l),[l]),t]}class S_ extends v.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function V_({children:e,isPresent:t}){const n=v.useId(),l=v.useRef(null),r=v.useRef({width:0,height:0,top:0,left:0});return v.useInsertionEffect(()=>{const{width:o,height:i,top:a,left:g}=r.current;if(t||!l.current||!o||!i)return;l.current.dataset.motionPopId=n;const s=document.createElement("style");return document.head.appendChild(s),s.sheet&&s.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${i}px !important;
            top: ${a}px !important;
            left: ${g}px !important;
          }
        `),()=>{document.head.removeChild(s)}},[t]),v.createElement(S_,{isPresent:t,childRef:l,sizeRef:r},v.cloneElement(e,{ref:l}))}const rC=({children:e,initial:t,isPresent:n,onExitComplete:l,custom:r,presenceAffectsLayout:o,mode:i})=>{const a=eW(W_),g=v.useId(),s=v.useMemo(()=>({id:g,initial:t,isPresent:n,custom:r,onExitComplete:I=>{a.set(I,!0);for(const d of a.values())if(!d)return;l&&l()},register:I=>(a.set(I,!1),()=>a.delete(I))}),o?void 0:[n]);return v.useMemo(()=>{a.forEach((I,d)=>a.set(d,!1))},[n]),v.useEffect(()=>{!n&&!a.size&&l&&l()},[n]),i==="popLayout"&&(e=v.createElement(V_,{isPresent:n},e)),v.createElement(nd.Provider,{value:s},e)};function W_(){return new Map}function R_(e){return v.useEffect(()=>()=>e(),[])}const Tr=e=>e.key||"";function w_(e,t){e.forEach(n=>{const l=Tr(n);t.set(l,n)})}function k_(e){const t=[];return v.Children.forEach(e,n=>{v.isValidElement(n)&&t.push(n)}),t}const oR=({children:e,custom:t,initial:n=!0,onExitComplete:l,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:i="sync"})=>{const a=v.useContext(yf).forceRender||B_()[0],g=rR(),s=k_(e);let I=s;const d=v.useRef(new Map).current,u=v.useRef(I),C=v.useRef(new Map).current,h=v.useRef(!0);if(hf(()=>{h.current=!1,w_(s,C),u.current=I}),R_(()=>{h.current=!0,C.clear(),d.clear()}),h.current)return v.createElement(v.Fragment,null,I.map(m=>v.createElement(rC,{key:Tr(m),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:i},m)));I=[...I];const f=u.current.map(Tr),y=s.map(Tr),A=f.length;for(let m=0;m<A;m++){const p=f[m];y.indexOf(p)===-1&&!d.has(p)&&d.set(p,void 0)}return i==="wait"&&d.size&&(I=[]),d.forEach((m,p)=>{if(y.indexOf(p)!==-1)return;const b=C.get(p);if(!b)return;const Z=f.indexOf(p);let V=m;if(!V){const S=()=>{d.delete(p);const G=Array.from(C.keys()).filter(w=>!y.includes(w));if(G.forEach(w=>C.delete(w)),u.current=s.filter(w=>{const B=Tr(w);return B===p||G.includes(B)}),!d.size){if(g.current===!1)return;a(),l&&l()}};V=v.createElement(rC,{key:Tr(b),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:o,mode:i},b),d.set(p,V)}I.splice(Z,0,V)}),I=I.map(m=>{const p=m.key;return d.has(p)?m:v.createElement(rC,{key:Tr(m),isPresent:!0,presenceAffectsLayout:o,mode:i},m)}),v.createElement(v.Fragment,null,d.size?I:I.map(m=>v.cloneElement(m)))},br=({children:e,className:t,...n})=>c.jsx("div",{className:tt("flex flex-col",t),...n,children:e});br.Header=v.forwardRef(function({children:t},n){return c.jsx("div",{ref:n,className:"mt-6 px-4 text-white",children:t})});br.Title=v.forwardRef(function({children:t},n){return c.jsx("div",{ref:n,className:"text-2xl text-white",children:t})});br.Subtitle=v.forwardRef(function({children:t},n){return c.jsx("div",{ref:n,className:"text-sm text-gray-500",children:t})});br.Body=v.forwardRef(function({children:t,className:n},l){return c.jsx("div",{ref:l,className:tt("mt-6 flex-auto rounded-t-2xl bg-white",n),children:t})});const X_="/assets/profile-landing-89d873a8.png",x_=()=>(v.useState(null),c.jsx(br,{children:c.jsx(br.Body,{children:c.jsx("div",{className:" bg-blue-900 px-1",children:c.jsx("img",{src:X_,alt:"",className:"w-full object-cover bg-red-300"})})})})),J_="/assets/phone-frame-a0d93ab0.svg",N_=e=>c.jsxs("svg",{viewBox:"0 0 366 729","aria-hidden":"true",...e,children:[c.jsx("path",{fill:"#F2F2F2",fillRule:"evenodd",clipRule:"evenodd",d:"M300.092 1c41.22 0 63.223 21.99 63.223 63.213V184.94c-.173.184-.329.476-.458.851.188-.282.404-.547.647-.791.844-.073 2.496.257 2.496 2.157V268.719c-.406 2.023-2.605 2.023-2.605 2.023a7.119 7.119 0 0 1-.08-.102v394.462c0 41.213-22.001 63.212-63.223 63.212h-95.074c-.881-.468-2.474-.795-4.323-.838l-33.704-.005-.049.001h-.231l-.141-.001c-2.028 0-3.798.339-4.745.843H66.751c-41.223 0-63.223-21.995-63.223-63.208V287.739c-.402-.024-2.165-.23-2.524-2.02v-.973A2.039 2.039 0 0 1 1 284.62v-47.611c0-.042.001-.084.004-.126v-.726c0-1.9 1.652-2.23 2.496-2.157l.028.028v-16.289c-.402-.024-2.165-.23-2.524-2.02v-.973A2.039 2.039 0 0 1 1 214.62v-47.611c0-.042.001-.084.004-.126v-.726c0-1.9 1.652-2.23 2.496-2.157l.028.028v-26.041a2.26 2.26 0 0 0 .093-.236l-.064-.01a3.337 3.337 0 0 1-.72-.12l-.166-.028A2 2 0 0 1 1 135.62v-24.611a2 2 0 0 1 1.671-1.973l.857-.143v-44.68C3.528 22.99 25.53 1 66.75 1h233.341ZM3.952 234.516a5.481 5.481 0 0 0-.229-.278c.082.071.159.163.228.278Zm89.99-206.304A4.213 4.213 0 0 0 89.727 24H56.864C38.714 24 24 38.708 24 56.852v618.296C24 693.292 38.714 708 56.864 708h250.272c18.15 0 32.864-14.708 32.864-32.852V56.852C340 38.708 325.286 24 307.136 24h-32.864a4.212 4.212 0 0 0-4.213 4.212v2.527c0 10.235-8.3 18.532-18.539 18.532H112.48c-10.239 0-18.539-8.297-18.539-18.532v-2.527Z"}),c.jsx("rect",{x:"154",y:"29",width:"56",height:"5",rx:"2.5",fill:"#D4D4D4"})]}),Y_=({className:e,children:t,priority:n=!1,...l})=>c.jsxs("div",{className:tt("relative aspect-[366/729]",e),...l,children:[c.jsx("div",{className:"absolute inset-y-[calc(1/729*100%)] left-[calc(7/729*100%)] right-[calc(5/729*100%)] rounded-[calc(58/366*100%)/calc(58/729*100%)] shadow-2xl"}),c.jsx("div",{className:"absolute left-[calc(23/366*100%)] top-[calc(23/729*100%)] grid h-[calc(686/729*100%)] w-[calc(318/366*100%)] transform grid-cols-1 overflow-hidden bg-gray-900 pt-[calc(23/318*100%)]",children:t}),c.jsx(N_,{className:"pointer-events-none absolute inset-0 h-full w-full fill-gray-100"}),c.jsx(YV,{src:J_,alt:"",className:"pointer-events-none absolute inset-0 h-full w-full",width:100,height:100,unoptimized:!0,priority:n})]}),H_="/assets/inxeniux-d68f64e4.png",F_="/assets/cpdi-630d1b8c.png",K_=e=>{let t=v.useId();return c.jsxs("div",{...e,children:[c.jsxs("svg",{viewBox:"0 0 1026 1026",fill:"none","aria-hidden":"true",className:"absolute inset-0 h-full w-full animate-spin-slow",children:[c.jsx("path",{d:"M1025 513c0 282.77-229.23 512-512 512S1 795.77 1 513 230.23 1 513 1s512 229.23 512 512Z",stroke:"#D4D4D4",strokeOpacity:"0.7"}),c.jsx("path",{d:"M513 1025C230.23 1025 1 795.77 1 513",stroke:`url(#${t}-gradient-1)`,strokeLinecap:"round"}),c.jsx("defs",{children:c.jsxs("linearGradient",{id:`${t}-gradient-1`,x1:"1",y1:"513",x2:"1",y2:"1025",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{stopColor:"#06b6d4"}),c.jsx("stop",{offset:"1",stopColor:"#06b6d4",stopOpacity:"0"})]})})]}),c.jsxs("svg",{viewBox:"0 0 1026 1026",fill:"none","aria-hidden":"true",className:"absolute inset-0 h-full w-full animate-spin-reverse-slower",children:[c.jsx("path",{d:"M913 513c0 220.914-179.086 400-400 400S113 733.914 113 513s179.086-400 400-400 400 179.086 400 400Z",stroke:"#D4D4D4",strokeOpacity:"0.7"}),c.jsx("path",{d:"M913 513c0 220.914-179.086 400-400 400",stroke:`url(#${t}-gradient-2)`,strokeLinecap:"round"}),c.jsx("defs",{children:c.jsxs("linearGradient",{id:`${t}-gradient-2`,x1:"913",y1:"513",x2:"913",y2:"913",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{stopColor:"#06b6d4"}),c.jsx("stop",{offset:"1",stopColor:"#06b6d4",stopOpacity:"0"})]})})]})]})},E_=()=>c.jsx("div",{className:"overflow-hidden py-20 sm:py-32 lg:pb-32 xl:pb-36",children:c.jsx(cg,{children:c.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-8 lg:gap-y-20",children:[c.jsxs("div",{className:"relative z-10 mx-auto max-w-2xl lg:col-span-7 lg:max-w-none lg:pt-6 xl:col-span-6",children:[c.jsx("h1",{className:"text-4xl font-medium tracking-tight text-white",children:"La nueva forma de hacer negocios"}),c.jsx("p",{className:"mt-6 text-lg text-white",children:"Olvdate de las tarjetas de papel tradicionales y nete a la revolucin digital. Nuestra plataforma te permite mantener tu informacin actualizada, destacarte con un diseo profesional y facilitar la comunicacin en un entorno laboral en constante movimiento. Conecta con confianza y demuestra tu profesionalismo en cada interaccin."}),c.jsx("div",{className:"mt-8 flex flex-wrap gap-x-6 gap-y-4"})]}),c.jsxs("div",{className:"relative mt-10 sm:mt-20 lg:col-span-5 lg:row-span-2 lg:mt-0 xl:col-span-6",children:[c.jsx(K_,{className:"absolute left-1/2 top-4 h-[1026px] w-[1026px] -translate-x-1/3 stroke-gray-300/70 [mask-image:linear-gradient(to_bottom,white_20%,transparent_75%)] sm:top-16 sm:-translate-x-1/2 lg:-top-16 lg:ml-12 xl:-top-14 xl:ml-0"}),c.jsx("div",{className:"-mx-4 h-[448px] px-9 [mask-image:linear-gradient(to_bottom,white_60%,transparent)] sm:mx-0 lg:absolute lg:-inset-x-10 lg:-bottom-20 lg:-top-10 lg:h-auto lg:px-0 lg:pt-10 xl:-bottom-32",children:c.jsx(Y_,{className:"mx-auto max-w-[366px]",priority:!0,children:c.jsx(x_,{})})})]}),c.jsxs("div",{className:"relative -mt-4 lg:col-span-7 lg:mt-0 xl:col-span-6",children:[c.jsx("p",{className:"text-center text-sm font-semibold text-white lg:text-left",children:"Empresas que usan Know Me"}),c.jsx("ul",{role:"list",className:"mx-auto mt-8 flex max-w-xl flex-wrap justify-center gap-x-10 gap-y-8 lg:mx-0 lg:justify-start",children:[["INXENIUX",H_],["Club de Proveedores",F_]].map(([e,t,n])=>c.jsx("li",{className:tt("flex",n),children:c.jsx(YV,{src:t,alt:e,className:" h-16 w-full",unoptimized:!0,width:200,height:200})},e))})]})]})})}),M_="/assets/logo-4-240dc8e7.png",T_=e=>c.jsx("svg",{viewBox:"0 0 40 40","aria-hidden":"true",...e,children:c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 40C8.954 40 0 31.046 0 20S8.954 0 20 0s20 8.954 20 20-8.954 20-20 20ZM4 20c0 7.264 5.163 13.321 12.02 14.704C17.642 35.03 19 33.657 19 32V8c0-1.657-1.357-3.031-2.98-2.704C9.162 6.68 4 12.736 4 20Z"})}),L_=e=>c.jsx("img",{src:M_,alt:"logo knowme",...e}),z_=()=>{let[e,t]=v.useState(null),n=v.useRef(null);return[].map(([l,r],o)=>c.jsxs(Af,{href:r,className:"relative -mx-3 -my-2 rounded-lg px-3 py-2 text-sm text-orange-500 transition-colors delay-150 hover:text-orange-500 hover:delay-0",onMouseEnter:()=>{n.current&&window.clearTimeout(n.current),t(o)},onMouseLeave:()=>{n.current=window.setTimeout(()=>{t(null)},200)},children:[c.jsx(oR,{children:e===o&&c.jsx(Qa.span,{className:"absolute inset-0 rounded-lg bg-gray-100",layoutId:"hoverBackground",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15}},exit:{opacity:0,transition:{duration:.15}}})}),c.jsx("span",{className:"relative z-10",children:l})]},l))},j_=e=>c.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...e,children:c.jsx("path",{d:"M5 6h14M5 18h14M5 12h14",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),U_=e=>c.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...e,children:c.jsx("path",{d:"M17 14l-5-5-5 5",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),D_=()=>c.jsx("header",{children:c.jsx("nav",{children:c.jsxs(cg,{className:"relative z-50 flex justify-between py-8",children:[c.jsxs("div",{className:"relative z-10 flex items-center gap-16",children:[c.jsx(Af,{href:"/","aria-label":"Home",children:c.jsx(L_,{className:" h-40 w-auto"})}),c.jsx("div",{className:"hidden lg:flex lg:gap-10",children:c.jsx(z_,{})})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx(rU,{className:"lg:hidden",children:({open:e})=>c.jsxs(c.Fragment,{children:[c.jsx(nV,{className:"relative z-10 -m-2 inline-flex items-center rounded-lg stroke-white p-2 hover:bg-orange-400 hover:stroke-white active:stroke-gray-900 ui-not-focus-visible:outline-none","aria-label":"Toggle site navigation",children:({open:t})=>t?c.jsx(U_,{className:"h-6 w-6"}):c.jsx(j_,{className:"h-6 w-6"})}),c.jsx(oR,{initial:!1,children:e&&c.jsxs(c.Fragment,{children:[c.jsx(lV,{static:!0,as:Qa.div,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-0 bg-gray-300/60 backdrop-blur"}),c.jsx(rV,{static:!0,as:Qa.div,initial:{opacity:0,y:-32},animate:{opacity:1,y:0},exit:{opacity:0,y:-32,transition:{duration:.2}},className:"absolute inset-x-0 top-0 z-0 origin-top rounded-b-2xl px-6 pb-6 pt-32 shadow-2xl shadow-gray-900/20",children:c.jsxs("div",{className:"mt-8 flex flex-col gap-4",children:[c.jsx(Eo,{href:"/login",variant:"outline",children:"Iniciar sesin"}),c.jsx(Eo,{href:"/registro",children:"Crear cuenta"})]})})]})})]})}),c.jsx(Eo,{href:"/login",variant:"outline",className:"hidden lg:block text-white",children:"Iniciar sesin"}),c.jsx(Eo,{href:"/registro",className:"hidden lg:block",children:"Crear cuenta"})]})]})})}),Q_=({children:e})=>c.jsxs(c.Fragment,{children:[c.jsx(D_,{}),c.jsx("main",{className:"flex-auto",children:e}),c.jsx(dI,{})]}),P_=e=>c.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...e,children:[c.jsx("path",{d:"M9.307 12.248a.75.75 0 1 0-1.114 1.004l1.114-1.004ZM11 15.25l-.557.502a.75.75 0 0 0 1.15-.043L11 15.25Zm4.844-5.041a.75.75 0 0 0-1.188-.918l1.188.918Zm-7.651 3.043 2.25 2.5 1.114-1.004-2.25-2.5-1.114 1.004Zm3.4 2.457 4.25-5.5-1.187-.918-4.25 5.5 1.188.918Z",fill:"currentColor"}),c.jsx("circle",{cx:"12",cy:"12",r:"8.25",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),O_=({name:e,price:t,description:n,button:l,features:r,activePeriod:o,logomarkClassName:i,featured:a=!1})=>c.jsxs("section",{className:tt("flex flex-col overflow-hidden rounded-3xl p-6 shadow-lg shadow-gray-900/5",a?"order-first bg-gray-900 lg:order-none":"bg-white"),children:[c.jsxs("h3",{className:tt("flex items-center text-sm font-semibold",a?"text-white":"text-gray-900"),children:[c.jsx(T_,{className:tt("h-6 w-6 flex-none",i)}),c.jsx("span",{className:tt("ml-4",a?"text-white":"text-gray-800"),children:e})]}),c.jsx("p",{className:tt("relative mt-5 flex text-3xl tracking-tight",a?"text-white":"text-gray-900"),children:t["Pago nico"]===t.Anual?t["Pago nico"]:c.jsxs(c.Fragment,{children:[c.jsx("span",{"aria-hidden":o==="Anual",className:tt("transition duration-300",o==="Anual"&&"pointer-events-none translate-x-6 select-none opacity-0",a===!1&&"text-gray-800"),children:t["Pago nico"]}),c.jsx("span",{"aria-hidden":o==="Pago nico",className:tt("absolute left-0 top-0 transition duration-300 ",o==="Pago nico"&&"pointer-events-none -translate-x-6 select-none opacity-0",a===!1&&"text-gray-800"),children:t.Anual})]})}),c.jsx("p",{className:tt("mt-3 text-sm",a?"text-gray-300":"text-gray-700"),children:n}),c.jsx("div",{className:"order-last mt-6",children:c.jsx("ul",{role:"list",className:tt("-my-2 divide-y text-sm",a?"divide-gray-800 text-gray-300":"divide-gray-200 text-gray-700"),children:r.map(g=>c.jsxs("li",{className:"flex py-2",children:[c.jsx(P_,{className:tt("h-6 w-6 flex-none",a?"text-white":"text-orange-500")}),c.jsx("span",{className:tt("ml-4",a?"text-white":"text-gray-800"),children:g})]},g))})}),c.jsx(Eo,{href:l.href,color:a?"orange":"gray",className:tt("mt-6",a?"text-orange-500 border-orange-500 bg-white":""),"aria-label":`Get started with the ${e} plan for ${t}`,children:l.label})]}),__=[{name:"Free",featured:!1,price:{"Pago nico":"$0",Anual:"$0"},description:"TOTALMENTE GRATIS",button:{label:"Comienza tu prueba gratis",href:"/register"},features:["Plataforma Knowme","Cdigo QR","Redes Sociales","Compartir perfil (link)","Informacin personal","Foto de perfil"],logomarkClassName:"fill-gray-300"},{name:"Basic",featured:!1,price:{"Pago nico":"$459",Anual:"Solo pago nico"},description:"Empieza con un plus",button:{label:"Subscribete",href:"/register"},features:["Tarjeta NFC blanca","Botn Whatsapp","Intercambio de contactos","Foto de perfil"],logomarkClassName:"fill-gray-500"},{name:"Plus",featured:!1,price:{"Pago nico":"$699",Anual:"Solo pago nico"},description:"Plan basic +",button:{label:"Subscribete",href:"/register"},features:["Tarjeta NFC personalizada","Link personalizado","Informacin business","Foto de portada","Enlace para solicitar pagos","Eleccin de color (claro/oscuro)","Catalogo (productos y servicios)","Directorio (opcional)","Palabras clave busqueda"],logomarkClassName:"fill-gray-500"},{name:"Entrepreneur",featured:!1,price:{"Pago nico":"Solo pago anual",Anual:"$790"},description:"Plan basic +",button:{label:"Subscribete",href:"/register"},features:["CRM bsico","Comunidad Knowme","Personalizacin (logotipo y pantones)","Galera","Broshure o archivo PDF"],logomarkClassName:"fill-gray-500"},{name:"Business",featured:!0,price:{"Pago nico":"Solo pago anual",Anual:"$990"},description:"Plan entrepreneur +",button:{label:"Subscribete",href:"/register"},features:["Vdeo","Gestin de usuarios","Dashboard empresarial","CRM contactos avanzado","Importacin y exportacin masiva (CSV)","Analiticas y Dashboard empresarial","Gestin de equipos","Reasignacin de tarjetas"],logomarkClassName:"fill-orange-500"}],q_=()=>{let[e,t]=v.useState("Pago nico");return c.jsx("section",{id:"pricing","aria-labelledby":"pricing-title",className:"border-t border-gray-200 bg-gray-100 py-20 sm:py-32",children:c.jsxs(cg,{children:[c.jsxs("div",{className:"mx-auto max-w-2xl text-center",children:[c.jsx("h2",{id:"pricing-title",className:"text-3xl font-medium tracking-tight text-gray-900",children:"Planes"}),c.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"Planes flexibles para crear, compartir y conectar tu perfil profesional en un mundo en movimiento."})]}),c.jsx("div",{className:"mt-8 flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx(fU,{value:e,onChange:t,className:"grid grid-cols-2",children:["Pago nico","Anual"].map(n=>c.jsx(oV,{value:n,className:tt("cursor-pointer border border-gray-300 px-[calc(theme(spacing.3)-1px)] py-[calc(theme(spacing.2)-1px)] text-sm text-gray-700 outline-2 outline-offset-2 transition-colors hover:border-gray-400",n==="Pago nico"?"rounded-l-lg":"-ml-px rounded-r-lg"),children:n},n))}),c.jsx("div",{"aria-hidden":"true",className:tt("pointer-events-none absolute inset-0 z-10 grid grid-cols-2 overflow-hidden rounded-lg bg-orange-500 transition-all duration-300",e==="Pago nico"?"[clip-path:inset(0_50%_0_0)]":"[clip-path:inset(0_0_0_calc(50%-1px))]"),children:["Pago nico","Anual"].map(n=>c.jsx("div",{className:tt("py-2 text-center text-sm font-semibold text-white",n==="Anual"&&"-ml-px"),children:n},n))})]})}),c.jsx("div",{className:"mx-auto mt-16 grid max-w-2xl grid-cols-1 items-start gap-x-8 gap-y-10 sm:mt-20 lg:max-w-none lg:grid-cols-3",children:__.map(n=>c.jsx(O_,{...n,activePeriod:e},n.name))})]})})};Qa(br.Header);Qa(br.Body);const $_=e=>c.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",...e,children:[c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z",fill:"#FFFFFF"}),c.jsx("circle",{cx:16,cy:16,r:16,fill:"#f59342",fillOpacity:.2})]}),e6=e=>{let t=v.useId();return c.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",...e,children:[c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z",fill:"#FFFFFF"}),c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 13a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H10a1 1 0 01-1-1v-2zm0 6a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H10a1 1 0 01-1-1v-2zm1 5a1 1 0 00-1 1v2a1 1 0 001 1h12a1 1 0 001-1v-2a1 1 0 00-1-1H10z",fill:`url(#${t}-gradient)`}),c.jsx("rect",{x:9,y:6,width:14,height:4,rx:1,fill:"#171717"}),c.jsx("circle",{cx:16,cy:16,r:16,fill:"#f59342",fillOpacity:.2}),c.jsx("defs",{children:c.jsxs("linearGradient",{id:`${t}-gradient`,x1:16,y1:12,x2:16,y2:28,gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{stopColor:"#f59342"}),c.jsx("stop",{offset:1,stopColor:"#f59342",stopOpacity:0})]})})]})},t6=e=>c.jsxs("svg",{viewBox:"0 0 32 32",fill:"none","aria-hidden":"true",...e,children:[c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z",fill:"#FFFFFF"}),c.jsx("circle",{cx:11,cy:14,r:2,fill:"#171717"}),c.jsx("circle",{cx:11,cy:20,r:2,fill:"#171717"}),c.jsx("circle",{cx:11,cy:26,r:2,fill:"#171717"}),c.jsx("path",{d:"M16 14h6M16 20h6M16 26h6",stroke:"#f59342",strokeWidth:2,strokeLinecap:"square"}),c.jsx("circle",{cx:16,cy:16,r:16,fill:"#f59342",fillOpacity:.2})]}),n6=e=>c.jsxs("svg",{viewBox:"0 0 32 32",fill:"none","aria-hidden":"true",...e,children:[c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z",fill:"#FFFFFF"}),c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 13.838V26a2 2 0 01-2 2H11a2",fill:"#f59342"}),c.jsx("path",{d:"M10 12h12",stroke:"#FFFFFF",strokeWidth:2,strokeLinecap:"square"}),c.jsx("circle",{cx:16,cy:16,r:16,fill:"#f59342",fillOpacity:.2})]}),l6=[{name:"Crea tu cuenta",description:"Elige el plan que ms te convenga y crea tu cuenta.",icon:$_},{name:"Personaliza tu perfil",description:"Agrega tus datos, redes sociales, whatsapp, horarios y mucho ms.",icon:e6},{name:"Recibe tu NFC",description:"Recibe tu tarjeta NFC con tu cdigo QR.",icon:n6},{name:"Crea tu red",description:"Comparte tu perfil, crea un efecto Wow! y gestiona tus contactos",icon:t6}],r6=()=>c.jsx("section",{id:"secondary-features","aria-label":"Features for building a portfolio",className:"py-20 sm:py-32",children:c.jsxs(cg,{children:[c.jsxs("div",{className:"mx-auto max-w-2xl sm:text-center",children:[c.jsx("h2",{className:"text-3xl font-medium tracking-tight text-white",children:"Networking en un mundo digital"}),c.jsx("p",{className:"mt-2 text-lg text-white",children:"En KnowMe, creemos en el poder de las conexiones significativas. Ampliamos tus oportunidades profesionales ms all de las fronteras. Conecta con profesionales de diversas industrias y ciudades, fortalece tu red y descubre nuevas oportunidades que te esperan en todo el pas."})]}),c.jsx("ul",{role:"list",className:"mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-6 text-sm sm:mt-20 sm:grid-cols-2 md:gap-y-10 lg:max-w-none lg:grid-cols-2",children:l6.map(e=>c.jsxs("li",{className:"rounded-2xl border border-gray-200 p-8",children:[c.jsx(e.icon,{className:"h-8 w-8"}),c.jsx("h3",{className:"mt-6 font-semibold text-white",children:e.name}),c.jsx("p",{className:"mt-2 text-white",children:e.description})]},e.name))})]})}),o6=()=>c.jsx(c.Fragment,{children:c.jsxs(Q_,{children:[c.jsx(E_,{}),c.jsx(r6,{}),c.jsx(dP,{}),c.jsx(q_,{})]})}),tv=()=>{const e=cn(),[t,n]=v.useState({id_organization:0,name:"",logo_url:"",cover_url:"",business_name:"",rfc:"",fiscal_address:"",industry:"",phone:"",email:"",website:""}),l=e.state?e.state.userOrg:t,[r,o]=v.useState(null),[i,a]=v.useState(null),[g,s]=v.useState(!0),I=uf(),d=ol(),u=It(),{user:C}=v.useContext(yt);v.useEffect(()=>{A()},[]);const h=b=>{const Z=b.target.files[0];o(URL.createObjectURL(Z))},f=b=>{const Z=b.target.files[0];a(URL.createObjectURL(Z))},y=b=>{const{name:Z,value:V}=b.target;n({...t,[Z]:V})},A=async()=>{o(l.logo_url??null),a(l.cover_url??null),n({...l}),s(!1)},m=async b=>{s(!0);const Z=Ge.loading("Guardando cambios");b.preventDefault();try{const S=document.getElementById("photo").files[0];if(S!=null){const B=new FormData;B.append("recfile",S),B.append("username",localStorage.getItem("token"));const W=await d.updateProfilePhoto(B);t.logo_url=W.data.dataLocationResponse}const w=document.getElementById("photo_cover").files[0];if(w!=null){const B=new FormData;B.append("recfile",w),B.append("username",localStorage.getItem("token"));const W=await d.updateProfilePhoto(B);t.cover_url=W.data.dataLocationResponse}if(t.id_organization!=0){const{data:B}=await I.updateOrg(t);console.log(B),B.ok?(Ge.success(B.msg,{id:Z}),setTimeout(()=>{u("/business"),s(!1)},2e3)):Ge.error(B.msg,{id:Z})}else{const{data:B}=await I.createOrg(t);B.ok?(Ge.success(B.msg,{id:Z}),setTimeout(()=>{u("/business"),s(!1)},2e3)):Ge.error(B.msg,{id:Z}),s(!1)}}catch(V){Ge.error("Error al crear contacto, por favor intenta de nuevo",{id:Z}),s(!1),console.error("Error al enviar el formulario:",V)}},p=()=>{console.log(C),n({name:"",logo_url:"",cover_url:"",business_name:"",rfc:"",fiscal_address:"",industry:"",phone:"",email:"",website:""}),u("/business")};return c.jsxs(c.Fragment,{children:[c.jsx(In,{position:"top-right",richColors:!0}),c.jsx("div",{className:"m-10",children:c.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Editar o agregar datos de organizacin"})}),c.jsx("div",{className:"m-3 p-3 bg-gray-800/30 rounded-lg max-w-3xl",children:c.jsxs("form",{onSubmit:m,className:"md:m-16",children:[c.jsxs("div",{className:"space-y-12",children:[c.jsxs("div",{className:"border-b border-gray-900/10 pb-12 ",children:[c.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Informacin general de tu organizacin"}),c.jsx("p",{className:"mt-1 text-sm leading-6 text-white",children:"Esta informacin de la organizacin formar parte de la carpeta de presentacin de tus usuarios miembros."}),c.jsxs("div",{className:"col-span-full mt-4",children:[c.jsx("label",{htmlFor:"photo_cover",className:"block text-sm font-medium leading-6 text-white",children:"Imagen de portada para la organizacin"}),c.jsxs("p",{className:"mt-1 text-sm leading-6 text-white",children:["Para una presentacin visualmente atractiva, te sugerimos considerar una imagen con dimensiones de"," ",c.jsx("span",{className:"font-bold",children:"688x224 px"}),"."]}),c.jsxs("div",{className:"my-2 items-center rounded-lg gap-x-3 h-36 overflow-hidden",children:[i?c.jsx("img",{src:i??ci,alt:"Selected",className:"object-scale-down rounded-lg"}):c.jsx("img",{src:ci,alt:"Selected",className:"object-scale-down rounded-lg"}),c.jsx("input",{type:"file",id:"photo_cover",accept:"image/*",className:"hidden",onChange:f})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",onClick:()=>{document.getElementById("photo_cover").click()},children:"Cambiar"})})]}),c.jsxs("div",{className:"col-span-full mt-4",children:[c.jsx("label",{htmlFor:"photo",className:"block text-sm font-medium leading-6 text-white",children:"Logo organizacin"}),c.jsxs("div",{className:"mt-2 flex items-center gap-x-3",children:[r?c.jsx("img",{src:r,alt:"Selected",className:"h-28 w-28 rounded-full border-white border-2 object-cover"}):c.jsx(iV,{className:"h-12 w-12 text-white","aria-hidden":"true"}),c.jsx("input",{type:"file",id:"photo",accept:"image/*",className:"hidden",onChange:h}),c.jsx("button",{type:"button",className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",onClick:()=>{document.getElementById("photo").click()},children:"Cambiar"})]})]}),c.jsx("div",{className:"mt-2 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:c.jsxs("div",{className:"sm:col-span-4",children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white",children:"Nombre de la organizacin"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:c.jsx(rf,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),c.jsx("input",{type:"text",name:"name",id:"name",autoComplete:"name",value:t.name,onChange:y,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Industria a la que pertenece la organizacin"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:c.jsx(EU,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),c.jsx("input",{type:"text",name:"industry",id:"industry",autoComplete:"industry",value:t.industry,onChange:y,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Razn Social"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:c.jsx(UU,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),c.jsx("input",{type:"text",name:"business_name",id:"business_name",autoComplete:"business_name",value:t.business_name,onChange:y,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:"RFC:"}),c.jsx("input",{type:"text",name:"rfc",id:"rfc",autoComplete:"rfc",value:t.rfc,onChange:y,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Domicilio Fiscal:"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:c.jsx(LU,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),c.jsx("input",{type:"text",name:"fiscal_address",id:"fiscal_address",autoComplete:"fiscal_address",value:t.fiscal_address,onChange:y,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Telfono de la empresa"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:"+52"}),c.jsx("input",{type:"number",name:"phone",id:"phone",autoComplete:"phone",value:t.phone,onChange:y,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Correo electrnico de la empresa"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:c.jsx(gg,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),c.jsx("input",{type:"email",name:"email",id:"email",autoComplete:"email",value:t.email,onChange:y,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Sitio web empresa"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:c.jsx(FI,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),c.jsx("input",{type:"text",name:"website",id:"website",autoComplete:"website",value:t.website,onChange:y,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})})]})})]}),c.jsxs("div",{className:"border-b border-white/10 pb-12",children:[c.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Para qu necesitamos estos datos?"}),c.jsx("p",{className:"mt-1 text-sm leading-6 text-white",children:"La informacin proporcionada aqu ser utilizada para crear y mantener el perfil de tu organizacin. Esto incluye la presentacin de tu empresa ante los usuarios miembros, as como para fines de comunicacin y contacto relacionados con los servicios ofrecidos."})]})]}),c.jsxs("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[c.jsx("button",{type:"button",disabled:g,onClick:p,className:"text-sm font-semibold leading-6 text-white",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:g,className:"rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Guardar"})]})]})}),c.jsx("div",{className:"h-24 lg:h-0"})]})},nv=()=>{const[e,t]=v.useState(null),[n,l]=v.useState([]),[r,o]=v.useState(!0),[i,a]=v.useState(!1),[g,s]=v.useState({id_organization:0,name:"",logo_url:"",cover_url:"",business_name:"",rfc:"",fiscal_address:"",industry:"",phone:"",email:"",website:""}),[I,d]=v.useState({id_organization:0,name:"",lastname:"",email:"",mailing_status:1,id_user_type_fk:2,terms_policies_status:1,id_plan_fk:6}),u=v.useRef(null),C=It(),h=cn(),f=uf(),y=Sr(),A=h.state?h.state.userOrg:g;v.useEffect(()=>{b(),t(A.logo_url)},[]);const m=S=>{const{name:G,value:w}=S.target;d({...I,[G]:w})},p=()=>{C("/business")},b=async()=>{const{data:S}=await f.getUsersTeamOrg(),{users:G}=S;S.ok?l(G):l([]),o(!1)},Z=()=>{a(!0)},V=async S=>{S.preventDefault();const G=window.location.href.split("team_org")[0];o(!0);const w=Ge.loading("Enviando invitacin");try{const{data:B}=await y.createUserByInvitation({...I,successUrl:`${G}team_org`,cancelUrl:`${G}team_org`},n[0].id_organization_fk);B.ok&&I.id_plan_fk==6?(Ge.success(B.msg,{id:w}),setTimeout(()=>{a(!1),b(),o(!1)},2e3),a(!1)):(a(!1),o(!1),window.open(B.userPaymentSession.stripe_session_url,"_self"))}catch(B){if(console.log(B),B.response.status===400){const W=B.response.data.errors;let R="";W?Object.keys(W).forEach(k=>{R+=`${W[k].msg}
`}):R=B.response.data.msg||"Error al crear invitacin, por favor intenta de nuevo",Ge.error(R,{id:w})}else Ge.error("Error al crear invitacin, por favor intenta de nuevo",{id:w});o(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx(In,{position:"top-right",richColors:!0}),c.jsxs("div",{className:"flex justify-between mx-4 my-5 items-center",children:[c.jsxs("div",{className:"flex-col",children:[c.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Business Team"}),c.jsxs("button",{type:"button",onClick:p,className:"text-sm flex font-semibold leading-6 text-orange-400 hover:text-orange-500",children:[c.jsx(VU,{className:"h-6 w-6","aria-hidden":"true"}),"Regresar"]})]}),e?c.jsx("img",{src:e,alt:"Selected",className:"h-12 w-12 md:h-14 md:w-14 rounded-full border-white border-2 object-cover"}):c.jsx(rf,{className:"h-12 w-12 md:h-14 md:w-14 text-gray-900 bg-white rounded-full p-2 border-white border-2","aria-hidden":"true"}),c.jsx("div",{className:"text-white",children:c.jsx("button",{onClick:Z,className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Agregar miembro"})})]}),c.jsx("div",{className:"mx-4 mb-20",children:c.jsx("ul",{role:"list",className:"divide-y divide-gray-100",children:n.map(S=>c.jsxs("li",{className:"flex justify-between gap-x-6 py-5",children:[c.jsxs("div",{className:"flex min-w-0 gap-x-4",children:[c.jsx("img",{className:"h-12 w-12 flex-none rounded-full bg-gray-50",src:S.user.profile_img_url??KI,alt:""}),c.jsxs("div",{className:"min-w-0 flex-auto",children:[c.jsx("p",{className:"text-sm font-semibold leading-6 text-white",children:S.user.name}),c.jsx("p",{className:"mt-1 truncate text-xs leading-5 text-white",children:S.user.email})]})]}),c.jsxs("div",{className:"hidden shrink-0 sm:flex sm:flex-col sm:items-end",children:[c.jsx("p",{className:"text-sm leading-6 text-white",children:S.user.ocupation_role??"[PENDIENTE]"}),S.owner?c.jsxs("div",{className:"mt-1 flex items-center gap-x-1.5",children:[c.jsx("div",{className:"flex-none rounded-full bg-orange-500/20 p-1",children:c.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-orange-500"})}),c.jsx("p",{className:"text-xs leading-5 text-orange-500",children:"Admin"})]}):c.jsx("p",{className:"mt-1 text-xs leading-5 text-white",children:"Miembro"})]})]},S.id_user_fk))})}),c.jsx(ln.Root,{show:i,as:v.Fragment,children:c.jsxs(rn,{className:"relative z-10",initialFocus:u,onClose:a,children:[c.jsx(ln.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),c.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:c.jsx("div",{className:"flex items-end justify-center p-4 text-center sm:items-center sm:p-0",children:c.jsx(ln.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:c.jsx(rn.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full max-w-lg h-xl",children:c.jsx("div",{className:"bg-white px-4 pb-4 sm:p-6 sm:pb-4",children:c.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[c.jsx(rn.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"Agregar miembro"}),c.jsx("div",{className:"bg-white rounded-lg max-w-3xl",children:c.jsxs("form",{onSubmit:V,className:"mx-2",children:[c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"sm:col-span-4",children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 text-left",children:"Nombre(s) del usuario*"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:c.jsx(zb,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),c.jsx("input",{type:"text",name:"name",id:"name",autoComplete:"name",value:I.name,onChange:m,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Apellido(s) del usuario*"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:c.jsx(zb,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),c.jsx("input",{type:"text",name:"lastname",id:"lastname",autoComplete:"lastname",value:I.lastname,onChange:m,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Correo electrnico del miembro*"}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-gray-800",children:[c.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-gray-900 sm:text-sm",children:c.jsx(gg,{className:"h-5 w-5 text-gray-900","aria-hidden":"true"})}),c.jsx("input",{type:"email",name:"email",id:"email",autoComplete:"email",value:I.email,onChange:m,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-900 focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),c.jsx("label",{htmlFor:"plan",className:"block text-sm font-medium leading-6 text-gray-900 mt-2 text-left",children:"Seleccionar plan"}),c.jsx("div",{className:"mt-2",children:c.jsxs("select",{id:"id_plan_fk",name:"id_plan_fk",value:I.id_plan_fk,onChange:m,className:"block w-full pl-3 pr-10 py-2 text-base bg-white border-gray-800 focus:outline-none focus:ring-orange-600 focus:border-orange-600 sm:text-sm rounded-md",children:[c.jsx("option",{value:6,children:"Bsico"}),c.jsx("option",{value:7,children:"Plus"}),c.jsx("option",{value:8,children:"Emprendedor"}),c.jsx("option",{value:9,children:"Business (Admin)"})]})})]})}),c.jsxs("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[c.jsx("button",{type:"button",disabled:r,onClick:()=>a(!1),ref:u,className:"text-sm font-semibold leading-6 text-gray-900",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:r,className:"rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Enviar"})]})]})})]})})})})})})]})})]})};const lv=()=>{const e=Sr(),[t,n]=v.useState(!1),[l,r]=v.useState(!1),[o,i]=v.useState(!1),{onInputChange:a,formState:g}=Br({new_password:"",confirm_password:""}),s=async()=>{if(g.new_password!=g.confirm_password)n(!0),r(!0);else{const I=Ge.loading("Actualizando contrasea");try{const d={newPassword:g.new_password};await e.changePassword(d),Ge.success("Contrasea actualizada correctamente",{id:I})}catch{Ge.error("Error al actualizar contrasea, verifique sus datos o contacte a soporte",{id:I})}}};return c.jsxs(c.Fragment,{children:[c.jsx(In,{position:"top-center",richColors:!0}),c.jsx("div",{className:"change_password",children:c.jsxs("div",{className:"change_password_container",children:[c.jsx("div",{className:"change_password_title",children:"Cambiar Contrasea"}),c.jsxs("div",{className:"change_password_input",children:[c.jsx("input",{type:o?"text":"password",placeholder:"Nueva Contrasea",value:g.new_password,name:"new_password",onChange:I=>{l&&r(!1),a(I)},style:t&&l?{color:"#cc0000"}:{}}),c.jsx("div",{children:o?c.jsx(co,{color:"white",size:25,onClick:()=>{i(!1)}}):c.jsx(so,{color:"white",size:25,onClick:()=>{i(!0)}})})]}),c.jsxs("div",{className:"change_password_input",children:[c.jsx("input",{type:o?"text":"password",placeholder:"Confirmar Contrasea",value:g.confirm_password,name:"confirm_password",onChange:I=>{l&&r(!1),a(I)},style:t&&l?{color:"#cc0000"}:{}}),c.jsx("div",{children:o?c.jsx(co,{color:"white",size:25,onClick:()=>{i(!1)}}):c.jsx(so,{color:"white",size:25,onClick:()=>{i(!0)}})})]}),t&&l&&c.jsx("div",{className:"change_password_alert",children:"Las contraseas no coinciden"}),c.jsx("button",{className:"change_password_button",onClick:s,children:"Continuar"})]})})]})};const i6=({plan:e,setShowDetailsModal:t,setPlanSelected:n,cardsPlan:l})=>{const r=()=>{t(!0),n(l)};return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"e-card playing",children:[c.jsx("div",{className:"image"}),c.jsx("div",{className:e.className=="basico"?"wave color_1":e.className=="ecommerce"?"wave color_3":"wave color_2"}),c.jsx("div",{className:e.className=="basico"?"wave color_1":e.className=="ecommerce"?"wave color_3":"wave color_2"}),c.jsx("div",{className:e.className=="basico"?"wave color_1":e.className=="ecommerce"?"wave color_3":"wave color_2"}),c.jsxs("div",{className:"infotop",children:[c.jsx("div",{className:"plan_name",children:l.name_plan}),c.jsx("div",{className:"plan_price",children:e.cost[0]=="-1.00"?"":e.cost[0]!="0.00"?`${e.cost[0]}`:e.cost[1]!="0.00"?`${e.cost[1]}`:"Gratis"}),c.jsx("div",{className:"plan_price",children:e.cost[0]=="-1.00"?"Contctanos":e.cost[0]!="0.00"?"Pago nico":"Pago anual"}),c.jsx(et,{className:"plan_beneficts",onClick:r,children:"Ver Beneficios"})]})]})})};const a6=({plan:e})=>{const t=Sr(),{user:n}=v.useContext(yt),[l,r]=v.useState(!1),[o,i]=v.useState(!1),a=async()=>{r(!0);const g=Ge.loading("Cambiando plan"),s=window.location.href.replace("upgrade",""),I=n.id,d=localStorage.getItem("token"),u={id_plan_fk:e.id_plan,successUrl:`${s}home`,cancelUrl:`${s}upgrade`};try{const{data:C}=await t.addPlan(I,u,d);r(!1),Ge.success("Cambio de plan satisfactorio",{id:g}),e.id_plan==6?(n.id_plan_fk=e.id_plan,window.open(u.successUrl,"_self")):window.open(C.user.stripe_session_url,"_self")}catch(C){Ge.error("Error al cambiar de plan",{id:g}),console.log(C),r(!1)}};return c.jsxs(c.Fragment,{children:[l&&c.jsx(Zh,{}),c.jsxs("div",{className:"plan_details max-w-lg rounded-3xl p-12",children:[c.jsx("div",{className:"text-xl text-center font-bold",children:e.name_plan}),c.jsx("ul",{className:"my-4",children:Object.entries(b2).map(g=>{if(e[g[0]]==!0)return typeof g[1]=="string"?c.jsxs("li",{children:[" ",g[1]]},g[0]):c.jsxs("li",{children:[" ",g[1][e[g[0]]-1]]},g[0])})}),c.jsx("div",{className:"plan_details_btn",children:c.jsx(et,{onClick:()=>{i(!0)},children:"Escoger Plan"})})]}),o&&c.jsx(c.Fragment,{children:c.jsxs("div",{className:"plan_details plan_show_shure max-w-lg rounded-3xl p-12",children:[c.jsx(Px,{size:34,color:"#cc0000",className:"shure_close",onClick:()=>{i(!1)}}),c.jsx("div",{className:"rounded-md bg-yellow-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(NU,{className:"h-5 w-5 text-yellow-400","aria-hidden":"true"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"ATENCIN"}),c.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:c.jsxs("p",{children:["Si se empieza la transaccin y no se completa ser regresado a plan bsico independientemente del plan que tenga anteriormente.",c.jsx("br",{}),"Desea continuar a la transaccin?"]})})]})]})}),c.jsx("div",{className:"plan_details_btn",children:c.jsx(et,{onClick:a,children:"Continuar"})})]})})]})},rv=()=>{const[e,t]=v.useState(null),[n,l]=v.useState(!1),[r,o]=v.useState(null),i=window.innerWidth,a=ol(),g=async()=>{const s=await a.getPlans();t(s.data.plans)};return v.useEffect(()=>{g()},[]),c.jsxs(c.Fragment,{children:[n&&c.jsx("div",{className:"profile-modal-background",onClick:()=>{l(!1)},children:c.jsx("div",{})}),n&&c.jsx(a6,{plan:r}),c.jsx(In,{position:"top-right",richColors:!0}),e!=null&&c.jsx("div",{className:"change-plan-container",children:c.jsx("div",{className:"change-plan",children:c.jsx(Bh,{slidesPerView:i>1280?3.5:i>940?2.5:i>576?1.6:1.2,spaceBetween:10,pagination:{clickable:!0},modules:[f2],className:"mySwiper",children:p2.map((s,I)=>(s.id_plan=e[I].id_plan,s.cost=[e[I].unique_cost,e[I].annual_cost],s.color="#"+e[I].color_card,c.jsx(Sh,{children:c.jsx(i6,{plan:s,setShowDetailsModal:l,setPlanSelected:o,cardsPlan:e[I]})},I)))})})})]})},g6=()=>{const e=It();return c.jsx("div",{className:"flex flex-col min-h-screen",children:c.jsx("div",{className:"flex flex-row",children:c.jsxs("main",{className:"flex-grow w-3/4 p-8",children:[c.jsx("div",{className:"bg-gray-700 bg-opacity-40 border  p-8 rounded-lg shadow-lg",children:c.jsxs("div",{className:"flex flex-col  items-center",children:[c.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-NV9q05F16g50huet5CWXj-AtbmH30NTR4A&s",alt:"User Avatar",className:"w-24 h-24 rounded-md mb-4 object-cover"}),c.jsx("h2",{className:"text-xl font-semibold",children:"Diego Rmz"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Lder de proyectos | Desarrollador FullStack"}),c.jsx("div",{className:"mt-4 p-2 rounded-md bg-white",children:c.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/d/d7/Commons_QR_code.png",alt:"QR Code",className:"w-48 h-48"})}),c.jsxs("div",{className:"flex space-x-4 mt-4",children:[c.jsx("button",{className:"bg-orange-500 text-white py-2 px-4 rounded-full",children:"Compartir Tarjeta"}),c.jsx("button",{className:"bg-orange-500 text-white py-2 px-4 rounded-full",children:"Copiar URL"})]})]})}),c.jsxs("div",{className:"mt-8 p-4 bg-[rgb(27,34,62)] rounded-lg",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Compra de Tarjetas Personalizadas"}),c.jsx("p",{className:"mt-2 text-gray-400",children:"Nuestra plataforma te permite seleccionar entre una variedad de diseos y agregar tu toque personal con mensajes y detalles nicos. Si necesitas una cotizacin especfica para pedidos grandes o personalizados, tambin puedes solicitarla fcilmente a travs de esta seccin. Haz que tus momentos especiales sean inolvidables con nuestras tarjetas personalizadas!"}),c.jsx("div",{className:"mt-4",children:c.jsx("button",{onClick:()=>e("/plans"),className:"bg-orange-500 text-white py-2 px-4 rounded-full",children:"Gestionar compra"})})]})]})})})};function s6({description:e,title:t}){return c.jsxs("div",{className:"border-t border-white  text-black p-1 pt-2",children:[c.jsx("h2",{className:"text-md text-white font-bold mb-4",children:t}),c.jsx("p",{className:"text-white text-[12px]",children:e})]})}function c6(){const[e,t]=v.useState([{idCotizacion:"01",fechaCreacion:"10/08/2024",fechaActualizacion:"10/08/2024",cantidadTarjetas:20,costoTotal:"MXN $2999",estatus:"Pendiente",acciones:["Comprar","editar","borrar"]},{idCotizacion:"02",fechaCreacion:"10/08/2024",fechaActualizacion:"10/08/2024",cantidadTarjetas:20,costoTotal:"MXN $2999",estatus:"Pendiente",acciones:["Comprar","editar","borrar"]},{idCotizacion:"03",fechaCreacion:"10/08/2024",fechaActualizacion:"10/08/2024",cantidadTarjetas:20,costoTotal:"MXN $2999",estatus:"Pendiente",acciones:["Comprar","editar","borrar"]}]),[n,l]=v.useState({idCotizacion:"",fechaCreacion:"",fechaActualizacion:"",cantidadTarjetas:0,costoTotal:"",estatus:"",acciones:[]}),r=i=>{t(e.filter(a=>a.idCotizacion!==i))},o=i=>{const a=e.find(g=>g.idCotizacion===i);l(a)};return c.jsxs("div",{className:"  border mt-10 mb-10 text-black p-6 rounded-lg shadow-lg",children:[c.jsxs("div",{className:"md:flex block justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-md font-bold mb-2",children:"Lista de cotizaciones"}),c.jsx("p",{className:"mb-4  text-sm text-white ",children:"Antes de realizar tu compra, puedes generar una cotizacin por la cantidad de tarjetas necesarias."})]}),c.jsx("button",{className:"bg-orange-500 h-8 px-2   hover:bg-orange-600 text-sm  rounded-md text-white ",children:"Nueva cotizacion"})]}),c.jsx("div",{className:"relative overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-white",children:[c.jsx("thead",{className:"text-[11px] text-white uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-2 py-1",children:"idCotizacion"}),c.jsx("th",{scope:"col",className:"px-2 py-1",children:"Fecha de creacion"}),c.jsx("th",{scope:"col",className:"px-2 py-1",children:"Fecha de actualizacion"}),c.jsx("th",{scope:"col",className:"px-2 py-1",children:"Cantidad de tarjetas"}),c.jsx("th",{scope:"col",className:"px-3 py-1",children:"Costo total"}),c.jsx("th",{scope:"col",className:"px-2 py-1",children:"Estatus"}),c.jsx("th",{scope:"col",className:"px-2 py-1 text-center",children:"Acciones"})]})}),c.jsx("tbody",{children:e.map(i=>c.jsxs("tr",{className:"text-[12px] border-y",children:[c.jsx("th",{scope:"row",className:"px-3 py-2 font-medium text-white whitespace-nowrap",children:i.idCotizacion}),c.jsx("td",{className:"px-2 py-2",children:i.fechaCreacion}),c.jsx("td",{className:"px-2 py-2",children:i.fechaActualizacion}),c.jsx("td",{className:"px-2 py-2",children:i.cantidadTarjetas}),c.jsx("td",{className:"px-2 py-2",children:i.costoTotal}),c.jsx("td",{className:"px-2 py-2",children:i.estatus}),c.jsxs("td",{className:"px-2 flex py-2 cursor-pointer",children:[c.jsx("button",{className:"bg-green-600 font-semibold rounded-md text-white p-1 ",onClick:()=>o(i.idCotizacion),children:"Comprar"}),c.jsx("button",{className:"bg-blue-500 font-semibold rounded-md text-white p-1 mx-2",onClick:()=>o(i.idCotizacion),children:"Editar"}),c.jsx("button",{className:"bg-red-700 font-semibold rounded-md text-white p-1",onClick:()=>r(i.idCotizacion),children:"Borrar"})]})]},i.idCotizacion))})]})})]})}const I6="/assets/img001-fbea0a4c.png",d6="/assets/img002-0b76fbde.png",u6="/assets/img003-d3fb25ad.png",C6="/assets/img004-149fdcfe.png",oC=()=>{const[e,t]=v.useState([{title:"Logo Personalizado",descripcion:"Nuestras tarjetas NFC estn diseadas para reflejar la identidad visual de tu empresa. Cada tarjeta incluye la posibilidad de personalizar el logo, asegurando que tu marca est siempre visible y reconocible. La impresin del logo se realiza con alta calidad para mantener la integridad de los colores y detalles."},{title:"Tecnologa",descripcion:"Incorporamos la ltima tecnologa NFC (Near Field Communication) en nuestras tarjetas, permitiendo una conexin rpida y segura con dispositivos compatibles. Al acercar la tarjeta a un smartphone, se abre automticamente tu perfil profesional, facilitando el intercambio de informacin de manera moderna y eficiente."},{title:"Dimensiones",descripcion:"Las tarjetas tienen el mismo tamao que una tarjeta de crdito estndar, con dimensiones de 85.60 mm x 53.98 mm. Este formato familiar asegura que la tarjeta sea cmoda de llevar en carteras y tarjeteros, mantenindose siempre al alcance."},{title:"Material",descripcion:"Fabricadas con PVC de alta calidad, nuestras tarjetas son duraderas y resistentes al desgaste diario. Este material no solo proporciona una sensacin premium al tacto, sino que tambin garantiza la longevidad del producto."},{title:"Colores Empresariales",descripcion:"Para asegurar una coherencia visual con la identidad de tu empresa, ofrecemos la posibilidad de personalizar las tarjetas con los colores especficos de tu marca. Utilizamos tcnicas de impresin avanzadas para asegurar que los colores sean vibrantes y precisos, reflejando fielmente la paleta corporativa."},{title:"Consideraciones",descripcion:"Cada tarjeta NFC personalizada de Know Me puede reemplazar a ms de mil tarjetas de presentacin impresas, contribuyendo significativamente a la reduccin de desechos y al cuidado del medio ambiente. Adems, su uso es mucho ms prctico y moderno, alinendose con las tendencias digitales actuales."}]);return c.jsxs("div",{className:"bg-blue-950  flex flex-col ",children:[c.jsxs("div",{className:"w-[90%]  mt-10 mx-auto",children:[c.jsxs("div",{className:"mb-8 ",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Personaliza tus tarjetas"}),c.jsx("p",{className:"text-white mt-2 ",children:" Tarjetas diseadas para ofrecer una combinacin de funcionalidad y estilo, estas tarjetas no solo facilitan el intercambio de informacin profesional, sino que tambin aseguran una presentacin elegante y moderna."})]}),c.jsxs("div",{className:"border rounded-md p-4 md:flex block items-start",children:[c.jsxs("div",{className:" md:w-1/2 w-full",children:[c.jsxs("div",{className:" mb-4  border-white",children:[c.jsx("h1",{className:"text-xl font-bold",children:"Especificaciones tecnicas"}),c.jsx("p",{className:"text-white mt-2 text-sm",children:"   ex nec tincidunt elit nibh Nullam Ut quis in non non vitae Ut ex nec tincidunt elit nibh Nullam Ut quis in non non vitae Ut"})]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:e.map(n=>c.jsx(c.Fragment,{children:c.jsx(s6,{title:n.title,description:n.descripcion})}))})]}),c.jsx("div",{className:"w-full md:w-1/2 md:ml-10 ml-0",children:c.jsxs("div",{className:"grid grid-cols-2  gap-3",children:[c.jsx("div",{children:c.jsx("img",{className:"h-auto max-w-full",src:I6,alt:""})}),c.jsx("div",{children:c.jsx("img",{className:"h-auto max-w-full ",src:C6,alt:""})}),c.jsx("div",{children:c.jsx("img",{className:"h-auto max-w-full ",src:d6,alt:""})}),c.jsx("div",{children:c.jsx("img",{className:"h-auto max-w-full ",src:u6,alt:""})})]})})]}),c.jsx(c6,{})]}),c.jsx(dI,{})]})},A6=()=>{const e=window.innerWidth,t=e>1300?2:3,n=3,l=4;return c.jsx(c.Fragment,{children:c.jsxs(pX,{children:[c.jsx(Ke,{path:"/",element:c.jsx(wn,{children:c.jsx(o6,{})})}),c.jsx(Ke,{path:"/login/*",element:c.jsx(wn,{children:c.jsx(qN,{})})}),c.jsx(Ke,{path:"/forgot/*",element:c.jsx(wn,{children:c.jsx(JQ,{})})}),c.jsx(Ke,{path:"/emailSent/*",element:c.jsx(wn,{children:c.jsx(NQ,{})})}),c.jsx(Ke,{path:"/reset-password/*",element:c.jsx(wn,{children:c.jsx(YQ,{})})}),c.jsx(Ke,{path:"/registro/*",element:c.jsx(wn,{children:c.jsx(eY,{})})}),c.jsx(Ke,{path:"/pagedetail/*",element:e>576?c.jsx(wn,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(g6,{})})]})}):c.jsxs(wn,{children:[c.jsx(Et,{}),c.jsx(oC,{})]})}),c.jsx(Ke,{path:"/plans/*",element:e>576?c.jsx(wn,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(oC,{})})]})}):c.jsxs(wn,{children:[c.jsx(Et,{}),c.jsx(oC,{})]})}),c.jsx(Ke,{path:"/plan/*",element:c.jsx(wn,{children:c.jsx(F9,{})})}),c.jsx(Ke,{path:"/card/*",element:c.jsx(bD,{})}),c.jsx(Ke,{path:"/perfil/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(Zb,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(Zb,{})]})}),c.jsx(Ke,{path:"/password/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(lv,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(lv,{})]})}),c.jsx(Ke,{path:"/business/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(Iy,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(Iy,{})]})}),c.jsx(Ke,{path:"/info_org/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(tv,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(tv,{})]})}),c.jsx(Ke,{path:"/team_org/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(nv,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(nv,{})]})}),c.jsx(Ke,{path:"/contacts/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(cy,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(cy,{})]})}),c.jsx(Ke,{path:"/addContact/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(sy,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(sy,{})]})}),c.jsx(Ke,{path:"/share/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx($b,{})})]})}):c.jsx(Je,{children:c.jsx($b,{})})}),c.jsx(Ke,{path:"/scanner/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(iy,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(iy,{})]})}),c.jsx(Ke,{path:"/vcard/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(gy,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(gy,{})]})}),c.jsx(Ke,{path:"/settings/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{children:c.jsx(ay,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(ay,{})]})}),c.jsx(Ke,{path:"/upgrade/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{sm:12-l,md:12-n,lg:12-t,children:c.jsx(rv,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(rv,{})]})}),c.jsx(Ke,{path:"/home/*",element:e>576?c.jsx(Je,{children:c.jsxs(Re,{children:[c.jsx(se,{sm:l,md:n,lg:t,children:c.jsx(Xt,{})}),c.jsx(se,{sm:12-l,md:12-n,lg:12-t,children:c.jsx(ey,{})})]})}):c.jsxs(Je,{children:[c.jsx(Et,{}),c.jsx(ey,{})]})}),c.jsx(Ke,{path:"/*",element:c.jsx(lh,{to:"/login/"})})]})})};function m6(){return c.jsx(c.Fragment,{children:c.jsx(SX,{children:c.jsx(A6,{})})})}iC.createRoot(document.getElementById("root")).render(c.jsx(U.StrictMode,{children:c.jsx(m6,{})}));
