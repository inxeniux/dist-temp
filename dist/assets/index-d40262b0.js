function Kp(e,t){for(var g=0;g<t.length;g++){const l=t[g];if(typeof l!="string"&&!Array.isArray(l)){for(const n in l)if(n!=="default"&&!(n in e)){const I=Object.getOwnPropertyDescriptor(l,n);I&&Object.defineProperty(e,n,I.get?I:{enumerable:!0,get:()=>l[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const I of n)if(I.type==="childList")for(const i of I.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function g(n){const I={};return n.integrity&&(I.integrity=n.integrity),n.referrerPolicy&&(I.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?I.credentials="include":n.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function l(n){if(n.ep)return;n.ep=!0;const I=g(n);fetch(n.href,I)}})();var Ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function al(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var GA={exports:{}},To={},BA={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DI=Symbol.for("react.element"),xp=Symbol.for("react.portal"),Ep=Symbol.for("react.fragment"),zp=Symbol.for("react.strict_mode"),Tp=Symbol.for("react.profiler"),Mp=Symbol.for("react.provider"),Lp=Symbol.for("react.context"),Up=Symbol.for("react.forward_ref"),Qp=Symbol.for("react.suspense"),jp=Symbol.for("react.memo"),Dp=Symbol.for("react.lazy"),Xc=Symbol.iterator;function Op(e){return e===null||typeof e!="object"?null:(e=Xc&&e[Xc]||e["@@iterator"],typeof e=="function"?e:null)}var vA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SA=Object.assign,VA={};function kn(e,t,g){this.props=e,this.context=t,this.refs=VA,this.updater=g||vA}kn.prototype.isReactComponent={};kn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function WA(){}WA.prototype=kn.prototype;function ts(e,t,g){this.props=e,this.context=t,this.refs=VA,this.updater=g||vA}var gs=ts.prototype=new WA;gs.constructor=ts;SA(gs,kn.prototype);gs.isPureReactComponent=!0;var kc=Array.isArray,RA=Object.prototype.hasOwnProperty,ls={current:null},XA={key:!0,ref:!0,__self:!0,__source:!0};function kA(e,t,g){var l,n={},I=null,i=null;if(t!=null)for(l in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(I=""+t.key),t)RA.call(t,l)&&!XA.hasOwnProperty(l)&&(n[l]=t[l]);var o=arguments.length-2;if(o===1)n.children=g;else if(1<o){for(var r=Array(o),a=0;a<o;a++)r[a]=arguments[a+2];n.children=r}if(e&&e.defaultProps)for(l in o=e.defaultProps,o)n[l]===void 0&&(n[l]=o[l]);return{$$typeof:DI,type:e,key:I,ref:i,props:n,_owner:ls.current}}function Pp(e,t){return{$$typeof:DI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ns(e){return typeof e=="object"&&e!==null&&e.$$typeof===DI}function _p(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(g){return t[g]})}var Jc=/\/+/g;function Fr(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_p(""+e.key):t.toString(36)}function Ji(e,t,g,l,n){var I=typeof e;(I==="undefined"||I==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(I){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case DI:case xp:i=!0}}if(i)return i=e,n=n(i),e=l===""?"."+Fr(i,0):l,kc(n)?(g="",e!=null&&(g=e.replace(Jc,"$&/")+"/"),Ji(n,t,g,"",function(a){return a})):n!=null&&(ns(n)&&(n=Pp(n,g+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Jc,"$&/")+"/")+e)),t.push(n)),1;if(i=0,l=l===""?".":l+":",kc(e))for(var o=0;o<e.length;o++){I=e[o];var r=l+Fr(I,o);i+=Ji(I,t,g,r,n)}else if(r=Op(e),typeof r=="function")for(e=r.call(e),o=0;!(I=e.next()).done;)I=I.value,r=l+Fr(I,o++),i+=Ji(I,t,g,r,n);else if(I==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ii(e,t,g){if(e==null)return e;var l=[],n=0;return Ji(e,l,"","",function(I){return t.call(g,I,n++)}),l}function qp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(g){(e._status===0||e._status===-1)&&(e._status=1,e._result=g)},function(g){(e._status===0||e._status===-1)&&(e._status=2,e._result=g)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ht={current:null},Yi={transition:null},$p={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:Yi,ReactCurrentOwner:ls};pe.Children={map:ii,forEach:function(e,t,g){ii(e,function(){t.apply(this,arguments)},g)},count:function(e){var t=0;return ii(e,function(){t++}),t},toArray:function(e){return ii(e,function(t){return t})||[]},only:function(e){if(!ns(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Component=kn;pe.Fragment=Ep;pe.Profiler=Tp;pe.PureComponent=ts;pe.StrictMode=zp;pe.Suspense=Qp;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$p;pe.cloneElement=function(e,t,g){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=SA({},e.props),n=e.key,I=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(I=t.ref,i=ls.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(r in t)RA.call(t,r)&&!XA.hasOwnProperty(r)&&(l[r]=t[r]===void 0&&o!==void 0?o[r]:t[r])}var r=arguments.length-2;if(r===1)l.children=g;else if(1<r){o=Array(r);for(var a=0;a<r;a++)o[a]=arguments[a+2];l.children=o}return{$$typeof:DI,type:e.type,key:n,ref:I,props:l,_owner:i}};pe.createContext=function(e){return e={$$typeof:Lp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mp,_context:e},e.Consumer=e};pe.createElement=kA;pe.createFactory=function(e){var t=kA.bind(null,e);return t.type=e,t};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:Up,render:e}};pe.isValidElement=ns;pe.lazy=function(e){return{$$typeof:Dp,_payload:{_status:-1,_result:e},_init:qp}};pe.memo=function(e,t){return{$$typeof:jp,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=Yi.transition;Yi.transition={};try{e()}finally{Yi.transition=t}};pe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};pe.useCallback=function(e,t){return ht.current.useCallback(e,t)};pe.useContext=function(e){return ht.current.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e){return ht.current.useDeferredValue(e)};pe.useEffect=function(e,t){return ht.current.useEffect(e,t)};pe.useId=function(){return ht.current.useId()};pe.useImperativeHandle=function(e,t,g){return ht.current.useImperativeHandle(e,t,g)};pe.useInsertionEffect=function(e,t){return ht.current.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return ht.current.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return ht.current.useMemo(e,t)};pe.useReducer=function(e,t,g){return ht.current.useReducer(e,t,g)};pe.useRef=function(e){return ht.current.useRef(e)};pe.useState=function(e){return ht.current.useState(e)};pe.useSyncExternalStore=function(e,t,g){return ht.current.useSyncExternalStore(e,t,g)};pe.useTransition=function(){return ht.current.useTransition()};pe.version="18.2.0";BA.exports=pe;var k=BA.exports;const q=al(k),ef=Kp({__proto__:null,default:q},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf=k,gf=Symbol.for("react.element"),lf=Symbol.for("react.fragment"),nf=Object.prototype.hasOwnProperty,If=tf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,of={key:!0,ref:!0,__self:!0,__source:!0};function JA(e,t,g){var l,n={},I=null,i=null;g!==void 0&&(I=""+g),t.key!==void 0&&(I=""+t.key),t.ref!==void 0&&(i=t.ref);for(l in t)nf.call(t,l)&&!of.hasOwnProperty(l)&&(n[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)n[l]===void 0&&(n[l]=t[l]);return{$$typeof:gf,type:e,key:I,ref:i,props:n,_owner:If.current}}To.Fragment=lf;To.jsx=JA;To.jsxs=JA;GA.exports=To;var C=GA.exports,Ja={},YA={exports:{}},Xt={},wA={exports:{}},HA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,x){var w=E.length;E.push(x);e:for(;0<w;){var J=w-1>>>1,N=E[J];if(0<n(N,x))E[J]=x,E[w]=N,w=J;else break e}}function g(E){return E.length===0?null:E[0]}function l(E){if(E.length===0)return null;var x=E[0],w=E.pop();if(w!==x){E[0]=w;e:for(var J=0,N=E.length,K=N>>>1;J<K;){var z=2*(J+1)-1,L=E[z],H=z+1,T=E[H];if(0>n(L,w))H<N&&0>n(T,L)?(E[J]=T,E[H]=w,J=H):(E[J]=L,E[z]=w,J=z);else if(H<N&&0>n(T,w))E[J]=T,E[H]=w,J=H;else break e}}return x}function n(E,x){var w=E.sortIndex-x.sortIndex;return w!==0?w:E.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var I=performance;e.unstable_now=function(){return I.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var r=[],a=[],c=1,s=null,d=3,A=!1,f=!1,p=!1,Z=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(E){for(var x=g(a);x!==null;){if(x.callback===null)l(a);else if(x.startTime<=E)l(a),x.sortIndex=x.expirationTime,t(r,x);else break;x=g(a)}}function b(E){if(p=!1,h(E),!f)if(g(r)!==null)f=!0,M(y);else{var x=g(a);x!==null&&U(b,x.startTime-E)}}function y(E,x){f=!1,p&&(p=!1,m(S),S=-1),A=!0;var w=d;try{for(h(x),s=g(r);s!==null&&(!(s.expirationTime>x)||E&&!B());){var J=s.callback;if(typeof J=="function"){s.callback=null,d=s.priorityLevel;var N=J(s.expirationTime<=x);x=e.unstable_now(),typeof N=="function"?s.callback=N:s===g(r)&&l(r),h(x)}else l(r);s=g(r)}if(s!==null)var K=!0;else{var z=g(a);z!==null&&U(b,z.startTime-x),K=!1}return K}finally{s=null,d=w,A=!1}}var V=!1,v=null,S=-1,X=5,G=-1;function B(){return!(e.unstable_now()-G<X)}function W(){if(v!==null){var E=e.unstable_now();G=E;var x=!0;try{x=v(!0,E)}finally{x?R():(V=!1,v=null)}}else V=!1}var R;if(typeof u=="function")R=function(){u(W)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,F=Y.port2;Y.port1.onmessage=W,R=function(){F.postMessage(null)}}else R=function(){Z(W,0)};function M(E){v=E,V||(V=!0,R())}function U(E,x){S=Z(function(){E(e.unstable_now())},x)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){f||A||(f=!0,M(y))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return g(r)},e.unstable_next=function(E){switch(d){case 1:case 2:case 3:var x=3;break;default:x=d}var w=d;d=x;try{return E()}finally{d=w}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,x){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var w=d;d=E;try{return x()}finally{d=w}},e.unstable_scheduleCallback=function(E,x,w){var J=e.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?J+w:J):w=J,E){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=w+N,E={id:c++,callback:x,priorityLevel:E,startTime:w,expirationTime:N,sortIndex:-1},w>J?(E.sortIndex=w,t(a,E),g(r)===null&&E===g(a)&&(p?(m(S),S=-1):p=!0,U(b,w-J))):(E.sortIndex=N,t(r,E),f||A||(f=!0,M(y))),E},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(E){var x=d;return function(){var w=d;d=x;try{return E.apply(this,arguments)}finally{d=w}}}})(HA);wA.exports=HA;var rf=wA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA=k,Rt=rf;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,g=1;g<arguments.length;g++)t+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FA=new Set,GI={};function El(e,t){fn(e,t),fn(e+"Capture",t)}function fn(e,t){for(GI[e]=t,e=0;e<t.length;e++)FA.add(t[e])}var Wg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=Object.prototype.hasOwnProperty,af=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yc={},wc={};function Cf(e){return Ya.call(wc,e)?!0:Ya.call(Yc,e)?!1:af.test(e)?wc[e]=!0:(Yc[e]=!0,!1)}function sf(e,t,g,l){if(g!==null&&g.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:g!==null?!g.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cf(e,t,g,l){if(t===null||typeof t>"u"||sf(e,t,g,l))return!0;if(l)return!1;if(g!==null)switch(g.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,g,l,n,I,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=n,this.mustUseProperty=g,this.propertyName=e,this.type=t,this.sanitizeURL=I,this.removeEmptyString=i}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rt[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rt[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rt[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rt[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rt[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rt[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rt[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rt[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rt[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Is=/[\-:]([a-z])/g;function is(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Is,is);rt[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Is,is);rt[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Is,is);rt[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rt[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});rt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rt[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function os(e,t,g,l){var n=rt.hasOwnProperty(t)?rt[t]:null;(n!==null?n.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cf(t,g,n,l)&&(g=null),l||n===null?Cf(t)&&(g===null?e.removeAttribute(t):e.setAttribute(t,""+g)):n.mustUseProperty?e[n.propertyName]=g===null?n.type===3?!1:"":g:(t=n.attributeName,l=n.attributeNamespace,g===null?e.removeAttribute(t):(n=n.type,g=n===3||n===4&&g===!0?"":""+g,l?e.setAttributeNS(l,t,g):e.setAttribute(t,g))))}var Yg=NA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oi=Symbol.for("react.element"),$l=Symbol.for("react.portal"),en=Symbol.for("react.fragment"),rs=Symbol.for("react.strict_mode"),wa=Symbol.for("react.profiler"),KA=Symbol.for("react.provider"),xA=Symbol.for("react.context"),as=Symbol.for("react.forward_ref"),Ha=Symbol.for("react.suspense"),Na=Symbol.for("react.suspense_list"),Cs=Symbol.for("react.memo"),Eg=Symbol.for("react.lazy"),EA=Symbol.for("react.offscreen"),Hc=Symbol.iterator;function Qn(e){return e===null||typeof e!="object"?null:(e=Hc&&e[Hc]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,Kr;function oI(e){if(Kr===void 0)try{throw Error()}catch(g){var t=g.stack.trim().match(/\n( *(at )?)/);Kr=t&&t[1]||""}return`
`+Kr+e}var xr=!1;function Er(e,t){if(!e||xr)return"";xr=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(a){var l=a}Reflect.construct(e,[],t)}else{try{t.call()}catch(a){l=a}e.call(t.prototype)}else{try{throw Error()}catch(a){l=a}e()}}catch(a){if(a&&l&&typeof a.stack=="string"){for(var n=a.stack.split(`
`),I=l.stack.split(`
`),i=n.length-1,o=I.length-1;1<=i&&0<=o&&n[i]!==I[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==I[o]){if(i!==1||o!==1)do if(i--,o--,0>o||n[i]!==I[o]){var r=`
`+n[i].replace(" at new "," at ");return e.displayName&&r.includes("<anonymous>")&&(r=r.replace("<anonymous>",e.displayName)),r}while(1<=i&&0<=o);break}}}finally{xr=!1,Error.prepareStackTrace=g}return(e=e?e.displayName||e.name:"")?oI(e):""}function df(e){switch(e.tag){case 5:return oI(e.type);case 16:return oI("Lazy");case 13:return oI("Suspense");case 19:return oI("SuspenseList");case 0:case 2:case 15:return e=Er(e.type,!1),e;case 11:return e=Er(e.type.render,!1),e;case 1:return e=Er(e.type,!0),e;default:return""}}function Fa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case en:return"Fragment";case $l:return"Portal";case wa:return"Profiler";case rs:return"StrictMode";case Ha:return"Suspense";case Na:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xA:return(e.displayName||"Context")+".Consumer";case KA:return(e._context.displayName||"Context")+".Provider";case as:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cs:return t=e.displayName||null,t!==null?t:Fa(e.type)||"Memo";case Eg:t=e._payload,e=e._init;try{return Fa(e(t))}catch{}}return null}function uf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fa(t);case 8:return t===rs?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function il(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Af(e){var t=zA(e)?"checked":"value",g=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var n=g.get,I=g.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(i){l=""+i,I.call(this,i)}}),Object.defineProperty(e,t,{enumerable:g.enumerable}),{getValue:function(){return l},setValue:function(i){l=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ri(e){e._valueTracker||(e._valueTracker=Af(e))}function TA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var g=t.getValue(),l="";return e&&(l=zA(e)?e.checked?"true":"false":e.value),e=l,e!==g?(t.setValue(e),!0):!1}function Pi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ka(e,t){var g=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??e._wrapperState.initialChecked})}function Nc(e,t){var g=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;g=il(t.value!=null?t.value:g),e._wrapperState={initialChecked:l,initialValue:g,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MA(e,t){t=t.checked,t!=null&&os(e,"checked",t,!1)}function xa(e,t){MA(e,t);var g=il(t.value),l=t.type;if(g!=null)l==="number"?(g===0&&e.value===""||e.value!=g)&&(e.value=""+g):e.value!==""+g&&(e.value=""+g);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ea(e,t.type,g):t.hasOwnProperty("defaultValue")&&Ea(e,t.type,il(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fc(e,t,g){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,g||t===e.value||(e.value=t),e.defaultValue=t}g=e.name,g!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,g!==""&&(e.name=g)}function Ea(e,t,g){(t!=="number"||Pi(e.ownerDocument)!==e)&&(g==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+g&&(e.defaultValue=""+g))}var rI=Array.isArray;function cn(e,t,g,l){if(e=e.options,t){t={};for(var n=0;n<g.length;n++)t["$"+g[n]]=!0;for(g=0;g<e.length;g++)n=t.hasOwnProperty("$"+e[g].value),e[g].selected!==n&&(e[g].selected=n),n&&l&&(e[g].defaultSelected=!0)}else{for(g=""+il(g),t=null,n=0;n<e.length;n++){if(e[n].value===g){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function za(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kc(e,t){var g=t.value;if(g==null){if(g=t.children,t=t.defaultValue,g!=null){if(t!=null)throw Error(ee(92));if(rI(g)){if(1<g.length)throw Error(ee(93));g=g[0]}t=g}t==null&&(t=""),g=t}e._wrapperState={initialValue:il(g)}}function LA(e,t){var g=il(t.value),l=il(t.defaultValue);g!=null&&(g=""+g,g!==e.value&&(e.value=g),t.defaultValue==null&&e.defaultValue!==g&&(e.defaultValue=g)),l!=null&&(e.defaultValue=""+l)}function xc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function UA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ta(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?UA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ai,QA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,g,l,n){MSApp.execUnsafeLocalFunction(function(){return e(t,g,l,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ai=ai||document.createElement("div"),ai.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ai.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function BI(e,t){if(t){var g=e.firstChild;if(g&&g===e.lastChild&&g.nodeType===3){g.nodeValue=t;return}}e.textContent=t}var cI={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mf=["Webkit","ms","Moz","O"];Object.keys(cI).forEach(function(e){mf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cI[t]=cI[e]})});function jA(e,t,g){return t==null||typeof t=="boolean"||t===""?"":g||typeof t!="number"||t===0||cI.hasOwnProperty(e)&&cI[e]?(""+t).trim():t+"px"}function DA(e,t){e=e.style;for(var g in t)if(t.hasOwnProperty(g)){var l=g.indexOf("--")===0,n=jA(g,t[g],l);g==="float"&&(g="cssFloat"),l?e.setProperty(g,n):e[g]=n}}var hf=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ma(e,t){if(t){if(hf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function La(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ua=null;function ss(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qa=null,dn=null,un=null;function Ec(e){if(e=_I(e)){if(typeof Qa!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=jo(t),Qa(e.stateNode,e.type,t))}}function OA(e){dn?un?un.push(e):un=[e]:dn=e}function PA(){if(dn){var e=dn,t=un;if(un=dn=null,Ec(e),t)for(e=0;e<t.length;e++)Ec(t[e])}}function _A(e,t){return e(t)}function qA(){}var zr=!1;function $A(e,t,g){if(zr)return e(t,g);zr=!0;try{return _A(e,t,g)}finally{zr=!1,(dn!==null||un!==null)&&(qA(),PA())}}function vI(e,t){var g=e.stateNode;if(g===null)return null;var l=jo(g);if(l===null)return null;g=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(g&&typeof g!="function")throw Error(ee(231,t,typeof g));return g}var ja=!1;if(Wg)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){ja=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{ja=!1}function bf(e,t,g,l,n,I,i,o,r){var a=Array.prototype.slice.call(arguments,3);try{t.apply(g,a)}catch(c){this.onError(c)}}var dI=!1,_i=null,qi=!1,Da=null,pf={onError:function(e){dI=!0,_i=e}};function ff(e,t,g,l,n,I,i,o,r){dI=!1,_i=null,bf.apply(pf,arguments)}function Zf(e,t,g,l,n,I,i,o,r){if(ff.apply(this,arguments),dI){if(dI){var a=_i;dI=!1,_i=null}else throw Error(ee(198));qi||(qi=!0,Da=a)}}function zl(e){var t=e,g=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(g=t.return),e=t.return;while(e)}return t.tag===3?g:null}function em(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function zc(e){if(zl(e)!==e)throw Error(ee(188))}function yf(e){var t=e.alternate;if(!t){if(t=zl(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var g=e,l=t;;){var n=g.return;if(n===null)break;var I=n.alternate;if(I===null){if(l=n.return,l!==null){g=l;continue}break}if(n.child===I.child){for(I=n.child;I;){if(I===g)return zc(n),e;if(I===l)return zc(n),t;I=I.sibling}throw Error(ee(188))}if(g.return!==l.return)g=n,l=I;else{for(var i=!1,o=n.child;o;){if(o===g){i=!0,g=n,l=I;break}if(o===l){i=!0,l=n,g=I;break}o=o.sibling}if(!i){for(o=I.child;o;){if(o===g){i=!0,g=I,l=n;break}if(o===l){i=!0,l=I,g=n;break}o=o.sibling}if(!i)throw Error(ee(189))}}if(g.alternate!==l)throw Error(ee(190))}if(g.tag!==3)throw Error(ee(188));return g.stateNode.current===g?e:t}function tm(e){return e=yf(e),e!==null?gm(e):null}function gm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gm(e);if(t!==null)return t;e=e.sibling}return null}var lm=Rt.unstable_scheduleCallback,Tc=Rt.unstable_cancelCallback,Gf=Rt.unstable_shouldYield,Bf=Rt.unstable_requestPaint,De=Rt.unstable_now,vf=Rt.unstable_getCurrentPriorityLevel,cs=Rt.unstable_ImmediatePriority,nm=Rt.unstable_UserBlockingPriority,$i=Rt.unstable_NormalPriority,Sf=Rt.unstable_LowPriority,Im=Rt.unstable_IdlePriority,Mo=null,mg=null;function Vf(e){if(mg&&typeof mg.onCommitFiberRoot=="function")try{mg.onCommitFiberRoot(Mo,e,void 0,(e.current.flags&128)===128)}catch{}}var tg=Math.clz32?Math.clz32:Xf,Wf=Math.log,Rf=Math.LN2;function Xf(e){return e>>>=0,e===0?32:31-(Wf(e)/Rf|0)|0}var Ci=64,si=4194304;function aI(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function eo(e,t){var g=e.pendingLanes;if(g===0)return 0;var l=0,n=e.suspendedLanes,I=e.pingedLanes,i=g&268435455;if(i!==0){var o=i&~n;o!==0?l=aI(o):(I&=i,I!==0&&(l=aI(I)))}else i=g&~n,i!==0?l=aI(i):I!==0&&(l=aI(I));if(l===0)return 0;if(t!==0&&t!==l&&!(t&n)&&(n=l&-l,I=t&-t,n>=I||n===16&&(I&4194240)!==0))return t;if(l&4&&(l|=g&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)g=31-tg(t),n=1<<g,l|=e[g],t&=~n;return l}function kf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jf(e,t){for(var g=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,I=e.pendingLanes;0<I;){var i=31-tg(I),o=1<<i,r=n[i];r===-1?(!(o&g)||o&l)&&(n[i]=kf(o,t)):r<=t&&(e.expiredLanes|=o),I&=~o}}function Oa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function im(){var e=Ci;return Ci<<=1,!(Ci&4194240)&&(Ci=64),e}function Tr(e){for(var t=[],g=0;31>g;g++)t.push(e);return t}function OI(e,t,g){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tg(t),e[t]=g}function Yf(e,t){var g=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<g;){var n=31-tg(g),I=1<<n;t[n]=0,l[n]=-1,e[n]=-1,g&=~I}}function ds(e,t){var g=e.entangledLanes|=t;for(e=e.entanglements;g;){var l=31-tg(g),n=1<<l;n&t|e[l]&t&&(e[l]|=t),g&=~n}}var Ve=0;function om(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var rm,us,am,Cm,sm,Pa=!1,ci=[],_g=null,qg=null,$g=null,SI=new Map,VI=new Map,Lg=[],wf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mc(e,t){switch(e){case"focusin":case"focusout":_g=null;break;case"dragenter":case"dragleave":qg=null;break;case"mouseover":case"mouseout":$g=null;break;case"pointerover":case"pointerout":SI.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":VI.delete(t.pointerId)}}function Dn(e,t,g,l,n,I){return e===null||e.nativeEvent!==I?(e={blockedOn:t,domEventName:g,eventSystemFlags:l,nativeEvent:I,targetContainers:[n]},t!==null&&(t=_I(t),t!==null&&us(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Hf(e,t,g,l,n){switch(t){case"focusin":return _g=Dn(_g,e,t,g,l,n),!0;case"dragenter":return qg=Dn(qg,e,t,g,l,n),!0;case"mouseover":return $g=Dn($g,e,t,g,l,n),!0;case"pointerover":var I=n.pointerId;return SI.set(I,Dn(SI.get(I)||null,e,t,g,l,n)),!0;case"gotpointercapture":return I=n.pointerId,VI.set(I,Dn(VI.get(I)||null,e,t,g,l,n)),!0}return!1}function cm(e){var t=Sl(e.target);if(t!==null){var g=zl(t);if(g!==null){if(t=g.tag,t===13){if(t=em(g),t!==null){e.blockedOn=t,sm(e.priority,function(){am(g)});return}}else if(t===3&&g.stateNode.current.memoizedState.isDehydrated){e.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var g=_a(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(g===null){g=e.nativeEvent;var l=new g.constructor(g.type,g);Ua=l,g.target.dispatchEvent(l),Ua=null}else return t=_I(g),t!==null&&us(t),e.blockedOn=g,!1;t.shift()}return!0}function Lc(e,t,g){wi(e)&&g.delete(t)}function Nf(){Pa=!1,_g!==null&&wi(_g)&&(_g=null),qg!==null&&wi(qg)&&(qg=null),$g!==null&&wi($g)&&($g=null),SI.forEach(Lc),VI.forEach(Lc)}function On(e,t){e.blockedOn===t&&(e.blockedOn=null,Pa||(Pa=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,Nf)))}function WI(e){function t(n){return On(n,e)}if(0<ci.length){On(ci[0],e);for(var g=1;g<ci.length;g++){var l=ci[g];l.blockedOn===e&&(l.blockedOn=null)}}for(_g!==null&&On(_g,e),qg!==null&&On(qg,e),$g!==null&&On($g,e),SI.forEach(t),VI.forEach(t),g=0;g<Lg.length;g++)l=Lg[g],l.blockedOn===e&&(l.blockedOn=null);for(;0<Lg.length&&(g=Lg[0],g.blockedOn===null);)cm(g),g.blockedOn===null&&Lg.shift()}var An=Yg.ReactCurrentBatchConfig,to=!0;function Ff(e,t,g,l){var n=Ve,I=An.transition;An.transition=null;try{Ve=1,As(e,t,g,l)}finally{Ve=n,An.transition=I}}function Kf(e,t,g,l){var n=Ve,I=An.transition;An.transition=null;try{Ve=4,As(e,t,g,l)}finally{Ve=n,An.transition=I}}function As(e,t,g,l){if(to){var n=_a(e,t,g,l);if(n===null)qr(e,t,l,go,g),Mc(e,l);else if(Hf(n,e,t,g,l))l.stopPropagation();else if(Mc(e,l),t&4&&-1<wf.indexOf(e)){for(;n!==null;){var I=_I(n);if(I!==null&&rm(I),I=_a(e,t,g,l),I===null&&qr(e,t,l,go,g),I===n)break;n=I}n!==null&&l.stopPropagation()}else qr(e,t,l,null,g)}}var go=null;function _a(e,t,g,l){if(go=null,e=ss(l),e=Sl(e),e!==null)if(t=zl(e),t===null)e=null;else if(g=t.tag,g===13){if(e=em(t),e!==null)return e;e=null}else if(g===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return go=e,null}function dm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vf()){case cs:return 1;case nm:return 4;case $i:case Sf:return 16;case Im:return 536870912;default:return 16}default:return 16}}var jg=null,ms=null,Hi=null;function um(){if(Hi)return Hi;var e,t=ms,g=t.length,l,n="value"in jg?jg.value:jg.textContent,I=n.length;for(e=0;e<g&&t[e]===n[e];e++);var i=g-e;for(l=1;l<=i&&t[g-l]===n[I-l];l++);return Hi=n.slice(e,1<l?1-l:void 0)}function Ni(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function di(){return!0}function Uc(){return!1}function kt(e){function t(g,l,n,I,i){this._reactName=g,this._targetInst=n,this.type=l,this.nativeEvent=I,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(g=e[o],this[o]=g?g(I):I[o]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?di:Uc,this.isPropagationStopped=Uc,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),t}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hs=kt(Jn),PI=Me({},Jn,{view:0,detail:0}),xf=kt(PI),Mr,Lr,Pn,Lo=Me({},PI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pn&&(Pn&&e.type==="mousemove"?(Mr=e.screenX-Pn.screenX,Lr=e.screenY-Pn.screenY):Lr=Mr=0,Pn=e),Mr)},movementY:function(e){return"movementY"in e?e.movementY:Lr}}),Qc=kt(Lo),Ef=Me({},Lo,{dataTransfer:0}),zf=kt(Ef),Tf=Me({},PI,{relatedTarget:0}),Ur=kt(Tf),Mf=Me({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Lf=kt(Mf),Uf=Me({},Jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qf=kt(Uf),jf=Me({},Jn,{data:0}),jc=kt(jf),Df={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Of={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _f(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pf[e])?!!t[e]:!1}function bs(){return _f}var qf=Me({},PI,{key:function(e){if(e.key){var t=Df[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Of[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(e){return e.type==="keypress"?Ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$f=kt(qf),eZ=Me({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dc=kt(eZ),tZ=Me({},PI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),gZ=kt(tZ),lZ=Me({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),nZ=kt(lZ),IZ=Me({},Lo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iZ=kt(IZ),oZ=[9,13,27,32],ps=Wg&&"CompositionEvent"in window,uI=null;Wg&&"documentMode"in document&&(uI=document.documentMode);var rZ=Wg&&"TextEvent"in window&&!uI,Am=Wg&&(!ps||uI&&8<uI&&11>=uI),Oc=String.fromCharCode(32),Pc=!1;function mm(e,t){switch(e){case"keyup":return oZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tn=!1;function aZ(e,t){switch(e){case"compositionend":return hm(t);case"keypress":return t.which!==32?null:(Pc=!0,Oc);case"textInput":return e=t.data,e===Oc&&Pc?null:e;default:return null}}function CZ(e,t){if(tn)return e==="compositionend"||!ps&&mm(e,t)?(e=um(),Hi=ms=jg=null,tn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Am&&t.locale!=="ko"?null:t.data;default:return null}}var sZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sZ[e.type]:t==="textarea"}function bm(e,t,g,l){OA(l),t=lo(t,"onChange"),0<t.length&&(g=new hs("onChange","change",null,g,l),e.push({event:g,listeners:t}))}var AI=null,RI=null;function cZ(e){Rm(e,0)}function Uo(e){var t=nn(e);if(TA(t))return e}function dZ(e,t){if(e==="change")return t}var pm=!1;if(Wg){var Qr;if(Wg){var jr="oninput"in document;if(!jr){var qc=document.createElement("div");qc.setAttribute("oninput","return;"),jr=typeof qc.oninput=="function"}Qr=jr}else Qr=!1;pm=Qr&&(!document.documentMode||9<document.documentMode)}function $c(){AI&&(AI.detachEvent("onpropertychange",fm),RI=AI=null)}function fm(e){if(e.propertyName==="value"&&Uo(RI)){var t=[];bm(t,RI,e,ss(e)),$A(cZ,t)}}function uZ(e,t,g){e==="focusin"?($c(),AI=t,RI=g,AI.attachEvent("onpropertychange",fm)):e==="focusout"&&$c()}function AZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Uo(RI)}function mZ(e,t){if(e==="click")return Uo(t)}function hZ(e,t){if(e==="input"||e==="change")return Uo(t)}function bZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lg=typeof Object.is=="function"?Object.is:bZ;function XI(e,t){if(lg(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var g=Object.keys(e),l=Object.keys(t);if(g.length!==l.length)return!1;for(l=0;l<g.length;l++){var n=g[l];if(!Ya.call(t,n)||!lg(e[n],t[n]))return!1}return!0}function ed(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function td(e,t){var g=ed(e);e=0;for(var l;g;){if(g.nodeType===3){if(l=e+g.textContent.length,e<=t&&l>=t)return{node:g,offset:t-e};e=l}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=ed(g)}}function Zm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ym(){for(var e=window,t=Pi();t instanceof e.HTMLIFrameElement;){try{var g=typeof t.contentWindow.location.href=="string"}catch{g=!1}if(g)e=t.contentWindow;else break;t=Pi(e.document)}return t}function fs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pZ(e){var t=ym(),g=e.focusedElem,l=e.selectionRange;if(t!==g&&g&&g.ownerDocument&&Zm(g.ownerDocument.documentElement,g)){if(l!==null&&fs(g)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in g)g.selectionStart=t,g.selectionEnd=Math.min(e,g.value.length);else if(e=(t=g.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=g.textContent.length,I=Math.min(l.start,n);l=l.end===void 0?I:Math.min(l.end,n),!e.extend&&I>l&&(n=l,l=I,I=n),n=td(g,I);var i=td(g,l);n&&i&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),I>l?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=g;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<t.length;g++)e=t[g],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fZ=Wg&&"documentMode"in document&&11>=document.documentMode,gn=null,qa=null,mI=null,$a=!1;function gd(e,t,g){var l=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;$a||gn==null||gn!==Pi(l)||(l=gn,"selectionStart"in l&&fs(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),mI&&XI(mI,l)||(mI=l,l=lo(qa,"onSelect"),0<l.length&&(t=new hs("onSelect","select",null,t,g),e.push({event:t,listeners:l}),t.target=gn)))}function ui(e,t){var g={};return g[e.toLowerCase()]=t.toLowerCase(),g["Webkit"+e]="webkit"+t,g["Moz"+e]="moz"+t,g}var ln={animationend:ui("Animation","AnimationEnd"),animationiteration:ui("Animation","AnimationIteration"),animationstart:ui("Animation","AnimationStart"),transitionend:ui("Transition","TransitionEnd")},Dr={},Gm={};Wg&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete ln.animationend.animation,delete ln.animationiteration.animation,delete ln.animationstart.animation),"TransitionEvent"in window||delete ln.transitionend.transition);function Qo(e){if(Dr[e])return Dr[e];if(!ln[e])return e;var t=ln[e],g;for(g in t)if(t.hasOwnProperty(g)&&g in Gm)return Dr[e]=t[g];return e}var Bm=Qo("animationend"),vm=Qo("animationiteration"),Sm=Qo("animationstart"),Vm=Qo("transitionend"),Wm=new Map,ld="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cl(e,t){Wm.set(e,t),El(t,[e])}for(var Or=0;Or<ld.length;Or++){var Pr=ld[Or],ZZ=Pr.toLowerCase(),yZ=Pr[0].toUpperCase()+Pr.slice(1);Cl(ZZ,"on"+yZ)}Cl(Bm,"onAnimationEnd");Cl(vm,"onAnimationIteration");Cl(Sm,"onAnimationStart");Cl("dblclick","onDoubleClick");Cl("focusin","onFocus");Cl("focusout","onBlur");Cl(Vm,"onTransitionEnd");fn("onMouseEnter",["mouseout","mouseover"]);fn("onMouseLeave",["mouseout","mouseover"]);fn("onPointerEnter",["pointerout","pointerover"]);fn("onPointerLeave",["pointerout","pointerover"]);El("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));El("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));El("onBeforeInput",["compositionend","keypress","textInput","paste"]);El("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));El("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));El("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var CI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(CI));function nd(e,t,g){var l=e.type||"unknown-event";e.currentTarget=g,Zf(l,t,void 0,e),e.currentTarget=null}function Rm(e,t){t=(t&4)!==0;for(var g=0;g<e.length;g++){var l=e[g],n=l.event;l=l.listeners;e:{var I=void 0;if(t)for(var i=l.length-1;0<=i;i--){var o=l[i],r=o.instance,a=o.currentTarget;if(o=o.listener,r!==I&&n.isPropagationStopped())break e;nd(n,o,a),I=r}else for(i=0;i<l.length;i++){if(o=l[i],r=o.instance,a=o.currentTarget,o=o.listener,r!==I&&n.isPropagationStopped())break e;nd(n,o,a),I=r}}}if(qi)throw e=Da,qi=!1,Da=null,e}function we(e,t){var g=t[nC];g===void 0&&(g=t[nC]=new Set);var l=e+"__bubble";g.has(l)||(Xm(t,e,2,!1),g.add(l))}function _r(e,t,g){var l=0;t&&(l|=4),Xm(g,e,l,t)}var Ai="_reactListening"+Math.random().toString(36).slice(2);function kI(e){if(!e[Ai]){e[Ai]=!0,FA.forEach(function(g){g!=="selectionchange"&&(GZ.has(g)||_r(g,!1,e),_r(g,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ai]||(t[Ai]=!0,_r("selectionchange",!1,t))}}function Xm(e,t,g,l){switch(dm(t)){case 1:var n=Ff;break;case 4:n=Kf;break;default:n=As}g=n.bind(null,t,g,e),n=void 0,!ja||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(t,g,{capture:!0,passive:n}):e.addEventListener(t,g,!0):n!==void 0?e.addEventListener(t,g,{passive:n}):e.addEventListener(t,g,!1)}function qr(e,t,g,l,n){var I=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var i=l.tag;if(i===3||i===4){var o=l.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(i===4)for(i=l.return;i!==null;){var r=i.tag;if((r===3||r===4)&&(r=i.stateNode.containerInfo,r===n||r.nodeType===8&&r.parentNode===n))return;i=i.return}for(;o!==null;){if(i=Sl(o),i===null)return;if(r=i.tag,r===5||r===6){l=I=i;continue e}o=o.parentNode}}l=l.return}$A(function(){var a=I,c=ss(g),s=[];e:{var d=Wm.get(e);if(d!==void 0){var A=hs,f=e;switch(e){case"keypress":if(Ni(g)===0)break e;case"keydown":case"keyup":A=$f;break;case"focusin":f="focus",A=Ur;break;case"focusout":f="blur",A=Ur;break;case"beforeblur":case"afterblur":A=Ur;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=gZ;break;case Bm:case vm:case Sm:A=Lf;break;case Vm:A=nZ;break;case"scroll":A=xf;break;case"wheel":A=iZ;break;case"copy":case"cut":case"paste":A=Qf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Dc}var p=(t&4)!==0,Z=!p&&e==="scroll",m=p?d!==null?d+"Capture":null:d;p=[];for(var u=a,h;u!==null;){h=u;var b=h.stateNode;if(h.tag===5&&b!==null&&(h=b,m!==null&&(b=vI(u,m),b!=null&&p.push(JI(u,b,h)))),Z)break;u=u.return}0<p.length&&(d=new A(d,f,null,g,c),s.push({event:d,listeners:p}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",d&&g!==Ua&&(f=g.relatedTarget||g.fromElement)&&(Sl(f)||f[Rg]))break e;if((A||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,A?(f=g.relatedTarget||g.toElement,A=a,f=f?Sl(f):null,f!==null&&(Z=zl(f),f!==Z||f.tag!==5&&f.tag!==6)&&(f=null)):(A=null,f=a),A!==f)){if(p=Qc,b="onMouseLeave",m="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(p=Dc,b="onPointerLeave",m="onPointerEnter",u="pointer"),Z=A==null?d:nn(A),h=f==null?d:nn(f),d=new p(b,u+"leave",A,g,c),d.target=Z,d.relatedTarget=h,b=null,Sl(c)===a&&(p=new p(m,u+"enter",f,g,c),p.target=h,p.relatedTarget=Z,b=p),Z=b,A&&f)t:{for(p=A,m=f,u=0,h=p;h;h=Ml(h))u++;for(h=0,b=m;b;b=Ml(b))h++;for(;0<u-h;)p=Ml(p),u--;for(;0<h-u;)m=Ml(m),h--;for(;u--;){if(p===m||m!==null&&p===m.alternate)break t;p=Ml(p),m=Ml(m)}p=null}else p=null;A!==null&&Id(s,d,A,p,!1),f!==null&&Z!==null&&Id(s,Z,f,p,!0)}}e:{if(d=a?nn(a):window,A=d.nodeName&&d.nodeName.toLowerCase(),A==="select"||A==="input"&&d.type==="file")var y=dZ;else if(_c(d))if(pm)y=hZ;else{y=AZ;var V=uZ}else(A=d.nodeName)&&A.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(y=mZ);if(y&&(y=y(e,a))){bm(s,y,g,c);break e}V&&V(e,d,a),e==="focusout"&&(V=d._wrapperState)&&V.controlled&&d.type==="number"&&Ea(d,"number",d.value)}switch(V=a?nn(a):window,e){case"focusin":(_c(V)||V.contentEditable==="true")&&(gn=V,qa=a,mI=null);break;case"focusout":mI=qa=gn=null;break;case"mousedown":$a=!0;break;case"contextmenu":case"mouseup":case"dragend":$a=!1,gd(s,g,c);break;case"selectionchange":if(fZ)break;case"keydown":case"keyup":gd(s,g,c)}var v;if(ps)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else tn?mm(e,g)&&(S="onCompositionEnd"):e==="keydown"&&g.keyCode===229&&(S="onCompositionStart");S&&(Am&&g.locale!=="ko"&&(tn||S!=="onCompositionStart"?S==="onCompositionEnd"&&tn&&(v=um()):(jg=c,ms="value"in jg?jg.value:jg.textContent,tn=!0)),V=lo(a,S),0<V.length&&(S=new jc(S,e,null,g,c),s.push({event:S,listeners:V}),v?S.data=v:(v=hm(g),v!==null&&(S.data=v)))),(v=rZ?aZ(e,g):CZ(e,g))&&(a=lo(a,"onBeforeInput"),0<a.length&&(c=new jc("onBeforeInput","beforeinput",null,g,c),s.push({event:c,listeners:a}),c.data=v))}Rm(s,t)})}function JI(e,t,g){return{instance:e,listener:t,currentTarget:g}}function lo(e,t){for(var g=t+"Capture",l=[];e!==null;){var n=e,I=n.stateNode;n.tag===5&&I!==null&&(n=I,I=vI(e,g),I!=null&&l.unshift(JI(e,I,n)),I=vI(e,t),I!=null&&l.push(JI(e,I,n))),e=e.return}return l}function Ml(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Id(e,t,g,l,n){for(var I=t._reactName,i=[];g!==null&&g!==l;){var o=g,r=o.alternate,a=o.stateNode;if(r!==null&&r===l)break;o.tag===5&&a!==null&&(o=a,n?(r=vI(g,I),r!=null&&i.unshift(JI(g,r,o))):n||(r=vI(g,I),r!=null&&i.push(JI(g,r,o)))),g=g.return}i.length!==0&&e.push({event:t,listeners:i})}var BZ=/\r\n?/g,vZ=/\u0000|\uFFFD/g;function id(e){return(typeof e=="string"?e:""+e).replace(BZ,`
`).replace(vZ,"")}function mi(e,t,g){if(t=id(t),id(e)!==t&&g)throw Error(ee(425))}function no(){}var eC=null,tC=null;function gC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lC=typeof setTimeout=="function"?setTimeout:void 0,SZ=typeof clearTimeout=="function"?clearTimeout:void 0,od=typeof Promise=="function"?Promise:void 0,VZ=typeof queueMicrotask=="function"?queueMicrotask:typeof od<"u"?function(e){return od.resolve(null).then(e).catch(WZ)}:lC;function WZ(e){setTimeout(function(){throw e})}function $r(e,t){var g=t,l=0;do{var n=g.nextSibling;if(e.removeChild(g),n&&n.nodeType===8)if(g=n.data,g==="/$"){if(l===0){e.removeChild(n),WI(t);return}l--}else g!=="$"&&g!=="$?"&&g!=="$!"||l++;g=n}while(g);WI(t)}function el(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var g=e.data;if(g==="$"||g==="$!"||g==="$?"){if(t===0)return e;t--}else g==="/$"&&t++}e=e.previousSibling}return null}var Yn=Math.random().toString(36).slice(2),sg="__reactFiber$"+Yn,YI="__reactProps$"+Yn,Rg="__reactContainer$"+Yn,nC="__reactEvents$"+Yn,RZ="__reactListeners$"+Yn,XZ="__reactHandles$"+Yn;function Sl(e){var t=e[sg];if(t)return t;for(var g=e.parentNode;g;){if(t=g[Rg]||g[sg]){if(g=t.alternate,t.child!==null||g!==null&&g.child!==null)for(e=rd(e);e!==null;){if(g=e[sg])return g;e=rd(e)}return t}e=g,g=e.parentNode}return null}function _I(e){return e=e[sg]||e[Rg],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function jo(e){return e[YI]||null}var IC=[],In=-1;function sl(e){return{current:e}}function Ne(e){0>In||(e.current=IC[In],IC[In]=null,In--)}function Je(e,t){In++,IC[In]=e.current,e.current=t}var ol={},ct=sl(ol),yt=sl(!1),wl=ol;function Zn(e,t){var g=e.type.contextTypes;if(!g)return ol;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var n={},I;for(I in g)n[I]=t[I];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Gt(e){return e=e.childContextTypes,e!=null}function Io(){Ne(yt),Ne(ct)}function ad(e,t,g){if(ct.current!==ol)throw Error(ee(168));Je(ct,t),Je(yt,g)}function km(e,t,g){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return g;l=l.getChildContext();for(var n in l)if(!(n in t))throw Error(ee(108,uf(e)||"Unknown",n));return Me({},g,l)}function io(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ol,wl=ct.current,Je(ct,e),Je(yt,yt.current),!0}function Cd(e,t,g){var l=e.stateNode;if(!l)throw Error(ee(169));g?(e=km(e,t,wl),l.__reactInternalMemoizedMergedChildContext=e,Ne(yt),Ne(ct),Je(ct,e)):Ne(yt),Je(yt,g)}var Gg=null,Do=!1,ea=!1;function Jm(e){Gg===null?Gg=[e]:Gg.push(e)}function kZ(e){Do=!0,Jm(e)}function cl(){if(!ea&&Gg!==null){ea=!0;var e=0,t=Ve;try{var g=Gg;for(Ve=1;e<g.length;e++){var l=g[e];do l=l(!0);while(l!==null)}Gg=null,Do=!1}catch(n){throw Gg!==null&&(Gg=Gg.slice(e+1)),lm(cs,cl),n}finally{Ve=t,ea=!1}}return null}var on=[],rn=0,oo=null,ro=0,Ft=[],Kt=0,Hl=null,Bg=1,vg="";function Zl(e,t){on[rn++]=ro,on[rn++]=oo,oo=e,ro=t}function Ym(e,t,g){Ft[Kt++]=Bg,Ft[Kt++]=vg,Ft[Kt++]=Hl,Hl=e;var l=Bg;e=vg;var n=32-tg(l)-1;l&=~(1<<n),g+=1;var I=32-tg(t)+n;if(30<I){var i=n-n%5;I=(l&(1<<i)-1).toString(32),l>>=i,n-=i,Bg=1<<32-tg(t)+n|g<<n|l,vg=I+e}else Bg=1<<I|g<<n|l,vg=e}function Zs(e){e.return!==null&&(Zl(e,1),Ym(e,1,0))}function ys(e){for(;e===oo;)oo=on[--rn],on[rn]=null,ro=on[--rn],on[rn]=null;for(;e===Hl;)Hl=Ft[--Kt],Ft[Kt]=null,vg=Ft[--Kt],Ft[Kt]=null,Bg=Ft[--Kt],Ft[Kt]=null}var Wt=null,Vt=null,Ke=!1,qt=null;function wm(e,t){var g=Et(5,null,null,0);g.elementType="DELETED",g.stateNode=t,g.return=e,t=e.deletions,t===null?(e.deletions=[g],e.flags|=16):t.push(g)}function sd(e,t){switch(e.tag){case 5:var g=e.type;return t=t.nodeType!==1||g.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wt=e,Vt=el(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wt=e,Vt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(g=Hl!==null?{id:Bg,overflow:vg}:null,e.memoizedState={dehydrated:t,treeContext:g,retryLane:1073741824},g=Et(18,null,null,0),g.stateNode=t,g.return=e,e.child=g,Wt=e,Vt=null,!0):!1;default:return!1}}function iC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oC(e){if(Ke){var t=Vt;if(t){var g=t;if(!sd(e,t)){if(iC(e))throw Error(ee(418));t=el(g.nextSibling);var l=Wt;t&&sd(e,t)?wm(l,g):(e.flags=e.flags&-4097|2,Ke=!1,Wt=e)}}else{if(iC(e))throw Error(ee(418));e.flags=e.flags&-4097|2,Ke=!1,Wt=e}}}function cd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wt=e}function hi(e){if(e!==Wt)return!1;if(!Ke)return cd(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gC(e.type,e.memoizedProps)),t&&(t=Vt)){if(iC(e))throw Hm(),Error(ee(418));for(;t;)wm(e,t),t=el(t.nextSibling)}if(cd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var g=e.data;if(g==="/$"){if(t===0){Vt=el(e.nextSibling);break e}t--}else g!=="$"&&g!=="$!"&&g!=="$?"||t++}e=e.nextSibling}Vt=null}}else Vt=Wt?el(e.stateNode.nextSibling):null;return!0}function Hm(){for(var e=Vt;e;)e=el(e.nextSibling)}function yn(){Vt=Wt=null,Ke=!1}function Gs(e){qt===null?qt=[e]:qt.push(e)}var JZ=Yg.ReactCurrentBatchConfig;function Pt(e,t){if(e&&e.defaultProps){t=Me({},t),e=e.defaultProps;for(var g in e)t[g]===void 0&&(t[g]=e[g]);return t}return t}var ao=sl(null),Co=null,an=null,Bs=null;function vs(){Bs=an=Co=null}function Ss(e){var t=ao.current;Ne(ao),e._currentValue=t}function rC(e,t,g){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===g)break;e=e.return}}function mn(e,t){Co=e,Bs=an=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zt=!0),e.firstContext=null)}function Mt(e){var t=e._currentValue;if(Bs!==e)if(e={context:e,memoizedValue:t,next:null},an===null){if(Co===null)throw Error(ee(308));an=e,Co.dependencies={lanes:0,firstContext:e}}else an=an.next=e;return t}var Vl=null;function Vs(e){Vl===null?Vl=[e]:Vl.push(e)}function Nm(e,t,g,l){var n=t.interleaved;return n===null?(g.next=g,Vs(t)):(g.next=n.next,n.next=g),t.interleaved=g,Xg(e,l)}function Xg(e,t){e.lanes|=t;var g=e.alternate;for(g!==null&&(g.lanes|=t),g=e,e=e.return;e!==null;)e.childLanes|=t,g=e.alternate,g!==null&&(g.childLanes|=t),g=e,e=e.return;return g.tag===3?g.stateNode:null}var zg=!1;function Ws(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tl(e,t,g){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,ye&2){var n=l.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),l.pending=t,Xg(e,g)}return n=l.interleaved,n===null?(t.next=t,Vs(l)):(t.next=n.next,n.next=t),l.interleaved=t,Xg(e,g)}function Fi(e,t,g){if(t=t.updateQueue,t!==null&&(t=t.shared,(g&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,g|=l,t.lanes=g,ds(e,g)}}function dd(e,t){var g=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,g===l)){var n=null,I=null;if(g=g.firstBaseUpdate,g!==null){do{var i={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};I===null?n=I=i:I=I.next=i,g=g.next}while(g!==null);I===null?n=I=t:I=I.next=t}else n=I=t;g={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:I,shared:l.shared,effects:l.effects},e.updateQueue=g;return}e=g.lastBaseUpdate,e===null?g.firstBaseUpdate=t:e.next=t,g.lastBaseUpdate=t}function so(e,t,g,l){var n=e.updateQueue;zg=!1;var I=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var r=o,a=r.next;r.next=null,i===null?I=a:i.next=a,i=r;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==i&&(o===null?c.firstBaseUpdate=a:o.next=a,c.lastBaseUpdate=r))}if(I!==null){var s=n.baseState;i=0,c=a=r=null,o=I;do{var d=o.lane,A=o.eventTime;if((l&d)===d){c!==null&&(c=c.next={eventTime:A,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,p=o;switch(d=t,A=g,p.tag){case 1:if(f=p.payload,typeof f=="function"){s=f.call(A,s,d);break e}s=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=p.payload,d=typeof f=="function"?f.call(A,s,d):f,d==null)break e;s=Me({},s,d);break e;case 2:zg=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=n.effects,d===null?n.effects=[o]:d.push(o))}else A={eventTime:A,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(a=c=A,r=s):c=c.next=A,i|=d;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;d=o,o=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(1);if(c===null&&(r=s),n.baseState=r,n.firstBaseUpdate=a,n.lastBaseUpdate=c,t=n.shared.interleaved,t!==null){n=t;do i|=n.lane,n=n.next;while(n!==t)}else I===null&&(n.shared.lanes=0);Fl|=i,e.lanes=i,e.memoizedState=s}}function ud(e,t,g){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],n=l.callback;if(n!==null){if(l.callback=null,l=g,typeof n!="function")throw Error(ee(191,n));n.call(l)}}}var Km=new NA.Component().refs;function aC(e,t,g,l){t=e.memoizedState,g=g(l,t),g=g==null?t:Me({},t,g),e.memoizedState=g,e.lanes===0&&(e.updateQueue.baseState=g)}var Oo={isMounted:function(e){return(e=e._reactInternals)?zl(e)===e:!1},enqueueSetState:function(e,t,g){e=e._reactInternals;var l=mt(),n=ll(e),I=Sg(l,n);I.payload=t,g!=null&&(I.callback=g),t=tl(e,I,n),t!==null&&(gg(t,e,n,l),Fi(t,e,n))},enqueueReplaceState:function(e,t,g){e=e._reactInternals;var l=mt(),n=ll(e),I=Sg(l,n);I.tag=1,I.payload=t,g!=null&&(I.callback=g),t=tl(e,I,n),t!==null&&(gg(t,e,n,l),Fi(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var g=mt(),l=ll(e),n=Sg(g,l);n.tag=2,t!=null&&(n.callback=t),t=tl(e,n,l),t!==null&&(gg(t,e,l,g),Fi(t,e,l))}};function Ad(e,t,g,l,n,I,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,I,i):t.prototype&&t.prototype.isPureReactComponent?!XI(g,l)||!XI(n,I):!0}function xm(e,t,g){var l=!1,n=ol,I=t.contextType;return typeof I=="object"&&I!==null?I=Mt(I):(n=Gt(t)?wl:ct.current,l=t.contextTypes,I=(l=l!=null)?Zn(e,n):ol),t=new t(g,I),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Oo,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=I),t}function md(e,t,g,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(g,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(g,l),t.state!==e&&Oo.enqueueReplaceState(t,t.state,null)}function CC(e,t,g,l){var n=e.stateNode;n.props=g,n.state=e.memoizedState,n.refs=Km,Ws(e);var I=t.contextType;typeof I=="object"&&I!==null?n.context=Mt(I):(I=Gt(t)?wl:ct.current,n.context=Zn(e,I)),n.state=e.memoizedState,I=t.getDerivedStateFromProps,typeof I=="function"&&(aC(e,t,I,g),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Oo.enqueueReplaceState(n,n.state,null),so(e,g,n,l),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function _n(e,t,g){if(e=g.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(ee(309));var l=g.stateNode}if(!l)throw Error(ee(147,e));var n=l,I=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===I?t.ref:(t=function(i){var o=n.refs;o===Km&&(o=n.refs={}),i===null?delete o[I]:o[I]=i},t._stringRef=I,t)}if(typeof e!="string")throw Error(ee(284));if(!g._owner)throw Error(ee(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hd(e){var t=e._init;return t(e._payload)}function Em(e){function t(m,u){if(e){var h=m.deletions;h===null?(m.deletions=[u],m.flags|=16):h.push(u)}}function g(m,u){if(!e)return null;for(;u!==null;)t(m,u),u=u.sibling;return null}function l(m,u){for(m=new Map;u!==null;)u.key!==null?m.set(u.key,u):m.set(u.index,u),u=u.sibling;return m}function n(m,u){return m=nl(m,u),m.index=0,m.sibling=null,m}function I(m,u,h){return m.index=h,e?(h=m.alternate,h!==null?(h=h.index,h<u?(m.flags|=2,u):h):(m.flags|=2,u)):(m.flags|=1048576,u)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function o(m,u,h,b){return u===null||u.tag!==6?(u=oa(h,m.mode,b),u.return=m,u):(u=n(u,h),u.return=m,u)}function r(m,u,h,b){var y=h.type;return y===en?c(m,u,h.props.children,b,h.key):u!==null&&(u.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Eg&&hd(y)===u.type)?(b=n(u,h.props),b.ref=_n(m,u,h),b.return=m,b):(b=Mi(h.type,h.key,h.props,null,m.mode,b),b.ref=_n(m,u,h),b.return=m,b)}function a(m,u,h,b){return u===null||u.tag!==4||u.stateNode.containerInfo!==h.containerInfo||u.stateNode.implementation!==h.implementation?(u=ra(h,m.mode,b),u.return=m,u):(u=n(u,h.children||[]),u.return=m,u)}function c(m,u,h,b,y){return u===null||u.tag!==7?(u=kl(h,m.mode,b,y),u.return=m,u):(u=n(u,h),u.return=m,u)}function s(m,u,h){if(typeof u=="string"&&u!==""||typeof u=="number")return u=oa(""+u,m.mode,h),u.return=m,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case oi:return h=Mi(u.type,u.key,u.props,null,m.mode,h),h.ref=_n(m,null,u),h.return=m,h;case $l:return u=ra(u,m.mode,h),u.return=m,u;case Eg:var b=u._init;return s(m,b(u._payload),h)}if(rI(u)||Qn(u))return u=kl(u,m.mode,h,null),u.return=m,u;bi(m,u)}return null}function d(m,u,h,b){var y=u!==null?u.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return y!==null?null:o(m,u,""+h,b);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case oi:return h.key===y?r(m,u,h,b):null;case $l:return h.key===y?a(m,u,h,b):null;case Eg:return y=h._init,d(m,u,y(h._payload),b)}if(rI(h)||Qn(h))return y!==null?null:c(m,u,h,b,null);bi(m,h)}return null}function A(m,u,h,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(h)||null,o(u,m,""+b,y);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case oi:return m=m.get(b.key===null?h:b.key)||null,r(u,m,b,y);case $l:return m=m.get(b.key===null?h:b.key)||null,a(u,m,b,y);case Eg:var V=b._init;return A(m,u,h,V(b._payload),y)}if(rI(b)||Qn(b))return m=m.get(h)||null,c(u,m,b,y,null);bi(u,b)}return null}function f(m,u,h,b){for(var y=null,V=null,v=u,S=u=0,X=null;v!==null&&S<h.length;S++){v.index>S?(X=v,v=null):X=v.sibling;var G=d(m,v,h[S],b);if(G===null){v===null&&(v=X);break}e&&v&&G.alternate===null&&t(m,v),u=I(G,u,S),V===null?y=G:V.sibling=G,V=G,v=X}if(S===h.length)return g(m,v),Ke&&Zl(m,S),y;if(v===null){for(;S<h.length;S++)v=s(m,h[S],b),v!==null&&(u=I(v,u,S),V===null?y=v:V.sibling=v,V=v);return Ke&&Zl(m,S),y}for(v=l(m,v);S<h.length;S++)X=A(v,m,S,h[S],b),X!==null&&(e&&X.alternate!==null&&v.delete(X.key===null?S:X.key),u=I(X,u,S),V===null?y=X:V.sibling=X,V=X);return e&&v.forEach(function(B){return t(m,B)}),Ke&&Zl(m,S),y}function p(m,u,h,b){var y=Qn(h);if(typeof y!="function")throw Error(ee(150));if(h=y.call(h),h==null)throw Error(ee(151));for(var V=y=null,v=u,S=u=0,X=null,G=h.next();v!==null&&!G.done;S++,G=h.next()){v.index>S?(X=v,v=null):X=v.sibling;var B=d(m,v,G.value,b);if(B===null){v===null&&(v=X);break}e&&v&&B.alternate===null&&t(m,v),u=I(B,u,S),V===null?y=B:V.sibling=B,V=B,v=X}if(G.done)return g(m,v),Ke&&Zl(m,S),y;if(v===null){for(;!G.done;S++,G=h.next())G=s(m,G.value,b),G!==null&&(u=I(G,u,S),V===null?y=G:V.sibling=G,V=G);return Ke&&Zl(m,S),y}for(v=l(m,v);!G.done;S++,G=h.next())G=A(v,m,S,G.value,b),G!==null&&(e&&G.alternate!==null&&v.delete(G.key===null?S:G.key),u=I(G,u,S),V===null?y=G:V.sibling=G,V=G);return e&&v.forEach(function(W){return t(m,W)}),Ke&&Zl(m,S),y}function Z(m,u,h,b){if(typeof h=="object"&&h!==null&&h.type===en&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case oi:e:{for(var y=h.key,V=u;V!==null;){if(V.key===y){if(y=h.type,y===en){if(V.tag===7){g(m,V.sibling),u=n(V,h.props.children),u.return=m,m=u;break e}}else if(V.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Eg&&hd(y)===V.type){g(m,V.sibling),u=n(V,h.props),u.ref=_n(m,V,h),u.return=m,m=u;break e}g(m,V);break}else t(m,V);V=V.sibling}h.type===en?(u=kl(h.props.children,m.mode,b,h.key),u.return=m,m=u):(b=Mi(h.type,h.key,h.props,null,m.mode,b),b.ref=_n(m,u,h),b.return=m,m=b)}return i(m);case $l:e:{for(V=h.key;u!==null;){if(u.key===V)if(u.tag===4&&u.stateNode.containerInfo===h.containerInfo&&u.stateNode.implementation===h.implementation){g(m,u.sibling),u=n(u,h.children||[]),u.return=m,m=u;break e}else{g(m,u);break}else t(m,u);u=u.sibling}u=ra(h,m.mode,b),u.return=m,m=u}return i(m);case Eg:return V=h._init,Z(m,u,V(h._payload),b)}if(rI(h))return f(m,u,h,b);if(Qn(h))return p(m,u,h,b);bi(m,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,u!==null&&u.tag===6?(g(m,u.sibling),u=n(u,h),u.return=m,m=u):(g(m,u),u=oa(h,m.mode,b),u.return=m,m=u),i(m)):g(m,u)}return Z}var Gn=Em(!0),zm=Em(!1),qI={},hg=sl(qI),wI=sl(qI),HI=sl(qI);function Wl(e){if(e===qI)throw Error(ee(174));return e}function Rs(e,t){switch(Je(HI,t),Je(wI,e),Je(hg,qI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ta(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ta(t,e)}Ne(hg),Je(hg,t)}function Bn(){Ne(hg),Ne(wI),Ne(HI)}function Tm(e){Wl(HI.current);var t=Wl(hg.current),g=Ta(t,e.type);t!==g&&(Je(wI,e),Je(hg,g))}function Xs(e){wI.current===e&&(Ne(hg),Ne(wI))}var xe=sl(0);function co(e){for(var t=e;t!==null;){if(t.tag===13){var g=t.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function ks(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var Ki=Yg.ReactCurrentDispatcher,ga=Yg.ReactCurrentBatchConfig,Nl=0,ze=null,qe=null,tt=null,uo=!1,hI=!1,NI=0,YZ=0;function at(){throw Error(ee(321))}function Js(e,t){if(t===null)return!1;for(var g=0;g<t.length&&g<e.length;g++)if(!lg(e[g],t[g]))return!1;return!0}function Ys(e,t,g,l,n,I){if(Nl=I,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ki.current=e===null||e.memoizedState===null?FZ:KZ,e=g(l,n),hI){I=0;do{if(hI=!1,NI=0,25<=I)throw Error(ee(301));I+=1,tt=qe=null,t.updateQueue=null,Ki.current=xZ,e=g(l,n)}while(hI)}if(Ki.current=Ao,t=qe!==null&&qe.next!==null,Nl=0,tt=qe=ze=null,uo=!1,t)throw Error(ee(300));return e}function ws(){var e=NI!==0;return NI=0,e}function Cg(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?ze.memoizedState=tt=e:tt=tt.next=e,tt}function Lt(){if(qe===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=tt===null?ze.memoizedState:tt.next;if(t!==null)tt=t,qe=e;else{if(e===null)throw Error(ee(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},tt===null?ze.memoizedState=tt=e:tt=tt.next=e}return tt}function FI(e,t){return typeof t=="function"?t(e):t}function la(e){var t=Lt(),g=t.queue;if(g===null)throw Error(ee(311));g.lastRenderedReducer=e;var l=qe,n=l.baseQueue,I=g.pending;if(I!==null){if(n!==null){var i=n.next;n.next=I.next,I.next=i}l.baseQueue=n=I,g.pending=null}if(n!==null){I=n.next,l=l.baseState;var o=i=null,r=null,a=I;do{var c=a.lane;if((Nl&c)===c)r!==null&&(r=r.next={lane:0,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null}),l=a.hasEagerState?a.eagerState:e(l,a.action);else{var s={lane:c,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null};r===null?(o=r=s,i=l):r=r.next=s,ze.lanes|=c,Fl|=c}a=a.next}while(a!==null&&a!==I);r===null?i=l:r.next=o,lg(l,t.memoizedState)||(Zt=!0),t.memoizedState=l,t.baseState=i,t.baseQueue=r,g.lastRenderedState=l}if(e=g.interleaved,e!==null){n=e;do I=n.lane,ze.lanes|=I,Fl|=I,n=n.next;while(n!==e)}else n===null&&(g.lanes=0);return[t.memoizedState,g.dispatch]}function na(e){var t=Lt(),g=t.queue;if(g===null)throw Error(ee(311));g.lastRenderedReducer=e;var l=g.dispatch,n=g.pending,I=t.memoizedState;if(n!==null){g.pending=null;var i=n=n.next;do I=e(I,i.action),i=i.next;while(i!==n);lg(I,t.memoizedState)||(Zt=!0),t.memoizedState=I,t.baseQueue===null&&(t.baseState=I),g.lastRenderedState=I}return[I,l]}function Mm(){}function Lm(e,t){var g=ze,l=Lt(),n=t(),I=!lg(l.memoizedState,n);if(I&&(l.memoizedState=n,Zt=!0),l=l.queue,Hs(jm.bind(null,g,l,e),[e]),l.getSnapshot!==t||I||tt!==null&&tt.memoizedState.tag&1){if(g.flags|=2048,KI(9,Qm.bind(null,g,l,n,t),void 0,null),gt===null)throw Error(ee(349));Nl&30||Um(g,t,n)}return n}function Um(e,t,g){e.flags|=16384,e={getSnapshot:t,value:g},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(g=t.stores,g===null?t.stores=[e]:g.push(e))}function Qm(e,t,g,l){t.value=g,t.getSnapshot=l,Dm(t)&&Om(e)}function jm(e,t,g){return g(function(){Dm(t)&&Om(e)})}function Dm(e){var t=e.getSnapshot;e=e.value;try{var g=t();return!lg(e,g)}catch{return!0}}function Om(e){var t=Xg(e,1);t!==null&&gg(t,e,1,-1)}function bd(e){var t=Cg();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:FI,lastRenderedState:e},t.queue=e,e=e.dispatch=NZ.bind(null,ze,e),[t.memoizedState,e]}function KI(e,t,g,l){return e={tag:e,create:t,destroy:g,deps:l,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(g=t.lastEffect,g===null?t.lastEffect=e.next=e:(l=g.next,g.next=e,e.next=l,t.lastEffect=e)),e}function Pm(){return Lt().memoizedState}function xi(e,t,g,l){var n=Cg();ze.flags|=e,n.memoizedState=KI(1|t,g,void 0,l===void 0?null:l)}function Po(e,t,g,l){var n=Lt();l=l===void 0?null:l;var I=void 0;if(qe!==null){var i=qe.memoizedState;if(I=i.destroy,l!==null&&Js(l,i.deps)){n.memoizedState=KI(t,g,I,l);return}}ze.flags|=e,n.memoizedState=KI(1|t,g,I,l)}function pd(e,t){return xi(8390656,8,e,t)}function Hs(e,t){return Po(2048,8,e,t)}function _m(e,t){return Po(4,2,e,t)}function qm(e,t){return Po(4,4,e,t)}function $m(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eh(e,t,g){return g=g!=null?g.concat([e]):null,Po(4,4,$m.bind(null,t,e),g)}function Ns(){}function th(e,t){var g=Lt();t=t===void 0?null:t;var l=g.memoizedState;return l!==null&&t!==null&&Js(t,l[1])?l[0]:(g.memoizedState=[e,t],e)}function gh(e,t){var g=Lt();t=t===void 0?null:t;var l=g.memoizedState;return l!==null&&t!==null&&Js(t,l[1])?l[0]:(e=e(),g.memoizedState=[e,t],e)}function lh(e,t,g){return Nl&21?(lg(g,t)||(g=im(),ze.lanes|=g,Fl|=g,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zt=!0),e.memoizedState=g)}function wZ(e,t){var g=Ve;Ve=g!==0&&4>g?g:4,e(!0);var l=ga.transition;ga.transition={};try{e(!1),t()}finally{Ve=g,ga.transition=l}}function nh(){return Lt().memoizedState}function HZ(e,t,g){var l=ll(e);if(g={lane:l,action:g,hasEagerState:!1,eagerState:null,next:null},Ih(e))ih(t,g);else if(g=Nm(e,t,g,l),g!==null){var n=mt();gg(g,e,l,n),oh(g,t,l)}}function NZ(e,t,g){var l=ll(e),n={lane:l,action:g,hasEagerState:!1,eagerState:null,next:null};if(Ih(e))ih(t,n);else{var I=e.alternate;if(e.lanes===0&&(I===null||I.lanes===0)&&(I=t.lastRenderedReducer,I!==null))try{var i=t.lastRenderedState,o=I(i,g);if(n.hasEagerState=!0,n.eagerState=o,lg(o,i)){var r=t.interleaved;r===null?(n.next=n,Vs(t)):(n.next=r.next,r.next=n),t.interleaved=n;return}}catch{}finally{}g=Nm(e,t,n,l),g!==null&&(n=mt(),gg(g,e,l,n),oh(g,t,l))}}function Ih(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function ih(e,t){hI=uo=!0;var g=e.pending;g===null?t.next=t:(t.next=g.next,g.next=t),e.pending=t}function oh(e,t,g){if(g&4194240){var l=t.lanes;l&=e.pendingLanes,g|=l,t.lanes=g,ds(e,g)}}var Ao={readContext:Mt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},FZ={readContext:Mt,useCallback:function(e,t){return Cg().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:pd,useImperativeHandle:function(e,t,g){return g=g!=null?g.concat([e]):null,xi(4194308,4,$m.bind(null,t,e),g)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){return xi(4,2,e,t)},useMemo:function(e,t){var g=Cg();return t=t===void 0?null:t,e=e(),g.memoizedState=[e,t],e},useReducer:function(e,t,g){var l=Cg();return t=g!==void 0?g(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=HZ.bind(null,ze,e),[l.memoizedState,e]},useRef:function(e){var t=Cg();return e={current:e},t.memoizedState=e},useState:bd,useDebugValue:Ns,useDeferredValue:function(e){return Cg().memoizedState=e},useTransition:function(){var e=bd(!1),t=e[0];return e=wZ.bind(null,e[1]),Cg().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,g){var l=ze,n=Cg();if(Ke){if(g===void 0)throw Error(ee(407));g=g()}else{if(g=t(),gt===null)throw Error(ee(349));Nl&30||Um(l,t,g)}n.memoizedState=g;var I={value:g,getSnapshot:t};return n.queue=I,pd(jm.bind(null,l,I,e),[e]),l.flags|=2048,KI(9,Qm.bind(null,l,I,g,t),void 0,null),g},useId:function(){var e=Cg(),t=gt.identifierPrefix;if(Ke){var g=vg,l=Bg;g=(l&~(1<<32-tg(l)-1)).toString(32)+g,t=":"+t+"R"+g,g=NI++,0<g&&(t+="H"+g.toString(32)),t+=":"}else g=YZ++,t=":"+t+"r"+g.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},KZ={readContext:Mt,useCallback:th,useContext:Mt,useEffect:Hs,useImperativeHandle:eh,useInsertionEffect:_m,useLayoutEffect:qm,useMemo:gh,useReducer:la,useRef:Pm,useState:function(){return la(FI)},useDebugValue:Ns,useDeferredValue:function(e){var t=Lt();return lh(t,qe.memoizedState,e)},useTransition:function(){var e=la(FI)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:Mm,useSyncExternalStore:Lm,useId:nh,unstable_isNewReconciler:!1},xZ={readContext:Mt,useCallback:th,useContext:Mt,useEffect:Hs,useImperativeHandle:eh,useInsertionEffect:_m,useLayoutEffect:qm,useMemo:gh,useReducer:na,useRef:Pm,useState:function(){return na(FI)},useDebugValue:Ns,useDeferredValue:function(e){var t=Lt();return qe===null?t.memoizedState=e:lh(t,qe.memoizedState,e)},useTransition:function(){var e=na(FI)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:Mm,useSyncExternalStore:Lm,useId:nh,unstable_isNewReconciler:!1};function vn(e,t){try{var g="",l=t;do g+=df(l),l=l.return;while(l);var n=g}catch(I){n=`
Error generating stack: `+I.message+`
`+I.stack}return{value:e,source:t,stack:n,digest:null}}function Ia(e,t,g){return{value:e,source:null,stack:g??null,digest:t??null}}function sC(e,t){try{console.error(t.value)}catch(g){setTimeout(function(){throw g})}}var EZ=typeof WeakMap=="function"?WeakMap:Map;function rh(e,t,g){g=Sg(-1,g),g.tag=3,g.payload={element:null};var l=t.value;return g.callback=function(){ho||(ho=!0,ZC=l),sC(e,t)},g}function ah(e,t,g){g=Sg(-1,g),g.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var n=t.value;g.payload=function(){return l(n)},g.callback=function(){sC(e,t)}}var I=e.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(g.callback=function(){sC(e,t),typeof l!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),g}function fd(e,t,g){var l=e.pingCache;if(l===null){l=e.pingCache=new EZ;var n=new Set;l.set(t,n)}else n=l.get(t),n===void 0&&(n=new Set,l.set(t,n));n.has(g)||(n.add(g),e=ey.bind(null,e,t,g),t.then(e,e))}function Zd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yd(e,t,g,l,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(t=Sg(-1,1),t.tag=2,tl(g,t,1))),g.lanes|=1),e)}var zZ=Yg.ReactCurrentOwner,Zt=!1;function ut(e,t,g,l){t.child=e===null?zm(t,null,g,l):Gn(t,e.child,g,l)}function Gd(e,t,g,l,n){g=g.render;var I=t.ref;return mn(t,n),l=Ys(e,t,g,l,I,n),g=ws(),e!==null&&!Zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,kg(e,t,n)):(Ke&&g&&Zs(t),t.flags|=1,ut(e,t,l,n),t.child)}function Bd(e,t,g,l,n){if(e===null){var I=g.type;return typeof I=="function"&&!Ls(I)&&I.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(t.tag=15,t.type=I,Ch(e,t,I,l,n)):(e=Mi(g.type,null,l,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(I=e.child,!(e.lanes&n)){var i=I.memoizedProps;if(g=g.compare,g=g!==null?g:XI,g(i,l)&&e.ref===t.ref)return kg(e,t,n)}return t.flags|=1,e=nl(I,l),e.ref=t.ref,e.return=t,t.child=e}function Ch(e,t,g,l,n){if(e!==null){var I=e.memoizedProps;if(XI(I,l)&&e.ref===t.ref)if(Zt=!1,t.pendingProps=l=I,(e.lanes&n)!==0)e.flags&131072&&(Zt=!0);else return t.lanes=e.lanes,kg(e,t,n)}return cC(e,t,g,l,n)}function sh(e,t,g){var l=t.pendingProps,n=l.children,I=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(sn,vt),vt|=g;else{if(!(g&1073741824))return e=I!==null?I.baseLanes|g:g,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Je(sn,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=I!==null?I.baseLanes:g,Je(sn,vt),vt|=l}else I!==null?(l=I.baseLanes|g,t.memoizedState=null):l=g,Je(sn,vt),vt|=l;return ut(e,t,n,g),t.child}function ch(e,t){var g=t.ref;(e===null&&g!==null||e!==null&&e.ref!==g)&&(t.flags|=512,t.flags|=2097152)}function cC(e,t,g,l,n){var I=Gt(g)?wl:ct.current;return I=Zn(t,I),mn(t,n),g=Ys(e,t,g,l,I,n),l=ws(),e!==null&&!Zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,kg(e,t,n)):(Ke&&l&&Zs(t),t.flags|=1,ut(e,t,g,n),t.child)}function vd(e,t,g,l,n){if(Gt(g)){var I=!0;io(t)}else I=!1;if(mn(t,n),t.stateNode===null)Ei(e,t),xm(t,g,l),CC(t,g,l,n),l=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var r=i.context,a=g.contextType;typeof a=="object"&&a!==null?a=Mt(a):(a=Gt(g)?wl:ct.current,a=Zn(t,a));var c=g.getDerivedStateFromProps,s=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";s||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==l||r!==a)&&md(t,i,l,a),zg=!1;var d=t.memoizedState;i.state=d,so(t,l,i,n),r=t.memoizedState,o!==l||d!==r||yt.current||zg?(typeof c=="function"&&(aC(t,g,c,l),r=t.memoizedState),(o=zg||Ad(t,g,o,l,d,r,a))?(s||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=r),i.props=l,i.state=r,i.context=a,l=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{i=t.stateNode,Fm(e,t),o=t.memoizedProps,a=t.type===t.elementType?o:Pt(t.type,o),i.props=a,s=t.pendingProps,d=i.context,r=g.contextType,typeof r=="object"&&r!==null?r=Mt(r):(r=Gt(g)?wl:ct.current,r=Zn(t,r));var A=g.getDerivedStateFromProps;(c=typeof A=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==s||d!==r)&&md(t,i,l,r),zg=!1,d=t.memoizedState,i.state=d,so(t,l,i,n);var f=t.memoizedState;o!==s||d!==f||yt.current||zg?(typeof A=="function"&&(aC(t,g,A,l),f=t.memoizedState),(a=zg||Ad(t,g,a,l,d,f,r)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,f,r),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,f,r)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=f),i.props=l,i.state=f,i.context=r,l=a):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),l=!1)}return dC(e,t,g,l,I,n)}function dC(e,t,g,l,n,I){ch(e,t);var i=(t.flags&128)!==0;if(!l&&!i)return n&&Cd(t,g,!1),kg(e,t,I);l=t.stateNode,zZ.current=t;var o=i&&typeof g.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&i?(t.child=Gn(t,e.child,null,I),t.child=Gn(t,null,o,I)):ut(e,t,o,I),t.memoizedState=l.state,n&&Cd(t,g,!0),t.child}function dh(e){var t=e.stateNode;t.pendingContext?ad(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ad(e,t.context,!1),Rs(e,t.containerInfo)}function Sd(e,t,g,l,n){return yn(),Gs(n),t.flags|=256,ut(e,t,g,l),t.child}var uC={dehydrated:null,treeContext:null,retryLane:0};function AC(e){return{baseLanes:e,cachePool:null,transitions:null}}function uh(e,t,g){var l=t.pendingProps,n=xe.current,I=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(I=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Je(xe,n&1),e===null)return oC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=l.children,e=l.fallback,I?(l=t.mode,I=t.child,i={mode:"hidden",children:i},!(l&1)&&I!==null?(I.childLanes=0,I.pendingProps=i):I=$o(i,l,0,null),e=kl(e,l,g,null),I.return=t,e.return=t,I.sibling=e,t.child=I,t.child.memoizedState=AC(g),t.memoizedState=uC,e):Fs(t,i));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return TZ(e,t,i,l,o,n,g);if(I){I=l.fallback,i=t.mode,n=e.child,o=n.sibling;var r={mode:"hidden",children:l.children};return!(i&1)&&t.child!==n?(l=t.child,l.childLanes=0,l.pendingProps=r,t.deletions=null):(l=nl(n,r),l.subtreeFlags=n.subtreeFlags&14680064),o!==null?I=nl(o,I):(I=kl(I,i,g,null),I.flags|=2),I.return=t,l.return=t,l.sibling=I,t.child=l,l=I,I=t.child,i=e.child.memoizedState,i=i===null?AC(g):{baseLanes:i.baseLanes|g,cachePool:null,transitions:i.transitions},I.memoizedState=i,I.childLanes=e.childLanes&~g,t.memoizedState=uC,l}return I=e.child,e=I.sibling,l=nl(I,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=g),l.return=t,l.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=l,t.memoizedState=null,l}function Fs(e,t){return t=$o({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pi(e,t,g,l){return l!==null&&Gs(l),Gn(t,e.child,null,g),e=Fs(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TZ(e,t,g,l,n,I,i){if(g)return t.flags&256?(t.flags&=-257,l=Ia(Error(ee(422))),pi(e,t,i,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(I=l.fallback,n=t.mode,l=$o({mode:"visible",children:l.children},n,0,null),I=kl(I,n,i,null),I.flags|=2,l.return=t,I.return=t,l.sibling=I,t.child=l,t.mode&1&&Gn(t,e.child,null,i),t.child.memoizedState=AC(i),t.memoizedState=uC,I);if(!(t.mode&1))return pi(e,t,i,null);if(n.data==="$!"){if(l=n.nextSibling&&n.nextSibling.dataset,l)var o=l.dgst;return l=o,I=Error(ee(419)),l=Ia(I,l,void 0),pi(e,t,i,l)}if(o=(i&e.childLanes)!==0,Zt||o){if(l=gt,l!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(l.suspendedLanes|i)?0:n,n!==0&&n!==I.retryLane&&(I.retryLane=n,Xg(e,n),gg(l,e,n,-1))}return Ms(),l=Ia(Error(ee(421))),pi(e,t,i,l)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=ty.bind(null,e),n._reactRetry=t,null):(e=I.treeContext,Vt=el(n.nextSibling),Wt=t,Ke=!0,qt=null,e!==null&&(Ft[Kt++]=Bg,Ft[Kt++]=vg,Ft[Kt++]=Hl,Bg=e.id,vg=e.overflow,Hl=t),t=Fs(t,l.children),t.flags|=4096,t)}function Vd(e,t,g){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),rC(e.return,t,g)}function ia(e,t,g,l,n){var I=e.memoizedState;I===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:g,tailMode:n}:(I.isBackwards=t,I.rendering=null,I.renderingStartTime=0,I.last=l,I.tail=g,I.tailMode=n)}function Ah(e,t,g){var l=t.pendingProps,n=l.revealOrder,I=l.tail;if(ut(e,t,l.children,g),l=xe.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vd(e,g,t);else if(e.tag===19)Vd(e,g,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Je(xe,l),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(g=t.child,n=null;g!==null;)e=g.alternate,e!==null&&co(e)===null&&(n=g),g=g.sibling;g=n,g===null?(n=t.child,t.child=null):(n=g.sibling,g.sibling=null),ia(t,!1,n,g,I);break;case"backwards":for(g=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&co(e)===null){t.child=n;break}e=n.sibling,n.sibling=g,g=n,n=e}ia(t,!0,g,null,I);break;case"together":ia(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ei(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kg(e,t,g){if(e!==null&&(t.dependencies=e.dependencies),Fl|=t.lanes,!(g&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,g=nl(e,e.pendingProps),t.child=g,g.return=t;e.sibling!==null;)e=e.sibling,g=g.sibling=nl(e,e.pendingProps),g.return=t;g.sibling=null}return t.child}function MZ(e,t,g){switch(t.tag){case 3:dh(t),yn();break;case 5:Tm(t);break;case 1:Gt(t.type)&&io(t);break;case 4:Rs(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,n=t.memoizedProps.value;Je(ao,l._currentValue),l._currentValue=n;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Je(xe,xe.current&1),t.flags|=128,null):g&t.child.childLanes?uh(e,t,g):(Je(xe,xe.current&1),e=kg(e,t,g),e!==null?e.sibling:null);Je(xe,xe.current&1);break;case 19:if(l=(g&t.childLanes)!==0,e.flags&128){if(l)return Ah(e,t,g);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Je(xe,xe.current),l)break;return null;case 22:case 23:return t.lanes=0,sh(e,t,g)}return kg(e,t,g)}var mh,mC,hh,bh;mh=function(e,t){for(var g=t.child;g!==null;){if(g.tag===5||g.tag===6)e.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break;for(;g.sibling===null;){if(g.return===null||g.return===t)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};mC=function(){};hh=function(e,t,g,l){var n=e.memoizedProps;if(n!==l){e=t.stateNode,Wl(hg.current);var I=null;switch(g){case"input":n=Ka(e,n),l=Ka(e,l),I=[];break;case"select":n=Me({},n,{value:void 0}),l=Me({},l,{value:void 0}),I=[];break;case"textarea":n=za(e,n),l=za(e,l),I=[];break;default:typeof n.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=no)}Ma(g,l);var i;g=null;for(a in n)if(!l.hasOwnProperty(a)&&n.hasOwnProperty(a)&&n[a]!=null)if(a==="style"){var o=n[a];for(i in o)o.hasOwnProperty(i)&&(g||(g={}),g[i]="")}else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(GI.hasOwnProperty(a)?I||(I=[]):(I=I||[]).push(a,null));for(a in l){var r=l[a];if(o=n!=null?n[a]:void 0,l.hasOwnProperty(a)&&r!==o&&(r!=null||o!=null))if(a==="style")if(o){for(i in o)!o.hasOwnProperty(i)||r&&r.hasOwnProperty(i)||(g||(g={}),g[i]="");for(i in r)r.hasOwnProperty(i)&&o[i]!==r[i]&&(g||(g={}),g[i]=r[i])}else g||(I||(I=[]),I.push(a,g)),g=r;else a==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,o=o?o.__html:void 0,r!=null&&o!==r&&(I=I||[]).push(a,r)):a==="children"?typeof r!="string"&&typeof r!="number"||(I=I||[]).push(a,""+r):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(GI.hasOwnProperty(a)?(r!=null&&a==="onScroll"&&we("scroll",e),I||o===r||(I=[])):(I=I||[]).push(a,r))}g&&(I=I||[]).push("style",g);var a=I;(t.updateQueue=a)&&(t.flags|=4)}};bh=function(e,t,g,l){g!==l&&(t.flags|=4)};function qn(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var g=null;t!==null;)t.alternate!==null&&(g=t),t=t.sibling;g===null?e.tail=null:g.sibling=null;break;case"collapsed":g=e.tail;for(var l=null;g!==null;)g.alternate!==null&&(l=g),g=g.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,g=0,l=0;if(t)for(var n=e.child;n!==null;)g|=n.lanes|n.childLanes,l|=n.subtreeFlags&14680064,l|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)g|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=g,t}function LZ(e,t,g){var l=t.pendingProps;switch(ys(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(t),null;case 1:return Gt(t.type)&&Io(),Ct(t),null;case 3:return l=t.stateNode,Bn(),Ne(yt),Ne(ct),ks(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(hi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(BC(qt),qt=null))),mC(e,t),Ct(t),null;case 5:Xs(t);var n=Wl(HI.current);if(g=t.type,e!==null&&t.stateNode!=null)hh(e,t,g,l,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(ee(166));return Ct(t),null}if(e=Wl(hg.current),hi(t)){l=t.stateNode,g=t.type;var I=t.memoizedProps;switch(l[sg]=t,l[YI]=I,e=(t.mode&1)!==0,g){case"dialog":we("cancel",l),we("close",l);break;case"iframe":case"object":case"embed":we("load",l);break;case"video":case"audio":for(n=0;n<CI.length;n++)we(CI[n],l);break;case"source":we("error",l);break;case"img":case"image":case"link":we("error",l),we("load",l);break;case"details":we("toggle",l);break;case"input":Nc(l,I),we("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!I.multiple},we("invalid",l);break;case"textarea":Kc(l,I),we("invalid",l)}Ma(g,I),n=null;for(var i in I)if(I.hasOwnProperty(i)){var o=I[i];i==="children"?typeof o=="string"?l.textContent!==o&&(I.suppressHydrationWarning!==!0&&mi(l.textContent,o,e),n=["children",o]):typeof o=="number"&&l.textContent!==""+o&&(I.suppressHydrationWarning!==!0&&mi(l.textContent,o,e),n=["children",""+o]):GI.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&we("scroll",l)}switch(g){case"input":ri(l),Fc(l,I,!0);break;case"textarea":ri(l),xc(l);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(l.onclick=no)}l=n,t.updateQueue=l,l!==null&&(t.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=UA(g)),e==="http://www.w3.org/1999/xhtml"?g==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=i.createElement(g,{is:l.is}):(e=i.createElement(g),g==="select"&&(i=e,l.multiple?i.multiple=!0:l.size&&(i.size=l.size))):e=i.createElementNS(e,g),e[sg]=t,e[YI]=l,mh(e,t,!1,!1),t.stateNode=e;e:{switch(i=La(g,l),g){case"dialog":we("cancel",e),we("close",e),n=l;break;case"iframe":case"object":case"embed":we("load",e),n=l;break;case"video":case"audio":for(n=0;n<CI.length;n++)we(CI[n],e);n=l;break;case"source":we("error",e),n=l;break;case"img":case"image":case"link":we("error",e),we("load",e),n=l;break;case"details":we("toggle",e),n=l;break;case"input":Nc(e,l),n=Ka(e,l),we("invalid",e);break;case"option":n=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},n=Me({},l,{value:void 0}),we("invalid",e);break;case"textarea":Kc(e,l),n=za(e,l),we("invalid",e);break;default:n=l}Ma(g,n),o=n;for(I in o)if(o.hasOwnProperty(I)){var r=o[I];I==="style"?DA(e,r):I==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,r!=null&&QA(e,r)):I==="children"?typeof r=="string"?(g!=="textarea"||r!=="")&&BI(e,r):typeof r=="number"&&BI(e,""+r):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(GI.hasOwnProperty(I)?r!=null&&I==="onScroll"&&we("scroll",e):r!=null&&os(e,I,r,i))}switch(g){case"input":ri(e),Fc(e,l,!1);break;case"textarea":ri(e),xc(e);break;case"option":l.value!=null&&e.setAttribute("value",""+il(l.value));break;case"select":e.multiple=!!l.multiple,I=l.value,I!=null?cn(e,!!l.multiple,I,!1):l.defaultValue!=null&&cn(e,!!l.multiple,l.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=no)}switch(g){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ct(t),null;case 6:if(e&&t.stateNode!=null)bh(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(ee(166));if(g=Wl(HI.current),Wl(hg.current),hi(t)){if(l=t.stateNode,g=t.memoizedProps,l[sg]=t,(I=l.nodeValue!==g)&&(e=Wt,e!==null))switch(e.tag){case 3:mi(l.nodeValue,g,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mi(l.nodeValue,g,(e.mode&1)!==0)}I&&(t.flags|=4)}else l=(g.nodeType===9?g:g.ownerDocument).createTextNode(l),l[sg]=t,t.stateNode=l}return Ct(t),null;case 13:if(Ne(xe),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&Vt!==null&&t.mode&1&&!(t.flags&128))Hm(),yn(),t.flags|=98560,I=!1;else if(I=hi(t),l!==null&&l.dehydrated!==null){if(e===null){if(!I)throw Error(ee(318));if(I=t.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(ee(317));I[sg]=t}else yn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ct(t),I=!1}else qt!==null&&(BC(qt),qt=null),I=!0;if(!I)return t.flags&65536?t:null}return t.flags&128?(t.lanes=g,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?$e===0&&($e=3):Ms())),t.updateQueue!==null&&(t.flags|=4),Ct(t),null);case 4:return Bn(),mC(e,t),e===null&&kI(t.stateNode.containerInfo),Ct(t),null;case 10:return Ss(t.type._context),Ct(t),null;case 17:return Gt(t.type)&&Io(),Ct(t),null;case 19:if(Ne(xe),I=t.memoizedState,I===null)return Ct(t),null;if(l=(t.flags&128)!==0,i=I.rendering,i===null)if(l)qn(I,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=co(e),i!==null){for(t.flags|=128,qn(I,!1),l=i.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=g,g=t.child;g!==null;)I=g,e=l,I.flags&=14680066,i=I.alternate,i===null?(I.childLanes=0,I.lanes=e,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=i.childLanes,I.lanes=i.lanes,I.child=i.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=i.memoizedProps,I.memoizedState=i.memoizedState,I.updateQueue=i.updateQueue,I.type=i.type,e=i.dependencies,I.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),g=g.sibling;return Je(xe,xe.current&1|2),t.child}e=e.sibling}I.tail!==null&&De()>Sn&&(t.flags|=128,l=!0,qn(I,!1),t.lanes=4194304)}else{if(!l)if(e=co(i),e!==null){if(t.flags|=128,l=!0,g=e.updateQueue,g!==null&&(t.updateQueue=g,t.flags|=4),qn(I,!0),I.tail===null&&I.tailMode==="hidden"&&!i.alternate&&!Ke)return Ct(t),null}else 2*De()-I.renderingStartTime>Sn&&g!==1073741824&&(t.flags|=128,l=!0,qn(I,!1),t.lanes=4194304);I.isBackwards?(i.sibling=t.child,t.child=i):(g=I.last,g!==null?g.sibling=i:t.child=i,I.last=i)}return I.tail!==null?(t=I.tail,I.rendering=t,I.tail=t.sibling,I.renderingStartTime=De(),t.sibling=null,g=xe.current,Je(xe,l?g&1|2:g&1),t):(Ct(t),null);case 22:case 23:return Ts(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?vt&1073741824&&(Ct(t),t.subtreeFlags&6&&(t.flags|=8192)):Ct(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function UZ(e,t){switch(ys(t),t.tag){case 1:return Gt(t.type)&&Io(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bn(),Ne(yt),Ne(ct),ks(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xs(t),null;case 13:if(Ne(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));yn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(xe),null;case 4:return Bn(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return Ts(),null;case 24:return null;default:return null}}var fi=!1,st=!1,QZ=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Cn(e,t){var g=e.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(l){Qe(e,t,l)}else g.current=null}function hC(e,t,g){try{g()}catch(l){Qe(e,t,l)}}var Wd=!1;function jZ(e,t){if(eC=to,e=ym(),fs(e)){if("selectionStart"in e)var g={start:e.selectionStart,end:e.selectionEnd};else e:{g=(g=e.ownerDocument)&&g.defaultView||window;var l=g.getSelection&&g.getSelection();if(l&&l.rangeCount!==0){g=l.anchorNode;var n=l.anchorOffset,I=l.focusNode;l=l.focusOffset;try{g.nodeType,I.nodeType}catch{g=null;break e}var i=0,o=-1,r=-1,a=0,c=0,s=e,d=null;t:for(;;){for(var A;s!==g||n!==0&&s.nodeType!==3||(o=i+n),s!==I||l!==0&&s.nodeType!==3||(r=i+l),s.nodeType===3&&(i+=s.nodeValue.length),(A=s.firstChild)!==null;)d=s,s=A;for(;;){if(s===e)break t;if(d===g&&++a===n&&(o=i),d===I&&++c===l&&(r=i),(A=s.nextSibling)!==null)break;s=d,d=s.parentNode}s=A}g=o===-1||r===-1?null:{start:o,end:r}}else g=null}g=g||{start:0,end:0}}else g=null;for(tC={focusedElem:e,selectionRange:g},to=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var p=f.memoizedProps,Z=f.memoizedState,m=t.stateNode,u=m.getSnapshotBeforeUpdate(t.elementType===t.type?p:Pt(t.type,p),Z);m.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(b){Qe(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return f=Wd,Wd=!1,f}function bI(e,t,g){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var n=l=l.next;do{if((n.tag&e)===e){var I=n.destroy;n.destroy=void 0,I!==void 0&&hC(t,g,I)}n=n.next}while(n!==l)}}function _o(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var g=t=t.next;do{if((g.tag&e)===e){var l=g.create;g.destroy=l()}g=g.next}while(g!==t)}}function bC(e){var t=e.ref;if(t!==null){var g=e.stateNode;switch(e.tag){case 5:e=g;break;default:e=g}typeof t=="function"?t(e):t.current=e}}function ph(e){var t=e.alternate;t!==null&&(e.alternate=null,ph(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sg],delete t[YI],delete t[nC],delete t[RZ],delete t[XZ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fh(e){return e.tag===5||e.tag===3||e.tag===4}function Rd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pC(e,t,g){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?g.nodeType===8?g.parentNode.insertBefore(e,t):g.insertBefore(e,t):(g.nodeType===8?(t=g.parentNode,t.insertBefore(e,g)):(t=g,t.appendChild(e)),g=g._reactRootContainer,g!=null||t.onclick!==null||(t.onclick=no));else if(l!==4&&(e=e.child,e!==null))for(pC(e,t,g),e=e.sibling;e!==null;)pC(e,t,g),e=e.sibling}function fC(e,t,g){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?g.insertBefore(e,t):g.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(fC(e,t,g),e=e.sibling;e!==null;)fC(e,t,g),e=e.sibling}var It=null,_t=!1;function Fg(e,t,g){for(g=g.child;g!==null;)Zh(e,t,g),g=g.sibling}function Zh(e,t,g){if(mg&&typeof mg.onCommitFiberUnmount=="function")try{mg.onCommitFiberUnmount(Mo,g)}catch{}switch(g.tag){case 5:st||Cn(g,t);case 6:var l=It,n=_t;It=null,Fg(e,t,g),It=l,_t=n,It!==null&&(_t?(e=It,g=g.stateNode,e.nodeType===8?e.parentNode.removeChild(g):e.removeChild(g)):It.removeChild(g.stateNode));break;case 18:It!==null&&(_t?(e=It,g=g.stateNode,e.nodeType===8?$r(e.parentNode,g):e.nodeType===1&&$r(e,g),WI(e)):$r(It,g.stateNode));break;case 4:l=It,n=_t,It=g.stateNode.containerInfo,_t=!0,Fg(e,t,g),It=l,_t=n;break;case 0:case 11:case 14:case 15:if(!st&&(l=g.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){n=l=l.next;do{var I=n,i=I.destroy;I=I.tag,i!==void 0&&(I&2||I&4)&&hC(g,t,i),n=n.next}while(n!==l)}Fg(e,t,g);break;case 1:if(!st&&(Cn(g,t),l=g.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=g.memoizedProps,l.state=g.memoizedState,l.componentWillUnmount()}catch(o){Qe(g,t,o)}Fg(e,t,g);break;case 21:Fg(e,t,g);break;case 22:g.mode&1?(st=(l=st)||g.memoizedState!==null,Fg(e,t,g),st=l):Fg(e,t,g);break;default:Fg(e,t,g)}}function Xd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var g=e.stateNode;g===null&&(g=e.stateNode=new QZ),t.forEach(function(l){var n=gy.bind(null,e,l);g.has(l)||(g.add(l),l.then(n,n))})}}function jt(e,t){var g=t.deletions;if(g!==null)for(var l=0;l<g.length;l++){var n=g[l];try{var I=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:It=o.stateNode,_t=!1;break e;case 3:It=o.stateNode.containerInfo,_t=!0;break e;case 4:It=o.stateNode.containerInfo,_t=!0;break e}o=o.return}if(It===null)throw Error(ee(160));Zh(I,i,n),It=null,_t=!1;var r=n.alternate;r!==null&&(r.return=null),n.return=null}catch(a){Qe(n,t,a)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yh(t,e),t=t.sibling}function yh(e,t){var g=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jt(t,e),ig(e),l&4){try{bI(3,e,e.return),_o(3,e)}catch(p){Qe(e,e.return,p)}try{bI(5,e,e.return)}catch(p){Qe(e,e.return,p)}}break;case 1:jt(t,e),ig(e),l&512&&g!==null&&Cn(g,g.return);break;case 5:if(jt(t,e),ig(e),l&512&&g!==null&&Cn(g,g.return),e.flags&32){var n=e.stateNode;try{BI(n,"")}catch(p){Qe(e,e.return,p)}}if(l&4&&(n=e.stateNode,n!=null)){var I=e.memoizedProps,i=g!==null?g.memoizedProps:I,o=e.type,r=e.updateQueue;if(e.updateQueue=null,r!==null)try{o==="input"&&I.type==="radio"&&I.name!=null&&MA(n,I),La(o,i);var a=La(o,I);for(i=0;i<r.length;i+=2){var c=r[i],s=r[i+1];c==="style"?DA(n,s):c==="dangerouslySetInnerHTML"?QA(n,s):c==="children"?BI(n,s):os(n,c,s,a)}switch(o){case"input":xa(n,I);break;case"textarea":LA(n,I);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!I.multiple;var A=I.value;A!=null?cn(n,!!I.multiple,A,!1):d!==!!I.multiple&&(I.defaultValue!=null?cn(n,!!I.multiple,I.defaultValue,!0):cn(n,!!I.multiple,I.multiple?[]:"",!1))}n[YI]=I}catch(p){Qe(e,e.return,p)}}break;case 6:if(jt(t,e),ig(e),l&4){if(e.stateNode===null)throw Error(ee(162));n=e.stateNode,I=e.memoizedProps;try{n.nodeValue=I}catch(p){Qe(e,e.return,p)}}break;case 3:if(jt(t,e),ig(e),l&4&&g!==null&&g.memoizedState.isDehydrated)try{WI(t.containerInfo)}catch(p){Qe(e,e.return,p)}break;case 4:jt(t,e),ig(e);break;case 13:jt(t,e),ig(e),n=e.child,n.flags&8192&&(I=n.memoizedState!==null,n.stateNode.isHidden=I,!I||n.alternate!==null&&n.alternate.memoizedState!==null||(Es=De())),l&4&&Xd(e);break;case 22:if(c=g!==null&&g.memoizedState!==null,e.mode&1?(st=(a=st)||c,jt(t,e),st=a):jt(t,e),ig(e),l&8192){if(a=e.memoizedState!==null,(e.stateNode.isHidden=a)&&!c&&e.mode&1)for(ie=e,c=e.child;c!==null;){for(s=ie=c;ie!==null;){switch(d=ie,A=d.child,d.tag){case 0:case 11:case 14:case 15:bI(4,d,d.return);break;case 1:Cn(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){l=d,g=d.return;try{t=l,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(p){Qe(l,g,p)}}break;case 5:Cn(d,d.return);break;case 22:if(d.memoizedState!==null){Jd(s);continue}}A!==null?(A.return=d,ie=A):Jd(s)}c=c.sibling}e:for(c=null,s=e;;){if(s.tag===5){if(c===null){c=s;try{n=s.stateNode,a?(I=n.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(o=s.stateNode,r=s.memoizedProps.style,i=r!=null&&r.hasOwnProperty("display")?r.display:null,o.style.display=jA("display",i))}catch(p){Qe(e,e.return,p)}}}else if(s.tag===6){if(c===null)try{s.stateNode.nodeValue=a?"":s.memoizedProps}catch(p){Qe(e,e.return,p)}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}}break;case 19:jt(t,e),ig(e),l&4&&Xd(e);break;case 21:break;default:jt(t,e),ig(e)}}function ig(e){var t=e.flags;if(t&2){try{e:{for(var g=e.return;g!==null;){if(fh(g)){var l=g;break e}g=g.return}throw Error(ee(160))}switch(l.tag){case 5:var n=l.stateNode;l.flags&32&&(BI(n,""),l.flags&=-33);var I=Rd(e);fC(e,I,n);break;case 3:case 4:var i=l.stateNode.containerInfo,o=Rd(e);pC(e,o,i);break;default:throw Error(ee(161))}}catch(r){Qe(e,e.return,r)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function DZ(e,t,g){ie=e,Gh(e)}function Gh(e,t,g){for(var l=(e.mode&1)!==0;ie!==null;){var n=ie,I=n.child;if(n.tag===22&&l){var i=n.memoizedState!==null||fi;if(!i){var o=n.alternate,r=o!==null&&o.memoizedState!==null||st;o=fi;var a=st;if(fi=i,(st=r)&&!a)for(ie=n;ie!==null;)i=ie,r=i.child,i.tag===22&&i.memoizedState!==null?Yd(n):r!==null?(r.return=i,ie=r):Yd(n);for(;I!==null;)ie=I,Gh(I),I=I.sibling;ie=n,fi=o,st=a}kd(e)}else n.subtreeFlags&8772&&I!==null?(I.return=n,ie=I):kd(e)}}function kd(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var g=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||_o(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!st)if(g===null)l.componentDidMount();else{var n=t.elementType===t.type?g.memoizedProps:Pt(t.type,g.memoizedProps);l.componentDidUpdate(n,g.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var I=t.updateQueue;I!==null&&ud(t,I,l);break;case 3:var i=t.updateQueue;if(i!==null){if(g=null,t.child!==null)switch(t.child.tag){case 5:g=t.child.stateNode;break;case 1:g=t.child.stateNode}ud(t,i,g)}break;case 5:var o=t.stateNode;if(g===null&&t.flags&4){g=o;var r=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":r.autoFocus&&g.focus();break;case"img":r.src&&(g.src=r.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var a=t.alternate;if(a!==null){var c=a.memoizedState;if(c!==null){var s=c.dehydrated;s!==null&&WI(s)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}st||t.flags&512&&bC(t)}catch(d){Qe(t,t.return,d)}}if(t===e){ie=null;break}if(g=t.sibling,g!==null){g.return=t.return,ie=g;break}ie=t.return}}function Jd(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var g=t.sibling;if(g!==null){g.return=t.return,ie=g;break}ie=t.return}}function Yd(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var g=t.return;try{_o(4,t)}catch(r){Qe(t,g,r)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var n=t.return;try{l.componentDidMount()}catch(r){Qe(t,n,r)}}var I=t.return;try{bC(t)}catch(r){Qe(t,I,r)}break;case 5:var i=t.return;try{bC(t)}catch(r){Qe(t,i,r)}}}catch(r){Qe(t,t.return,r)}if(t===e){ie=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ie=o;break}ie=t.return}}var OZ=Math.ceil,mo=Yg.ReactCurrentDispatcher,Ks=Yg.ReactCurrentOwner,zt=Yg.ReactCurrentBatchConfig,ye=0,gt=null,Oe=null,ot=0,vt=0,sn=sl(0),$e=0,xI=null,Fl=0,qo=0,xs=0,pI=null,ft=null,Es=0,Sn=1/0,yg=null,ho=!1,ZC=null,gl=null,Zi=!1,Dg=null,bo=0,fI=0,yC=null,zi=-1,Ti=0;function mt(){return ye&6?De():zi!==-1?zi:zi=De()}function ll(e){return e.mode&1?ye&2&&ot!==0?ot&-ot:JZ.transition!==null?(Ti===0&&(Ti=im()),Ti):(e=Ve,e!==0||(e=window.event,e=e===void 0?16:dm(e.type)),e):1}function gg(e,t,g,l){if(50<fI)throw fI=0,yC=null,Error(ee(185));OI(e,g,l),(!(ye&2)||e!==gt)&&(e===gt&&(!(ye&2)&&(qo|=g),$e===4&&Ug(e,ot)),Bt(e,l),g===1&&ye===0&&!(t.mode&1)&&(Sn=De()+500,Do&&cl()))}function Bt(e,t){var g=e.callbackNode;Jf(e,t);var l=eo(e,e===gt?ot:0);if(l===0)g!==null&&Tc(g),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(g!=null&&Tc(g),t===1)e.tag===0?kZ(wd.bind(null,e)):Jm(wd.bind(null,e)),VZ(function(){!(ye&6)&&cl()}),g=null;else{switch(om(l)){case 1:g=cs;break;case 4:g=nm;break;case 16:g=$i;break;case 536870912:g=Im;break;default:g=$i}g=kh(g,Bh.bind(null,e))}e.callbackPriority=t,e.callbackNode=g}}function Bh(e,t){if(zi=-1,Ti=0,ye&6)throw Error(ee(327));var g=e.callbackNode;if(hn()&&e.callbackNode!==g)return null;var l=eo(e,e===gt?ot:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=po(e,l);else{t=l;var n=ye;ye|=2;var I=Sh();(gt!==e||ot!==t)&&(yg=null,Sn=De()+500,Xl(e,t));do try{qZ();break}catch(o){vh(e,o)}while(1);vs(),mo.current=I,ye=n,Oe!==null?t=0:(gt=null,ot=0,t=$e)}if(t!==0){if(t===2&&(n=Oa(e),n!==0&&(l=n,t=GC(e,n))),t===1)throw g=xI,Xl(e,0),Ug(e,l),Bt(e,De()),g;if(t===6)Ug(e,l);else{if(n=e.current.alternate,!(l&30)&&!PZ(n)&&(t=po(e,l),t===2&&(I=Oa(e),I!==0&&(l=I,t=GC(e,I))),t===1))throw g=xI,Xl(e,0),Ug(e,l),Bt(e,De()),g;switch(e.finishedWork=n,e.finishedLanes=l,t){case 0:case 1:throw Error(ee(345));case 2:yl(e,ft,yg);break;case 3:if(Ug(e,l),(l&130023424)===l&&(t=Es+500-De(),10<t)){if(eo(e,0)!==0)break;if(n=e.suspendedLanes,(n&l)!==l){mt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=lC(yl.bind(null,e,ft,yg),t);break}yl(e,ft,yg);break;case 4:if(Ug(e,l),(l&4194240)===l)break;for(t=e.eventTimes,n=-1;0<l;){var i=31-tg(l);I=1<<i,i=t[i],i>n&&(n=i),l&=~I}if(l=n,l=De()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*OZ(l/1960))-l,10<l){e.timeoutHandle=lC(yl.bind(null,e,ft,yg),l);break}yl(e,ft,yg);break;case 5:yl(e,ft,yg);break;default:throw Error(ee(329))}}}return Bt(e,De()),e.callbackNode===g?Bh.bind(null,e):null}function GC(e,t){var g=pI;return e.current.memoizedState.isDehydrated&&(Xl(e,t).flags|=256),e=po(e,t),e!==2&&(t=ft,ft=g,t!==null&&BC(t)),e}function BC(e){ft===null?ft=e:ft.push.apply(ft,e)}function PZ(e){for(var t=e;;){if(t.flags&16384){var g=t.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var l=0;l<g.length;l++){var n=g[l],I=n.getSnapshot;n=n.value;try{if(!lg(I(),n))return!1}catch{return!1}}}if(g=t.child,t.subtreeFlags&16384&&g!==null)g.return=t,t=g;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ug(e,t){for(t&=~xs,t&=~qo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var g=31-tg(t),l=1<<g;e[g]=-1,t&=~l}}function wd(e){if(ye&6)throw Error(ee(327));hn();var t=eo(e,0);if(!(t&1))return Bt(e,De()),null;var g=po(e,t);if(e.tag!==0&&g===2){var l=Oa(e);l!==0&&(t=l,g=GC(e,l))}if(g===1)throw g=xI,Xl(e,0),Ug(e,t),Bt(e,De()),g;if(g===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yl(e,ft,yg),Bt(e,De()),null}function zs(e,t){var g=ye;ye|=1;try{return e(t)}finally{ye=g,ye===0&&(Sn=De()+500,Do&&cl())}}function Kl(e){Dg!==null&&Dg.tag===0&&!(ye&6)&&hn();var t=ye;ye|=1;var g=zt.transition,l=Ve;try{if(zt.transition=null,Ve=1,e)return e()}finally{Ve=l,zt.transition=g,ye=t,!(ye&6)&&cl()}}function Ts(){vt=sn.current,Ne(sn)}function Xl(e,t){e.finishedWork=null,e.finishedLanes=0;var g=e.timeoutHandle;if(g!==-1&&(e.timeoutHandle=-1,SZ(g)),Oe!==null)for(g=Oe.return;g!==null;){var l=g;switch(ys(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Io();break;case 3:Bn(),Ne(yt),Ne(ct),ks();break;case 5:Xs(l);break;case 4:Bn();break;case 13:Ne(xe);break;case 19:Ne(xe);break;case 10:Ss(l.type._context);break;case 22:case 23:Ts()}g=g.return}if(gt=e,Oe=e=nl(e.current,null),ot=vt=t,$e=0,xI=null,xs=qo=Fl=0,ft=pI=null,Vl!==null){for(t=0;t<Vl.length;t++)if(g=Vl[t],l=g.interleaved,l!==null){g.interleaved=null;var n=l.next,I=g.pending;if(I!==null){var i=I.next;I.next=n,l.next=i}g.pending=l}Vl=null}return e}function vh(e,t){do{var g=Oe;try{if(vs(),Ki.current=Ao,uo){for(var l=ze.memoizedState;l!==null;){var n=l.queue;n!==null&&(n.pending=null),l=l.next}uo=!1}if(Nl=0,tt=qe=ze=null,hI=!1,NI=0,Ks.current=null,g===null||g.return===null){$e=1,xI=t,Oe=null;break}e:{var I=e,i=g.return,o=g,r=t;if(t=ot,o.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){var a=r,c=o,s=c.tag;if(!(c.mode&1)&&(s===0||s===11||s===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var A=Zd(i);if(A!==null){A.flags&=-257,yd(A,i,o,I,t),A.mode&1&&fd(I,a,t),t=A,r=a;var f=t.updateQueue;if(f===null){var p=new Set;p.add(r),t.updateQueue=p}else f.add(r);break e}else{if(!(t&1)){fd(I,a,t),Ms();break e}r=Error(ee(426))}}else if(Ke&&o.mode&1){var Z=Zd(i);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),yd(Z,i,o,I,t),Gs(vn(r,o));break e}}I=r=vn(r,o),$e!==4&&($e=2),pI===null?pI=[I]:pI.push(I),I=i;do{switch(I.tag){case 3:I.flags|=65536,t&=-t,I.lanes|=t;var m=rh(I,r,t);dd(I,m);break e;case 1:o=r;var u=I.type,h=I.stateNode;if(!(I.flags&128)&&(typeof u.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(gl===null||!gl.has(h)))){I.flags|=65536,t&=-t,I.lanes|=t;var b=ah(I,o,t);dd(I,b);break e}}I=I.return}while(I!==null)}Wh(g)}catch(y){t=y,Oe===g&&g!==null&&(Oe=g=g.return);continue}break}while(1)}function Sh(){var e=mo.current;return mo.current=Ao,e===null?Ao:e}function Ms(){($e===0||$e===3||$e===2)&&($e=4),gt===null||!(Fl&268435455)&&!(qo&268435455)||Ug(gt,ot)}function po(e,t){var g=ye;ye|=2;var l=Sh();(gt!==e||ot!==t)&&(yg=null,Xl(e,t));do try{_Z();break}catch(n){vh(e,n)}while(1);if(vs(),ye=g,mo.current=l,Oe!==null)throw Error(ee(261));return gt=null,ot=0,$e}function _Z(){for(;Oe!==null;)Vh(Oe)}function qZ(){for(;Oe!==null&&!Gf();)Vh(Oe)}function Vh(e){var t=Xh(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Wh(e):Oe=t,Ks.current=null}function Wh(e){var t=e;do{var g=t.alternate;if(e=t.return,t.flags&32768){if(g=UZ(g,t),g!==null){g.flags&=32767,Oe=g;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,Oe=null;return}}else if(g=LZ(g,t,vt),g!==null){Oe=g;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);$e===0&&($e=5)}function yl(e,t,g){var l=Ve,n=zt.transition;try{zt.transition=null,Ve=1,$Z(e,t,g,l)}finally{zt.transition=n,Ve=l}return null}function $Z(e,t,g,l){do hn();while(Dg!==null);if(ye&6)throw Error(ee(327));g=e.finishedWork;var n=e.finishedLanes;if(g===null)return null;if(e.finishedWork=null,e.finishedLanes=0,g===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var I=g.lanes|g.childLanes;if(Yf(e,I),e===gt&&(Oe=gt=null,ot=0),!(g.subtreeFlags&2064)&&!(g.flags&2064)||Zi||(Zi=!0,kh($i,function(){return hn(),null})),I=(g.flags&15990)!==0,g.subtreeFlags&15990||I){I=zt.transition,zt.transition=null;var i=Ve;Ve=1;var o=ye;ye|=4,Ks.current=null,jZ(e,g),yh(g,e),pZ(tC),to=!!eC,tC=eC=null,e.current=g,DZ(g),Bf(),ye=o,Ve=i,zt.transition=I}else e.current=g;if(Zi&&(Zi=!1,Dg=e,bo=n),I=e.pendingLanes,I===0&&(gl=null),Vf(g.stateNode),Bt(e,De()),t!==null)for(l=e.onRecoverableError,g=0;g<t.length;g++)n=t[g],l(n.value,{componentStack:n.stack,digest:n.digest});if(ho)throw ho=!1,e=ZC,ZC=null,e;return bo&1&&e.tag!==0&&hn(),I=e.pendingLanes,I&1?e===yC?fI++:(fI=0,yC=e):fI=0,cl(),null}function hn(){if(Dg!==null){var e=om(bo),t=zt.transition,g=Ve;try{if(zt.transition=null,Ve=16>e?16:e,Dg===null)var l=!1;else{if(e=Dg,Dg=null,bo=0,ye&6)throw Error(ee(331));var n=ye;for(ye|=4,ie=e.current;ie!==null;){var I=ie,i=I.child;if(ie.flags&16){var o=I.deletions;if(o!==null){for(var r=0;r<o.length;r++){var a=o[r];for(ie=a;ie!==null;){var c=ie;switch(c.tag){case 0:case 11:case 15:bI(8,c,I)}var s=c.child;if(s!==null)s.return=c,ie=s;else for(;ie!==null;){c=ie;var d=c.sibling,A=c.return;if(ph(c),c===a){ie=null;break}if(d!==null){d.return=A,ie=d;break}ie=A}}}var f=I.alternate;if(f!==null){var p=f.child;if(p!==null){f.child=null;do{var Z=p.sibling;p.sibling=null,p=Z}while(p!==null)}}ie=I}}if(I.subtreeFlags&2064&&i!==null)i.return=I,ie=i;else e:for(;ie!==null;){if(I=ie,I.flags&2048)switch(I.tag){case 0:case 11:case 15:bI(9,I,I.return)}var m=I.sibling;if(m!==null){m.return=I.return,ie=m;break e}ie=I.return}}var u=e.current;for(ie=u;ie!==null;){i=ie;var h=i.child;if(i.subtreeFlags&2064&&h!==null)h.return=i,ie=h;else e:for(i=u;ie!==null;){if(o=ie,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:_o(9,o)}}catch(y){Qe(o,o.return,y)}if(o===i){ie=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,ie=b;break e}ie=o.return}}if(ye=n,cl(),mg&&typeof mg.onPostCommitFiberRoot=="function")try{mg.onPostCommitFiberRoot(Mo,e)}catch{}l=!0}return l}finally{Ve=g,zt.transition=t}}return!1}function Hd(e,t,g){t=vn(g,t),t=rh(e,t,1),e=tl(e,t,1),t=mt(),e!==null&&(OI(e,1,t),Bt(e,t))}function Qe(e,t,g){if(e.tag===3)Hd(e,e,g);else for(;t!==null;){if(t.tag===3){Hd(t,e,g);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(gl===null||!gl.has(l))){e=vn(g,e),e=ah(t,e,1),t=tl(t,e,1),e=mt(),t!==null&&(OI(t,1,e),Bt(t,e));break}}t=t.return}}function ey(e,t,g){var l=e.pingCache;l!==null&&l.delete(t),t=mt(),e.pingedLanes|=e.suspendedLanes&g,gt===e&&(ot&g)===g&&($e===4||$e===3&&(ot&130023424)===ot&&500>De()-Es?Xl(e,0):xs|=g),Bt(e,t)}function Rh(e,t){t===0&&(e.mode&1?(t=si,si<<=1,!(si&130023424)&&(si=4194304)):t=1);var g=mt();e=Xg(e,t),e!==null&&(OI(e,t,g),Bt(e,g))}function ty(e){var t=e.memoizedState,g=0;t!==null&&(g=t.retryLane),Rh(e,g)}function gy(e,t){var g=0;switch(e.tag){case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(g=n.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(ee(314))}l!==null&&l.delete(t),Rh(e,g)}var Xh;Xh=function(e,t,g){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)Zt=!0;else{if(!(e.lanes&g)&&!(t.flags&128))return Zt=!1,MZ(e,t,g);Zt=!!(e.flags&131072)}else Zt=!1,Ke&&t.flags&1048576&&Ym(t,ro,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Ei(e,t),e=t.pendingProps;var n=Zn(t,ct.current);mn(t,g),n=Ys(null,t,l,e,n,g);var I=ws();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gt(l)?(I=!0,io(t)):I=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Ws(t),n.updater=Oo,t.stateNode=n,n._reactInternals=t,CC(t,l,e,g),t=dC(null,t,l,!0,I,g)):(t.tag=0,Ke&&I&&Zs(t),ut(null,t,n,g),t=t.child),t;case 16:l=t.elementType;e:{switch(Ei(e,t),e=t.pendingProps,n=l._init,l=n(l._payload),t.type=l,n=t.tag=ny(l),e=Pt(l,e),n){case 0:t=cC(null,t,l,e,g);break e;case 1:t=vd(null,t,l,e,g);break e;case 11:t=Gd(null,t,l,e,g);break e;case 14:t=Bd(null,t,l,Pt(l.type,e),g);break e}throw Error(ee(306,l,""))}return t;case 0:return l=t.type,n=t.pendingProps,n=t.elementType===l?n:Pt(l,n),cC(e,t,l,n,g);case 1:return l=t.type,n=t.pendingProps,n=t.elementType===l?n:Pt(l,n),vd(e,t,l,n,g);case 3:e:{if(dh(t),e===null)throw Error(ee(387));l=t.pendingProps,I=t.memoizedState,n=I.element,Fm(e,t),so(t,l,null,g);var i=t.memoizedState;if(l=i.element,I.isDehydrated)if(I={element:l,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=I,t.memoizedState=I,t.flags&256){n=vn(Error(ee(423)),t),t=Sd(e,t,l,g,n);break e}else if(l!==n){n=vn(Error(ee(424)),t),t=Sd(e,t,l,g,n);break e}else for(Vt=el(t.stateNode.containerInfo.firstChild),Wt=t,Ke=!0,qt=null,g=zm(t,null,l,g),t.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(yn(),l===n){t=kg(e,t,g);break e}ut(e,t,l,g)}t=t.child}return t;case 5:return Tm(t),e===null&&oC(t),l=t.type,n=t.pendingProps,I=e!==null?e.memoizedProps:null,i=n.children,gC(l,n)?i=null:I!==null&&gC(l,I)&&(t.flags|=32),ch(e,t),ut(e,t,i,g),t.child;case 6:return e===null&&oC(t),null;case 13:return uh(e,t,g);case 4:return Rs(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Gn(t,null,l,g):ut(e,t,l,g),t.child;case 11:return l=t.type,n=t.pendingProps,n=t.elementType===l?n:Pt(l,n),Gd(e,t,l,n,g);case 7:return ut(e,t,t.pendingProps,g),t.child;case 8:return ut(e,t,t.pendingProps.children,g),t.child;case 12:return ut(e,t,t.pendingProps.children,g),t.child;case 10:e:{if(l=t.type._context,n=t.pendingProps,I=t.memoizedProps,i=n.value,Je(ao,l._currentValue),l._currentValue=i,I!==null)if(lg(I.value,i)){if(I.children===n.children&&!yt.current){t=kg(e,t,g);break e}}else for(I=t.child,I!==null&&(I.return=t);I!==null;){var o=I.dependencies;if(o!==null){i=I.child;for(var r=o.firstContext;r!==null;){if(r.context===l){if(I.tag===1){r=Sg(-1,g&-g),r.tag=2;var a=I.updateQueue;if(a!==null){a=a.shared;var c=a.pending;c===null?r.next=r:(r.next=c.next,c.next=r),a.pending=r}}I.lanes|=g,r=I.alternate,r!==null&&(r.lanes|=g),rC(I.return,g,t),o.lanes|=g;break}r=r.next}}else if(I.tag===10)i=I.type===t.type?null:I.child;else if(I.tag===18){if(i=I.return,i===null)throw Error(ee(341));i.lanes|=g,o=i.alternate,o!==null&&(o.lanes|=g),rC(i,g,t),i=I.sibling}else i=I.child;if(i!==null)i.return=I;else for(i=I;i!==null;){if(i===t){i=null;break}if(I=i.sibling,I!==null){I.return=i.return,i=I;break}i=i.return}I=i}ut(e,t,n.children,g),t=t.child}return t;case 9:return n=t.type,l=t.pendingProps.children,mn(t,g),n=Mt(n),l=l(n),t.flags|=1,ut(e,t,l,g),t.child;case 14:return l=t.type,n=Pt(l,t.pendingProps),n=Pt(l.type,n),Bd(e,t,l,n,g);case 15:return Ch(e,t,t.type,t.pendingProps,g);case 17:return l=t.type,n=t.pendingProps,n=t.elementType===l?n:Pt(l,n),Ei(e,t),t.tag=1,Gt(l)?(e=!0,io(t)):e=!1,mn(t,g),xm(t,l,n),CC(t,l,n,g),dC(null,t,l,!0,e,g);case 19:return Ah(e,t,g);case 22:return sh(e,t,g)}throw Error(ee(156,t.tag))};function kh(e,t){return lm(e,t)}function ly(e,t,g,l){this.tag=e,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,g,l){return new ly(e,t,g,l)}function Ls(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ny(e){if(typeof e=="function")return Ls(e)?1:0;if(e!=null){if(e=e.$$typeof,e===as)return 11;if(e===Cs)return 14}return 2}function nl(e,t){var g=e.alternate;return g===null?(g=Et(e.tag,t,e.key,e.mode),g.elementType=e.elementType,g.type=e.type,g.stateNode=e.stateNode,g.alternate=e,e.alternate=g):(g.pendingProps=t,g.type=e.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=e.flags&14680064,g.childLanes=e.childLanes,g.lanes=e.lanes,g.child=e.child,g.memoizedProps=e.memoizedProps,g.memoizedState=e.memoizedState,g.updateQueue=e.updateQueue,t=e.dependencies,g.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},g.sibling=e.sibling,g.index=e.index,g.ref=e.ref,g}function Mi(e,t,g,l,n,I){var i=2;if(l=e,typeof e=="function")Ls(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case en:return kl(g.children,n,I,t);case rs:i=8,n|=8;break;case wa:return e=Et(12,g,t,n|2),e.elementType=wa,e.lanes=I,e;case Ha:return e=Et(13,g,t,n),e.elementType=Ha,e.lanes=I,e;case Na:return e=Et(19,g,t,n),e.elementType=Na,e.lanes=I,e;case EA:return $o(g,n,I,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case KA:i=10;break e;case xA:i=9;break e;case as:i=11;break e;case Cs:i=14;break e;case Eg:i=16,l=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Et(i,g,t,n),t.elementType=e,t.type=l,t.lanes=I,t}function kl(e,t,g,l){return e=Et(7,e,l,t),e.lanes=g,e}function $o(e,t,g,l){return e=Et(22,e,l,t),e.elementType=EA,e.lanes=g,e.stateNode={isHidden:!1},e}function oa(e,t,g){return e=Et(6,e,null,t),e.lanes=g,e}function ra(e,t,g){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=g,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Iy(e,t,g,l,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tr(0),this.expirationTimes=Tr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tr(0),this.identifierPrefix=l,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Us(e,t,g,l,n,I,i,o,r){return e=new Iy(e,t,g,o,r),t===1?(t=1,I===!0&&(t|=8)):t=0,I=Et(3,null,null,t),e.current=I,I.stateNode=e,I.memoizedState={element:l,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ws(I),e}function iy(e,t,g){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$l,key:l==null?null:""+l,children:e,containerInfo:t,implementation:g}}function Jh(e){if(!e)return ol;e=e._reactInternals;e:{if(zl(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var g=e.type;if(Gt(g))return km(e,g,t)}return t}function Yh(e,t,g,l,n,I,i,o,r){return e=Us(g,l,!0,e,n,I,i,o,r),e.context=Jh(null),g=e.current,l=mt(),n=ll(g),I=Sg(l,n),I.callback=t??null,tl(g,I,n),e.current.lanes=n,OI(e,n,l),Bt(e,l),e}function er(e,t,g,l){var n=t.current,I=mt(),i=ll(n);return g=Jh(g),t.context===null?t.context=g:t.pendingContext=g,t=Sg(I,i),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=tl(n,t,i),e!==null&&(gg(e,n,i,I),Fi(e,n,i)),i}function fo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var g=e.retryLane;e.retryLane=g!==0&&g<t?g:t}}function Qs(e,t){Nd(e,t),(e=e.alternate)&&Nd(e,t)}function oy(){return null}var wh=typeof reportError=="function"?reportError:function(e){console.error(e)};function js(e){this._internalRoot=e}tr.prototype.render=js.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));er(e,t,null,null)};tr.prototype.unmount=js.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kl(function(){er(null,e,null,null)}),t[Rg]=null}};function tr(e){this._internalRoot=e}tr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cm();e={blockedOn:null,target:e,priority:t};for(var g=0;g<Lg.length&&t!==0&&t<Lg[g].priority;g++);Lg.splice(g,0,e),g===0&&cm(e)}};function Ds(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fd(){}function ry(e,t,g,l,n){if(n){if(typeof l=="function"){var I=l;l=function(){var a=fo(i);I.call(a)}}var i=Yh(t,l,e,0,null,!1,!1,"",Fd);return e._reactRootContainer=i,e[Rg]=i.current,kI(e.nodeType===8?e.parentNode:e),Kl(),i}for(;n=e.lastChild;)e.removeChild(n);if(typeof l=="function"){var o=l;l=function(){var a=fo(r);o.call(a)}}var r=Us(e,0,!1,null,null,!1,!1,"",Fd);return e._reactRootContainer=r,e[Rg]=r.current,kI(e.nodeType===8?e.parentNode:e),Kl(function(){er(t,r,g,l)}),r}function lr(e,t,g,l,n){var I=g._reactRootContainer;if(I){var i=I;if(typeof n=="function"){var o=n;n=function(){var r=fo(i);o.call(r)}}er(t,i,e,n)}else i=ry(g,t,e,n,l);return fo(i)}rm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var g=aI(t.pendingLanes);g!==0&&(ds(t,g|1),Bt(t,De()),!(ye&6)&&(Sn=De()+500,cl()))}break;case 13:Kl(function(){var l=Xg(e,1);if(l!==null){var n=mt();gg(l,e,1,n)}}),Qs(e,1)}};us=function(e){if(e.tag===13){var t=Xg(e,134217728);if(t!==null){var g=mt();gg(t,e,134217728,g)}Qs(e,134217728)}};am=function(e){if(e.tag===13){var t=ll(e),g=Xg(e,t);if(g!==null){var l=mt();gg(g,e,t,l)}Qs(e,t)}};Cm=function(){return Ve};sm=function(e,t){var g=Ve;try{return Ve=e,t()}finally{Ve=g}};Qa=function(e,t,g){switch(t){case"input":if(xa(e,g),t=g.name,g.type==="radio"&&t!=null){for(g=e;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<g.length;t++){var l=g[t];if(l!==e&&l.form===e.form){var n=jo(l);if(!n)throw Error(ee(90));TA(l),xa(l,n)}}}break;case"textarea":LA(e,g);break;case"select":t=g.value,t!=null&&cn(e,!!g.multiple,t,!1)}};_A=zs;qA=Kl;var ay={usingClientEntryPoint:!1,Events:[_I,nn,jo,OA,PA,zs]},$n={findFiberByHostInstance:Sl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Cy={bundleType:$n.bundleType,version:$n.version,rendererPackageName:$n.rendererPackageName,rendererConfig:$n.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yg.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tm(e),e===null?null:e.stateNode},findFiberByHostInstance:$n.findFiberByHostInstance||oy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yi.isDisabled&&yi.supportsFiber)try{Mo=yi.inject(Cy),mg=yi}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ay;Xt.createPortal=function(e,t){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ds(t))throw Error(ee(200));return iy(e,t,null,g)};Xt.createRoot=function(e,t){if(!Ds(e))throw Error(ee(299));var g=!1,l="",n=wh;return t!=null&&(t.unstable_strictMode===!0&&(g=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Us(e,1,!1,null,null,g,!1,l,n),e[Rg]=t.current,kI(e.nodeType===8?e.parentNode:e),new js(t)};Xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=tm(t),e=e===null?null:e.stateNode,e};Xt.flushSync=function(e){return Kl(e)};Xt.hydrate=function(e,t,g){if(!gr(t))throw Error(ee(200));return lr(null,e,t,!0,g)};Xt.hydrateRoot=function(e,t,g){if(!Ds(e))throw Error(ee(405));var l=g!=null&&g.hydratedSources||null,n=!1,I="",i=wh;if(g!=null&&(g.unstable_strictMode===!0&&(n=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onRecoverableError!==void 0&&(i=g.onRecoverableError)),t=Yh(t,null,e,1,g??null,n,!1,I,i),e[Rg]=t.current,kI(e),l)for(e=0;e<l.length;e++)g=l[e],n=g._getVersion,n=n(g._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[g,n]:t.mutableSourceEagerHydrationData.push(g,n);return new tr(t)};Xt.render=function(e,t,g){if(!gr(t))throw Error(ee(200));return lr(null,e,t,!1,g)};Xt.unmountComponentAtNode=function(e){if(!gr(e))throw Error(ee(40));return e._reactRootContainer?(Kl(function(){lr(null,null,e,!1,function(){e._reactRootContainer=null,e[Rg]=null})}),!0):!1};Xt.unstable_batchedUpdates=zs;Xt.unstable_renderSubtreeIntoContainer=function(e,t,g,l){if(!gr(g))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return lr(e,t,g,!1,l)};Xt.version="18.2.0-next-9e3b772b8-20220608";function Hh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hh)}catch(e){console.error(e)}}Hh(),YA.exports=Xt;var Os=YA.exports;const Rl=al(Os);var Kd=Os;Ja.createRoot=Kd.createRoot,Ja.hydrateRoot=Kd.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EI(){return EI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l])}return e},EI.apply(this,arguments)}var Og;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Og||(Og={}));const xd="popstate";function sy(e){e===void 0&&(e={});function t(l,n){let{pathname:I,search:i,hash:o}=l.location;return vC("",{pathname:I,search:i,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function g(l,n){return typeof n=="string"?n:Zo(n)}return dy(t,g,null,e)}function Te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ps(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cy(){return Math.random().toString(36).substr(2,8)}function Ed(e,t){return{usr:e.state,key:e.key,idx:t}}function vC(e,t,g,l){return g===void 0&&(g=null),EI({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wn(t):t,{state:g,key:t&&t.key||l||cy()})}function Zo(e){let{pathname:t="/",search:g="",hash:l=""}=e;return g&&g!=="?"&&(t+=g.charAt(0)==="?"?g:"?"+g),l&&l!=="#"&&(t+=l.charAt(0)==="#"?l:"#"+l),t}function wn(e){let t={};if(e){let g=e.indexOf("#");g>=0&&(t.hash=e.substr(g),e=e.substr(0,g));let l=e.indexOf("?");l>=0&&(t.search=e.substr(l),e=e.substr(0,l)),e&&(t.pathname=e)}return t}function dy(e,t,g,l){l===void 0&&(l={});let{window:n=document.defaultView,v5Compat:I=!1}=l,i=n.history,o=Og.Pop,r=null,a=c();a==null&&(a=0,i.replaceState(EI({},i.state,{idx:a}),""));function c(){return(i.state||{idx:null}).idx}function s(){o=Og.Pop;let Z=c(),m=Z==null?null:Z-a;a=Z,r&&r({action:o,location:p.location,delta:m})}function d(Z,m){o=Og.Push;let u=vC(p.location,Z,m);g&&g(u,Z),a=c()+1;let h=Ed(u,a),b=p.createHref(u);try{i.pushState(h,"",b)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;n.location.assign(b)}I&&r&&r({action:o,location:p.location,delta:1})}function A(Z,m){o=Og.Replace;let u=vC(p.location,Z,m);g&&g(u,Z),a=c();let h=Ed(u,a),b=p.createHref(u);i.replaceState(h,"",b),I&&r&&r({action:o,location:p.location,delta:0})}function f(Z){let m=n.location.origin!=="null"?n.location.origin:n.location.href,u=typeof Z=="string"?Z:Zo(Z);return Te(m,"No window.location.(origin|href) available to create URL for href: "+u),new URL(u,m)}let p={get action(){return o},get location(){return e(n,i)},listen(Z){if(r)throw new Error("A history only accepts one active listener");return n.addEventListener(xd,s),r=Z,()=>{n.removeEventListener(xd,s),r=null}},createHref(Z){return t(n,Z)},createURL:f,encodeLocation(Z){let m=f(Z);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:A,go(Z){return i.go(Z)}};return p}var zd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(zd||(zd={}));function uy(e,t,g){g===void 0&&(g="/");let l=typeof t=="string"?wn(t):t,n=Vn(l.pathname||"/",g);if(n==null)return null;let I=Nh(e);Ay(I);let i=null;for(let o=0;i==null&&o<I.length;++o)i=By(I[o],Sy(n));return i}function Nh(e,t,g,l){t===void 0&&(t=[]),g===void 0&&(g=[]),l===void 0&&(l="");let n=(I,i,o)=>{let r={relativePath:o===void 0?I.path||"":o,caseSensitive:I.caseSensitive===!0,childrenIndex:i,route:I};r.relativePath.startsWith("/")&&(Te(r.relativePath.startsWith(l),'Absolute route path "'+r.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),r.relativePath=r.relativePath.slice(l.length));let a=Il([l,r.relativePath]),c=g.concat(r);I.children&&I.children.length>0&&(Te(I.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),Nh(I.children,t,c,a)),!(I.path==null&&!I.index)&&t.push({path:a,score:yy(a,I.index),routesMeta:c})};return e.forEach((I,i)=>{var o;if(I.path===""||!((o=I.path)!=null&&o.includes("?")))n(I,i);else for(let r of Fh(I.path))n(I,i,r)}),t}function Fh(e){let t=e.split("/");if(t.length===0)return[];let[g,...l]=t,n=g.endsWith("?"),I=g.replace(/\?$/,"");if(l.length===0)return n?[I,""]:[I];let i=Fh(l.join("/")),o=[];return o.push(...i.map(r=>r===""?I:[I,r].join("/"))),n&&o.push(...i),o.map(r=>e.startsWith("/")&&r===""?"/":r)}function Ay(e){e.sort((t,g)=>t.score!==g.score?g.score-t.score:Gy(t.routesMeta.map(l=>l.childrenIndex),g.routesMeta.map(l=>l.childrenIndex)))}const my=/^:[\w-]+$/,hy=3,by=2,py=1,fy=10,Zy=-2,Td=e=>e==="*";function yy(e,t){let g=e.split("/"),l=g.length;return g.some(Td)&&(l+=Zy),t&&(l+=by),g.filter(n=>!Td(n)).reduce((n,I)=>n+(my.test(I)?hy:I===""?py:fy),l)}function Gy(e,t){return e.length===t.length&&e.slice(0,-1).every((l,n)=>l===t[n])?e[e.length-1]-t[t.length-1]:0}function By(e,t){let{routesMeta:g}=e,l={},n="/",I=[];for(let i=0;i<g.length;++i){let o=g[i],r=i===g.length-1,a=n==="/"?t:t.slice(n.length)||"/",c=SC({path:o.relativePath,caseSensitive:o.caseSensitive,end:r},a);if(!c)return null;Object.assign(l,c.params);let s=o.route;I.push({params:l,pathname:Il([n,c.pathname]),pathnameBase:ky(Il([n,c.pathnameBase])),route:s}),c.pathnameBase!=="/"&&(n=Il([n,c.pathnameBase]))}return I}function SC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[g,l]=vy(e.path,e.caseSensitive,e.end),n=t.match(g);if(!n)return null;let I=n[0],i=I.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:l.reduce((a,c,s)=>{let{paramName:d,isOptional:A}=c;if(d==="*"){let p=o[s]||"";i=I.slice(0,I.length-p.length).replace(/(.)\/+$/,"$1")}const f=o[s];return A&&!f?a[d]=void 0:a[d]=Vy(f||"",d),a},{}),pathname:I,pathnameBase:i,pattern:e}}function vy(e,t,g){t===void 0&&(t=!1),g===void 0&&(g=!0),Ps(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,r)=>(l.push({paramName:o,isOptional:r!=null}),r?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(l.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):g?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),l]}function Sy(e){try{return decodeURI(e)}catch(t){return Ps(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vy(e,t){try{return decodeURIComponent(e)}catch(g){return Ps(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+g+").")),e}}function Vn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let g=t.endsWith("/")?t.length-1:t.length,l=e.charAt(g);return l&&l!=="/"?null:e.slice(g)||"/"}function Wy(e,t){t===void 0&&(t="/");let{pathname:g,search:l="",hash:n=""}=typeof e=="string"?wn(e):e;return{pathname:g?g.startsWith("/")?g:Ry(g,t):t,search:Jy(l),hash:Yy(n)}}function Ry(e,t){let g=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?g.length>1&&g.pop():n!=="."&&g.push(n)}),g.length>1?g.join("/"):"/"}function aa(e,t,g,l){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+g+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xy(e){return e.filter((t,g)=>g===0||t.route.path&&t.route.path.length>0)}function _s(e,t){let g=Xy(e);return t?g.map((l,n)=>n===e.length-1?l.pathname:l.pathnameBase):g.map(l=>l.pathnameBase)}function qs(e,t,g,l){l===void 0&&(l=!1);let n;typeof e=="string"?n=wn(e):(n=EI({},e),Te(!n.pathname||!n.pathname.includes("?"),aa("?","pathname","search",n)),Te(!n.pathname||!n.pathname.includes("#"),aa("#","pathname","hash",n)),Te(!n.search||!n.search.includes("#"),aa("#","search","hash",n)));let I=e===""||n.pathname==="",i=I?"/":n.pathname,o;if(i==null)o=g;else{let s=t.length-1;if(!l&&i.startsWith("..")){let d=i.split("/");for(;d[0]==="..";)d.shift(),s-=1;n.pathname=d.join("/")}o=s>=0?t[s]:"/"}let r=Wy(n,o),a=i&&i!=="/"&&i.endsWith("/"),c=(I||i===".")&&g.endsWith("/");return!r.pathname.endsWith("/")&&(a||c)&&(r.pathname+="/"),r}const Il=e=>e.join("/").replace(/\/\/+/g,"/"),ky=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Jy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Yy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Kh=["post","put","patch","delete"];new Set(Kh);const Hy=["get",...Kh];new Set(Hy);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zI(){return zI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l])}return e},zI.apply(this,arguments)}const nr=k.createContext(null),xh=k.createContext(null),wg=k.createContext(null),Ir=k.createContext(null),dl=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Eh=k.createContext(null);function Ny(e,t){let{relative:g}=t===void 0?{}:t;Hn()||Te(!1);let{basename:l,navigator:n}=k.useContext(wg),{hash:I,pathname:i,search:o}=ir(e,{relative:g}),r=i;return l!=="/"&&(r=i==="/"?l:Il([l,i])),n.createHref({pathname:r,search:o,hash:I})}function Hn(){return k.useContext(Ir)!=null}function Ut(){return Hn()||Te(!1),k.useContext(Ir).location}function zh(e){k.useContext(wg).static||k.useLayoutEffect(e)}function _e(){let{isDataRoute:e}=k.useContext(dl);return e?Oy():Fy()}function Fy(){Hn()||Te(!1);let e=k.useContext(nr),{basename:t,future:g,navigator:l}=k.useContext(wg),{matches:n}=k.useContext(dl),{pathname:I}=Ut(),i=JSON.stringify(_s(n,g.v7_relativeSplatPath)),o=k.useRef(!1);return zh(()=>{o.current=!0}),k.useCallback(function(a,c){if(c===void 0&&(c={}),!o.current)return;if(typeof a=="number"){l.go(a);return}let s=qs(a,JSON.parse(i),I,c.relative==="path");e==null&&t!=="/"&&(s.pathname=s.pathname==="/"?t:Il([t,s.pathname])),(c.replace?l.replace:l.push)(s,c.state,c)},[t,l,i,I,e])}function ir(e,t){let{relative:g}=t===void 0?{}:t,{future:l}=k.useContext(wg),{matches:n}=k.useContext(dl),{pathname:I}=Ut(),i=JSON.stringify(_s(n,l.v7_relativeSplatPath));return k.useMemo(()=>qs(e,JSON.parse(i),I,g==="path"),[e,i,I,g])}function Ky(e,t){return xy(e,t)}function xy(e,t,g,l){Hn()||Te(!1);let{navigator:n}=k.useContext(wg),{matches:I}=k.useContext(dl),i=I[I.length-1],o=i?i.params:{};i&&i.pathname;let r=i?i.pathnameBase:"/";i&&i.route;let a=Ut(),c;if(t){var s;let Z=typeof t=="string"?wn(t):t;r==="/"||(s=Z.pathname)!=null&&s.startsWith(r)||Te(!1),c=Z}else c=a;let d=c.pathname||"/",A=r==="/"?d:d.slice(r.length)||"/",f=uy(e,{pathname:A}),p=Ly(f&&f.map(Z=>Object.assign({},Z,{params:Object.assign({},o,Z.params),pathname:Il([r,n.encodeLocation?n.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?r:Il([r,n.encodeLocation?n.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),I,g,l);return t&&p?k.createElement(Ir.Provider,{value:{location:zI({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Og.Pop}},p):p}function Ey(){let e=Dy(),t=wy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),g=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},I=null;return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),g?k.createElement("pre",{style:n},g):null,I)}const zy=k.createElement(Ey,null);class Ty extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,g){return g.location!==t.location||g.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:g.error,location:g.location,revalidation:t.revalidation||g.revalidation}}componentDidCatch(t,g){console.error("React Router caught the following error during render",t,g)}render(){return this.state.error!==void 0?k.createElement(dl.Provider,{value:this.props.routeContext},k.createElement(Eh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function My(e){let{routeContext:t,match:g,children:l}=e,n=k.useContext(nr);return n&&n.static&&n.staticContext&&(g.route.errorElement||g.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=g.route.id),k.createElement(dl.Provider,{value:t},l)}function Ly(e,t,g,l){var n;if(t===void 0&&(t=[]),g===void 0&&(g=null),l===void 0&&(l=null),e==null){var I;if((I=g)!=null&&I.errors)e=g.matches;else return null}let i=e,o=(n=g)==null?void 0:n.errors;if(o!=null){let c=i.findIndex(s=>s.route.id&&(o==null?void 0:o[s.route.id]));c>=0||Te(!1),i=i.slice(0,Math.min(i.length,c+1))}let r=!1,a=-1;if(g&&l&&l.v7_partialHydration)for(let c=0;c<i.length;c++){let s=i[c];if((s.route.HydrateFallback||s.route.hydrateFallbackElement)&&(a=c),s.route.id){let{loaderData:d,errors:A}=g,f=s.route.loader&&d[s.route.id]===void 0&&(!A||A[s.route.id]===void 0);if(s.route.lazy||f){r=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((c,s,d)=>{let A,f=!1,p=null,Z=null;g&&(A=o&&s.route.id?o[s.route.id]:void 0,p=s.route.errorElement||zy,r&&(a<0&&d===0?(Py("route-fallback",!1),f=!0,Z=null):a===d&&(f=!0,Z=s.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,d+1)),u=()=>{let h;return A?h=p:f?h=Z:s.route.Component?h=k.createElement(s.route.Component,null):s.route.element?h=s.route.element:h=c,k.createElement(My,{match:s,routeContext:{outlet:c,matches:m,isDataRoute:g!=null},children:h})};return g&&(s.route.ErrorBoundary||s.route.errorElement||d===0)?k.createElement(Ty,{location:g.location,revalidation:g.revalidation,component:p,error:A,children:u(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):u()},null)}var Th=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Th||{}),yo=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yo||{});function Uy(e){let t=k.useContext(nr);return t||Te(!1),t}function Qy(e){let t=k.useContext(xh);return t||Te(!1),t}function jy(e){let t=k.useContext(dl);return t||Te(!1),t}function Mh(e){let t=jy(),g=t.matches[t.matches.length-1];return g.route.id||Te(!1),g.route.id}function Dy(){var e;let t=k.useContext(Eh),g=Qy(yo.UseRouteError),l=Mh(yo.UseRouteError);return t!==void 0?t:(e=g.errors)==null?void 0:e[l]}function Oy(){let{router:e}=Uy(Th.UseNavigateStable),t=Mh(yo.UseNavigateStable),g=k.useRef(!1);return zh(()=>{g.current=!0}),k.useCallback(function(n,I){I===void 0&&(I={}),g.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,zI({fromRouteId:t},I)))},[e,t])}const Md={};function Py(e,t,g){!t&&!Md[e]&&(Md[e]=!0)}function $s(e){let{to:t,replace:g,state:l,relative:n}=e;Hn()||Te(!1);let{future:I,static:i}=k.useContext(wg),{matches:o}=k.useContext(dl),{pathname:r}=Ut(),a=_e(),c=qs(t,_s(o,I.v7_relativeSplatPath),r,n==="path"),s=JSON.stringify(c);return k.useEffect(()=>a(JSON.parse(s),{replace:g,state:l,relative:n}),[a,s,n,g,l]),null}function je(e){Te(!1)}function _y(e){let{basename:t="/",children:g=null,location:l,navigationType:n=Og.Pop,navigator:I,static:i=!1,future:o}=e;Hn()&&Te(!1);let r=t.replace(/^\/*/,"/"),a=k.useMemo(()=>({basename:r,navigator:I,static:i,future:zI({v7_relativeSplatPath:!1},o)}),[r,o,I,i]);typeof l=="string"&&(l=wn(l));let{pathname:c="/",search:s="",hash:d="",state:A=null,key:f="default"}=l,p=k.useMemo(()=>{let Z=Vn(c,r);return Z==null?null:{location:{pathname:Z,search:s,hash:d,state:A,key:f},navigationType:n}},[r,c,s,d,A,f,n]);return p==null?null:k.createElement(wg.Provider,{value:a},k.createElement(Ir.Provider,{children:g,value:p}))}function qy(e){let{children:t,location:g}=e;return Ky(VC(t),g)}new Promise(()=>{});function VC(e,t){t===void 0&&(t=[]);let g=[];return k.Children.forEach(e,(l,n)=>{if(!k.isValidElement(l))return;let I=[...t,n];if(l.type===k.Fragment){g.push.apply(g,VC(l.props.children,I));return}l.type!==je&&Te(!1),!l.props.index||!l.props.children||Te(!1);let i={id:l.props.id||I.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(i.children=VC(l.props.children,I)),g.push(i)}),g}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Go(){return Go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l])}return e},Go.apply(this,arguments)}function Lh(e,t){if(e==null)return{};var g={},l=Object.keys(e),n,I;for(I=0;I<l.length;I++)n=l[I],!(t.indexOf(n)>=0)&&(g[n]=e[n]);return g}function $y(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function eG(e,t){return e.button===0&&(!t||t==="_self")&&!$y(e)}const tG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],gG=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],lG=k.createContext({isTransitioning:!1}),nG="startTransition",Ld=ef[nG];function IG(e){let{basename:t,children:g,future:l,window:n}=e,I=k.useRef();I.current==null&&(I.current=sy({window:n,v5Compat:!0}));let i=I.current,[o,r]=k.useState({action:i.action,location:i.location}),{v7_startTransition:a}=l||{},c=k.useCallback(s=>{a&&Ld?Ld(()=>r(s)):r(s)},[r,a]);return k.useLayoutEffect(()=>i.listen(c),[i,c]),k.createElement(_y,{basename:t,children:g,location:o.location,navigationType:o.action,navigator:i,future:l})}const iG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uh=k.forwardRef(function(t,g){let{onClick:l,relative:n,reloadDocument:I,replace:i,state:o,target:r,to:a,preventScrollReset:c,unstable_viewTransition:s}=t,d=Lh(t,tG),{basename:A}=k.useContext(wg),f,p=!1;if(typeof a=="string"&&oG.test(a)&&(f=a,iG))try{let h=new URL(window.location.href),b=a.startsWith("//")?new URL(h.protocol+a):new URL(a),y=Vn(b.pathname,A);b.origin===h.origin&&y!=null?a=y+b.search+b.hash:p=!0}catch{}let Z=Ny(a,{relative:n}),m=aG(a,{replace:i,state:o,target:r,preventScrollReset:c,relative:n,unstable_viewTransition:s});function u(h){l&&l(h),h.defaultPrevented||m(h)}return k.createElement("a",Go({},d,{href:f||Z,onClick:p||I?l:u,ref:g,target:r}))}),Tg=k.forwardRef(function(t,g){let{"aria-current":l="page",caseSensitive:n=!1,className:I="",end:i=!1,style:o,to:r,unstable_viewTransition:a,children:c}=t,s=Lh(t,gG),d=ir(r,{relative:s.relative}),A=Ut(),f=k.useContext(xh),{navigator:p,basename:Z}=k.useContext(wg),m=f!=null&&CG(d)&&a===!0,u=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,h=A.pathname,b=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(h=h.toLowerCase(),b=b?b.toLowerCase():null,u=u.toLowerCase()),b&&Z&&(b=Vn(b,Z)||b);const y=u!=="/"&&u.endsWith("/")?u.length-1:u.length;let V=h===u||!i&&h.startsWith(u)&&h.charAt(y)==="/",v=b!=null&&(b===u||!i&&b.startsWith(u)&&b.charAt(u.length)==="/"),S={isActive:V,isPending:v,isTransitioning:m},X=V?l:void 0,G;typeof I=="function"?G=I(S):G=[I,V?"active":null,v?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let B=typeof o=="function"?o(S):o;return k.createElement(Uh,Go({},s,{"aria-current":X,className:G,ref:g,style:B,to:r,unstable_viewTransition:a}),typeof c=="function"?c(S):c)});var WC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(WC||(WC={}));var Ud;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ud||(Ud={}));function rG(e){let t=k.useContext(nr);return t||Te(!1),t}function aG(e,t){let{target:g,replace:l,state:n,preventScrollReset:I,relative:i,unstable_viewTransition:o}=t===void 0?{}:t,r=_e(),a=Ut(),c=ir(e,{relative:i});return k.useCallback(s=>{if(eG(s,g)){s.preventDefault();let d=l!==void 0?l:Zo(a)===Zo(c);r(e,{replace:d,state:n,preventScrollReset:I,relative:i,unstable_viewTransition:o})}},[a,r,c,l,n,g,e,I,i,o])}function CG(e,t){t===void 0&&(t={});let g=k.useContext(lG);g==null&&Te(!1);let{basename:l}=rG(WC.useViewTransitionState),n=ir(e,{relative:t.relative});if(!g.isTransitioning)return!1;let I=Vn(g.currentLocation.pathname,l)||g.currentLocation.pathname,i=Vn(g.nextLocation.pathname,l)||g.nextLocation.pathname;return SC(n.pathname,i)!=null||SC(n.pathname,I)!=null}const ec="/assets/KnowMe2-1b6ccfbb.svg";function or(e,t){if(e==null)return{};var g={},l=Object.keys(e),n,I;for(I=0;I<l.length;I++)n=l[I],!(t.indexOf(n)>=0)&&(g[n]=e[n]);return g}function Wn(){return Wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l])}return e},Wn.apply(this,arguments)}function RC(e,t){return RC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,n){return l.__proto__=n,l},RC(e,t)}function Qh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,RC(e,t)}function Ca(e,t,g){if(g||arguments.length===2)for(var l=0,n=t.length,I;l<n;l++)(I||!(l in t))&&(I||(I=Array.prototype.slice.call(t,0,l)),I[l]=t[l]);return e.concat(I||Array.prototype.slice.call(t))}/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Qd=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,sG=/\\([\u000b\u0020-\u00ff])/g,cG=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,dG=uG;function uG(e){if(!e)throw new TypeError("argument string is required");var t=typeof e=="object"?AG(e):e;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var g=t.indexOf(";"),l=g!==-1?t.slice(0,g).trim():t.trim();if(!cG.test(l))throw new TypeError("invalid media type");var n=new mG(l.toLowerCase());if(g!==-1){var I,i,o;for(Qd.lastIndex=g;i=Qd.exec(t);){if(i.index!==g)throw new TypeError("invalid parameter format");g+=i[0].length,I=i[1].toLowerCase(),o=i[2],o.charCodeAt(0)===34&&(o=o.slice(1,-1),o.indexOf("\\")!==-1&&(o=o.replace(sG,"$1"))),n.parameters[I]=o}if(g!==t.length)throw new TypeError("invalid parameter format")}return n}function AG(e){var t;if(typeof e.getHeader=="function"?t=e.getHeader("content-type"):typeof e.headers=="object"&&(t=e.headers&&e.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function mG(e){this.parameters=Object.create(null),this.type=e}var ql=new Map,jh=function(t){return t.cloneNode(!0)},jd=function(){return window.location.protocol==="file:"},Dh=function(t,g,l){var n=new XMLHttpRequest;n.onreadystatechange=function(){try{if(!/\.svg/i.test(t)&&n.readyState===2){var I=n.getResponseHeader("Content-Type");if(!I)throw new Error("Content type not found");var i=dG(I).type;if(!(i==="image/svg+xml"||i==="text/plain"))throw new Error("Invalid content type: ".concat(i))}if(n.readyState===4){if(n.status===404||n.responseXML===null)throw new Error(jd()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+t);if(n.status===200||jd()&&n.status===0)l(null,n);else throw new Error("There was a problem injecting the SVG: "+n.status+" "+n.statusText)}}catch(o){if(n.abort(),o instanceof Error)l(o,n);else throw o}},n.open("GET",t),n.withCredentials=g,n.overrideMimeType&&n.overrideMimeType("text/xml"),n.send()},Qg={},Dd=function(t,g){Qg[t]=Qg[t]||[],Qg[t].push(g)},hG=function(t){for(var g=function(i,o){setTimeout(function(){if(Array.isArray(Qg[t])){var r=ql.get(t),a=Qg[t][i];r instanceof SVGSVGElement&&a(null,jh(r)),r instanceof Error&&a(r),i===Qg[t].length-1&&delete Qg[t]}},0)},l=0,n=Qg[t].length;l<n;l++)g(l)},bG=function(t,g,l){if(ql.has(t)){var n=ql.get(t);if(n===void 0){Dd(t,l);return}if(n instanceof SVGSVGElement){l(null,jh(n));return}}ql.set(t,void 0),Dd(t,l),Dh(t,g,function(I,i){var o;I?ql.set(t,I):((o=i.responseXML)===null||o===void 0?void 0:o.documentElement)instanceof SVGSVGElement&&ql.set(t,i.responseXML.documentElement),hG(t)})},pG=function(t,g,l){Dh(t,g,function(n,I){var i;n?l(n):((i=I.responseXML)===null||i===void 0?void 0:i.documentElement)instanceof SVGSVGElement&&l(null,I.responseXML.documentElement)})},fG=0,ZG=function(){return++fG},og=[],Od={},yG="http://www.w3.org/2000/svg",sa="http://www.w3.org/1999/xlink",Pd=function(t,g,l,n,I,i,o){var r=t.getAttribute("data-src")||t.getAttribute("src");if(!r){o(new Error("Invalid data-src or src attribute"));return}if(og.indexOf(t)!==-1){og.splice(og.indexOf(t),1),t=null;return}og.push(t),t.setAttribute("src","");var a=n?bG:pG;a(r,I,function(c,s){if(!s){og.splice(og.indexOf(t),1),t=null,o(c);return}var d=t.getAttribute("id");d&&s.setAttribute("id",d);var A=t.getAttribute("title");A&&s.setAttribute("title",A);var f=t.getAttribute("width");f&&s.setAttribute("width",f);var p=t.getAttribute("height");p&&s.setAttribute("height",p);var Z=Array.from(new Set(Ca(Ca(Ca([],(s.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(t.getAttribute("class")||"").split(" "),!0))).join(" ").trim();s.setAttribute("class",Z);var m=t.getAttribute("style");m&&s.setAttribute("style",m),s.setAttribute("data-src",r);var u=[].filter.call(t.attributes,function(E){return/^data-\w[\w-]*$/.test(E.name)});if(Array.prototype.forEach.call(u,function(E){E.name&&E.value&&s.setAttribute(E.name,E.value)}),l){var h={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},b,y,V,v,S;Object.keys(h).forEach(function(E){b=E,V=h[E],y=s.querySelectorAll(b+"[id]");for(var x=function(K,z){v=y[K].id,S=v+"-"+ZG();var L;Array.prototype.forEach.call(V,function(Ie){L=s.querySelectorAll("["+Ie+'*="'+v+'"]');for(var ae=0,oe=L.length;ae<oe;ae++){var Xe=L[ae].getAttribute(Ie);Xe&&!Xe.match(new RegExp('url\\("?#'+v+'"?\\)'))||L[ae].setAttribute(Ie,"url(#"+S+")")}});for(var H=s.querySelectorAll("[*|href]"),T=[],Q=0,j=H.length;Q<j;Q++){var D=H[Q].getAttributeNS(sa,"href");D&&D.toString()==="#"+y[K].id&&T.push(H[Q])}for(var te=0,ne=T.length;te<ne;te++)T[te].setAttributeNS(sa,"href","#"+S);y[K].id=S},w=0,J=y.length;w<J;w++)x(w)})}s.removeAttribute("xmlns:a");for(var X=s.querySelectorAll("script"),G=[],B,W,R=0,Y=X.length;R<Y;R++)W=X[R].getAttribute("type"),(!W||W==="application/ecmascript"||W==="application/javascript"||W==="text/javascript")&&(B=X[R].innerText||X[R].textContent,B&&G.push(B),s.removeChild(X[R]));if(G.length>0&&(g==="always"||g==="once"&&!Od[r])){for(var F=0,M=G.length;F<M;F++)new Function(G[F])(window);Od[r]=!0}var U=s.querySelectorAll("style");if(Array.prototype.forEach.call(U,function(E){E.textContent+=""}),s.setAttribute("xmlns",yG),s.setAttribute("xmlns:xlink",sa),i(s),!t.parentNode){og.splice(og.indexOf(t),1),t=null,o(new Error("Parent node is null"));return}t.parentNode.replaceChild(s,t),og.splice(og.indexOf(t),1),t=null,o(null,s)})},GG=function(t,g){var l=g===void 0?{}:g,n=l.afterAll,I=n===void 0?function(){}:n,i=l.afterEach,o=i===void 0?function(){}:i,r=l.beforeEach,a=r===void 0?function(){}:r,c=l.cacheRequests,s=c===void 0?!0:c,d=l.evalScripts,A=d===void 0?"never":d,f=l.httpRequestWithCredentials,p=f===void 0?!1:f,Z=l.renumerateIRIElements,m=Z===void 0?!0:Z;if(t&&"length"in t)for(var u=0,h=0,b=t.length;h<b;h++)Pd(t[h],A,m,s,p,a,function(y,V){o(y,V),t&&"length"in t&&t.length===++u&&I(u)});else t?Pd(t,A,m,s,p,a,function(y,V){o(y,V),I(1),t=null}):I(0)},Oh={exports:{}},BG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vG=BG,SG=vG;function Ph(){}function _h(){}_h.resetWarningCache=Ph;var VG=function(){function e(l,n,I,i,o,r){if(r!==SG){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}e.isRequired=e;function t(){return e}var g={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_h,resetWarningCache:Ph};return g.PropTypes=g,g};Oh.exports=VG();var Ue=Oh.exports;const Ze=al(Ue);var WG=function(t){var g=(t==null?void 0:t.ownerDocument)||document;return g.defaultView||window},RG=function(t,g){for(var l in t)if(!(l in g))return!0;for(var n in g)if(t[n]!==g[n])return!0;return!1},XG=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],Gi="http://www.w3.org/2000/svg",_d="http://www.w3.org/1999/xlink",$I=function(e){Qh(t,e);function t(){for(var l,n=arguments.length,I=new Array(n),i=0;i<n;i++)I[i]=arguments[i];return l=e.call.apply(e,[this].concat(I))||this,l.initialState={hasError:!1,isLoading:!0},l.state=l.initialState,l._isMounted=!1,l.reactWrapper=void 0,l.nonReactWrapper=void 0,l.refCallback=function(o){l.reactWrapper=o},l}var g=t.prototype;return g.renderSVG=function(){var n=this;if(this.reactWrapper instanceof WG(this.reactWrapper).Node){var I=this.props,i=I.desc,o=I.evalScripts,r=I.httpRequestWithCredentials,a=I.renumerateIRIElements,c=I.src,s=I.title,d=I.useRequestCache,A=this.props.onError,f=this.props.beforeInjection,p=this.props.afterInjection,Z=this.props.wrapper,m,u;Z==="svg"?(m=document.createElementNS(Gi,Z),m.setAttribute("xmlns",Gi),m.setAttribute("xmlns:xlink",_d),u=document.createElementNS(Gi,Z)):(m=document.createElement(Z),u=document.createElement(Z)),m.appendChild(u),u.dataset.src=c,this.nonReactWrapper=this.reactWrapper.appendChild(m);var h=function(v){if(n.removeSVG(),!n._isMounted){A(v);return}n.setState(function(){return{hasError:!0,isLoading:!1}},function(){A(v)})},b=function(v,S){if(v){h(v);return}n._isMounted&&n.setState(function(){return{isLoading:!1}},function(){try{p(S)}catch(X){h(X)}})},y=function(v){if(v.setAttribute("role","img"),i){var S=v.querySelector(":scope > desc");S&&v.removeChild(S);var X=document.createElement("desc");X.innerHTML=i,v.prepend(X)}if(s){var G=v.querySelector(":scope > title");G&&v.removeChild(G);var B=document.createElement("title");B.innerHTML=s,v.prepend(B)}try{f(v)}catch(W){h(W)}};GG(u,{afterEach:b,beforeEach:y,cacheRequests:d,evalScripts:o,httpRequestWithCredentials:r,renumerateIRIElements:a})}},g.removeSVG=function(){var n;(n=this.nonReactWrapper)!=null&&n.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},g.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},g.componentDidUpdate=function(n){var I=this;RG(Wn({},n),this.props)&&this.setState(function(){return I.initialState},function(){I.removeSVG(),I.renderSVG()})},g.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},g.render=function(){var n=this.props;n.afterInjection,n.beforeInjection,n.desc,n.evalScripts;var I=n.fallback;n.httpRequestWithCredentials;var i=n.loading;n.renumerateIRIElements,n.src,n.title,n.useRequestCache;var o=n.wrapper,r=or(n,XG),a=o;return k.createElement(a,Wn({},r,{ref:this.refCallback},o==="svg"?{xmlns:Gi,xmlnsXlink:_d}:{}),this.state.isLoading&&i&&k.createElement(i,null),this.state.hasError&&I&&k.createElement(I,null))},t}(k.Component);$I.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};$I.propTypes={afterInjection:Ue.func,beforeInjection:Ue.func,desc:Ue.string,evalScripts:Ue.oneOf(["always","once","never"]),fallback:Ue.oneOfType([Ue.func,Ue.object,Ue.string]),httpRequestWithCredentials:Ue.bool,loading:Ue.oneOfType([Ue.func,Ue.object,Ue.string]),onError:Ue.func,renumerateIRIElements:Ue.bool,src:Ue.string.isRequired,title:Ue.string,useRequestCache:Ue.bool,wrapper:Ue.oneOf(["div","span","svg"])};var qh={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function g(){for(var I="",i=0;i<arguments.length;i++){var o=arguments[i];o&&(I=n(I,l(o)))}return I}function l(I){if(typeof I=="string"||typeof I=="number")return I;if(typeof I!="object")return"";if(Array.isArray(I))return g.apply(null,I);if(I.toString!==Object.prototype.toString&&!I.toString.toString().includes("[native code]"))return I.toString();var i="";for(var o in I)t.call(I,o)&&I[o]&&(i=n(i,o));return i}function n(I,i){return i?I?I+" "+i:I+i:I}e.exports?(g.default=g,e.exports=g):window.classNames=g})()})(qh);var kG=qh.exports;const be=al(kG);function qd(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function JG(e){var t=YG(e,"string");return typeof t=="symbol"?t:String(t)}function YG(e,t){if(typeof e!="object"||e===null)return e;var g=e[Symbol.toPrimitive];if(g!==void 0){var l=g.call(e,t||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wG(e,t,g){var l=k.useRef(e!==void 0),n=k.useState(t),I=n[0],i=n[1],o=e!==void 0,r=l.current;return l.current=o,!o&&r&&I!==t&&i(t),[o?e:I,k.useCallback(function(a){for(var c=arguments.length,s=new Array(c>1?c-1:0),d=1;d<c;d++)s[d-1]=arguments[d];g&&g.apply(void 0,[a].concat(s)),i(a)},[g])]}function HG(e,t){return Object.keys(t).reduce(function(g,l){var n,I=g,i=I[qd(l)],o=I[l],r=or(I,[qd(l),l].map(JG)),a=t[l],c=wG(o,i,e[a]),s=c[0],d=c[1];return Wn({},r,(n={},n[l]=s,n[a]=d,n))},e)}const NG=["xxl","xl","lg","md","sm","xs"],FG="xs",rr=k.createContext({prefixes:{},breakpoints:NG,minBreakpoint:FG});function Ge(e,t){const{prefixes:g}=k.useContext(rr);return e||g[t]||t}function $h(){const{breakpoints:e}=k.useContext(rr);return e}function e0(){const{minBreakpoint:e}=k.useContext(rr);return e}function KG(){const{dir:e}=k.useContext(rr);return e==="rtl"}function ar(e){return e&&e.ownerDocument||document}function xG(e){var t=ar(e);return t&&t.defaultView||window}function EG(e,t){return xG(e).getComputedStyle(e,t)}var zG=/([A-Z])/g;function TG(e){return e.replace(zG,"-$1").toLowerCase()}var MG=/^ms-/;function Bi(e){return TG(e).replace(MG,"-ms-")}var LG=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function UG(e){return!!(e&&LG.test(e))}function Jl(e,t){var g="",l="";if(typeof t=="string")return e.style.getPropertyValue(Bi(t))||EG(e).getPropertyValue(Bi(t));Object.keys(t).forEach(function(n){var I=t[n];!I&&I!==0?e.style.removeProperty(Bi(n)):UG(n)?l+=n+"("+I+") ":g+=Bi(n)+": "+I+";"}),l&&(g+="transform: "+l+";"),e.style.cssText+=";"+g}const $d={disabled:!1},t0=q.createContext(null);var QG=function(t){return t.scrollTop},sI="unmounted",Gl="exited",Mg="entering",vl="entered",XC="exiting",Hg=function(e){Qh(t,e);function t(l,n){var I;I=e.call(this,l,n)||this;var i=n,o=i&&!i.isMounting?l.enter:l.appear,r;return I.appearStatus=null,l.in?o?(r=Gl,I.appearStatus=Mg):r=vl:l.unmountOnExit||l.mountOnEnter?r=sI:r=Gl,I.state={status:r},I.nextCallback=null,I}t.getDerivedStateFromProps=function(n,I){var i=n.in;return i&&I.status===sI?{status:Gl}:null};var g=t.prototype;return g.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},g.componentDidUpdate=function(n){var I=null;if(n!==this.props){var i=this.state.status;this.props.in?i!==Mg&&i!==vl&&(I=Mg):(i===Mg||i===vl)&&(I=XC)}this.updateStatus(!1,I)},g.componentWillUnmount=function(){this.cancelNextCallback()},g.getTimeouts=function(){var n=this.props.timeout,I,i,o;return I=i=o=n,n!=null&&typeof n!="number"&&(I=n.exit,i=n.enter,o=n.appear!==void 0?n.appear:i),{exit:I,enter:i,appear:o}},g.updateStatus=function(n,I){if(n===void 0&&(n=!1),I!==null)if(this.cancelNextCallback(),I===Mg){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:Rl.findDOMNode(this);i&&QG(i)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Gl&&this.setState({status:sI})},g.performEnter=function(n){var I=this,i=this.props.enter,o=this.context?this.context.isMounting:n,r=this.props.nodeRef?[o]:[Rl.findDOMNode(this),o],a=r[0],c=r[1],s=this.getTimeouts(),d=o?s.appear:s.enter;if(!n&&!i||$d.disabled){this.safeSetState({status:vl},function(){I.props.onEntered(a)});return}this.props.onEnter(a,c),this.safeSetState({status:Mg},function(){I.props.onEntering(a,c),I.onTransitionEnd(d,function(){I.safeSetState({status:vl},function(){I.props.onEntered(a,c)})})})},g.performExit=function(){var n=this,I=this.props.exit,i=this.getTimeouts(),o=this.props.nodeRef?void 0:Rl.findDOMNode(this);if(!I||$d.disabled){this.safeSetState({status:Gl},function(){n.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:XC},function(){n.props.onExiting(o),n.onTransitionEnd(i.exit,function(){n.safeSetState({status:Gl},function(){n.props.onExited(o)})})})},g.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},g.safeSetState=function(n,I){I=this.setNextCallback(I),this.setState(n,I)},g.setNextCallback=function(n){var I=this,i=!0;return this.nextCallback=function(o){i&&(i=!1,I.nextCallback=null,n(o))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},g.onTransitionEnd=function(n,I){this.setNextCallback(I);var i=this.props.nodeRef?this.props.nodeRef.current:Rl.findDOMNode(this),o=n==null&&!this.props.addEndListener;if(!i||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],a=r[0],c=r[1];this.props.addEndListener(a,c)}n!=null&&setTimeout(this.nextCallback,n)},g.render=function(){var n=this.state.status;if(n===sI)return null;var I=this.props,i=I.children;I.in,I.mountOnEnter,I.unmountOnExit,I.appear,I.enter,I.exit,I.timeout,I.addEndListener,I.onEnter,I.onEntering,I.onEntered,I.onExit,I.onExiting,I.onExited,I.nodeRef;var o=or(I,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return q.createElement(t0.Provider,{value:null},typeof i=="function"?i(n,o):q.cloneElement(q.Children.only(i),o))},t}(q.Component);Hg.contextType=t0;Hg.propTypes={};function Ll(){}Hg.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ll,onEntering:Ll,onEntered:Ll,onExit:Ll,onExiting:Ll,onExited:Ll};Hg.UNMOUNTED=sI;Hg.EXITED=Gl;Hg.ENTERING=Mg;Hg.ENTERED=vl;Hg.EXITING=XC;const jG=Hg,Nn=!!(typeof window<"u"&&window.document&&window.document.createElement);var kC=!1,JC=!1;try{var ca={get passive(){return kC=!0},get once(){return JC=kC=!0}};Nn&&(window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,!0))}catch{}function g0(e,t,g,l){if(l&&typeof l!="boolean"&&!JC){var n=l.once,I=l.capture,i=g;!JC&&n&&(i=g.__once||function o(r){this.removeEventListener(t,o,I),g.call(this,r)},g.__once=i),e.addEventListener(t,i,kC?l:I)}e.addEventListener(t,g,l)}function YC(e,t,g,l){var n=l&&typeof l!="boolean"?l.capture:l;e.removeEventListener(t,g,n),g.__once&&e.removeEventListener(t,g.__once,n)}function Bo(e,t,g,l){return g0(e,t,g,l),function(){YC(e,t,g,l)}}function DG(e,t,g,l){if(g===void 0&&(g=!1),l===void 0&&(l=!0),e){var n=document.createEvent("HTMLEvents");n.initEvent(t,g,l),e.dispatchEvent(n)}}function OG(e){var t=Jl(e,"transitionDuration")||"",g=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*g}function PG(e,t,g){g===void 0&&(g=5);var l=!1,n=setTimeout(function(){l||DG(e,"transitionend",!0)},t+g),I=Bo(e,"transitionend",function(){l=!0},{once:!0});return function(){clearTimeout(n),I()}}function l0(e,t,g,l){g==null&&(g=OG(e)||0);var n=PG(e,g,l),I=Bo(e,"transitionend",t);return function(){n(),I()}}function eu(e,t){const g=Jl(e,t)||"",l=g.indexOf("ms")===-1?1e3:1;return parseFloat(g)*l}function _G(e,t){const g=eu(e,"transitionDuration"),l=eu(e,"transitionDelay"),n=l0(e,I=>{I.target===e&&(n(),t(I))},g+l)}function qG(e){e.offsetHeight}const tu=e=>!e||typeof e=="function"?e:t=>{e.current=t};function $G(e,t){const g=tu(e),l=tu(t);return n=>{g&&g(n),l&&l(n)}}function Cr(e,t){return k.useMemo(()=>$G(e,t),[e,t])}function eB(e){return e&&"setState"in e?Rl.findDOMNode(e):e??null}const tB=q.forwardRef(({onEnter:e,onEntering:t,onEntered:g,onExit:l,onExiting:n,onExited:I,addEndListener:i,children:o,childRef:r,...a},c)=>{const s=k.useRef(null),d=Cr(s,r),A=V=>{d(eB(V))},f=V=>v=>{V&&s.current&&V(s.current,v)},p=k.useCallback(f(e),[e]),Z=k.useCallback(f(t),[t]),m=k.useCallback(f(g),[g]),u=k.useCallback(f(l),[l]),h=k.useCallback(f(n),[n]),b=k.useCallback(f(I),[I]),y=k.useCallback(f(i),[i]);return C.jsx(jG,{ref:c,...a,onEnter:p,onEntered:m,onEntering:Z,onExit:u,onExited:b,onExiting:h,addEndListener:y,nodeRef:s,children:typeof o=="function"?(V,v)=>o(V,{...v,ref:A}):q.cloneElement(o,{ref:A})})}),gB=tB;function lB(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e},[e]),t}function xt(e){const t=lB(e);return k.useCallback(function(...g){return t.current&&t.current(...g)},[t])}const sr=e=>k.forwardRef((t,g)=>C.jsx("div",{...t,ref:g,className:be(t.className,e)})),n0=sr("h4");n0.displayName="DivStyledAsH4";const I0=k.forwardRef(({className:e,bsPrefix:t,as:g=n0,...l},n)=>(t=Ge(t,"alert-heading"),C.jsx(g,{ref:n,className:be(e,t),...l})));I0.displayName="AlertHeading";const nB=I0;function IB(){return k.useState(null)}function iB(){const e=k.useRef(!0),t=k.useRef(()=>e.current);return k.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function oB(e){const t=k.useRef(null);return k.useEffect(()=>{t.current=e}),t.current}const rB=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",aB=typeof document<"u",gu=aB||rB?k.useLayoutEffect:k.useEffect,CB=["as","disabled"];function sB(e,t){if(e==null)return{};var g={},l=Object.keys(e),n,I;for(I=0;I<l.length;I++)n=l[I],!(t.indexOf(n)>=0)&&(g[n]=e[n]);return g}function cB(e){return!e||e.trim()==="#"}function tc({tagName:e,disabled:t,href:g,target:l,rel:n,role:I,onClick:i,tabIndex:o=0,type:r}){e||(g!=null||l!=null||n!=null?e="a":e="button");const a={tagName:e};if(e==="button")return[{type:r||"button",disabled:t},a];const c=d=>{if((t||e==="a"&&cB(g))&&d.preventDefault(),t){d.stopPropagation();return}i==null||i(d)},s=d=>{d.key===" "&&(d.preventDefault(),c(d))};return e==="a"&&(g||(g="#"),t&&(g=void 0)),[{role:I??"button",disabled:void 0,tabIndex:t?void 0:o,href:g,target:e==="a"?l:void 0,"aria-disabled":t||void 0,rel:e==="a"?n:void 0,onClick:c,onKeyDown:s},a]}const dB=k.forwardRef((e,t)=>{let{as:g,disabled:l}=e,n=sB(e,CB);const[I,{tagName:i}]=tc(Object.assign({tagName:g,disabled:l},n));return C.jsx(i,Object.assign({},n,I,{ref:t}))});dB.displayName="Button";const uB=["onKeyDown"];function AB(e,t){if(e==null)return{};var g={},l=Object.keys(e),n,I;for(I=0;I<l.length;I++)n=l[I],!(t.indexOf(n)>=0)&&(g[n]=e[n]);return g}function mB(e){return!e||e.trim()==="#"}const i0=k.forwardRef((e,t)=>{let{onKeyDown:g}=e,l=AB(e,uB);const[n]=tc(Object.assign({tagName:"a"},l)),I=xt(i=>{n.onKeyDown(i),g==null||g(i)});return mB(l.href)||l.role==="button"?C.jsx("a",Object.assign({ref:t},l,n,{onKeyDown:I})):C.jsx("a",Object.assign({ref:t},l,{onKeyDown:g}))});i0.displayName="Anchor";const hB=i0,o0=k.forwardRef(({className:e,bsPrefix:t,as:g=hB,...l},n)=>(t=Ge(t,"alert-link"),C.jsx(g,{ref:n,className:be(e,t),...l})));o0.displayName="AlertLink";const bB=o0,pB={[Mg]:"show",[vl]:"show"},r0=k.forwardRef(({className:e,children:t,transitionClasses:g={},onEnter:l,...n},I)=>{const i={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...n},o=k.useCallback((r,a)=>{qG(r),l==null||l(r,a)},[l]);return C.jsx(gB,{ref:I,addEndListener:_G,...i,onEnter:o,childRef:t.ref,children:(r,a)=>k.cloneElement(t,{...a,className:be("fade",e,t.props.className,pB[r],g[r])})})});r0.displayName="Fade";const vo=r0,fB={"aria-label":Ze.string,onClick:Ze.func,variant:Ze.oneOf(["white"])},gc=k.forwardRef(({className:e,variant:t,"aria-label":g="Close",...l},n)=>C.jsx("button",{ref:n,type:"button",className:be("btn-close",t&&`btn-close-${t}`,e),"aria-label":g,...l}));gc.displayName="CloseButton";gc.propTypes=fB;const a0=gc,C0=k.forwardRef((e,t)=>{const{bsPrefix:g,show:l=!0,closeLabel:n="Close alert",closeVariant:I,className:i,children:o,variant:r="primary",onClose:a,dismissible:c,transition:s=vo,...d}=HG(e,{show:"onClose"}),A=Ge(g,"alert"),f=xt(m=>{a&&a(!1,m)}),p=s===!0?vo:s,Z=C.jsxs("div",{role:"alert",...p?void 0:d,ref:t,className:be(i,A,r&&`${A}-${r}`,c&&`${A}-dismissible`),children:[c&&C.jsx(a0,{onClick:f,"aria-label":n,variant:I}),o]});return p?C.jsx(p,{unmountOnExit:!0,...d,ref:void 0,in:l,children:Z}):l?Z:null});C0.displayName="Alert";const ZB=Object.assign(C0,{Link:bB,Heading:nB}),s0=k.forwardRef(({as:e,bsPrefix:t,variant:g="primary",size:l,active:n=!1,disabled:I=!1,className:i,...o},r)=>{const a=Ge(t,"btn"),[c,{tagName:s}]=tc({tagName:e,disabled:I,...o}),d=s;return C.jsx(d,{...c,...o,ref:r,disabled:I,className:be(i,a,n&&"active",g&&`${a}-${g}`,l&&`${a}-${l}`,o.href&&I&&"disabled")})});s0.displayName="Button";const et=s0,c0=k.forwardRef(({className:e,bsPrefix:t,as:g="div",...l},n)=>(t=Ge(t,"card-body"),C.jsx(g,{ref:n,className:be(e,t),...l})));c0.displayName="CardBody";const d0=c0,u0=k.forwardRef(({className:e,bsPrefix:t,as:g="div",...l},n)=>(t=Ge(t,"card-footer"),C.jsx(g,{ref:n,className:be(e,t),...l})));u0.displayName="CardFooter";const yB=u0,A0=k.createContext(null);A0.displayName="CardHeaderContext";const GB=A0,m0=k.forwardRef(({bsPrefix:e,className:t,as:g="div",...l},n)=>{const I=Ge(e,"card-header"),i=k.useMemo(()=>({cardHeaderBsPrefix:I}),[I]);return C.jsx(GB.Provider,{value:i,children:C.jsx(g,{ref:n,...l,className:be(t,I)})})});m0.displayName="CardHeader";const BB=m0,h0=k.forwardRef(({bsPrefix:e,className:t,variant:g,as:l="img",...n},I)=>{const i=Ge(e,"card-img");return C.jsx(l,{ref:I,className:be(g?`${i}-${g}`:i,t),...n})});h0.displayName="CardImg";const vB=h0,b0=k.forwardRef(({className:e,bsPrefix:t,as:g="div",...l},n)=>(t=Ge(t,"card-img-overlay"),C.jsx(g,{ref:n,className:be(e,t),...l})));b0.displayName="CardImgOverlay";const SB=b0,p0=k.forwardRef(({className:e,bsPrefix:t,as:g="a",...l},n)=>(t=Ge(t,"card-link"),C.jsx(g,{ref:n,className:be(e,t),...l})));p0.displayName="CardLink";const VB=p0,WB=sr("h6"),f0=k.forwardRef(({className:e,bsPrefix:t,as:g=WB,...l},n)=>(t=Ge(t,"card-subtitle"),C.jsx(g,{ref:n,className:be(e,t),...l})));f0.displayName="CardSubtitle";const RB=f0,Z0=k.forwardRef(({className:e,bsPrefix:t,as:g="p",...l},n)=>(t=Ge(t,"card-text"),C.jsx(g,{ref:n,className:be(e,t),...l})));Z0.displayName="CardText";const XB=Z0,kB=sr("h5"),y0=k.forwardRef(({className:e,bsPrefix:t,as:g=kB,...l},n)=>(t=Ge(t,"card-title"),C.jsx(g,{ref:n,className:be(e,t),...l})));y0.displayName="CardTitle";const JB=y0,G0=k.forwardRef(({bsPrefix:e,className:t,bg:g,text:l,border:n,body:I=!1,children:i,as:o="div",...r},a)=>{const c=Ge(e,"card");return C.jsx(o,{ref:a,...r,className:be(t,c,g&&`bg-${g}`,l&&`text-${l}`,n&&`border-${n}`),children:I?C.jsx(d0,{children:i}):i})});G0.displayName="Card";const dt=Object.assign(G0,{Img:vB,Title:JB,Subtitle:RB,Body:d0,Link:VB,Text:XB,Header:BB,Footer:yB,ImgOverlay:SB});function YB(e){const t=k.useRef(e);return t.current=e,t}function B0(e){const t=YB(e);k.useEffect(()=>()=>t.current(),[])}function wB(e,t){return k.Children.toArray(e).some(g=>k.isValidElement(g)&&g.type===t)}function HB({as:e,bsPrefix:t,className:g,...l}){t=Ge(t,"col");const n=$h(),I=e0(),i=[],o=[];return n.forEach(r=>{const a=l[r];delete l[r];let c,s,d;typeof a=="object"&&a!=null?{span:c,offset:s,order:d}=a:c=a;const A=r!==I?`-${r}`:"";c&&i.push(c===!0?`${t}${A}`:`${t}${A}-${c}`),d!=null&&o.push(`order${A}-${d}`),s!=null&&o.push(`offset${A}-${s}`)}),[{...l,className:be(g,...i,...o)},{as:e,bsPrefix:t,spans:i}]}const v0=k.forwardRef((e,t)=>{const[{className:g,...l},{as:n="div",bsPrefix:I,spans:i}]=HB(e);return C.jsx(n,{...l,ref:t,className:be(g,!i.length&&I)})});v0.displayName="Col";const re=v0;var NB=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ul(e,t){return NB(e.querySelectorAll(t))}function lu(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const FB="data-rr-ui-";function KB(e){return`${FB}${e}`}const S0=k.createContext(Nn?window:void 0);S0.Provider;function lc(){return k.useContext(S0)}const xB={type:Ze.string,tooltip:Ze.bool,as:Ze.elementType},nc=k.forwardRef(({as:e="div",className:t,type:g="valid",tooltip:l=!1,...n},I)=>C.jsx(e,{...n,ref:I,className:be(t,`${g}-${l?"tooltip":"feedback"}`)}));nc.displayName="Feedback";nc.propTypes=xB;const V0=nc,EB=k.createContext({}),Jg=EB,W0=k.forwardRef(({id:e,bsPrefix:t,className:g,type:l="checkbox",isValid:n=!1,isInvalid:I=!1,as:i="input",...o},r)=>{const{controlId:a}=k.useContext(Jg);return t=Ge(t,"form-check-input"),C.jsx(i,{...o,ref:r,type:l,id:e||a,className:be(g,t,n&&"is-valid",I&&"is-invalid")})});W0.displayName="FormCheckInput";const R0=W0,X0=k.forwardRef(({bsPrefix:e,className:t,htmlFor:g,...l},n)=>{const{controlId:I}=k.useContext(Jg);return e=Ge(e,"form-check-label"),C.jsx("label",{...l,ref:n,htmlFor:g||I,className:be(t,e)})});X0.displayName="FormCheckLabel";const wC=X0,k0=k.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:g,inline:l=!1,reverse:n=!1,disabled:I=!1,isValid:i=!1,isInvalid:o=!1,feedbackTooltip:r=!1,feedback:a,feedbackType:c,className:s,style:d,title:A="",type:f="checkbox",label:p,children:Z,as:m="input",...u},h)=>{t=Ge(t,"form-check"),g=Ge(g,"form-switch");const{controlId:b}=k.useContext(Jg),y=k.useMemo(()=>({controlId:e||b}),[b,e]),V=!Z&&p!=null&&p!==!1||wB(Z,wC),v=C.jsx(R0,{...u,type:f==="switch"?"checkbox":f,ref:h,isValid:i,isInvalid:o,disabled:I,as:m});return C.jsx(Jg.Provider,{value:y,children:C.jsx("div",{style:d,className:be(s,V&&t,l&&`${t}-inline`,n&&`${t}-reverse`,f==="switch"&&g),children:Z||C.jsxs(C.Fragment,{children:[v,V&&C.jsx(wC,{title:A,children:p}),a&&C.jsx(V0,{type:c,tooltip:r,children:a})]})})})});k0.displayName="FormCheck";const So=Object.assign(k0,{Input:R0,Label:wC}),J0=k.forwardRef(({bsPrefix:e,type:t,size:g,htmlSize:l,id:n,className:I,isValid:i=!1,isInvalid:o=!1,plaintext:r,readOnly:a,as:c="input",...s},d)=>{const{controlId:A}=k.useContext(Jg);return e=Ge(e,"form-control"),C.jsx(c,{...s,type:t,size:l,ref:d,readOnly:a,id:n||A,className:be(I,r?`${e}-plaintext`:e,g&&`${e}-${g}`,t==="color"&&`${e}-color`,i&&"is-valid",o&&"is-invalid")})});J0.displayName="FormControl";const zB=Object.assign(J0,{Feedback:V0}),Y0=k.forwardRef(({className:e,bsPrefix:t,as:g="div",...l},n)=>(t=Ge(t,"form-floating"),C.jsx(g,{ref:n,className:be(e,t),...l})));Y0.displayName="FormFloating";const TB=Y0,w0=k.forwardRef(({controlId:e,as:t="div",...g},l)=>{const n=k.useMemo(()=>({controlId:e}),[e]);return C.jsx(Jg.Provider,{value:n,children:C.jsx(t,{...g,ref:l})})});w0.displayName="FormGroup";const H0=w0,N0=k.forwardRef(({as:e="label",bsPrefix:t,column:g=!1,visuallyHidden:l=!1,className:n,htmlFor:I,...i},o)=>{const{controlId:r}=k.useContext(Jg);t=Ge(t,"form-label");let a="col-form-label";typeof g=="string"&&(a=`${a} ${a}-${g}`);const c=be(n,t,l&&"visually-hidden",g&&a);return I=I||r,g?C.jsx(re,{ref:o,as:"label",className:c,htmlFor:I,...i}):C.jsx(e,{ref:o,className:c,htmlFor:I,...i})});N0.displayName="FormLabel";const MB=N0,F0=k.forwardRef(({bsPrefix:e,className:t,id:g,...l},n)=>{const{controlId:I}=k.useContext(Jg);return e=Ge(e,"form-range"),C.jsx("input",{...l,type:"range",ref:n,className:be(t,e),id:g||I})});F0.displayName="FormRange";const LB=F0,K0=k.forwardRef(({bsPrefix:e,size:t,htmlSize:g,className:l,isValid:n=!1,isInvalid:I=!1,id:i,...o},r)=>{const{controlId:a}=k.useContext(Jg);return e=Ge(e,"form-select"),C.jsx("select",{...o,size:g,ref:r,className:be(l,e,t&&`${e}-${t}`,n&&"is-valid",I&&"is-invalid"),id:i||a})});K0.displayName="FormSelect";const UB=K0,x0=k.forwardRef(({bsPrefix:e,className:t,as:g="small",muted:l,...n},I)=>(e=Ge(e,"form-text"),C.jsx(g,{...n,ref:I,className:be(t,e,l&&"text-muted")})));x0.displayName="FormText";const QB=x0,E0=k.forwardRef((e,t)=>C.jsx(So,{...e,ref:t,type:"switch"}));E0.displayName="Switch";const jB=Object.assign(E0,{Input:So.Input,Label:So.Label}),z0=k.forwardRef(({bsPrefix:e,className:t,children:g,controlId:l,label:n,...I},i)=>(e=Ge(e,"form-floating"),C.jsxs(H0,{ref:i,className:be(t,e),controlId:l,...I,children:[g,C.jsx("label",{htmlFor:l,children:n})]})));z0.displayName="FloatingLabel";const DB=z0,OB={_ref:Ze.any,validated:Ze.bool,as:Ze.elementType},Ic=k.forwardRef(({className:e,validated:t,as:g="form",...l},n)=>C.jsx(g,{...l,ref:n,className:be(e,t&&"was-validated")}));Ic.displayName="Form";Ic.propTypes=OB;const PB=Object.assign(Ic,{Group:H0,Control:zB,Floating:TB,Check:So,Switch:jB,Label:MB,Text:QB,Range:LB,Select:UB,FloatingLabel:DB});var vi;function nu(e){if((!vi&&vi!==0||e)&&Nn){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),vi=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return vi}function da(e){e===void 0&&(e=ar());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function _B(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const Iu=KB("modal-open");class qB{constructor({ownerDocument:t,handleContainerOverflow:g=!0,isRTL:l=!1}={}){this.handleContainerOverflow=g,this.isRTL=l,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return _B(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const g={overflow:"hidden"},l=this.isRTL?"paddingLeft":"paddingRight",n=this.getElement();t.style={overflow:n.style.overflow,[l]:n.style[l]},t.scrollBarWidth&&(g[l]=`${parseInt(Jl(n,l)||"0",10)+t.scrollBarWidth}px`),n.setAttribute(Iu,""),Jl(n,g)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const g=this.getElement();g.removeAttribute(Iu),Object.assign(g.style,t.style)}add(t){let g=this.modals.indexOf(t);return g!==-1||(g=this.modals.length,this.modals.push(t),this.setModalAttributes(t),g!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),g}remove(t){const g=this.modals.indexOf(t);g!==-1&&(this.modals.splice(g,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const ic=qB,ua=(e,t)=>Nn?e==null?(t||ar()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function $B(e,t){const g=lc(),[l,n]=k.useState(()=>ua(e,g==null?void 0:g.document));if(!l){const I=ua(e);I&&n(I)}return k.useEffect(()=>{t&&l&&t(l)},[t,l]),k.useEffect(()=>{const I=ua(e);I!==l&&n(I)},[e,l]),l}function ev({children:e,in:t,onExited:g,mountOnEnter:l,unmountOnExit:n}){const I=k.useRef(null),i=k.useRef(t),o=xt(g);k.useEffect(()=>{t?i.current=!0:o(I.current)},[t,o]);const r=Cr(I,e.ref),a=k.cloneElement(e,{ref:r});return t?a:n||!i.current&&l?null:a}function tv({in:e,onTransition:t}){const g=k.useRef(null),l=k.useRef(!0),n=xt(t);return gu(()=>{if(!g.current)return;let I=!1;return n({in:e,element:g.current,initial:l.current,isStale:()=>I}),()=>{I=!0}},[e,n]),gu(()=>(l.current=!1,()=>{l.current=!0}),[]),g}function gv({children:e,in:t,onExited:g,onEntered:l,transition:n}){const[I,i]=k.useState(!t);t&&I&&i(!1);const o=tv({in:!!t,onTransition:a=>{const c=()=>{a.isStale()||(a.in?l==null||l(a.element,a.initial):(i(!0),g==null||g(a.element)))};Promise.resolve(n(a)).then(c,s=>{throw a.in||i(!0),s})}}),r=Cr(o,e.ref);return I&&!t?null:k.cloneElement(e,{ref:r})}function iu(e,t,g){return e?C.jsx(e,Object.assign({},g)):t?C.jsx(gv,Object.assign({},g,{transition:t})):C.jsx(ev,Object.assign({},g))}function lv(e){return e.code==="Escape"||e.keyCode===27}const nv=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Iv(e,t){if(e==null)return{};var g={},l=Object.keys(e),n,I;for(I=0;I<l.length;I++)n=l[I],!(t.indexOf(n)>=0)&&(g[n]=e[n]);return g}let Aa;function iv(e){return Aa||(Aa=new ic({ownerDocument:e==null?void 0:e.document})),Aa}function ov(e){const t=lc(),g=e||iv(t),l=k.useRef({dialog:null,backdrop:null});return Object.assign(l.current,{add:()=>g.add(l.current),remove:()=>g.remove(l.current),isTopModal:()=>g.isTopModal(l.current),setDialogRef:k.useCallback(n=>{l.current.dialog=n},[]),setBackdropRef:k.useCallback(n=>{l.current.backdrop=n},[])})}const T0=k.forwardRef((e,t)=>{let{show:g=!1,role:l="dialog",className:n,style:I,children:i,backdrop:o=!0,keyboard:r=!0,onBackdropClick:a,onEscapeKeyDown:c,transition:s,runTransition:d,backdropTransition:A,runBackdropTransition:f,autoFocus:p=!0,enforceFocus:Z=!0,restoreFocus:m=!0,restoreFocusOptions:u,renderDialog:h,renderBackdrop:b=oe=>C.jsx("div",Object.assign({},oe)),manager:y,container:V,onShow:v,onHide:S=()=>{},onExit:X,onExited:G,onExiting:B,onEnter:W,onEntering:R,onEntered:Y}=e,F=Iv(e,nv);const M=lc(),U=$B(V),E=ov(y),x=iB(),w=oB(g),[J,N]=k.useState(!g),K=k.useRef(null);k.useImperativeHandle(t,()=>E,[E]),Nn&&!w&&g&&(K.current=da(M==null?void 0:M.document)),g&&J&&N(!1);const z=xt(()=>{if(E.add(),D.current=Bo(document,"keydown",Q),j.current=Bo(document,"focus",()=>setTimeout(H),!0),v&&v(),p){var oe,Xe;const ve=da((oe=(Xe=E.dialog)==null?void 0:Xe.ownerDocument)!=null?oe:M==null?void 0:M.document);E.dialog&&ve&&!lu(E.dialog,ve)&&(K.current=ve,E.dialog.focus())}}),L=xt(()=>{if(E.remove(),D.current==null||D.current(),j.current==null||j.current(),m){var oe;(oe=K.current)==null||oe.focus==null||oe.focus(u),K.current=null}});k.useEffect(()=>{!g||!U||z()},[g,U,z]),k.useEffect(()=>{J&&L()},[J,L]),B0(()=>{L()});const H=xt(()=>{if(!Z||!x()||!E.isTopModal())return;const oe=da(M==null?void 0:M.document);E.dialog&&oe&&!lu(E.dialog,oe)&&E.dialog.focus()}),T=xt(oe=>{oe.target===oe.currentTarget&&(a==null||a(oe),o===!0&&S())}),Q=xt(oe=>{r&&lv(oe)&&E.isTopModal()&&(c==null||c(oe),oe.defaultPrevented||S())}),j=k.useRef(),D=k.useRef(),te=(...oe)=>{N(!0),G==null||G(...oe)};if(!U)return null;const ne=Object.assign({role:l,ref:E.setDialogRef,"aria-modal":l==="dialog"?!0:void 0},F,{style:I,className:n,tabIndex:-1});let Ie=h?h(ne):C.jsx("div",Object.assign({},ne,{children:k.cloneElement(i,{role:"document"})}));Ie=iu(s,d,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!g,onExit:X,onExiting:B,onExited:te,onEnter:W,onEntering:R,onEntered:Y,children:Ie});let ae=null;return o&&(ae=b({ref:E.setBackdropRef,onClick:T}),ae=iu(A,f,{in:!!g,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ae})),C.jsx(C.Fragment,{children:Rl.createPortal(C.jsxs(C.Fragment,{children:[ae,Ie]}),U)})});T0.displayName="Modal";const rv=Object.assign(T0,{Manager:ic});function av(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Cv(e,t){e.classList?e.classList.add(t):av(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function ou(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function sv(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=ou(e.className,t):e.setAttribute("class",ou(e.className&&e.className.baseVal||"",t))}const Ql={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class cv extends ic{adjustAndStore(t,g,l){const n=g.style[t];g.dataset[t]=n,Jl(g,{[t]:`${parseFloat(Jl(g,t))+l}px`})}restore(t,g){const l=g.dataset[t];l!==void 0&&(delete g.dataset[t],Jl(g,{[t]:l}))}setContainerStyle(t){super.setContainerStyle(t);const g=this.getElement();if(Cv(g,"modal-open"),!t.scrollBarWidth)return;const l=this.isRTL?"paddingLeft":"paddingRight",n=this.isRTL?"marginLeft":"marginRight";Ul(g,Ql.FIXED_CONTENT).forEach(I=>this.adjustAndStore(l,I,t.scrollBarWidth)),Ul(g,Ql.STICKY_CONTENT).forEach(I=>this.adjustAndStore(n,I,-t.scrollBarWidth)),Ul(g,Ql.NAVBAR_TOGGLER).forEach(I=>this.adjustAndStore(n,I,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const g=this.getElement();sv(g,"modal-open");const l=this.isRTL?"paddingLeft":"paddingRight",n=this.isRTL?"marginLeft":"marginRight";Ul(g,Ql.FIXED_CONTENT).forEach(I=>this.restore(l,I)),Ul(g,Ql.STICKY_CONTENT).forEach(I=>this.restore(n,I)),Ul(g,Ql.NAVBAR_TOGGLER).forEach(I=>this.restore(n,I))}}let ma;function dv(e){return ma||(ma=new cv(e)),ma}const M0=k.forwardRef(({className:e,bsPrefix:t,as:g="div",...l},n)=>(t=Ge(t,"modal-body"),C.jsx(g,{ref:n,className:be(e,t),...l})));M0.displayName="ModalBody";const uv=M0,Av=k.createContext({onHide(){}}),L0=Av,U0=k.forwardRef(({bsPrefix:e,className:t,contentClassName:g,centered:l,size:n,fullscreen:I,children:i,scrollable:o,...r},a)=>{e=Ge(e,"modal");const c=`${e}-dialog`,s=typeof I=="string"?`${e}-fullscreen-${I}`:`${e}-fullscreen`;return C.jsx("div",{...r,ref:a,className:be(c,t,n&&`${e}-${n}`,l&&`${c}-centered`,o&&`${c}-scrollable`,I&&s),children:C.jsx("div",{className:be(`${e}-content`,g),children:i})})});U0.displayName="ModalDialog";const Q0=U0,j0=k.forwardRef(({className:e,bsPrefix:t,as:g="div",...l},n)=>(t=Ge(t,"modal-footer"),C.jsx(g,{ref:n,className:be(e,t),...l})));j0.displayName="ModalFooter";const mv=j0,hv=k.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:g=!1,onHide:l,children:n,...I},i)=>{const o=k.useContext(L0),r=xt(()=>{o==null||o.onHide(),l==null||l()});return C.jsxs("div",{ref:i,...I,children:[n,g&&C.jsx(a0,{"aria-label":e,variant:t,onClick:r})]})}),bv=hv,D0=k.forwardRef(({bsPrefix:e,className:t,closeLabel:g="Close",closeButton:l=!1,...n},I)=>(e=Ge(e,"modal-header"),C.jsx(bv,{ref:I,...n,className:be(t,e),closeLabel:g,closeButton:l})));D0.displayName="ModalHeader";const O0=D0,pv=sr("h4"),P0=k.forwardRef(({className:e,bsPrefix:t,as:g=pv,...l},n)=>(t=Ge(t,"modal-title"),C.jsx(g,{ref:n,className:be(e,t),...l})));P0.displayName="ModalTitle";const fv=P0;function Zv(e){return C.jsx(vo,{...e,timeout:null})}function yv(e){return C.jsx(vo,{...e,timeout:null})}const _0=k.forwardRef(({bsPrefix:e,className:t,style:g,dialogClassName:l,contentClassName:n,children:I,dialogAs:i=Q0,"data-bs-theme":o,"aria-labelledby":r,"aria-describedby":a,"aria-label":c,show:s=!1,animation:d=!0,backdrop:A=!0,keyboard:f=!0,onEscapeKeyDown:p,onShow:Z,onHide:m,container:u,autoFocus:h=!0,enforceFocus:b=!0,restoreFocus:y=!0,restoreFocusOptions:V,onEntered:v,onExit:S,onExiting:X,onEnter:G,onEntering:B,onExited:W,backdropClassName:R,manager:Y,...F},M)=>{const[U,E]=k.useState({}),[x,w]=k.useState(!1),J=k.useRef(!1),N=k.useRef(!1),K=k.useRef(null),[z,L]=IB(),H=Cr(M,L),T=xt(m),Q=KG();e=Ge(e,"modal");const j=k.useMemo(()=>({onHide:T}),[T]);function D(){return Y||dv({isRTL:Q})}function te(Ce){if(!Nn)return;const Ye=D().getScrollbarWidth()>0,We=Ce.scrollHeight>ar(Ce).documentElement.clientHeight;E({paddingRight:Ye&&!We?nu():void 0,paddingLeft:!Ye&&We?nu():void 0})}const ne=xt(()=>{z&&te(z.dialog)});B0(()=>{YC(window,"resize",ne),K.current==null||K.current()});const Ie=()=>{J.current=!0},ae=Ce=>{J.current&&z&&Ce.target===z.dialog&&(N.current=!0),J.current=!1},oe=()=>{w(!0),K.current=l0(z.dialog,()=>{w(!1)})},Xe=Ce=>{Ce.target===Ce.currentTarget&&oe()},ve=Ce=>{if(A==="static"){Xe(Ce);return}if(N.current||Ce.target!==Ce.currentTarget){N.current=!1;return}m==null||m()},O=Ce=>{f?p==null||p(Ce):(Ce.preventDefault(),A==="static"&&oe())},P=(Ce,Ye)=>{Ce&&te(Ce),G==null||G(Ce,Ye)},ge=Ce=>{K.current==null||K.current(),S==null||S(Ce)},le=(Ce,Ye)=>{B==null||B(Ce,Ye),g0(window,"resize",ne)},$=Ce=>{Ce&&(Ce.style.display=""),W==null||W(Ce),YC(window,"resize",ne)},ue=k.useCallback(Ce=>C.jsx("div",{...Ce,className:be(`${e}-backdrop`,R,!d&&"show")}),[d,R,e]),se={...g,...U};se.display="block";const me=Ce=>C.jsx("div",{role:"dialog",...Ce,style:se,className:be(t,e,x&&`${e}-static`,!d&&"show"),onClick:A?ve:void 0,onMouseUp:ae,"data-bs-theme":o,"aria-label":c,"aria-labelledby":r,"aria-describedby":a,children:C.jsx(i,{...F,onMouseDown:Ie,className:l,contentClassName:n,children:I})});return C.jsx(L0.Provider,{value:j,children:C.jsx(rv,{show:s,ref:H,backdrop:A,container:u,keyboard:!0,autoFocus:h,enforceFocus:b,restoreFocus:y,restoreFocusOptions:V,onEscapeKeyDown:O,onShow:Z,onHide:m,onEnter:P,onEntering:le,onEntered:v,onExit:ge,onExiting:X,onExited:$,manager:D(),transition:d?Zv:void 0,backdropTransition:d?yv:void 0,renderBackdrop:ue,renderDialog:me})})});_0.displayName="Modal";const ru=Object.assign(_0,{Body:uv,Header:O0,Title:fv,Footer:mv,Dialog:Q0,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),q0=k.forwardRef(({bsPrefix:e,className:t,as:g="div",...l},n)=>{const I=Ge(e,"row"),i=$h(),o=e0(),r=`${I}-cols`,a=[];return i.forEach(c=>{const s=l[c];delete l[c];let d;s!=null&&typeof s=="object"?{cols:d}=s:d=s;const A=c!==o?`-${c}`:"";d!=null&&a.push(`${r}${A}-${d}`)}),C.jsx(g,{ref:n,...l,className:be(t,I,...a)})});q0.displayName="Row";const ke=q0;var $0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TI=q.createContext&&q.createContext($0),Gv=["attr","size","title"];function Bv(e,t){if(e==null)return{};var g=vv(e,t),l,n;if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);for(n=0;n<I.length;n++)l=I[n],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(g[l]=e[l])}return g}function vv(e,t){if(e==null)return{};var g={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(t.indexOf(l)>=0)continue;g[l]=e[l]}return g}function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l])}return e},Vo.apply(this,arguments)}function au(e,t){var g=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),g.push.apply(g,l)}return g}function Wo(e){for(var t=1;t<arguments.length;t++){var g=arguments[t]!=null?arguments[t]:{};t%2?au(Object(g),!0).forEach(function(l){Sv(e,l,g[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(g)):au(Object(g)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(g,l))})}return e}function Sv(e,t,g){return t=Vv(t),t in e?Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}):e[t]=g,e}function Vv(e){var t=Wv(e,"string");return typeof t=="symbol"?t:t+""}function Wv(e,t){if(typeof e!="object"||!e)return e;var g=e[Symbol.toPrimitive];if(g!==void 0){var l=g.call(e,t||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eb(e){return e&&e.map((t,g)=>q.createElement(t.tag,Wo({key:g},t.attr),eb(t.child)))}function de(e){return t=>q.createElement(Rv,Vo({attr:Wo({},e.attr)},t),eb(e.child))}function Rv(e){var t=g=>{var{attr:l,size:n,title:I}=e,i=Bv(e,Gv),o=n||g.size||"1em",r;return g.className&&(r=g.className),e.className&&(r=(r?r+" ":"")+e.className),q.createElement("svg",Vo({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},g.attr,l,i,{className:r,style:Wo(Wo({color:e.color||g.color},g.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),I&&q.createElement("title",null,I),e.children)};return TI!==void 0?q.createElement(TI.Consumer,null,g=>t(g)):t($0)}function hl(e){return de({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(e)}function tb(e){return de({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"},child:[]}]})(e)}function Xv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm90.5 224H272v74.5c0 8.8-7.2 16-16 16-4.4 0-8.4-1.8-11.3-4.7-2.9-2.9-4.7-6.9-4.7-11.3V272h-74.5c-4.4 0-8.4-1.8-11.3-4.7-2.9-2.9-4.7-6.9-4.7-11.3 0-8.8 7.2-16 16-16H240v-74.5c0-8.8 7.2-16 16-16s16 7.2 16 16V240h74.5c8.8 0 16 7.2 16 16s-7.2 16-16 16z"},child:[]}]})(e)}function kv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(e)}function Jv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216.4 163.7c5.1 5 5.1 13.3.1 18.4L155.8 243h231.3c7.1 0 12.9 5.8 12.9 13s-5.8 13-12.9 13H155.8l60.8 60.9c5 5.1 4.9 13.3-.1 18.4-5.1 5-13.2 5-18.3-.1l-82.4-83c-1.1-1.2-2-2.5-2.7-4.1-.7-1.6-1-3.3-1-5 0-3.4 1.3-6.6 3.7-9.1l82.4-83c4.9-5.2 13.1-5.3 18.2-.3z"},child:[]}]})(e)}function Yv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z"},child:[]}]})(e)}function gb(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm143.3 263.9c-8.1-2.6-23.7-3.4-29.5-10.4-2.9-3.5-1-16.6-1-16.6 25.2-1.4 31-6.1 31-6.1 3.9-2.3 2.1-2.7.1-6.1-10.9-18.3-6-41.5-6.5-61.6-.4-16.7-4.8-35-20-44.4-7.6-4.7-19.7-6.9-31.4-6.9-9.5 0-18.7 1.4-25.3 4.1-42.4 17-17.4 73.2-31.9 105.4-2.5 5.4-6.1 7.3.2 10.5 0 0 7.5 4.4 28.9 6.3 0 0 .3 12.6 0 13.9-1.1 4.9-11.8 8.3-15.8 9.4-2.7.7-8.7 2.5-16.4 5.7-3.7 1.5-3.1 6.9.8 7.6 3.9.7 8.1 1.7 11.5 2.9 0 0 26.4 6 46 25 13.2 12.7 18.1 27.6 20 44.6.5 4.5-1.7 8.9-5.5 11.5l-5.7 3.6c-1.9 1.1-4.2-.2-4.3-2.4 0-29.5-17.8-55.5-45.8-65.2-13.5-4.7-28.1-5-41.6-9.7-4.1-1.4-12.2-3.1-13.9-7.8-1.6-4.6-1.6-10-1.9-14.8-.2-3.8-.3-7.6-.3-11.4 0-2.5 6.4-7.8 7.8-10.1 5.4-9 5.9-21.1 6.9-31.3 8.7 2.4 9.8-13.7 11.3-18.6 1.1-3.4 5-20.9-2.6-23.6 2.5-4.4 3.5-9.8 4.2-14.7 2-12.8 2.8-26.8-1.1-39.3-8.1-26-33-40.6-59.3-41.4-26.7-.9-53.5 11.9-63.5 37.8-4.8 12.6-4.4 26.3-2.8 39.5.7 6 1.7 12.7 4.7 18.1-6.4 2.8-4.5 17.7-3.4 21.3 1.6 5.1 3 23.4 12.1 20.9.8 8.1 1.7 16.4 3.9 24.3 1.5 5.3 4.6 9.8 8.2 13.9 1.8 2 2.7 2.2 2.6 4.8-.1 7.8.1 16.2-1.9 23.8s-18.7 10.8-25.4 12.2c-14.8 3-28.6 4.7-41.4 11.5C84.8 320.6 76 289 76 256c0-47.9 19.2-94 53.2-127.7C162.7 95 207.1 76.4 254.3 76c47.6-.4 93.7 18.1 127.8 51.5 34.8 34.1 54 79.9 54 128.5 0 24.9-5 48.9-14.5 71.1-5.6-7-13.4-12.3-22.3-15.2z"},child:[]}]})(e)}function wv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M317 32H195c-17.6 0-24 14.4-24 32h170c0-17.6-6.4-32-24-32zM196.1 147.5c7.6 8.8 11.9 20 11.9 31.7v265.9c0 21.9 17.9 34.9 39.9 34.9h16.3c21.9 0 39.9-12.9 39.9-34.9V179.2c0-11.7 4.3-22.8 11.9-31.7 15.4-17.9 25-34.5 25-67.5H171c0 35 9.6 49.6 25.1 67.5zm31.9 90.8c0-15.6 12.6-28.3 28-28.3s28 12.7 28 28.3v35.4c0 15.6-12.6 28.3-28 28.3s-28-12.7-28-28.3v-35.4z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"273",r:"20"},child:[]}]})(e)}function Hv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416.3 256c0-21 13.1-38.9 31.7-46.1-4.9-20.5-13-39.7-23.7-57.1-6.4 2.8-13.2 4.3-20.1 4.3-12.6 0-25.2-4.8-34.9-14.4-14.9-14.9-18.2-36.8-10.2-55-17.3-10.7-36.6-18.8-57-23.7C295 82.5 277 95.7 256 95.7S217 82.5 209.9 64c-20.5 4.9-39.7 13-57.1 23.7 8.1 18.1 4.7 40.1-10.2 55-9.6 9.6-22.3 14.4-34.9 14.4-6.9 0-13.7-1.4-20.1-4.3C77 170.3 68.9 189.5 64 210c18.5 7.1 31.7 25 31.7 46.1 0 21-13.1 38.9-31.6 46.1 4.9 20.5 13 39.7 23.7 57.1 6.4-2.8 13.2-4.2 20-4.2 12.6 0 25.2 4.8 34.9 14.4 14.8 14.8 18.2 36.8 10.2 54.9 17.4 10.7 36.7 18.8 57.1 23.7 7.1-18.5 25-31.6 46-31.6s38.9 13.1 46 31.6c20.5-4.9 39.7-13 57.1-23.7-8-18.1-4.6-40 10.2-54.9 9.6-9.6 22.2-14.4 34.9-14.4 6.8 0 13.7 1.4 20 4.2 10.7-17.4 18.8-36.7 23.7-57.1-18.4-7.2-31.6-25.1-31.6-46.2zm-159.4 79.9c-44.3 0-80-35.9-80-80s35.7-80 80-80 80 35.9 80 80-35.7 80-80 80z"},child:[]}]})(e)}function Nv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M261 149.3V64H48v384h416V149.3H261zm-127.8 256H90.6v-42.7h42.6v42.7zm0-85.3H90.6v-42.7h42.6V320zm0-85.3H90.6V192h42.6v42.7zm0-85.4H90.6v-42.7h42.6v42.7zm85.2 256h-42.6v-42.7h42.6v42.7zm0-85.3h-42.6v-42.7h42.6V320zm0-85.3h-42.6V192h42.6v42.7zm0-85.4h-42.6v-42.7h42.6v42.7zm203 256H261v-42.7h42.6V320H261v-42.7h42.6v-42.7H261V192h160.4v213.3zm-37.6-170.6h-42.6v42.7h42.6v-42.7zm0 85.3h-42.6v42.7h42.6V320z"},child:[]}]})(e)}function Fv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C140.559 48 48 140.559 48 256c0 115.436 92.559 208 208 208 115.435 0 208-92.564 208-208 0-115.441-92.564-208-208-208zm104.002 282.881l-29.12 29.117L256 285.117l-74.881 74.881-29.121-29.117L226.881 256l-74.883-74.881 29.121-29.116L256 226.881l74.881-74.878 29.12 29.116L285.119 256l74.883 74.881z"},child:[]}]})(e)}function Kv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M239.208 343.937c-17.78 10.103-38.342 15.876-60.255 15.876-21.909 0-42.467-5.771-60.246-15.87C71.544 358.331 42.643 406 32 448h293.912c-10.639-42-39.537-89.683-86.704-104.063zM178.953 120.035c-58.479 0-105.886 47.394-105.886 105.858 0 58.464 47.407 105.857 105.886 105.857s105.886-47.394 105.886-105.857c0-58.464-47.408-105.858-105.886-105.858zm0 186.488c-33.671 0-62.445-22.513-73.997-50.523H252.95c-11.554 28.011-40.326 50.523-73.997 50.523z"},child:[]},{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M322.602 384H480c-10.638-42-39.537-81.691-86.703-96.072-17.781 10.104-38.343 15.873-60.256 15.873-14.823 0-29.024-2.654-42.168-7.49-7.445 12.47-16.927 25.592-27.974 34.906C289.245 341.354 309.146 364 322.602 384zM306.545 200h100.493c-11.554 28-40.327 50.293-73.997 50.293-8.875 0-17.404-1.692-25.375-4.51a128.411 128.411 0 0 1-6.52 25.118c10.066 3.174 20.779 4.862 31.895 4.862 58.479 0 105.886-47.41 105.886-105.872 0-58.465-47.407-105.866-105.886-105.866-37.49 0-70.427 19.703-89.243 49.09C275.607 131.383 298.961 163 306.545 200z"},child:[]}]}]})(e)}function HC(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M249.2 224c-14.2-40.2-55.1-72-100.2-72-57.2 0-101 46.8-101 104s45.8 104 103 104c45.1 0 84.1-31.8 98.2-72H352v64h69.1v-64H464v-64H249.2zm-97.6 66.5c-19 0-34.5-15.5-34.5-34.5s15.5-34.5 34.5-34.5 34.5 15.5 34.5 34.5-15.5 34.5-34.5 34.5z"},child:[]}]})(e)}function xv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 464c22.779 0 41.411-18.719 41.411-41.6h-82.823c0 22.881 18.633 41.6 41.412 41.6zm134.589-124.8V224.8c0-63.44-44.516-117.518-103.53-131.041V79.2c0-17.682-13.457-31.2-31.059-31.2s-31.059 13.518-31.059 31.2v14.559c-59.015 13.523-103.53 67.601-103.53 131.041v114.4L80 380.8v20.8h352v-20.8l-41.411-41.6z"},child:[]}]})(e)}function oc(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function lb(e){return de({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(e)}function nb(e){return de({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function rc(e){return de({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function Ib(e){return de({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"},child:[]}]})(e)}function Ev(e){return de({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(e)}function zv(e){return de({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function Tv(e){return de({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-352 96c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm112 236.8c0 10.6-10 19.2-22.4 19.2H86.4C74 384 64 375.4 64 364.8v-19.2c0-31.8 30.1-57.6 67.2-57.6h5c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h5c37.1 0 67.2 25.8 67.2 57.6v19.2zM512 312c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-64c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-64c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function ac(e){return de({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function jl(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function MI(e){return de({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function LI(e){return de({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function Mv(e){return de({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function Lv(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(e)}const Fn=(e={})=>{const[t,g]=k.useState(e);return{...t,formState:t,onInputChange:({target:o})=>{const{name:r,value:a}=o;g({...t,[r]:a})},onResetForm:()=>{g(e)},onCheckBoxChange:({target:o})=>{const{name:r,value:a,checked:c}=o;g({...t,[r]:c})},updateForm:o=>{g({...o})}}};function ib(e,t){return function(){return e.apply(t,arguments)}}const{toString:Uv}=Object.prototype,{getPrototypeOf:Cc}=Object,cr=(e=>t=>{const g=Uv.call(t);return e[g]||(e[g]=g.slice(8,-1).toLowerCase())})(Object.create(null)),bg=e=>(e=e.toLowerCase(),t=>cr(t)===e),dr=e=>t=>typeof t===e,{isArray:Kn}=Array,UI=dr("undefined");function Qv(e){return e!==null&&!UI(e)&&e.constructor!==null&&!UI(e.constructor)&&Tt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ob=bg("ArrayBuffer");function jv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ob(e.buffer),t}const Dv=dr("string"),Tt=dr("function"),rb=dr("number"),ur=e=>e!==null&&typeof e=="object",Ov=e=>e===!0||e===!1,Li=e=>{if(cr(e)!=="object")return!1;const t=Cc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Pv=bg("Date"),_v=bg("File"),qv=bg("Blob"),$v=bg("FileList"),eS=e=>ur(e)&&Tt(e.pipe),tS=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Tt(e.append)&&((t=cr(e))==="formdata"||t==="object"&&Tt(e.toString)&&e.toString()==="[object FormData]"))},gS=bg("URLSearchParams"),lS=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ei(e,t,{allOwnKeys:g=!1}={}){if(e===null||typeof e>"u")return;let l,n;if(typeof e!="object"&&(e=[e]),Kn(e))for(l=0,n=e.length;l<n;l++)t.call(null,e[l],l,e);else{const I=g?Object.getOwnPropertyNames(e):Object.keys(e),i=I.length;let o;for(l=0;l<i;l++)o=I[l],t.call(null,e[o],o,e)}}function ab(e,t){t=t.toLowerCase();const g=Object.keys(e);let l=g.length,n;for(;l-- >0;)if(n=g[l],t===n.toLowerCase())return n;return null}const Cb=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),sb=e=>!UI(e)&&e!==Cb;function NC(){const{caseless:e}=sb(this)&&this||{},t={},g=(l,n)=>{const I=e&&ab(t,n)||n;Li(t[I])&&Li(l)?t[I]=NC(t[I],l):Li(l)?t[I]=NC({},l):Kn(l)?t[I]=l.slice():t[I]=l};for(let l=0,n=arguments.length;l<n;l++)arguments[l]&&ei(arguments[l],g);return t}const nS=(e,t,g,{allOwnKeys:l}={})=>(ei(t,(n,I)=>{g&&Tt(n)?e[I]=ib(n,g):e[I]=n},{allOwnKeys:l}),e),IS=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),iS=(e,t,g,l)=>{e.prototype=Object.create(t.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),g&&Object.assign(e.prototype,g)},oS=(e,t,g,l)=>{let n,I,i;const o={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),I=n.length;I-- >0;)i=n[I],(!l||l(i,e,t))&&!o[i]&&(t[i]=e[i],o[i]=!0);e=g!==!1&&Cc(e)}while(e&&(!g||g(e,t))&&e!==Object.prototype);return t},rS=(e,t,g)=>{e=String(e),(g===void 0||g>e.length)&&(g=e.length),g-=t.length;const l=e.indexOf(t,g);return l!==-1&&l===g},aS=e=>{if(!e)return null;if(Kn(e))return e;let t=e.length;if(!rb(t))return null;const g=new Array(t);for(;t-- >0;)g[t]=e[t];return g},CS=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Cc(Uint8Array)),sS=(e,t)=>{const l=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=l.next())&&!n.done;){const I=n.value;t.call(e,I[0],I[1])}},cS=(e,t)=>{let g;const l=[];for(;(g=e.exec(t))!==null;)l.push(g);return l},dS=bg("HTMLFormElement"),uS=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(g,l,n){return l.toUpperCase()+n}),Cu=(({hasOwnProperty:e})=>(t,g)=>e.call(t,g))(Object.prototype),AS=bg("RegExp"),cb=(e,t)=>{const g=Object.getOwnPropertyDescriptors(e),l={};ei(g,(n,I)=>{let i;(i=t(n,I,e))!==!1&&(l[I]=i||n)}),Object.defineProperties(e,l)},mS=e=>{cb(e,(t,g)=>{if(Tt(e)&&["arguments","caller","callee"].indexOf(g)!==-1)return!1;const l=e[g];if(Tt(l)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+g+"'")})}})},hS=(e,t)=>{const g={},l=n=>{n.forEach(I=>{g[I]=!0})};return Kn(e)?l(e):l(String(e).split(t)),g},bS=()=>{},pS=(e,t)=>(e=+e,Number.isFinite(e)?e:t),ha="abcdefghijklmnopqrstuvwxyz",su="0123456789",db={DIGIT:su,ALPHA:ha,ALPHA_DIGIT:ha+ha.toUpperCase()+su},fS=(e=16,t=db.ALPHA_DIGIT)=>{let g="";const{length:l}=t;for(;e--;)g+=t[Math.random()*l|0];return g};function ZS(e){return!!(e&&Tt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const yS=e=>{const t=new Array(10),g=(l,n)=>{if(ur(l)){if(t.indexOf(l)>=0)return;if(!("toJSON"in l)){t[n]=l;const I=Kn(l)?[]:{};return ei(l,(i,o)=>{const r=g(i,n+1);!UI(r)&&(I[o]=r)}),t[n]=void 0,I}}return l};return g(e,0)},GS=bg("AsyncFunction"),BS=e=>e&&(ur(e)||Tt(e))&&Tt(e.then)&&Tt(e.catch),_={isArray:Kn,isArrayBuffer:ob,isBuffer:Qv,isFormData:tS,isArrayBufferView:jv,isString:Dv,isNumber:rb,isBoolean:Ov,isObject:ur,isPlainObject:Li,isUndefined:UI,isDate:Pv,isFile:_v,isBlob:qv,isRegExp:AS,isFunction:Tt,isStream:eS,isURLSearchParams:gS,isTypedArray:CS,isFileList:$v,forEach:ei,merge:NC,extend:nS,trim:lS,stripBOM:IS,inherits:iS,toFlatObject:oS,kindOf:cr,kindOfTest:bg,endsWith:rS,toArray:aS,forEachEntry:sS,matchAll:cS,isHTMLForm:dS,hasOwnProperty:Cu,hasOwnProp:Cu,reduceDescriptors:cb,freezeMethods:mS,toObjectSet:hS,toCamelCase:uS,noop:bS,toFiniteNumber:pS,findKey:ab,global:Cb,isContextDefined:sb,ALPHABET:db,generateString:fS,isSpecCompliantForm:ZS,toJSONObject:yS,isAsyncFn:GS,isThenable:BS};function fe(e,t,g,l,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),g&&(this.config=g),l&&(this.request=l),n&&(this.response=n)}_.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ub=fe.prototype,Ab={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ab[e]={value:e}});Object.defineProperties(fe,Ab);Object.defineProperty(ub,"isAxiosError",{value:!0});fe.from=(e,t,g,l,n,I)=>{const i=Object.create(ub);return _.toFlatObject(e,i,function(r){return r!==Error.prototype},o=>o!=="isAxiosError"),fe.call(i,e.message,t,g,l,n),i.cause=e,i.name=e.name,I&&Object.assign(i,I),i};const vS=null;function FC(e){return _.isPlainObject(e)||_.isArray(e)}function mb(e){return _.endsWith(e,"[]")?e.slice(0,-2):e}function cu(e,t,g){return e?e.concat(t).map(function(n,I){return n=mb(n),!g&&I?"["+n+"]":n}).join(g?".":""):t}function SS(e){return _.isArray(e)&&!e.some(FC)}const VS=_.toFlatObject(_,{},null,function(t){return/^is[A-Z]/.test(t)});function Ar(e,t,g){if(!_.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,g=_.toFlatObject(g,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,Z){return!_.isUndefined(Z[p])});const l=g.metaTokens,n=g.visitor||c,I=g.dots,i=g.indexes,r=(g.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(t);if(!_.isFunction(n))throw new TypeError("visitor must be a function");function a(f){if(f===null)return"";if(_.isDate(f))return f.toISOString();if(!r&&_.isBlob(f))throw new fe("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(f)||_.isTypedArray(f)?r&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function c(f,p,Z){let m=f;if(f&&!Z&&typeof f=="object"){if(_.endsWith(p,"{}"))p=l?p:p.slice(0,-2),f=JSON.stringify(f);else if(_.isArray(f)&&SS(f)||(_.isFileList(f)||_.endsWith(p,"[]"))&&(m=_.toArray(f)))return p=mb(p),m.forEach(function(h,b){!(_.isUndefined(h)||h===null)&&t.append(i===!0?cu([p],b,I):i===null?p:p+"[]",a(h))}),!1}return FC(f)?!0:(t.append(cu(Z,p,I),a(f)),!1)}const s=[],d=Object.assign(VS,{defaultVisitor:c,convertValue:a,isVisitable:FC});function A(f,p){if(!_.isUndefined(f)){if(s.indexOf(f)!==-1)throw Error("Circular reference detected in "+p.join("."));s.push(f),_.forEach(f,function(m,u){(!(_.isUndefined(m)||m===null)&&n.call(t,m,_.isString(u)?u.trim():u,p,d))===!0&&A(m,p?p.concat(u):[u])}),s.pop()}}if(!_.isObject(e))throw new TypeError("data must be an object");return A(e),t}function du(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return t[l]})}function sc(e,t){this._pairs=[],e&&Ar(e,this,t)}const hb=sc.prototype;hb.append=function(t,g){this._pairs.push([t,g])};hb.toString=function(t){const g=t?function(l){return t.call(this,l,du)}:du;return this._pairs.map(function(n){return g(n[0])+"="+g(n[1])},"").join("&")};function WS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bb(e,t,g){if(!t)return e;const l=g&&g.encode||WS,n=g&&g.serialize;let I;if(n?I=n(t,g):I=_.isURLSearchParams(t)?t.toString():new sc(t,g).toString(l),I){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+I}return e}class RS{constructor(){this.handlers=[]}use(t,g,l){return this.handlers.push({fulfilled:t,rejected:g,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_.forEach(this.handlers,function(l){l!==null&&t(l)})}}const uu=RS,pb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XS=typeof URLSearchParams<"u"?URLSearchParams:sc,kS=typeof FormData<"u"?FormData:null,JS=typeof Blob<"u"?Blob:null,YS={isBrowser:!0,classes:{URLSearchParams:XS,FormData:kS,Blob:JS},protocols:["http","https","file","blob","url","data"]},fb=typeof window<"u"&&typeof document<"u",wS=(e=>fb&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),HS=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),NS=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fb,hasStandardBrowserEnv:wS,hasStandardBrowserWebWorkerEnv:HS},Symbol.toStringTag,{value:"Module"})),dg={...NS,...YS};function FS(e,t){return Ar(e,new dg.classes.URLSearchParams,Object.assign({visitor:function(g,l,n,I){return dg.isNode&&_.isBuffer(g)?(this.append(l,g.toString("base64")),!1):I.defaultVisitor.apply(this,arguments)}},t))}function KS(e){return _.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function xS(e){const t={},g=Object.keys(e);let l;const n=g.length;let I;for(l=0;l<n;l++)I=g[l],t[I]=e[I];return t}function Zb(e){function t(g,l,n,I){let i=g[I++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),r=I>=g.length;return i=!i&&_.isArray(n)?n.length:i,r?(_.hasOwnProp(n,i)?n[i]=[n[i],l]:n[i]=l,!o):((!n[i]||!_.isObject(n[i]))&&(n[i]=[]),t(g,l,n[i],I)&&_.isArray(n[i])&&(n[i]=xS(n[i])),!o)}if(_.isFormData(e)&&_.isFunction(e.entries)){const g={};return _.forEachEntry(e,(l,n)=>{t(KS(l),n,g,0)}),g}return null}function ES(e,t,g){if(_.isString(e))try{return(t||JSON.parse)(e),_.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(g||JSON.stringify)(e)}const cc={transitional:pb,adapter:["xhr","http"],transformRequest:[function(t,g){const l=g.getContentType()||"",n=l.indexOf("application/json")>-1,I=_.isObject(t);if(I&&_.isHTMLForm(t)&&(t=new FormData(t)),_.isFormData(t))return n&&n?JSON.stringify(Zb(t)):t;if(_.isArrayBuffer(t)||_.isBuffer(t)||_.isStream(t)||_.isFile(t)||_.isBlob(t))return t;if(_.isArrayBufferView(t))return t.buffer;if(_.isURLSearchParams(t))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(I){if(l.indexOf("application/x-www-form-urlencoded")>-1)return FS(t,this.formSerializer).toString();if((o=_.isFileList(t))||l.indexOf("multipart/form-data")>-1){const r=this.env&&this.env.FormData;return Ar(o?{"files[]":t}:t,r&&new r,this.formSerializer)}}return I||n?(g.setContentType("application/json",!1),ES(t)):t}],transformResponse:[function(t){const g=this.transitional||cc.transitional,l=g&&g.forcedJSONParsing,n=this.responseType==="json";if(t&&_.isString(t)&&(l&&!this.responseType||n)){const i=!(g&&g.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(o){if(i)throw o.name==="SyntaxError"?fe.from(o,fe.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dg.classes.FormData,Blob:dg.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],e=>{cc.headers[e]={}});const dc=cc,zS=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),TS=e=>{const t={};let g,l,n;return e&&e.split(`
`).forEach(function(i){n=i.indexOf(":"),g=i.substring(0,n).trim().toLowerCase(),l=i.substring(n+1).trim(),!(!g||t[g]&&zS[g])&&(g==="set-cookie"?t[g]?t[g].push(l):t[g]=[l]:t[g]=t[g]?t[g]+", "+l:l)}),t},Au=Symbol("internals");function eI(e){return e&&String(e).trim().toLowerCase()}function Ui(e){return e===!1||e==null?e:_.isArray(e)?e.map(Ui):String(e)}function MS(e){const t=Object.create(null),g=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=g.exec(e);)t[l[1]]=l[2];return t}const LS=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ba(e,t,g,l,n){if(_.isFunction(l))return l.call(this,t,g);if(n&&(t=g),!!_.isString(t)){if(_.isString(l))return t.indexOf(l)!==-1;if(_.isRegExp(l))return l.test(t)}}function US(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,g,l)=>g.toUpperCase()+l)}function QS(e,t){const g=_.toCamelCase(" "+t);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+g,{value:function(n,I,i){return this[l].call(this,t,n,I,i)},configurable:!0})})}class mr{constructor(t){t&&this.set(t)}set(t,g,l){const n=this;function I(o,r,a){const c=eI(r);if(!c)throw new Error("header name must be a non-empty string");const s=_.findKey(n,c);(!s||n[s]===void 0||a===!0||a===void 0&&n[s]!==!1)&&(n[s||r]=Ui(o))}const i=(o,r)=>_.forEach(o,(a,c)=>I(a,c,r));return _.isPlainObject(t)||t instanceof this.constructor?i(t,g):_.isString(t)&&(t=t.trim())&&!LS(t)?i(TS(t),g):t!=null&&I(g,t,l),this}get(t,g){if(t=eI(t),t){const l=_.findKey(this,t);if(l){const n=this[l];if(!g)return n;if(g===!0)return MS(n);if(_.isFunction(g))return g.call(this,n,l);if(_.isRegExp(g))return g.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,g){if(t=eI(t),t){const l=_.findKey(this,t);return!!(l&&this[l]!==void 0&&(!g||ba(this,this[l],l,g)))}return!1}delete(t,g){const l=this;let n=!1;function I(i){if(i=eI(i),i){const o=_.findKey(l,i);o&&(!g||ba(l,l[o],o,g))&&(delete l[o],n=!0)}}return _.isArray(t)?t.forEach(I):I(t),n}clear(t){const g=Object.keys(this);let l=g.length,n=!1;for(;l--;){const I=g[l];(!t||ba(this,this[I],I,t,!0))&&(delete this[I],n=!0)}return n}normalize(t){const g=this,l={};return _.forEach(this,(n,I)=>{const i=_.findKey(l,I);if(i){g[i]=Ui(n),delete g[I];return}const o=t?US(I):String(I).trim();o!==I&&delete g[I],g[o]=Ui(n),l[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const g=Object.create(null);return _.forEach(this,(l,n)=>{l!=null&&l!==!1&&(g[n]=t&&_.isArray(l)?l.join(", "):l)}),g}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,g])=>t+": "+g).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...g){const l=new this(t);return g.forEach(n=>l.set(n)),l}static accessor(t){const l=(this[Au]=this[Au]={accessors:{}}).accessors,n=this.prototype;function I(i){const o=eI(i);l[o]||(QS(n,i),l[o]=!0)}return _.isArray(t)?t.forEach(I):I(t),this}}mr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(mr.prototype,({value:e},t)=>{let g=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(l){this[g]=l}}});_.freezeMethods(mr);const Vg=mr;function pa(e,t){const g=this||dc,l=t||g,n=Vg.from(l.headers);let I=l.data;return _.forEach(e,function(o){I=o.call(g,I,n.normalize(),t?t.status:void 0)}),n.normalize(),I}function yb(e){return!!(e&&e.__CANCEL__)}function ti(e,t,g){fe.call(this,e??"canceled",fe.ERR_CANCELED,t,g),this.name="CanceledError"}_.inherits(ti,fe,{__CANCEL__:!0});function jS(e,t,g){const l=g.config.validateStatus;!g.status||!l||l(g.status)?e(g):t(new fe("Request failed with status code "+g.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(g.status/100)-4],g.config,g.request,g))}const DS=dg.hasStandardBrowserEnv?{write(e,t,g,l,n,I){const i=[e+"="+encodeURIComponent(t)];_.isNumber(g)&&i.push("expires="+new Date(g).toGMTString()),_.isString(l)&&i.push("path="+l),_.isString(n)&&i.push("domain="+n),I===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function OS(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function PS(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Gb(e,t){return e&&!OS(t)?PS(e,t):t}const _S=dg.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),g=document.createElement("a");let l;function n(I){let i=I;return t&&(g.setAttribute("href",i),i=g.href),g.setAttribute("href",i),{href:g.href,protocol:g.protocol?g.protocol.replace(/:$/,""):"",host:g.host,search:g.search?g.search.replace(/^\?/,""):"",hash:g.hash?g.hash.replace(/^#/,""):"",hostname:g.hostname,port:g.port,pathname:g.pathname.charAt(0)==="/"?g.pathname:"/"+g.pathname}}return l=n(window.location.href),function(i){const o=_.isString(i)?n(i):i;return o.protocol===l.protocol&&o.host===l.host}}():function(){return function(){return!0}}();function qS(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function $S(e,t){e=e||10;const g=new Array(e),l=new Array(e);let n=0,I=0,i;return t=t!==void 0?t:1e3,function(r){const a=Date.now(),c=l[I];i||(i=a),g[n]=r,l[n]=a;let s=I,d=0;for(;s!==n;)d+=g[s++],s=s%e;if(n=(n+1)%e,n===I&&(I=(I+1)%e),a-i<t)return;const A=c&&a-c;return A?Math.round(d*1e3/A):void 0}}function mu(e,t){let g=0;const l=$S(50,250);return n=>{const I=n.loaded,i=n.lengthComputable?n.total:void 0,o=I-g,r=l(o),a=I<=i;g=I;const c={loaded:I,total:i,progress:i?I/i:void 0,bytes:o,rate:r||void 0,estimated:r&&i&&a?(i-I)/r:void 0,event:n};c[t?"download":"upload"]=!0,e(c)}}const e2=typeof XMLHttpRequest<"u",t2=e2&&function(e){return new Promise(function(g,l){let n=e.data;const I=Vg.from(e.headers).normalize();let{responseType:i,withXSRFToken:o}=e,r;function a(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}let c;if(_.isFormData(n)){if(dg.hasStandardBrowserEnv||dg.hasStandardBrowserWebWorkerEnv)I.setContentType(!1);else if((c=I.getContentType())!==!1){const[p,...Z]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];I.setContentType([p||"multipart/form-data",...Z].join("; "))}}let s=new XMLHttpRequest;if(e.auth){const p=e.auth.username||"",Z=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";I.set("Authorization","Basic "+btoa(p+":"+Z))}const d=Gb(e.baseURL,e.url);s.open(e.method.toUpperCase(),bb(d,e.params,e.paramsSerializer),!0),s.timeout=e.timeout;function A(){if(!s)return;const p=Vg.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders()),m={data:!i||i==="text"||i==="json"?s.responseText:s.response,status:s.status,statusText:s.statusText,headers:p,config:e,request:s};jS(function(h){g(h),a()},function(h){l(h),a()},m),s=null}if("onloadend"in s?s.onloadend=A:s.onreadystatechange=function(){!s||s.readyState!==4||s.status===0&&!(s.responseURL&&s.responseURL.indexOf("file:")===0)||setTimeout(A)},s.onabort=function(){s&&(l(new fe("Request aborted",fe.ECONNABORTED,e,s)),s=null)},s.onerror=function(){l(new fe("Network Error",fe.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){let Z=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const m=e.transitional||pb;e.timeoutErrorMessage&&(Z=e.timeoutErrorMessage),l(new fe(Z,m.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,e,s)),s=null},dg.hasStandardBrowserEnv&&(o&&_.isFunction(o)&&(o=o(e)),o||o!==!1&&_S(d))){const p=e.xsrfHeaderName&&e.xsrfCookieName&&DS.read(e.xsrfCookieName);p&&I.set(e.xsrfHeaderName,p)}n===void 0&&I.setContentType(null),"setRequestHeader"in s&&_.forEach(I.toJSON(),function(Z,m){s.setRequestHeader(m,Z)}),_.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),i&&i!=="json"&&(s.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&s.addEventListener("progress",mu(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&s.upload&&s.upload.addEventListener("progress",mu(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=p=>{s&&(l(!p||p.type?new ti(null,e,s):p),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));const f=qS(d);if(f&&dg.protocols.indexOf(f)===-1){l(new fe("Unsupported protocol "+f+":",fe.ERR_BAD_REQUEST,e));return}s.send(n||null)})},KC={http:vS,xhr:t2};_.forEach(KC,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const hu=e=>`- ${e}`,g2=e=>_.isFunction(e)||e===null||e===!1,Bb={getAdapter:e=>{e=_.isArray(e)?e:[e];const{length:t}=e;let g,l;const n={};for(let I=0;I<t;I++){g=e[I];let i;if(l=g,!g2(g)&&(l=KC[(i=String(g)).toLowerCase()],l===void 0))throw new fe(`Unknown adapter '${i}'`);if(l)break;n[i||"#"+I]=l}if(!l){const I=Object.entries(n).map(([o,r])=>`adapter ${o} `+(r===!1?"is not supported by the environment":"is not available in the build"));let i=t?I.length>1?`since :
`+I.map(hu).join(`
`):" "+hu(I[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return l},adapters:KC};function fa(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ti(null,e)}function bu(e){return fa(e),e.headers=Vg.from(e.headers),e.data=pa.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Bb.getAdapter(e.adapter||dc.adapter)(e).then(function(l){return fa(e),l.data=pa.call(e,e.transformResponse,l),l.headers=Vg.from(l.headers),l},function(l){return yb(l)||(fa(e),l&&l.response&&(l.response.data=pa.call(e,e.transformResponse,l.response),l.response.headers=Vg.from(l.response.headers))),Promise.reject(l)})}const pu=e=>e instanceof Vg?e.toJSON():e;function Rn(e,t){t=t||{};const g={};function l(a,c,s){return _.isPlainObject(a)&&_.isPlainObject(c)?_.merge.call({caseless:s},a,c):_.isPlainObject(c)?_.merge({},c):_.isArray(c)?c.slice():c}function n(a,c,s){if(_.isUndefined(c)){if(!_.isUndefined(a))return l(void 0,a,s)}else return l(a,c,s)}function I(a,c){if(!_.isUndefined(c))return l(void 0,c)}function i(a,c){if(_.isUndefined(c)){if(!_.isUndefined(a))return l(void 0,a)}else return l(void 0,c)}function o(a,c,s){if(s in t)return l(a,c);if(s in e)return l(void 0,a)}const r={url:I,method:I,data:I,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(a,c)=>n(pu(a),pu(c),!0)};return _.forEach(Object.keys(Object.assign({},e,t)),function(c){const s=r[c]||n,d=s(e[c],t[c],c);_.isUndefined(d)&&s!==o||(g[c]=d)}),g}const vb="1.6.5",uc={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{uc[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});const fu={};uc.transitional=function(t,g,l){function n(I,i){return"[Axios v"+vb+"] Transitional option '"+I+"'"+i+(l?". "+l:"")}return(I,i,o)=>{if(t===!1)throw new fe(n(i," has been removed"+(g?" in "+g:"")),fe.ERR_DEPRECATED);return g&&!fu[i]&&(fu[i]=!0,console.warn(n(i," has been deprecated since v"+g+" and will be removed in the near future"))),t?t(I,i,o):!0}};function l2(e,t,g){if(typeof e!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let n=l.length;for(;n-- >0;){const I=l[n],i=t[I];if(i){const o=e[I],r=o===void 0||i(o,I,e);if(r!==!0)throw new fe("option "+I+" must be "+r,fe.ERR_BAD_OPTION_VALUE);continue}if(g!==!0)throw new fe("Unknown option "+I,fe.ERR_BAD_OPTION)}}const xC={assertOptions:l2,validators:uc},Kg=xC.validators;class Ro{constructor(t){this.defaults=t,this.interceptors={request:new uu,response:new uu}}request(t,g){typeof t=="string"?(g=g||{},g.url=t):g=t||{},g=Rn(this.defaults,g);const{transitional:l,paramsSerializer:n,headers:I}=g;l!==void 0&&xC.assertOptions(l,{silentJSONParsing:Kg.transitional(Kg.boolean),forcedJSONParsing:Kg.transitional(Kg.boolean),clarifyTimeoutError:Kg.transitional(Kg.boolean)},!1),n!=null&&(_.isFunction(n)?g.paramsSerializer={serialize:n}:xC.assertOptions(n,{encode:Kg.function,serialize:Kg.function},!0)),g.method=(g.method||this.defaults.method||"get").toLowerCase();let i=I&&_.merge(I.common,I[g.method]);I&&_.forEach(["delete","get","head","post","put","patch","common"],f=>{delete I[f]}),g.headers=Vg.concat(i,I);const o=[];let r=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(g)===!1||(r=r&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});const a=[];this.interceptors.response.forEach(function(p){a.push(p.fulfilled,p.rejected)});let c,s=0,d;if(!r){const f=[bu.bind(this),void 0];for(f.unshift.apply(f,o),f.push.apply(f,a),d=f.length,c=Promise.resolve(g);s<d;)c=c.then(f[s++],f[s++]);return c}d=o.length;let A=g;for(s=0;s<d;){const f=o[s++],p=o[s++];try{A=f(A)}catch(Z){p.call(this,Z);break}}try{c=bu.call(this,A)}catch(f){return Promise.reject(f)}for(s=0,d=a.length;s<d;)c=c.then(a[s++],a[s++]);return c}getUri(t){t=Rn(this.defaults,t);const g=Gb(t.baseURL,t.url);return bb(g,t.params,t.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(t){Ro.prototype[t]=function(g,l){return this.request(Rn(l||{},{method:t,url:g,data:(l||{}).data}))}});_.forEach(["post","put","patch"],function(t){function g(l){return function(I,i,o){return this.request(Rn(o||{},{method:t,headers:l?{"Content-Type":"multipart/form-data"}:{},url:I,data:i}))}}Ro.prototype[t]=g(),Ro.prototype[t+"Form"]=g(!0)});const Qi=Ro;class Ac{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let g;this.promise=new Promise(function(I){g=I});const l=this;this.promise.then(n=>{if(!l._listeners)return;let I=l._listeners.length;for(;I-- >0;)l._listeners[I](n);l._listeners=null}),this.promise.then=n=>{let I;const i=new Promise(o=>{l.subscribe(o),I=o}).then(n);return i.cancel=function(){l.unsubscribe(I)},i},t(function(I,i,o){l.reason||(l.reason=new ti(I,i,o),g(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const g=this._listeners.indexOf(t);g!==-1&&this._listeners.splice(g,1)}static source(){let t;return{token:new Ac(function(n){t=n}),cancel:t}}}const n2=Ac;function I2(e){return function(g){return e.apply(null,g)}}function i2(e){return _.isObject(e)&&e.isAxiosError===!0}const EC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(EC).forEach(([e,t])=>{EC[t]=e});const o2=EC;function Sb(e){const t=new Qi(e),g=ib(Qi.prototype.request,t);return _.extend(g,Qi.prototype,t,{allOwnKeys:!0}),_.extend(g,t,null,{allOwnKeys:!0}),g.create=function(n){return Sb(Rn(e,n))},g}const Pe=Sb(dc);Pe.Axios=Qi;Pe.CanceledError=ti;Pe.CancelToken=n2;Pe.isCancel=yb;Pe.VERSION=vb;Pe.toFormData=Ar;Pe.AxiosError=fe;Pe.Cancel=Pe.CanceledError;Pe.all=function(t){return Promise.all(t)};Pe.spread=I2;Pe.isAxiosError=i2;Pe.mergeConfig=Rn;Pe.AxiosHeaders=Vg;Pe.formToJSON=e=>Zb(_.isHTMLForm(e)?new FormData(e):e);Pe.getAdapter=Bb.getAdapter;Pe.HttpStatusCode=o2;Pe.default=Pe;const Be=Pe;function r2(e,{insertAt:t}={}){if(!e||typeof document>"u")return;let g=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css",t==="top"&&g.firstChild?g.insertBefore(l,g.firstChild):g.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}r2(`html[dir=ltr],[data-sonner-toaster][dir=ltr]{--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}html[dir=rtl],[data-sonner-toaster][dir=rtl]{--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toast][data-theme=dark] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=info],[data-rich-colors=true] [data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true] [data-sonner-toast][data-type=warning],[data-rich-colors=true] [data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);var a2=e=>{switch(e){case"success":return c2;case"info":return u2;case"warning":return d2;case"error":return A2;default:return null}},C2=Array(12).fill(0),s2=({visible:e})=>q.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},q.createElement("div",{className:"sonner-spinner"},C2.map((t,g)=>q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${g}`})))),c2=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),d2=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),u2=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),A2=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),zC=1,m2=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:g,...l}=e,n=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:zC++,I=this.toasts.find(o=>o.id===n),i=e.dismissible===void 0?!0:e.dismissible;return I?this.toasts=this.toasts.map(o=>o.id===n?(this.publish({...o,...e,id:n,title:g}),{...o,...e,id:n,dismissible:i,title:g}):o):this.addToast({title:g,...l,dismissible:i,id:n}),n},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(g=>g({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let g;t.loading!==void 0&&(g=this.create({...t,promise:e,type:"loading",message:t.loading}));let l=e instanceof Promise?e:e(),n=g!==void 0;return l.then(I=>{if(I&&typeof I.ok=="boolean"&&!I.ok){n=!1;let i=typeof t.error=="function"?t.error(`HTTP error! status: ${I.status}`):t.error;this.create({id:g,type:"error",message:i})}else if(t.success!==void 0){n=!1;let i=typeof t.success=="function"?t.success(I):t.success;this.create({id:g,type:"success",message:i})}}).catch(I=>{if(t.error!==void 0){n=!1;let i=typeof t.error=="function"?t.error(I):t.error;this.create({id:g,type:"error",message:i})}}).finally(()=>{var I;n&&(this.dismiss(g),g=void 0),(I=t.finally)==null||I.call(t)}),g},this.custom=(e,t)=>{let g=(t==null?void 0:t.id)||zC++;return this.create({jsx:e(g),id:g,...t}),g},this.subscribers=[],this.toasts=[]}},Ot=new m2,h2=(e,t)=>{let g=(t==null?void 0:t.id)||zC++;return Ot.addToast({title:e,...t,id:g}),g},b2=h2,At=Object.assign(b2,{success:Ot.success,info:Ot.info,warning:Ot.warning,error:Ot.error,custom:Ot.custom,message:Ot.message,promise:Ot.promise,dismiss:Ot.dismiss,loading:Ot.loading}),p2=3,f2="32px",Z2=4e3,y2=356,Vb=14,G2=20,B2=200;function Dl(...e){return e.filter(Boolean).join(" ")}var v2=e=>{var t,g,l,n,I,i,o;let{invert:r,toast:a,unstyled:c,interacting:s,setHeights:d,visibleToasts:A,heights:f,index:p,toasts:Z,expanded:m,removeToast:u,closeButton:h,style:b,cancelButtonStyle:y,actionButtonStyle:V,className:v="",descriptionClassName:S="",duration:X,position:G,gap:B=Vb,loadingIcon:W,expandByDefault:R,classNames:Y,closeButtonAriaLabel:F="Close toast"}=e,[M,U]=q.useState(!1),[E,x]=q.useState(!1),[w,J]=q.useState(!1),[N,K]=q.useState(!1),[z,L]=q.useState(0),[H,T]=q.useState(0),Q=q.useRef(null),j=q.useRef(null),D=p===0,te=p+1<=A,ne=a.type,Ie=a.dismissible!==!1,ae=a.className||"",oe=a.descriptionClassName||"",Xe=q.useMemo(()=>f.findIndex(he=>he.toastId===a.id)||0,[f,a.id]),ve=q.useMemo(()=>a.duration||X||Z2,[a.duration,X]),O=q.useRef(0),P=q.useRef(0);q.useRef(ve);let ge=q.useRef(0),le=q.useRef(null),[$,ue]=G.split("-"),se=q.useMemo(()=>f.reduce((he,Ae,Se)=>Se>=Xe?he:he+Ae.height,0),[f,Xe]),me=a.invert||r,Ce=ne==="loading";P.current=q.useMemo(()=>Xe*B+se,[Xe,se]),q.useEffect(()=>{U(!0)},[]),q.useLayoutEffect(()=>{if(!M)return;let he=j.current,Ae=he.style.height;he.style.height="auto";let Se=he.getBoundingClientRect().height;he.style.height=Ae,T(Se),d(ng=>ng.find(Ig=>Ig.toastId===a.id)?ng.map(Ig=>Ig.toastId===a.id?{...Ig,height:Se}:Ig):[{toastId:a.id,height:Se},...ng])},[M,a.title,a.description,d,a.id]);let Ye=q.useCallback(()=>{x(!0),L(P.current),d(he=>he.filter(Ae=>Ae.toastId!==a.id)),setTimeout(()=>{u(a)},B2)},[a,u,d,P]);q.useEffect(()=>{if(a.promise&&ne==="loading"||a.duration===1/0)return;let he,Ae=ve;return m||s?(()=>{if(ge.current<O.current){let Se=new Date().getTime()-O.current;Ae=Ae-Se}ge.current=new Date().getTime()})():(O.current=new Date().getTime(),he=setTimeout(()=>{var Se;(Se=a.onAutoClose)==null||Se.call(a,a),Ye()},Ae)),()=>clearTimeout(he)},[m,s,R,a,ve,Ye,a.promise,ne]),q.useEffect(()=>{let he=j.current;if(he){let Ae=he.getBoundingClientRect().height;return T(Ae),d(Se=>[{toastId:a.id,height:Ae},...Se]),()=>d(Se=>Se.filter(ng=>ng.toastId!==a.id))}},[d,a.id]),q.useEffect(()=>{a.delete&&Ye()},[Ye,a.delete]);function We(){return W?q.createElement("div",{className:"loader","data-visible":ne==="loading"},W):q.createElement(s2,{visible:ne==="loading"})}return q.createElement("li",{"aria-live":a.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:j,className:Dl(v,ae,Y==null?void 0:Y.toast,(t=a==null?void 0:a.classNames)==null?void 0:t.toast,Y==null?void 0:Y[ne],(g=a==null?void 0:a.classNames)==null?void 0:g[ne]),"data-sonner-toast":"","data-styled":!(a.jsx||a.unstyled||c),"data-mounted":M,"data-promise":!!a.promise,"data-removed":E,"data-visible":te,"data-y-position":$,"data-x-position":ue,"data-index":p,"data-front":D,"data-swiping":w,"data-dismissible":Ie,"data-type":ne,"data-invert":me,"data-swipe-out":N,"data-expanded":!!(m||R&&M),style:{"--index":p,"--toasts-before":p,"--z-index":Z.length-p,"--offset":`${E?z:P.current}px`,"--initial-height":R?"auto":`${H}px`,...b,...a.style},onPointerDown:he=>{Ce||!Ie||(Q.current=new Date,L(P.current),he.target.setPointerCapture(he.pointerId),he.target.tagName!=="BUTTON"&&(J(!0),le.current={x:he.clientX,y:he.clientY}))},onPointerUp:()=>{var he,Ae,Se,ng;if(N||!Ie)return;le.current=null;let Ig=Number(((he=j.current)==null?void 0:he.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Ii=new Date().getTime()-((Ae=Q.current)==null?void 0:Ae.getTime()),Fp=Math.abs(Ig)/Ii;if(Math.abs(Ig)>=G2||Fp>.11){L(P.current),(Se=a.onDismiss)==null||Se.call(a,a),Ye(),K(!0);return}(ng=j.current)==null||ng.style.setProperty("--swipe-amount","0px"),J(!1)},onPointerMove:he=>{var Ae;if(!le.current||!Ie)return;let Se=he.clientY-le.current.y,ng=he.clientX-le.current.x,Ig=($==="top"?Math.min:Math.max)(0,Se),Ii=he.pointerType==="touch"?10:2;Math.abs(Ig)>Ii?(Ae=j.current)==null||Ae.style.setProperty("--swipe-amount",`${Se}px`):Math.abs(ng)>Ii&&(le.current=null)}},h&&!a.jsx?q.createElement("button",{"aria-label":F,"data-disabled":Ce,"data-close-button":!0,onClick:Ce||!Ie?()=>{}:()=>{var he;Ye(),(he=a.onDismiss)==null||he.call(a,a)},className:Dl(Y==null?void 0:Y.closeButton,(l=a==null?void 0:a.classNames)==null?void 0:l.closeButton)},q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,a.jsx||q.isValidElement(a.title)?a.jsx||a.title:q.createElement(q.Fragment,null,ne||a.icon||a.promise?q.createElement("div",{"data-icon":""},(a.promise||a.type==="loading")&&!a.icon?We():null,a.icon||a2(ne)):null,q.createElement("div",{"data-content":""},q.createElement("div",{"data-title":"",className:Dl(Y==null?void 0:Y.title,(n=a==null?void 0:a.classNames)==null?void 0:n.title)},a.title),a.description?q.createElement("div",{"data-description":"",className:Dl(S,oe,Y==null?void 0:Y.description,(I=a==null?void 0:a.classNames)==null?void 0:I.description)},a.description):null),a.cancel?q.createElement("button",{"data-button":!0,"data-cancel":!0,style:a.cancelButtonStyle||y,onClick:()=>{var he;Ie&&(Ye(),(he=a.cancel)!=null&&he.onClick&&a.cancel.onClick())},className:Dl(Y==null?void 0:Y.cancelButton,(i=a==null?void 0:a.classNames)==null?void 0:i.cancelButton)},a.cancel.label):null,a.action?q.createElement("button",{"data-button":"",style:a.actionButtonStyle||V,onClick:he=>{var Ae;(Ae=a.action)==null||Ae.onClick(he),!he.defaultPrevented&&Ye()},className:Dl(Y==null?void 0:Y.actionButton,(o=a==null?void 0:a.classNames)==null?void 0:o.actionButton)},a.action.label):null))};function Zu(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var Tl=e=>{let{invert:t,position:g="bottom-right",hotkey:l=["altKey","KeyT"],expand:n,closeButton:I,className:i,offset:o,theme:r="light",richColors:a,duration:c,style:s,visibleToasts:d=p2,toastOptions:A,dir:f=Zu(),gap:p,loadingIcon:Z,containerAriaLabel:m="Notifications"}=e,[u,h]=q.useState([]),b=q.useMemo(()=>Array.from(new Set([g].concat(u.filter(E=>E.position).map(E=>E.position)))),[u,g]),[y,V]=q.useState([]),[v,S]=q.useState(!1),[X,G]=q.useState(!1),[B,W]=q.useState(r!=="system"?r:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=q.useRef(null),Y=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=q.useRef(null),M=q.useRef(!1),U=q.useCallback(E=>h(x=>x.filter(({id:w})=>w!==E.id)),[]);return q.useEffect(()=>Ot.subscribe(E=>{if(E.dismiss){h(x=>x.map(w=>w.id===E.id?{...w,delete:!0}:w));return}setTimeout(()=>{Rl.flushSync(()=>{h(x=>{let w=x.findIndex(J=>J.id===E.id);return w!==-1?[...x.slice(0,w),{...x[w],...E},...x.slice(w+1)]:[E,...x]})})})}),[]),q.useEffect(()=>{if(r!=="system"){W(r);return}r==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:E})=>{W(E?"dark":"light")})},[r]),q.useEffect(()=>{u.length<=1&&S(!1)},[u]),q.useEffect(()=>{let E=x=>{var w,J;l.every(N=>x[N]||x.code===N)&&(S(!0),(w=R.current)==null||w.focus()),x.code==="Escape"&&(document.activeElement===R.current||(J=R.current)!=null&&J.contains(document.activeElement))&&S(!1)};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[l]),q.useEffect(()=>{if(R.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,M.current=!1)}},[R.current]),u.length?q.createElement("section",{"aria-label":`${m} ${Y}`,tabIndex:-1},b.map((E,x)=>{var w;let[J,N]=E.split("-");return q.createElement("ol",{key:E,dir:f==="auto"?Zu():f,tabIndex:-1,ref:R,className:i,"data-sonner-toaster":!0,"data-theme":B,"data-rich-colors":a,"data-y-position":J,"data-x-position":N,style:{"--front-toast-height":`${(w=y[0])==null?void 0:w.height}px`,"--offset":typeof o=="number"?`${o}px`:o||f2,"--width":`${y2}px`,"--gap":`${Vb}px`,...s},onBlur:K=>{M.current&&!K.currentTarget.contains(K.relatedTarget)&&(M.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:K=>{K.target instanceof HTMLElement&&K.target.dataset.dismissible==="false"||M.current||(M.current=!0,F.current=K.relatedTarget)},onMouseEnter:()=>S(!0),onMouseMove:()=>S(!0),onMouseLeave:()=>{X||S(!1)},onPointerDown:K=>{K.target instanceof HTMLElement&&K.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},u.filter(K=>!K.position&&x===0||K.position===E).map((K,z)=>{var L;return q.createElement(v2,{key:K.id,index:z,toast:K,duration:(L=A==null?void 0:A.duration)!=null?L:c,className:A==null?void 0:A.className,descriptionClassName:A==null?void 0:A.descriptionClassName,invert:t,visibleToasts:d,closeButton:I,interacting:X,position:E,style:A==null?void 0:A.style,unstyled:A==null?void 0:A.unstyled,classNames:A==null?void 0:A.classNames,cancelButtonStyle:A==null?void 0:A.cancelButtonStyle,actionButtonStyle:A==null?void 0:A.actionButtonStyle,removeToast:U,toasts:u,heights:y,setHeights:V,expandByDefault:n,gap:p,loadingIcon:Z,expanded:v})}))})):null};const gi=()=>{const e="https://api.knowmeapp.com";return{createUser:async I=>{const i=new Promise(async(o,r)=>{Be.post(`${e}/api/auth/new`,I).then(a=>(a.error==null?o(a):r(a.error.response.data.msg),a),a=>(r(a.response.data.msg),a))});return At.promise(i,{loading:"Creando usuario...",success:o=>"Usuario creado exitosamente",error:o=>o}),await i},login:async I=>await Be.post(`${e}/api/auth/`,I),renewToken:async I=>{const i=localStorage.getItem("token");return await Be.get(`${e}/api/auth/renew`,{headers:{"x-token":i}})},validateUser:async I=>{const i=new Promise(async(o,r)=>{Be.post(`${e}/api/auth/validate`,I).then(a=>(a.error==null?a.data.msg!="Usuario vlido"?r(a.data.msg):o(a):r(a.error.response.data.msg),a),a=>(r(a.response.data.msg),a))});return At.promise(i,{loading:"Validando usuario...",success:o=>(console.log(o.data.msg),"Usuario vlido"),error:o=>o}),await i}}};var Wb={},Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.cssValue=Xn.parseLengthAndUnit=void 0;var S2={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function Rb(e){if(typeof e=="number")return{value:e,unit:"px"};var t,g=(e.match(/^[0-9.]*/)||"").toString();g.includes(".")?t=parseFloat(g):t=parseInt(g,10);var l=(e.match(/[^0-9]*$/)||"").toString();return S2[l]?{value:t,unit:l}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}Xn.parseLengthAndUnit=Rb;function V2(e){var t=Rb(e);return"".concat(t.value).concat(t.unit)}Xn.cssValue=V2;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.createAnimation=void 0;var W2=function(e,t,g){var l="react-spinners-".concat(e,"-").concat(g);if(typeof window>"u"||!window.document)return l;var n=document.createElement("style");document.head.appendChild(n);var I=n.sheet,i=`
    @keyframes `.concat(l,` {
      `).concat(t,`
    }
  `);return I&&I.insertRule(i,0),l};hr.createAnimation=W2;var Xo=Ee&&Ee.__assign||function(){return Xo=Object.assign||function(e){for(var t,g=1,l=arguments.length;g<l;g++){t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Xo.apply(this,arguments)},R2=Ee&&Ee.__createBinding||(Object.create?function(e,t,g,l){l===void 0&&(l=g);var n=Object.getOwnPropertyDescriptor(t,g);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[g]}}),Object.defineProperty(e,l,n)}:function(e,t,g,l){l===void 0&&(l=g),e[l]=t[g]}),X2=Ee&&Ee.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),k2=Ee&&Ee.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var g in e)g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)&&R2(t,e,g);return X2(t,e),t},J2=Ee&&Ee.__rest||function(e,t){var g={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(g[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(g[l[n]]=e[l[n]]);return g};Object.defineProperty(Wb,"__esModule",{value:!0});var Y2=k2(k),yu=Xn,w2=hr,H2=(0,w2.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function N2(e){var t=e.loading,g=t===void 0?!0:t,l=e.color,n=l===void 0?"#000000":l,I=e.speedMultiplier,i=I===void 0?1:I,o=e.cssOverride,r=o===void 0?{}:o,a=e.size,c=a===void 0?35:a,s=J2(e,["loading","color","speedMultiplier","cssOverride","size"]),d=Xo({background:"transparent !important",width:(0,yu.cssValue)(c),height:(0,yu.cssValue)(c),borderRadius:"100%",border:"2px solid",borderTopColor:n,borderBottomColor:"transparent",borderLeftColor:n,borderRightColor:n,display:"inline-block",animation:"".concat(H2," ").concat(.75/i,"s 0s infinite linear"),animationFillMode:"both"},r);return g?Y2.createElement("span",Xo({style:d},s)):null}var F2=Wb.default=N2;const Xb=()=>C.jsx("div",{className:"spinner-modal",children:C.jsx("div",{children:C.jsx(F2,{color:"#597393",size:150})})}),Qt=k.createContext({user:{}});function K2(e){return de({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zM4 12c0-.899.156-1.762.431-2.569L6 11l2 2v2l2 2 1 1v1.931C7.061 19.436 4 16.072 4 12zm14.33 4.873C17.677 16.347 16.687 16 16 16v-1a2 2 0 0 0-2-2h-4v-3a2 2 0 0 0 2-2V7h1a2 2 0 0 0 2-2v-.411C17.928 5.778 20 8.65 20 12a7.947 7.947 0 0 1-1.67 4.873z"},child:[]}]})(e)}function x2(e){return de({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm-7.5 12a2.5 2.5 0 1 1 0-5 2.47 2.47 0 0 1 1.5.512c-.604.456-1 1.173-1 1.988s.396 1.532 1 1.988a2.47 2.47 0 0 1-1.5.512zm4 0a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function E2(e){return de({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M254.3,107.91,228.78,56.85a16,16,0,0,0-21.47-7.15L182.44,62.13,130.05,48.27a8.14,8.14,0,0,0-4.1,0L73.56,62.13,48.69,49.7a16,16,0,0,0-21.47,7.15L1.7,107.9a16,16,0,0,0,7.15,21.47l27,13.51,55.49,39.63a8.06,8.06,0,0,0,2.71,1.25l64,16a8,8,0,0,0,7.6-2.1l40-40,15.08-15.08,26.42-13.21a16,16,0,0,0,7.15-21.46Zm-54.89,33.37L165,113.72a8,8,0,0,0-10.68.61C136.51,132.27,116.66,130,104,122L147.24,80h31.81l27.21,54.41Zm-41.87,41.86L99.42,168.61l-49.2-35.14,28-56L128,64.28l9.8,2.59-45,43.68-.08.09a16,16,0,0,0,2.72,24.81c20.56,13.13,45.37,11,64.91-5L188,152.66Zm-25.72,34.8a8,8,0,0,1-7.75,6.06,8.13,8.13,0,0,1-1.95-.24L80.41,213.33a7.89,7.89,0,0,1-2.71-1.25L51.35,193.26a8,8,0,0,1,9.3-13l25.11,17.94L126,208.24A8,8,0,0,1,131.82,217.94Z"},child:[]}]})(e)}const z2=()=>C.jsx(C.Fragment,{children:C.jsxs("div",{className:"benefits-container-landing",children:[C.jsx("div",{className:"benefits-title-landing",children:C.jsx("h3",{children:"Por qu Know Me?"})}),C.jsx("div",{className:"separator-landing"}),C.jsxs("div",{className:"benefit-landing",children:[C.jsxs("div",{children:[C.jsx("h3",{children:"Red nacional de contactos"}),C.jsxs("p",{children:["En Know Me, creemos en el poder de las conexiones significativas. Con nuestra red nacional de contactos, ampliamos tus oportunidades profesionales ms all de las fronteras. ",C.jsx("br",{})," Conecta con profesionales de diversas industrias y ciudades, fortalece tu red y descubre nuevas oportunidades que te esperan en todo el pas."]})]}),C.jsx("div",{children:C.jsx(K2,{className:"benefit-icon-landing"})})]}),C.jsx("div",{className:"separator-landing"}),C.jsxs("div",{className:"benefit-landing",children:[C.jsxs("div",{children:[C.jsx("h3",{children:"Siempre al alcance de todos"}),C.jsx("p",{children:"Nos esforzamos por hacer que Know Me sea accesible para todos, sin importar dnde te encuentres o qu dispositivo ests utilizando. Nuestra plataforma est diseada para adaptarse a tus necesidades, ofrecindote la flexibilidad para conectarte con tu red profesional en cualquier momento y desde cualquier lugar. Porque creemos que cada conexin cuenta, y queremos que tengas las herramientas para hacerlo realidad."})]}),C.jsx("div",{children:C.jsx(E2,{className:"benefit-icon-landing"})})]})]})}),T2="/assets/card11-edc61d27.png",M2="/assets/FrameC-da730b01.png";const L2=()=>{const e=_e();return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"cards-container-landing",children:[C.jsx("div",{children:C.jsx("img",{src:T2,alt:"",className:"header-img-landing"})}),C.jsxs("div",{className:"card-title-landing",children:[C.jsx("h2",{children:"A donde quiera que vayas, siempre comparte tu perfil profesional"}),C.jsx("p",{children:"Conecta sin lmites, comparte sin fronteras. Tu red profesional a un clic de distancia."}),C.jsx("div",{className:"btn-container-landing",children:C.jsx(et,{onClick:()=>{e("/login")},children:"Empieza aqu"})})]})]}),C.jsxs("div",{className:"cards-container-landing",children:[C.jsxs("div",{className:"card-title-landing",children:[C.jsx("h2",{children:"Construye tu red, impulsa tu carrera"}),C.jsx("p",{children:"Regstrate hoy y descubre cmo nuestra plataforma puede transformar la manera en que te conectas profesionalmente."}),C.jsx("div",{className:"btn-container-landing",children:C.jsx(et,{onClick:()=>{e("/login")},children:"Empieza aqu"})})]}),C.jsx("div",{children:C.jsx("img",{src:M2,alt:"",className:"header-img-2-landing header-img-landing"})})]})]})};const mc=()=>C.jsx(C.Fragment,{children:C.jsx("div",{className:"footer-main",children:C.jsxs("div",{className:"footer-container",children:[C.jsxs("div",{className:"footer-title",children:[C.jsxs("h3",{children:[" ",C.jsxs("a",{href:"https://www.knowmeapp.com/",target:"_blank",rel:"noopener noreferrer",children:["Know Me"," "]})]}),C.jsxs("p",{children:["Made with  by"," ",C.jsx("a",{href:"https://www.inxeniux.com/",target:"_blank",rel:"noopener noreferrer",children:"INXENIUX"})]})]}),C.jsxs("div",{className:"footer-socials",children:[C.jsx("div",{children:C.jsx(oc,{className:"footer-icon"})}),C.jsx("div",{children:C.jsx(Ev,{className:"footer-icon"})}),C.jsx("div",{children:C.jsx(rc,{className:"footer-icon"})})]})]})})}),U2="/assets/cardH-496e1402.png";const Q2=()=>C.jsxs(C.Fragment,{children:[" ",C.jsxs("div",{className:"header-container-landing",children:[C.jsx("div",{className:"header-img-landing",children:C.jsx("img",{src:U2,alt:"knowme tarjeta"})}),C.jsxs("div",{className:"header-title-landing",children:[C.jsx("h2",{children:"La nueva forma de hacerte notar"}),C.jsx("p",{children:"Tu tarjeta de presentacin digital crea, comparte y conecta al instante con un mundo profesional en movimiento."})]})]})]});const j2=()=>{const e=_e();return C.jsxs("div",{className:"navbar-container-landing",children:[C.jsx("div",{className:"logo-nav-landing",children:C.jsx("p",{children:"Know Me"})}),C.jsxs("div",{className:"navbar-links-container-landing",children:[C.jsx("div",{className:"button-nav-landing",children:C.jsx(et,{children:"Beneficios"})}),C.jsx("div",{className:"button-nav-landing",children:C.jsx(et,{onClick:()=>{e("/login")},children:"Empieza aqu"})})]})]})};const D2="/assets/basico-ada405cc.png",O2="/assets/emprendedor-62ccf48d.png",P2="/assets/business-e558c531.png",_2=()=>C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"review-title",children:C.jsx("h3",{children:"Planes"})}),C.jsxs(ke,{className:"cards-container",children:[C.jsx(re,{md:4,className:"mb-4",children:C.jsxs(dt,{className:"subscription-card",children:[C.jsx(dt.Img,{variant:"top",src:D2}),C.jsxs(dt.Body,{children:[C.jsx(dt.Title,{children:"Plan Gratuito"}),C.jsx(dt.Text,{children:"Crea un perfil bsico y accede al QR digital."})]})]})}),C.jsx(re,{md:4,className:"mb-4",children:C.jsxs(dt,{className:"subscription-card",children:[C.jsx(dt.Img,{variant:"top",src:O2}),C.jsxs(dt.Body,{children:[C.jsx(dt.Title,{children:"Plan Emprendedor"}),C.jsx(dt.Text,{children:"Incluye una tarjeta fsica personalizada."})]})]})}),C.jsx(re,{md:4,className:"mb-4",children:C.jsxs(dt,{className:"subscription-card",children:[C.jsx(dt.Img,{variant:"top",src:P2}),C.jsxs(dt.Body,{children:[C.jsx(dt.Title,{children:"Plan Business"}),C.jsx(dt.Text,{children:"Solucin para toda una organizacin."})]})]})})]})]}),q2={email:"",password:""},$2=()=>{const[e,t]=k.useState(!1),[g,l]=k.useState(!1),n=_e(),{formState:I,onInputChange:i,onResetForm:o}=Fn(q2),{user:r}=k.useContext(Qt),a=gi(),c=()=>{t(!e)},s=async()=>{l(!0);try{const A=await a.login(I);if(A.status==200){l(!1);const{email:f,fullname:p,id:Z,id_plan_fk:m,username:u,token:h}=A.data;r.email=f,r.fullname=p,r.id=Z,r.id_plan_fk=m,r.username=u,localStorage.setItem("token",h),localStorage.setItem("fullname",p),localStorage.setItem("email",f),localStorage.setItem("id_plan",m),n("/home")}}catch{At.error("Error al iniciar sesin"),l(!1)}},d=26;return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"login-view",children:[g&&C.jsx(Xb,{}),C.jsx(Tl,{richColors:!0,position:"top-right"}),C.jsxs("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:[C.jsxs(ke,{children:[C.jsx(re,{}),C.jsx(re,{xs:10,md:6,children:C.jsxs("div",{className:"login-card",children:[C.jsx($I,{src:ec,beforeInjection:A=>{A.classList.add("login-logo")},className:"cursor-pointer",onClick:()=>{n("/")}}),C.jsx("h2",{class:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-white",children:"Inicia sesin"}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-white",children:"Correo electrnico"}),C.jsxs("div",{className:"mt-2 flex items-center",children:[C.jsx(tb,{size:d,color:"#FFFFFF",className:"w-10 mr-2"}),C.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-orange-600 sm:text-sm sm:leading-6 bg-white px-2",onChange:i,placeholder:"correo electrnico"})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-white",children:"Contrasea"}),C.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[C.jsx(HC,{size:d,color:"#FFFFFF",className:"w-10 mr-3"}),C.jsx("input",{id:"password",name:"password",type:e?"text":"password",autoComplete:"current-password",required:!0,value:I.password,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-orange-600 sm:text-sm sm:leading-6 bg-white px-2",onChange:i,placeholder:"contrasea"}),e?C.jsx(MI,{size:d,color:"#ffffff",className:"cursor-pointer text-white mx-4",onClick:c}):C.jsx(LI,{size:d,color:"#ffffff",className:"cursor-pointer text-white mx-4",onClick:c})]})]}),C.jsx("div",{className:"text-sm flex justify-end my-3",children:C.jsx("span",{className:"font-semibold text-orange-400 hover:text-white cursor-pointer",onClick:()=>{n("/forgot/")},children:"Olvidaste tu contrasea?"})}),C.jsx(et,{className:"flex w-full justify-center rounded-md bg-orange-500 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 border-hidden",onClick:s,children:"Iniciar sesin"})]})}),C.jsx(re,{})]}),C.jsxs(ke,{className:"login-register",children:[C.jsx(re,{xs:12,md:12,children:"No tienes una cuenta?"}),C.jsx(re,{xs:12,md:12,children:C.jsx("span",{onClick:()=>{n("/registro")},children:"Regstrate"})})]})]})]}),C.jsx(mc,{})]})};const e1={nombre:"",apellido:"",email:"",password:"",confirmacion:"",consent:!1,terms:!1},t1=()=>{const[e,t]=k.useState(!1),[g,l]=k.useState(!1),n=_e(),{formState:I,onInputChange:i,onResetForm:o,onCheckBoxChange:r}=Fn(e1),a=()=>{t(!e)},c=async()=>{if(Object.values(I).includes("")||I.terms==!1||I.password!=I.confirmacion)l(!0);else try{const A={name:I.nombre,lastname:I.apellido,email:I.email,password:I.password,mailing_status:I.consent,terms_policies_status:I.terms};n("/plan",{state:{user:I}})}catch{}},s=26;return C.jsxs("div",{className:"register-view",children:[C.jsx(ac,{className:"registro-back",size:33,color:"#FD6202",onClick:()=>{n("/login")}}),C.jsxs(ke,{children:[C.jsx(re,{}),C.jsx(re,{xs:10,md:6,children:C.jsxs("div",{className:"registro-card",children:[C.jsx("h3",{children:"Registro de sesin"}),C.jsx("h6",{children:"Crea tu cuenta de Know me"}),C.jsx("div",{className:`registro-data ${g&&I.nombre==""?"required-value":""}`,children:C.jsx("input",{type:"text",className:"registro-input",placeholder:"Nombre(s)*",onChange:i,value:I.nombre,name:"nombre"})}),C.jsx("div",{className:`registro-data ${g&&I.apellido==""?"required-value":""}`,children:C.jsx("input",{type:"text",className:"registro-input",placeholder:"Apellido(s)*",onChange:i,value:I.apellido,name:"apellido"})}),C.jsxs("div",{className:`login-email ${g&&I.email==""?"required-value":""}`,children:[C.jsx(tb,{size:s,color:"#F18805"}),C.jsx("input",{type:"text",className:"login-email-input",placeholder:"correo electrnico",onChange:i,value:I.email,name:"email"})]}),C.jsxs("div",{className:`login-password ${g&&I.password==""?"required-value":""}`,children:[C.jsx(HC,{size:s,color:"#F18805"}),C.jsx("input",{type:e?"text":"password",className:"login-email-input",placeholder:"Contrasea*",onChange:i,value:I.password,name:"password"}),e?C.jsx(LI,{size:s,color:"#FFFFFF",className:"eye-icon",onClick:a}):C.jsx(MI,{size:s,color:"#FFFFFF",className:"eye-icon",onClick:a})]}),C.jsxs("div",{className:`login-password ${g&&I.confirmacion==""?"required-value":""}`,children:[C.jsx(HC,{size:s,color:"#F18805"}),C.jsx("input",{type:e?"text":"password",className:"login-email-input",placeholder:"Confirmar*",onChange:i,value:I.confirmacion,name:"confirmacion"}),e?C.jsx(LI,{size:s,color:"#FFFFFF",className:"eye-icon",onClick:a}):C.jsx(MI,{size:s,color:"#FFFFFF",className:"eye-icon",onClick:a})]}),C.jsxs(ke,{className:"check-box-option",children:[C.jsx(re,{xs:1,children:C.jsx("input",{type:"checkbox",onChange:r,checked:I.consent,name:"consent"})}),C.jsx(re,{children:C.jsx("span",{children:"Doy mi consentimiento y acepto recibir informacin sobre los servicios y novedades de Know me."})})]}),C.jsxs(ke,{className:"check-box-option",children:[C.jsx(re,{xs:1,children:C.jsx("input",{type:"checkbox",onChange:r,checked:I.terms,name:"terms"})}),C.jsx(re,{children:C.jsx("span",{children:"Al crear la cuenta de usuario aceptas los terminos y condiciones del servicio de Know me, y reconoces que has ledo nuestras polticas de privacidad."})})]}),g&&C.jsx(ZB,{variant:"danger",className:"registro-alert",children:I.terms==!1?"Es necesario aceptar terminos y condiciones":"Favor de rellenar los campos marcados en rojo y asegurarse que las contraseas coincidan"}),C.jsx(et,{className:"registro-btn",onClick:c,children:"Crear cuenta"})]})}),C.jsx(re,{})]}),C.jsx(Tl,{position:"top-center",richColors:!0})]})};function Gu(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function hc(e,t){e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(t).forEach(g=>{typeof e[g]>"u"?e[g]=t[g]:Gu(t[g])&&Gu(e[g])&&Object.keys(t[g]).length>0&&hc(e[g],t[g])})}const kb={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function xn(){const e=typeof document<"u"?document:{};return hc(e,kb),e}const g1={document:kb,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function Jt(){const e=typeof window<"u"?window:{};return hc(e,g1),e}function l1(e){return e===void 0&&(e=""),e.trim().split(" ").filter(t=>!!t.trim())}function n1(e){const t=e;Object.keys(t).forEach(g=>{try{t[g]=null}catch{}try{delete t[g]}catch{}})}function TC(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function ko(){return Date.now()}function I1(e){const t=Jt();let g;return t.getComputedStyle&&(g=t.getComputedStyle(e,null)),!g&&e.currentStyle&&(g=e.currentStyle),g||(g=e.style),g}function i1(e,t){t===void 0&&(t="x");const g=Jt();let l,n,I;const i=I1(e);return g.WebKitCSSMatrix?(n=i.transform||i.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(o=>o.replace(",",".")).join(", ")),I=new g.WebKitCSSMatrix(n==="none"?"":n)):(I=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),l=I.toString().split(",")),t==="x"&&(g.WebKitCSSMatrix?n=I.m41:l.length===16?n=parseFloat(l[12]):n=parseFloat(l[4])),t==="y"&&(g.WebKitCSSMatrix?n=I.m42:l.length===16?n=parseFloat(l[13]):n=parseFloat(l[5])),n||0}function Si(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function o1(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function St(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let g=1;g<arguments.length;g+=1){const l=g<0||arguments.length<=g?void 0:arguments[g];if(l!=null&&!o1(l)){const n=Object.keys(Object(l)).filter(I=>t.indexOf(I)<0);for(let I=0,i=n.length;I<i;I+=1){const o=n[I],r=Object.getOwnPropertyDescriptor(l,o);r!==void 0&&r.enumerable&&(Si(e[o])&&Si(l[o])?l[o].__swiper__?e[o]=l[o]:St(e[o],l[o]):!Si(e[o])&&Si(l[o])?(e[o]={},l[o].__swiper__?e[o]=l[o]:St(e[o],l[o])):e[o]=l[o])}}}return e}function Vi(e,t,g){e.style.setProperty(t,g)}function Jb(e){let{swiper:t,targetPosition:g,side:l}=e;const n=Jt(),I=-t.translate;let i=null,o;const r=t.params.speed;t.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(t.cssModeFrameID);const a=g>I?"next":"prev",c=(d,A)=>a==="next"&&d>=A||a==="prev"&&d<=A,s=()=>{o=new Date().getTime(),i===null&&(i=o);const d=Math.max(Math.min((o-i)/r,1),0),A=.5-Math.cos(d*Math.PI)/2;let f=I+A*(g-I);if(c(f,g)&&(f=g),t.wrapperEl.scrollTo({[l]:f}),c(f,g)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[l]:f})}),n.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=n.requestAnimationFrame(s)};s()}function ug(e,t){return t===void 0&&(t=""),[...e.children].filter(g=>g.matches(t))}function Jo(e){try{console.warn(e);return}catch{}}function Yo(e,t){t===void 0&&(t=[]);const g=document.createElement(e);return g.classList.add(...Array.isArray(t)?t:l1(t)),g}function r1(e,t){const g=[];for(;e.previousElementSibling;){const l=e.previousElementSibling;t?l.matches(t)&&g.push(l):g.push(l),e=l}return g}function a1(e,t){const g=[];for(;e.nextElementSibling;){const l=e.nextElementSibling;t?l.matches(t)&&g.push(l):g.push(l),e=l}return g}function Pg(e,t){return Jt().getComputedStyle(e,null).getPropertyValue(t)}function wo(e){let t=e,g;if(t){for(g=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(g+=1);return g}}function Yb(e,t){const g=[];let l=e.parentElement;for(;l;)t?l.matches(t)&&g.push(l):g.push(l),l=l.parentElement;return g}function MC(e,t,g){const l=Jt();return g?e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(l.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(l.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom")):e.offsetWidth}let Za;function C1(){const e=Jt(),t=xn();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function wb(){return Za||(Za=C1()),Za}let ya;function s1(e){let{userAgent:t}=e===void 0?{}:e;const g=wb(),l=Jt(),n=l.navigator.platform,I=t||l.navigator.userAgent,i={ios:!1,android:!1},o=l.screen.width,r=l.screen.height,a=I.match(/(Android);?[\s\/]+([\d.]+)?/);let c=I.match(/(iPad).*OS\s([\d_]+)/);const s=I.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&I.match(/(iPhone\sOS|iOS)\s([\d_]+)/),A=n==="Win32";let f=n==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&f&&g.touch&&p.indexOf(`${o}x${r}`)>=0&&(c=I.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),f=!1),a&&!A&&(i.os="android",i.android=!0),(c||d||s)&&(i.os="ios",i.ios=!0),i}function c1(e){return e===void 0&&(e={}),ya||(ya=s1(e)),ya}let Ga;function d1(){const e=Jt();let t=!1;function g(){const l=e.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(g()){const l=String(e.navigator.userAgent);if(l.includes("Version/")){const[n,I]=l.split("Version/")[1].split(" ")[0].split(".").map(i=>Number(i));t=n<16||n===16&&I<2}}return{isSafari:t||g(),needPerspectiveFix:t,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function u1(){return Ga||(Ga=d1()),Ga}function A1(e){let{swiper:t,on:g,emit:l}=e;const n=Jt();let I=null,i=null;const o=()=>{!t||t.destroyed||!t.initialized||(l("beforeResize"),l("resize"))},r=()=>{!t||t.destroyed||!t.initialized||(I=new ResizeObserver(s=>{i=n.requestAnimationFrame(()=>{const{width:d,height:A}=t;let f=d,p=A;s.forEach(Z=>{let{contentBoxSize:m,contentRect:u,target:h}=Z;h&&h!==t.el||(f=u?u.width:(m[0]||m).inlineSize,p=u?u.height:(m[0]||m).blockSize)}),(f!==d||p!==A)&&o()})}),I.observe(t.el))},a=()=>{i&&n.cancelAnimationFrame(i),I&&I.unobserve&&t.el&&(I.unobserve(t.el),I=null)},c=()=>{!t||t.destroyed||!t.initialized||l("orientationchange")};g("init",()=>{if(t.params.resizeObserver&&typeof n.ResizeObserver<"u"){r();return}n.addEventListener("resize",o),n.addEventListener("orientationchange",c)}),g("destroy",()=>{a(),n.removeEventListener("resize",o),n.removeEventListener("orientationchange",c)})}function m1(e){let{swiper:t,extendParams:g,on:l,emit:n}=e;const I=[],i=Jt(),o=function(c,s){s===void 0&&(s={});const d=i.MutationObserver||i.WebkitMutationObserver,A=new d(f=>{if(t.__preventObserver__)return;if(f.length===1){n("observerUpdate",f[0]);return}const p=function(){n("observerUpdate",f[0])};i.requestAnimationFrame?i.requestAnimationFrame(p):i.setTimeout(p,0)});A.observe(c,{attributes:typeof s.attributes>"u"?!0:s.attributes,childList:typeof s.childList>"u"?!0:s.childList,characterData:typeof s.characterData>"u"?!0:s.characterData}),I.push(A)},r=()=>{if(t.params.observer){if(t.params.observeParents){const c=Yb(t.hostEl);for(let s=0;s<c.length;s+=1)o(c[s])}o(t.hostEl,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}},a=()=>{I.forEach(c=>{c.disconnect()}),I.splice(0,I.length)};g({observer:!1,observeParents:!1,observeSlideChildren:!1}),l("init",r),l("destroy",a)}var h1={on(e,t,g){const l=this;if(!l.eventsListeners||l.destroyed||typeof t!="function")return l;const n=g?"unshift":"push";return e.split(" ").forEach(I=>{l.eventsListeners[I]||(l.eventsListeners[I]=[]),l.eventsListeners[I][n](t)}),l},once(e,t,g){const l=this;if(!l.eventsListeners||l.destroyed||typeof t!="function")return l;function n(){l.off(e,n),n.__emitterProxy&&delete n.__emitterProxy;for(var I=arguments.length,i=new Array(I),o=0;o<I;o++)i[o]=arguments[o];t.apply(l,i)}return n.__emitterProxy=t,l.on(e,n,g)},onAny(e,t){const g=this;if(!g.eventsListeners||g.destroyed||typeof e!="function")return g;const l=t?"unshift":"push";return g.eventsAnyListeners.indexOf(e)<0&&g.eventsAnyListeners[l](e),g},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const g=t.eventsAnyListeners.indexOf(e);return g>=0&&t.eventsAnyListeners.splice(g,1),t},off(e,t){const g=this;return!g.eventsListeners||g.destroyed||!g.eventsListeners||e.split(" ").forEach(l=>{typeof t>"u"?g.eventsListeners[l]=[]:g.eventsListeners[l]&&g.eventsListeners[l].forEach((n,I)=>{(n===t||n.__emitterProxy&&n.__emitterProxy===t)&&g.eventsListeners[l].splice(I,1)})}),g},emit(){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,g,l;for(var n=arguments.length,I=new Array(n),i=0;i<n;i++)I[i]=arguments[i];return typeof I[0]=="string"||Array.isArray(I[0])?(t=I[0],g=I.slice(1,I.length),l=e):(t=I[0].events,g=I[0].data,l=I[0].context||e),g.unshift(l),(Array.isArray(t)?t:t.split(" ")).forEach(r=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(a=>{a.apply(l,[r,...g])}),e.eventsListeners&&e.eventsListeners[r]&&e.eventsListeners[r].forEach(a=>{a.apply(l,g)})}),e}};function b1(){const e=this;let t,g;const l=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=l.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?g=e.params.height:g=l.clientHeight,!(t===0&&e.isHorizontal()||g===0&&e.isVertical())&&(t=t-parseInt(Pg(l,"padding-left")||0,10)-parseInt(Pg(l,"padding-right")||0,10),g=g-parseInt(Pg(l,"padding-top")||0,10)-parseInt(Pg(l,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(g)&&(g=0),Object.assign(e,{width:t,height:g,size:e.isHorizontal()?t:g}))}function p1(){const e=this;function t(G,B){return parseFloat(G.getPropertyValue(e.getDirectionLabel(B))||0)}const g=e.params,{wrapperEl:l,slidesEl:n,size:I,rtlTranslate:i,wrongRTL:o}=e,r=e.virtual&&g.virtual.enabled,a=r?e.virtual.slides.length:e.slides.length,c=ug(n,`.${e.params.slideClass}, swiper-slide`),s=r?e.virtual.slides.length:c.length;let d=[];const A=[],f=[];let p=g.slidesOffsetBefore;typeof p=="function"&&(p=g.slidesOffsetBefore.call(e));let Z=g.slidesOffsetAfter;typeof Z=="function"&&(Z=g.slidesOffsetAfter.call(e));const m=e.snapGrid.length,u=e.slidesGrid.length;let h=g.spaceBetween,b=-p,y=0,V=0;if(typeof I>"u")return;typeof h=="string"&&h.indexOf("%")>=0?h=parseFloat(h.replace("%",""))/100*I:typeof h=="string"&&(h=parseFloat(h)),e.virtualSize=-h,c.forEach(G=>{i?G.style.marginLeft="":G.style.marginRight="",G.style.marginBottom="",G.style.marginTop=""}),g.centeredSlides&&g.cssMode&&(Vi(l,"--swiper-centered-offset-before",""),Vi(l,"--swiper-centered-offset-after",""));const v=g.grid&&g.grid.rows>1&&e.grid;v?e.grid.initSlides(c):e.grid&&e.grid.unsetSlides();let S;const X=g.slidesPerView==="auto"&&g.breakpoints&&Object.keys(g.breakpoints).filter(G=>typeof g.breakpoints[G].slidesPerView<"u").length>0;for(let G=0;G<s;G+=1){S=0;let B;if(c[G]&&(B=c[G]),v&&e.grid.updateSlide(G,B,c),!(c[G]&&Pg(B,"display")==="none")){if(g.slidesPerView==="auto"){X&&(c[G].style[e.getDirectionLabel("width")]="");const W=getComputedStyle(B),R=B.style.transform,Y=B.style.webkitTransform;if(R&&(B.style.transform="none"),Y&&(B.style.webkitTransform="none"),g.roundLengths)S=e.isHorizontal()?MC(B,"width",!0):MC(B,"height",!0);else{const F=t(W,"width"),M=t(W,"padding-left"),U=t(W,"padding-right"),E=t(W,"margin-left"),x=t(W,"margin-right"),w=W.getPropertyValue("box-sizing");if(w&&w==="border-box")S=F+E+x;else{const{clientWidth:J,offsetWidth:N}=B;S=F+M+U+E+x+(N-J)}}R&&(B.style.transform=R),Y&&(B.style.webkitTransform=Y),g.roundLengths&&(S=Math.floor(S))}else S=(I-(g.slidesPerView-1)*h)/g.slidesPerView,g.roundLengths&&(S=Math.floor(S)),c[G]&&(c[G].style[e.getDirectionLabel("width")]=`${S}px`);c[G]&&(c[G].swiperSlideSize=S),f.push(S),g.centeredSlides?(b=b+S/2+y/2+h,y===0&&G!==0&&(b=b-I/2-h),G===0&&(b=b-I/2-h),Math.abs(b)<1/1e3&&(b=0),g.roundLengths&&(b=Math.floor(b)),V%g.slidesPerGroup===0&&d.push(b),A.push(b)):(g.roundLengths&&(b=Math.floor(b)),(V-Math.min(e.params.slidesPerGroupSkip,V))%e.params.slidesPerGroup===0&&d.push(b),A.push(b),b=b+S+h),e.virtualSize+=S+h,y=S,V+=1}}if(e.virtualSize=Math.max(e.virtualSize,I)+Z,i&&o&&(g.effect==="slide"||g.effect==="coverflow")&&(l.style.width=`${e.virtualSize+h}px`),g.setWrapperSize&&(l.style[e.getDirectionLabel("width")]=`${e.virtualSize+h}px`),v&&e.grid.updateWrapperSize(S,d),!g.centeredSlides){const G=[];for(let B=0;B<d.length;B+=1){let W=d[B];g.roundLengths&&(W=Math.floor(W)),d[B]<=e.virtualSize-I&&G.push(W)}d=G,Math.floor(e.virtualSize-I)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-I)}if(r&&g.loop){const G=f[0]+h;if(g.slidesPerGroup>1){const B=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/g.slidesPerGroup),W=G*g.slidesPerGroup;for(let R=0;R<B;R+=1)d.push(d[d.length-1]+W)}for(let B=0;B<e.virtual.slidesBefore+e.virtual.slidesAfter;B+=1)g.slidesPerGroup===1&&d.push(d[d.length-1]+G),A.push(A[A.length-1]+G),e.virtualSize+=G}if(d.length===0&&(d=[0]),h!==0){const G=e.isHorizontal()&&i?"marginLeft":e.getDirectionLabel("marginRight");c.filter((B,W)=>!g.cssMode||g.loop?!0:W!==c.length-1).forEach(B=>{B.style[G]=`${h}px`})}if(g.centeredSlides&&g.centeredSlidesBounds){let G=0;f.forEach(W=>{G+=W+(h||0)}),G-=h;const B=G-I;d=d.map(W=>W<=0?-p:W>B?B+Z:W)}if(g.centerInsufficientSlides){let G=0;if(f.forEach(B=>{G+=B+(h||0)}),G-=h,G<I){const B=(I-G)/2;d.forEach((W,R)=>{d[R]=W-B}),A.forEach((W,R)=>{A[R]=W+B})}}if(Object.assign(e,{slides:c,snapGrid:d,slidesGrid:A,slidesSizesGrid:f}),g.centeredSlides&&g.cssMode&&!g.centeredSlidesBounds){Vi(l,"--swiper-centered-offset-before",`${-d[0]}px`),Vi(l,"--swiper-centered-offset-after",`${e.size/2-f[f.length-1]/2}px`);const G=-e.snapGrid[0],B=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(W=>W+G),e.slidesGrid=e.slidesGrid.map(W=>W+B)}if(s!==a&&e.emit("slidesLengthChange"),d.length!==m&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),A.length!==u&&e.emit("slidesGridLengthChange"),g.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!r&&!g.cssMode&&(g.effect==="slide"||g.effect==="fade")){const G=`${g.containerModifierClass}backface-hidden`,B=e.el.classList.contains(G);s<=g.maxBackfaceHiddenSlides?B||e.el.classList.add(G):B&&e.el.classList.remove(G)}}function f1(e){const t=this,g=[],l=t.virtual&&t.params.virtual.enabled;let n=0,I;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const i=o=>l?t.slides[t.getSlideIndexByData(o)]:t.slides[o];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(o=>{g.push(o)});else for(I=0;I<Math.ceil(t.params.slidesPerView);I+=1){const o=t.activeIndex+I;if(o>t.slides.length&&!l)break;g.push(i(o))}else g.push(i(t.activeIndex));for(I=0;I<g.length;I+=1)if(typeof g[I]<"u"){const o=g[I].offsetHeight;n=o>n?o:n}(n||n===0)&&(t.wrapperEl.style.height=`${n}px`)}function Z1(){const e=this,t=e.slides,g=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let l=0;l<t.length;l+=1)t[l].swiperSlideOffset=(e.isHorizontal()?t[l].offsetLeft:t[l].offsetTop)-g-e.cssOverflowAdjustment()}function y1(e){e===void 0&&(e=this&&this.translate||0);const t=this,g=t.params,{slides:l,rtlTranslate:n,snapGrid:I}=t;if(l.length===0)return;typeof l[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let i=-e;n&&(i=e),l.forEach(r=>{r.classList.remove(g.slideVisibleClass,g.slideFullyVisibleClass)}),t.visibleSlidesIndexes=[],t.visibleSlides=[];let o=g.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*t.size:typeof o=="string"&&(o=parseFloat(o));for(let r=0;r<l.length;r+=1){const a=l[r];let c=a.swiperSlideOffset;g.cssMode&&g.centeredSlides&&(c-=l[0].swiperSlideOffset);const s=(i+(g.centeredSlides?t.minTranslate():0)-c)/(a.swiperSlideSize+o),d=(i-I[0]+(g.centeredSlides?t.minTranslate():0)-c)/(a.swiperSlideSize+o),A=-(i-c),f=A+t.slidesSizesGrid[r],p=A>=0&&A<=t.size-t.slidesSizesGrid[r];(A>=0&&A<t.size-1||f>1&&f<=t.size||A<=0&&f>=t.size)&&(t.visibleSlides.push(a),t.visibleSlidesIndexes.push(r),l[r].classList.add(g.slideVisibleClass)),p&&l[r].classList.add(g.slideFullyVisibleClass),a.progress=n?-s:s,a.originalProgress=n?-d:d}}function G1(e){const t=this;if(typeof e>"u"){const c=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*c||0}const g=t.params,l=t.maxTranslate()-t.minTranslate();let{progress:n,isBeginning:I,isEnd:i,progressLoop:o}=t;const r=I,a=i;if(l===0)n=0,I=!0,i=!0;else{n=(e-t.minTranslate())/l;const c=Math.abs(e-t.minTranslate())<1,s=Math.abs(e-t.maxTranslate())<1;I=c||n<=0,i=s||n>=1,c&&(n=0),s&&(n=1)}if(g.loop){const c=t.getSlideIndexByData(0),s=t.getSlideIndexByData(t.slides.length-1),d=t.slidesGrid[c],A=t.slidesGrid[s],f=t.slidesGrid[t.slidesGrid.length-1],p=Math.abs(e);p>=d?o=(p-d)/f:o=(p+f-A)/f,o>1&&(o-=1)}Object.assign(t,{progress:n,progressLoop:o,isBeginning:I,isEnd:i}),(g.watchSlidesProgress||g.centeredSlides&&g.autoHeight)&&t.updateSlidesProgress(e),I&&!r&&t.emit("reachBeginning toEdge"),i&&!a&&t.emit("reachEnd toEdge"),(r&&!I||a&&!i)&&t.emit("fromEdge"),t.emit("progress",n)}function B1(){const e=this,{slides:t,params:g,slidesEl:l,activeIndex:n}=e,I=e.virtual&&g.virtual.enabled,i=e.grid&&g.grid&&g.grid.rows>1,o=s=>ug(l,`.${g.slideClass}${s}, swiper-slide${s}`)[0];t.forEach(s=>{s.classList.remove(g.slideActiveClass,g.slideNextClass,g.slidePrevClass)});let r,a,c;if(I)if(g.loop){let s=n-e.virtual.slidesBefore;s<0&&(s=e.virtual.slides.length+s),s>=e.virtual.slides.length&&(s-=e.virtual.slides.length),r=o(`[data-swiper-slide-index="${s}"]`)}else r=o(`[data-swiper-slide-index="${n}"]`);else i?(r=t.filter(s=>s.column===n)[0],c=t.filter(s=>s.column===n+1)[0],a=t.filter(s=>s.column===n-1)[0]):r=t[n];r&&(r.classList.add(g.slideActiveClass),i?(c&&c.classList.add(g.slideNextClass),a&&a.classList.add(g.slidePrevClass)):(c=a1(r,`.${g.slideClass}, swiper-slide`)[0],g.loop&&!c&&(c=t[0]),c&&c.classList.add(g.slideNextClass),a=r1(r,`.${g.slideClass}, swiper-slide`)[0],g.loop&&!a===0&&(a=t[t.length-1]),a&&a.classList.add(g.slidePrevClass))),e.emitSlidesClasses()}const ji=(e,t)=>{if(!e||e.destroyed||!e.params)return;const g=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,l=t.closest(g());if(l){let n=l.querySelector(`.${e.params.lazyPreloaderClass}`);!n&&e.isElement&&(l.shadowRoot?n=l.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{l.shadowRoot&&(n=l.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),n&&n.remove())})),n&&n.remove()}},Ba=(e,t)=>{if(!e.slides[t])return;const g=e.slides[t].querySelector('[loading="lazy"]');g&&g.removeAttribute("loading")},LC=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const g=e.slides.length;if(!g||!t||t<0)return;t=Math.min(t,g);const l=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),n=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const i=n,o=[i-t];o.push(...Array.from({length:t}).map((r,a)=>i+l+a)),e.slides.forEach((r,a)=>{o.includes(r.column)&&Ba(e,a)});return}const I=n+l-1;if(e.params.rewind||e.params.loop)for(let i=n-t;i<=I+t;i+=1){const o=(i%g+g)%g;(o<n||o>I)&&Ba(e,o)}else for(let i=Math.max(n-t,0);i<=Math.min(I+t,g-1);i+=1)i!==n&&(i>I||i<n)&&Ba(e,i)};function v1(e){const{slidesGrid:t,params:g}=e,l=e.rtlTranslate?e.translate:-e.translate;let n;for(let I=0;I<t.length;I+=1)typeof t[I+1]<"u"?l>=t[I]&&l<t[I+1]-(t[I+1]-t[I])/2?n=I:l>=t[I]&&l<t[I+1]&&(n=I+1):l>=t[I]&&(n=I);return g.normalizeSlideIndex&&(n<0||typeof n>"u")&&(n=0),n}function S1(e){const t=this,g=t.rtlTranslate?t.translate:-t.translate,{snapGrid:l,params:n,activeIndex:I,realIndex:i,snapIndex:o}=t;let r=e,a;const c=A=>{let f=A-t.virtual.slidesBefore;return f<0&&(f=t.virtual.slides.length+f),f>=t.virtual.slides.length&&(f-=t.virtual.slides.length),f};if(typeof r>"u"&&(r=v1(t)),l.indexOf(g)>=0)a=l.indexOf(g);else{const A=Math.min(n.slidesPerGroupSkip,r);a=A+Math.floor((r-A)/n.slidesPerGroup)}if(a>=l.length&&(a=l.length-1),r===I&&!t.params.loop){a!==o&&(t.snapIndex=a,t.emit("snapIndexChange"));return}if(r===I&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=c(r);return}const s=t.grid&&n.grid&&n.grid.rows>1;let d;if(t.virtual&&n.virtual.enabled&&n.loop)d=c(r);else if(s){const A=t.slides.filter(p=>p.column===r)[0];let f=parseInt(A.getAttribute("data-swiper-slide-index"),10);Number.isNaN(f)&&(f=Math.max(t.slides.indexOf(A),0)),d=Math.floor(f/n.grid.rows)}else if(t.slides[r]){const A=t.slides[r].getAttribute("data-swiper-slide-index");A?d=parseInt(A,10):d=r}else d=r;Object.assign(t,{previousSnapIndex:o,snapIndex:a,previousRealIndex:i,realIndex:d,previousIndex:I,activeIndex:r}),t.initialized&&LC(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(i!==d&&t.emit("realIndexChange"),t.emit("slideChange"))}function V1(e,t){const g=this,l=g.params;let n=e.closest(`.${l.slideClass}, swiper-slide`);!n&&g.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(o=>{!n&&o.matches&&o.matches(`.${l.slideClass}, swiper-slide`)&&(n=o)});let I=!1,i;if(n){for(let o=0;o<g.slides.length;o+=1)if(g.slides[o]===n){I=!0,i=o;break}}if(n&&I)g.clickedSlide=n,g.virtual&&g.params.virtual.enabled?g.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):g.clickedIndex=i;else{g.clickedSlide=void 0,g.clickedIndex=void 0;return}l.slideToClickedSlide&&g.clickedIndex!==void 0&&g.clickedIndex!==g.activeIndex&&g.slideToClickedSlide()}var W1={updateSize:b1,updateSlides:p1,updateAutoHeight:f1,updateSlidesOffset:Z1,updateSlidesProgress:y1,updateProgress:G1,updateSlidesClasses:B1,updateActiveIndex:S1,updateClickedSlide:V1};function R1(e){e===void 0&&(e=this.isHorizontal()?"x":"y");const t=this,{params:g,rtlTranslate:l,translate:n,wrapperEl:I}=t;if(g.virtualTranslate)return l?-n:n;if(g.cssMode)return n;let i=i1(I,e);return i+=t.cssOverflowAdjustment(),l&&(i=-i),i||0}function X1(e,t){const g=this,{rtlTranslate:l,params:n,wrapperEl:I,progress:i}=g;let o=0,r=0;const a=0;g.isHorizontal()?o=l?-e:e:r=e,n.roundLengths&&(o=Math.floor(o),r=Math.floor(r)),g.previousTranslate=g.translate,g.translate=g.isHorizontal()?o:r,n.cssMode?I[g.isHorizontal()?"scrollLeft":"scrollTop"]=g.isHorizontal()?-o:-r:n.virtualTranslate||(g.isHorizontal()?o-=g.cssOverflowAdjustment():r-=g.cssOverflowAdjustment(),I.style.transform=`translate3d(${o}px, ${r}px, ${a}px)`);let c;const s=g.maxTranslate()-g.minTranslate();s===0?c=0:c=(e-g.minTranslate())/s,c!==i&&g.updateProgress(e),g.emit("setTranslate",g.translate,t)}function k1(){return-this.snapGrid[0]}function J1(){return-this.snapGrid[this.snapGrid.length-1]}function Y1(e,t,g,l,n){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),g===void 0&&(g=!0),l===void 0&&(l=!0);const I=this,{params:i,wrapperEl:o}=I;if(I.animating&&i.preventInteractionOnTransition)return!1;const r=I.minTranslate(),a=I.maxTranslate();let c;if(l&&e>r?c=r:l&&e<a?c=a:c=e,I.updateProgress(c),i.cssMode){const s=I.isHorizontal();if(t===0)o[s?"scrollLeft":"scrollTop"]=-c;else{if(!I.support.smoothScroll)return Jb({swiper:I,targetPosition:-c,side:s?"left":"top"}),!0;o.scrollTo({[s?"left":"top"]:-c,behavior:"smooth"})}return!0}return t===0?(I.setTransition(0),I.setTranslate(c),g&&(I.emit("beforeTransitionStart",t,n),I.emit("transitionEnd"))):(I.setTransition(t),I.setTranslate(c),g&&(I.emit("beforeTransitionStart",t,n),I.emit("transitionStart")),I.animating||(I.animating=!0,I.onTranslateToWrapperTransitionEnd||(I.onTranslateToWrapperTransitionEnd=function(d){!I||I.destroyed||d.target===this&&(I.wrapperEl.removeEventListener("transitionend",I.onTranslateToWrapperTransitionEnd),I.onTranslateToWrapperTransitionEnd=null,delete I.onTranslateToWrapperTransitionEnd,g&&I.emit("transitionEnd"))}),I.wrapperEl.addEventListener("transitionend",I.onTranslateToWrapperTransitionEnd))),!0}var w1={getTranslate:R1,setTranslate:X1,minTranslate:k1,maxTranslate:J1,translateTo:Y1};function H1(e,t){const g=this;g.params.cssMode||(g.wrapperEl.style.transitionDuration=`${e}ms`,g.wrapperEl.style.transitionDelay=e===0?"0ms":""),g.emit("setTransition",e,t)}function Hb(e){let{swiper:t,runCallbacks:g,direction:l,step:n}=e;const{activeIndex:I,previousIndex:i}=t;let o=l;if(o||(I>i?o="next":I<i?o="prev":o="reset"),t.emit(`transition${n}`),g&&I!==i){if(o==="reset"){t.emit(`slideResetTransition${n}`);return}t.emit(`slideChangeTransition${n}`),o==="next"?t.emit(`slideNextTransition${n}`):t.emit(`slidePrevTransition${n}`)}}function N1(e,t){e===void 0&&(e=!0);const g=this,{params:l}=g;l.cssMode||(l.autoHeight&&g.updateAutoHeight(),Hb({swiper:g,runCallbacks:e,direction:t,step:"Start"}))}function F1(e,t){e===void 0&&(e=!0);const g=this,{params:l}=g;g.animating=!1,!l.cssMode&&(g.setTransition(0),Hb({swiper:g,runCallbacks:e,direction:t,step:"End"}))}var K1={setTransition:H1,transitionStart:N1,transitionEnd:F1};function x1(e,t,g,l,n){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),g===void 0&&(g=!0),typeof e=="string"&&(e=parseInt(e,10));const I=this;let i=e;i<0&&(i=0);const{params:o,snapGrid:r,slidesGrid:a,previousIndex:c,activeIndex:s,rtlTranslate:d,wrapperEl:A,enabled:f}=I;if(I.animating&&o.preventInteractionOnTransition||!f&&!l&&!n)return!1;const p=Math.min(I.params.slidesPerGroupSkip,i);let Z=p+Math.floor((i-p)/I.params.slidesPerGroup);Z>=r.length&&(Z=r.length-1);const m=-r[Z];if(o.normalizeSlideIndex)for(let h=0;h<a.length;h+=1){const b=-Math.floor(m*100),y=Math.floor(a[h]*100),V=Math.floor(a[h+1]*100);typeof a[h+1]<"u"?b>=y&&b<V-(V-y)/2?i=h:b>=y&&b<V&&(i=h+1):b>=y&&(i=h)}if(I.initialized&&i!==s&&(!I.allowSlideNext&&(d?m>I.translate&&m>I.minTranslate():m<I.translate&&m<I.minTranslate())||!I.allowSlidePrev&&m>I.translate&&m>I.maxTranslate()&&(s||0)!==i))return!1;i!==(c||0)&&g&&I.emit("beforeSlideChangeStart"),I.updateProgress(m);let u;if(i>s?u="next":i<s?u="prev":u="reset",d&&-m===I.translate||!d&&m===I.translate)return I.updateActiveIndex(i),o.autoHeight&&I.updateAutoHeight(),I.updateSlidesClasses(),o.effect!=="slide"&&I.setTranslate(m),u!=="reset"&&(I.transitionStart(g,u),I.transitionEnd(g,u)),!1;if(o.cssMode){const h=I.isHorizontal(),b=d?m:-m;if(t===0){const y=I.virtual&&I.params.virtual.enabled;y&&(I.wrapperEl.style.scrollSnapType="none",I._immediateVirtual=!0),y&&!I._cssModeVirtualInitialSet&&I.params.initialSlide>0?(I._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{A[h?"scrollLeft":"scrollTop"]=b})):A[h?"scrollLeft":"scrollTop"]=b,y&&requestAnimationFrame(()=>{I.wrapperEl.style.scrollSnapType="",I._immediateVirtual=!1})}else{if(!I.support.smoothScroll)return Jb({swiper:I,targetPosition:b,side:h?"left":"top"}),!0;A.scrollTo({[h?"left":"top"]:b,behavior:"smooth"})}return!0}return I.setTransition(t),I.setTranslate(m),I.updateActiveIndex(i),I.updateSlidesClasses(),I.emit("beforeTransitionStart",t,l),I.transitionStart(g,u),t===0?I.transitionEnd(g,u):I.animating||(I.animating=!0,I.onSlideToWrapperTransitionEnd||(I.onSlideToWrapperTransitionEnd=function(b){!I||I.destroyed||b.target===this&&(I.wrapperEl.removeEventListener("transitionend",I.onSlideToWrapperTransitionEnd),I.onSlideToWrapperTransitionEnd=null,delete I.onSlideToWrapperTransitionEnd,I.transitionEnd(g,u))}),I.wrapperEl.addEventListener("transitionend",I.onSlideToWrapperTransitionEnd)),!0}function E1(e,t,g,l){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),g===void 0&&(g=!0),typeof e=="string"&&(e=parseInt(e,10));const n=this,I=n.grid&&n.params.grid&&n.params.grid.rows>1;let i=e;if(n.params.loop)if(n.virtual&&n.params.virtual.enabled)i=i+n.virtual.slidesBefore;else{let o;if(I){const d=i*n.params.grid.rows;o=n.slides.filter(A=>A.getAttribute("data-swiper-slide-index")*1===d)[0].column}else o=n.getSlideIndexByData(i);const r=I?Math.ceil(n.slides.length/n.params.grid.rows):n.slides.length,{centeredSlides:a}=n.params;let c=n.params.slidesPerView;c==="auto"?c=n.slidesPerViewDynamic():(c=Math.ceil(parseFloat(n.params.slidesPerView,10)),a&&c%2===0&&(c=c+1));let s=r-o<c;if(a&&(s=s||o<Math.ceil(c/2)),s){const d=a?o<n.activeIndex?"prev":"next":o-n.activeIndex-1<n.params.slidesPerView?"next":"prev";n.loopFix({direction:d,slideTo:!0,activeSlideIndex:d==="next"?o+1:o-r+1,slideRealIndex:d==="next"?n.realIndex:void 0})}if(I){const d=i*n.params.grid.rows;i=n.slides.filter(A=>A.getAttribute("data-swiper-slide-index")*1===d)[0].column}else i=n.getSlideIndexByData(i)}return requestAnimationFrame(()=>{n.slideTo(i,t,g,l)}),n}function z1(e,t,g){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);const l=this,{enabled:n,params:I,animating:i}=l;if(!n)return l;let o=I.slidesPerGroup;I.slidesPerView==="auto"&&I.slidesPerGroup===1&&I.slidesPerGroupAuto&&(o=Math.max(l.slidesPerViewDynamic("current",!0),1));const r=l.activeIndex<I.slidesPerGroupSkip?1:o,a=l.virtual&&I.virtual.enabled;if(I.loop){if(i&&!a&&I.loopPreventsSliding)return!1;if(l.loopFix({direction:"next"}),l._clientLeft=l.wrapperEl.clientLeft,l.activeIndex===l.slides.length-1&&I.cssMode)return requestAnimationFrame(()=>{l.slideTo(l.activeIndex+r,e,t,g)}),!0}return I.rewind&&l.isEnd?l.slideTo(0,e,t,g):l.slideTo(l.activeIndex+r,e,t,g)}function T1(e,t,g){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);const l=this,{params:n,snapGrid:I,slidesGrid:i,rtlTranslate:o,enabled:r,animating:a}=l;if(!r)return l;const c=l.virtual&&n.virtual.enabled;if(n.loop){if(a&&!c&&n.loopPreventsSliding)return!1;l.loopFix({direction:"prev"}),l._clientLeft=l.wrapperEl.clientLeft}const s=o?l.translate:-l.translate;function d(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const A=d(s),f=I.map(m=>d(m));let p=I[f.indexOf(A)-1];if(typeof p>"u"&&n.cssMode){let m;I.forEach((u,h)=>{A>=u&&(m=h)}),typeof m<"u"&&(p=I[m>0?m-1:m])}let Z=0;if(typeof p<"u"&&(Z=i.indexOf(p),Z<0&&(Z=l.activeIndex-1),n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(Z=Z-l.slidesPerViewDynamic("previous",!0)+1,Z=Math.max(Z,0))),n.rewind&&l.isBeginning){const m=l.params.virtual&&l.params.virtual.enabled&&l.virtual?l.virtual.slides.length-1:l.slides.length-1;return l.slideTo(m,e,t,g)}else if(n.loop&&l.activeIndex===0&&n.cssMode)return requestAnimationFrame(()=>{l.slideTo(Z,e,t,g)}),!0;return l.slideTo(Z,e,t,g)}function M1(e,t,g){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);const l=this;return l.slideTo(l.activeIndex,e,t,g)}function L1(e,t,g,l){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),l===void 0&&(l=.5);const n=this;let I=n.activeIndex;const i=Math.min(n.params.slidesPerGroupSkip,I),o=i+Math.floor((I-i)/n.params.slidesPerGroup),r=n.rtlTranslate?n.translate:-n.translate;if(r>=n.snapGrid[o]){const a=n.snapGrid[o],c=n.snapGrid[o+1];r-a>(c-a)*l&&(I+=n.params.slidesPerGroup)}else{const a=n.snapGrid[o-1],c=n.snapGrid[o];r-a<=(c-a)*l&&(I-=n.params.slidesPerGroup)}return I=Math.max(I,0),I=Math.min(I,n.slidesGrid.length-1),n.slideTo(I,e,t,g)}function U1(){const e=this,{params:t,slidesEl:g}=e,l=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let n=e.clickedIndex,I;const i=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;I=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?n<e.loopedSlides-l/2||n>e.slides.length-e.loopedSlides+l/2?(e.loopFix(),n=e.getSlideIndex(ug(g,`${i}[data-swiper-slide-index="${I}"]`)[0]),TC(()=>{e.slideTo(n)})):e.slideTo(n):n>e.slides.length-l?(e.loopFix(),n=e.getSlideIndex(ug(g,`${i}[data-swiper-slide-index="${I}"]`)[0]),TC(()=>{e.slideTo(n)})):e.slideTo(n)}else e.slideTo(n)}var Q1={slideTo:x1,slideToLoop:E1,slideNext:z1,slidePrev:T1,slideReset:M1,slideToClosest:L1,slideToClickedSlide:U1};function j1(e){const t=this,{params:g,slidesEl:l}=t;if(!g.loop||t.virtual&&t.params.virtual.enabled)return;const n=()=>{ug(l,`.${g.slideClass}, swiper-slide`).forEach((s,d)=>{s.setAttribute("data-swiper-slide-index",d)})},I=t.grid&&g.grid&&g.grid.rows>1,i=g.slidesPerGroup*(I?g.grid.rows:1),o=t.slides.length%i!==0,r=I&&t.slides.length%g.grid.rows!==0,a=c=>{for(let s=0;s<c;s+=1){const d=t.isElement?Yo("swiper-slide",[g.slideBlankClass]):Yo("div",[g.slideClass,g.slideBlankClass]);t.slidesEl.append(d)}};if(o){if(g.loopAddBlankSlides){const c=i-t.slides.length%i;a(c),t.recalcSlides(),t.updateSlides()}else Jo("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else if(r){if(g.loopAddBlankSlides){const c=g.grid.rows-t.slides.length%g.grid.rows;a(c),t.recalcSlides(),t.updateSlides()}else Jo("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else n();t.loopFix({slideRealIndex:e,direction:g.centeredSlides?void 0:"next"})}function D1(e){let{slideRealIndex:t,slideTo:g=!0,direction:l,setTranslate:n,activeSlideIndex:I,byController:i,byMousewheel:o}=e===void 0?{}:e;const r=this;if(!r.params.loop)return;r.emit("beforeLoopFix");const{slides:a,allowSlidePrev:c,allowSlideNext:s,slidesEl:d,params:A}=r,{centeredSlides:f}=A;if(r.allowSlidePrev=!0,r.allowSlideNext=!0,r.virtual&&A.virtual.enabled){g&&(!A.centeredSlides&&r.snapIndex===0?r.slideTo(r.virtual.slides.length,0,!1,!0):A.centeredSlides&&r.snapIndex<A.slidesPerView?r.slideTo(r.virtual.slides.length+r.snapIndex,0,!1,!0):r.snapIndex===r.snapGrid.length-1&&r.slideTo(r.virtual.slidesBefore,0,!1,!0)),r.allowSlidePrev=c,r.allowSlideNext=s,r.emit("loopFix");return}let p=A.slidesPerView;p==="auto"?p=r.slidesPerViewDynamic():(p=Math.ceil(parseFloat(A.slidesPerView,10)),f&&p%2===0&&(p=p+1));const Z=A.slidesPerGroupAuto?p:A.slidesPerGroup;let m=Z;m%Z!==0&&(m+=Z-m%Z),m+=A.loopAdditionalSlides,r.loopedSlides=m;const u=r.grid&&A.grid&&A.grid.rows>1;a.length<p+m?Jo("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):u&&A.grid.fill==="row"&&Jo("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const h=[],b=[];let y=r.activeIndex;typeof I>"u"?I=r.getSlideIndex(a.filter(R=>R.classList.contains(A.slideActiveClass))[0]):y=I;const V=l==="next"||!l,v=l==="prev"||!l;let S=0,X=0;const G=u?Math.ceil(a.length/A.grid.rows):a.length,W=(u?a[I].column:I)+(f&&typeof n>"u"?-p/2+.5:0);if(W<m){S=Math.max(m-W,Z);for(let R=0;R<m-W;R+=1){const Y=R-Math.floor(R/G)*G;if(u){const F=G-Y-1;for(let M=a.length-1;M>=0;M-=1)a[M].column===F&&h.push(M)}else h.push(G-Y-1)}}else if(W+p>G-m){X=Math.max(W-(G-m*2),Z);for(let R=0;R<X;R+=1){const Y=R-Math.floor(R/G)*G;u?a.forEach((F,M)=>{F.column===Y&&b.push(M)}):b.push(Y)}}if(r.__preventObserver__=!0,requestAnimationFrame(()=>{r.__preventObserver__=!1}),v&&h.forEach(R=>{a[R].swiperLoopMoveDOM=!0,d.prepend(a[R]),a[R].swiperLoopMoveDOM=!1}),V&&b.forEach(R=>{a[R].swiperLoopMoveDOM=!0,d.append(a[R]),a[R].swiperLoopMoveDOM=!1}),r.recalcSlides(),A.slidesPerView==="auto"?r.updateSlides():u&&(h.length>0&&v||b.length>0&&V)&&r.slides.forEach((R,Y)=>{r.grid.updateSlide(Y,R,r.slides)}),A.watchSlidesProgress&&r.updateSlidesOffset(),g){if(h.length>0&&v){if(typeof t>"u"){const R=r.slidesGrid[y],F=r.slidesGrid[y+S]-R;o?r.setTranslate(r.translate-F):(r.slideTo(y+S,0,!1,!0),n&&(r.touchEventsData.startTranslate=r.touchEventsData.startTranslate-F,r.touchEventsData.currentTranslate=r.touchEventsData.currentTranslate-F))}else if(n){const R=u?h.length/A.grid.rows:h.length;r.slideTo(r.activeIndex+R,0,!1,!0),r.touchEventsData.currentTranslate=r.translate}}else if(b.length>0&&V)if(typeof t>"u"){const R=r.slidesGrid[y],F=r.slidesGrid[y-X]-R;o?r.setTranslate(r.translate-F):(r.slideTo(y-X,0,!1,!0),n&&(r.touchEventsData.startTranslate=r.touchEventsData.startTranslate-F,r.touchEventsData.currentTranslate=r.touchEventsData.currentTranslate-F))}else{const R=u?b.length/A.grid.rows:b.length;r.slideTo(r.activeIndex-R,0,!1,!0)}}if(r.allowSlidePrev=c,r.allowSlideNext=s,r.controller&&r.controller.control&&!i){const R={slideRealIndex:t,direction:l,setTranslate:n,activeSlideIndex:I,byController:!0};Array.isArray(r.controller.control)?r.controller.control.forEach(Y=>{!Y.destroyed&&Y.params.loop&&Y.loopFix({...R,slideTo:Y.params.slidesPerView===A.slidesPerView?g:!1})}):r.controller.control instanceof r.constructor&&r.controller.control.params.loop&&r.controller.control.loopFix({...R,slideTo:r.controller.control.params.slidesPerView===A.slidesPerView?g:!1})}r.emit("loopFix")}function O1(){const e=this,{params:t,slidesEl:g}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const l=[];e.slides.forEach(n=>{const I=typeof n.swiperSlideIndex>"u"?n.getAttribute("data-swiper-slide-index")*1:n.swiperSlideIndex;l[I]=n}),e.slides.forEach(n=>{n.removeAttribute("data-swiper-slide-index")}),l.forEach(n=>{g.append(n)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}var P1={loopCreate:j1,loopFix:D1,loopDestroy:O1};function _1(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const g=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),g.style.cursor="move",g.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function q1(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}var $1={setGrabCursor:_1,unsetGrabCursor:q1};function eV(e,t){t===void 0&&(t=this);function g(l){if(!l||l===xn()||l===Jt())return null;l.assignedSlot&&(l=l.assignedSlot);const n=l.closest(e);return!n&&!l.getRootNode?null:n||g(l.getRootNode().host)}return g(t)}function Bu(e,t,g){const l=Jt(),{params:n}=e,I=n.edgeSwipeDetection,i=n.edgeSwipeThreshold;return I&&(g<=i||g>=l.innerWidth-i)?I==="prevent"?(t.preventDefault(),!0):!1:!0}function tV(e){const t=this,g=xn();let l=e;l.originalEvent&&(l=l.originalEvent);const n=t.touchEventsData;if(l.type==="pointerdown"){if(n.pointerId!==null&&n.pointerId!==l.pointerId)return;n.pointerId=l.pointerId}else l.type==="touchstart"&&l.targetTouches.length===1&&(n.touchId=l.targetTouches[0].identifier);if(l.type==="touchstart"){Bu(t,l,l.targetTouches[0].pageX);return}const{params:I,touches:i,enabled:o}=t;if(!o||!I.simulateTouch&&l.pointerType==="mouse"||t.animating&&I.preventInteractionOnTransition)return;!t.animating&&I.cssMode&&I.loop&&t.loopFix();let r=l.target;if(I.touchEventsTarget==="wrapper"&&!t.wrapperEl.contains(r)||"which"in l&&l.which===3||"button"in l&&l.button>0||n.isTouched&&n.isMoved)return;const a=!!I.noSwipingClass&&I.noSwipingClass!=="",c=l.composedPath?l.composedPath():l.path;a&&l.target&&l.target.shadowRoot&&c&&(r=c[0]);const s=I.noSwipingSelector?I.noSwipingSelector:`.${I.noSwipingClass}`,d=!!(l.target&&l.target.shadowRoot);if(I.noSwiping&&(d?eV(s,r):r.closest(s))){t.allowClick=!0;return}if(I.swipeHandler&&!r.closest(I.swipeHandler))return;i.currentX=l.pageX,i.currentY=l.pageY;const A=i.currentX,f=i.currentY;if(!Bu(t,l,A))return;Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),i.startX=A,i.startY=f,n.touchStartTime=ko(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,I.threshold>0&&(n.allowThresholdMove=!1);let p=!0;r.matches(n.focusableElements)&&(p=!1,r.nodeName==="SELECT"&&(n.isTouched=!1)),g.activeElement&&g.activeElement.matches(n.focusableElements)&&g.activeElement!==r&&g.activeElement.blur();const Z=p&&t.allowTouchMove&&I.touchStartPreventDefault;(I.touchStartForcePreventDefault||Z)&&!r.isContentEditable&&l.preventDefault(),I.freeMode&&I.freeMode.enabled&&t.freeMode&&t.animating&&!I.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",l)}function gV(e){const t=xn(),g=this,l=g.touchEventsData,{params:n,touches:I,rtlTranslate:i,enabled:o}=g;if(!o||!n.simulateTouch&&e.pointerType==="mouse")return;let r=e;if(r.originalEvent&&(r=r.originalEvent),r.type==="pointermove"&&(l.touchId!==null||r.pointerId!==l.pointerId))return;let a;if(r.type==="touchmove"){if(a=[...r.changedTouches].filter(V=>V.identifier===l.touchId)[0],!a||a.identifier!==l.touchId)return}else a=r;if(!l.isTouched){l.startMoving&&l.isScrolling&&g.emit("touchMoveOpposite",r);return}const c=a.pageX,s=a.pageY;if(r.preventedByNestedSwiper){I.startX=c,I.startY=s;return}if(!g.allowTouchMove){r.target.matches(l.focusableElements)||(g.allowClick=!1),l.isTouched&&(Object.assign(I,{startX:c,startY:s,currentX:c,currentY:s}),l.touchStartTime=ko());return}if(n.touchReleaseOnEdges&&!n.loop){if(g.isVertical()){if(s<I.startY&&g.translate<=g.maxTranslate()||s>I.startY&&g.translate>=g.minTranslate()){l.isTouched=!1,l.isMoved=!1;return}}else if(c<I.startX&&g.translate<=g.maxTranslate()||c>I.startX&&g.translate>=g.minTranslate())return}if(t.activeElement&&r.target===t.activeElement&&r.target.matches(l.focusableElements)){l.isMoved=!0,g.allowClick=!1;return}l.allowTouchCallbacks&&g.emit("touchMove",r),I.previousX=I.currentX,I.previousY=I.currentY,I.currentX=c,I.currentY=s;const d=I.currentX-I.startX,A=I.currentY-I.startY;if(g.params.threshold&&Math.sqrt(d**2+A**2)<g.params.threshold)return;if(typeof l.isScrolling>"u"){let V;g.isHorizontal()&&I.currentY===I.startY||g.isVertical()&&I.currentX===I.startX?l.isScrolling=!1:d*d+A*A>=25&&(V=Math.atan2(Math.abs(A),Math.abs(d))*180/Math.PI,l.isScrolling=g.isHorizontal()?V>n.touchAngle:90-V>n.touchAngle)}if(l.isScrolling&&g.emit("touchMoveOpposite",r),typeof l.startMoving>"u"&&(I.currentX!==I.startX||I.currentY!==I.startY)&&(l.startMoving=!0),l.isScrolling){l.isTouched=!1;return}if(!l.startMoving)return;g.allowClick=!1,!n.cssMode&&r.cancelable&&r.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&r.stopPropagation();let f=g.isHorizontal()?d:A,p=g.isHorizontal()?I.currentX-I.previousX:I.currentY-I.previousY;n.oneWayMovement&&(f=Math.abs(f)*(i?1:-1),p=Math.abs(p)*(i?1:-1)),I.diff=f,f*=n.touchRatio,i&&(f=-f,p=-p);const Z=g.touchesDirection;g.swipeDirection=f>0?"prev":"next",g.touchesDirection=p>0?"prev":"next";const m=g.params.loop&&!n.cssMode,u=g.touchesDirection==="next"&&g.allowSlideNext||g.touchesDirection==="prev"&&g.allowSlidePrev;if(!l.isMoved){if(m&&u&&g.loopFix({direction:g.swipeDirection}),l.startTranslate=g.getTranslate(),g.setTransition(0),g.animating){const V=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});g.wrapperEl.dispatchEvent(V)}l.allowMomentumBounce=!1,n.grabCursor&&(g.allowSlideNext===!0||g.allowSlidePrev===!0)&&g.setGrabCursor(!0),g.emit("sliderFirstMove",r)}let h;if(new Date().getTime(),l.isMoved&&l.allowThresholdMove&&Z!==g.touchesDirection&&m&&u&&Math.abs(f)>=1){Object.assign(I,{startX:c,startY:s,currentX:c,currentY:s,startTranslate:l.currentTranslate}),l.loopSwapReset=!0,l.startTranslate=l.currentTranslate;return}g.emit("sliderMove",r),l.isMoved=!0,l.currentTranslate=f+l.startTranslate;let b=!0,y=n.resistanceRatio;if(n.touchReleaseOnEdges&&(y=0),f>0?(m&&u&&!h&&l.allowThresholdMove&&l.currentTranslate>(n.centeredSlides?g.minTranslate()-g.slidesSizesGrid[g.activeIndex+1]:g.minTranslate())&&g.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),l.currentTranslate>g.minTranslate()&&(b=!1,n.resistance&&(l.currentTranslate=g.minTranslate()-1+(-g.minTranslate()+l.startTranslate+f)**y))):f<0&&(m&&u&&!h&&l.allowThresholdMove&&l.currentTranslate<(n.centeredSlides?g.maxTranslate()+g.slidesSizesGrid[g.slidesSizesGrid.length-1]:g.maxTranslate())&&g.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:g.slides.length-(n.slidesPerView==="auto"?g.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10)))}),l.currentTranslate<g.maxTranslate()&&(b=!1,n.resistance&&(l.currentTranslate=g.maxTranslate()+1-(g.maxTranslate()-l.startTranslate-f)**y))),b&&(r.preventedByNestedSwiper=!0),!g.allowSlideNext&&g.swipeDirection==="next"&&l.currentTranslate<l.startTranslate&&(l.currentTranslate=l.startTranslate),!g.allowSlidePrev&&g.swipeDirection==="prev"&&l.currentTranslate>l.startTranslate&&(l.currentTranslate=l.startTranslate),!g.allowSlidePrev&&!g.allowSlideNext&&(l.currentTranslate=l.startTranslate),n.threshold>0)if(Math.abs(f)>n.threshold||l.allowThresholdMove){if(!l.allowThresholdMove){l.allowThresholdMove=!0,I.startX=I.currentX,I.startY=I.currentY,l.currentTranslate=l.startTranslate,I.diff=g.isHorizontal()?I.currentX-I.startX:I.currentY-I.startY;return}}else{l.currentTranslate=l.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode&&n.freeMode.enabled&&g.freeMode||n.watchSlidesProgress)&&(g.updateActiveIndex(),g.updateSlidesClasses()),n.freeMode&&n.freeMode.enabled&&g.freeMode&&g.freeMode.onTouchMove(),g.updateProgress(l.currentTranslate),g.setTranslate(l.currentTranslate))}function lV(e){const t=this,g=t.touchEventsData;let l=e;l.originalEvent&&(l=l.originalEvent);let n;if(l.type==="touchend"||l.type==="touchcancel"){if(n=[...l.changedTouches].filter(y=>y.identifier===g.touchId)[0],!n||n.identifier!==g.touchId)return}else{if(g.touchId!==null||l.pointerId!==g.pointerId)return;n=l}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(l.type)&&!(["pointercancel","contextmenu"].includes(l.type)&&(t.browser.isSafari||t.browser.isWebView)))return;g.pointerId=null,g.touchId=null;const{params:i,touches:o,rtlTranslate:r,slidesGrid:a,enabled:c}=t;if(!c||!i.simulateTouch&&l.pointerType==="mouse")return;if(g.allowTouchCallbacks&&t.emit("touchEnd",l),g.allowTouchCallbacks=!1,!g.isTouched){g.isMoved&&i.grabCursor&&t.setGrabCursor(!1),g.isMoved=!1,g.startMoving=!1;return}i.grabCursor&&g.isMoved&&g.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const s=ko(),d=s-g.touchStartTime;if(t.allowClick){const y=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(y&&y[0]||l.target,y),t.emit("tap click",l),d<300&&s-g.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(g.lastClickTime=ko(),TC(()=>{t.destroyed||(t.allowClick=!0)}),!g.isTouched||!g.isMoved||!t.swipeDirection||o.diff===0&&!g.loopSwapReset||g.currentTranslate===g.startTranslate&&!g.loopSwapReset){g.isTouched=!1,g.isMoved=!1,g.startMoving=!1;return}g.isTouched=!1,g.isMoved=!1,g.startMoving=!1;let A;if(i.followFinger?A=r?t.translate:-t.translate:A=-g.currentTranslate,i.cssMode)return;if(i.freeMode&&i.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:A});return}const f=A>=-t.maxTranslate()&&!t.params.loop;let p=0,Z=t.slidesSizesGrid[0];for(let y=0;y<a.length;y+=y<i.slidesPerGroupSkip?1:i.slidesPerGroup){const V=y<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof a[y+V]<"u"?(f||A>=a[y]&&A<a[y+V])&&(p=y,Z=a[y+V]-a[y]):(f||A>=a[y])&&(p=y,Z=a[a.length-1]-a[a.length-2])}let m=null,u=null;i.rewind&&(t.isBeginning?u=i.virtual&&i.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(m=0));const h=(A-a[p])/Z,b=p<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(d>i.longSwipesMs){if(!i.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(h>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?m:p+b):t.slideTo(p)),t.swipeDirection==="prev"&&(h>1-i.longSwipesRatio?t.slideTo(p+b):u!==null&&h<0&&Math.abs(h)>i.longSwipesRatio?t.slideTo(u):t.slideTo(p))}else{if(!i.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(l.target===t.navigation.nextEl||l.target===t.navigation.prevEl)?l.target===t.navigation.nextEl?t.slideTo(p+b):t.slideTo(p):(t.swipeDirection==="next"&&t.slideTo(m!==null?m:p+b),t.swipeDirection==="prev"&&t.slideTo(u!==null?u:p))}}function vu(){const e=this,{params:t,el:g}=e;if(g&&g.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:l,allowSlidePrev:n,snapGrid:I}=e,i=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const o=i&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!o?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!i?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=n,e.allowSlideNext=l,e.params.watchOverflow&&I!==e.snapGrid&&e.checkOverflow()}function nV(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function IV(){const e=this,{wrapperEl:t,rtlTranslate:g,enabled:l}=e;if(!l)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let n;const I=e.maxTranslate()-e.minTranslate();I===0?n=0:n=(e.translate-e.minTranslate())/I,n!==e.progress&&e.updateProgress(g?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function iV(e){const t=this;ji(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function oV(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const Nb=(e,t)=>{const g=xn(),{params:l,el:n,wrapperEl:I,device:i}=e,o=!!l.nested,r=t==="on"?"addEventListener":"removeEventListener",a=t;g[r]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:o}),n[r]("touchstart",e.onTouchStart,{passive:!1}),n[r]("pointerdown",e.onTouchStart,{passive:!1}),g[r]("touchmove",e.onTouchMove,{passive:!1,capture:o}),g[r]("pointermove",e.onTouchMove,{passive:!1,capture:o}),g[r]("touchend",e.onTouchEnd,{passive:!0}),g[r]("pointerup",e.onTouchEnd,{passive:!0}),g[r]("pointercancel",e.onTouchEnd,{passive:!0}),g[r]("touchcancel",e.onTouchEnd,{passive:!0}),g[r]("pointerout",e.onTouchEnd,{passive:!0}),g[r]("pointerleave",e.onTouchEnd,{passive:!0}),g[r]("contextmenu",e.onTouchEnd,{passive:!0}),(l.preventClicks||l.preventClicksPropagation)&&n[r]("click",e.onClick,!0),l.cssMode&&I[r]("scroll",e.onScroll),l.updateOnWindowResize?e[a](i.ios||i.android?"resize orientationchange observerUpdate":"resize observerUpdate",vu,!0):e[a]("observerUpdate",vu,!0),n[r]("load",e.onLoad,{capture:!0})};function rV(){const e=this,{params:t}=e;e.onTouchStart=tV.bind(e),e.onTouchMove=gV.bind(e),e.onTouchEnd=lV.bind(e),e.onDocumentTouchStart=oV.bind(e),t.cssMode&&(e.onScroll=IV.bind(e)),e.onClick=nV.bind(e),e.onLoad=iV.bind(e),Nb(e,"on")}function aV(){Nb(this,"off")}var CV={attachEvents:rV,detachEvents:aV};const Su=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function sV(){const e=this,{realIndex:t,initialized:g,params:l,el:n}=e,I=l.breakpoints;if(!I||I&&Object.keys(I).length===0)return;const i=e.getBreakpoint(I,e.params.breakpointsBase,e.el);if(!i||e.currentBreakpoint===i)return;const r=(i in I?I[i]:void 0)||e.originalParams,a=Su(e,l),c=Su(e,r),s=l.enabled;a&&!c?(n.classList.remove(`${l.containerModifierClass}grid`,`${l.containerModifierClass}grid-column`),e.emitContainerClasses()):!a&&c&&(n.classList.add(`${l.containerModifierClass}grid`),(r.grid.fill&&r.grid.fill==="column"||!r.grid.fill&&l.grid.fill==="column")&&n.classList.add(`${l.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(m=>{if(typeof r[m]>"u")return;const u=l[m]&&l[m].enabled,h=r[m]&&r[m].enabled;u&&!h&&e[m].disable(),!u&&h&&e[m].enable()});const d=r.direction&&r.direction!==l.direction,A=l.loop&&(r.slidesPerView!==l.slidesPerView||d),f=l.loop;d&&g&&e.changeDirection(),St(e.params,r);const p=e.params.enabled,Z=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),s&&!p?e.disable():!s&&p&&e.enable(),e.currentBreakpoint=i,e.emit("_beforeBreakpoint",r),g&&(A?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!f&&Z?(e.loopCreate(t),e.updateSlides()):f&&!Z&&e.loopDestroy()),e.emit("breakpoint",r)}function cV(e,t,g){if(t===void 0&&(t="window"),!e||t==="container"&&!g)return;let l=!1;const n=Jt(),I=t==="window"?n.innerHeight:g.clientHeight,i=Object.keys(e).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const r=parseFloat(o.substr(1));return{value:I*r,point:o}}return{value:o,point:o}});i.sort((o,r)=>parseInt(o.value,10)-parseInt(r.value,10));for(let o=0;o<i.length;o+=1){const{point:r,value:a}=i[o];t==="window"?n.matchMedia(`(min-width: ${a}px)`).matches&&(l=r):a<=g.clientWidth&&(l=r)}return l||"max"}var dV={setBreakpoint:sV,getBreakpoint:cV};function uV(e,t){const g=[];return e.forEach(l=>{typeof l=="object"?Object.keys(l).forEach(n=>{l[n]&&g.push(t+n)}):typeof l=="string"&&g.push(t+l)}),g}function AV(){const e=this,{classNames:t,params:g,rtl:l,el:n,device:I}=e,i=uV(["initialized",g.direction,{"free-mode":e.params.freeMode&&g.freeMode.enabled},{autoheight:g.autoHeight},{rtl:l},{grid:g.grid&&g.grid.rows>1},{"grid-column":g.grid&&g.grid.rows>1&&g.grid.fill==="column"},{android:I.android},{ios:I.ios},{"css-mode":g.cssMode},{centered:g.cssMode&&g.centeredSlides},{"watch-progress":g.watchSlidesProgress}],g.containerModifierClass);t.push(...i),n.classList.add(...t),e.emitContainerClasses()}function mV(){const e=this,{el:t,classNames:g}=e;t.classList.remove(...g),e.emitContainerClasses()}var hV={addClasses:AV,removeClasses:mV};function bV(){const e=this,{isLocked:t,params:g}=e,{slidesOffsetBefore:l}=g;if(l){const n=e.slides.length-1,I=e.slidesGrid[n]+e.slidesSizesGrid[n]+l*2;e.isLocked=e.size>I}else e.isLocked=e.snapGrid.length===1;g.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),g.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var pV={checkOverflow:bV},UC={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function fV(e,t){return function(l){l===void 0&&(l={});const n=Object.keys(l)[0],I=l[n];if(typeof I!="object"||I===null){St(t,l);return}if(e[n]===!0&&(e[n]={enabled:!0}),n==="navigation"&&e[n]&&e[n].enabled&&!e[n].prevEl&&!e[n].nextEl&&(e[n].auto=!0),["pagination","scrollbar"].indexOf(n)>=0&&e[n]&&e[n].enabled&&!e[n].el&&(e[n].auto=!0),!(n in e&&"enabled"in I)){St(t,l);return}typeof e[n]=="object"&&!("enabled"in e[n])&&(e[n].enabled=!0),e[n]||(e[n]={enabled:!1}),St(t,l)}}const va={eventsEmitter:h1,update:W1,translate:w1,transition:K1,slide:Q1,loop:P1,grabCursor:$1,events:CV,breakpoints:dV,checkOverflow:pV,classes:hV},Sa={};let bc=class Zg{constructor(){let t,g;for(var l=arguments.length,n=new Array(l),I=0;I<l;I++)n[I]=arguments[I];n.length===1&&n[0].constructor&&Object.prototype.toString.call(n[0]).slice(8,-1)==="Object"?g=n[0]:[t,g]=n,g||(g={}),g=St({},g),t&&!g.el&&(g.el=t);const i=xn();if(g.el&&typeof g.el=="string"&&i.querySelectorAll(g.el).length>1){const c=[];return i.querySelectorAll(g.el).forEach(s=>{const d=St({},g,{el:s});c.push(new Zg(d))}),c}const o=this;o.__swiper__=!0,o.support=wb(),o.device=c1({userAgent:g.userAgent}),o.browser=u1(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],g.modules&&Array.isArray(g.modules)&&o.modules.push(...g.modules);const r={};o.modules.forEach(c=>{c({params:g,swiper:o,extendParams:fV(g,r),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const a=St({},UC,r);return o.params=St({},a,Sa,g),o.originalParams=St({},o.params),o.passedParams=St({},g),o.params&&o.params.on&&Object.keys(o.params.on).forEach(c=>{o.on(c,o.params.on[c])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:g,params:l}=this,n=ug(g,`.${l.slideClass}, swiper-slide`),I=wo(n[0]);return wo(t)-I}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter(g=>g.getAttribute("data-swiper-slide-index")*1===t)[0])}recalcSlides(){const t=this,{slidesEl:g,params:l}=t;t.slides=ug(g,`.${l.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,g){const l=this;t=Math.min(Math.max(t,0),1);const n=l.minTranslate(),i=(l.maxTranslate()-n)*t+n;l.translateTo(i,typeof g>"u"?0:g),l.updateActiveIndex(),l.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const g=t.el.className.split(" ").filter(l=>l.indexOf("swiper")===0||l.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",g.join(" "))}getSlideClasses(t){const g=this;return g.destroyed?"":t.className.split(" ").filter(l=>l.indexOf("swiper-slide")===0||l.indexOf(g.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const g=[];t.slides.forEach(l=>{const n=t.getSlideClasses(l);g.push({slideEl:l,classNames:n}),t.emit("_slideClass",l,n)}),t.emit("_slideClasses",g)}slidesPerViewDynamic(t,g){t===void 0&&(t="current"),g===void 0&&(g=!1);const l=this,{params:n,slides:I,slidesGrid:i,slidesSizesGrid:o,size:r,activeIndex:a}=l;let c=1;if(typeof n.slidesPerView=="number")return n.slidesPerView;if(n.centeredSlides){let s=I[a]?I[a].swiperSlideSize:0,d;for(let A=a+1;A<I.length;A+=1)I[A]&&!d&&(s+=I[A].swiperSlideSize,c+=1,s>r&&(d=!0));for(let A=a-1;A>=0;A-=1)I[A]&&!d&&(s+=I[A].swiperSlideSize,c+=1,s>r&&(d=!0))}else if(t==="current")for(let s=a+1;s<I.length;s+=1)(g?i[s]+o[s]-i[a]<r:i[s]-i[a]<r)&&(c+=1);else for(let s=a-1;s>=0;s-=1)i[a]-i[s]<r&&(c+=1);return c}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:g,params:l}=t;l.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(i=>{i.complete&&ji(t,i)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function n(){const i=t.rtlTranslate?t.translate*-1:t.translate,o=Math.min(Math.max(i,t.maxTranslate()),t.minTranslate());t.setTranslate(o),t.updateActiveIndex(),t.updateSlidesClasses()}let I;if(l.freeMode&&l.freeMode.enabled&&!l.cssMode)n(),l.autoHeight&&t.updateAutoHeight();else{if((l.slidesPerView==="auto"||l.slidesPerView>1)&&t.isEnd&&!l.centeredSlides){const i=t.virtual&&l.virtual.enabled?t.virtual.slides:t.slides;I=t.slideTo(i.length-1,0,!1,!0)}else I=t.slideTo(t.activeIndex,0,!1,!0);I||n()}l.watchOverflow&&g!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,g){g===void 0&&(g=!0);const l=this,n=l.params.direction;return t||(t=n==="horizontal"?"vertical":"horizontal"),t===n||t!=="horizontal"&&t!=="vertical"||(l.el.classList.remove(`${l.params.containerModifierClass}${n}`),l.el.classList.add(`${l.params.containerModifierClass}${t}`),l.emitContainerClasses(),l.params.direction=t,l.slides.forEach(I=>{t==="vertical"?I.style.width="":I.style.height=""}),l.emit("changeDirection"),g&&l.update()),l}changeLanguageDirection(t){const g=this;g.rtl&&t==="rtl"||!g.rtl&&t==="ltr"||(g.rtl=t==="rtl",g.rtlTranslate=g.params.direction==="horizontal"&&g.rtl,g.rtl?(g.el.classList.add(`${g.params.containerModifierClass}rtl`),g.el.dir="rtl"):(g.el.classList.remove(`${g.params.containerModifierClass}rtl`),g.el.dir="ltr"),g.update())}mount(t){const g=this;if(g.mounted)return!0;let l=t||g.params.el;if(typeof l=="string"&&(l=document.querySelector(l)),!l)return!1;l.swiper=g,l.parentNode&&l.parentNode.host&&l.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(g.isElement=!0);const n=()=>`.${(g.params.wrapperClass||"").trim().split(" ").join(".")}`;let i=(()=>l&&l.shadowRoot&&l.shadowRoot.querySelector?l.shadowRoot.querySelector(n()):ug(l,n())[0])();return!i&&g.params.createElements&&(i=Yo("div",g.params.wrapperClass),l.append(i),ug(l,`.${g.params.slideClass}`).forEach(o=>{i.append(o)})),Object.assign(g,{el:l,wrapperEl:i,slidesEl:g.isElement&&!l.parentNode.host.slideSlots?l.parentNode.host:i,hostEl:g.isElement?l.parentNode.host:l,mounted:!0,rtl:l.dir.toLowerCase()==="rtl"||Pg(l,"direction")==="rtl",rtlTranslate:g.params.direction==="horizontal"&&(l.dir.toLowerCase()==="rtl"||Pg(l,"direction")==="rtl"),wrongRTL:Pg(i,"display")==="-webkit-box"}),!0}init(t){const g=this;if(g.initialized||g.mount(t)===!1)return g;g.emit("beforeInit"),g.params.breakpoints&&g.setBreakpoint(),g.addClasses(),g.updateSize(),g.updateSlides(),g.params.watchOverflow&&g.checkOverflow(),g.params.grabCursor&&g.enabled&&g.setGrabCursor(),g.params.loop&&g.virtual&&g.params.virtual.enabled?g.slideTo(g.params.initialSlide+g.virtual.slidesBefore,0,g.params.runCallbacksOnInit,!1,!0):g.slideTo(g.params.initialSlide,0,g.params.runCallbacksOnInit,!1,!0),g.params.loop&&g.loopCreate(),g.attachEvents();const n=[...g.el.querySelectorAll('[loading="lazy"]')];return g.isElement&&n.push(...g.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(I=>{I.complete?ji(g,I):I.addEventListener("load",i=>{ji(g,i.target)})}),LC(g),g.initialized=!0,LC(g),g.emit("init"),g.emit("afterInit"),g}destroy(t,g){t===void 0&&(t=!0),g===void 0&&(g=!0);const l=this,{params:n,el:I,wrapperEl:i,slides:o}=l;return typeof l.params>"u"||l.destroyed||(l.emit("beforeDestroy"),l.initialized=!1,l.detachEvents(),n.loop&&l.loopDestroy(),g&&(l.removeClasses(),I.removeAttribute("style"),i.removeAttribute("style"),o&&o.length&&o.forEach(r=>{r.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),r.removeAttribute("style"),r.removeAttribute("data-swiper-slide-index")})),l.emit("destroy"),Object.keys(l.eventsListeners).forEach(r=>{l.off(r)}),t!==!1&&(l.el.swiper=null,n1(l)),l.destroyed=!0),null}static extendDefaults(t){St(Sa,t)}static get extendedDefaults(){return Sa}static get defaults(){return UC}static installModule(t){Zg.prototype.__modules__||(Zg.prototype.__modules__=[]);const g=Zg.prototype.__modules__;typeof t=="function"&&g.indexOf(t)<0&&g.push(t)}static use(t){return Array.isArray(t)?(t.forEach(g=>Zg.installModule(g)),Zg):(Zg.installModule(t),Zg)}};Object.keys(va).forEach(e=>{Object.keys(va[e]).forEach(t=>{bc.prototype[t]=va[e][t]})});bc.use([A1,m1]);const Fb=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function xl(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"&&!e.__swiper__}function bn(e,t){const g=["__proto__","constructor","prototype"];Object.keys(t).filter(l=>g.indexOf(l)<0).forEach(l=>{typeof e[l]>"u"?e[l]=t[l]:xl(t[l])&&xl(e[l])&&Object.keys(t[l]).length>0?t[l].__swiper__?e[l]=t[l]:bn(e[l],t[l]):e[l]=t[l]})}function Kb(e){return e===void 0&&(e={}),e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function xb(e){return e===void 0&&(e={}),e.pagination&&typeof e.pagination.el>"u"}function Eb(e){return e===void 0&&(e={}),e.scrollbar&&typeof e.scrollbar.el>"u"}function zb(e){e===void 0&&(e="");const t=e.split(" ").map(l=>l.trim()).filter(l=>!!l),g=[];return t.forEach(l=>{g.indexOf(l)<0&&g.push(l)}),g.join(" ")}function ZV(e){return e===void 0&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function yV(e){let{swiper:t,slides:g,passedParams:l,changedParams:n,nextEl:I,prevEl:i,scrollbarEl:o,paginationEl:r}=e;const a=n.filter(X=>X!=="children"&&X!=="direction"&&X!=="wrapperClass"),{params:c,pagination:s,navigation:d,scrollbar:A,virtual:f,thumbs:p}=t;let Z,m,u,h,b,y,V,v;n.includes("thumbs")&&l.thumbs&&l.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(Z=!0),n.includes("controller")&&l.controller&&l.controller.control&&c.controller&&!c.controller.control&&(m=!0),n.includes("pagination")&&l.pagination&&(l.pagination.el||r)&&(c.pagination||c.pagination===!1)&&s&&!s.el&&(u=!0),n.includes("scrollbar")&&l.scrollbar&&(l.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&A&&!A.el&&(h=!0),n.includes("navigation")&&l.navigation&&(l.navigation.prevEl||i)&&(l.navigation.nextEl||I)&&(c.navigation||c.navigation===!1)&&d&&!d.prevEl&&!d.nextEl&&(b=!0);const S=X=>{t[X]&&(t[X].destroy(),X==="navigation"?(t.isElement&&(t[X].prevEl.remove(),t[X].nextEl.remove()),c[X].prevEl=void 0,c[X].nextEl=void 0,t[X].prevEl=void 0,t[X].nextEl=void 0):(t.isElement&&t[X].el.remove(),c[X].el=void 0,t[X].el=void 0))};n.includes("loop")&&t.isElement&&(c.loop&&!l.loop?y=!0:!c.loop&&l.loop?V=!0:v=!0),a.forEach(X=>{if(xl(c[X])&&xl(l[X]))Object.assign(c[X],l[X]),(X==="navigation"||X==="pagination"||X==="scrollbar")&&"enabled"in l[X]&&!l[X].enabled&&S(X);else{const G=l[X];(G===!0||G===!1)&&(X==="navigation"||X==="pagination"||X==="scrollbar")?G===!1&&S(X):c[X]=l[X]}}),a.includes("controller")&&!m&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),n.includes("children")&&g&&f&&c.virtual.enabled?(f.slides=g,f.update(!0)):n.includes("virtual")&&f&&c.virtual.enabled&&(g&&(f.slides=g),f.update(!0)),n.includes("children")&&g&&c.loop&&(v=!0),Z&&p.init()&&p.update(!0),m&&(t.controller.control=c.controller.control),u&&(t.isElement&&(!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-pagination"),r.part.add("pagination"),t.el.appendChild(r)),r&&(c.pagination.el=r),s.init(),s.render(),s.update()),h&&(t.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),t.el.appendChild(o)),o&&(c.scrollbar.el=o),A.init(),A.updateSize(),A.setTranslate()),b&&(t.isElement&&((!I||typeof I=="string")&&(I=document.createElement("div"),I.classList.add("swiper-button-next"),I.innerHTML=t.hostEl.constructor.nextButtonSvg,I.part.add("button-next"),t.el.appendChild(I)),(!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-prev"),i.innerHTML=t.hostEl.constructor.prevButtonSvg,i.part.add("button-prev"),t.el.appendChild(i))),I&&(c.navigation.nextEl=I),i&&(c.navigation.prevEl=i),d.init(),d.update()),n.includes("allowSlideNext")&&(t.allowSlideNext=l.allowSlideNext),n.includes("allowSlidePrev")&&(t.allowSlidePrev=l.allowSlidePrev),n.includes("direction")&&t.changeDirection(l.direction,!1),(y||v)&&t.loopDestroy(),(V||v)&&t.loopCreate(),t.update()}function GV(e,t){e===void 0&&(e={}),t===void 0&&(t=!0);const g={on:{}},l={},n={};bn(g,UC),g._emitClasses=!0,g.init=!1;const I={},i=Fb.map(r=>r.replace(/_/,"")),o=Object.assign({},e);return Object.keys(o).forEach(r=>{typeof e[r]>"u"||(i.indexOf(r)>=0?xl(e[r])?(g[r]={},n[r]={},bn(g[r],e[r]),bn(n[r],e[r])):(g[r]=e[r],n[r]=e[r]):r.search(/on[A-Z]/)===0&&typeof e[r]=="function"?t?l[`${r[2].toLowerCase()}${r.substr(3)}`]=e[r]:g.on[`${r[2].toLowerCase()}${r.substr(3)}`]=e[r]:I[r]=e[r])}),["navigation","pagination","scrollbar"].forEach(r=>{g[r]===!0&&(g[r]={}),g[r]===!1&&delete g[r]}),{params:g,passedParams:n,rest:I,events:l}}function BV(e,t){let{el:g,nextEl:l,prevEl:n,paginationEl:I,scrollbarEl:i,swiper:o}=e;Kb(t)&&l&&n&&(o.params.navigation.nextEl=l,o.originalParams.navigation.nextEl=l,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),xb(t)&&I&&(o.params.pagination.el=I,o.originalParams.pagination.el=I),Eb(t)&&i&&(o.params.scrollbar.el=i,o.originalParams.scrollbar.el=i),o.init(g)}function vV(e,t,g,l,n){const I=[];if(!t)return I;const i=r=>{I.indexOf(r)<0&&I.push(r)};if(g&&l){const r=l.map(n),a=g.map(n);r.join("")!==a.join("")&&i("children"),l.length!==g.length&&i("children")}return Fb.filter(r=>r[0]==="_").map(r=>r.replace(/_/,"")).forEach(r=>{if(r in e&&r in t)if(xl(e[r])&&xl(t[r])){const a=Object.keys(e[r]),c=Object.keys(t[r]);a.length!==c.length?i(r):(a.forEach(s=>{e[r][s]!==t[r][s]&&i(r)}),c.forEach(s=>{e[r][s]!==t[r][s]&&i(r)}))}else e[r]!==t[r]&&i(r)}),I}const SV=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l])}return e},Ho.apply(this,arguments)}function Tb(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function Mb(e){const t=[];return q.Children.toArray(e).forEach(g=>{Tb(g)?t.push(g):g.props&&g.props.children&&Mb(g.props.children).forEach(l=>t.push(l))}),t}function VV(e){const t=[],g={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return q.Children.toArray(e).forEach(l=>{if(Tb(l))t.push(l);else if(l.props&&l.props.slot&&g[l.props.slot])g[l.props.slot].push(l);else if(l.props&&l.props.children){const n=Mb(l.props.children);n.length>0?n.forEach(I=>t.push(I)):g["container-end"].push(l)}else g["container-end"].push(l)}),{slides:t,slots:g}}function WV(e,t,g){if(!g)return null;const l=c=>{let s=c;return c<0?s=t.length+c:s>=t.length&&(s=s-t.length),s},n=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${g.offset}px`}:{top:`${g.offset}px`},{from:I,to:i}=g,o=e.params.loop?-t.length:0,r=e.params.loop?t.length*2:t.length,a=[];for(let c=o;c<r;c+=1)c>=I&&c<=i&&a.push(t[l(c)]);return a.map((c,s)=>q.cloneElement(c,{swiper:e,style:n,key:`slide-${s}`}))}function ZI(e,t){return typeof window>"u"?k.useEffect(e,t):k.useLayoutEffect(e,t)}const Vu=k.createContext(null),RV=k.createContext(null),Lb=k.forwardRef(function(e,t){let{className:g,tag:l="div",wrapperTag:n="div",children:I,onSwiper:i,...o}=e===void 0?{}:e,r=!1;const[a,c]=k.useState("swiper"),[s,d]=k.useState(null),[A,f]=k.useState(!1),p=k.useRef(!1),Z=k.useRef(null),m=k.useRef(null),u=k.useRef(null),h=k.useRef(null),b=k.useRef(null),y=k.useRef(null),V=k.useRef(null),v=k.useRef(null),{params:S,passedParams:X,rest:G,events:B}=GV(o),{slides:W,slots:R}=VV(I),Y=()=>{f(!A)};Object.assign(S.on,{_containerClasses(x,w){c(w)}});const F=()=>{Object.assign(S.on,B),r=!0;const x={...S};if(delete x.wrapperClass,m.current=new bc(x),m.current.virtual&&m.current.params.virtual.enabled){m.current.virtual.slides=W;const w={cache:!1,slides:W,renderExternal:d,renderExternalUpdate:!1};bn(m.current.params.virtual,w),bn(m.current.originalParams.virtual,w)}};Z.current||F(),m.current&&m.current.on("_beforeBreakpoint",Y);const M=()=>{r||!B||!m.current||Object.keys(B).forEach(x=>{m.current.on(x,B[x])})},U=()=>{!B||!m.current||Object.keys(B).forEach(x=>{m.current.off(x,B[x])})};k.useEffect(()=>()=>{m.current&&m.current.off("_beforeBreakpoint",Y)}),k.useEffect(()=>{!p.current&&m.current&&(m.current.emitSlidesClasses(),p.current=!0)}),ZI(()=>{if(t&&(t.current=Z.current),!!Z.current)return m.current.destroyed&&F(),BV({el:Z.current,nextEl:b.current,prevEl:y.current,paginationEl:V.current,scrollbarEl:v.current,swiper:m.current},S),i&&i(m.current),()=>{m.current&&!m.current.destroyed&&m.current.destroy(!0,!1)}},[]),ZI(()=>{M();const x=vV(X,u.current,W,h.current,w=>w.key);return u.current=X,h.current=W,x.length&&m.current&&!m.current.destroyed&&yV({swiper:m.current,slides:W,passedParams:X,changedParams:x,nextEl:b.current,prevEl:y.current,scrollbarEl:v.current,paginationEl:V.current}),()=>{U()}}),ZI(()=>{SV(m.current)},[s]);function E(){return S.virtual?WV(m.current,W,s):W.map((x,w)=>q.cloneElement(x,{swiper:m.current,swiperSlideIndex:w}))}return q.createElement(l,Ho({ref:Z,className:zb(`${a}${g?` ${g}`:""}`)},G),q.createElement(RV.Provider,{value:m.current},R["container-start"],q.createElement(n,{className:ZV(S.wrapperClass)},R["wrapper-start"],E(),R["wrapper-end"]),Kb(S)&&q.createElement(q.Fragment,null,q.createElement("div",{ref:y,className:"swiper-button-prev"}),q.createElement("div",{ref:b,className:"swiper-button-next"})),Eb(S)&&q.createElement("div",{ref:v,className:"swiper-scrollbar"}),xb(S)&&q.createElement("div",{ref:V,className:"swiper-pagination"}),R["container-end"]))});Lb.displayName="Swiper";const Ub=k.forwardRef(function(e,t){let{tag:g="div",children:l,className:n="",swiper:I,zoom:i,lazy:o,virtualIndex:r,swiperSlideIndex:a,...c}=e===void 0?{}:e;const s=k.useRef(null),[d,A]=k.useState("swiper-slide"),[f,p]=k.useState(!1);function Z(b,y,V){y===s.current&&A(V)}ZI(()=>{if(typeof a<"u"&&(s.current.swiperSlideIndex=a),t&&(t.current=s.current),!(!s.current||!I)){if(I.destroyed){d!=="swiper-slide"&&A("swiper-slide");return}return I.on("_slideClass",Z),()=>{I&&I.off("_slideClass",Z)}}}),ZI(()=>{I&&s.current&&!I.destroyed&&A(I.getSlideClasses(s.current))},[I]);const m={isActive:d.indexOf("swiper-slide-active")>=0,isVisible:d.indexOf("swiper-slide-visible")>=0,isPrev:d.indexOf("swiper-slide-prev")>=0,isNext:d.indexOf("swiper-slide-next")>=0},u=()=>typeof l=="function"?l(m):l,h=()=>{p(!0)};return q.createElement(g,Ho({ref:s,className:zb(`${d}${n?` ${n}`:""}`),"data-swiper-slide-index":r,onLoad:h},c),i&&q.createElement(Vu.Provider,{value:m},q.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof i=="number"?i:void 0},u(),o&&!f&&q.createElement("div",{className:"swiper-lazy-preloader"}))),!i&&q.createElement(Vu.Provider,{value:m},u(),o&&!f&&q.createElement("div",{className:"swiper-lazy-preloader"})))});Ub.displayName="SwiperSlide";function XV(e,t,g,l){return e.params.createElements&&Object.keys(l).forEach(n=>{if(!g[n]&&g.auto===!0){let I=ug(e.el,`.${l[n]}`)[0];I||(I=Yo("div",l[n]),I.className=l[n],e.el.append(I)),g[n]=I,t[n]=I}}),g}function tI(e){return e===void 0&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function kV(e){let{swiper:t,extendParams:g,on:l,emit:n}=e;const I="swiper-pagination";g({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:u=>u,formatFractionTotal:u=>u,bulletClass:`${I}-bullet`,bulletActiveClass:`${I}-bullet-active`,modifierClass:`${I}-`,currentClass:`${I}-current`,totalClass:`${I}-total`,hiddenClass:`${I}-hidden`,progressbarFillClass:`${I}-progressbar-fill`,progressbarOppositeClass:`${I}-progressbar-opposite`,clickableClass:`${I}-clickable`,lockClass:`${I}-lock`,horizontalClass:`${I}-horizontal`,verticalClass:`${I}-vertical`,paginationDisabledClass:`${I}-disabled`}}),t.pagination={el:null,bullets:[]};let i,o=0;const r=u=>(Array.isArray(u)?u:[u]).filter(h=>!!h);function a(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function c(u,h){const{bulletActiveClass:b}=t.params.pagination;u&&(u=u[`${h==="prev"?"previous":"next"}ElementSibling`],u&&(u.classList.add(`${b}-${h}`),u=u[`${h==="prev"?"previous":"next"}ElementSibling`],u&&u.classList.add(`${b}-${h}-${h}`)))}function s(u){const h=u.target.closest(tI(t.params.pagination.bulletClass));if(!h)return;u.preventDefault();const b=wo(h)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===b)return;t.slideToLoop(b)}else t.slideTo(b)}function d(){const u=t.rtl,h=t.params.pagination;if(a())return;let b=t.pagination.el;b=r(b);let y,V;const v=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,S=t.params.loop?Math.ceil(v/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(V=t.previousRealIndex||0,y=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(y=t.snapIndex,V=t.previousSnapIndex):(V=t.previousIndex||0,y=t.activeIndex||0),h.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const X=t.pagination.bullets;let G,B,W;if(h.dynamicBullets&&(i=MC(X[0],t.isHorizontal()?"width":"height",!0),b.forEach(R=>{R.style[t.isHorizontal()?"width":"height"]=`${i*(h.dynamicMainBullets+4)}px`}),h.dynamicMainBullets>1&&V!==void 0&&(o+=y-(V||0),o>h.dynamicMainBullets-1?o=h.dynamicMainBullets-1:o<0&&(o=0)),G=Math.max(y-o,0),B=G+(Math.min(X.length,h.dynamicMainBullets)-1),W=(B+G)/2),X.forEach(R=>{const Y=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(F=>`${h.bulletActiveClass}${F}`)].map(F=>typeof F=="string"&&F.includes(" ")?F.split(" "):F).flat();R.classList.remove(...Y)}),b.length>1)X.forEach(R=>{const Y=wo(R);Y===y?R.classList.add(...h.bulletActiveClass.split(" ")):t.isElement&&R.setAttribute("part","bullet"),h.dynamicBullets&&(Y>=G&&Y<=B&&R.classList.add(...`${h.bulletActiveClass}-main`.split(" ")),Y===G&&c(R,"prev"),Y===B&&c(R,"next"))});else{const R=X[y];if(R&&R.classList.add(...h.bulletActiveClass.split(" ")),t.isElement&&X.forEach((Y,F)=>{Y.setAttribute("part",F===y?"bullet-active":"bullet")}),h.dynamicBullets){const Y=X[G],F=X[B];for(let M=G;M<=B;M+=1)X[M]&&X[M].classList.add(...`${h.bulletActiveClass}-main`.split(" "));c(Y,"prev"),c(F,"next")}}if(h.dynamicBullets){const R=Math.min(X.length,h.dynamicMainBullets+4),Y=(i*R-i)/2-W*i,F=u?"right":"left";X.forEach(M=>{M.style[t.isHorizontal()?F:"top"]=`${Y}px`})}}b.forEach((X,G)=>{if(h.type==="fraction"&&(X.querySelectorAll(tI(h.currentClass)).forEach(B=>{B.textContent=h.formatFractionCurrent(y+1)}),X.querySelectorAll(tI(h.totalClass)).forEach(B=>{B.textContent=h.formatFractionTotal(S)})),h.type==="progressbar"){let B;h.progressbarOpposite?B=t.isHorizontal()?"vertical":"horizontal":B=t.isHorizontal()?"horizontal":"vertical";const W=(y+1)/S;let R=1,Y=1;B==="horizontal"?R=W:Y=W,X.querySelectorAll(tI(h.progressbarFillClass)).forEach(F=>{F.style.transform=`translate3d(0,0,0) scaleX(${R}) scaleY(${Y})`,F.style.transitionDuration=`${t.params.speed}ms`})}h.type==="custom"&&h.renderCustom?(X.innerHTML=h.renderCustom(t,y+1,S),G===0&&n("paginationRender",X)):(G===0&&n("paginationRender",X),n("paginationUpdate",X)),t.params.watchOverflow&&t.enabled&&X.classList[t.isLocked?"add":"remove"](h.lockClass)})}function A(){const u=t.params.pagination;if(a())return;const h=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let b=t.pagination.el;b=r(b);let y="";if(u.type==="bullets"){let V=t.params.loop?Math.ceil(h/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&V>h&&(V=h);for(let v=0;v<V;v+=1)u.renderBullet?y+=u.renderBullet.call(t,v,u.bulletClass):y+=`<${u.bulletElement} ${t.isElement?'part="bullet"':""} class="${u.bulletClass}"></${u.bulletElement}>`}u.type==="fraction"&&(u.renderFraction?y=u.renderFraction.call(t,u.currentClass,u.totalClass):y=`<span class="${u.currentClass}"></span> / <span class="${u.totalClass}"></span>`),u.type==="progressbar"&&(u.renderProgressbar?y=u.renderProgressbar.call(t,u.progressbarFillClass):y=`<span class="${u.progressbarFillClass}"></span>`),t.pagination.bullets=[],b.forEach(V=>{u.type!=="custom"&&(V.innerHTML=y||""),u.type==="bullets"&&t.pagination.bullets.push(...V.querySelectorAll(tI(u.bulletClass)))}),u.type!=="custom"&&n("paginationRender",b[0])}function f(){t.params.pagination=XV(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const u=t.params.pagination;if(!u.el)return;let h;typeof u.el=="string"&&t.isElement&&(h=t.el.querySelector(u.el)),!h&&typeof u.el=="string"&&(h=[...document.querySelectorAll(u.el)]),h||(h=u.el),!(!h||h.length===0)&&(t.params.uniqueNavElements&&typeof u.el=="string"&&Array.isArray(h)&&h.length>1&&(h=[...t.el.querySelectorAll(u.el)],h.length>1&&(h=h.filter(b=>Yb(b,".swiper")[0]===t.el)[0])),Array.isArray(h)&&h.length===1&&(h=h[0]),Object.assign(t.pagination,{el:h}),h=r(h),h.forEach(b=>{u.type==="bullets"&&u.clickable&&b.classList.add(...(u.clickableClass||"").split(" ")),b.classList.add(u.modifierClass+u.type),b.classList.add(t.isHorizontal()?u.horizontalClass:u.verticalClass),u.type==="bullets"&&u.dynamicBullets&&(b.classList.add(`${u.modifierClass}${u.type}-dynamic`),o=0,u.dynamicMainBullets<1&&(u.dynamicMainBullets=1)),u.type==="progressbar"&&u.progressbarOpposite&&b.classList.add(u.progressbarOppositeClass),u.clickable&&b.addEventListener("click",s),t.enabled||b.classList.add(u.lockClass)}))}function p(){const u=t.params.pagination;if(a())return;let h=t.pagination.el;h&&(h=r(h),h.forEach(b=>{b.classList.remove(u.hiddenClass),b.classList.remove(u.modifierClass+u.type),b.classList.remove(t.isHorizontal()?u.horizontalClass:u.verticalClass),u.clickable&&(b.classList.remove(...(u.clickableClass||"").split(" ")),b.removeEventListener("click",s))})),t.pagination.bullets&&t.pagination.bullets.forEach(b=>b.classList.remove(...u.bulletActiveClass.split(" ")))}l("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const u=t.params.pagination;let{el:h}=t.pagination;h=r(h),h.forEach(b=>{b.classList.remove(u.horizontalClass,u.verticalClass),b.classList.add(t.isHorizontal()?u.horizontalClass:u.verticalClass)})}),l("init",()=>{t.params.pagination.enabled===!1?m():(f(),A(),d())}),l("activeIndexChange",()=>{typeof t.snapIndex>"u"&&d()}),l("snapIndexChange",()=>{d()}),l("snapGridLengthChange",()=>{A(),d()}),l("destroy",()=>{p()}),l("enable disable",()=>{let{el:u}=t.pagination;u&&(u=r(u),u.forEach(h=>h.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),l("lock unlock",()=>{d()}),l("click",(u,h)=>{const b=h.target,y=r(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&y&&y.length>0&&!b.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&b===t.navigation.nextEl||t.navigation.prevEl&&b===t.navigation.prevEl))return;const V=y[0].classList.contains(t.params.pagination.hiddenClass);n(V===!0?"paginationShow":"paginationHide"),y.forEach(v=>v.classList.toggle(t.params.pagination.hiddenClass))}});const Z=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:u}=t.pagination;u&&(u=r(u),u.forEach(h=>h.classList.remove(t.params.pagination.paginationDisabledClass))),f(),A(),d()},m=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:u}=t.pagination;u&&(u=r(u),u.forEach(h=>h.classList.add(t.params.pagination.paginationDisabledClass))),p()};Object.assign(t.pagination,{enable:Z,disable:m,render:A,update:d,init:f,destroy:p})}const JV=[{className:"basico",plan:"Bsico",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlace a 1 red social","Vnculo perfil Know me"],cost:0,color:"#495456"},{className:"personal",plan:"Personal",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlace a 4 red social","Vnculo perfil Know me","Tarjeta de proximidad con logo"],cost:["99","980"],color:"#38B6FF"},{className:"freelance",plan:"Freelance",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 450 caracteres ","Enlace a 6 red social","Vnculo perfil Know me","Tarjeta de proximidad con diseo personalizado","Alta en network Know me"],cost:["149","1,490"],color:"#38B6FF"},{className:"emprendedor",plan:"Emprendedor",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlaces ilimiados a redes social","Vnculo perfil Know me","1000 Tarjetas de impresas con diseo personalizado","Alta en network Know me","Alta de archivos PDF en tu perfil Emprendedor","Galeria de imagenes"],cost:["199","1,990"],color:"#38B6FF"},{className:"ecommerce",plan:"Ecommerce",includes:["Foto de perfil","Fondo plano de color personalizable","Men - Call - Email","Ttulo / Nombre","Descripcin hasta 200 caracteres ","Enlaces ilimiados a redes social","Vnculo perfil Know me","1000 Tarjetas de impresas con diseo personalizado","Alta en network Know me","Alta de archivos PDF en tu perfil Emprendedor","Galeria de imagenes","Tienda en linea"],cost:["330","3,190"],color:"#FD6202"}],YV={knowme_network:"Plataforma Knowme",proximity_card:["Tarjeta NFC - Blanco","Tarjeta NFC - Personalizada"],qr_code:"Codigo QR",social_media:"Redes Sociales (Links - Apps)",web_page_url:"Link nico para compartir",personal_information:"Informacin Personal",business_information:"Informacin Business",profile_img:"Foto de Perfil",cover_img:"Foto de Portada",share_contact:"Intercambio de Contactos",ai_card_read:"Lectura AI de Tarjetas Tradicionales",contact_management:"Gestin de Contactos Recibidos",payment_links:"Enlaces de Pago",theme_selection:"Eleccin de Tema (Claro / Oscuro)",catalog:"Catlogo (Productos y Servicios)",service_directory:"Directorio de Servicios (Opcional)",directory_key_words:["5 Palabras clave para directorio","15 Palabras clave para directorio","Palabras clave ilimitadas para directorio"],knowme_discount:"Mdulo de descuentos a comunidad KnowMe",business_personalization:"Personalizacin Empresarial (Logotipo y pantalones)",gallery:"Galera",broshure:"Broshure o PDF",video:"Video",dashboard:"Dashboard Empresarial",data_export:"Exportacin de Datos",user_management:"Gestin de Usuarios",masive_import:"Importacin Masiva (csv, sheets, excels",analytics:"Analticas",equipment_management:"Gestin de Equipos",card_reasignment:"Reasignacin de Tarjetas",multiple_sub_business:"Multiples Sub-Empresas",crm_integration:"Automatizaciones personalizadas e integraciones con otros sistemas o CRM's"},ul=()=>{const e="https://api.knowmeapp.com",t=localStorage.getItem("token"),{user:g}=k.useContext(Qt);return{getPlans:async()=>await Be.get(`${e}/api/plans`),getProfile:async(u="")=>{let h;return u==""?h=await Be.get(`${e}/api/profile/username/${g.username}`,{headers:{"x-token":t}}):h=await Be.get(`${e}/api/profile/username/${u}`,{headers:{"x-token":t}}),h},getSocialMedia:async(u="")=>{let h;return u==""?h=await Be.get(`${e}/api/social_media/${g.id}`,{headers:{"x-token":t}}):h=await Be.get(`${e}/api/social_media/${u}`,{headers:{"x-token":t}}),h},postScheduleDay:async u=>(u.id_user=g.id,await Be.post(`${e}/api/schedule_day`,u,{headers:{"x-token":t}})),updateSocialMedia:async u=>(u.id_user=g.id,await Be.put(`${e}/api/social_media/${g.id}`,u,{headers:{"x-token":t}})),createProfile:async u=>(u.username=g.username,await Be.post(`${e}/api/profile`,u,{headers:{"x-token":t}})),getSchedule:async(u="")=>{let h;return u==""?h=await Be.get(`${e}/api/schedule_day/${g.id}`,{headers:{"x-token":t}}):h=await Be.get(`${e}/api/schedule_day/${u}`,{headers:{"x-token":t}}),h},updateScheduleDay:async u=>(u.id_user=g.id,await Be.put(`${e}/api/schedule_day/${g.id}/${u.day}`,u,{headers:{"x-token":t}})),updateProfile:async u=>(u.username=g.username,console.log(`Datos que tengo para enviar en el PUT: ${JSON.stringify(g)}`),await Be.put(`${e}/api/profile/${g.username}`,u,{headers:{"x-token":t}})),getProfiles:async()=>await Be.get(`${e}/api/profile/`),getCategories:async()=>await Be.get(`${e}/api/categories/`,{headers:{"x-token":t}}),getProfilesFilter:async(u,h)=>await Be.get(`${e}/api/profile/filter/${u}/${h}`),getFilterCategories:async u=>await Be.get(`${e}/api/profile/filter/${u}`),createSocialMedia:async u=>(u.id_user=g.id,await Be.post(`${e}/api/social_media`,u,{headers:{"x-token":t}})),updateProfilePhoto:async u=>{const h=await Be.post(`${e}/api/profile/uploadAvatar`,u,{headers:{"x-token":t,"Content-Type":"multipart/form-data"}});return console.log(h),h}}};const wV=({plan:e,setSelectedPlan:t,cardsPlan:g})=>C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"plan-card ",style:{borderColor:"#"+g.color_card},children:[C.jsxs("div",{className:"info-card",children:[C.jsx("label",{className:"plan-title",style:{color:"#"+g.color_card},children:g.name_plan}),C.jsx("ul",{className:"plan-list p-4",children:Object.entries(YV).map(l=>{if(g[l[0]]==!0)return typeof l[1]=="string"?C.jsxs("li",{style:{color:"#"+g.color_card},children:[" ",l[1]]},l[0]):C.jsxs("li",{style:{color:"#"+g.color_card},children:[" ",l[1][g[l[0]]-1]]},l[0])})})]}),C.jsxs("div",{className:"plan-footer",children:[C.jsxs(ke,{className:"plan-cost",style:{color:"#"+g.color_card},children:[C.jsx(re,{xs:4,children:parseFloat(g.unique_cost)>0&&parseFloat(g.annual_cost)>0&&"MXN"}),C.jsx(re,{xs:8,className:"plan-month",children:parseFloat(g.unique_cost)<0&&parseFloat(g.annual_cost)<0?"Contctanos":g.unique_cost=="0.00"&&g.annual_cost=="0.00"?"Gratis":g.unique_cost!="0.00"?`$${g.unique_cost} Pago nico`:`$${g.annual_cost} Anual`})]}),C.jsx(et,{className:`plan-btn ${g.name_plan}`,style:{color:"#"+g.color_card,borderColor:"#"+g.color_card,cursor:"pointer"},onClick:()=>{t(g)},children:`Elige ${g.name_plan}`})]})]}),C.jsx("style",{children:`
          button.${g.name_plan}:hover,
          button.${g.name_plan}:active {
            background-color: ${"#"+g.color_card} !important;
            color: linear-gradient(var(--background-gradient)) !important;
          }
        `})]}),HV=({selectedPlan:e,setSelectedPlan:t})=>{const[g,l]=k.useState(null),n=ul(),I=async()=>{const i=await n.getPlans();l(i.data.plans)};return k.useEffect(()=>{I()},[]),C.jsx(C.Fragment,{children:g!=null&&C.jsx(Lb,{slidesPerView:1.3,centeredSlides:!0,spaceBetween:30,modules:[kV],className:"mySwiper",children:JV.map((i,o)=>(i.id_plan=g[o].id_plan,i.cost=[g[o].month_cost,g[o].annual_cost],i.color="#"+g[o].color_card,C.jsx(Ub,{children:C.jsx(wV,{plan:i,setSelectedPlan:t,cardsPlan:g[o]})},o)))})})};const NV=({selectedPlan:e})=>{const[t,g]=k.useState(!1),l=Ut(),n=gi(),I=_e();k.useEffect(()=>{l.state==null&&I("/")},[l]);const i=r=>new Promise(a=>setTimeout(a,r)),o=async()=>{const{usuario:r,terms:a,consent:c,email:s,nombre:d,password:A,apellido:f}=l.state.user,p={username:r,name:d,lastname:f,email:s,password:A,mailing_status:c,terms_policies_status:a,id_plan_fk:e.id_plan,id_user_type_fk:2};try{g(!0);const Z=await n.createUser(p);await i(2e3),g(!1),I("/")}catch{await i(2e3),g(!1),I("/registro")}};return C.jsxs(C.Fragment,{children:[t&&C.jsx(Xb,{}),C.jsx("div",{className:"plan-pay-option"}),C.jsx("div",{className:"plan-pay-btn",children:C.jsx(et,{onClick:o,children:e.name_plan!="Bsico"?"Pagar con PayPal":"Comenzar"})}),C.jsx(Tl,{position:"top-center",richColors:!0})]})};var FV={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function KV(e){if(typeof e=="number")return{value:e,unit:"px"};var t,g=(e.match(/^[0-9.]*/)||"").toString();g.includes(".")?t=parseFloat(g):t=parseInt(g,10);var l=(e.match(/[^0-9]*$/)||"").toString();return FV[l]?{value:t,unit:l}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function Va(e){var t=KV(e);return"".concat(t.value).concat(t.unit)}var xV=function(e,t,g){var l="react-spinners-".concat(e,"-").concat(g);if(typeof window>"u"||!window.document)return l;var n=document.createElement("style");document.head.appendChild(n);var I=n.sheet,i=`
    @keyframes `.concat(l,` {
      `).concat(t,`
    }
  `);return I&&I.insertRule(i,0),l},No=globalThis&&globalThis.__assign||function(){return No=Object.assign||function(e){for(var t,g=1,l=arguments.length;g<l;g++){t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},No.apply(this,arguments)},EV=globalThis&&globalThis.__rest||function(e,t){var g={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(g[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(g[l[n]]=e[l[n]]);return g},zV=xV("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");function TV(e){var t=e.loading,g=t===void 0?!0:t,l=e.color,n=l===void 0?"#000000":l,I=e.speedMultiplier,i=I===void 0?1:I,o=e.cssOverride,r=o===void 0?{}:o,a=e.size,c=a===void 0?15:a,s=e.margin,d=s===void 0?2:s,A=EV(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),f=No({display:"inherit"},r),p=function(Z){return{display:"inline-block",backgroundColor:n,width:Va(c),height:Va(c),margin:Va(d),borderRadius:"100%",animation:"".concat(zV," ").concat(.7/i,"s ").concat(Z%2?"0s":"".concat(.35/i,"s")," infinite linear"),animationFillMode:"both"}};return g?k.createElement("span",No({style:f},A),k.createElement("span",{style:p(1)}),k.createElement("span",{style:p(2)}),k.createElement("span",{style:p(3)})):null}const Al=({fullScreen:e})=>C.jsx("div",{className:"loading-screen",style:e==!0?{height:"100vh"}:{},children:C.jsxs("div",{className:"loading-container",children:[C.jsx($I,{src:ec,beforeInjection:t=>{t.classList.add("loading-logo")}}),C.jsx(TV,{color:"#597393",size:60,className:"loading-loader"})]})}),MV=()=>{const e=gi(),t=_e(),g=Ut(),[l,n]=k.useState(null),I=o=>new Promise(r=>setTimeout(r,o)),i=async()=>{const{usuario:o,terms:r,consent:a,email:c,nombre:s,password:d,apellido:A}=g.state.user,f={username:o,name:s,lastname:A,email:c,password:d,mailing_status:a,terms_policies_status:r,id_plan_fk:l.id_plan,id_user_type_fk:2};try{const p=await e.createUser(f);console.log(p),await I(1e3),t("/")}catch(p){console.log(p),await I(1e3),t("/registro")}};return k.useEffect(()=>{g.state==null&&t("/login")},[]),k.useEffect(()=>{l&&l.unique_cost=="0.00"&&l.annual_cost=="0.00"&&i()},[l]),l&&l.unique_cost=="0.00"&&l.annual_cost=="0.00"?C.jsxs(C.Fragment,{children:[C.jsx(Al,{fullScreen:!0}),C.jsx(Tl,{position:"top-center",richColors:!0})]}):C.jsxs("div",{className:"plan-view",children:[C.jsx(ac,{className:"registro-back",size:33,color:"#FD6202",onClick:()=>{l==null?t("/registro"):n(null)}}),C.jsxs(ke,{children:[C.jsx(re,{}),C.jsx(re,{xs:12,sm:10,className:"plan-container",children:C.jsxs("div",{className:"plan-card-2 ",children:[l!=null&&C.jsxs("label",{className:"plan-title",children:[" ",`Elige tu mtodo de pago para el plan ${l.name_plan}:`]}),l==null&&C.jsxs(C.Fragment,{children:[C.jsx("label",{className:"plan-title",children:"Bienvenido a Know Me!"}),C.jsx("label",{className:"plan-content",children:"Por favor ayudanos a saber como nos adaptamos a ti"}),C.jsx("label",{className:"plan-subtitle",children:"Cul opcin se adapta a tus necesidades?"})]}),l==null?C.jsx(HV,{selectedPlan:l,setSelectedPlan:n}):C.jsx(NV,{selectedPlan:l})]})}),C.jsx(re,{})]}),C.jsx("div",{className:"plan-divider"})]})};function LV(e){return de({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"},child:[]}]})(e)}const rl=({src:e,color:t,size:g,name:l})=>{const n="https://t4.ftcdn.net/jpg/03/59/58/91/360_F_359589186_JDLl8dIWoBNf1iqEkHxhUeeOulx0wOC5.jpg",I={width:`${g}px`,height:`${g}px`};return C.jsx("div",{children:C.jsx("img",{src:e!=""&&e?e:n,alt:l,style:I,className:"inline-block h-6 w-6 object-cover rounded-full"})})};function UV(e){return de({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.0082 3C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM20 5H4V19H20V5ZM18 15V17H6V15H18ZM12 7V13H6V7H12ZM18 11V13H14V11H18ZM10 9H8V11H10V9ZM18 7V9H14V7H18Z"},child:[]}]})(e)}function Qb(e){return de({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11H13V13H5V16L0 12L5 8V11ZM3.99927 18H6.70835C8.11862 19.2447 9.97111 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C9.97111 4 8.11862 4.75527 6.70835 6H3.99927C5.82368 3.57111 8.72836 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C8.72836 22 5.82368 20.4289 3.99927 18Z"},child:[]}]})(e)}function QV(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 416v64M80 32h192a32 32 0 0 1 32 32v412a4 4 0 0 1-4 4H48h0V64a32 32 0 0 1 32-32zm240 160h112a32 32 0 0 1 32 32v256h0-160 0V208a16 16 0 0 1 16-16z"},child:[]},{tag:"path",attr:{d:"M98.08 431.87a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm80 240a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm80 320a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zm0-80a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79z"},child:[]},{tag:"ellipse",attr:{cx:"256",cy:"176",rx:"15.95",ry:"16.03",transform:"rotate(-45 255.99 175.996)"},child:[]},{tag:"path",attr:{d:"M258.08 111.87a16 16 0 1 1 13.79-13.79 16 16 0 0 1-13.79 13.79zM400 400a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm-64 160a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16zm0-80a16 16 0 1 0 16 16 16 16 0 0 0-16-16z"},child:[]}]})(e)}function gI(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m184 112 144 144-144 144"},child:[]}]})(e)}function pc(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}function jV(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M261.56 101.28a8 8 0 0 0-11.06 0L66.4 277.15a8 8 0 0 0-2.47 5.79L63.9 448a32 32 0 0 0 32 32H192a16 16 0 0 0 16-16V328a8 8 0 0 1 8-8h80a8 8 0 0 1 8 8v136a16 16 0 0 0 16 16h96.06a32 32 0 0 0 32-32V282.94a8 8 0 0 0-2.47-5.79z"},child:[]},{tag:"path",attr:{d:"m490.91 244.15-74.8-71.56V64a16 16 0 0 0-16-16h-48a16 16 0 0 0-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0 0 43 267.56L250.5 69.28a8 8 0 0 1 11.06 0l207.52 198.28a16 16 0 0 0 22.59-.44c6.14-6.36 5.63-16.86-.76-22.97z"},child:[]}]})(e)}function DV(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"80",height:"80",x:"336",y:"336",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"64",height:"64",x:"272",y:"272",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"64",height:"64",x:"416",y:"416",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"48",x:"432",y:"272",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"48",x:"272",y:"432",rx:"8",ry:"8"},child:[]},{tag:"path",attr:{d:"M448 32H304a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8zM208 32H64a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8zm32 104H64a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V304a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8z"},child:[]}]})(e)}function OV(e){return de({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z",clipRule:"evenodd"},child:[]}]})(e)}function PV(e){return de({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M12,9 L12,0 M15,12 L24,12 M0,12 L9,12 M12,24 L12,15 M12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 Z M3.5,8.5 L1,7.5 M20.5,15.5 L23,16.5 M3,3 L5.5,5.5 M3,3 L5.5,5.5 M18,18 L20.5,20.5 M20.5,3 L18,5.5 M5.5,18 L3,20.5 M12,15 C13.6568542,15 15,13.6568542 15,12 C15,10.3431458 13.6568542,9 12,9 C10.3431458,9 9,10.3431458 9,12 C9,13.6568542 10.3431458,15 12,15 Z M20.5,8.5 L23,7.5 M15.5,3.5 L16.5,1 M15.5,20.5 L16.5,23 M8.5,20.5 L7.5,23 M3.5,15.5 L1,16.5 M8.5,3.5 L7.5,1"},child:[]}]})(e)}const bl=16,_V=[{option:"Home",icon:C.jsx(Mv,{size:bl}),url:"/home/"},{option:"Tarjetas",icon:C.jsx(OV,{size:bl}),url:"/share/"},{option:"Business",icon:C.jsx(QV,{size:bl}),url:"/business/"},{option:"Contactos",icon:C.jsx(gb,{size:bl}),url:"/contacts/"},{option:"Perfil",icon:C.jsx(UV,{size:bl}),url:"/perfil/"},{option:"Ajustes",icon:C.jsx(PV,{style:{rotate:"45deg"},size:bl}),url:"/settings/"},{option:"Cerrar Sesin",icon:C.jsx(Qb,{size:bl}),url:"/"}];const Dt=()=>{const e=_e();k.useContext(Qt);const t=()=>{localStorage.removeItem("token"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),localStorage.removeItem("id_plan"),e("/login")};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"sidebar",children:[C.jsx("div",{className:"flex justify-center items-center w-96 pt-10",onClick:()=>e("/home"),children:localStorage.getItem("id_plan")=="9"?C.jsx("button",{type:"button",className:"btn bg-gradient-to-r from-pink-500 to-yellow-500 hover:text-slate-100 text-slate-200 subpixel-antialiased",children:"YA ERES BUSINESS"}):C.jsx("button",{type:"button",className:"btn bg-gradient-to-r from-green-400 to-blue-500 hover:from-pink-500 hover:to-yellow-500 text-slate-100 hover:text-slate-200 subpixel-antialiased",children:"UPGRADE"})}),C.jsx("div",{className:"flex flex-col w-96 cursor-pointer",children:C.jsx(TI.Provider,{value:{color:"#FFF"},children:_V.map(g=>g.option==="Business"&&localStorage.getItem("id_plan")!=="9"?null:C.jsxs("div",{className:"flex justify-start text-white p-2 hover:bg-orange-500 space-x-4 items-center hover:rounded-md",onClick:g.option==="Cerrar Sesin"?t:()=>{e(g.url)},children:[g.icon,C.jsx(Uh,{children:g.option})]},g.option))})}),C.jsx("div",{className:"knowme-logo",onClick:()=>e("/home"),children:C.jsx($I,{src:ec,beforeInjection:g=>{g.classList.add("bottom-logo")}})})]})})};const jb=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#eeeeee","#795548","#607d8b"],qV=({setShowCustomButton:e,setCustomButtonParams:t,customButtonParams:g})=>{const[l,n]=k.useState(g.color),{formState:I,onInputChange:i,onResetForm:o,onCheckBoxChange:r}=Fn({...g}),a=()=>{t({...I,color:l}),e(!1)};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"profile-custom-button",children:[C.jsx("div",{className:"profile-x",onClick:()=>{e(!1)},children:C.jsx(pc,{size:24})}),C.jsx("h5",{children:"Personaliza tu enlace y color del botn:"}),C.jsxs("div",{className:"profile-site",children:[C.jsx(Lv,{size:24,color:"#858585"}),C.jsx("input",{type:"url",className:"profile-site-input",placeholder:I.url,value:I.url,name:"url",onChange:i})]}),C.jsxs("div",{className:"profile-site",children:[C.jsx(LV,{size:24,color:"#858585"}),C.jsx("input",{type:"text",className:"profile-site-input",placeholder:I.text,value:I.text,name:"text",onChange:i})]}),C.jsx("h6",{children:"Elige un color:"}),C.jsx("div",{className:"paleta-color",children:C.jsx(ke,{children:jb.map(c=>C.jsx(re,{xs:4,md:2,className:"color-option",children:C.jsx("div",{style:{backgroundColor:c,borderColor:l==c?"black":"gray"},onClick:()=>{n(c)}})},c))})}),C.jsx("div",{className:"profile-boton",children:C.jsx(et,{variant:"outline-primary",children:"Ej. CONCENOS"})}),C.jsx("div",{className:"profile-guardar",children:C.jsx(et,{variant:"primary",size:"lg",onClick:a,children:"Guardar"})}),C.jsx("style",{children:`
          .profile-boton button{
            border-color: ${l};
            color: ${l};
          }
          .profile-boton button:hover, .profile-boton button:active{
            background-color: ${l}!important;
            border-color: ${l}!important;
          }
          `})]})})};const Wu={Lunes:!1,LunesSt:"08:00",LunesEnd:"17:00",Martes:!1,MartesSt:"08:00",MartesEnd:"17:00",Mircoles:!1,MircolesSt:"08:00",MircolesEnd:"17:00",Jueves:!1,JuevesSt:"08:00",JuevesEnd:"17:00",Viernes:!1,ViernesSt:"08:00",ViernesEnd:"17:00",Sbado:!1,SbadoSt:"08:00",SbadoEnd:"17:00",Domingo:!1,DomingoSt:"08:00",DomingoEnd:"17:00"},yI=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"];function $V({setShowCustomButtonHour:e,setSchedule:t,schedule:g}){const{formState:l,onInputChange:n,onCheckBoxChange:I}=Fn(g),[i,o]=k.useState("LunesViernes"),r=()=>{const c={...l};i=="LunesViernes"?yI.forEach(s=>{s=="Sbado"||s=="Domingo"?c[s]=!1:c[s]=!0}):i=="FinesSemana"&&yI.forEach(s=>{s!="Sbado"&&s!="Domingo"?c[s]=!1:c[s]=!0}),e(!1),t(c)},a=()=>i==="LunesViernes"||i==="FinesSemana"?C.jsxs(C.Fragment,{children:[C.jsx("label",{children:"Desde:"}),C.jsx("input",{value:l.LunesSt,name:"LunesSt",onChange:n,type:"time",className:"select-hour-input day-container-hour"}),C.jsx("label",{children:"Hasta:"}),C.jsx("input",{value:l.LunesEnd,name:"LunesEnd",onChange:n,type:"time",className:"select-hour-input day-container-hour"})]}):i==="Personalizado"?yI.map(c=>C.jsxs("div",{className:"day-container-hour",children:[C.jsx("label",{children:c}),C.jsxs(ke,{className:"custom-hour-grid",children:[C.jsx(re,{children:C.jsx("input",{name:`${c}St`,value:l[`${c}St`],onChange:n,type:"time",className:"input-hour-custom select-hour-input"})}),C.jsx(re,{children:C.jsx("input",{name:`${c}End`,value:l[`${c}End`],onChange:n,type:"time",className:"input-hour-custom select-hour-input"})}),C.jsx("input",{name:c,checked:l[c],onChange:I,type:"checkbox",id:`${c}-disponible`})]})]},c)):null;return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"profile-custom-button",children:[C.jsx("div",{className:"profile-x",onClick:()=>{e(!1)},children:C.jsx(pc,{size:24})}),C.jsx("h5",{children:"Horarios de atencin:"}),C.jsx("p",{children:"En qu horarios te pueden encontrar tus clientes"}),C.jsxs("div",{className:"hour-select-container",children:[C.jsx("label",{children:"Selecciona un horario:"}),C.jsxs("select",{value:i,onChange:c=>o(c.target.value),className:"select-hour-input",children:[C.jsx("option",{value:"LunesViernes",children:"Lunes a Viernes"}),C.jsx("option",{value:"FinesSemana",children:"Fines de Semana"}),C.jsx("option",{value:"Personalizado",children:"Personalizado"})]})]}),C.jsx("div",{className:"custom-inputs-container",children:a()}),C.jsx("div",{className:"schedule-guardar",children:C.jsx(et,{variant:"primary",size:"lg",onClick:r,children:"Guardar"})})]})})}const eW=()=>(k.useState([{coordenadas:[21.88695915277653,-102.29242038583625],popUp:"Zaragoza"},{coordenadas:[21.924763219343827,-102.30465885000585],popUp:"Colosio"},{coordenadas:[21.89441976335907,-102.29520312269968],popUp:"Av. Independencia"},{coordenadas:[21.867415207362505,-102.30284329073551],popUp:"Av Amricas"},{coordenadas:[21.922800254618185,-102.29173215978628],popUp:"Blvd Zacatecas"}]),C.jsx(C.Fragment,{children:C.jsx("div",{className:"profile-map-modal",children:C.jsx("h1",{children:"EN DESARROLLO..."})})}));const tW=({setShowColorPallete:e,setCustomBannerColor:t,customBannerColor:g})=>{const[l,n]=k.useState(g),I=()=>{e(!1)},i=()=>{t(l),e(!1)};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"color-pallete",children:[C.jsx("div",{className:"profile-x",onClick:i,children:C.jsx(pc,{size:24})}),C.jsx("div",{className:"paleta-color",children:C.jsx(ke,{children:jb.map(o=>C.jsx(re,{xs:4,md:2,className:"color-option",children:C.jsx("div",{style:{backgroundColor:o,borderColor:g==o?"black":"gray"},onClick:()=>{t(o)}})},o))})}),C.jsx("div",{className:"pallete-guardar",children:C.jsx(et,{variant:"primary",size:"lg",onClick:I,children:"Guardar"})})]})})};function Db(e){return de({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(e)}const Ob=({handleClick:e,placeText:t})=>{const{formState:g,onInputChange:l}=Fn({url:""});return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"input-modal",children:[C.jsx("div",{children:C.jsx("input",{type:"text",placeholder:t,onChange:l,name:"url"})}),C.jsx("div",{children:C.jsx(et,{variant:"primary",onClick:()=>{e(g)},children:"Guardar"})})]})})},gW=({activeRedOrigin:e,showInputModal:t,setShowInputModal:g,setActiveRedOrigin:l,setSocialMedia:n})=>{const[I,i]=k.useState(""),[o,r]=k.useState({...e}),a=(d,A)=>{r({...o,[d]:A.url})},c=d=>{o[d]==""?(i(d),g(!0)):a(d,{url:""})},s=()=>{l(o),n(!1)};return C.jsxs(C.Fragment,{children:[t&&C.jsx(Ob,{placeText:"url de la red...",handleClick:d=>{a(I,d),g(!1)}}),C.jsxs("div",{className:"perfil-redes-sociales",children:[C.jsx(Fv,{color:"white",size:28,className:"svg-social",onClick:()=>{n(!1)}}),C.jsxs(ke,{className:"perfil-redes",children:[C.jsx(re,{children:C.jsxs("div",{className:"perfil-red",children:[C.jsx(nb,{onClick:()=>{c("instagram_url")},className:`${o.instagram_url!=""?"active":""}`}),o.instagram_url&&C.jsx("div",{className:"perfil-check",children:C.jsx(jl,{size:15,color:"white"})})]})}),C.jsx(re,{children:C.jsxs("div",{className:"perfil-red",children:[C.jsx(oc,{onClick:()=>{c("facebook_url")},className:`${o.facebook_url!=""?"active":""}`}),o.facebook_url&&C.jsx("div",{className:"perfil-check",children:C.jsx(jl,{size:15,color:"white"})})]})}),C.jsx(re,{children:C.jsxs("div",{className:"perfil-red",children:[C.jsx(rc,{onClick:()=>{c("linkedin_url")},className:`${o.linkedin_url!=""?"active":""}`}),o.linkedin_url&&C.jsx("div",{className:"perfil-check",children:C.jsx(jl,{size:15,color:"white"})})]})})]}),C.jsxs(ke,{className:"perfil-redes",children:[C.jsx(re,{children:C.jsxs("div",{className:"perfil-red",children:[C.jsx(lb,{onClick:()=>{c("google_url")},className:`${o.google_url!=""?"active":""}`}),o.google_url&&C.jsx("div",{className:"perfil-check",children:C.jsx(jl,{size:15,color:"white"})})]})}),C.jsx(re,{children:C.jsxs("div",{className:"perfil-red",children:[C.jsx(Ib,{onClick:()=>{c("pinterest_url")},className:`${o.pinterest_url!=""?"active":""}`}),o.pinterest_url&&C.jsx("div",{className:"perfil-check",children:C.jsx(jl,{size:15,color:"white"})})]})}),C.jsx(re,{children:C.jsxs("div",{className:"perfil-red",children:[C.jsx(Db,{onClick:()=>{c("twitter_url")},className:`${o.twitter_url!=""?"active":""}`}),o.twitter_url&&C.jsx("div",{className:"perfil-check",children:C.jsx(jl,{size:15,color:"white"})})]})})]}),C.jsx("div",{className:"social-media-guardar",children:C.jsx(et,{variant:"primary",size:"lg",onClick:s,children:"Guardar"})})]})]})},fc=e=>({facebook_url:C.jsx(oc,{onClick:()=>{Ol(e.facebook_url)}},"facebook"),google_url:C.jsx(lb,{onClick:()=>{Ol(e.google_url)}},"google"),instagram_url:C.jsx(nb,{onClick:()=>{Ol(e.instagram_url)}},"instagram"),linkedin_url:C.jsx(rc,{onClick:()=>{Ol(e.linkedin_url)}},"linkedin"),pinterest_url:C.jsx(Ib,{onClick:()=>{Ol(e.pinterest_url)}},"pinterest"),twitter_url:C.jsx(Db,{onClick:()=>{Ol(e.twitter_url)}},"twitter")}),Ol=e=>{window.open(e,"_blank","noreferrer")};function lW(){this.__data__=[],this.size=0}var nW=lW;function IW(e,t){return e===t||e!==e&&t!==t}var Pb=IW,iW=Pb;function oW(e,t){for(var g=e.length;g--;)if(iW(e[g][0],t))return g;return-1}var br=oW,rW=br,aW=Array.prototype,CW=aW.splice;function sW(e){var t=this.__data__,g=rW(t,e);if(g<0)return!1;var l=t.length-1;return g==l?t.pop():CW.call(t,g,1),--this.size,!0}var cW=sW,dW=br;function uW(e){var t=this.__data__,g=dW(t,e);return g<0?void 0:t[g][1]}var AW=uW,mW=br;function hW(e){return mW(this.__data__,e)>-1}var bW=hW,pW=br;function fW(e,t){var g=this.__data__,l=pW(g,e);return l<0?(++this.size,g.push([e,t])):g[l][1]=t,this}var ZW=fW,yW=nW,GW=cW,BW=AW,vW=bW,SW=ZW;function En(e){var t=-1,g=e==null?0:e.length;for(this.clear();++t<g;){var l=e[t];this.set(l[0],l[1])}}En.prototype.clear=yW;En.prototype.delete=GW;En.prototype.get=BW;En.prototype.has=vW;En.prototype.set=SW;var pr=En,VW=pr;function WW(){this.__data__=new VW,this.size=0}var RW=WW;function XW(e){var t=this.__data__,g=t.delete(e);return this.size=t.size,g}var kW=XW;function JW(e){return this.__data__.get(e)}var YW=JW;function wW(e){return this.__data__.has(e)}var HW=wW,NW=typeof Ee=="object"&&Ee&&Ee.Object===Object&&Ee,_b=NW,FW=_b,KW=typeof self=="object"&&self&&self.Object===Object&&self,xW=FW||KW||Function("return this")(),Ng=xW,EW=Ng,zW=EW.Symbol,Zc=zW,Ru=Zc,qb=Object.prototype,TW=qb.hasOwnProperty,MW=qb.toString,lI=Ru?Ru.toStringTag:void 0;function LW(e){var t=TW.call(e,lI),g=e[lI];try{e[lI]=void 0;var l=!0}catch{}var n=MW.call(e);return l&&(t?e[lI]=g:delete e[lI]),n}var UW=LW,QW=Object.prototype,jW=QW.toString;function DW(e){return jW.call(e)}var OW=DW,Xu=Zc,PW=UW,_W=OW,qW="[object Null]",$W="[object Undefined]",ku=Xu?Xu.toStringTag:void 0;function eR(e){return e==null?e===void 0?$W:qW:ku&&ku in Object(e)?PW(e):_W(e)}var fr=eR;function tR(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $b=tR,gR=fr,lR=$b,nR="[object AsyncFunction]",IR="[object Function]",iR="[object GeneratorFunction]",oR="[object Proxy]";function rR(e){if(!lR(e))return!1;var t=gR(e);return t==IR||t==iR||t==nR||t==oR}var ep=rR,aR=Ng,CR=aR["__core-js_shared__"],sR=CR,Wa=sR,Ju=function(){var e=/[^.]+$/.exec(Wa&&Wa.keys&&Wa.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function cR(e){return!!Ju&&Ju in e}var dR=cR,uR=Function.prototype,AR=uR.toString;function mR(e){if(e!=null){try{return AR.call(e)}catch{}try{return e+""}catch{}}return""}var tp=mR,hR=ep,bR=dR,pR=$b,fR=tp,ZR=/[\\^$.*+?()[\]{}|]/g,yR=/^\[object .+?Constructor\]$/,GR=Function.prototype,BR=Object.prototype,vR=GR.toString,SR=BR.hasOwnProperty,VR=RegExp("^"+vR.call(SR).replace(ZR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WR(e){if(!pR(e)||bR(e))return!1;var t=hR(e)?VR:yR;return t.test(fR(e))}var RR=WR;function XR(e,t){return e==null?void 0:e[t]}var kR=XR,JR=RR,YR=kR;function wR(e,t){var g=YR(e,t);return JR(g)?g:void 0}var zn=wR,HR=zn,NR=Ng,FR=HR(NR,"Map"),yc=FR,KR=zn,xR=KR(Object,"create"),Zr=xR,Yu=Zr;function ER(){this.__data__=Yu?Yu(null):{},this.size=0}var zR=ER;function TR(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var MR=TR,LR=Zr,UR="__lodash_hash_undefined__",QR=Object.prototype,jR=QR.hasOwnProperty;function DR(e){var t=this.__data__;if(LR){var g=t[e];return g===UR?void 0:g}return jR.call(t,e)?t[e]:void 0}var OR=DR,PR=Zr,_R=Object.prototype,qR=_R.hasOwnProperty;function $R(e){var t=this.__data__;return PR?t[e]!==void 0:qR.call(t,e)}var eX=$R,tX=Zr,gX="__lodash_hash_undefined__";function lX(e,t){var g=this.__data__;return this.size+=this.has(e)?0:1,g[e]=tX&&t===void 0?gX:t,this}var nX=lX,IX=zR,iX=MR,oX=OR,rX=eX,aX=nX;function Tn(e){var t=-1,g=e==null?0:e.length;for(this.clear();++t<g;){var l=e[t];this.set(l[0],l[1])}}Tn.prototype.clear=IX;Tn.prototype.delete=iX;Tn.prototype.get=oX;Tn.prototype.has=rX;Tn.prototype.set=aX;var CX=Tn,wu=CX,sX=pr,cX=yc;function dX(){this.size=0,this.__data__={hash:new wu,map:new(cX||sX),string:new wu}}var uX=dX;function AX(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var mX=AX,hX=mX;function bX(e,t){var g=e.__data__;return hX(t)?g[typeof t=="string"?"string":"hash"]:g.map}var yr=bX,pX=yr;function fX(e){var t=pX(this,e).delete(e);return this.size-=t?1:0,t}var ZX=fX,yX=yr;function GX(e){return yX(this,e).get(e)}var BX=GX,vX=yr;function SX(e){return vX(this,e).has(e)}var VX=SX,WX=yr;function RX(e,t){var g=WX(this,e),l=g.size;return g.set(e,t),this.size+=g.size==l?0:1,this}var XX=RX,kX=uX,JX=ZX,YX=BX,wX=VX,HX=XX;function Mn(e){var t=-1,g=e==null?0:e.length;for(this.clear();++t<g;){var l=e[t];this.set(l[0],l[1])}}Mn.prototype.clear=kX;Mn.prototype.delete=JX;Mn.prototype.get=YX;Mn.prototype.has=wX;Mn.prototype.set=HX;var gp=Mn,NX=pr,FX=yc,KX=gp,xX=200;function EX(e,t){var g=this.__data__;if(g instanceof NX){var l=g.__data__;if(!FX||l.length<xX-1)return l.push([e,t]),this.size=++g.size,this;g=this.__data__=new KX(l)}return g.set(e,t),this.size=g.size,this}var zX=EX,TX=pr,MX=RW,LX=kW,UX=YW,QX=HW,jX=zX;function Ln(e){var t=this.__data__=new TX(e);this.size=t.size}Ln.prototype.clear=MX;Ln.prototype.delete=LX;Ln.prototype.get=UX;Ln.prototype.has=QX;Ln.prototype.set=jX;var DX=Ln,OX="__lodash_hash_undefined__";function PX(e){return this.__data__.set(e,OX),this}var _X=PX;function qX(e){return this.__data__.has(e)}var $X=qX,ek=gp,tk=_X,gk=$X;function Fo(e){var t=-1,g=e==null?0:e.length;for(this.__data__=new ek;++t<g;)this.add(e[t])}Fo.prototype.add=Fo.prototype.push=tk;Fo.prototype.has=gk;var lk=Fo;function nk(e,t){for(var g=-1,l=e==null?0:e.length;++g<l;)if(t(e[g],g,e))return!0;return!1}var Ik=nk;function ik(e,t){return e.has(t)}var ok=ik,rk=lk,ak=Ik,Ck=ok,sk=1,ck=2;function dk(e,t,g,l,n,I){var i=g&sk,o=e.length,r=t.length;if(o!=r&&!(i&&r>o))return!1;var a=I.get(e),c=I.get(t);if(a&&c)return a==t&&c==e;var s=-1,d=!0,A=g&ck?new rk:void 0;for(I.set(e,t),I.set(t,e);++s<o;){var f=e[s],p=t[s];if(l)var Z=i?l(p,f,s,t,e,I):l(f,p,s,e,t,I);if(Z!==void 0){if(Z)continue;d=!1;break}if(A){if(!ak(t,function(m,u){if(!Ck(A,u)&&(f===m||n(f,m,g,l,I)))return A.push(u)})){d=!1;break}}else if(!(f===p||n(f,p,g,l,I))){d=!1;break}}return I.delete(e),I.delete(t),d}var lp=dk,uk=Ng,Ak=uk.Uint8Array,mk=Ak;function hk(e){var t=-1,g=Array(e.size);return e.forEach(function(l,n){g[++t]=[n,l]}),g}var bk=hk;function pk(e){var t=-1,g=Array(e.size);return e.forEach(function(l){g[++t]=l}),g}var fk=pk,Hu=Zc,Nu=mk,Zk=Pb,yk=lp,Gk=bk,Bk=fk,vk=1,Sk=2,Vk="[object Boolean]",Wk="[object Date]",Rk="[object Error]",Xk="[object Map]",kk="[object Number]",Jk="[object RegExp]",Yk="[object Set]",wk="[object String]",Hk="[object Symbol]",Nk="[object ArrayBuffer]",Fk="[object DataView]",Fu=Hu?Hu.prototype:void 0,Ra=Fu?Fu.valueOf:void 0;function Kk(e,t,g,l,n,I,i){switch(g){case Fk:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Nk:return!(e.byteLength!=t.byteLength||!I(new Nu(e),new Nu(t)));case Vk:case Wk:case kk:return Zk(+e,+t);case Rk:return e.name==t.name&&e.message==t.message;case Jk:case wk:return e==t+"";case Xk:var o=Gk;case Yk:var r=l&vk;if(o||(o=Bk),e.size!=t.size&&!r)return!1;var a=i.get(e);if(a)return a==t;l|=Sk,i.set(e,t);var c=yk(o(e),o(t),l,n,I,i);return i.delete(e),c;case Hk:if(Ra)return Ra.call(e)==Ra.call(t)}return!1}var xk=Kk;function Ek(e,t){for(var g=-1,l=t.length,n=e.length;++g<l;)e[n+g]=t[g];return e}var zk=Ek,Tk=Array.isArray,Gc=Tk,Mk=zk,Lk=Gc;function Uk(e,t,g){var l=t(e);return Lk(e)?l:Mk(l,g(e))}var Qk=Uk;function jk(e,t){for(var g=-1,l=e==null?0:e.length,n=0,I=[];++g<l;){var i=e[g];t(i,g,e)&&(I[n++]=i)}return I}var Dk=jk;function Ok(){return[]}var Pk=Ok,_k=Dk,qk=Pk,$k=Object.prototype,eJ=$k.propertyIsEnumerable,Ku=Object.getOwnPropertySymbols,tJ=Ku?function(e){return e==null?[]:(e=Object(e),_k(Ku(e),function(t){return eJ.call(e,t)}))}:qk,gJ=tJ;function lJ(e,t){for(var g=-1,l=Array(e);++g<e;)l[g]=t(g);return l}var nJ=lJ;function IJ(e){return e!=null&&typeof e=="object"}var Gr=IJ,iJ=fr,oJ=Gr,rJ="[object Arguments]";function aJ(e){return oJ(e)&&iJ(e)==rJ}var CJ=aJ,xu=CJ,sJ=Gr,np=Object.prototype,cJ=np.hasOwnProperty,dJ=np.propertyIsEnumerable,uJ=xu(function(){return arguments}())?xu:function(e){return sJ(e)&&cJ.call(e,"callee")&&!dJ.call(e,"callee")},AJ=uJ,Ko={exports:{}};function mJ(){return!1}var hJ=mJ;Ko.exports;(function(e,t){var g=Ng,l=hJ,n=t&&!t.nodeType&&t,I=n&&!0&&e&&!e.nodeType&&e,i=I&&I.exports===n,o=i?g.Buffer:void 0,r=o?o.isBuffer:void 0,a=r||l;e.exports=a})(Ko,Ko.exports);var Ip=Ko.exports,bJ=9007199254740991,pJ=/^(?:0|[1-9]\d*)$/;function fJ(e,t){var g=typeof e;return t=t??bJ,!!t&&(g=="number"||g!="symbol"&&pJ.test(e))&&e>-1&&e%1==0&&e<t}var ZJ=fJ,yJ=9007199254740991;function GJ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yJ}var ip=GJ,BJ=fr,vJ=ip,SJ=Gr,VJ="[object Arguments]",WJ="[object Array]",RJ="[object Boolean]",XJ="[object Date]",kJ="[object Error]",JJ="[object Function]",YJ="[object Map]",wJ="[object Number]",HJ="[object Object]",NJ="[object RegExp]",FJ="[object Set]",KJ="[object String]",xJ="[object WeakMap]",EJ="[object ArrayBuffer]",zJ="[object DataView]",TJ="[object Float32Array]",MJ="[object Float64Array]",LJ="[object Int8Array]",UJ="[object Int16Array]",QJ="[object Int32Array]",jJ="[object Uint8Array]",DJ="[object Uint8ClampedArray]",OJ="[object Uint16Array]",PJ="[object Uint32Array]",He={};He[TJ]=He[MJ]=He[LJ]=He[UJ]=He[QJ]=He[jJ]=He[DJ]=He[OJ]=He[PJ]=!0;He[VJ]=He[WJ]=He[EJ]=He[RJ]=He[zJ]=He[XJ]=He[kJ]=He[JJ]=He[YJ]=He[wJ]=He[HJ]=He[NJ]=He[FJ]=He[KJ]=He[xJ]=!1;function _J(e){return SJ(e)&&vJ(e.length)&&!!He[BJ(e)]}var qJ=_J;function $J(e){return function(t){return e(t)}}var e5=$J,xo={exports:{}};xo.exports;(function(e,t){var g=_b,l=t&&!t.nodeType&&t,n=l&&!0&&e&&!e.nodeType&&e,I=n&&n.exports===l,i=I&&g.process,o=function(){try{var r=n&&n.require&&n.require("util").types;return r||i&&i.binding&&i.binding("util")}catch{}}();e.exports=o})(xo,xo.exports);var t5=xo.exports,g5=qJ,l5=e5,Eu=t5,zu=Eu&&Eu.isTypedArray,n5=zu?l5(zu):g5,op=n5,I5=nJ,i5=AJ,o5=Gc,r5=Ip,a5=ZJ,C5=op,s5=Object.prototype,c5=s5.hasOwnProperty;function d5(e,t){var g=o5(e),l=!g&&i5(e),n=!g&&!l&&r5(e),I=!g&&!l&&!n&&C5(e),i=g||l||n||I,o=i?I5(e.length,String):[],r=o.length;for(var a in e)(t||c5.call(e,a))&&!(i&&(a=="length"||n&&(a=="offset"||a=="parent")||I&&(a=="buffer"||a=="byteLength"||a=="byteOffset")||a5(a,r)))&&o.push(a);return o}var u5=d5,A5=Object.prototype;function m5(e){var t=e&&e.constructor,g=typeof t=="function"&&t.prototype||A5;return e===g}var h5=m5;function b5(e,t){return function(g){return e(t(g))}}var p5=b5,f5=p5,Z5=f5(Object.keys,Object),y5=Z5,G5=h5,B5=y5,v5=Object.prototype,S5=v5.hasOwnProperty;function V5(e){if(!G5(e))return B5(e);var t=[];for(var g in Object(e))S5.call(e,g)&&g!="constructor"&&t.push(g);return t}var W5=V5,R5=ep,X5=ip;function k5(e){return e!=null&&X5(e.length)&&!R5(e)}var J5=k5,Y5=u5,w5=W5,H5=J5;function N5(e){return H5(e)?Y5(e):w5(e)}var F5=N5,K5=Qk,x5=gJ,E5=F5;function z5(e){return K5(e,E5,x5)}var T5=z5,Tu=T5,M5=1,L5=Object.prototype,U5=L5.hasOwnProperty;function Q5(e,t,g,l,n,I){var i=g&M5,o=Tu(e),r=o.length,a=Tu(t),c=a.length;if(r!=c&&!i)return!1;for(var s=r;s--;){var d=o[s];if(!(i?d in t:U5.call(t,d)))return!1}var A=I.get(e),f=I.get(t);if(A&&f)return A==t&&f==e;var p=!0;I.set(e,t),I.set(t,e);for(var Z=i;++s<r;){d=o[s];var m=e[d],u=t[d];if(l)var h=i?l(u,m,d,t,e,I):l(m,u,d,e,t,I);if(!(h===void 0?m===u||n(m,u,g,l,I):h)){p=!1;break}Z||(Z=d=="constructor")}if(p&&!Z){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof y=="function"&&y instanceof y)&&(p=!1)}return I.delete(e),I.delete(t),p}var j5=Q5,D5=zn,O5=Ng,P5=D5(O5,"DataView"),_5=P5,q5=zn,$5=Ng,eY=q5($5,"Promise"),tY=eY,gY=zn,lY=Ng,nY=gY(lY,"Set"),IY=nY,iY=zn,oY=Ng,rY=iY(oY,"WeakMap"),aY=rY,QC=_5,jC=yc,DC=tY,OC=IY,PC=aY,rp=fr,Un=tp,Mu="[object Map]",CY="[object Object]",Lu="[object Promise]",Uu="[object Set]",Qu="[object WeakMap]",ju="[object DataView]",sY=Un(QC),cY=Un(jC),dY=Un(DC),uY=Un(OC),AY=Un(PC),Bl=rp;(QC&&Bl(new QC(new ArrayBuffer(1)))!=ju||jC&&Bl(new jC)!=Mu||DC&&Bl(DC.resolve())!=Lu||OC&&Bl(new OC)!=Uu||PC&&Bl(new PC)!=Qu)&&(Bl=function(e){var t=rp(e),g=t==CY?e.constructor:void 0,l=g?Un(g):"";if(l)switch(l){case sY:return ju;case cY:return Mu;case dY:return Lu;case uY:return Uu;case AY:return Qu}return t});var mY=Bl,Xa=DX,hY=lp,bY=xk,pY=j5,Du=mY,Ou=Gc,Pu=Ip,fY=op,ZY=1,_u="[object Arguments]",qu="[object Array]",Wi="[object Object]",yY=Object.prototype,$u=yY.hasOwnProperty;function GY(e,t,g,l,n,I){var i=Ou(e),o=Ou(t),r=i?qu:Du(e),a=o?qu:Du(t);r=r==_u?Wi:r,a=a==_u?Wi:a;var c=r==Wi,s=a==Wi,d=r==a;if(d&&Pu(e)){if(!Pu(t))return!1;i=!0,c=!1}if(d&&!c)return I||(I=new Xa),i||fY(e)?hY(e,t,g,l,n,I):bY(e,t,r,g,l,n,I);if(!(g&ZY)){var A=c&&$u.call(e,"__wrapped__"),f=s&&$u.call(t,"__wrapped__");if(A||f){var p=A?e.value():e,Z=f?t.value():t;return I||(I=new Xa),n(p,Z,g,l,I)}}return d?(I||(I=new Xa),pY(e,t,g,l,n,I)):!1}var BY=GY,vY=BY,eA=Gr;function ap(e,t,g,l,n){return e===t?!0:e==null||t==null||!eA(e)&&!eA(t)?e!==e&&t!==t:vY(e,t,g,l,ap,n)}var SY=ap,VY=SY;function WY(e,t){return VY(e,t)}var RY=WY,Cp={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(l,n){e.exports=n()})(typeof self<"u"?self:Ee,function(){return function(g){var l={};function n(I){if(l[I])return l[I].exports;var i=l[I]={i:I,l:!1,exports:{}};return g[I].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=g,n.c=l,n.d=function(I,i,o){n.o(I,i)||Object.defineProperty(I,i,{configurable:!1,enumerable:!0,get:o})},n.n=function(I){var i=I&&I.__esModule?function(){return I.default}:function(){return I};return n.d(i,"a",i),i},n.o=function(I,i){return Object.prototype.hasOwnProperty.call(I,i)},n.p="",n(n.s=109)}([function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(17),i=n(18),o=n(19),r=n(45),a=n(46),c=n(47),s=n(48),d=n(49),A=n(12),f=n(32),p=n(33),Z=n(31),m=n(1),u={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:I.default,Format:i.default,Leaf:o.default,Embed:s.default,Scroll:r.default,Block:c.default,Inline:a.default,Text:d.default,Attributor:{Attribute:A.default,Class:f.default,Style:p.default,Store:Z.default}};l.default=u},function(g,l,n){var I=this&&this.__extends||function(){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var h in u)u.hasOwnProperty(h)&&(m[h]=u[h])};return function(m,u){Z(m,u);function h(){this.constructor=m}m.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=function(Z){I(m,Z);function m(u){var h=this;return u="[Parchment] "+u,h=Z.call(this,u)||this,h.message=u,h.name=h.constructor.name,h}return m}(Error);l.ParchmentError=i;var o={},r={},a={},c={};l.DATA_KEY="__blot";var s;(function(Z){Z[Z.TYPE=3]="TYPE",Z[Z.LEVEL=12]="LEVEL",Z[Z.ATTRIBUTE=13]="ATTRIBUTE",Z[Z.BLOT=14]="BLOT",Z[Z.INLINE=7]="INLINE",Z[Z.BLOCK=11]="BLOCK",Z[Z.BLOCK_BLOT=10]="BLOCK_BLOT",Z[Z.INLINE_BLOT=6]="INLINE_BLOT",Z[Z.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",Z[Z.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",Z[Z.ANY=15]="ANY"})(s=l.Scope||(l.Scope={}));function d(Z,m){var u=f(Z);if(u==null)throw new i("Unable to create "+Z+" blot");var h=u,b=Z instanceof Node||Z.nodeType===Node.TEXT_NODE?Z:h.create(m);return new h(b,m)}l.create=d;function A(Z,m){return m===void 0&&(m=!1),Z==null?null:Z[l.DATA_KEY]!=null?Z[l.DATA_KEY].blot:m?A(Z.parentNode,m):null}l.find=A;function f(Z,m){m===void 0&&(m=s.ANY);var u;if(typeof Z=="string")u=c[Z]||o[Z];else if(Z instanceof Text||Z.nodeType===Node.TEXT_NODE)u=c.text;else if(typeof Z=="number")Z&s.LEVEL&s.BLOCK?u=c.block:Z&s.LEVEL&s.INLINE&&(u=c.inline);else if(Z instanceof HTMLElement){var h=(Z.getAttribute("class")||"").split(/\s+/);for(var b in h)if(u=r[h[b]],u)break;u=u||a[Z.tagName]}return u==null?null:m&s.LEVEL&u.scope&&m&s.TYPE&u.scope?u:null}l.query=f;function p(){for(var Z=[],m=0;m<arguments.length;m++)Z[m]=arguments[m];if(Z.length>1)return Z.map(function(b){return p(b)});var u=Z[0];if(typeof u.blotName!="string"&&typeof u.attrName!="string")throw new i("Invalid definition");if(u.blotName==="abstract")throw new i("Cannot register abstract class");if(c[u.blotName||u.attrName]=u,typeof u.keyName=="string")o[u.keyName]=u;else if(u.className!=null&&(r[u.className]=u),u.tagName!=null){Array.isArray(u.tagName)?u.tagName=u.tagName.map(function(b){return b.toUpperCase()}):u.tagName=u.tagName.toUpperCase();var h=Array.isArray(u.tagName)?u.tagName:[u.tagName];h.forEach(function(b){(a[b]==null||u.className==null)&&(a[b]=u)})}return u}l.register=p},function(g,l,n){var I=n(51),i=n(11),o=n(3),r=n(20),a=String.fromCharCode(0),c=function(s){Array.isArray(s)?this.ops=s:s!=null&&Array.isArray(s.ops)?this.ops=s.ops:this.ops=[]};c.prototype.insert=function(s,d){var A={};return s.length===0?this:(A.insert=s,d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(A.attributes=d),this.push(A))},c.prototype.delete=function(s){return s<=0?this:this.push({delete:s})},c.prototype.retain=function(s,d){if(s<=0)return this;var A={retain:s};return d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(A.attributes=d),this.push(A)},c.prototype.push=function(s){var d=this.ops.length,A=this.ops[d-1];if(s=o(!0,{},s),typeof A=="object"){if(typeof s.delete=="number"&&typeof A.delete=="number")return this.ops[d-1]={delete:A.delete+s.delete},this;if(typeof A.delete=="number"&&s.insert!=null&&(d-=1,A=this.ops[d-1],typeof A!="object"))return this.ops.unshift(s),this;if(i(s.attributes,A.attributes)){if(typeof s.insert=="string"&&typeof A.insert=="string")return this.ops[d-1]={insert:A.insert+s.insert},typeof s.attributes=="object"&&(this.ops[d-1].attributes=s.attributes),this;if(typeof s.retain=="number"&&typeof A.retain=="number")return this.ops[d-1]={retain:A.retain+s.retain},typeof s.attributes=="object"&&(this.ops[d-1].attributes=s.attributes),this}}return d===this.ops.length?this.ops.push(s):this.ops.splice(d,0,s),this},c.prototype.chop=function(){var s=this.ops[this.ops.length-1];return s&&s.retain&&!s.attributes&&this.ops.pop(),this},c.prototype.filter=function(s){return this.ops.filter(s)},c.prototype.forEach=function(s){this.ops.forEach(s)},c.prototype.map=function(s){return this.ops.map(s)},c.prototype.partition=function(s){var d=[],A=[];return this.forEach(function(f){var p=s(f)?d:A;p.push(f)}),[d,A]},c.prototype.reduce=function(s,d){return this.ops.reduce(s,d)},c.prototype.changeLength=function(){return this.reduce(function(s,d){return d.insert?s+r.length(d):d.delete?s-d.delete:s},0)},c.prototype.length=function(){return this.reduce(function(s,d){return s+r.length(d)},0)},c.prototype.slice=function(s,d){s=s||0,typeof d!="number"&&(d=1/0);for(var A=[],f=r.iterator(this.ops),p=0;p<d&&f.hasNext();){var Z;p<s?Z=f.next(s-p):(Z=f.next(d-p),A.push(Z)),p+=r.length(Z)}return new c(A)},c.prototype.compose=function(s){var d=r.iterator(this.ops),A=r.iterator(s.ops),f=[],p=A.peek();if(p!=null&&typeof p.retain=="number"&&p.attributes==null){for(var Z=p.retain;d.peekType()==="insert"&&d.peekLength()<=Z;)Z-=d.peekLength(),f.push(d.next());p.retain-Z>0&&A.next(p.retain-Z)}for(var m=new c(f);d.hasNext()||A.hasNext();)if(A.peekType()==="insert")m.push(A.next());else if(d.peekType()==="delete")m.push(d.next());else{var u=Math.min(d.peekLength(),A.peekLength()),h=d.next(u),b=A.next(u);if(typeof b.retain=="number"){var y={};typeof h.retain=="number"?y.retain=u:y.insert=h.insert;var V=r.attributes.compose(h.attributes,b.attributes,typeof h.retain=="number");if(V&&(y.attributes=V),m.push(y),!A.hasNext()&&i(m.ops[m.ops.length-1],y)){var v=new c(d.rest());return m.concat(v).chop()}}else typeof b.delete=="number"&&typeof h.retain=="number"&&m.push(b)}return m.chop()},c.prototype.concat=function(s){var d=new c(this.ops.slice());return s.ops.length>0&&(d.push(s.ops[0]),d.ops=d.ops.concat(s.ops.slice(1))),d},c.prototype.diff=function(s,d){if(this.ops===s.ops)return new c;var A=[this,s].map(function(u){return u.map(function(h){if(h.insert!=null)return typeof h.insert=="string"?h.insert:a;var b=u===s?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),f=new c,p=I(A[0],A[1],d),Z=r.iterator(this.ops),m=r.iterator(s.ops);return p.forEach(function(u){for(var h=u[1].length;h>0;){var b=0;switch(u[0]){case I.INSERT:b=Math.min(m.peekLength(),h),f.push(m.next(b));break;case I.DELETE:b=Math.min(h,Z.peekLength()),Z.next(b),f.delete(b);break;case I.EQUAL:b=Math.min(Z.peekLength(),m.peekLength(),h);var y=Z.next(b),V=m.next(b);i(y.insert,V.insert)?f.retain(b,r.attributes.diff(y.attributes,V.attributes)):f.push(V).delete(b);break}h-=b}}),f.chop()},c.prototype.eachLine=function(s,d){d=d||`
`;for(var A=r.iterator(this.ops),f=new c,p=0;A.hasNext();){if(A.peekType()!=="insert")return;var Z=A.peek(),m=r.length(Z)-A.peekLength(),u=typeof Z.insert=="string"?Z.insert.indexOf(d,m)-m:-1;if(u<0)f.push(A.next());else if(u>0)f.push(A.next(u));else{if(s(f,A.next(1).attributes||{},p)===!1)return;p+=1,f=new c}}f.length()>0&&s(f,{},p)},c.prototype.transform=function(s,d){if(d=!!d,typeof s=="number")return this.transformPosition(s,d);for(var A=r.iterator(this.ops),f=r.iterator(s.ops),p=new c;A.hasNext()||f.hasNext();)if(A.peekType()==="insert"&&(d||f.peekType()!=="insert"))p.retain(r.length(A.next()));else if(f.peekType()==="insert")p.push(f.next());else{var Z=Math.min(A.peekLength(),f.peekLength()),m=A.next(Z),u=f.next(Z);if(m.delete)continue;u.delete?p.push(u):p.retain(Z,r.attributes.transform(m.attributes,u.attributes,d))}return p.chop()},c.prototype.transformPosition=function(s,d){d=!!d;for(var A=r.iterator(this.ops),f=0;A.hasNext()&&f<=s;){var p=A.peekLength(),Z=A.peekType();if(A.next(),Z==="delete"){s-=Math.min(p,s-f);continue}else Z==="insert"&&(f<s||!d)&&(s+=p);f+=p}return s},g.exports=c},function(g,l){var n=Object.prototype.hasOwnProperty,I=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,r=function(A){return typeof Array.isArray=="function"?Array.isArray(A):I.call(A)==="[object Array]"},a=function(A){if(!A||I.call(A)!=="[object Object]")return!1;var f=n.call(A,"constructor"),p=A.constructor&&A.constructor.prototype&&n.call(A.constructor.prototype,"isPrototypeOf");if(A.constructor&&!f&&!p)return!1;var Z;for(Z in A);return typeof Z>"u"||n.call(A,Z)},c=function(A,f){i&&f.name==="__proto__"?i(A,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):A[f.name]=f.newValue},s=function(A,f){if(f==="__proto__")if(n.call(A,f)){if(o)return o(A,f).value}else return;return A[f]};g.exports=function d(){var A,f,p,Z,m,u,h=arguments[0],b=1,y=arguments.length,V=!1;for(typeof h=="boolean"&&(V=h,h=arguments[1]||{},b=2),(h==null||typeof h!="object"&&typeof h!="function")&&(h={});b<y;++b)if(A=arguments[b],A!=null)for(f in A)p=s(h,f),Z=s(A,f),h!==Z&&(V&&Z&&(a(Z)||(m=r(Z)))?(m?(m=!1,u=p&&r(p)?p:[]):u=p&&a(p)?p:{},c(h,{name:f,newValue:d(V,u,Z)})):typeof Z<"u"&&c(h,{name:f,newValue:Z}));return h}},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BlockEmbed=l.bubbleFormats=void 0;var I=function(){function B(W,R){for(var Y=0;Y<R.length;Y++){var F=R[Y];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(W,F.key,F)}}return function(W,R,Y){return R&&B(W.prototype,R),Y&&B(W,Y),W}}(),i=function B(W,R,Y){W===null&&(W=Function.prototype);var F=Object.getOwnPropertyDescriptor(W,R);if(F===void 0){var M=Object.getPrototypeOf(W);return M===null?void 0:B(M,R,Y)}else{if("value"in F)return F.value;var U=F.get;return U===void 0?void 0:U.call(Y)}},o=n(3),r=h(o),a=n(2),c=h(a),s=n(0),d=h(s),A=n(16),f=h(A),p=n(6),Z=h(p),m=n(7),u=h(m);function h(B){return B&&B.__esModule?B:{default:B}}function b(B,W){if(!(B instanceof W))throw new TypeError("Cannot call a class as a function")}function y(B,W){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:B}function V(B,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);B.prototype=Object.create(W&&W.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(B,W):B.__proto__=W)}var v=1,S=function(B){V(W,B);function W(){return b(this,W),y(this,(W.__proto__||Object.getPrototypeOf(W)).apply(this,arguments))}return I(W,[{key:"attach",value:function(){i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,r.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(Y,F){var M=d.default.query(Y,d.default.Scope.BLOCK_ATTRIBUTE);M!=null&&this.attributes.attribute(M,F)}},{key:"formatAt",value:function(Y,F,M,U){this.format(M,U)}},{key:"insertAt",value:function(Y,F,M){if(typeof F=="string"&&F.endsWith(`
`)){var U=d.default.create(X.blotName);this.parent.insertBefore(U,Y===0?this:this.next),U.insertAt(0,F.slice(0,-1))}else i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,Y,F,M)}}]),W}(d.default.Embed);S.scope=d.default.Scope.BLOCK_BLOT;var X=function(B){V(W,B);function W(R){b(this,W);var Y=y(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,R));return Y.cache={},Y}return I(W,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(d.default.Leaf).reduce(function(Y,F){return F.length()===0?Y:Y.insert(F.value(),G(F))},new c.default).insert(`
`,G(this))),this.cache.delta}},{key:"deleteAt",value:function(Y,F){i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"deleteAt",this).call(this,Y,F),this.cache={}}},{key:"formatAt",value:function(Y,F,M,U){F<=0||(d.default.query(M,d.default.Scope.BLOCK)?Y+F===this.length()&&this.format(M,U):i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"formatAt",this).call(this,Y,Math.min(F,this.length()-Y-1),M,U),this.cache={})}},{key:"insertAt",value:function(Y,F,M){if(M!=null)return i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,Y,F,M);if(F.length!==0){var U=F.split(`
`),E=U.shift();E.length>0&&(Y<this.length()-1||this.children.tail==null?i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,Math.min(Y,this.length()-1),E):this.children.tail.insertAt(this.children.tail.length(),E),this.cache={});var x=this;U.reduce(function(w,J){return x=x.split(w,!0),x.insertAt(0,J),J.length},Y+E.length)}}},{key:"insertBefore",value:function(Y,F){var M=this.children.head;i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertBefore",this).call(this,Y,F),M instanceof f.default&&M.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"length",this).call(this)+v),this.cache.length}},{key:"moveChildren",value:function(Y,F){i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"moveChildren",this).call(this,Y,F),this.cache={}}},{key:"optimize",value:function(Y){i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"optimize",this).call(this,Y),this.cache={}}},{key:"path",value:function(Y){return i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"path",this).call(this,Y,!0)}},{key:"removeChild",value:function(Y){i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"removeChild",this).call(this,Y),this.cache={}}},{key:"split",value:function(Y){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(F&&(Y===0||Y>=this.length()-v)){var M=this.clone();return Y===0?(this.parent.insertBefore(M,this),this):(this.parent.insertBefore(M,this.next),M)}else{var U=i(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"split",this).call(this,Y,F);return this.cache={},U}}}]),W}(d.default.Block);X.blotName="block",X.tagName="P",X.defaultChild="break",X.allowedChildren=[Z.default,d.default.Embed,u.default];function G(B){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return B==null||(typeof B.formats=="function"&&(W=(0,r.default)(W,B.formats())),B.parent==null||B.parent.blotName=="scroll"||B.parent.statics.scope!==B.statics.scope)?W:G(B.parent,W)}l.bubbleFormats=G,l.BlockEmbed=S,l.default=X},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.overload=l.expandConfig=void 0;var I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},i=function(){function x(w,J){var N=[],K=!0,z=!1,L=void 0;try{for(var H=w[Symbol.iterator](),T;!(K=(T=H.next()).done)&&(N.push(T.value),!(J&&N.length===J));K=!0);}catch(Q){z=!0,L=Q}finally{try{!K&&H.return&&H.return()}finally{if(z)throw L}}return N}return function(w,J){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return x(w,J);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function x(w,J){for(var N=0;N<J.length;N++){var K=J[N];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(w,K.key,K)}}return function(w,J,N){return J&&x(w.prototype,J),N&&x(w,N),w}}();n(50);var r=n(2),a=G(r),c=n(14),s=G(c),d=n(8),A=G(d),f=n(9),p=G(f),Z=n(0),m=G(Z),u=n(15),h=G(u),b=n(3),y=G(b),V=n(10),v=G(V),S=n(34),X=G(S);function G(x){return x&&x.__esModule?x:{default:x}}function B(x,w,J){return w in x?Object.defineProperty(x,w,{value:J,enumerable:!0,configurable:!0,writable:!0}):x[w]=J,x}function W(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}var R=(0,v.default)("quill"),Y=function(){o(x,null,[{key:"debug",value:function(J){J===!0&&(J="log"),v.default.level(J)}},{key:"find",value:function(J){return J.__quill||m.default.find(J)}},{key:"import",value:function(J){return this.imports[J]==null&&R.error("Cannot import "+J+". Are you sure it was registered?"),this.imports[J]}},{key:"register",value:function(J,N){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof J!="string"){var L=J.attrName||J.blotName;typeof L=="string"?this.register("formats/"+L,J,N):Object.keys(J).forEach(function(H){K.register(H,J[H],N)})}else this.imports[J]!=null&&!z&&R.warn("Overwriting "+J+" with",N),this.imports[J]=N,(J.startsWith("blots/")||J.startsWith("formats/"))&&N.blotName!=="abstract"?m.default.register(N):J.startsWith("modules")&&typeof N.register=="function"&&N.register()}}]);function x(w){var J=this,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(W(this,x),this.options=F(w,N),this.container=this.options.container,this.container==null)return R.error("Invalid Quill container",w);this.options.debug&&x.debug(this.options.debug);var K=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new A.default,this.scroll=m.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new s.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(A.default.events.EDITOR_CHANGE,function(L){L===A.default.events.TEXT_CHANGE&&J.root.classList.toggle("ql-blank",J.editor.isBlank())}),this.emitter.on(A.default.events.SCROLL_UPDATE,function(L,H){var T=J.selection.lastRange,Q=T&&T.length===0?T.index:void 0;M.call(J,function(){return J.editor.update(null,H,Q)},L)});var z=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+K+"<p><br></p></div>");this.setContents(z),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(x,[{key:"addContainer",value:function(J){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof J=="string"){var K=J;J=document.createElement("div"),J.classList.add(K)}return this.container.insertBefore(J,N),J}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(J,N,K){var z=this,L=U(J,N,K),H=i(L,4);return J=H[0],N=H[1],K=H[3],M.call(this,function(){return z.editor.deleteText(J,N)},K,J,-1*N)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(J),this.container.classList.toggle("ql-disabled",!J)}},{key:"focus",value:function(){var J=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=J,this.scrollIntoView()}},{key:"format",value:function(J,N){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A.default.sources.API;return M.call(this,function(){var L=K.getSelection(!0),H=new a.default;if(L==null)return H;if(m.default.query(J,m.default.Scope.BLOCK))H=K.editor.formatLine(L.index,L.length,B({},J,N));else{if(L.length===0)return K.selection.format(J,N),H;H=K.editor.formatText(L.index,L.length,B({},J,N))}return K.setSelection(L,A.default.sources.SILENT),H},z)}},{key:"formatLine",value:function(J,N,K,z,L){var H=this,T=void 0,Q=U(J,N,K,z,L),j=i(Q,4);return J=j[0],N=j[1],T=j[2],L=j[3],M.call(this,function(){return H.editor.formatLine(J,N,T)},L,J,0)}},{key:"formatText",value:function(J,N,K,z,L){var H=this,T=void 0,Q=U(J,N,K,z,L),j=i(Q,4);return J=j[0],N=j[1],T=j[2],L=j[3],M.call(this,function(){return H.editor.formatText(J,N,T)},L,J,0)}},{key:"getBounds",value:function(J){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=void 0;typeof J=="number"?K=this.selection.getBounds(J,N):K=this.selection.getBounds(J.index,J.length);var z=this.container.getBoundingClientRect();return{bottom:K.bottom-z.top,height:K.height,left:K.left-z.left,right:K.right-z.left,top:K.top-z.top,width:K.width}}},{key:"getContents",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-J,K=U(J,N),z=i(K,2);return J=z[0],N=z[1],this.editor.getContents(J,N)}},{key:"getFormat",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof J=="number"?this.editor.getFormat(J,N):this.editor.getFormat(J.index,J.length)}},{key:"getIndex",value:function(J){return J.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(J){return this.scroll.leaf(J)}},{key:"getLine",value:function(J){return this.scroll.line(J)}},{key:"getLines",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof J!="number"?this.scroll.lines(J.index,J.length):this.scroll.lines(J,N)}},{key:"getModule",value:function(J){return this.theme.modules[J]}},{key:"getSelection",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return J&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-J,K=U(J,N),z=i(K,2);return J=z[0],N=z[1],this.editor.getText(J,N)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(J,N,K){var z=this,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x.sources.API;return M.call(this,function(){return z.editor.insertEmbed(J,N,K)},L,J)}},{key:"insertText",value:function(J,N,K,z,L){var H=this,T=void 0,Q=U(J,0,K,z,L),j=i(Q,4);return J=j[0],T=j[2],L=j[3],M.call(this,function(){return H.editor.insertText(J,N,T)},L,J,N.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(J,N,K){this.clipboard.dangerouslyPasteHTML(J,N,K)}},{key:"removeFormat",value:function(J,N,K){var z=this,L=U(J,N,K),H=i(L,4);return J=H[0],N=H[1],K=H[3],M.call(this,function(){return z.editor.removeFormat(J,N)},K,J)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(J){var N=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A.default.sources.API;return M.call(this,function(){J=new a.default(J);var z=N.getLength(),L=N.editor.deleteText(0,z),H=N.editor.applyDelta(J),T=H.ops[H.ops.length-1];T!=null&&typeof T.insert=="string"&&T.insert[T.insert.length-1]===`
`&&(N.editor.deleteText(N.getLength()-1,1),H.delete(1));var Q=L.compose(H);return Q},K)}},{key:"setSelection",value:function(J,N,K){if(J==null)this.selection.setRange(null,N||x.sources.API);else{var z=U(J,N,K),L=i(z,4);J=L[0],N=L[1],K=L[3],this.selection.setRange(new u.Range(J,N),K),K!==A.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(J){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A.default.sources.API,K=new a.default().insert(J);return this.setContents(K,N)}},{key:"update",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A.default.sources.USER,N=this.scroll.update(J);return this.selection.update(J),N}},{key:"updateContents",value:function(J){var N=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A.default.sources.API;return M.call(this,function(){return J=new a.default(J),N.editor.applyDelta(J,K)},K,!0)}}]),x}();Y.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},Y.events=A.default.events,Y.sources=A.default.sources,Y.version="1.3.7",Y.imports={delta:a.default,parchment:m.default,"core/module":p.default,"core/theme":X.default};function F(x,w){if(w=(0,y.default)(!0,{container:x,modules:{clipboard:!0,keyboard:!0,history:!0}},w),!w.theme||w.theme===Y.DEFAULTS.theme)w.theme=X.default;else if(w.theme=Y.import("themes/"+w.theme),w.theme==null)throw new Error("Invalid theme "+w.theme+". Did you register it?");var J=(0,y.default)(!0,{},w.theme.DEFAULTS);[J,w].forEach(function(z){z.modules=z.modules||{},Object.keys(z.modules).forEach(function(L){z.modules[L]===!0&&(z.modules[L]={})})});var N=Object.keys(J.modules).concat(Object.keys(w.modules)),K=N.reduce(function(z,L){var H=Y.import("modules/"+L);return H==null?R.error("Cannot load "+L+" module. Are you sure you registered it?"):z[L]=H.DEFAULTS||{},z},{});return w.modules!=null&&w.modules.toolbar&&w.modules.toolbar.constructor!==Object&&(w.modules.toolbar={container:w.modules.toolbar}),w=(0,y.default)(!0,{},Y.DEFAULTS,{modules:K},J,w),["bounds","container","scrollingContainer"].forEach(function(z){typeof w[z]=="string"&&(w[z]=document.querySelector(w[z]))}),w.modules=Object.keys(w.modules).reduce(function(z,L){return w.modules[L]&&(z[L]=w.modules[L]),z},{}),w}function M(x,w,J,N){if(this.options.strict&&!this.isEnabled()&&w===A.default.sources.USER)return new a.default;var K=J==null?null:this.getSelection(),z=this.editor.delta,L=x();if(K!=null&&(J===!0&&(J=K.index),N==null?K=E(K,L,w):N!==0&&(K=E(K,J,N,w)),this.setSelection(K,A.default.sources.SILENT)),L.length()>0){var H,T=[A.default.events.TEXT_CHANGE,L,z,w];if((H=this.emitter).emit.apply(H,[A.default.events.EDITOR_CHANGE].concat(T)),w!==A.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,T)}}return L}function U(x,w,J,N,K){var z={};return typeof x.index=="number"&&typeof x.length=="number"?typeof w!="number"?(K=N,N=J,J=w,w=x.length,x=x.index):(w=x.length,x=x.index):typeof w!="number"&&(K=N,N=J,J=w,w=0),(typeof J>"u"?"undefined":I(J))==="object"?(z=J,K=N):typeof J=="string"&&(N!=null?z[J]=N:K=J),K=K||A.default.sources.API,[x,w,z,K]}function E(x,w,J,N){if(x==null)return null;var K=void 0,z=void 0;if(w instanceof a.default){var L=[x.index,x.index+x.length].map(function(j){return w.transformPosition(j,N!==A.default.sources.USER)}),H=i(L,2);K=H[0],z=H[1]}else{var T=[x.index,x.index+x.length].map(function(j){return j<w||j===w&&N===A.default.sources.USER?j:J>=0?j+J:Math.max(w,j+J)}),Q=i(T,2);K=Q[0],z=Q[1]}return new u.Range(K,z-K)}l.expandConfig=F,l.overload=U,l.default=Y},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function Z(m,u){for(var h=0;h<u.length;h++){var b=u[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,u,h){return u&&Z(m.prototype,u),h&&Z(m,h),m}}(),i=function Z(m,u,h){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,u);if(b===void 0){var y=Object.getPrototypeOf(m);return y===null?void 0:Z(y,u,h)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(h)}},o=n(7),r=s(o),a=n(0),c=s(a);function s(Z){return Z&&Z.__esModule?Z:{default:Z}}function d(Z,m){if(!(Z instanceof m))throw new TypeError("Cannot call a class as a function")}function A(Z,m){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:Z}function f(Z,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);Z.prototype=Object.create(m&&m.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,m):Z.__proto__=m)}var p=function(Z){f(m,Z);function m(){return d(this,m),A(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return I(m,[{key:"formatAt",value:function(h,b,y,V){if(m.compare(this.statics.blotName,y)<0&&c.default.query(y,c.default.Scope.BLOT)){var v=this.isolate(h,b);V&&v.wrap(y,V)}else i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,h,b,y,V)}},{key:"optimize",value:function(h){if(i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,h),this.parent instanceof m&&m.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(h,b){var y=m.order.indexOf(h),V=m.order.indexOf(b);return y>=0||V>=0?y-V:h===b?0:h<b?-1:1}}]),m}(c.default.Inline);p.allowedChildren=[p,c.default.Embed,r.default],p.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],l.default=p},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(0),i=o(I);function o(d){return d&&d.__esModule?d:{default:d}}function r(d,A){if(!(d instanceof A))throw new TypeError("Cannot call a class as a function")}function a(d,A){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:d}function c(d,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);d.prototype=Object.create(A&&A.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(d,A):d.__proto__=A)}var s=function(d){c(A,d);function A(){return r(this,A),a(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(i.default.Text);l.default=s},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function u(h,b){for(var y=0;y<b.length;y++){var V=b[y];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(h,V.key,V)}}return function(h,b,y){return b&&u(h.prototype,b),y&&u(h,y),h}}(),i=function u(h,b,y){h===null&&(h=Function.prototype);var V=Object.getOwnPropertyDescriptor(h,b);if(V===void 0){var v=Object.getPrototypeOf(h);return v===null?void 0:u(v,b,y)}else{if("value"in V)return V.value;var S=V.get;return S===void 0?void 0:S.call(y)}},o=n(54),r=s(o),a=n(10),c=s(a);function s(u){return u&&u.__esModule?u:{default:u}}function d(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function A(u,h){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:u}function f(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}var p=(0,c.default)("quill:events"),Z=["selectionchange","mousedown","mouseup","click"];Z.forEach(function(u){document.addEventListener(u,function(){for(var h=arguments.length,b=Array(h),y=0;y<h;y++)b[y]=arguments[y];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(V){if(V.__quill&&V.__quill.emitter){var v;(v=V.__quill.emitter).handleDOM.apply(v,b)}})})});var m=function(u){f(h,u);function h(){d(this,h);var b=A(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return b.listeners={},b.on("error",p.error),b}return I(h,[{key:"emit",value:function(){p.log.apply(p,arguments),i(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(y){for(var V=arguments.length,v=Array(V>1?V-1:0),S=1;S<V;S++)v[S-1]=arguments[S];(this.listeners[y.type]||[]).forEach(function(X){var G=X.node,B=X.handler;(y.target===G||G.contains(y.target))&&B.apply(void 0,[y].concat(v))})}},{key:"listenDOM",value:function(y,V,v){this.listeners[y]||(this.listeners[y]=[]),this.listeners[y].push({node:V,handler:v})}}]),h}(r.default);m.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},m.sources={API:"api",SILENT:"silent",USER:"user"},l.default=m},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});function I(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function o(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};I(this,o),this.quill=r,this.options=a};i.DEFAULTS={},l.default=i},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=["error","warn","log","info"],i="warn";function o(a){if(I.indexOf(a)<=I.indexOf(i)){for(var c,s=arguments.length,d=Array(s>1?s-1:0),A=1;A<s;A++)d[A-1]=arguments[A];(c=console)[a].apply(c,d)}}function r(a){return I.reduce(function(c,s){return c[s]=o.bind(console,s,a),c},{})}o.level=r.level=function(a){i=a},l.default=r},function(g,l,n){var I=Array.prototype.slice,i=n(52),o=n(53),r=g.exports=function(d,A,f){return f||(f={}),d===A?!0:d instanceof Date&&A instanceof Date?d.getTime()===A.getTime():!d||!A||typeof d!="object"&&typeof A!="object"?f.strict?d===A:d==A:s(d,A,f)};function a(d){return d==null}function c(d){return!(!d||typeof d!="object"||typeof d.length!="number"||typeof d.copy!="function"||typeof d.slice!="function"||d.length>0&&typeof d[0]!="number")}function s(d,A,f){var p,Z;if(a(d)||a(A)||d.prototype!==A.prototype)return!1;if(o(d))return o(A)?(d=I.call(d),A=I.call(A),r(d,A,f)):!1;if(c(d)){if(!c(A)||d.length!==A.length)return!1;for(p=0;p<d.length;p++)if(d[p]!==A[p])return!1;return!0}try{var m=i(d),u=i(A)}catch{return!1}if(m.length!=u.length)return!1;for(m.sort(),u.sort(),p=m.length-1;p>=0;p--)if(m[p]!=u[p])return!1;for(p=m.length-1;p>=0;p--)if(Z=m[p],!r(d[Z],A[Z],f))return!1;return typeof d==typeof A}},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(1),i=function(){function o(r,a,c){c===void 0&&(c={}),this.attrName=r,this.keyName=a;var s=I.Scope.TYPE&I.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&I.Scope.LEVEL|s:this.scope=I.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return o.keys=function(r){return[].map.call(r.attributes,function(a){return a.name})},o.prototype.add=function(r,a){return this.canAdd(r,a)?(r.setAttribute(this.keyName,a),!0):!1},o.prototype.canAdd=function(r,a){var c=I.query(r,I.Scope.BLOT&(this.scope|I.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof a=="string"?this.whitelist.indexOf(a.replace(/["']/g,""))>-1:this.whitelist.indexOf(a)>-1},o.prototype.remove=function(r){r.removeAttribute(this.keyName)},o.prototype.value=function(r){var a=r.getAttribute(this.keyName);return this.canAdd(r,a)&&a?a:""},o}();l.default=i},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.Code=void 0;var I=function(){function S(X,G){var B=[],W=!0,R=!1,Y=void 0;try{for(var F=X[Symbol.iterator](),M;!(W=(M=F.next()).done)&&(B.push(M.value),!(G&&B.length===G));W=!0);}catch(U){R=!0,Y=U}finally{try{!W&&F.return&&F.return()}finally{if(R)throw Y}}return B}return function(X,G){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return S(X,G);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function S(X,G){for(var B=0;B<G.length;B++){var W=G[B];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(X,W.key,W)}}return function(X,G,B){return G&&S(X.prototype,G),B&&S(X,B),X}}(),o=function S(X,G,B){X===null&&(X=Function.prototype);var W=Object.getOwnPropertyDescriptor(X,G);if(W===void 0){var R=Object.getPrototypeOf(X);return R===null?void 0:S(R,G,B)}else{if("value"in W)return W.value;var Y=W.get;return Y===void 0?void 0:Y.call(B)}},r=n(2),a=u(r),c=n(0),s=u(c),d=n(4),A=u(d),f=n(6),p=u(f),Z=n(7),m=u(Z);function u(S){return S&&S.__esModule?S:{default:S}}function h(S,X){if(!(S instanceof X))throw new TypeError("Cannot call a class as a function")}function b(S,X){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:S}function y(S,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);S.prototype=Object.create(X&&X.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(S,X):S.__proto__=X)}var V=function(S){y(X,S);function X(){return h(this,X),b(this,(X.__proto__||Object.getPrototypeOf(X)).apply(this,arguments))}return X}(p.default);V.blotName="code",V.tagName="CODE";var v=function(S){y(X,S);function X(){return h(this,X),b(this,(X.__proto__||Object.getPrototypeOf(X)).apply(this,arguments))}return i(X,[{key:"delta",value:function(){var B=this,W=this.domNode.textContent;return W.endsWith(`
`)&&(W=W.slice(0,-1)),W.split(`
`).reduce(function(R,Y){return R.insert(Y).insert(`
`,B.formats())},new a.default)}},{key:"format",value:function(B,W){if(!(B===this.statics.blotName&&W)){var R=this.descendant(m.default,this.length()-1),Y=I(R,1),F=Y[0];F!=null&&F.deleteAt(F.length()-1,1),o(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"format",this).call(this,B,W)}}},{key:"formatAt",value:function(B,W,R,Y){if(W!==0&&!(s.default.query(R,s.default.Scope.BLOCK)==null||R===this.statics.blotName&&Y===this.statics.formats(this.domNode))){var F=this.newlineIndex(B);if(!(F<0||F>=B+W)){var M=this.newlineIndex(B,!0)+1,U=F-M+1,E=this.isolate(M,U),x=E.next;E.format(R,Y),x instanceof X&&x.formatAt(0,B-M+W-U,R,Y)}}}},{key:"insertAt",value:function(B,W,R){if(R==null){var Y=this.descendant(m.default,B),F=I(Y,2),M=F[0],U=F[1];M.insertAt(U,W)}}},{key:"length",value:function(){var B=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?B:B+1}},{key:"newlineIndex",value:function(B){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(W)return this.domNode.textContent.slice(0,B).lastIndexOf(`
`);var R=this.domNode.textContent.slice(B).indexOf(`
`);return R>-1?B+R:-1}},{key:"optimize",value:function(B){this.domNode.textContent.endsWith(`
`)||this.appendChild(s.default.create("text",`
`)),o(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"optimize",this).call(this,B);var W=this.next;W!=null&&W.prev===this&&W.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===W.statics.formats(W.domNode)&&(W.optimize(B),W.moveChildren(this),W.remove())}},{key:"replace",value:function(B){o(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"replace",this).call(this,B),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(W){var R=s.default.find(W);R==null?W.parentNode.removeChild(W):R instanceof s.default.Embed?R.remove():R.unwrap()})}}],[{key:"create",value:function(B){var W=o(X.__proto__||Object.getPrototypeOf(X),"create",this).call(this,B);return W.setAttribute("spellcheck",!1),W}},{key:"formats",value:function(){return!0}}]),X}(A.default);v.blotName="code-block",v.tagName="PRE",v.TAB="  ",l.Code=V,l.default=v},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},i=function(){function x(w,J){var N=[],K=!0,z=!1,L=void 0;try{for(var H=w[Symbol.iterator](),T;!(K=(T=H.next()).done)&&(N.push(T.value),!(J&&N.length===J));K=!0);}catch(Q){z=!0,L=Q}finally{try{!K&&H.return&&H.return()}finally{if(z)throw L}}return N}return function(w,J){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return x(w,J);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function x(w,J){for(var N=0;N<J.length;N++){var K=J[N];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(w,K.key,K)}}return function(w,J,N){return J&&x(w.prototype,J),N&&x(w,N),w}}(),r=n(2),a=W(r),c=n(20),s=W(c),d=n(0),A=W(d),f=n(13),p=W(f),Z=n(24),m=W(Z),u=n(4),h=W(u),b=n(16),y=W(b),V=n(21),v=W(V),S=n(11),X=W(S),G=n(3),B=W(G);function W(x){return x&&x.__esModule?x:{default:x}}function R(x,w,J){return w in x?Object.defineProperty(x,w,{value:J,enumerable:!0,configurable:!0,writable:!0}):x[w]=J,x}function Y(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}var F=/^[ -~]*$/,M=function(){function x(w){Y(this,x),this.scroll=w,this.delta=this.getDelta()}return o(x,[{key:"applyDelta",value:function(J){var N=this,K=!1;this.scroll.update();var z=this.scroll.length();return this.scroll.batchStart(),J=E(J),J.reduce(function(L,H){var T=H.retain||H.delete||H.insert.length||1,Q=H.attributes||{};if(H.insert!=null){if(typeof H.insert=="string"){var j=H.insert;j.endsWith(`
`)&&K&&(K=!1,j=j.slice(0,-1)),L>=z&&!j.endsWith(`
`)&&(K=!0),N.scroll.insertAt(L,j);var D=N.scroll.line(L),te=i(D,2),ne=te[0],Ie=te[1],ae=(0,B.default)({},(0,u.bubbleFormats)(ne));if(ne instanceof h.default){var oe=ne.descendant(A.default.Leaf,Ie),Xe=i(oe,1),ve=Xe[0];ae=(0,B.default)(ae,(0,u.bubbleFormats)(ve))}Q=s.default.attributes.diff(ae,Q)||{}}else if(I(H.insert)==="object"){var O=Object.keys(H.insert)[0];if(O==null)return L;N.scroll.insertAt(L,O,H.insert[O])}z+=T}return Object.keys(Q).forEach(function(P){N.scroll.formatAt(L,T,P,Q[P])}),L+T},0),J.reduce(function(L,H){return typeof H.delete=="number"?(N.scroll.deleteAt(L,H.delete),L):L+(H.retain||H.insert.length||1)},0),this.scroll.batchEnd(),this.update(J)}},{key:"deleteText",value:function(J,N){return this.scroll.deleteAt(J,N),this.update(new a.default().retain(J).delete(N))}},{key:"formatLine",value:function(J,N){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(z).forEach(function(L){if(!(K.scroll.whitelist!=null&&!K.scroll.whitelist[L])){var H=K.scroll.lines(J,Math.max(N,1)),T=N;H.forEach(function(Q){var j=Q.length();if(!(Q instanceof p.default))Q.format(L,z[L]);else{var D=J-Q.offset(K.scroll),te=Q.newlineIndex(D+T)-D+1;Q.formatAt(D,te,L,z[L])}T-=j})}}),this.scroll.optimize(),this.update(new a.default().retain(J).retain(N,(0,v.default)(z)))}},{key:"formatText",value:function(J,N){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(z).forEach(function(L){K.scroll.formatAt(J,N,L,z[L])}),this.update(new a.default().retain(J).retain(N,(0,v.default)(z)))}},{key:"getContents",value:function(J,N){return this.delta.slice(J,J+N)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(J,N){return J.concat(N.delta())},new a.default)}},{key:"getFormat",value:function(J){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=[],z=[];N===0?this.scroll.path(J).forEach(function(H){var T=i(H,1),Q=T[0];Q instanceof h.default?K.push(Q):Q instanceof A.default.Leaf&&z.push(Q)}):(K=this.scroll.lines(J,N),z=this.scroll.descendants(A.default.Leaf,J,N));var L=[K,z].map(function(H){if(H.length===0)return{};for(var T=(0,u.bubbleFormats)(H.shift());Object.keys(T).length>0;){var Q=H.shift();if(Q==null)return T;T=U((0,u.bubbleFormats)(Q),T)}return T});return B.default.apply(B.default,L)}},{key:"getText",value:function(J,N){return this.getContents(J,N).filter(function(K){return typeof K.insert=="string"}).map(function(K){return K.insert}).join("")}},{key:"insertEmbed",value:function(J,N,K){return this.scroll.insertAt(J,N,K),this.update(new a.default().retain(J).insert(R({},N,K)))}},{key:"insertText",value:function(J,N){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return N=N.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(J,N),Object.keys(z).forEach(function(L){K.scroll.formatAt(J,N.length,L,z[L])}),this.update(new a.default().retain(J).insert(N,(0,v.default)(z)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var J=this.scroll.children.head;return J.statics.blotName!==h.default.blotName||J.children.length>1?!1:J.children.head instanceof y.default}},{key:"removeFormat",value:function(J,N){var K=this.getText(J,N),z=this.scroll.line(J+N),L=i(z,2),H=L[0],T=L[1],Q=0,j=new a.default;H!=null&&(H instanceof p.default?Q=H.newlineIndex(T)-T+1:Q=H.length()-T,j=H.delta().slice(T,T+Q-1).insert(`
`));var D=this.getContents(J,N+Q),te=D.diff(new a.default().insert(K).concat(j)),ne=new a.default().retain(J).concat(te);return this.applyDelta(ne)}},{key:"update",value:function(J){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,z=this.delta;if(N.length===1&&N[0].type==="characterData"&&N[0].target.data.match(F)&&A.default.find(N[0].target)){var L=A.default.find(N[0].target),H=(0,u.bubbleFormats)(L),T=L.offset(this.scroll),Q=N[0].oldValue.replace(m.default.CONTENTS,""),j=new a.default().insert(Q),D=new a.default().insert(L.value()),te=new a.default().retain(T).concat(j.diff(D,K));J=te.reduce(function(ne,Ie){return Ie.insert?ne.insert(Ie.insert,H):ne.push(Ie)},new a.default),this.delta=z.compose(J)}else this.delta=this.getDelta(),(!J||!(0,X.default)(z.compose(J),this.delta))&&(J=z.diff(this.delta,K));return J}}]),x}();function U(x,w){return Object.keys(w).reduce(function(J,N){return x[N]==null||(w[N]===x[N]?J[N]=w[N]:Array.isArray(w[N])?w[N].indexOf(x[N])<0&&(J[N]=w[N].concat([x[N]])):J[N]=[w[N],x[N]]),J},{})}function E(x){return x.reduce(function(w,J){if(J.insert===1){var N=(0,v.default)(J.attributes);return delete N.image,w.insert({image:J.attributes.image},N)}if(J.attributes!=null&&(J.attributes.list===!0||J.attributes.bullet===!0)&&(J=(0,v.default)(J),J.attributes.list?J.attributes.list="ordered":(J.attributes.list="bullet",delete J.attributes.bullet)),typeof J.insert=="string"){var K=J.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return w.insert(K,J.attributes)}return w.push(J)},new a.default)}l.default=M},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.Range=void 0;var I=function(){function S(X,G){var B=[],W=!0,R=!1,Y=void 0;try{for(var F=X[Symbol.iterator](),M;!(W=(M=F.next()).done)&&(B.push(M.value),!(G&&B.length===G));W=!0);}catch(U){R=!0,Y=U}finally{try{!W&&F.return&&F.return()}finally{if(R)throw Y}}return B}return function(X,G){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return S(X,G);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function S(X,G){for(var B=0;B<G.length;B++){var W=G[B];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(X,W.key,W)}}return function(X,G,B){return G&&S(X.prototype,G),B&&S(X,B),X}}(),o=n(0),r=m(o),a=n(21),c=m(a),s=n(11),d=m(s),A=n(8),f=m(A),p=n(10),Z=m(p);function m(S){return S&&S.__esModule?S:{default:S}}function u(S){if(Array.isArray(S)){for(var X=0,G=Array(S.length);X<S.length;X++)G[X]=S[X];return G}else return Array.from(S)}function h(S,X){if(!(S instanceof X))throw new TypeError("Cannot call a class as a function")}var b=(0,Z.default)("quill:selection"),y=function S(X){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;h(this,S),this.index=X,this.length=G},V=function(){function S(X,G){var B=this;h(this,S),this.emitter=G,this.scroll=X,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=r.default.create("cursor",this),this.lastRange=this.savedRange=new y(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){B.mouseDown||setTimeout(B.update.bind(B,f.default.sources.USER),1)}),this.emitter.on(f.default.events.EDITOR_CHANGE,function(W,R){W===f.default.events.TEXT_CHANGE&&R.length()>0&&B.update(f.default.sources.SILENT)}),this.emitter.on(f.default.events.SCROLL_BEFORE_UPDATE,function(){if(B.hasFocus()){var W=B.getNativeRange();W!=null&&W.start.node!==B.cursor.textNode&&B.emitter.once(f.default.events.SCROLL_UPDATE,function(){try{B.setNativeRange(W.start.node,W.start.offset,W.end.node,W.end.offset)}catch{}})}}),this.emitter.on(f.default.events.SCROLL_OPTIMIZE,function(W,R){if(R.range){var Y=R.range,F=Y.startNode,M=Y.startOffset,U=Y.endNode,E=Y.endOffset;B.setNativeRange(F,M,U,E)}}),this.update(f.default.sources.SILENT)}return i(S,[{key:"handleComposition",value:function(){var G=this;this.root.addEventListener("compositionstart",function(){G.composing=!0}),this.root.addEventListener("compositionend",function(){if(G.composing=!1,G.cursor.parent){var B=G.cursor.restore();if(!B)return;setTimeout(function(){G.setNativeRange(B.startNode,B.startOffset,B.endNode,B.endOffset)},1)}})}},{key:"handleDragging",value:function(){var G=this;this.emitter.listenDOM("mousedown",document.body,function(){G.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){G.mouseDown=!1,G.update(f.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(G,B){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[G])){this.scroll.update();var W=this.getNativeRange();if(!(W==null||!W.native.collapsed||r.default.query(G,r.default.Scope.BLOCK))){if(W.start.node!==this.cursor.textNode){var R=r.default.find(W.start.node,!1);if(R==null)return;if(R instanceof r.default.Leaf){var Y=R.split(W.start.offset);R.parent.insertBefore(this.cursor,Y)}else R.insertBefore(this.cursor,W.start.node);this.cursor.attach()}this.cursor.format(G,B),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(G){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=this.scroll.length();G=Math.min(G,W-1),B=Math.min(G+B,W-1)-G;var R=void 0,Y=this.scroll.leaf(G),F=I(Y,2),M=F[0],U=F[1];if(M==null)return null;var E=M.position(U,!0),x=I(E,2);R=x[0],U=x[1];var w=document.createRange();if(B>0){w.setStart(R,U);var J=this.scroll.leaf(G+B),N=I(J,2);if(M=N[0],U=N[1],M==null)return null;var K=M.position(U,!0),z=I(K,2);return R=z[0],U=z[1],w.setEnd(R,U),w.getBoundingClientRect()}else{var L="left",H=void 0;return R instanceof Text?(U<R.data.length?(w.setStart(R,U),w.setEnd(R,U+1)):(w.setStart(R,U-1),w.setEnd(R,U),L="right"),H=w.getBoundingClientRect()):(H=M.domNode.getBoundingClientRect(),U>0&&(L="right")),{bottom:H.top+H.height,height:H.height,left:H[L],right:H[L],top:H.top,width:0}}}},{key:"getNativeRange",value:function(){var G=document.getSelection();if(G==null||G.rangeCount<=0)return null;var B=G.getRangeAt(0);if(B==null)return null;var W=this.normalizeNative(B);return b.info("getNativeRange",W),W}},{key:"getRange",value:function(){var G=this.getNativeRange();if(G==null)return[null,null];var B=this.normalizedToRange(G);return[B,G]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(G){var B=this,W=[[G.start.node,G.start.offset]];G.native.collapsed||W.push([G.end.node,G.end.offset]);var R=W.map(function(M){var U=I(M,2),E=U[0],x=U[1],w=r.default.find(E,!0),J=w.offset(B.scroll);return x===0?J:w instanceof r.default.Container?J+w.length():J+w.index(E,x)}),Y=Math.min(Math.max.apply(Math,u(R)),this.scroll.length()-1),F=Math.min.apply(Math,[Y].concat(u(R)));return new y(F,Y-F)}},{key:"normalizeNative",value:function(G){if(!v(this.root,G.startContainer)||!G.collapsed&&!v(this.root,G.endContainer))return null;var B={start:{node:G.startContainer,offset:G.startOffset},end:{node:G.endContainer,offset:G.endOffset},native:G};return[B.start,B.end].forEach(function(W){for(var R=W.node,Y=W.offset;!(R instanceof Text)&&R.childNodes.length>0;)if(R.childNodes.length>Y)R=R.childNodes[Y],Y=0;else if(R.childNodes.length===Y)R=R.lastChild,Y=R instanceof Text?R.data.length:R.childNodes.length+1;else break;W.node=R,W.offset=Y}),B}},{key:"rangeToNative",value:function(G){var B=this,W=G.collapsed?[G.index]:[G.index,G.index+G.length],R=[],Y=this.scroll.length();return W.forEach(function(F,M){F=Math.min(Y-1,F);var U=void 0,E=B.scroll.leaf(F),x=I(E,2),w=x[0],J=x[1],N=w.position(J,M!==0),K=I(N,2);U=K[0],J=K[1],R.push(U,J)}),R.length<2&&(R=R.concat(R)),R}},{key:"scrollIntoView",value:function(G){var B=this.lastRange;if(B!=null){var W=this.getBounds(B.index,B.length);if(W!=null){var R=this.scroll.length()-1,Y=this.scroll.line(Math.min(B.index,R)),F=I(Y,1),M=F[0],U=M;if(B.length>0){var E=this.scroll.line(Math.min(B.index+B.length,R)),x=I(E,1);U=x[0]}if(!(M==null||U==null)){var w=G.getBoundingClientRect();W.top<w.top?G.scrollTop-=w.top-W.top:W.bottom>w.bottom&&(G.scrollTop+=W.bottom-w.bottom)}}}}},{key:"setNativeRange",value:function(G,B){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:G,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:B,Y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",G,B,W,R),!(G!=null&&(this.root.parentNode==null||G.parentNode==null||W.parentNode==null))){var F=document.getSelection();if(F!=null)if(G!=null){this.hasFocus()||this.root.focus();var M=(this.getNativeRange()||{}).native;if(M==null||Y||G!==M.startContainer||B!==M.startOffset||W!==M.endContainer||R!==M.endOffset){G.tagName=="BR"&&(B=[].indexOf.call(G.parentNode.childNodes,G),G=G.parentNode),W.tagName=="BR"&&(R=[].indexOf.call(W.parentNode.childNodes,W),W=W.parentNode);var U=document.createRange();U.setStart(G,B),U.setEnd(W,R),F.removeAllRanges(),F.addRange(U)}}else F.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(G){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.default.sources.API;if(typeof B=="string"&&(W=B,B=!1),b.info("setRange",G),G!=null){var R=this.rangeToNative(G);this.setNativeRange.apply(this,u(R).concat([B]))}else this.setNativeRange(null);this.update(W)}},{key:"update",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.default.sources.USER,B=this.lastRange,W=this.getRange(),R=I(W,2),Y=R[0],F=R[1];if(this.lastRange=Y,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,d.default)(B,this.lastRange)){var M;!this.composing&&F!=null&&F.native.collapsed&&F.start.node!==this.cursor.textNode&&this.cursor.restore();var U=[f.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(B),G];if((M=this.emitter).emit.apply(M,[f.default.events.EDITOR_CHANGE].concat(U)),G!==f.default.sources.SILENT){var E;(E=this.emitter).emit.apply(E,U)}}}}]),S}();function v(S,X){try{X.parentNode}catch{return!1}return X instanceof Text&&(X=X.parentNode),S.contains(X)}l.Range=y,l.default=V},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function f(p,Z){for(var m=0;m<Z.length;m++){var u=Z[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}return function(p,Z,m){return Z&&f(p.prototype,Z),m&&f(p,m),p}}(),i=function f(p,Z,m){p===null&&(p=Function.prototype);var u=Object.getOwnPropertyDescriptor(p,Z);if(u===void 0){var h=Object.getPrototypeOf(p);return h===null?void 0:f(h,Z,m)}else{if("value"in u)return u.value;var b=u.get;return b===void 0?void 0:b.call(m)}},o=n(0),r=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function s(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var A=function(f){d(p,f);function p(){return c(this,p),s(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return I(p,[{key:"insertInto",value:function(m,u){m.children.length===0?i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"insertInto",this).call(this,m,u):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),p}(r.default.Embed);A.blotName="break",A.tagName="BR",l.default=A},function(g,l,n){var I=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,A){d.__proto__=A}||function(d,A){for(var f in A)A.hasOwnProperty(f)&&(d[f]=A[f])};return function(d,A){s(d,A);function f(){this.constructor=d}d.prototype=A===null?Object.create(A):(f.prototype=A.prototype,new f)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(44),o=n(30),r=n(1),a=function(s){I(d,s);function d(A){var f=s.call(this,A)||this;return f.build(),f}return d.prototype.appendChild=function(A){this.insertBefore(A)},d.prototype.attach=function(){s.prototype.attach.call(this),this.children.forEach(function(A){A.attach()})},d.prototype.build=function(){var A=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(f){try{var p=c(f);A.insertBefore(p,A.children.head||void 0)}catch(Z){if(Z instanceof r.ParchmentError)return;throw Z}})},d.prototype.deleteAt=function(A,f){if(A===0&&f===this.length())return this.remove();this.children.forEachAt(A,f,function(p,Z,m){p.deleteAt(Z,m)})},d.prototype.descendant=function(A,f){var p=this.children.find(f),Z=p[0],m=p[1];return A.blotName==null&&A(Z)||A.blotName!=null&&Z instanceof A?[Z,m]:Z instanceof d?Z.descendant(A,m):[null,-1]},d.prototype.descendants=function(A,f,p){f===void 0&&(f=0),p===void 0&&(p=Number.MAX_VALUE);var Z=[],m=p;return this.children.forEachAt(f,p,function(u,h,b){(A.blotName==null&&A(u)||A.blotName!=null&&u instanceof A)&&Z.push(u),u instanceof d&&(Z=Z.concat(u.descendants(A,h,m))),m-=b}),Z},d.prototype.detach=function(){this.children.forEach(function(A){A.detach()}),s.prototype.detach.call(this)},d.prototype.formatAt=function(A,f,p,Z){this.children.forEachAt(A,f,function(m,u,h){m.formatAt(u,h,p,Z)})},d.prototype.insertAt=function(A,f,p){var Z=this.children.find(A),m=Z[0],u=Z[1];if(m)m.insertAt(u,f,p);else{var h=p==null?r.create("text",f):r.create(f,p);this.appendChild(h)}},d.prototype.insertBefore=function(A,f){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(p){return A instanceof p}))throw new r.ParchmentError("Cannot insert "+A.statics.blotName+" into "+this.statics.blotName);A.insertInto(this,f)},d.prototype.length=function(){return this.children.reduce(function(A,f){return A+f.length()},0)},d.prototype.moveChildren=function(A,f){this.children.forEach(function(p){A.insertBefore(p,f)})},d.prototype.optimize=function(A){if(s.prototype.optimize.call(this,A),this.children.length===0)if(this.statics.defaultChild!=null){var f=r.create(this.statics.defaultChild);this.appendChild(f),f.optimize(A)}else this.remove()},d.prototype.path=function(A,f){f===void 0&&(f=!1);var p=this.children.find(A,f),Z=p[0],m=p[1],u=[[this,A]];return Z instanceof d?u.concat(Z.path(m,f)):(Z!=null&&u.push([Z,m]),u)},d.prototype.removeChild=function(A){this.children.remove(A)},d.prototype.replace=function(A){A instanceof d&&A.moveChildren(this),s.prototype.replace.call(this,A)},d.prototype.split=function(A,f){if(f===void 0&&(f=!1),!f){if(A===0)return this;if(A===this.length())return this.next}var p=this.clone();return this.parent.insertBefore(p,this.next),this.children.forEachAt(A,this.length(),function(Z,m,u){Z=Z.split(m,f),p.appendChild(Z)}),p},d.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},d.prototype.update=function(A,f){var p=this,Z=[],m=[];A.forEach(function(u){u.target===p.domNode&&u.type==="childList"&&(Z.push.apply(Z,u.addedNodes),m.push.apply(m,u.removedNodes))}),m.forEach(function(u){if(!(u.parentNode!=null&&u.tagName!=="IFRAME"&&document.body.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var h=r.find(u);h!=null&&(h.domNode.parentNode==null||h.domNode.parentNode===p.domNode)&&h.detach()}}),Z.filter(function(u){return u.parentNode==p.domNode}).sort(function(u,h){return u===h?0:u.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(u){var h=null;u.nextSibling!=null&&(h=r.find(u.nextSibling));var b=c(u);(b.next!=h||b.next==null)&&(b.parent!=null&&b.parent.removeChild(p),p.insertBefore(b,h||void 0))})},d}(o.default);function c(s){var d=r.find(s);if(d==null)try{d=r.create(s)}catch{d=r.create(r.Scope.INLINE),[].slice.call(s.childNodes).forEach(function(f){d.domNode.appendChild(f)}),s.parentNode&&s.parentNode.replaceChild(d.domNode,s),d.attach()}return d}l.default=a},function(g,l,n){var I=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,A){d.__proto__=A}||function(d,A){for(var f in A)A.hasOwnProperty(f)&&(d[f]=A[f])};return function(d,A){s(d,A);function f(){this.constructor=d}d.prototype=A===null?Object.create(A):(f.prototype=A.prototype,new f)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(12),o=n(31),r=n(17),a=n(1),c=function(s){I(d,s);function d(A){var f=s.call(this,A)||this;return f.attributes=new o.default(f.domNode),f}return d.formats=function(A){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return A.tagName.toLowerCase()},d.prototype.format=function(A,f){var p=a.query(A);p instanceof i.default?this.attributes.attribute(p,f):f&&p!=null&&(A!==this.statics.blotName||this.formats()[A]!==f)&&this.replaceWith(A,f)},d.prototype.formats=function(){var A=this.attributes.values(),f=this.statics.formats(this.domNode);return f!=null&&(A[this.statics.blotName]=f),A},d.prototype.replaceWith=function(A,f){var p=s.prototype.replaceWith.call(this,A,f);return this.attributes.copy(p),p},d.prototype.update=function(A,f){var p=this;s.prototype.update.call(this,A,f),A.some(function(Z){return Z.target===p.domNode&&Z.type==="attributes"})&&this.attributes.build()},d.prototype.wrap=function(A,f){var p=s.prototype.wrap.call(this,A,f);return p instanceof d&&p.statics.scope===this.statics.scope&&this.attributes.move(p),p},d}(r.default);l.default=c},function(g,l,n){var I=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,s){c.__proto__=s}||function(c,s){for(var d in s)s.hasOwnProperty(d)&&(c[d]=s[d])};return function(c,s){a(c,s);function d(){this.constructor=c}c.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(30),o=n(1),r=function(a){I(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.value=function(s){return!0},c.prototype.index=function(s,d){return this.domNode===s||this.domNode.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(d,1):-1},c.prototype.position=function(s,d){var A=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return s>0&&(A+=1),[this.parent.domNode,A]},c.prototype.value=function(){var s;return s={},s[this.statics.blotName]=this.statics.value(this.domNode)||!0,s},c.scope=o.Scope.INLINE_BLOT,c}(i.default);l.default=r},function(g,l,n){var I=n(11),i=n(3),o={attributes:{compose:function(a,c,s){typeof a!="object"&&(a={}),typeof c!="object"&&(c={});var d=i(!0,{},c);s||(d=Object.keys(d).reduce(function(f,p){return d[p]!=null&&(f[p]=d[p]),f},{}));for(var A in a)a[A]!==void 0&&c[A]===void 0&&(d[A]=a[A]);return Object.keys(d).length>0?d:void 0},diff:function(a,c){typeof a!="object"&&(a={}),typeof c!="object"&&(c={});var s=Object.keys(a).concat(Object.keys(c)).reduce(function(d,A){return I(a[A],c[A])||(d[A]=c[A]===void 0?null:c[A]),d},{});return Object.keys(s).length>0?s:void 0},transform:function(a,c,s){if(typeof a!="object")return c;if(typeof c=="object"){if(!s)return c;var d=Object.keys(c).reduce(function(A,f){return a[f]===void 0&&(A[f]=c[f]),A},{});return Object.keys(d).length>0?d:void 0}}},iterator:function(a){return new r(a)},length:function(a){return typeof a.delete=="number"?a.delete:typeof a.retain=="number"?a.retain:typeof a.insert=="string"?a.insert.length:1}};function r(a){this.ops=a,this.index=0,this.offset=0}r.prototype.hasNext=function(){return this.peekLength()<1/0},r.prototype.next=function(a){a||(a=1/0);var c=this.ops[this.index];if(c){var s=this.offset,d=o.length(c);if(a>=d-s?(a=d-s,this.index+=1,this.offset=0):this.offset+=a,typeof c.delete=="number")return{delete:a};var A={};return c.attributes&&(A.attributes=c.attributes),typeof c.retain=="number"?A.retain=a:typeof c.insert=="string"?A.insert=c.insert.substr(s,a):A.insert=c.insert,A}else return{retain:1/0}},r.prototype.peek=function(){return this.ops[this.index]},r.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},r.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},r.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var a=this.offset,c=this.index,s=this.next(),d=this.ops.slice(this.index);return this.offset=a,this.index=c,[s].concat(d)}else return[]},g.exports=o},function(g,l){var n=function(){function I(p,Z){return Z!=null&&p instanceof Z}var i;try{i=Map}catch{i=function(){}}var o;try{o=Set}catch{o=function(){}}var r;try{r=Promise}catch{r=function(){}}function a(p,Z,m,u,h){typeof Z=="object"&&(m=Z.depth,u=Z.prototype,h=Z.includeNonEnumerable,Z=Z.circular);var b=[],y=[],V=typeof Buffer<"u";typeof Z>"u"&&(Z=!0),typeof m>"u"&&(m=1/0);function v(S,X){if(S===null)return null;if(X===0)return S;var G,B;if(typeof S!="object")return S;if(I(S,i))G=new i;else if(I(S,o))G=new o;else if(I(S,r))G=new r(function(w,J){S.then(function(N){w(v(N,X-1))},function(N){J(v(N,X-1))})});else if(a.__isArray(S))G=[];else if(a.__isRegExp(S))G=new RegExp(S.source,f(S)),S.lastIndex&&(G.lastIndex=S.lastIndex);else if(a.__isDate(S))G=new Date(S.getTime());else{if(V&&Buffer.isBuffer(S))return Buffer.allocUnsafe?G=Buffer.allocUnsafe(S.length):G=new Buffer(S.length),S.copy(G),G;I(S,Error)?G=Object.create(S):typeof u>"u"?(B=Object.getPrototypeOf(S),G=Object.create(B)):(G=Object.create(u),B=u)}if(Z){var W=b.indexOf(S);if(W!=-1)return y[W];b.push(S),y.push(G)}I(S,i)&&S.forEach(function(w,J){var N=v(J,X-1),K=v(w,X-1);G.set(N,K)}),I(S,o)&&S.forEach(function(w){var J=v(w,X-1);G.add(J)});for(var R in S){var Y;B&&(Y=Object.getOwnPropertyDescriptor(B,R)),!(Y&&Y.set==null)&&(G[R]=v(S[R],X-1))}if(Object.getOwnPropertySymbols)for(var F=Object.getOwnPropertySymbols(S),R=0;R<F.length;R++){var M=F[R],U=Object.getOwnPropertyDescriptor(S,M);U&&!U.enumerable&&!h||(G[M]=v(S[M],X-1),U.enumerable||Object.defineProperty(G,M,{enumerable:!1}))}if(h)for(var E=Object.getOwnPropertyNames(S),R=0;R<E.length;R++){var x=E[R],U=Object.getOwnPropertyDescriptor(S,x);U&&U.enumerable||(G[x]=v(S[x],X-1),Object.defineProperty(G,x,{enumerable:!1}))}return G}return v(p,m)}a.clonePrototype=function(Z){if(Z===null)return null;var m=function(){};return m.prototype=Z,new m};function c(p){return Object.prototype.toString.call(p)}a.__objToStr=c;function s(p){return typeof p=="object"&&c(p)==="[object Date]"}a.__isDate=s;function d(p){return typeof p=="object"&&c(p)==="[object Array]"}a.__isArray=d;function A(p){return typeof p=="object"&&c(p)==="[object RegExp]"}a.__isRegExp=A;function f(p){var Z="";return p.global&&(Z+="g"),p.ignoreCase&&(Z+="i"),p.multiline&&(Z+="m"),Z}return a.__getRegExpFlags=f,a}();typeof g=="object"&&g.exports&&(g.exports=n)},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function G(B,W){var R=[],Y=!0,F=!1,M=void 0;try{for(var U=B[Symbol.iterator](),E;!(Y=(E=U.next()).done)&&(R.push(E.value),!(W&&R.length===W));Y=!0);}catch(x){F=!0,M=x}finally{try{!Y&&U.return&&U.return()}finally{if(F)throw M}}return R}return function(B,W){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return G(B,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function G(B,W){for(var R=0;R<W.length;R++){var Y=W[R];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(B,Y.key,Y)}}return function(B,W,R){return W&&G(B.prototype,W),R&&G(B,R),B}}(),o=function G(B,W,R){B===null&&(B=Function.prototype);var Y=Object.getOwnPropertyDescriptor(B,W);if(Y===void 0){var F=Object.getPrototypeOf(B);return F===null?void 0:G(F,W,R)}else{if("value"in Y)return Y.value;var M=Y.get;return M===void 0?void 0:M.call(R)}},r=n(0),a=b(r),c=n(8),s=b(c),d=n(4),A=b(d),f=n(16),p=b(f),Z=n(13),m=b(Z),u=n(25),h=b(u);function b(G){return G&&G.__esModule?G:{default:G}}function y(G,B){if(!(G instanceof B))throw new TypeError("Cannot call a class as a function")}function V(G,B){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:G}function v(G,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);G.prototype=Object.create(B&&B.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(G,B):G.__proto__=B)}function S(G){return G instanceof A.default||G instanceof d.BlockEmbed}var X=function(G){v(B,G);function B(W,R){y(this,B);var Y=V(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,W));return Y.emitter=R.emitter,Array.isArray(R.whitelist)&&(Y.whitelist=R.whitelist.reduce(function(F,M){return F[M]=!0,F},{})),Y.domNode.addEventListener("DOMNodeInserted",function(){}),Y.optimize(),Y.enable(),Y}return i(B,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(R,Y){var F=this.line(R),M=I(F,2),U=M[0],E=M[1],x=this.line(R+Y),w=I(x,1),J=w[0];if(o(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"deleteAt",this).call(this,R,Y),J!=null&&U!==J&&E>0){if(U instanceof d.BlockEmbed||J instanceof d.BlockEmbed){this.optimize();return}if(U instanceof m.default){var N=U.newlineIndex(U.length(),!0);if(N>-1&&(U=U.split(N+1),U===J)){this.optimize();return}}else if(J instanceof m.default){var K=J.newlineIndex(0);K>-1&&J.split(K+1)}var z=J.children.head instanceof p.default?null:J.children.head;U.moveChildren(J,z),U.remove()}this.optimize()}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",R)}},{key:"formatAt",value:function(R,Y,F,M){this.whitelist!=null&&!this.whitelist[F]||(o(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"formatAt",this).call(this,R,Y,F,M),this.optimize())}},{key:"insertAt",value:function(R,Y,F){if(!(F!=null&&this.whitelist!=null&&!this.whitelist[Y])){if(R>=this.length())if(F==null||a.default.query(Y,a.default.Scope.BLOCK)==null){var M=a.default.create(this.statics.defaultChild);this.appendChild(M),F==null&&Y.endsWith(`
`)&&(Y=Y.slice(0,-1)),M.insertAt(0,Y,F)}else{var U=a.default.create(Y,F);this.appendChild(U)}else o(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"insertAt",this).call(this,R,Y,F);this.optimize()}}},{key:"insertBefore",value:function(R,Y){if(R.statics.scope===a.default.Scope.INLINE_BLOT){var F=a.default.create(this.statics.defaultChild);F.appendChild(R),R=F}o(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"insertBefore",this).call(this,R,Y)}},{key:"leaf",value:function(R){return this.path(R).pop()||[null,-1]}},{key:"line",value:function(R){return R===this.length()?this.line(R-1):this.descendant(S,R)}},{key:"lines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,F=function M(U,E,x){var w=[],J=x;return U.children.forEachAt(E,x,function(N,K,z){S(N)?w.push(N):N instanceof a.default.Container&&(w=w.concat(M(N,K,J))),J-=z}),w};return F(this,R,Y)}},{key:"optimize",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(o(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"optimize",this).call(this,R,Y),R.length>0&&this.emitter.emit(s.default.events.SCROLL_OPTIMIZE,R,Y))}},{key:"path",value:function(R){return o(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"path",this).call(this,R).slice(1)}},{key:"update",value:function(R){if(this.batch!==!0){var Y=s.default.sources.USER;typeof R=="string"&&(Y=R),Array.isArray(R)||(R=this.observer.takeRecords()),R.length>0&&this.emitter.emit(s.default.events.SCROLL_BEFORE_UPDATE,Y,R),o(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"update",this).call(this,R.concat([])),R.length>0&&this.emitter.emit(s.default.events.SCROLL_UPDATE,Y,R)}}}]),B}(a.default.Scroll);X.blotName="scroll",X.className="ql-editor",X.tagName="DIV",X.defaultChild="block",X.allowedChildren=[A.default,d.BlockEmbed,h.default],l.default=X},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.SHORTKEY=l.default=void 0;var I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},i=function(){function H(T,Q){var j=[],D=!0,te=!1,ne=void 0;try{for(var Ie=T[Symbol.iterator](),ae;!(D=(ae=Ie.next()).done)&&(j.push(ae.value),!(Q&&j.length===Q));D=!0);}catch(oe){te=!0,ne=oe}finally{try{!D&&Ie.return&&Ie.return()}finally{if(te)throw ne}}return j}return function(T,Q){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return H(T,Q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function H(T,Q){for(var j=0;j<Q.length;j++){var D=Q[j];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(T,D.key,D)}}return function(T,Q,j){return Q&&H(T.prototype,Q),j&&H(T,j),T}}(),r=n(21),a=G(r),c=n(11),s=G(c),d=n(3),A=G(d),f=n(2),p=G(f),Z=n(20),m=G(Z),u=n(0),h=G(u),b=n(5),y=G(b),V=n(10),v=G(V),S=n(9),X=G(S);function G(H){return H&&H.__esModule?H:{default:H}}function B(H,T,Q){return T in H?Object.defineProperty(H,T,{value:Q,enumerable:!0,configurable:!0,writable:!0}):H[T]=Q,H}function W(H,T){if(!(H instanceof T))throw new TypeError("Cannot call a class as a function")}function R(H,T){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:H}function Y(H,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);H.prototype=Object.create(T&&T.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(H,T):H.__proto__=T)}var F=(0,v.default)("quill:keyboard"),M=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",U=function(H){Y(T,H),o(T,null,[{key:"match",value:function(j,D){return D=L(D),["altKey","ctrlKey","metaKey","shiftKey"].some(function(te){return!!D[te]!==j[te]&&D[te]!==null})?!1:D.key===(j.which||j.keyCode)}}]);function T(Q,j){W(this,T);var D=R(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,Q,j));return D.bindings={},Object.keys(D.options.bindings).forEach(function(te){te==="list autofill"&&Q.scroll.whitelist!=null&&!Q.scroll.whitelist.list||D.options.bindings[te]&&D.addBinding(D.options.bindings[te])}),D.addBinding({key:T.keys.ENTER,shiftKey:null},N),D.addBinding({key:T.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(D.addBinding({key:T.keys.BACKSPACE},{collapsed:!0},x),D.addBinding({key:T.keys.DELETE},{collapsed:!0},w)):(D.addBinding({key:T.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},x),D.addBinding({key:T.keys.DELETE},{collapsed:!0,suffix:/^.?$/},w)),D.addBinding({key:T.keys.BACKSPACE},{collapsed:!1},J),D.addBinding({key:T.keys.DELETE},{collapsed:!1},J),D.addBinding({key:T.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},x),D.listen(),D}return o(T,[{key:"addBinding",value:function(j){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ne=L(j);if(ne==null||ne.key==null)return F.warn("Attempted to add invalid keyboard binding",ne);typeof D=="function"&&(D={handler:D}),typeof te=="function"&&(te={handler:te}),ne=(0,A.default)(ne,D,te),this.bindings[ne.key]=this.bindings[ne.key]||[],this.bindings[ne.key].push(ne)}},{key:"listen",value:function(){var j=this;this.quill.root.addEventListener("keydown",function(D){if(!D.defaultPrevented){var te=D.which||D.keyCode,ne=(j.bindings[te]||[]).filter(function(Ae){return T.match(D,Ae)});if(ne.length!==0){var Ie=j.quill.getSelection();if(!(Ie==null||!j.quill.hasFocus())){var ae=j.quill.getLine(Ie.index),oe=i(ae,2),Xe=oe[0],ve=oe[1],O=j.quill.getLeaf(Ie.index),P=i(O,2),ge=P[0],le=P[1],$=Ie.length===0?[ge,le]:j.quill.getLeaf(Ie.index+Ie.length),ue=i($,2),se=ue[0],me=ue[1],Ce=ge instanceof h.default.Text?ge.value().slice(0,le):"",Ye=se instanceof h.default.Text?se.value().slice(me):"",We={collapsed:Ie.length===0,empty:Ie.length===0&&Xe.length()<=1,format:j.quill.getFormat(Ie),offset:ve,prefix:Ce,suffix:Ye},he=ne.some(function(Ae){if(Ae.collapsed!=null&&Ae.collapsed!==We.collapsed||Ae.empty!=null&&Ae.empty!==We.empty||Ae.offset!=null&&Ae.offset!==We.offset)return!1;if(Array.isArray(Ae.format)){if(Ae.format.every(function(Se){return We.format[Se]==null}))return!1}else if(I(Ae.format)==="object"&&!Object.keys(Ae.format).every(function(Se){return Ae.format[Se]===!0?We.format[Se]!=null:Ae.format[Se]===!1?We.format[Se]==null:(0,s.default)(Ae.format[Se],We.format[Se])}))return!1;return Ae.prefix!=null&&!Ae.prefix.test(We.prefix)||Ae.suffix!=null&&!Ae.suffix.test(We.suffix)?!1:Ae.handler.call(j,Ie,We)!==!0});he&&D.preventDefault()}}}})}}]),T}(X.default);U.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},U.DEFAULTS={bindings:{bold:z("bold"),italic:z("italic"),underline:z("underline"),indent:{key:U.keys.TAB,format:["blockquote","indent","list"],handler:function(T,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","+1",y.default.sources.USER)}},outdent:{key:U.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(T,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","-1",y.default.sources.USER)}},"outdent backspace":{key:U.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(T,Q){Q.format.indent!=null?this.quill.format("indent","-1",y.default.sources.USER):Q.format.list!=null&&this.quill.format("list",!1,y.default.sources.USER)}},"indent code-block":K(!0),"outdent code-block":K(!1),"remove tab":{key:U.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(T){this.quill.deleteText(T.index-1,1,y.default.sources.USER)}},tab:{key:U.keys.TAB,handler:function(T){this.quill.history.cutoff();var Q=new p.default().retain(T.index).delete(T.length).insert("	");this.quill.updateContents(Q,y.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(T.index+1,y.default.sources.SILENT)}},"list empty enter":{key:U.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(T,Q){this.quill.format("list",!1,y.default.sources.USER),Q.format.indent&&this.quill.format("indent",!1,y.default.sources.USER)}},"checklist enter":{key:U.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(T){var Q=this.quill.getLine(T.index),j=i(Q,2),D=j[0],te=j[1],ne=(0,A.default)({},D.formats(),{list:"checked"}),Ie=new p.default().retain(T.index).insert(`
`,ne).retain(D.length()-te-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ie,y.default.sources.USER),this.quill.setSelection(T.index+1,y.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:U.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(T,Q){var j=this.quill.getLine(T.index),D=i(j,2),te=D[0],ne=D[1],Ie=new p.default().retain(T.index).insert(`
`,Q.format).retain(te.length()-ne-1).retain(1,{header:null});this.quill.updateContents(Ie,y.default.sources.USER),this.quill.setSelection(T.index+1,y.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(T,Q){var j=Q.prefix.length,D=this.quill.getLine(T.index),te=i(D,2),ne=te[0],Ie=te[1];if(Ie>j)return!0;var ae=void 0;switch(Q.prefix.trim()){case"[]":case"[ ]":ae="unchecked";break;case"[x]":ae="checked";break;case"-":case"*":ae="bullet";break;default:ae="ordered"}this.quill.insertText(T.index," ",y.default.sources.USER),this.quill.history.cutoff();var oe=new p.default().retain(T.index-Ie).delete(j+1).retain(ne.length()-2-Ie).retain(1,{list:ae});this.quill.updateContents(oe,y.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(T.index-j,y.default.sources.SILENT)}},"code exit":{key:U.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(T){var Q=this.quill.getLine(T.index),j=i(Q,2),D=j[0],te=j[1],ne=new p.default().retain(T.index+D.length()-te-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ne,y.default.sources.USER)}},"embed left":E(U.keys.LEFT,!1),"embed left shift":E(U.keys.LEFT,!0),"embed right":E(U.keys.RIGHT,!1),"embed right shift":E(U.keys.RIGHT,!0)}};function E(H,T){var Q,j=H===U.keys.LEFT?"prefix":"suffix";return Q={key:H,shiftKey:T,altKey:null},B(Q,j,/^$/),B(Q,"handler",function(te){var ne=te.index;H===U.keys.RIGHT&&(ne+=te.length+1);var Ie=this.quill.getLeaf(ne),ae=i(Ie,1),oe=ae[0];return oe instanceof h.default.Embed?(H===U.keys.LEFT?T?this.quill.setSelection(te.index-1,te.length+1,y.default.sources.USER):this.quill.setSelection(te.index-1,y.default.sources.USER):T?this.quill.setSelection(te.index,te.length+1,y.default.sources.USER):this.quill.setSelection(te.index+te.length+1,y.default.sources.USER),!1):!0}),Q}function x(H,T){if(!(H.index===0||this.quill.getLength()<=1)){var Q=this.quill.getLine(H.index),j=i(Q,1),D=j[0],te={};if(T.offset===0){var ne=this.quill.getLine(H.index-1),Ie=i(ne,1),ae=Ie[0];if(ae!=null&&ae.length()>1){var oe=D.formats(),Xe=this.quill.getFormat(H.index-1,1);te=m.default.attributes.diff(oe,Xe)||{}}}var ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(T.prefix)?2:1;this.quill.deleteText(H.index-ve,ve,y.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(H.index-ve,ve,te,y.default.sources.USER),this.quill.focus()}}function w(H,T){var Q=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(T.suffix)?2:1;if(!(H.index>=this.quill.getLength()-Q)){var j={},D=0,te=this.quill.getLine(H.index),ne=i(te,1),Ie=ne[0];if(T.offset>=Ie.length()-1){var ae=this.quill.getLine(H.index+1),oe=i(ae,1),Xe=oe[0];if(Xe){var ve=Ie.formats(),O=this.quill.getFormat(H.index,1);j=m.default.attributes.diff(ve,O)||{},D=Xe.length()}}this.quill.deleteText(H.index,Q,y.default.sources.USER),Object.keys(j).length>0&&this.quill.formatLine(H.index+D-1,Q,j,y.default.sources.USER)}}function J(H){var T=this.quill.getLines(H),Q={};if(T.length>1){var j=T[0].formats(),D=T[T.length-1].formats();Q=m.default.attributes.diff(D,j)||{}}this.quill.deleteText(H,y.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine(H.index,1,Q,y.default.sources.USER),this.quill.setSelection(H.index,y.default.sources.SILENT),this.quill.focus()}function N(H,T){var Q=this;H.length>0&&this.quill.scroll.deleteAt(H.index,H.length);var j=Object.keys(T.format).reduce(function(D,te){return h.default.query(te,h.default.Scope.BLOCK)&&!Array.isArray(T.format[te])&&(D[te]=T.format[te]),D},{});this.quill.insertText(H.index,`
`,j,y.default.sources.USER),this.quill.setSelection(H.index+1,y.default.sources.SILENT),this.quill.focus(),Object.keys(T.format).forEach(function(D){j[D]==null&&(Array.isArray(T.format[D])||D!=="link"&&Q.quill.format(D,T.format[D],y.default.sources.USER))})}function K(H){return{key:U.keys.TAB,shiftKey:!H,format:{"code-block":!0},handler:function(Q){var j=h.default.query("code-block"),D=Q.index,te=Q.length,ne=this.quill.scroll.descendant(j,D),Ie=i(ne,2),ae=Ie[0],oe=Ie[1];if(ae!=null){var Xe=this.quill.getIndex(ae),ve=ae.newlineIndex(oe,!0)+1,O=ae.newlineIndex(Xe+oe+te),P=ae.domNode.textContent.slice(ve,O).split(`
`);oe=0,P.forEach(function(ge,le){H?(ae.insertAt(ve+oe,j.TAB),oe+=j.TAB.length,le===0?D+=j.TAB.length:te+=j.TAB.length):ge.startsWith(j.TAB)&&(ae.deleteAt(ve+oe,j.TAB.length),oe-=j.TAB.length,le===0?D-=j.TAB.length:te-=j.TAB.length),oe+=ge.length+1}),this.quill.update(y.default.sources.USER),this.quill.setSelection(D,te,y.default.sources.SILENT)}}}}function z(H){return{key:H[0].toUpperCase(),shortKey:!0,handler:function(Q,j){this.quill.format(H,!j.format[H],y.default.sources.USER)}}}function L(H){if(typeof H=="string"||typeof H=="number")return L({key:H});if((typeof H>"u"?"undefined":I(H))==="object"&&(H=(0,a.default)(H,!1)),typeof H.key=="string")if(U.keys[H.key.toUpperCase()]!=null)H.key=U.keys[H.key.toUpperCase()];else if(H.key.length===1)H.key=H.key.toUpperCase().charCodeAt(0);else return null;return H.shortKey&&(H[M]=H.shortKey,delete H.shortKey),H}l.default=U,l.SHORTKEY=M},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function m(u,h){var b=[],y=!0,V=!1,v=void 0;try{for(var S=u[Symbol.iterator](),X;!(y=(X=S.next()).done)&&(b.push(X.value),!(h&&b.length===h));y=!0);}catch(G){V=!0,v=G}finally{try{!y&&S.return&&S.return()}finally{if(V)throw v}}return b}return function(u,h){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return m(u,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function m(u,h,b){u===null&&(u=Function.prototype);var y=Object.getOwnPropertyDescriptor(u,h);if(y===void 0){var V=Object.getPrototypeOf(u);return V===null?void 0:m(V,h,b)}else{if("value"in y)return y.value;var v=y.get;return v===void 0?void 0:v.call(b)}},o=function(){function m(u,h){for(var b=0;b<h.length;b++){var y=h[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,h,b){return h&&m(u.prototype,h),b&&m(u,b),u}}(),r=n(0),a=d(r),c=n(7),s=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function A(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function f(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function p(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var Z=function(m){p(u,m),o(u,null,[{key:"value",value:function(){}}]);function u(h,b){A(this,u);var y=f(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,h));return y.selection=b,y.textNode=document.createTextNode(u.CONTENTS),y.domNode.appendChild(y.textNode),y._length=0,y}return o(u,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,y){if(this._length!==0)return i(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"format",this).call(this,b,y);for(var V=this,v=0;V!=null&&V.statics.scope!==a.default.Scope.BLOCK_BLOT;)v+=V.offset(V.parent),V=V.parent;V!=null&&(this._length=u.CONTENTS.length,V.optimize(),V.formatAt(v,u.CONTENTS.length,b,y),this._length=0)}},{key:"index",value:function(b,y){return b===this.textNode?0:i(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"index",this).call(this,b,y)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){i(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,y=this.selection.getNativeRange(),V=void 0,v=void 0,S=void 0;if(y!=null&&y.start.node===b&&y.end.node===b){var X=[b,y.start.offset,y.end.offset];V=X[0],v=X[1],S=X[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==u.CONTENTS){var G=this.textNode.data.split(u.CONTENTS).join("");this.next instanceof s.default?(V=this.next.domNode,this.next.insertAt(0,G),this.textNode.data=u.CONTENTS):(this.textNode.data=G,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(u.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),v!=null){var B=[v,S].map(function(R){return Math.max(0,Math.min(V.data.length,R-1))}),W=I(B,2);return v=W[0],S=W[1],{startNode:V,startOffset:v,endNode:V,endOffset:S}}}}},{key:"update",value:function(b,y){var V=this;if(b.some(function(S){return S.type==="characterData"&&S.target===V.textNode})){var v=this.restore();v&&(y.range=v)}}},{key:"value",value:function(){return""}}]),u}(a.default.Embed);Z.blotName="cursor",Z.className="ql-cursor",Z.tagName="span",Z.CONTENTS="\uFEFF",l.default=Z},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(0),i=a(I),o=n(4),r=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function s(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var A=function(f){d(p,f);function p(){return c(this,p),s(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(i.default.Container);A.allowedChildren=[r.default,o.BlockEmbed,A],l.default=A},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorStyle=l.ColorClass=l.ColorAttributor=void 0;var I=function(){function Z(m,u){for(var h=0;h<u.length;h++){var b=u[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,u,h){return u&&Z(m.prototype,u),h&&Z(m,h),m}}(),i=function Z(m,u,h){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,u);if(b===void 0){var y=Object.getPrototypeOf(m);return y===null?void 0:Z(y,u,h)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(h)}},o=n(0),r=a(o);function a(Z){return Z&&Z.__esModule?Z:{default:Z}}function c(Z,m){if(!(Z instanceof m))throw new TypeError("Cannot call a class as a function")}function s(Z,m){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:Z}function d(Z,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);Z.prototype=Object.create(m&&m.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,m):Z.__proto__=m)}var A=function(Z){d(m,Z);function m(){return c(this,m),s(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return I(m,[{key:"value",value:function(h){var b=i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,h);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(y){return("00"+parseInt(y).toString(16)).slice(-2)}).join("")):b}}]),m}(r.default.Attributor.Style),f=new r.default.Attributor.Class("color","ql-color",{scope:r.default.Scope.INLINE}),p=new A("color","color",{scope:r.default.Scope.INLINE});l.ColorAttributor=A,l.ColorClass=f,l.ColorStyle=p},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.sanitize=l.default=void 0;var I=function(){function p(Z,m){for(var u=0;u<m.length;u++){var h=m[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(Z,h.key,h)}}return function(Z,m,u){return m&&p(Z.prototype,m),u&&p(Z,u),Z}}(),i=function p(Z,m,u){Z===null&&(Z=Function.prototype);var h=Object.getOwnPropertyDescriptor(Z,m);if(h===void 0){var b=Object.getPrototypeOf(Z);return b===null?void 0:p(b,m,u)}else{if("value"in h)return h.value;var y=h.get;return y===void 0?void 0:y.call(u)}},o=n(6),r=a(o);function a(p){return p&&p.__esModule?p:{default:p}}function c(p,Z){if(!(p instanceof Z))throw new TypeError("Cannot call a class as a function")}function s(p,Z){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:p}function d(p,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);p.prototype=Object.create(Z&&Z.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(p,Z):p.__proto__=Z)}var A=function(p){d(Z,p);function Z(){return c(this,Z),s(this,(Z.__proto__||Object.getPrototypeOf(Z)).apply(this,arguments))}return I(Z,[{key:"format",value:function(u,h){if(u!==this.statics.blotName||!h)return i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"format",this).call(this,u,h);h=this.constructor.sanitize(h),this.domNode.setAttribute("href",h)}}],[{key:"create",value:function(u){var h=i(Z.__proto__||Object.getPrototypeOf(Z),"create",this).call(this,u);return u=this.sanitize(u),h.setAttribute("href",u),h.setAttribute("rel","noopener noreferrer"),h.setAttribute("target","_blank"),h}},{key:"formats",value:function(u){return u.getAttribute("href")}},{key:"sanitize",value:function(u){return f(u,this.PROTOCOL_WHITELIST)?u:this.SANITIZED_URL}}]),Z}(r.default);A.blotName="link",A.tagName="A",A.SANITIZED_URL="about:blank",A.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function f(p,Z){var m=document.createElement("a");m.href=p;var u=m.href.slice(0,m.href.indexOf(":"));return Z.indexOf(u)>-1}l.default=A,l.sanitize=f},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},i=function(){function Z(m,u){for(var h=0;h<u.length;h++){var b=u[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,u,h){return u&&Z(m.prototype,u),h&&Z(m,h),m}}(),o=n(23),r=s(o),a=n(107),c=s(a);function s(Z){return Z&&Z.__esModule?Z:{default:Z}}function d(Z,m){if(!(Z instanceof m))throw new TypeError("Cannot call a class as a function")}var A=0;function f(Z,m){Z.setAttribute(m,Z.getAttribute(m)!=="true")}var p=function(){function Z(m){var u=this;d(this,Z),this.select=m,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){u.togglePicker()}),this.label.addEventListener("keydown",function(h){switch(h.keyCode){case r.default.keys.ENTER:u.togglePicker();break;case r.default.keys.ESCAPE:u.escape(),h.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return i(Z,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),f(this.label,"aria-expanded"),f(this.options,"aria-hidden")}},{key:"buildItem",value:function(u){var h=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),u.hasAttribute("value")&&b.setAttribute("data-value",u.getAttribute("value")),u.textContent&&b.setAttribute("data-label",u.textContent),b.addEventListener("click",function(){h.selectItem(b,!0)}),b.addEventListener("keydown",function(y){switch(y.keyCode){case r.default.keys.ENTER:h.selectItem(b,!0),y.preventDefault();break;case r.default.keys.ESCAPE:h.escape(),y.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var u=document.createElement("span");return u.classList.add("ql-picker-label"),u.innerHTML=c.default,u.tabIndex="0",u.setAttribute("role","button"),u.setAttribute("aria-expanded","false"),this.container.appendChild(u),u}},{key:"buildOptions",value:function(){var u=this,h=document.createElement("span");h.classList.add("ql-picker-options"),h.setAttribute("aria-hidden","true"),h.tabIndex="-1",h.id="ql-picker-options-"+A,A+=1,this.label.setAttribute("aria-controls",h.id),this.options=h,[].slice.call(this.select.options).forEach(function(b){var y=u.buildItem(b);h.appendChild(y),b.selected===!0&&u.selectItem(y)}),this.container.appendChild(h)}},{key:"buildPicker",value:function(){var u=this;[].slice.call(this.select.attributes).forEach(function(h){u.container.setAttribute(h.name,h.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var u=this;this.close(),setTimeout(function(){return u.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(u!==b&&(b!=null&&b.classList.remove("ql-selected"),u!=null&&(u.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(u.parentNode.children,u),u.hasAttribute("data-value")?this.label.setAttribute("data-value",u.getAttribute("data-value")):this.label.removeAttribute("data-value"),u.hasAttribute("data-label")?this.label.setAttribute("data-label",u.getAttribute("data-label")):this.label.removeAttribute("data-label"),h))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":I(Event))==="object"){var y=document.createEvent("Event");y.initEvent("change",!0,!0),this.select.dispatchEvent(y)}this.close()}}},{key:"update",value:function(){var u=void 0;if(this.select.selectedIndex>-1){var h=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];u=this.select.options[this.select.selectedIndex],this.selectItem(h)}else this.selectItem(null);var b=u!=null&&u!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),Z}();l.default=p},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(0),i=F(I),o=n(5),r=F(o),a=n(4),c=F(a),s=n(16),d=F(s),A=n(25),f=F(A),p=n(24),Z=F(p),m=n(35),u=F(m),h=n(6),b=F(h),y=n(22),V=F(y),v=n(7),S=F(v),X=n(55),G=F(X),B=n(42),W=F(B),R=n(23),Y=F(R);function F(M){return M&&M.__esModule?M:{default:M}}r.default.register({"blots/block":c.default,"blots/block/embed":a.BlockEmbed,"blots/break":d.default,"blots/container":f.default,"blots/cursor":Z.default,"blots/embed":u.default,"blots/inline":b.default,"blots/scroll":V.default,"blots/text":S.default,"modules/clipboard":G.default,"modules/history":W.default,"modules/keyboard":Y.default}),i.default.register(c.default,d.default,Z.default,b.default,V.default,S.default),l.default=r.default},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(1),i=function(){function o(r){this.domNode=r,this.domNode[I.DATA_KEY]={blot:this}}return Object.defineProperty(o.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),o.create=function(r){if(this.tagName==null)throw new I.ParchmentError("Blot definition missing tagName");var a;return Array.isArray(this.tagName)?(typeof r=="string"&&(r=r.toUpperCase(),parseInt(r).toString()===r&&(r=parseInt(r))),typeof r=="number"?a=document.createElement(this.tagName[r-1]):this.tagName.indexOf(r)>-1?a=document.createElement(r):a=document.createElement(this.tagName[0])):a=document.createElement(this.tagName),this.className&&a.classList.add(this.className),a},o.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},o.prototype.clone=function(){var r=this.domNode.cloneNode(!1);return I.create(r)},o.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[I.DATA_KEY]},o.prototype.deleteAt=function(r,a){var c=this.isolate(r,a);c.remove()},o.prototype.formatAt=function(r,a,c,s){var d=this.isolate(r,a);if(I.query(c,I.Scope.BLOT)!=null&&s)d.wrap(c,s);else if(I.query(c,I.Scope.ATTRIBUTE)!=null){var A=I.create(this.statics.scope);d.wrap(A),A.format(c,s)}},o.prototype.insertAt=function(r,a,c){var s=c==null?I.create("text",a):I.create(a,c),d=this.split(r);this.parent.insertBefore(s,d)},o.prototype.insertInto=function(r,a){a===void 0&&(a=null),this.parent!=null&&this.parent.children.remove(this);var c=null;r.children.insertBefore(this,a),a!=null&&(c=a.domNode),(this.domNode.parentNode!=r.domNode||this.domNode.nextSibling!=c)&&r.domNode.insertBefore(this.domNode,c),this.parent=r,this.attach()},o.prototype.isolate=function(r,a){var c=this.split(r);return c.split(a),c},o.prototype.length=function(){return 1},o.prototype.offset=function(r){return r===void 0&&(r=this.parent),this.parent==null||this==r?0:this.parent.children.offset(this)+this.parent.offset(r)},o.prototype.optimize=function(r){this.domNode[I.DATA_KEY]!=null&&delete this.domNode[I.DATA_KEY].mutations},o.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},o.prototype.replace=function(r){r.parent!=null&&(r.parent.insertBefore(this,r.next),r.remove())},o.prototype.replaceWith=function(r,a){var c=typeof r=="string"?I.create(r,a):r;return c.replace(this),c},o.prototype.split=function(r,a){return r===0?this:this.next},o.prototype.update=function(r,a){},o.prototype.wrap=function(r,a){var c=typeof r=="string"?I.create(r,a):r;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},o.blotName="abstract",o}();l.default=i},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(12),i=n(32),o=n(33),r=n(1),a=function(){function c(s){this.attributes={},this.domNode=s,this.build()}return c.prototype.attribute=function(s,d){d?s.add(this.domNode,d)&&(s.value(this.domNode)!=null?this.attributes[s.attrName]=s:delete this.attributes[s.attrName]):(s.remove(this.domNode),delete this.attributes[s.attrName])},c.prototype.build=function(){var s=this;this.attributes={};var d=I.default.keys(this.domNode),A=i.default.keys(this.domNode),f=o.default.keys(this.domNode);d.concat(A).concat(f).forEach(function(p){var Z=r.query(p,r.Scope.ATTRIBUTE);Z instanceof I.default&&(s.attributes[Z.attrName]=Z)})},c.prototype.copy=function(s){var d=this;Object.keys(this.attributes).forEach(function(A){var f=d.attributes[A].value(d.domNode);s.format(A,f)})},c.prototype.move=function(s){var d=this;this.copy(s),Object.keys(this.attributes).forEach(function(A){d.attributes[A].remove(d.domNode)}),this.attributes={}},c.prototype.values=function(){var s=this;return Object.keys(this.attributes).reduce(function(d,A){return d[A]=s.attributes[A].value(s.domNode),d},{})},c}();l.default=a},function(g,l,n){var I=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,s){c.__proto__=s}||function(c,s){for(var d in s)s.hasOwnProperty(d)&&(c[d]=s[d])};return function(c,s){a(c,s);function d(){this.constructor=c}c.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(12);function o(a,c){var s=a.getAttribute("class")||"";return s.split(/\s+/).filter(function(d){return d.indexOf(c+"-")===0})}var r=function(a){I(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.keys=function(s){return(s.getAttribute("class")||"").split(/\s+/).map(function(d){return d.split("-").slice(0,-1).join("-")})},c.prototype.add=function(s,d){return this.canAdd(s,d)?(this.remove(s),s.classList.add(this.keyName+"-"+d),!0):!1},c.prototype.remove=function(s){var d=o(s,this.keyName);d.forEach(function(A){s.classList.remove(A)}),s.classList.length===0&&s.removeAttribute("class")},c.prototype.value=function(s){var d=o(s,this.keyName)[0]||"",A=d.slice(this.keyName.length+1);return this.canAdd(s,A)?A:""},c}(i.default);l.default=r},function(g,l,n){var I=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,s){c.__proto__=s}||function(c,s){for(var d in s)s.hasOwnProperty(d)&&(c[d]=s[d])};return function(c,s){a(c,s);function d(){this.constructor=c}c.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(12);function o(a){var c=a.split("-"),s=c.slice(1).map(function(d){return d[0].toUpperCase()+d.slice(1)}).join("");return c[0]+s}var r=function(a){I(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.keys=function(s){return(s.getAttribute("style")||"").split(";").map(function(d){var A=d.split(":");return A[0].trim()})},c.prototype.add=function(s,d){return this.canAdd(s,d)?(s.style[o(this.keyName)]=d,!0):!1},c.prototype.remove=function(s){s.style[o(this.keyName)]="",s.getAttribute("style")||s.removeAttribute("style")},c.prototype.value=function(s){var d=s.style[o(this.keyName)];return this.canAdd(s,d)?d:""},c}(i.default);l.default=r},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function r(a,c){for(var s=0;s<c.length;s++){var d=c[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(a,c,s){return c&&r(a.prototype,c),s&&r(a,s),a}}();function i(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}var o=function(){function r(a,c){i(this,r),this.quill=a,this.options=c,this.modules={}}return I(r,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(s){c.modules[s]==null&&c.addModule(s)})}},{key:"addModule",value:function(c){var s=this.quill.constructor.import("modules/"+c);return this.modules[c]=new s(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),r}();o.DEFAULTS={modules:{}},o.themes={default:o},l.default=o},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function m(u,h){for(var b=0;b<h.length;b++){var y=h[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,h,b){return h&&m(u.prototype,h),b&&m(u,b),u}}(),i=function m(u,h,b){u===null&&(u=Function.prototype);var y=Object.getOwnPropertyDescriptor(u,h);if(y===void 0){var V=Object.getPrototypeOf(u);return V===null?void 0:m(V,h,b)}else{if("value"in y)return y.value;var v=y.get;return v===void 0?void 0:v.call(b)}},o=n(0),r=s(o),a=n(7),c=s(a);function s(m){return m&&m.__esModule?m:{default:m}}function d(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function A(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function f(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var p="\uFEFF",Z=function(m){f(u,m);function u(h){d(this,u);var b=A(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,h));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(y){b.contentNode.appendChild(y)}),b.leftGuard=document.createTextNode(p),b.rightGuard=document.createTextNode(p),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return I(u,[{key:"index",value:function(b,y){return b===this.leftGuard?0:b===this.rightGuard?1:i(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"index",this).call(this,b,y)}},{key:"restore",value:function(b){var y=void 0,V=void 0,v=b.data.split(p).join("");if(b===this.leftGuard)if(this.prev instanceof c.default){var S=this.prev.length();this.prev.insertAt(S,v),y={startNode:this.prev.domNode,startOffset:S+v.length}}else V=document.createTextNode(v),this.parent.insertBefore(r.default.create(V),this),y={startNode:V,startOffset:v.length};else b===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,v),y={startNode:this.next.domNode,startOffset:v.length}):(V=document.createTextNode(v),this.parent.insertBefore(r.default.create(V),this.next),y={startNode:V,startOffset:v.length}));return b.data=p,y}},{key:"update",value:function(b,y){var V=this;b.forEach(function(v){if(v.type==="characterData"&&(v.target===V.leftGuard||v.target===V.rightGuard)){var S=V.restore(v.target);S&&(y.range=S)}})}}]),u}(r.default.Embed);l.default=Z},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.AlignStyle=l.AlignClass=l.AlignAttribute=void 0;var I=n(0),i=o(I);function o(d){return d&&d.__esModule?d:{default:d}}var r={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new i.default.Attributor.Attribute("align","align",r),c=new i.default.Attributor.Class("align","ql-align",r),s=new i.default.Attributor.Style("align","text-align",r);l.AlignAttribute=a,l.AlignClass=c,l.AlignStyle=s},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundStyle=l.BackgroundClass=void 0;var I=n(0),i=r(I),o=n(26);function r(s){return s&&s.__esModule?s:{default:s}}var a=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),c=new o.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});l.BackgroundClass=a,l.BackgroundStyle=c},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.DirectionStyle=l.DirectionClass=l.DirectionAttribute=void 0;var I=n(0),i=o(I);function o(d){return d&&d.__esModule?d:{default:d}}var r={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},a=new i.default.Attributor.Attribute("direction","dir",r),c=new i.default.Attributor.Class("direction","ql-direction",r),s=new i.default.Attributor.Style("direction","direction",r);l.DirectionAttribute=a,l.DirectionClass=c,l.DirectionStyle=s},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.FontClass=l.FontStyle=void 0;var I=function(){function m(u,h){for(var b=0;b<h.length;b++){var y=h[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,h,b){return h&&m(u.prototype,h),b&&m(u,b),u}}(),i=function m(u,h,b){u===null&&(u=Function.prototype);var y=Object.getOwnPropertyDescriptor(u,h);if(y===void 0){var V=Object.getPrototypeOf(u);return V===null?void 0:m(V,h,b)}else{if("value"in y)return y.value;var v=y.get;return v===void 0?void 0:v.call(b)}},o=n(0),r=a(o);function a(m){return m&&m.__esModule?m:{default:m}}function c(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function s(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function d(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var A={scope:r.default.Scope.INLINE,whitelist:["serif","monospace"]},f=new r.default.Attributor.Class("font","ql-font",A),p=function(m){d(u,m);function u(){return c(this,u),s(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return I(u,[{key:"value",value:function(b){return i(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),u}(r.default.Attributor.Style),Z=new p("font","font-family",A);l.FontStyle=Z,l.FontClass=f},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.SizeStyle=l.SizeClass=void 0;var I=n(0),i=o(I);function o(c){return c&&c.__esModule?c:{default:c}}var r=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});l.SizeClass=r,l.SizeStyle=a},function(g,l,n){g.exports={align:{"":n(76),center:n(77),right:n(78),justify:n(79)},background:n(80),blockquote:n(81),bold:n(82),clean:n(83),code:n(58),"code-block":n(58),color:n(84),direction:{"":n(85),rtl:n(86)},float:{center:n(87),full:n(88),left:n(89),right:n(90)},formula:n(91),header:{1:n(92),2:n(93)},italic:n(94),image:n(95),indent:{"+1":n(96),"-1":n(97)},link:n(98),list:{ordered:n(99),bullet:n(100),check:n(101)},script:{sub:n(102),super:n(103)},strike:n(104),underline:n(105),video:n(106)}},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.getLastChangeIndex=l.default=void 0;var I=function(){function h(b,y){for(var V=0;V<y.length;V++){var v=y[V];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,y,V){return y&&h(b.prototype,y),V&&h(b,V),b}}(),i=n(0),o=d(i),r=n(5),a=d(r),c=n(9),s=d(c);function d(h){return h&&h.__esModule?h:{default:h}}function A(h,b){if(!(h instanceof b))throw new TypeError("Cannot call a class as a function")}function f(h,b){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:h}function p(h,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);h.prototype=Object.create(b&&b.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(h,b):h.__proto__=b)}var Z=function(h){p(b,h);function b(y,V){A(this,b);var v=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,y,V));return v.lastRecorded=0,v.ignoreChange=!1,v.clear(),v.quill.on(a.default.events.EDITOR_CHANGE,function(S,X,G,B){S!==a.default.events.TEXT_CHANGE||v.ignoreChange||(!v.options.userOnly||B===a.default.sources.USER?v.record(X,G):v.transform(X))}),v.quill.keyboard.addBinding({key:"Z",shortKey:!0},v.undo.bind(v)),v.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},v.redo.bind(v)),/Win/i.test(navigator.platform)&&v.quill.keyboard.addBinding({key:"Y",shortKey:!0},v.redo.bind(v)),v}return I(b,[{key:"change",value:function(V,v){if(this.stack[V].length!==0){var S=this.stack[V].pop();this.stack[v].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[V],a.default.sources.USER),this.ignoreChange=!1;var X=u(S[V]);this.quill.setSelection(X)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(V,v){if(V.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(v),X=Date.now();if(this.lastRecorded+this.options.delay>X&&this.stack.undo.length>0){var G=this.stack.undo.pop();S=S.compose(G.undo),V=G.redo.compose(V)}else this.lastRecorded=X;this.stack.undo.push({redo:V,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(V){this.stack.undo.forEach(function(v){v.undo=V.transform(v.undo,!0),v.redo=V.transform(v.redo,!0)}),this.stack.redo.forEach(function(v){v.undo=V.transform(v.undo,!0),v.redo=V.transform(v.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(s.default);Z.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function m(h){var b=h.ops[h.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(y){return o.default.query(y,o.default.Scope.BLOCK)!=null}):!1}function u(h){var b=h.reduce(function(V,v){return V+=v.delete||0,V},0),y=h.length()-b;return m(h)&&(y-=1),y}l.default=Z,l.getLastChangeIndex=u},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BaseTooltip=void 0;var I=function(){function N(K,z){for(var L=0;L<z.length;L++){var H=z[L];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(K,H.key,H)}}return function(K,z,L){return z&&N(K.prototype,z),L&&N(K,L),K}}(),i=function N(K,z,L){K===null&&(K=Function.prototype);var H=Object.getOwnPropertyDescriptor(K,z);if(H===void 0){var T=Object.getPrototypeOf(K);return T===null?void 0:N(T,z,L)}else{if("value"in H)return H.value;var Q=H.get;return Q===void 0?void 0:Q.call(L)}},o=n(3),r=X(o),a=n(2),c=X(a),s=n(8),d=X(s),A=n(23),f=X(A),p=n(34),Z=X(p),m=n(59),u=X(m),h=n(60),b=X(h),y=n(28),V=X(y),v=n(61),S=X(v);function X(N){return N&&N.__esModule?N:{default:N}}function G(N,K){if(!(N instanceof K))throw new TypeError("Cannot call a class as a function")}function B(N,K){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:N}function W(N,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);N.prototype=Object.create(K&&K.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(N,K):N.__proto__=K)}var R=[!1,"center","right","justify"],Y=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],F=[!1,"serif","monospace"],M=["1","2","3",!1],U=["small",!1,"large","huge"],E=function(N){W(K,N);function K(z,L){G(this,K);var H=B(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,z,L)),T=function Q(j){if(!document.body.contains(z.root))return document.body.removeEventListener("click",Q);H.tooltip!=null&&!H.tooltip.root.contains(j.target)&&document.activeElement!==H.tooltip.textbox&&!H.quill.hasFocus()&&H.tooltip.hide(),H.pickers!=null&&H.pickers.forEach(function(D){D.container.contains(j.target)||D.close()})};return z.emitter.listenDOM("click",document.body,T),H}return I(K,[{key:"addModule",value:function(L){var H=i(K.prototype.__proto__||Object.getPrototypeOf(K.prototype),"addModule",this).call(this,L);return L==="toolbar"&&this.extendToolbar(H),H}},{key:"buildButtons",value:function(L,H){L.forEach(function(T){var Q=T.getAttribute("class")||"";Q.split(/\s+/).forEach(function(j){if(j.startsWith("ql-")&&(j=j.slice(3),H[j]!=null))if(j==="direction")T.innerHTML=H[j][""]+H[j].rtl;else if(typeof H[j]=="string")T.innerHTML=H[j];else{var D=T.value||"";D!=null&&H[j][D]&&(T.innerHTML=H[j][D])}})})}},{key:"buildPickers",value:function(L,H){var T=this;this.pickers=L.map(function(j){if(j.classList.contains("ql-align"))return j.querySelector("option")==null&&J(j,R),new b.default(j,H.align);if(j.classList.contains("ql-background")||j.classList.contains("ql-color")){var D=j.classList.contains("ql-background")?"background":"color";return j.querySelector("option")==null&&J(j,Y,D==="background"?"#ffffff":"#000000"),new u.default(j,H[D])}else return j.querySelector("option")==null&&(j.classList.contains("ql-font")?J(j,F):j.classList.contains("ql-header")?J(j,M):j.classList.contains("ql-size")&&J(j,U)),new V.default(j)});var Q=function(){T.pickers.forEach(function(D){D.update()})};this.quill.on(d.default.events.EDITOR_CHANGE,Q)}}]),K}(Z.default);E.DEFAULTS=(0,r.default)(!0,{},Z.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var K=this,z=this.container.querySelector("input.ql-image[type=file]");z==null&&(z=document.createElement("input"),z.setAttribute("type","file"),z.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),z.classList.add("ql-image"),z.addEventListener("change",function(){if(z.files!=null&&z.files[0]!=null){var L=new FileReader;L.onload=function(H){var T=K.quill.getSelection(!0);K.quill.updateContents(new c.default().retain(T.index).delete(T.length).insert({image:H.target.result}),d.default.sources.USER),K.quill.setSelection(T.index+1,d.default.sources.SILENT),z.value=""},L.readAsDataURL(z.files[0])}}),this.container.appendChild(z)),z.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var x=function(N){W(K,N);function K(z,L){G(this,K);var H=B(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,z,L));return H.textbox=H.root.querySelector('input[type="text"]'),H.listen(),H}return I(K,[{key:"listen",value:function(){var L=this;this.textbox.addEventListener("keydown",function(H){f.default.match(H,"enter")?(L.save(),H.preventDefault()):f.default.match(H,"escape")&&(L.cancel(),H.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),H!=null?this.textbox.value=H:L!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+L)||""),this.root.setAttribute("data-mode",L)}},{key:"restoreFocus",value:function(){var L=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=L}},{key:"save",value:function(){var L=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var H=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",L,d.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",L,d.default.sources.USER)),this.quill.root.scrollTop=H;break}case"video":L=w(L);case"formula":{if(!L)break;var T=this.quill.getSelection(!0);if(T!=null){var Q=T.index+T.length;this.quill.insertEmbed(Q,this.root.getAttribute("data-mode"),L,d.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Q+1," ",d.default.sources.USER),this.quill.setSelection(Q+2,d.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),K}(S.default);function w(N){var K=N.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||N.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return K?(K[1]||"https")+"://www.youtube.com/embed/"+K[2]+"?showinfo=0":(K=N.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(K[1]||"https")+"://player.vimeo.com/video/"+K[2]+"/":N}function J(N,K){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;K.forEach(function(L){var H=document.createElement("option");L===z?H.setAttribute("selected","selected"):H.setAttribute("value",L),N.appendChild(H)})}l.BaseTooltip=x,l.default=E},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function i(){this.head=this.tail=null,this.length=0}return i.prototype.append=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];this.insertBefore(o[0],null),o.length>1&&this.append.apply(this,o.slice(1))},i.prototype.contains=function(o){for(var r,a=this.iterator();r=a();)if(r===o)return!0;return!1},i.prototype.insertBefore=function(o,r){o&&(o.next=r,r!=null?(o.prev=r.prev,r.prev!=null&&(r.prev.next=o),r.prev=o,r===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)},i.prototype.offset=function(o){for(var r=0,a=this.head;a!=null;){if(a===o)return r;r+=a.length(),a=a.next}return-1},i.prototype.remove=function(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)},i.prototype.iterator=function(o){return o===void 0&&(o=this.head),function(){var r=o;return o!=null&&(o=o.next),r}},i.prototype.find=function(o,r){r===void 0&&(r=!1);for(var a,c=this.iterator();a=c();){var s=a.length();if(o<s||r&&o===s&&(a.next==null||a.next.length()!==0))return[a,o];o-=s}return[null,0]},i.prototype.forEach=function(o){for(var r,a=this.iterator();r=a();)o(r)},i.prototype.forEachAt=function(o,r,a){if(!(r<=0))for(var c=this.find(o),s=c[0],d=c[1],A,f=o-d,p=this.iterator(s);(A=p())&&f<o+r;){var Z=A.length();o>f?a(A,o-f,Math.min(r,f+Z-o)):a(A,0,Math.min(Z,o+r-f)),f+=Z}},i.prototype.map=function(o){return this.reduce(function(r,a){return r.push(o(a)),r},[])},i.prototype.reduce=function(o,r){for(var a,c=this.iterator();a=c();)r=o(r,a);return r},i}();l.default=I},function(g,l,n){var I=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,A){d.__proto__=A}||function(d,A){for(var f in A)A.hasOwnProperty(f)&&(d[f]=A[f])};return function(d,A){s(d,A);function f(){this.constructor=d}d.prototype=A===null?Object.create(A):(f.prototype=A.prototype,new f)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(17),o=n(1),r={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},a=100,c=function(s){I(d,s);function d(A){var f=s.call(this,A)||this;return f.scroll=f,f.observer=new MutationObserver(function(p){f.update(p)}),f.observer.observe(f.domNode,r),f.attach(),f}return d.prototype.detach=function(){s.prototype.detach.call(this),this.observer.disconnect()},d.prototype.deleteAt=function(A,f){this.update(),A===0&&f===this.length()?this.children.forEach(function(p){p.remove()}):s.prototype.deleteAt.call(this,A,f)},d.prototype.formatAt=function(A,f,p,Z){this.update(),s.prototype.formatAt.call(this,A,f,p,Z)},d.prototype.insertAt=function(A,f,p){this.update(),s.prototype.insertAt.call(this,A,f,p)},d.prototype.optimize=function(A,f){var p=this;A===void 0&&(A=[]),f===void 0&&(f={}),s.prototype.optimize.call(this,f);for(var Z=[].slice.call(this.observer.takeRecords());Z.length>0;)A.push(Z.pop());for(var m=function(y,V){V===void 0&&(V=!0),!(y==null||y===p)&&y.domNode.parentNode!=null&&(y.domNode[o.DATA_KEY].mutations==null&&(y.domNode[o.DATA_KEY].mutations=[]),V&&m(y.parent))},u=function(y){y.domNode[o.DATA_KEY]==null||y.domNode[o.DATA_KEY].mutations==null||(y instanceof i.default&&y.children.forEach(u),y.optimize(f))},h=A,b=0;h.length>0;b+=1){if(b>=a)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(function(y){var V=o.find(y.target,!0);V!=null&&(V.domNode===y.target&&(y.type==="childList"?(m(o.find(y.previousSibling,!1)),[].forEach.call(y.addedNodes,function(v){var S=o.find(v,!1);m(S,!1),S instanceof i.default&&S.children.forEach(function(X){m(X,!1)})})):y.type==="attributes"&&m(V.prev)),m(V))}),this.children.forEach(u),h=[].slice.call(this.observer.takeRecords()),Z=h.slice();Z.length>0;)A.push(Z.pop())}},d.prototype.update=function(A,f){var p=this;f===void 0&&(f={}),A=A||this.observer.takeRecords(),A.map(function(Z){var m=o.find(Z.target,!0);return m==null?null:m.domNode[o.DATA_KEY].mutations==null?(m.domNode[o.DATA_KEY].mutations=[Z],m):(m.domNode[o.DATA_KEY].mutations.push(Z),null)}).forEach(function(Z){Z==null||Z===p||Z.domNode[o.DATA_KEY]==null||Z.update(Z.domNode[o.DATA_KEY].mutations||[],f)}),this.domNode[o.DATA_KEY].mutations!=null&&s.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,f),this.optimize(A,f)},d.blotName="scroll",d.defaultChild="block",d.scope=o.Scope.BLOCK_BLOT,d.tagName="DIV",d}(i.default);l.default=c},function(g,l,n){var I=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,d){s.__proto__=d}||function(s,d){for(var A in d)d.hasOwnProperty(A)&&(s[A]=d[A])};return function(s,d){c(s,d);function A(){this.constructor=s}s.prototype=d===null?Object.create(d):(A.prototype=d.prototype,new A)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(18),o=n(1);function r(c,s){if(Object.keys(c).length!==Object.keys(s).length)return!1;for(var d in c)if(c[d]!==s[d])return!1;return!0}var a=function(c){I(s,c);function s(){return c!==null&&c.apply(this,arguments)||this}return s.formats=function(d){if(d.tagName!==s.tagName)return c.formats.call(this,d)},s.prototype.format=function(d,A){var f=this;d===this.statics.blotName&&!A?(this.children.forEach(function(p){p instanceof i.default||(p=p.wrap(s.blotName,!0)),f.attributes.copy(p)}),this.unwrap()):c.prototype.format.call(this,d,A)},s.prototype.formatAt=function(d,A,f,p){if(this.formats()[f]!=null||o.query(f,o.Scope.ATTRIBUTE)){var Z=this.isolate(d,A);Z.format(f,p)}else c.prototype.formatAt.call(this,d,A,f,p)},s.prototype.optimize=function(d){c.prototype.optimize.call(this,d);var A=this.formats();if(Object.keys(A).length===0)return this.unwrap();var f=this.next;f instanceof s&&f.prev===this&&r(A,f.formats())&&(f.moveChildren(this),f.remove())},s.blotName="inline",s.scope=o.Scope.INLINE_BLOT,s.tagName="SPAN",s}(i.default);l.default=a},function(g,l,n){var I=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,s){c.__proto__=s}||function(c,s){for(var d in s)s.hasOwnProperty(d)&&(c[d]=s[d])};return function(c,s){a(c,s);function d(){this.constructor=c}c.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(18),o=n(1),r=function(a){I(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.formats=function(s){var d=o.query(c.blotName).tagName;if(s.tagName!==d)return a.formats.call(this,s)},c.prototype.format=function(s,d){o.query(s,o.Scope.BLOCK)!=null&&(s===this.statics.blotName&&!d?this.replaceWith(c.blotName):a.prototype.format.call(this,s,d))},c.prototype.formatAt=function(s,d,A,f){o.query(A,o.Scope.BLOCK)!=null?this.format(A,f):a.prototype.formatAt.call(this,s,d,A,f)},c.prototype.insertAt=function(s,d,A){if(A==null||o.query(d,o.Scope.INLINE)!=null)a.prototype.insertAt.call(this,s,d,A);else{var f=this.split(s),p=o.create(d,A);f.parent.insertBefore(p,f)}},c.prototype.update=function(s,d){navigator.userAgent.match(/Trident/)?this.build():a.prototype.update.call(this,s,d)},c.blotName="block",c.scope=o.Scope.BLOCK_BLOT,c.tagName="P",c}(i.default);l.default=r},function(g,l,n){var I=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var s in c)c.hasOwnProperty(s)&&(a[s]=c[s])};return function(a,c){r(a,c);function s(){this.constructor=a}a.prototype=c===null?Object.create(c):(s.prototype=c.prototype,new s)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(19),o=function(r){I(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.formats=function(c){},a.prototype.format=function(c,s){r.prototype.formatAt.call(this,0,this.length(),c,s)},a.prototype.formatAt=function(c,s,d,A){c===0&&s===this.length()?this.format(d,A):r.prototype.formatAt.call(this,c,s,d,A)},a.prototype.formats=function(){return this.statics.formats(this.domNode)},a}(i.default);l.default=o},function(g,l,n){var I=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,s){c.__proto__=s}||function(c,s){for(var d in s)s.hasOwnProperty(d)&&(c[d]=s[d])};return function(c,s){a(c,s);function d(){this.constructor=c}c.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}}();Object.defineProperty(l,"__esModule",{value:!0});var i=n(19),o=n(1),r=function(a){I(c,a);function c(s){var d=a.call(this,s)||this;return d.text=d.statics.value(d.domNode),d}return c.create=function(s){return document.createTextNode(s)},c.value=function(s){var d=s.data;return d.normalize&&(d=d.normalize()),d},c.prototype.deleteAt=function(s,d){this.domNode.data=this.text=this.text.slice(0,s)+this.text.slice(s+d)},c.prototype.index=function(s,d){return this.domNode===s?d:-1},c.prototype.insertAt=function(s,d,A){A==null?(this.text=this.text.slice(0,s)+d+this.text.slice(s),this.domNode.data=this.text):a.prototype.insertAt.call(this,s,d,A)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(s){a.prototype.optimize.call(this,s),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(s,d){return[this.domNode,s]},c.prototype.split=function(s,d){if(d===void 0&&(d=!1),!d){if(s===0)return this;if(s===this.length())return this.next}var A=o.create(this.domNode.splitText(s));return this.parent.insertBefore(A,this.next),this.text=this.statics.value(this.domNode),A},c.prototype.update=function(s,d){var A=this;s.some(function(f){return f.type==="characterData"&&f.target===A.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=o.Scope.INLINE_BLOT,c}(i.default);l.default=r},function(g,l,n){var I=document.createElement("div");if(I.classList.toggle("test-class",!1),I.classList.contains("test-class")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,r){return arguments.length>1&&!this.contains(o)==!r?r:i.call(this,o)}}String.prototype.startsWith||(String.prototype.startsWith=function(o,r){return r=r||0,this.substr(r,o.length)===o}),String.prototype.endsWith||(String.prototype.endsWith=function(o,r){var a=this.toString();(typeof r!="number"||!isFinite(r)||Math.floor(r)!==r||r>a.length)&&(r=a.length),r-=o.length;var c=a.indexOf(o,r);return c!==-1&&c===r}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(r){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof r!="function")throw new TypeError("predicate must be a function");for(var a=Object(this),c=a.length>>>0,s=arguments[1],d,A=0;A<c;A++)if(d=a[A],r.call(s,d,A,a))return d}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(g,l){var n=-1,I=1,i=0;function o(b,y,V){if(b==y)return b?[[i,b]]:[];(V<0||b.length<V)&&(V=null);var v=s(b,y),S=b.substring(0,v);b=b.substring(v),y=y.substring(v),v=d(b,y);var X=b.substring(b.length-v);b=b.substring(0,b.length-v),y=y.substring(0,y.length-v);var G=r(b,y);return S&&G.unshift([i,S]),X&&G.push([i,X]),f(G),V!=null&&(G=m(G,V)),G=u(G),G}function r(b,y){var V;if(!b)return[[I,y]];if(!y)return[[n,b]];var v=b.length>y.length?b:y,S=b.length>y.length?y:b,X=v.indexOf(S);if(X!=-1)return V=[[I,v.substring(0,X)],[i,S],[I,v.substring(X+S.length)]],b.length>y.length&&(V[0][0]=V[2][0]=n),V;if(S.length==1)return[[n,b],[I,y]];var G=A(b,y);if(G){var B=G[0],W=G[1],R=G[2],Y=G[3],F=G[4],M=o(B,R),U=o(W,Y);return M.concat([[i,F]],U)}return a(b,y)}function a(b,y){for(var V=b.length,v=y.length,S=Math.ceil((V+v)/2),X=S,G=2*S,B=new Array(G),W=new Array(G),R=0;R<G;R++)B[R]=-1,W[R]=-1;B[X+1]=0,W[X+1]=0;for(var Y=V-v,F=Y%2!=0,M=0,U=0,E=0,x=0,w=0;w<S;w++){for(var J=-w+M;J<=w-U;J+=2){var N=X+J,K;J==-w||J!=w&&B[N-1]<B[N+1]?K=B[N+1]:K=B[N-1]+1;for(var z=K-J;K<V&&z<v&&b.charAt(K)==y.charAt(z);)K++,z++;if(B[N]=K,K>V)U+=2;else if(z>v)M+=2;else if(F){var L=X+Y-J;if(L>=0&&L<G&&W[L]!=-1){var H=V-W[L];if(K>=H)return c(b,y,K,z)}}}for(var T=-w+E;T<=w-x;T+=2){var L=X+T,H;T==-w||T!=w&&W[L-1]<W[L+1]?H=W[L+1]:H=W[L-1]+1;for(var Q=H-T;H<V&&Q<v&&b.charAt(V-H-1)==y.charAt(v-Q-1);)H++,Q++;if(W[L]=H,H>V)x+=2;else if(Q>v)E+=2;else if(!F){var N=X+Y-T;if(N>=0&&N<G&&B[N]!=-1){var K=B[N],z=X+K-N;if(H=V-H,K>=H)return c(b,y,K,z)}}}}return[[n,b],[I,y]]}function c(b,y,V,v){var S=b.substring(0,V),X=y.substring(0,v),G=b.substring(V),B=y.substring(v),W=o(S,X),R=o(G,B);return W.concat(R)}function s(b,y){if(!b||!y||b.charAt(0)!=y.charAt(0))return 0;for(var V=0,v=Math.min(b.length,y.length),S=v,X=0;V<S;)b.substring(X,S)==y.substring(X,S)?(V=S,X=V):v=S,S=Math.floor((v-V)/2+V);return S}function d(b,y){if(!b||!y||b.charAt(b.length-1)!=y.charAt(y.length-1))return 0;for(var V=0,v=Math.min(b.length,y.length),S=v,X=0;V<S;)b.substring(b.length-S,b.length-X)==y.substring(y.length-S,y.length-X)?(V=S,X=V):v=S,S=Math.floor((v-V)/2+V);return S}function A(b,y){var V=b.length>y.length?b:y,v=b.length>y.length?y:b;if(V.length<4||v.length*2<V.length)return null;function S(U,E,x){for(var w=U.substring(x,x+Math.floor(U.length/4)),J=-1,N="",K,z,L,H;(J=E.indexOf(w,J+1))!=-1;){var T=s(U.substring(x),E.substring(J)),Q=d(U.substring(0,x),E.substring(0,J));N.length<Q+T&&(N=E.substring(J-Q,J)+E.substring(J,J+T),K=U.substring(0,x-Q),z=U.substring(x+T),L=E.substring(0,J-Q),H=E.substring(J+T))}return N.length*2>=U.length?[K,z,L,H,N]:null}var X=S(V,v,Math.ceil(V.length/4)),G=S(V,v,Math.ceil(V.length/2)),B;if(!X&&!G)return null;G?X?B=X[4].length>G[4].length?X:G:B=G:B=X;var W,R,Y,F;b.length>y.length?(W=B[0],R=B[1],Y=B[2],F=B[3]):(Y=B[0],F=B[1],W=B[2],R=B[3]);var M=B[4];return[W,R,Y,F,M]}function f(b){b.push([i,""]);for(var y=0,V=0,v=0,S="",X="",G;y<b.length;)switch(b[y][0]){case I:v++,X+=b[y][1],y++;break;case n:V++,S+=b[y][1],y++;break;case i:V+v>1?(V!==0&&v!==0&&(G=s(X,S),G!==0&&(y-V-v>0&&b[y-V-v-1][0]==i?b[y-V-v-1][1]+=X.substring(0,G):(b.splice(0,0,[i,X.substring(0,G)]),y++),X=X.substring(G),S=S.substring(G)),G=d(X,S),G!==0&&(b[y][1]=X.substring(X.length-G)+b[y][1],X=X.substring(0,X.length-G),S=S.substring(0,S.length-G))),V===0?b.splice(y-v,V+v,[I,X]):v===0?b.splice(y-V,V+v,[n,S]):b.splice(y-V-v,V+v,[n,S],[I,X]),y=y-V-v+(V?1:0)+(v?1:0)+1):y!==0&&b[y-1][0]==i?(b[y-1][1]+=b[y][1],b.splice(y,1)):y++,v=0,V=0,S="",X="";break}b[b.length-1][1]===""&&b.pop();var B=!1;for(y=1;y<b.length-1;)b[y-1][0]==i&&b[y+1][0]==i&&(b[y][1].substring(b[y][1].length-b[y-1][1].length)==b[y-1][1]?(b[y][1]=b[y-1][1]+b[y][1].substring(0,b[y][1].length-b[y-1][1].length),b[y+1][1]=b[y-1][1]+b[y+1][1],b.splice(y-1,1),B=!0):b[y][1].substring(0,b[y+1][1].length)==b[y+1][1]&&(b[y-1][1]+=b[y+1][1],b[y][1]=b[y][1].substring(b[y+1][1].length)+b[y+1][1],b.splice(y+1,1),B=!0)),y++;B&&f(b)}var p=o;p.INSERT=I,p.DELETE=n,p.EQUAL=i,g.exports=p;function Z(b,y){if(y===0)return[i,b];for(var V=0,v=0;v<b.length;v++){var S=b[v];if(S[0]===n||S[0]===i){var X=V+S[1].length;if(y===X)return[v+1,b];if(y<X){b=b.slice();var G=y-V,B=[S[0],S[1].slice(0,G)],W=[S[0],S[1].slice(G)];return b.splice(v,1,B,W),[v+1,b]}else V=X}}throw new Error("cursor_pos is out of bounds!")}function m(b,y){var V=Z(b,y),v=V[1],S=V[0],X=v[S],G=v[S+1];if(X==null)return b;if(X[0]!==i)return b;if(G!=null&&X[1]+G[1]===G[1]+X[1])return v.splice(S,2,G,X),h(v,S,2);if(G!=null&&G[1].indexOf(X[1])===0){v.splice(S,2,[G[0],X[1]],[0,X[1]]);var B=G[1].slice(X[1].length);return B.length>0&&v.splice(S+2,0,[G[0],B]),h(v,S,3)}else return b}function u(b){for(var y=!1,V=function(G){return G.charCodeAt(0)>=56320&&G.charCodeAt(0)<=57343},v=function(G){return G.charCodeAt(G.length-1)>=55296&&G.charCodeAt(G.length-1)<=56319},S=2;S<b.length;S+=1)b[S-2][0]===i&&v(b[S-2][1])&&b[S-1][0]===n&&V(b[S-1][1])&&b[S][0]===I&&V(b[S][1])&&(y=!0,b[S-1][1]=b[S-2][1].slice(-1)+b[S-1][1],b[S][1]=b[S-2][1].slice(-1)+b[S][1],b[S-2][1]=b[S-2][1].slice(0,-1));if(!y)return b;for(var X=[],S=0;S<b.length;S+=1)b[S][1].length>0&&X.push(b[S]);return X}function h(b,y,V){for(var v=y+V-1;v>=0&&v>=y-1;v--)if(v+1<b.length){var S=b[v],X=b[v+1];S[0]===X[1]&&b.splice(v,2,[S[0],S[1]+X[1]])}return b}},function(g,l){l=g.exports=typeof Object.keys=="function"?Object.keys:n,l.shim=n;function n(I){var i=[];for(var o in I)i.push(o);return i}},function(g,l){var n=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";l=g.exports=n?I:i,l.supported=I;function I(o){return Object.prototype.toString.call(o)=="[object Arguments]"}l.unsupported=i;function i(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}},function(g,l){var n=Object.prototype.hasOwnProperty,I="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(I=!1));function o(a,c,s){this.fn=a,this.context=c,this.once=s||!1}function r(){this._events=new i,this._eventsCount=0}r.prototype.eventNames=function(){var c=[],s,d;if(this._eventsCount===0)return c;for(d in s=this._events)n.call(s,d)&&c.push(I?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(s)):c},r.prototype.listeners=function(c,s){var d=I?I+c:c,A=this._events[d];if(s)return!!A;if(!A)return[];if(A.fn)return[A.fn];for(var f=0,p=A.length,Z=new Array(p);f<p;f++)Z[f]=A[f].fn;return Z},r.prototype.emit=function(c,s,d,A,f,p){var Z=I?I+c:c;if(!this._events[Z])return!1;var m=this._events[Z],u=arguments.length,h,b;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),u){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,s),!0;case 3:return m.fn.call(m.context,s,d),!0;case 4:return m.fn.call(m.context,s,d,A),!0;case 5:return m.fn.call(m.context,s,d,A,f),!0;case 6:return m.fn.call(m.context,s,d,A,f,p),!0}for(b=1,h=new Array(u-1);b<u;b++)h[b-1]=arguments[b];m.fn.apply(m.context,h)}else{var y=m.length,V;for(b=0;b<y;b++)switch(m[b].once&&this.removeListener(c,m[b].fn,void 0,!0),u){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,s);break;case 3:m[b].fn.call(m[b].context,s,d);break;case 4:m[b].fn.call(m[b].context,s,d,A);break;default:if(!h)for(V=1,h=new Array(u-1);V<u;V++)h[V-1]=arguments[V];m[b].fn.apply(m[b].context,h)}}return!0},r.prototype.on=function(c,s,d){var A=new o(s,d||this),f=I?I+c:c;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],A]:this._events[f].push(A):(this._events[f]=A,this._eventsCount++),this},r.prototype.once=function(c,s,d){var A=new o(s,d||this,!0),f=I?I+c:c;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],A]:this._events[f].push(A):(this._events[f]=A,this._eventsCount++),this},r.prototype.removeListener=function(c,s,d,A){var f=I?I+c:c;if(!this._events[f])return this;if(!s)return--this._eventsCount===0?this._events=new i:delete this._events[f],this;var p=this._events[f];if(p.fn)p.fn===s&&(!A||p.once)&&(!d||p.context===d)&&(--this._eventsCount===0?this._events=new i:delete this._events[f]);else{for(var Z=0,m=[],u=p.length;Z<u;Z++)(p[Z].fn!==s||A&&!p[Z].once||d&&p[Z].context!==d)&&m.push(p[Z]);m.length?this._events[f]=m.length===1?m[0]:m:--this._eventsCount===0?this._events=new i:delete this._events[f]}return this},r.prototype.removeAllListeners=function(c){var s;return c?(s=I?I+c:c,this._events[s]&&(--this._eventsCount===0?this._events=new i:delete this._events[s])):(this._events=new i,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=I,r.EventEmitter=r,typeof g<"u"&&(g.exports=r)},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.matchText=l.matchSpacing=l.matchNewline=l.matchBlot=l.matchAttributor=l.default=void 0;var I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},i=function(){function O(P,ge){var le=[],$=!0,ue=!1,se=void 0;try{for(var me=P[Symbol.iterator](),Ce;!($=(Ce=me.next()).done)&&(le.push(Ce.value),!(ge&&le.length===ge));$=!0);}catch(Ye){ue=!0,se=Ye}finally{try{!$&&me.return&&me.return()}finally{if(ue)throw se}}return le}return function(P,ge){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return O(P,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function O(P,ge){for(var le=0;le<ge.length;le++){var $=ge[le];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(P,$.key,$)}}return function(P,ge,le){return ge&&O(P.prototype,ge),le&&O(P,le),P}}(),r=n(3),a=W(r),c=n(2),s=W(c),d=n(0),A=W(d),f=n(5),p=W(f),Z=n(10),m=W(Z),u=n(9),h=W(u),b=n(36),y=n(37),V=n(13),v=W(V),S=n(26),X=n(38),G=n(39),B=n(40);function W(O){return O&&O.__esModule?O:{default:O}}function R(O,P,ge){return P in O?Object.defineProperty(O,P,{value:ge,enumerable:!0,configurable:!0,writable:!0}):O[P]=ge,O}function Y(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}function F(O,P){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:O}function M(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(O,P):O.__proto__=P)}var U=(0,m.default)("quill:clipboard"),E="__ql-matcher",x=[[Node.TEXT_NODE,ve],[Node.TEXT_NODE,ae],["br",te],[Node.ELEMENT_NODE,ae],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,j],[Node.ELEMENT_NODE,Xe],["li",Ie],["b",Q.bind(Q,"bold")],["i",Q.bind(Q,"italic")],["style",ne]],w=[b.AlignAttribute,X.DirectionAttribute].reduce(function(O,P){return O[P.keyName]=P,O},{}),J=[b.AlignStyle,y.BackgroundStyle,S.ColorStyle,X.DirectionStyle,G.FontStyle,B.SizeStyle].reduce(function(O,P){return O[P.keyName]=P,O},{}),N=function(O){M(P,O);function P(ge,le){Y(this,P);var $=F(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,ge,le));return $.quill.root.addEventListener("paste",$.onPaste.bind($)),$.container=$.quill.addContainer("ql-clipboard"),$.container.setAttribute("contenteditable",!0),$.container.setAttribute("tabindex",-1),$.matchers=[],x.concat($.options.matchers).forEach(function(ue){var se=i(ue,2),me=se[0],Ce=se[1];!le.matchVisual&&Ce===oe||$.addMatcher(me,Ce)}),$}return o(P,[{key:"addMatcher",value:function(le,$){this.matchers.push([le,$])}},{key:"convert",value:function(le){if(typeof le=="string")return this.container.innerHTML=le.replace(/\>\r?\n +\</g,"><"),this.convert();var $=this.quill.getFormat(this.quill.selection.savedRange.index);if($[v.default.blotName]){var ue=this.container.innerText;return this.container.innerHTML="",new s.default().insert(ue,R({},v.default.blotName,$[v.default.blotName]))}var se=this.prepareMatching(),me=i(se,2),Ce=me[0],Ye=me[1],We=T(this.container,Ce,Ye);return L(We,`
`)&&We.ops[We.ops.length-1].attributes==null&&(We=We.compose(new s.default().retain(We.length()-1).delete(1))),U.log("convert",this.container.innerHTML,We),this.container.innerHTML="",We}},{key:"dangerouslyPasteHTML",value:function(le,$){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof le=="string")this.quill.setContents(this.convert(le),$),this.quill.setSelection(0,p.default.sources.SILENT);else{var se=this.convert($);this.quill.updateContents(new s.default().retain(le).concat(se),ue),this.quill.setSelection(le+se.length(),p.default.sources.SILENT)}}},{key:"onPaste",value:function(le){var $=this;if(!(le.defaultPrevented||!this.quill.isEnabled())){var ue=this.quill.getSelection(),se=new s.default().retain(ue.index),me=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(p.default.sources.SILENT),setTimeout(function(){se=se.concat($.convert()).delete(ue.length),$.quill.updateContents(se,p.default.sources.USER),$.quill.setSelection(se.length()-ue.length,p.default.sources.SILENT),$.quill.scrollingContainer.scrollTop=me,$.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var le=this,$=[],ue=[];return this.matchers.forEach(function(se){var me=i(se,2),Ce=me[0],Ye=me[1];switch(Ce){case Node.TEXT_NODE:ue.push(Ye);break;case Node.ELEMENT_NODE:$.push(Ye);break;default:[].forEach.call(le.container.querySelectorAll(Ce),function(We){We[E]=We[E]||[],We[E].push(Ye)});break}}),[$,ue]}}]),P}(h.default);N.DEFAULTS={matchers:[],matchVisual:!0};function K(O,P,ge){return(typeof P>"u"?"undefined":I(P))==="object"?Object.keys(P).reduce(function(le,$){return K(le,$,P[$])},O):O.reduce(function(le,$){return $.attributes&&$.attributes[P]?le.push($):le.insert($.insert,(0,a.default)({},R({},P,ge),$.attributes))},new s.default)}function z(O){if(O.nodeType!==Node.ELEMENT_NODE)return{};var P="__ql-computed-style";return O[P]||(O[P]=window.getComputedStyle(O))}function L(O,P){for(var ge="",le=O.ops.length-1;le>=0&&ge.length<P.length;--le){var $=O.ops[le];if(typeof $.insert!="string")break;ge=$.insert+ge}return ge.slice(-1*P.length)===P}function H(O){if(O.childNodes.length===0)return!1;var P=z(O);return["block","list-item"].indexOf(P.display)>-1}function T(O,P,ge){return O.nodeType===O.TEXT_NODE?ge.reduce(function(le,$){return $(O,le)},new s.default):O.nodeType===O.ELEMENT_NODE?[].reduce.call(O.childNodes||[],function(le,$){var ue=T($,P,ge);return $.nodeType===O.ELEMENT_NODE&&(ue=P.reduce(function(se,me){return me($,se)},ue),ue=($[E]||[]).reduce(function(se,me){return me($,se)},ue)),le.concat(ue)},new s.default):new s.default}function Q(O,P,ge){return K(ge,O,!0)}function j(O,P){var ge=A.default.Attributor.Attribute.keys(O),le=A.default.Attributor.Class.keys(O),$=A.default.Attributor.Style.keys(O),ue={};return ge.concat(le).concat($).forEach(function(se){var me=A.default.query(se,A.default.Scope.ATTRIBUTE);me!=null&&(ue[me.attrName]=me.value(O),ue[me.attrName])||(me=w[se],me!=null&&(me.attrName===se||me.keyName===se)&&(ue[me.attrName]=me.value(O)||void 0),me=J[se],me!=null&&(me.attrName===se||me.keyName===se)&&(me=J[se],ue[me.attrName]=me.value(O)||void 0))}),Object.keys(ue).length>0&&(P=K(P,ue)),P}function D(O,P){var ge=A.default.query(O);if(ge==null)return P;if(ge.prototype instanceof A.default.Embed){var le={},$=ge.value(O);$!=null&&(le[ge.blotName]=$,P=new s.default().insert(le,ge.formats(O)))}else typeof ge.formats=="function"&&(P=K(P,ge.blotName,ge.formats(O)));return P}function te(O,P){return L(P,`
`)||P.insert(`
`),P}function ne(){return new s.default}function Ie(O,P){var ge=A.default.query(O);if(ge==null||ge.blotName!=="list-item"||!L(P,`
`))return P;for(var le=-1,$=O.parentNode;!$.classList.contains("ql-clipboard");)(A.default.query($)||{}).blotName==="list"&&(le+=1),$=$.parentNode;return le<=0?P:P.compose(new s.default().retain(P.length()-1).retain(1,{indent:le}))}function ae(O,P){return L(P,`
`)||(H(O)||P.length()>0&&O.nextSibling&&H(O.nextSibling))&&P.insert(`
`),P}function oe(O,P){if(H(O)&&O.nextElementSibling!=null&&!L(P,`

`)){var ge=O.offsetHeight+parseFloat(z(O).marginTop)+parseFloat(z(O).marginBottom);O.nextElementSibling.offsetTop>O.offsetTop+ge*1.5&&P.insert(`
`)}return P}function Xe(O,P){var ge={},le=O.style||{};return le.fontStyle&&z(O).fontStyle==="italic"&&(ge.italic=!0),le.fontWeight&&(z(O).fontWeight.startsWith("bold")||parseInt(z(O).fontWeight)>=700)&&(ge.bold=!0),Object.keys(ge).length>0&&(P=K(P,ge)),parseFloat(le.textIndent||0)>0&&(P=new s.default().insert("	").concat(P)),P}function ve(O,P){var ge=O.data;if(O.parentNode.tagName==="O:P")return P.insert(ge.trim());if(ge.trim().length===0&&O.parentNode.classList.contains("ql-clipboard"))return P;if(!z(O.parentNode).whiteSpace.startsWith("pre")){var le=function(ue,se){return se=se.replace(/[^\u00a0]/g,""),se.length<1&&ue?" ":se};ge=ge.replace(/\r\n/g," ").replace(/\n/g," "),ge=ge.replace(/\s\s+/g,le.bind(le,!0)),(O.previousSibling==null&&H(O.parentNode)||O.previousSibling!=null&&H(O.previousSibling))&&(ge=ge.replace(/^\s+/,le.bind(le,!1))),(O.nextSibling==null&&H(O.parentNode)||O.nextSibling!=null&&H(O.nextSibling))&&(ge=ge.replace(/\s+$/,le.bind(le,!1)))}return P.insert(ge)}l.default=N,l.matchAttributor=j,l.matchBlot=D,l.matchNewline=ae,l.matchSpacing=oe,l.matchText=ve},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function f(p,Z){for(var m=0;m<Z.length;m++){var u=Z[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}return function(p,Z,m){return Z&&f(p.prototype,Z),m&&f(p,m),p}}(),i=function f(p,Z,m){p===null&&(p=Function.prototype);var u=Object.getOwnPropertyDescriptor(p,Z);if(u===void 0){var h=Object.getPrototypeOf(p);return h===null?void 0:f(h,Z,m)}else{if("value"in u)return u.value;var b=u.get;return b===void 0?void 0:b.call(m)}},o=n(6),r=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function s(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var A=function(f){d(p,f);function p(){return c(this,p),s(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return I(p,[{key:"optimize",value:function(m){i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"optimize",this).call(this,m),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return i(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),p}(r.default);A.blotName="bold",A.tagName=["STRONG","B"],l.default=A},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.addControls=l.default=void 0;var I=function(){function B(W,R){var Y=[],F=!0,M=!1,U=void 0;try{for(var E=W[Symbol.iterator](),x;!(F=(x=E.next()).done)&&(Y.push(x.value),!(R&&Y.length===R));F=!0);}catch(w){M=!0,U=w}finally{try{!F&&E.return&&E.return()}finally{if(M)throw U}}return Y}return function(W,R){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return B(W,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function B(W,R){for(var Y=0;Y<R.length;Y++){var F=R[Y];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(W,F.key,F)}}return function(W,R,Y){return R&&B(W.prototype,R),Y&&B(W,Y),W}}(),o=n(2),r=m(o),a=n(0),c=m(a),s=n(5),d=m(s),A=n(10),f=m(A),p=n(9),Z=m(p);function m(B){return B&&B.__esModule?B:{default:B}}function u(B,W,R){return W in B?Object.defineProperty(B,W,{value:R,enumerable:!0,configurable:!0,writable:!0}):B[W]=R,B}function h(B,W){if(!(B instanceof W))throw new TypeError("Cannot call a class as a function")}function b(B,W){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:B}function y(B,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);B.prototype=Object.create(W&&W.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(B,W):B.__proto__=W)}var V=(0,f.default)("quill:toolbar"),v=function(B){y(W,B);function W(R,Y){h(this,W);var F=b(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,R,Y));if(Array.isArray(F.options.container)){var M=document.createElement("div");X(M,F.options.container),R.container.parentNode.insertBefore(M,R.container),F.container=M}else typeof F.options.container=="string"?F.container=document.querySelector(F.options.container):F.container=F.options.container;if(!(F.container instanceof HTMLElement)){var U;return U=V.error("Container required for toolbar",F.options),b(F,U)}return F.container.classList.add("ql-toolbar"),F.controls=[],F.handlers={},Object.keys(F.options.handlers).forEach(function(E){F.addHandler(E,F.options.handlers[E])}),[].forEach.call(F.container.querySelectorAll("button, select"),function(E){F.attach(E)}),F.quill.on(d.default.events.EDITOR_CHANGE,function(E,x){E===d.default.events.SELECTION_CHANGE&&F.update(x)}),F.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){var E=F.quill.selection.getRange(),x=I(E,1),w=x[0];F.update(w)}),F}return i(W,[{key:"addHandler",value:function(Y,F){this.handlers[Y]=F}},{key:"attach",value:function(Y){var F=this,M=[].find.call(Y.classList,function(E){return E.indexOf("ql-")===0});if(M){if(M=M.slice(3),Y.tagName==="BUTTON"&&Y.setAttribute("type","button"),this.handlers[M]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[M]==null){V.warn("ignoring attaching to disabled format",M,Y);return}if(c.default.query(M)==null){V.warn("ignoring attaching to nonexistent format",M,Y);return}}var U=Y.tagName==="SELECT"?"change":"click";Y.addEventListener(U,function(E){var x=void 0;if(Y.tagName==="SELECT"){if(Y.selectedIndex<0)return;var w=Y.options[Y.selectedIndex];w.hasAttribute("selected")?x=!1:x=w.value||!1}else Y.classList.contains("ql-active")?x=!1:x=Y.value||!Y.hasAttribute("value"),E.preventDefault();F.quill.focus();var J=F.quill.selection.getRange(),N=I(J,1),K=N[0];if(F.handlers[M]!=null)F.handlers[M].call(F,x);else if(c.default.query(M).prototype instanceof c.default.Embed){if(x=prompt("Enter "+M),!x)return;F.quill.updateContents(new r.default().retain(K.index).delete(K.length).insert(u({},M,x)),d.default.sources.USER)}else F.quill.format(M,x,d.default.sources.USER);F.update(K)}),this.controls.push([M,Y])}}},{key:"update",value:function(Y){var F=Y==null?{}:this.quill.getFormat(Y);this.controls.forEach(function(M){var U=I(M,2),E=U[0],x=U[1];if(x.tagName==="SELECT"){var w=void 0;if(Y==null)w=null;else if(F[E]==null)w=x.querySelector("option[selected]");else if(!Array.isArray(F[E])){var J=F[E];typeof J=="string"&&(J=J.replace(/\"/g,'\\"')),w=x.querySelector('option[value="'+J+'"]')}w==null?(x.value="",x.selectedIndex=-1):w.selected=!0}else if(Y==null)x.classList.remove("ql-active");else if(x.hasAttribute("value")){var N=F[E]===x.getAttribute("value")||F[E]!=null&&F[E].toString()===x.getAttribute("value")||F[E]==null&&!x.getAttribute("value");x.classList.toggle("ql-active",N)}else x.classList.toggle("ql-active",F[E]!=null)})}}]),W}(Z.default);v.DEFAULTS={};function S(B,W,R){var Y=document.createElement("button");Y.setAttribute("type","button"),Y.classList.add("ql-"+W),R!=null&&(Y.value=R),B.appendChild(Y)}function X(B,W){Array.isArray(W[0])||(W=[W]),W.forEach(function(R){var Y=document.createElement("span");Y.classList.add("ql-formats"),R.forEach(function(F){if(typeof F=="string")S(Y,F);else{var M=Object.keys(F)[0],U=F[M];Array.isArray(U)?G(Y,M,U):S(Y,M,U)}}),B.appendChild(Y)})}function G(B,W,R){var Y=document.createElement("select");Y.classList.add("ql-"+W),R.forEach(function(F){var M=document.createElement("option");F!==!1?M.setAttribute("value",F):M.setAttribute("selected","selected"),Y.appendChild(M)}),B.appendChild(Y)}v.DEFAULTS={container:null,handlers:{clean:function(){var W=this,R=this.quill.getSelection();if(R!=null)if(R.length==0){var Y=this.quill.getFormat();Object.keys(Y).forEach(function(F){c.default.query(F,c.default.Scope.INLINE)!=null&&W.quill.format(F,!1)})}else this.quill.removeFormat(R,d.default.sources.USER)},direction:function(W){var R=this.quill.getFormat().align;W==="rtl"&&R==null?this.quill.format("align","right",d.default.sources.USER):!W&&R==="right"&&this.quill.format("align",!1,d.default.sources.USER),this.quill.format("direction",W,d.default.sources.USER)},indent:function(W){var R=this.quill.getSelection(),Y=this.quill.getFormat(R),F=parseInt(Y.indent||0);if(W==="+1"||W==="-1"){var M=W==="+1"?1:-1;Y.direction==="rtl"&&(M*=-1),this.quill.format("indent",F+M,d.default.sources.USER)}},link:function(W){W===!0&&(W=prompt("Enter link URL:")),this.quill.format("link",W,d.default.sources.USER)},list:function(W){var R=this.quill.getSelection(),Y=this.quill.getFormat(R);W==="check"?Y.list==="checked"||Y.list==="unchecked"?this.quill.format("list",!1,d.default.sources.USER):this.quill.format("list","unchecked",d.default.sources.USER):this.quill.format("list",W,d.default.sources.USER)}}},l.default=v,l.addControls=X},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function f(p,Z){for(var m=0;m<Z.length;m++){var u=Z[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}return function(p,Z,m){return Z&&f(p.prototype,Z),m&&f(p,m),p}}(),i=function f(p,Z,m){p===null&&(p=Function.prototype);var u=Object.getOwnPropertyDescriptor(p,Z);if(u===void 0){var h=Object.getPrototypeOf(p);return h===null?void 0:f(h,Z,m)}else{if("value"in u)return u.value;var b=u.get;return b===void 0?void 0:b.call(m)}},o=n(28),r=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function s(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var A=function(f){d(p,f);function p(Z,m){c(this,p);var u=s(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,Z));return u.label.innerHTML=m,u.container.classList.add("ql-color-picker"),[].slice.call(u.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(h){h.classList.add("ql-primary")}),u}return I(p,[{key:"buildItem",value:function(m){var u=i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"buildItem",this).call(this,m);return u.style.backgroundColor=m.getAttribute("value")||"",u}},{key:"selectItem",value:function(m,u){i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,m,u);var h=this.label.querySelector(".ql-color-label"),b=m&&m.getAttribute("data-value")||"";h&&(h.tagName==="line"?h.style.stroke=b:h.style.fill=b)}}]),p}(r.default);l.default=A},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function f(p,Z){for(var m=0;m<Z.length;m++){var u=Z[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}return function(p,Z,m){return Z&&f(p.prototype,Z),m&&f(p,m),p}}(),i=function f(p,Z,m){p===null&&(p=Function.prototype);var u=Object.getOwnPropertyDescriptor(p,Z);if(u===void 0){var h=Object.getPrototypeOf(p);return h===null?void 0:f(h,Z,m)}else{if("value"in u)return u.value;var b=u.get;return b===void 0?void 0:b.call(m)}},o=n(28),r=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function s(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var A=function(f){d(p,f);function p(Z,m){c(this,p);var u=s(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,Z));return u.container.classList.add("ql-icon-picker"),[].forEach.call(u.container.querySelectorAll(".ql-picker-item"),function(h){h.innerHTML=m[h.getAttribute("data-value")||""]}),u.defaultItem=u.container.querySelector(".ql-selected"),u.selectItem(u.defaultItem),u}return I(p,[{key:"selectItem",value:function(m,u){i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,m,u),m=m||this.defaultItem,this.label.innerHTML=m.innerHTML}}]),p}(r.default);l.default=A},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function r(a,c){for(var s=0;s<c.length;s++){var d=c[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(a,c,s){return c&&r(a.prototype,c),s&&r(a,s),a}}();function i(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}var o=function(){function r(a,c){var s=this;i(this,r),this.quill=a,this.boundsContainer=c||document.body,this.root=a.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){s.root.style.marginTop=-1*s.quill.root.scrollTop+"px"}),this.hide()}return I(r,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var s=c.left+c.width/2-this.root.offsetWidth/2,d=c.bottom+this.quill.root.scrollTop;this.root.style.left=s+"px",this.root.style.top=d+"px",this.root.classList.remove("ql-flip");var A=this.boundsContainer.getBoundingClientRect(),f=this.root.getBoundingClientRect(),p=0;if(f.right>A.right&&(p=A.right-f.right,this.root.style.left=s+p+"px"),f.left<A.left&&(p=A.left-f.left,this.root.style.left=s+p+"px"),f.bottom>A.bottom){var Z=f.bottom-f.top,m=c.bottom-c.top+Z;this.root.style.top=d-m+"px",this.root.classList.add("ql-flip")}return p}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),r}();l.default=o},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function G(B,W){var R=[],Y=!0,F=!1,M=void 0;try{for(var U=B[Symbol.iterator](),E;!(Y=(E=U.next()).done)&&(R.push(E.value),!(W&&R.length===W));Y=!0);}catch(x){F=!0,M=x}finally{try{!Y&&U.return&&U.return()}finally{if(F)throw M}}return R}return function(B,W){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return G(B,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function G(B,W,R){B===null&&(B=Function.prototype);var Y=Object.getOwnPropertyDescriptor(B,W);if(Y===void 0){var F=Object.getPrototypeOf(B);return F===null?void 0:G(F,W,R)}else{if("value"in Y)return Y.value;var M=Y.get;return M===void 0?void 0:M.call(R)}},o=function(){function G(B,W){for(var R=0;R<W.length;R++){var Y=W[R];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(B,Y.key,Y)}}return function(B,W,R){return W&&G(B.prototype,W),R&&G(B,R),B}}(),r=n(3),a=h(r),c=n(8),s=h(c),d=n(43),A=h(d),f=n(27),p=h(f),Z=n(15),m=n(41),u=h(m);function h(G){return G&&G.__esModule?G:{default:G}}function b(G,B){if(!(G instanceof B))throw new TypeError("Cannot call a class as a function")}function y(G,B){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:G}function V(G,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);G.prototype=Object.create(B&&B.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(G,B):G.__proto__=B)}var v=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(G){V(B,G);function B(W,R){b(this,B),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=v);var Y=y(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,W,R));return Y.quill.container.classList.add("ql-snow"),Y}return o(B,[{key:"extendToolbar",value:function(R){R.container.classList.add("ql-snow"),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),u.default),this.tooltip=new X(this.quill,this.options.bounds),R.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(Y,F){R.handlers.link.call(R,!F.format.link)})}}]),B}(A.default);S.DEFAULTS=(0,a.default)(!0,{},A.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(B){if(B){var W=this.quill.getSelection();if(W==null||W.length==0)return;var R=this.quill.getText(W);/^\S+@\S+\.\S+$/.test(R)&&R.indexOf("mailto:")!==0&&(R="mailto:"+R);var Y=this.quill.theme.tooltip;Y.edit("link",R)}else this.quill.format("link",!1)}}}}});var X=function(G){V(B,G);function B(W,R){b(this,B);var Y=y(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,W,R));return Y.preview=Y.root.querySelector("a.ql-preview"),Y}return o(B,[{key:"listen",value:function(){var R=this;i(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(Y){R.root.classList.contains("ql-editing")?R.save():R.edit("link",R.preview.textContent),Y.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(Y){if(R.linkRange!=null){var F=R.linkRange;R.restoreFocus(),R.quill.formatText(F,"link",!1,s.default.sources.USER),delete R.linkRange}Y.preventDefault(),R.hide()}),this.quill.on(s.default.events.SELECTION_CHANGE,function(Y,F,M){if(Y!=null){if(Y.length===0&&M===s.default.sources.USER){var U=R.quill.scroll.descendant(p.default,Y.index),E=I(U,2),x=E[0],w=E[1];if(x!=null){R.linkRange=new Z.Range(Y.index-w,x.length());var J=p.default.formats(x.domNode);R.preview.textContent=J,R.preview.setAttribute("href",J),R.show(),R.position(R.quill.getBounds(R.linkRange));return}}else delete R.linkRange;R.hide()}})}},{key:"show",value:function(){i(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),B}(d.BaseTooltip);X.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),l.default=S},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(29),i=$(I),o=n(36),r=n(38),a=n(64),c=n(65),s=$(c),d=n(66),A=$(d),f=n(67),p=$(f),Z=n(37),m=n(26),u=n(39),h=n(40),b=n(56),y=$(b),V=n(68),v=$(V),S=n(27),X=$(S),G=n(69),B=$(G),W=n(70),R=$(W),Y=n(71),F=$(Y),M=n(72),U=$(M),E=n(73),x=$(E),w=n(13),J=$(w),N=n(74),K=$(N),z=n(75),L=$(z),H=n(57),T=$(H),Q=n(41),j=$(Q),D=n(28),te=$(D),ne=n(59),Ie=$(ne),ae=n(60),oe=$(ae),Xe=n(61),ve=$(Xe),O=n(108),P=$(O),ge=n(62),le=$(ge);function $(ue){return ue&&ue.__esModule?ue:{default:ue}}i.default.register({"attributors/attribute/direction":r.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":Z.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":r.DirectionClass,"attributors/class/font":u.FontClass,"attributors/class/size":h.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":Z.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":r.DirectionStyle,"attributors/style/font":u.FontStyle,"attributors/style/size":h.SizeStyle},!0),i.default.register({"formats/align":o.AlignClass,"formats/direction":r.DirectionClass,"formats/indent":a.IndentClass,"formats/background":Z.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":u.FontClass,"formats/size":h.SizeClass,"formats/blockquote":s.default,"formats/code-block":J.default,"formats/header":A.default,"formats/list":p.default,"formats/bold":y.default,"formats/code":w.Code,"formats/italic":v.default,"formats/link":X.default,"formats/script":B.default,"formats/strike":R.default,"formats/underline":F.default,"formats/image":U.default,"formats/video":x.default,"formats/list/item":f.ListItem,"modules/formula":K.default,"modules/syntax":L.default,"modules/toolbar":T.default,"themes/bubble":P.default,"themes/snow":le.default,"ui/icons":j.default,"ui/picker":te.default,"ui/icon-picker":oe.default,"ui/color-picker":Ie.default,"ui/tooltip":ve.default},!0),l.default=i.default},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.IndentClass=void 0;var I=function(){function p(Z,m){for(var u=0;u<m.length;u++){var h=m[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(Z,h.key,h)}}return function(Z,m,u){return m&&p(Z.prototype,m),u&&p(Z,u),Z}}(),i=function p(Z,m,u){Z===null&&(Z=Function.prototype);var h=Object.getOwnPropertyDescriptor(Z,m);if(h===void 0){var b=Object.getPrototypeOf(Z);return b===null?void 0:p(b,m,u)}else{if("value"in h)return h.value;var y=h.get;return y===void 0?void 0:y.call(u)}},o=n(0),r=a(o);function a(p){return p&&p.__esModule?p:{default:p}}function c(p,Z){if(!(p instanceof Z))throw new TypeError("Cannot call a class as a function")}function s(p,Z){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:p}function d(p,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);p.prototype=Object.create(Z&&Z.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(p,Z):p.__proto__=Z)}var A=function(p){d(Z,p);function Z(){return c(this,Z),s(this,(Z.__proto__||Object.getPrototypeOf(Z)).apply(this,arguments))}return I(Z,[{key:"add",value:function(u,h){if(h==="+1"||h==="-1"){var b=this.value(u)||0;h=h==="+1"?b+1:b-1}return h===0?(this.remove(u),!0):i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"add",this).call(this,u,h)}},{key:"canAdd",value:function(u,h){return i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"canAdd",this).call(this,u,h)||i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"canAdd",this).call(this,u,parseInt(h))}},{key:"value",value:function(u){return parseInt(i(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"value",this).call(this,u))||void 0}}]),Z}(r.default.Attributor.Class),f=new A("indent","ql-indent",{scope:r.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});l.IndentClass=f},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(4),i=o(I);function o(d){return d&&d.__esModule?d:{default:d}}function r(d,A){if(!(d instanceof A))throw new TypeError("Cannot call a class as a function")}function a(d,A){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:d}function c(d,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);d.prototype=Object.create(A&&A.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(d,A):d.__proto__=A)}var s=function(d){c(A,d);function A(){return r(this,A),a(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(i.default);s.blotName="blockquote",s.tagName="blockquote",l.default=s},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function A(f,p){for(var Z=0;Z<p.length;Z++){var m=p[Z];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,p,Z){return p&&A(f.prototype,p),Z&&A(f,Z),f}}(),i=n(4),o=r(i);function r(A){return A&&A.__esModule?A:{default:A}}function a(A,f){if(!(A instanceof f))throw new TypeError("Cannot call a class as a function")}function c(A,f){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:A}function s(A,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);A.prototype=Object.create(f&&f.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(A,f):A.__proto__=f)}var d=function(A){s(f,A);function f(){return a(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return I(f,null,[{key:"formats",value:function(Z){return this.tagName.indexOf(Z.tagName)+1}}]),f}(o.default);d.blotName="header",d.tagName=["H1","H2","H3","H4","H5","H6"],l.default=d},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.ListItem=void 0;var I=function(){function b(y,V){for(var v=0;v<V.length;v++){var S=V[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,V,v){return V&&b(y.prototype,V),v&&b(y,v),y}}(),i=function b(y,V,v){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,V);if(S===void 0){var X=Object.getPrototypeOf(y);return X===null?void 0:b(X,V,v)}else{if("value"in S)return S.value;var G=S.get;return G===void 0?void 0:G.call(v)}},o=n(0),r=A(o),a=n(4),c=A(a),s=n(25),d=A(s);function A(b){return b&&b.__esModule?b:{default:b}}function f(b,y,V){return y in b?Object.defineProperty(b,y,{value:V,enumerable:!0,configurable:!0,writable:!0}):b[y]=V,b}function p(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function Z(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function m(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var u=function(b){m(y,b);function y(){return p(this,y),Z(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return I(y,[{key:"format",value:function(v,S){v===h.blotName&&!S?this.replaceWith(r.default.create(this.statics.scope)):i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,v,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(v,S){return this.parent.isolate(this.offset(this.parent),this.length()),v===this.parent.statics.blotName?(this.parent.replaceWith(v,S),this):(this.parent.unwrap(),i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"replaceWith",this).call(this,v,S))}}],[{key:"formats",value:function(v){return v.tagName===this.tagName?void 0:i(y.__proto__||Object.getPrototypeOf(y),"formats",this).call(this,v)}}]),y}(c.default);u.blotName="list-item",u.tagName="LI";var h=function(b){m(y,b),I(y,null,[{key:"create",value:function(v){var S=v==="ordered"?"OL":"UL",X=i(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,S);return(v==="checked"||v==="unchecked")&&X.setAttribute("data-checked",v==="checked"),X}},{key:"formats",value:function(v){if(v.tagName==="OL")return"ordered";if(v.tagName==="UL")return v.hasAttribute("data-checked")?v.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function y(V){p(this,y);var v=Z(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,V)),S=function(G){if(G.target.parentNode===V){var B=v.statics.formats(V),W=r.default.find(G.target);B==="checked"?W.format("list","unchecked"):B==="unchecked"&&W.format("list","checked")}};return V.addEventListener("touchstart",S),V.addEventListener("mousedown",S),v}return I(y,[{key:"format",value:function(v,S){this.children.length>0&&this.children.tail.format(v,S)}},{key:"formats",value:function(){return f({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(v,S){if(v instanceof u)i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertBefore",this).call(this,v,S);else{var X=S==null?this.length():S.offset(this),G=this.split(X);G.parent.insertBefore(v,G)}}},{key:"optimize",value:function(v){i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,v);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(v){if(v.statics.blotName!==this.statics.blotName){var S=r.default.create(this.statics.defaultChild);v.moveChildren(S),this.appendChild(S)}i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"replace",this).call(this,v)}}]),y}(d.default);h.blotName="list",h.scope=r.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[u],l.ListItem=u,l.default=h},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(56),i=o(I);function o(d){return d&&d.__esModule?d:{default:d}}function r(d,A){if(!(d instanceof A))throw new TypeError("Cannot call a class as a function")}function a(d,A){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:d}function c(d,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);d.prototype=Object.create(A&&A.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(d,A):d.__proto__=A)}var s=function(d){c(A,d);function A(){return r(this,A),a(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(i.default);s.blotName="italic",s.tagName=["EM","I"],l.default=s},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function f(p,Z){for(var m=0;m<Z.length;m++){var u=Z[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}return function(p,Z,m){return Z&&f(p.prototype,Z),m&&f(p,m),p}}(),i=function f(p,Z,m){p===null&&(p=Function.prototype);var u=Object.getOwnPropertyDescriptor(p,Z);if(u===void 0){var h=Object.getPrototypeOf(p);return h===null?void 0:f(h,Z,m)}else{if("value"in u)return u.value;var b=u.get;return b===void 0?void 0:b.call(m)}},o=n(6),r=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function s(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var A=function(f){d(p,f);function p(){return c(this,p),s(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return I(p,null,[{key:"create",value:function(m){return m==="super"?document.createElement("sup"):m==="sub"?document.createElement("sub"):i(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,m)}},{key:"formats",value:function(m){if(m.tagName==="SUB")return"sub";if(m.tagName==="SUP")return"super"}}]),p}(r.default);A.blotName="script",A.tagName=["SUB","SUP"],l.default=A},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(6),i=o(I);function o(d){return d&&d.__esModule?d:{default:d}}function r(d,A){if(!(d instanceof A))throw new TypeError("Cannot call a class as a function")}function a(d,A){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:d}function c(d,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);d.prototype=Object.create(A&&A.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(d,A):d.__proto__=A)}var s=function(d){c(A,d);function A(){return r(this,A),a(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(i.default);s.blotName="strike",s.tagName="S",l.default=s},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=n(6),i=o(I);function o(d){return d&&d.__esModule?d:{default:d}}function r(d,A){if(!(d instanceof A))throw new TypeError("Cannot call a class as a function")}function a(d,A){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:d}function c(d,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);d.prototype=Object.create(A&&A.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(d,A):d.__proto__=A)}var s=function(d){c(A,d);function A(){return r(this,A),a(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(i.default);s.blotName="underline",s.tagName="U",l.default=s},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function Z(m,u){for(var h=0;h<u.length;h++){var b=u[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,u,h){return u&&Z(m.prototype,u),h&&Z(m,h),m}}(),i=function Z(m,u,h){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,u);if(b===void 0){var y=Object.getPrototypeOf(m);return y===null?void 0:Z(y,u,h)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(h)}},o=n(0),r=c(o),a=n(27);function c(Z){return Z&&Z.__esModule?Z:{default:Z}}function s(Z,m){if(!(Z instanceof m))throw new TypeError("Cannot call a class as a function")}function d(Z,m){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:Z}function A(Z,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);Z.prototype=Object.create(m&&m.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,m):Z.__proto__=m)}var f=["alt","height","width"],p=function(Z){A(m,Z);function m(){return s(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return I(m,[{key:"format",value:function(h,b){f.indexOf(h)>-1?b?this.domNode.setAttribute(h,b):this.domNode.removeAttribute(h):i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,h,b)}}],[{key:"create",value:function(h){var b=i(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,h);return typeof h=="string"&&b.setAttribute("src",this.sanitize(h)),b}},{key:"formats",value:function(h){return f.reduce(function(b,y){return h.hasAttribute(y)&&(b[y]=h.getAttribute(y)),b},{})}},{key:"match",value:function(h){return/\.(jpe?g|gif|png)$/.test(h)||/^data:image\/.+;base64/.test(h)}},{key:"sanitize",value:function(h){return(0,a.sanitize)(h,["http","https","data"])?h:"//:0"}},{key:"value",value:function(h){return h.getAttribute("src")}}]),m}(r.default.Embed);p.blotName="image",p.tagName="IMG",l.default=p},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0});var I=function(){function Z(m,u){for(var h=0;h<u.length;h++){var b=u[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,u,h){return u&&Z(m.prototype,u),h&&Z(m,h),m}}(),i=function Z(m,u,h){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,u);if(b===void 0){var y=Object.getPrototypeOf(m);return y===null?void 0:Z(y,u,h)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(h)}},o=n(4),r=n(27),a=c(r);function c(Z){return Z&&Z.__esModule?Z:{default:Z}}function s(Z,m){if(!(Z instanceof m))throw new TypeError("Cannot call a class as a function")}function d(Z,m){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:Z}function A(Z,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);Z.prototype=Object.create(m&&m.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,m):Z.__proto__=m)}var f=["height","width"],p=function(Z){A(m,Z);function m(){return s(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return I(m,[{key:"format",value:function(h,b){f.indexOf(h)>-1?b?this.domNode.setAttribute(h,b):this.domNode.removeAttribute(h):i(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,h,b)}}],[{key:"create",value:function(h){var b=i(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,h);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(h)),b}},{key:"formats",value:function(h){return f.reduce(function(b,y){return h.hasAttribute(y)&&(b[y]=h.getAttribute(y)),b},{})}},{key:"sanitize",value:function(h){return a.default.sanitize(h)}},{key:"value",value:function(h){return h.getAttribute("src")}}]),m}(o.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",l.default=p},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.FormulaBlot=void 0;var I=function(){function h(b,y){for(var V=0;V<y.length;V++){var v=y[V];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,y,V){return y&&h(b.prototype,y),V&&h(b,V),b}}(),i=function h(b,y,V){b===null&&(b=Function.prototype);var v=Object.getOwnPropertyDescriptor(b,y);if(v===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:h(S,y,V)}else{if("value"in v)return v.value;var X=v.get;return X===void 0?void 0:X.call(V)}},o=n(35),r=A(o),a=n(5),c=A(a),s=n(9),d=A(s);function A(h){return h&&h.__esModule?h:{default:h}}function f(h,b){if(!(h instanceof b))throw new TypeError("Cannot call a class as a function")}function p(h,b){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:h}function Z(h,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);h.prototype=Object.create(b&&b.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(h,b):h.__proto__=b)}var m=function(h){Z(b,h);function b(){return f(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return I(b,null,[{key:"create",value:function(V){var v=i(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,V);return typeof V=="string"&&(window.katex.render(V,v,{throwOnError:!1,errorColor:"#f00"}),v.setAttribute("data-value",V)),v}},{key:"value",value:function(V){return V.getAttribute("data-value")}}]),b}(r.default);m.blotName="formula",m.className="ql-formula",m.tagName="SPAN";var u=function(h){Z(b,h),I(b,null,[{key:"register",value:function(){c.default.register(m,!0)}}]);function b(){f(this,b);var y=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return y}return b}(d.default);l.FormulaBlot=m,l.default=u},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.CodeToken=l.CodeBlock=void 0;var I=function(){function V(v,S){for(var X=0;X<S.length;X++){var G=S[X];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(v,G.key,G)}}return function(v,S,X){return S&&V(v.prototype,S),X&&V(v,X),v}}(),i=function V(v,S,X){v===null&&(v=Function.prototype);var G=Object.getOwnPropertyDescriptor(v,S);if(G===void 0){var B=Object.getPrototypeOf(v);return B===null?void 0:V(B,S,X)}else{if("value"in G)return G.value;var W=G.get;return W===void 0?void 0:W.call(X)}},o=n(0),r=p(o),a=n(5),c=p(a),s=n(9),d=p(s),A=n(13),f=p(A);function p(V){return V&&V.__esModule?V:{default:V}}function Z(V,v){if(!(V instanceof v))throw new TypeError("Cannot call a class as a function")}function m(V,v){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:V}function u(V,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);V.prototype=Object.create(v&&v.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(V,v):V.__proto__=v)}var h=function(V){u(v,V);function v(){return Z(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return I(v,[{key:"replaceWith",value:function(X){this.domNode.textContent=this.domNode.textContent,this.attach(),i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"replaceWith",this).call(this,X)}},{key:"highlight",value:function(X){var G=this.domNode.textContent;this.cachedText!==G&&((G.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=X(G),this.domNode.normalize(),this.attach()),this.cachedText=G)}}]),v}(f.default);h.className="ql-syntax";var b=new r.default.Attributor.Class("token","hljs",{scope:r.default.Scope.INLINE}),y=function(V){u(v,V),I(v,null,[{key:"register",value:function(){c.default.register(b,!0),c.default.register(h,!0)}}]);function v(S,X){Z(this,v);var G=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,S,X));if(typeof G.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var B=null;return G.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(B),B=setTimeout(function(){G.highlight(),B=null},G.options.interval)}),G.highlight(),G}return I(v,[{key:"highlight",value:function(){var X=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var G=this.quill.getSelection();this.quill.scroll.descendants(h).forEach(function(B){B.highlight(X.options.highlight)}),this.quill.update(c.default.sources.SILENT),G!=null&&this.quill.setSelection(G,c.default.sources.SILENT)}}}]),v}(d.default);y.DEFAULTS={highlight:function(){return window.hljs==null?null:function(V){var v=window.hljs.highlightAuto(V);return v.value}}(),interval:1e3},l.CodeBlock=h,l.CodeToken=b,l.default=y},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(g,l){g.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(g,l){g.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(g,l){g.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(g,l){g.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(g,l){g.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(g,l,n){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BubbleTooltip=void 0;var I=function v(S,X,G){S===null&&(S=Function.prototype);var B=Object.getOwnPropertyDescriptor(S,X);if(B===void 0){var W=Object.getPrototypeOf(S);return W===null?void 0:v(W,X,G)}else{if("value"in B)return B.value;var R=B.get;return R===void 0?void 0:R.call(G)}},i=function(){function v(S,X){for(var G=0;G<X.length;G++){var B=X[G];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(S,B.key,B)}}return function(S,X,G){return X&&v(S.prototype,X),G&&v(S,G),S}}(),o=n(3),r=Z(o),a=n(8),c=Z(a),s=n(43),d=Z(s),A=n(15),f=n(41),p=Z(f);function Z(v){return v&&v.__esModule?v:{default:v}}function m(v,S){if(!(v instanceof S))throw new TypeError("Cannot call a class as a function")}function u(v,S){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:v}function h(v,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);v.prototype=Object.create(S&&S.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(v,S):v.__proto__=S)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],y=function(v){h(S,v);function S(X,G){m(this,S),G.modules.toolbar!=null&&G.modules.toolbar.container==null&&(G.modules.toolbar.container=b);var B=u(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,X,G));return B.quill.container.classList.add("ql-bubble"),B}return i(S,[{key:"extendToolbar",value:function(G){this.tooltip=new V(this.quill,this.options.bounds),this.tooltip.root.appendChild(G.container),this.buildButtons([].slice.call(G.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(G.container.querySelectorAll("select")),p.default)}}]),S}(d.default);y.DEFAULTS=(0,r.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var V=function(v){h(S,v);function S(X,G){m(this,S);var B=u(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,X,G));return B.quill.on(c.default.events.EDITOR_CHANGE,function(W,R,Y,F){if(W===c.default.events.SELECTION_CHANGE)if(R!=null&&R.length>0&&F===c.default.sources.USER){B.show(),B.root.style.left="0px",B.root.style.width="",B.root.style.width=B.root.offsetWidth+"px";var M=B.quill.getLines(R.index,R.length);if(M.length===1)B.position(B.quill.getBounds(R));else{var U=M[M.length-1],E=B.quill.getIndex(U),x=Math.min(U.length()-1,R.index+R.length-E),w=B.quill.getBounds(new A.Range(E,x));B.position(w)}}else document.activeElement!==B.textbox&&B.quill.hasFocus()&&B.hide()}),B}return i(S,[{key:"listen",value:function(){var G=this;I(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){G.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!G.root.classList.contains("ql-hidden")){var B=G.quill.getSelection();B!=null&&G.position(G.quill.getBounds(B))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(G){var B=I(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,G),W=this.root.querySelector(".ql-tooltip-arrow");if(W.style.marginLeft="",B===0)return B;W.style.marginLeft=-1*B-W.offsetWidth/2+"px"}}]),S}(s.BaseTooltip);V.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),l.BubbleTooltip=V,l.default=y},function(g,l,n){g.exports=n(63)}]).default})})(Cp);var XY=Cp.exports,kY=Ee&&Ee.__extends||function(){var e=function(t,g){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,n){l.__proto__=n}||function(l,n){for(var I in n)n.hasOwnProperty(I)&&(l[I]=n[I])},e(t,g)};return function(t,g){e(t,g);function l(){this.constructor=t}t.prototype=g===null?Object.create(g):(l.prototype=g.prototype,new l)}}(),Eo=Ee&&Ee.__assign||function(){return Eo=Object.assign||function(e){for(var t,g=1,l=arguments.length;g<l;g++){t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Eo.apply(this,arguments)},JY=Ee&&Ee.__spreadArrays||function(){for(var e=0,t=0,g=arguments.length;t<g;t++)e+=arguments[t].length;for(var l=Array(e),n=0,t=0;t<g;t++)for(var I=arguments[t],i=0,o=I.length;i<o;i++,n++)l[n]=I[i];return l},Br=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},rg=Br(k),YY=Br(Os),nI=Br(RY),tA=Br(XY),wY=function(e){kY(t,e);function t(g){var l=e.call(this,g)||this;l.dirtyProps=["modules","formats","bounds","theme","children"],l.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],l.state={generation:0},l.selection=null,l.onEditorChange=function(I,i,o,r){var a,c,s,d;I==="text-change"?(c=(a=l).onEditorChangeText)===null||c===void 0||c.call(a,l.editor.root.innerHTML,i,r,l.unprivilegedEditor):I==="selection-change"&&((d=(s=l).onEditorChangeSelection)===null||d===void 0||d.call(s,i,r,l.unprivilegedEditor))};var n=l.isControlled()?g.value:g.defaultValue;return l.value=n??"",l}return t.prototype.validateProps=function(g){var l;if(rg.default.Children.count(g.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(rg.default.Children.count(g.children)){var n=rg.default.Children.only(g.children);if(((l=n)===null||l===void 0?void 0:l.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&g.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(g,l){var n=this,I;if(this.validateProps(g),!this.editor||this.state.generation!==l.generation)return!0;if("value"in g){var i=this.getEditorContents(),o=(I=g.value,I??"");this.isEqualValue(o,i)||this.setEditorContents(this.editor,o)}return g.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,g.readOnly),JY(this.cleanProps,this.dirtyProps).some(function(r){return!nI.default(g[r],n.props[r])})},t.prototype.shouldComponentRegenerate=function(g){var l=this;return this.dirtyProps.some(function(n){return!nI.default(g[n],l.props[n])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(g,l){var n=this;if(this.editor&&this.shouldComponentRegenerate(g)){var I=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:I,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==l.generation){var o=this.regenerationSnapshot,I=o.delta,r=o.selection;delete this.regenerationSnapshot,this.instantiateEditor();var a=this.editor;a.setContents(I),gA(function(){return n.setEditorSelection(a,r)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(g,l){var n=new tA.default(g,l);return l.tabIndex!=null&&this.setEditorTabIndex(n,l.tabIndex),this.hookEditor(n),n},t.prototype.hookEditor=function(g){this.unprivilegedEditor=this.makeUnprivilegedEditor(g),g.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(g){g.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(g){return g&&g.ops},t.prototype.isEqualValue=function(g,l){return this.isDelta(g)&&this.isDelta(l)?nI.default(g.ops,l.ops):nI.default(g,l)},t.prototype.setEditorContents=function(g,l){var n=this;this.value=l;var I=this.getEditorSelection();typeof l=="string"?g.setContents(g.clipboard.convert(l)):g.setContents(l),gA(function(){return n.setEditorSelection(g,I)})},t.prototype.setEditorSelection=function(g,l){if(this.selection=l,l){var n=g.getLength();l.index=Math.max(0,Math.min(l.index,n-1)),l.length=Math.max(0,Math.min(l.length,n-1-l.index)),g.setSelection(l)}},t.prototype.setEditorTabIndex=function(g,l){var n,I;!((I=(n=g)===null||n===void 0?void 0:n.scroll)===null||I===void 0)&&I.domNode&&(g.scroll.domNode.tabIndex=l)},t.prototype.setEditorReadOnly=function(g,l){l?g.disable():g.enable()},t.prototype.makeUnprivilegedEditor=function(g){var l=g;return{getHTML:function(){return l.root.innerHTML},getLength:l.getLength.bind(l),getText:l.getText.bind(l),getContents:l.getContents.bind(l),getSelection:l.getSelection.bind(l),getBounds:l.getBounds.bind(l)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var g=YY.default.findDOMNode(this.editingArea);if(!g)throw new Error("Cannot find element for editing area");if(g.nodeType===3)throw new Error("Editing area cannot be a text node");return g},t.prototype.renderEditingArea=function(){var g=this,l=this.props,n=l.children,I=l.preserveWhitespace,i=this.state.generation,o={key:i,ref:function(r){g.editingArea=r}};return rg.default.Children.count(n)?rg.default.cloneElement(rg.default.Children.only(n),o):I?rg.default.createElement("pre",Eo({},o)):rg.default.createElement("div",Eo({},o))},t.prototype.render=function(){var g;return rg.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(g=this.props.className,g??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(g,l,n,I){var i,o;if(this.editor){var r=this.isDelta(this.value)?I.getContents():I.getHTML();r!==this.getEditorContents()&&(this.lastDeltaChangeSet=l,this.value=r,(o=(i=this.props).onChange)===null||o===void 0||o.call(i,g,l,n,I))}},t.prototype.onEditorChangeSelection=function(g,l,n){var I,i,o,r,a,c;if(this.editor){var s=this.getEditorSelection(),d=!s&&g,A=s&&!g;nI.default(g,s)||(this.selection=g,(i=(I=this.props).onChangeSelection)===null||i===void 0||i.call(I,g,l,n),d?(r=(o=this.props).onFocus)===null||r===void 0||r.call(o,g,l,n):A&&((c=(a=this.props).onBlur)===null||c===void 0||c.call(a,s,l,n)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=tA.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(rg.default.Component);function gA(e){Promise.resolve().then(e)}var HY=wY;const NY=al(HY);const FY={titulo:"",descripcion:"",telefono:"",whatsapp_option:"",email:"",ocupacion:"",direccion:"",web:"",avatar:"",id_categorie:10,id_social_media:"",show_profile:!1};let KY="#38B6FF";const xY=()=>{const e=ul(),{user:t}=k.useContext(Qt),g=_e(),[l,n]=k.useState(null),{formState:I,onInputChange:i,updateForm:o,onCheckBoxChange:r}=Fn(FY),[a,c]=k.useState({instagram_url:"",facebook_url:"",linkedin_url:"",google_url:"",pinterest_url:"",twitter_url:""}),[s,d]=k.useState(Wu),[A,f]=k.useState([]),[p,Z]=k.useState(!1),[m,u]=k.useState(!1),[h,b]=k.useState(!1),[y,V]=k.useState(!1),[v,S]=k.useState(!1),[X,G]=k.useState(!1),[B,W]=k.useState(!1),[R,Y]=k.useState("#FD6202"),[F,M]=k.useState(!1),[U,E]=k.useState({url:"www.ejemplo.com",text:"Ej. CONCENOS",color:"#FD6202"});k.useState("");const x=z=>{const{name:L,checked:H}=z.target,T=I.telefono,Q=H?T:"0";o({...I,[L]:Q})},w=k.useMemo(()=>({toolbar:{container:[["bold","italic","underline"],["clean"]]}}),[]),J=["bold","italic","underline","strike","blockquote","list","bullet","indent"],N=async()=>{if(I.titulo==""||I.descripcion==""||I.telefono==""||I.email==""||I.ocupacion==""){M(!0),At.error("Termine de completar los campos");return}const z=At.loading("Guardando perfil");try{const H=document.getElementById("image-avatar").files[0];if(H!=null){const Q=new FormData;Q.append("recfile",H),Q.append("username",t.username);const j=await e.updateProfilePhoto(Q);I.avatar=j.data.dataLocationResponse}const T={profile_img_url:I.avatar,background_color:R,custom_btn_color:U.color,custom_btn_text:U.text,custom_btn_url:U.url,title_profile:I.titulo,description_profile:I.descripcion,personal_phone:I.telefono,whatsapp_option:I.whatsapp_option,email:I.email,ocupation_role:I.ocupacion,location:I.direccion,web_page_url:I.web,id_categorie:I.id_categorie,id_social_media:I.id_social_media,show_profile:I.show_profile};if(l){t.first_login=!1;const Q=await e.createSocialMedia({...a});T.id_social_media=Q.data.id;const j=await e.createProfile(T);yI.forEach(async D=>{const te={day:D,start_time:s[D+"St"],end_time:s[D+"End"],status_schedule_day:s[D]};await e.postScheduleDay(te)})}else{const Q=await e.updateSocialMedia({...a}),j=await e.updateProfile(T);yI.forEach(async D=>{const te={day:D,start_time:s[D+"St"],end_time:s[D+"End"],status_schedule_day:s[D]};await e.updateScheduleDay(te)})}At.success("Perfil guardado exitosamente",{id:z}),t.avatar_url=I.avatar,g("/home")}catch(L){console.log(L),At.error("Error al guardar perfil",{id:z})}};k.useEffect(()=>{K()},[]);const K=async()=>{try{const{data:z}=await e.getProfile(),{data:L}=await e.getCategories();if(f(L.categories),z.msg.includes("No existe el perfil")){n(!0);const H={titulo:localStorage.getItem("fullname"),email:localStorage.getItem("email")};o(H)}else{const{data:H}=await e.getSocialMedia(),{data:T}=await e.getSchedule(),{social_media:Q}=H,{scheduleDays:j}=T,D={titulo:z.title_profile,descripcion:z.description_profile,telefono:z.personal_phone,whatsapp_option:z.whatsapp_option,email:z.email,ocupacion:z.ocupation_role,direccion:z.location,web:z.web_page_url,avatar:z.profile_img_url,id_categorie:z.id_categorie,id_social_media:Q.id_social_media,show_profile:z.show_profile},te={instagram_url:Q.instagram_url,facebook_url:Q.facebook_url,linkedin_url:Q.linkedin_url,google_url:Q.google_url,pinterest_url:Q.pinterest_url,twitter_url:Q.twitter_url},ne={};j.forEach(Ie=>{ne[Ie.day]=Ie.status_schedule_day,ne[Ie.day+"St"]=Ie.start_time,ne[Ie.day+"End"]=Ie.end_time}),o(D),Y(z.background_color),E({color:z.custom_btn_color,text:z.custom_btn_text,url:z.custom_btn_url}),c(te),d(ne),n(!1)}}catch(z){console.log(z)}};return l==null?C.jsx(Al,{}):C.jsxs(TI.Provider,{value:{color:"#FFFFFF"},children:[C.jsx(Tl,{position:"top-right",richColors:!0}),(p||h||v||y||m||X||B)&&C.jsx("div",{className:"profile-modal-background",onClick:()=>{b(!1),S(!1),V(!1),G(!1),W(!1),Z(!1)},children:C.jsx("div",{})}),C.jsxs("div",{className:"perfil-container",children:[m&&C.jsx(tW,{setShowColorPallete:u,setCustomBannerColor:Y,customBannerColor:R}),v&&C.jsx(eW,{}),h&&C.jsx(qV,{customButtonParams:U,setCustomButtonParams:E,setShowCustomButton:b}),B&&C.jsx(Ob,{placeText:"url de foto...",handleClick:z=>{i({target:{name:"avatar",value:z.url}}),W(!1)}}),y&&C.jsx($V,{setShowCustomButtonHour:V,setSchedule:d,schedule:s}),C.jsx("div",{className:"perfil-banner",children:C.jsxs("div",{className:"perfil-avatar",children:[C.jsx(rl,{color:KY,name:"avatar profile",round:!0,size:"150",src:I.avatar}),C.jsx("input",{type:"file",id:"image-avatar",accept:"image/*",hidden:!0,name:"avatar",value:I.url,onChange:z=>{const L=z.target.files[0];i({target:{name:"avatar",value:URL.createObjectURL(L)}})}}),C.jsx("div",{className:"perfil-avatar-edit",onClick:()=>{document.getElementById("image-avatar").click()},children:C.jsx(hl,{size:34})})]})}),C.jsxs("div",{className:"perfil-personal-data",children:[C.jsxs("div",{children:[C.jsx("input",{type:"text",placeholder:"Nombre completo",value:I.titulo,name:"titulo",onChange:i,className:`${F&&I.titulo==""&&"pending-input"} full-name`}),C.jsx("div",{children:C.jsx(hl,{size:24})})]}),C.jsxs("div",{children:[C.jsx("input",{type:"text",placeholder:"Cargo/Puesto",value:I.ocupacion,name:"ocupacion",onChange:i,className:`${F&&I.ocupacion==""&&"pending-input"} ocupation`}),C.jsx("div",{children:C.jsx(hl,{size:24})})]})]}),C.jsx(ke,{children:C.jsxs("div",{className:"social-media-icon-container",children:[Object.entries(a).map(z=>{if(z[1]!="")return C.jsx("div",{className:"social-media-icon",children:fc()[z[0]]},z[0])}),C.jsx("div",{className:"social-media-icon add-social-media",onClick:()=>{Z(!0)},children:C.jsx(Xv,{})})]})}),p&&C.jsx(gW,{setSocialMedia:Z,activeRedOrigin:a,showInputModal:X,setShowInputModal:G,setActiveRedOrigin:c}),C.jsx("div",{children:C.jsxs("div",{className:"h-auto mt-16 ",children:[C.jsx("h4",{className:"title-data pl-8 lg:pl-16",children:"Descripcin"}),C.jsx("br",{}),C.jsx("div",{className:"lg:pr-16 lg:mx-8",children:C.jsx(NY,{className:"lg:w-full h-auto mx-4 text-gray-900 bg-white text-2xl",theme:"snow",value:I.descripcion,formats:J,modules:w,onChange:z=>o({...I,descripcion:z})})})]})}),C.jsxs("div",{className:"perfil-general-data",children:[C.jsx("h4",{className:"title-data",children:"Informacin General"}),C.jsxs("div",{className:"perfil-field-data",children:["Horarios",C.jsx(et,{variant:"outline-primary",className:"color-input",onClick:()=>{V(!0)},children:Wu==s?"Establecer Horarios":"Horarios Establecidos"}),C.jsx("div",{children:C.jsx(hl,{size:24})})]}),C.jsxs("div",{className:"perfil-field-data",children:["Telfono",C.jsx("input",{type:"text",placeholder:"Telfono",className:`telefono ${F&&I.telefono==""&&"pending-input"}`,value:I.telefono,name:"telefono",onChange:i}),C.jsx("div",{children:C.jsx(hl,{size:24})})]})]}),C.jsx("div",{className:"mt-6 mx-8 md:mx-20",children:C.jsxs("div",{className:"relative flex gap-x-3",children:[C.jsx("div",{className:"flex h-6 items-center",children:C.jsx("input",{name:"whatsapp_option",type:"checkbox",checked:I.telefono===I.whatsapp_option,onChange:x,className:"h-5 w-5 rounded border-gray-300 text-orange-600 focus:ring-orange-600"})}),C.jsxs("div",{className:"text-sm leading-6",children:[C.jsx("label",{htmlFor:"comments",className:"font-medium text-white",children:"Mismo nmero para WhatsApp"}),C.jsx("p",{className:"text-white",children:'Activa esta opcin para incluir un enlace directo a tu perfil de WhatsApp. Al activar la casilla, cualquier persona que visite tu perfil podr contactarte fcilmente a travs de WhatsApp con solo hacer clic en el nmero de telfono proporcionado."'})]})]})}),C.jsxs("div",{className:"perfil-general-data",children:[C.jsxs("div",{className:"perfil-field-data",children:["Correo",C.jsx("input",{type:"text",placeholder:"Correo electrnico",className:`telefono ${F&&I.telefono==""&&"pending-input"}`,value:I.email,name:"email",onChange:i}),C.jsx("div",{children:C.jsx(hl,{size:24})})]}),C.jsxs("div",{className:"perfil-field-data",children:["Ubicacin",C.jsx(et,{variant:"outline-primary",className:"color-input",onClick:()=>{S(!0)},children:"Establecer Direccin"}),C.jsx("div",{children:C.jsx(hl,{size:24})})]})]}),C.jsxs(ke,{className:"perfil-multi-field",children:[C.jsx(re,{children:C.jsxs("div",{className:"perfil-field-data",children:["Area de trabajo",C.jsxs(PB.Select,{"aria-label":"Categorias",onChange:i,name:"id_categorie",value:I.id_categorie,className:"perfil-categoria",children:[C.jsx("option",{value:10,children:"Seleccione un area de trabajo"}),A.map(z=>C.jsx("option",{value:z.id_categorie,children:z.name},z.name))]})]})}),C.jsx(re,{xs:6,children:C.jsxs("div",{className:"perfil-checkbox",children:["Mostrar perfil al pblico",C.jsx("input",{type:"checkbox",onChange:r,checked:I.show_profile,name:"show_profile"})]})})]}),C.jsx("div",{className:"perfil-guardar",children:C.jsx(et,{variant:"primary",size:"lg",onClick:N,children:"Guardar cambios"})})]})]})},lA=()=>C.jsx(xY,{});const Le=({children:e})=>{const t=gi(),g=_e(),[l,n]=k.useState(!0),[I,i]=k.useState(!1),{user:o}=k.useContext(Qt);k.useEffect(()=>{r()},[]);const r=async()=>{try{const a=await t.renewToken(),{email:c,fullname:s,id:d,id_plan_fk:A,username:f,token:p,avatar_url:Z,first_login:m}=a.data;o.email=c,o.fullname=s,o.id=d,o.id_plan_fk=A,o.username=f,o.avatar_url=Z,o.first_login=m,a.status==200&&i(!0),n(!1)}catch(a){console.log(a),n(!1)}};return I&&!l&&o.first_login&&window.location.href.includes("/home")&&g("/perfil"),l?C.jsx(Al,{fullScreen:!0}):I?e:C.jsx($s,{to:"/login/"})};const EY=({schedule:e})=>{const[t,g]=k.useState(!0);return C.jsxs("div",{className:"schedule",children:[C.jsxs("div",{className:"schedules_info_title",onClick:()=>{g(!t)},children:["Horario disponible",t?C.jsx(Yv,{className:"foldable_icon"}):C.jsx(kv,{className:"foldable_icon"})]}),C.jsx("div",{className:`schedules_foldable ${t?"schedules_foldable_active":""}`,children:Object.values(e).map(l=>C.jsx("div",{children:C.jsxs("div",{className:"schedules_info_schedule",children:[C.jsx("label",{style:{textDecoration:l.status_schedule_day?"":"Line-through"},children:l.day}),C.jsxs("label",{className:"schedules_info_time flex",children:[C.jsx("div",{className:"mt-1 flex items-center gap-x-1.5 mr-2",children:C.jsx("div",{className:"flex-none rounded-full bg-emerald-500/20 p-1",children:C.jsx("div",{className:l.status_schedule_day?"h-1.5 w-1.5 rounded-full bg-emerald-500":"h-1.5 w-1.5 rounded-full bg-red-500"})})}),l.status_schedule_day?`${l.start_time} - ${l.end_time}`:"No disponible"]})]})}))})]})};function zY({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{fillRule:"evenodd",d:"M7.5 5.25a3 3 0 0 1 3-3h3a3 3 0 0 1 3 3v.205c.933.085 1.857.197 2.774.334 1.454.218 2.476 1.483 2.476 2.917v3.033c0 1.211-.734 2.352-1.936 2.752A24.726 24.726 0 0 1 12 15.75c-2.73 0-5.357-.442-7.814-1.259-1.202-.4-1.936-1.541-1.936-2.752V8.706c0-1.434 1.022-2.7 2.476-2.917A48.814 48.814 0 0 1 7.5 5.455V5.25Zm7.5 0v.09a49.488 49.488 0 0 0-6 0v-.09a1.5 1.5 0 0 1 1.5-1.5h3a1.5 1.5 0 0 1 1.5 1.5Zm-3 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}),k.createElement("path",{d:"M3 18.4v-2.796a4.3 4.3 0 0 0 .713.31A26.226 26.226 0 0 0 12 17.25c2.892 0 5.68-.468 8.287-1.335.252-.084.49-.189.713-.311V18.4c0 1.452-1.047 2.728-2.523 2.923-2.12.282-4.282.427-6.477.427a49.19 49.19 0 0 1-6.477-.427C4.047 21.128 3 19.852 3 18.4Z"}))}const TY=k.forwardRef(zY),MY=TY;function LY({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{fillRule:"evenodd",d:"M4.5 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5h-.75V3.75a.75.75 0 0 0 0-1.5h-15ZM9 6a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm-.75 3.75A.75.75 0 0 1 9 9h1.5a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM9 12a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm3.75-5.25A.75.75 0 0 1 13.5 6H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM13.5 9a.75.75 0 0 0 0 1.5H15A.75.75 0 0 0 15 9h-1.5Zm-.75 3.75a.75.75 0 0 1 .75-.75H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM9 19.5v-2.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 9 19.5Z",clipRule:"evenodd"}))}const UY=k.forwardRef(LY),sp=UY;function QY({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),k.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const jY=k.forwardRef(QY),DY=jY;function OY({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),k.createElement("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"}))}const PY=k.forwardRef(OY),Bc=PY;function _Y({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{d:"M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"}))}const qY=k.forwardRef(_Y),cp=qY;function $Y({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{d:"M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z"}),k.createElement("path",{fillRule:"evenodd",d:"M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z",clipRule:"evenodd"}))}const ew=k.forwardRef($Y),tw=ew;function gw({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))}const lw=k.forwardRef(gw),nw=lw;function Iw({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"}))}const iw=k.forwardRef(Iw),ow=iw;function rw({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const aw=k.forwardRef(rw),Cw=aw;function sw({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{fillRule:"evenodd",d:"M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z",clipRule:"evenodd"}))}const cw=k.forwardRef(sw),dp=cw;function dw({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 9.375v-4.5ZM4.875 4.5a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 0 1-1.875-1.875v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75A.75.75 0 0 1 6 7.5v-.75Zm9.75 0A.75.75 0 0 1 16.5 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 19.125v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875-.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM6 16.5a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm9.75 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm-3 3a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Z",clipRule:"evenodd"}))}const uw=k.forwardRef(dw),Aw=uw;function mw({title:e,titleId:t,...g},l){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},g),e?k.createElement("title",{id:t},e):null,k.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}const hw=k.forwardRef(mw),up=hw;function bw(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var Ap=k,pw=bw(Ap);function nA(e,t,g){return t in e?Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}):e[t]=g,e}function fw(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Zw=!!(typeof window<"u"&&window.document&&window.document.createElement);function yw(e,t,g){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof g<"u"&&typeof g!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function l(n){return n.displayName||n.name||"Component"}return function(I){if(typeof I!="function")throw new Error("Expected WrappedComponent to be a React component.");var i=[],o;function r(){o=e(i.map(function(c){return c.props})),a.canUseDOM?t(o):g&&(o=g(o))}var a=function(c){fw(s,c);function s(){return c.apply(this,arguments)||this}s.peek=function(){return o},s.rewind=function(){if(s.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var f=o;return o=void 0,i=[],f};var d=s.prototype;return d.UNSAFE_componentWillMount=function(){i.push(this),r()},d.componentDidUpdate=function(){r()},d.componentWillUnmount=function(){var f=i.indexOf(this);i.splice(f,1),r()},d.render=function(){return pw.createElement(I,this.props)},s}(Ap.PureComponent);return nA(a,"displayName","SideEffect("+l(I)+")"),nA(a,"canUseDOM",Zw),a}}var Gw=yw;const Bw=al(Gw);var vw=typeof Element<"u",Sw=typeof Map=="function",Vw=typeof Set=="function",Ww=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Di(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var g,l,n;if(Array.isArray(e)){if(g=e.length,g!=t.length)return!1;for(l=g;l--!==0;)if(!Di(e[l],t[l]))return!1;return!0}var I;if(Sw&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(I=e.entries();!(l=I.next()).done;)if(!t.has(l.value[0]))return!1;for(I=e.entries();!(l=I.next()).done;)if(!Di(l.value[1],t.get(l.value[0])))return!1;return!0}if(Vw&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(I=e.entries();!(l=I.next()).done;)if(!t.has(l.value[0]))return!1;return!0}if(Ww&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(g=e.length,g!=t.length)return!1;for(l=g;l--!==0;)if(e[l]!==t[l])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(n=Object.keys(e),g=n.length,g!==Object.keys(t).length)return!1;for(l=g;l--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[l]))return!1;if(vw&&e instanceof Element)return!1;for(l=g;l--!==0;)if(!((n[l]==="_owner"||n[l]==="__v"||n[l]==="__o")&&e.$$typeof)&&!Di(e[n[l]],t[n[l]]))return!1;return!0}return e!==e&&t!==t}var Rw=function(t,g){try{return Di(t,g)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}};const Xw=al(Rw);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var IA=Object.getOwnPropertySymbols,kw=Object.prototype.hasOwnProperty,Jw=Object.prototype.propertyIsEnumerable;function Yw(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ww(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},g=0;g<10;g++)t["_"+String.fromCharCode(g)]=g;var l=Object.getOwnPropertyNames(t).map(function(I){return t[I]});if(l.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(I){n[I]=I}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Hw=ww()?Object.assign:function(e,t){for(var g,l=Yw(e),n,I=1;I<arguments.length;I++){g=Object(arguments[I]);for(var i in g)kw.call(g,i)&&(l[i]=g[i]);if(IA){n=IA(g);for(var o=0;o<n.length;o++)Jw.call(g,n[o])&&(l[n[o]]=g[n[o]])}}return l};const Nw=al(Hw);var Yl={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},ce={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(ce).map(function(e){return ce[e]});var Fe={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},zo={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},QI={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Fw=Object.keys(zo).reduce(function(e,t){return e[zo[t]]=t,e},{}),Kw=[ce.NOSCRIPT,ce.SCRIPT,ce.STYLE],eg="data-react-helmet",xw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ew=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},zw=function(){function e(t,g){for(var l=0;l<g.length;l++){var n=g[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,g,l){return g&&e(t.prototype,g),l&&e(t,l),t}}(),pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l])}return e},Tw=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},iA=function(e,t){var g={};for(var l in e)t.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(e,l)&&(g[l]=e[l]);return g},Mw=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},_C=function(t){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return g===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Lw=function(t){var g=pn(t,ce.TITLE),l=pn(t,QI.TITLE_TEMPLATE);if(l&&g)return l.replace(/%s/g,function(){return Array.isArray(g)?g.join(""):g});var n=pn(t,QI.DEFAULT_TITLE);return g||n||void 0},Uw=function(t){return pn(t,QI.ON_CHANGE_CLIENT_STATE)||function(){}},ka=function(t,g){return g.filter(function(l){return typeof l[t]<"u"}).map(function(l){return l[t]}).reduce(function(l,n){return pt({},l,n)},{})},Qw=function(t,g){return g.filter(function(l){return typeof l[ce.BASE]<"u"}).map(function(l){return l[ce.BASE]}).reverse().reduce(function(l,n){if(!l.length)for(var I=Object.keys(n),i=0;i<I.length;i++){var o=I[i],r=o.toLowerCase();if(t.indexOf(r)!==-1&&n[r])return l.concat(n)}return l},[])},II=function(t,g,l){var n={};return l.filter(function(I){return Array.isArray(I[t])?!0:(typeof I[t]<"u"&&Pw("Helmet: "+t+' should be of type "Array". Instead found type "'+xw(I[t])+'"'),!1)}).map(function(I){return I[t]}).reverse().reduce(function(I,i){var o={};i.filter(function(d){for(var A=void 0,f=Object.keys(d),p=0;p<f.length;p++){var Z=f[p],m=Z.toLowerCase();g.indexOf(m)!==-1&&!(A===Fe.REL&&d[A].toLowerCase()==="canonical")&&!(m===Fe.REL&&d[m].toLowerCase()==="stylesheet")&&(A=m),g.indexOf(Z)!==-1&&(Z===Fe.INNER_HTML||Z===Fe.CSS_TEXT||Z===Fe.ITEM_PROP)&&(A=Z)}if(!A||!d[A])return!1;var u=d[A].toLowerCase();return n[A]||(n[A]={}),o[A]||(o[A]={}),n[A][u]?!1:(o[A][u]=!0,!0)}).reverse().forEach(function(d){return I.push(d)});for(var r=Object.keys(o),a=0;a<r.length;a++){var c=r[a],s=Nw({},n[c],o[c]);n[c]=s}return I},[]).reverse()},pn=function(t,g){for(var l=t.length-1;l>=0;l--){var n=t[l];if(n.hasOwnProperty(g))return n[g]}return null},jw=function(t){return{baseTag:Qw([Fe.HREF,Fe.TARGET],t),bodyAttributes:ka(Yl.BODY,t),defer:pn(t,QI.DEFER),encode:pn(t,QI.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:ka(Yl.HTML,t),linkTags:II(ce.LINK,[Fe.REL,Fe.HREF],t),metaTags:II(ce.META,[Fe.NAME,Fe.CHARSET,Fe.HTTPEQUIV,Fe.PROPERTY,Fe.ITEM_PROP],t),noscriptTags:II(ce.NOSCRIPT,[Fe.INNER_HTML],t),onChangeClientState:Uw(t),scriptTags:II(ce.SCRIPT,[Fe.SRC,Fe.INNER_HTML],t),styleTags:II(ce.STYLE,[Fe.CSS_TEXT],t),title:Lw(t),titleAttributes:ka(Yl.TITLE,t)}},qC=function(){var e=Date.now();return function(t){var g=Date.now();g-e>16?(e=g,t(g)):setTimeout(function(){qC(t)},0)}}(),oA=function(t){return clearTimeout(t)},Dw=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||qC:global.requestAnimationFrame||qC,Ow=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||oA:global.cancelAnimationFrame||oA,Pw=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},iI=null,_w=function(t){iI&&Ow(iI),t.defer?iI=Dw(function(){rA(t,function(){iI=null})}):(rA(t),iI=null)},rA=function(t,g){var l=t.baseTag,n=t.bodyAttributes,I=t.htmlAttributes,i=t.linkTags,o=t.metaTags,r=t.noscriptTags,a=t.onChangeClientState,c=t.scriptTags,s=t.styleTags,d=t.title,A=t.titleAttributes;$C(ce.BODY,n),$C(ce.HTML,I),qw(d,A);var f={baseTag:Pl(ce.BASE,l),linkTags:Pl(ce.LINK,i),metaTags:Pl(ce.META,o),noscriptTags:Pl(ce.NOSCRIPT,r),scriptTags:Pl(ce.SCRIPT,c),styleTags:Pl(ce.STYLE,s)},p={},Z={};Object.keys(f).forEach(function(m){var u=f[m],h=u.newTags,b=u.oldTags;h.length&&(p[m]=h),b.length&&(Z[m]=f[m].oldTags)}),g&&g(),a(t,p,Z)},mp=function(t){return Array.isArray(t)?t.join(""):t},qw=function(t,g){typeof t<"u"&&document.title!==t&&(document.title=mp(t)),$C(ce.TITLE,g)},$C=function(t,g){var l=document.getElementsByTagName(t)[0];if(l){for(var n=l.getAttribute(eg),I=n?n.split(","):[],i=[].concat(I),o=Object.keys(g),r=0;r<o.length;r++){var a=o[r],c=g[a]||"";l.getAttribute(a)!==c&&l.setAttribute(a,c),I.indexOf(a)===-1&&I.push(a);var s=i.indexOf(a);s!==-1&&i.splice(s,1)}for(var d=i.length-1;d>=0;d--)l.removeAttribute(i[d]);I.length===i.length?l.removeAttribute(eg):l.getAttribute(eg)!==o.join(",")&&l.setAttribute(eg,o.join(","))}},Pl=function(t,g){var l=document.head||document.querySelector(ce.HEAD),n=l.querySelectorAll(t+"["+eg+"]"),I=Array.prototype.slice.call(n),i=[],o=void 0;return g&&g.length&&g.forEach(function(r){var a=document.createElement(t);for(var c in r)if(r.hasOwnProperty(c))if(c===Fe.INNER_HTML)a.innerHTML=r.innerHTML;else if(c===Fe.CSS_TEXT)a.styleSheet?a.styleSheet.cssText=r.cssText:a.appendChild(document.createTextNode(r.cssText));else{var s=typeof r[c]>"u"?"":r[c];a.setAttribute(c,s)}a.setAttribute(eg,"true"),I.some(function(d,A){return o=A,a.isEqualNode(d)})?I.splice(o,1):i.push(a)}),I.forEach(function(r){return r.parentNode.removeChild(r)}),i.forEach(function(r){return l.appendChild(r)}),{oldTags:I,newTags:i}},hp=function(t){return Object.keys(t).reduce(function(g,l){var n=typeof t[l]<"u"?l+'="'+t[l]+'"':""+l;return g?g+" "+n:n},"")},$w=function(t,g,l,n){var I=hp(l),i=mp(g);return I?"<"+t+" "+eg+'="true" '+I+">"+_C(i,n)+"</"+t+">":"<"+t+" "+eg+'="true">'+_C(i,n)+"</"+t+">"},e9=function(t,g,l){return g.reduce(function(n,I){var i=Object.keys(I).filter(function(a){return!(a===Fe.INNER_HTML||a===Fe.CSS_TEXT)}).reduce(function(a,c){var s=typeof I[c]>"u"?c:c+'="'+_C(I[c],l)+'"';return a?a+" "+s:s},""),o=I.innerHTML||I.cssText||"",r=Kw.indexOf(t)===-1;return n+"<"+t+" "+eg+'="true" '+i+(r?"/>":">"+o+"</"+t+">")},"")},bp=function(t){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(l,n){return l[zo[n]||n]=t[n],l},g)},t9=function(t){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(l,n){return l[Fw[n]||n]=t[n],l},g)},g9=function(t,g,l){var n,I=(n={key:g},n[eg]=!0,n),i=bp(l,I);return[q.createElement(ce.TITLE,i,g)]},l9=function(t,g){return g.map(function(l,n){var I,i=(I={key:n},I[eg]=!0,I);return Object.keys(l).forEach(function(o){var r=zo[o]||o;if(r===Fe.INNER_HTML||r===Fe.CSS_TEXT){var a=l.innerHTML||l.cssText;i.dangerouslySetInnerHTML={__html:a}}else i[r]=l[o]}),q.createElement(t,i)})},pg=function(t,g,l){switch(t){case ce.TITLE:return{toComponent:function(){return g9(t,g.title,g.titleAttributes)},toString:function(){return $w(t,g.title,g.titleAttributes,l)}};case Yl.BODY:case Yl.HTML:return{toComponent:function(){return bp(g)},toString:function(){return hp(g)}};default:return{toComponent:function(){return l9(t,g)},toString:function(){return e9(t,g,l)}}}},pp=function(t){var g=t.baseTag,l=t.bodyAttributes,n=t.encode,I=t.htmlAttributes,i=t.linkTags,o=t.metaTags,r=t.noscriptTags,a=t.scriptTags,c=t.styleTags,s=t.title,d=s===void 0?"":s,A=t.titleAttributes;return{base:pg(ce.BASE,g,n),bodyAttributes:pg(Yl.BODY,l,n),htmlAttributes:pg(Yl.HTML,I,n),link:pg(ce.LINK,i,n),meta:pg(ce.META,o,n),noscript:pg(ce.NOSCRIPT,r,n),script:pg(ce.SCRIPT,a,n),style:pg(ce.STYLE,c,n),title:pg(ce.TITLE,{title:d,titleAttributes:A},n)}},n9=function(t){var g,l;return l=g=function(n){Tw(I,n);function I(){return Ew(this,I),Mw(this,n.apply(this,arguments))}return I.prototype.shouldComponentUpdate=function(o){return!Xw(this.props,o)},I.prototype.mapNestedChildrenToProps=function(o,r){if(!r)return null;switch(o.type){case ce.SCRIPT:case ce.NOSCRIPT:return{innerHTML:r};case ce.STYLE:return{cssText:r}}throw new Error("<"+o.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},I.prototype.flattenArrayTypeChildren=function(o){var r,a=o.child,c=o.arrayTypeChildren,s=o.newChildProps,d=o.nestedChildren;return pt({},c,(r={},r[a.type]=[].concat(c[a.type]||[],[pt({},s,this.mapNestedChildrenToProps(a,d))]),r))},I.prototype.mapObjectTypeChildren=function(o){var r,a,c=o.child,s=o.newProps,d=o.newChildProps,A=o.nestedChildren;switch(c.type){case ce.TITLE:return pt({},s,(r={},r[c.type]=A,r.titleAttributes=pt({},d),r));case ce.BODY:return pt({},s,{bodyAttributes:pt({},d)});case ce.HTML:return pt({},s,{htmlAttributes:pt({},d)})}return pt({},s,(a={},a[c.type]=pt({},d),a))},I.prototype.mapArrayTypeChildrenToProps=function(o,r){var a=pt({},r);return Object.keys(o).forEach(function(c){var s;a=pt({},a,(s={},s[c]=o[c],s))}),a},I.prototype.warnOnInvalidChildren=function(o,r){return!0},I.prototype.mapChildrenToProps=function(o,r){var a=this,c={};return q.Children.forEach(o,function(s){if(!(!s||!s.props)){var d=s.props,A=d.children,f=iA(d,["children"]),p=t9(f);switch(a.warnOnInvalidChildren(s,A),s.type){case ce.LINK:case ce.META:case ce.NOSCRIPT:case ce.SCRIPT:case ce.STYLE:c=a.flattenArrayTypeChildren({child:s,arrayTypeChildren:c,newChildProps:p,nestedChildren:A});break;default:r=a.mapObjectTypeChildren({child:s,newProps:r,newChildProps:p,nestedChildren:A});break}}}),r=this.mapArrayTypeChildrenToProps(c,r),r},I.prototype.render=function(){var o=this.props,r=o.children,a=iA(o,["children"]),c=pt({},a);return r&&(c=this.mapChildrenToProps(r,c)),q.createElement(t,c)},zw(I,null,[{key:"canUseDOM",set:function(o){t.canUseDOM=o}}]),I}(q.Component),g.propTypes={base:Ze.object,bodyAttributes:Ze.object,children:Ze.oneOfType([Ze.arrayOf(Ze.node),Ze.node]),defaultTitle:Ze.string,defer:Ze.bool,encodeSpecialCharacters:Ze.bool,htmlAttributes:Ze.object,link:Ze.arrayOf(Ze.object),meta:Ze.arrayOf(Ze.object),noscript:Ze.arrayOf(Ze.object),onChangeClientState:Ze.func,script:Ze.arrayOf(Ze.object),style:Ze.arrayOf(Ze.object),title:Ze.string,titleAttributes:Ze.object,titleTemplate:Ze.string},g.defaultProps={defer:!0,encodeSpecialCharacters:!0},g.peek=t.peek,g.rewind=function(){var n=t.rewind();return n||(n=pp({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),n},l},I9=function(){return null},i9=Bw(jw,_w,pp)(I9),es=n9(i9);es.renderStatic=es.rewind;const o9={Lunes:0,Martes:1,Mircoles:2,Jueves:3,Viernes:4,Sbado:5,Domingo:6};function r9(){const e=new URLSearchParams(window.location.search),t=ul(),g=e.get("username"),l=e.get("id"),[n,I]=k.useState(null),[i,o]=k.useState({}),[r,a]=k.useState({}),[c,s]=k.useState(!0);k.useState(!1),k.useEffect(()=>{d()},[]);const d=async()=>{const{data:f}=await t.getProfile(g),p=await t.getSocialMedia(l),{data:Z}=await t.getSchedule(l),m={};Object.values(Z.scheduleDays).forEach(u=>{m[o9[u.day]]=u}),I({...p.data.social_media}),o({...f}),a({...m}),s(!1)},A=f=>{window.open(f,"_blank","noreferrer")};return c?C.jsx(C.Fragment,{children:C.jsx(Al,{fullScreen:!0})}):C.jsxs(C.Fragment,{children:[C.jsxs(es,{children:[C.jsx("title",{children:i.title_profile}),C.jsx("meta",{name:"description",content:i.description_profile}),C.jsx("meta",{property:"og:title",content:i.title_profile}),C.jsx("meta",{property:"og:description",content:i.description_profile}),C.jsx("meta",{property:"og:image",content:i.profile_img_url}),C.jsx("meta",{property:"og:url",content:window.location.href}),C.jsx("meta",{property:"og:type",content:"website"})]}),C.jsx("div",{className:"max-w-xl m-auto pt-4 pb-8",children:C.jsx("div",{className:"border-solid border-4 border-white/10 rounded-lg pb-8",children:C.jsxs("div",{className:"flex flex-col justify-center",children:[C.jsx("div",{className:"m-auto p-4",children:C.jsx(rl,{name:i.username,size:"150",src:i.profile_img_url})}),C.jsxs("div",{className:"share-personal-data",children:[C.jsx("label",{className:"full-name",children:i.title_profile}),C.jsx("label",{className:"ocupation",children:i.ocupation_role})]}),C.jsx(TI.Provider,{value:{color:"#FFF"},children:C.jsx(ke,{children:C.jsxs("div",{className:"social-media-icon-container",children:[Object.entries(fc(n)).map(f=>{if(n[f[0]]!="")return C.jsx("div",{className:"social-media-icon",children:f[1]},f[0]);console.log(f[1])}),i.whatsapp_option!=="0"&&C.jsx("div",{className:"social-media-icon",children:C.jsx(zv,{onClick:()=>{A(`https://wa.me/52${i.whatsapp_option}?text=Hola%21%0AEncontr+tu+contacto+por+knowmeapp.com`)}},"whatsapp")},"whatsapp")]})})}),C.jsx("div",{className:"share-description max-w-96 text-left md:max-w-xl ",dangerouslySetInnerHTML:{__html:i.description_profile}}),C.jsxs("div",{className:"share-general-data",children:[C.jsx("h4",{className:"title-data",children:"Informacin General"}),C.jsx("div",{className:"perfil-field-data",children:C.jsx(EY,{schedule:r})}),C.jsxs("div",{className:"perfil-field-data",children:["Correo electrnico",C.jsxs("div",{className:"flex m-2",children:[C.jsx(Bc,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),C.jsx("a",{href:`mailto:${i.email}`,className:"telefono pb-1",children:i.email})]})]}),C.jsxs("div",{className:"perfil-field-data",children:["Telfono",C.jsxs("div",{className:"flex m-2",children:[C.jsx(dp,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),C.jsx("a",{href:`tel:${i.personal_phone}`,className:"telefono pb-1",children:i.personal_phone})]})]})]})]})})}),C.jsx("div",{className:"sm:sticky bottom-0 w-full bg-blue-950 lg:px-96",children:C.jsx(mc,{})})]})}const pl=({children:e})=>{const t=gi(),[g,l]=k.useState(!0),[n,I]=k.useState(!1);k.useContext(Qt),k.useEffect(()=>{i()},[]);const i=async()=>{try{(await t.renewToken()).status==200&&I(!0),l(!1)}catch(o){console.log(o),l(!1)}};return g?C.jsx(Al,{fullScreen:!0}):n?C.jsx($s,{to:"/home/"}):e};var vr={},fp={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},a9=fp;function Zp(e){this.mode=a9.MODE_8BIT_BYTE,this.data=e}Zp.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var C9=Zp,yp={L:1,M:0,Q:3,H:2},Ri=yp;function cg(e,t){this.totalCount=e,this.dataCount=t}cg.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];cg.getRSBlocks=function(e,t){var g=cg.getRsBlockTable(e,t);if(g==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var l=g.length/3,n=new Array,I=0;I<l;I++)for(var i=g[I*3+0],o=g[I*3+1],r=g[I*3+2],a=0;a<i;a++)n.push(new cg(o,r));return n};cg.getRsBlockTable=function(e,t){switch(t){case Ri.L:return cg.RS_BLOCK_TABLE[(e-1)*4+0];case Ri.M:return cg.RS_BLOCK_TABLE[(e-1)*4+1];case Ri.Q:return cg.RS_BLOCK_TABLE[(e-1)*4+2];case Ri.H:return cg.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var s9=cg;function Gp(){this.buffer=new Array,this.length=0}Gp.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var g=0;g<t;g++)this.putBit((e>>>t-g-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var c9=Gp,$t={glog:function(e){if(e<1)throw new Error("glog("+e+")");return $t.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return $t.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var it=0;it<8;it++)$t.EXP_TABLE[it]=1<<it;for(var it=8;it<256;it++)$t.EXP_TABLE[it]=$t.EXP_TABLE[it-4]^$t.EXP_TABLE[it-5]^$t.EXP_TABLE[it-6]^$t.EXP_TABLE[it-8];for(var it=0;it<255;it++)$t.LOG_TABLE[$t.EXP_TABLE[it]]=it;var Bp=$t,fl=Bp;function Oi(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var g=0;g<e.length&&e[g]==0;)g++;this.num=new Array(e.length-g+t);for(var l=0;l<e.length-g;l++)this.num[l]=e[l+g]}Oi.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),g=0;g<this.getLength();g++)for(var l=0;l<e.getLength();l++)t[g+l]^=fl.gexp(fl.glog(this.get(g))+fl.glog(e.get(l)));return new Oi(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=fl.glog(this.get(0))-fl.glog(e.get(0)),g=new Array(this.getLength()),l=0;l<this.getLength();l++)g[l]=this.get(l);for(var l=0;l<e.getLength();l++)g[l]^=fl.gexp(fl.glog(e.get(l))+t);return new Oi(g,0).mod(e)}};var vp=Oi,Ht=fp,aA=vp,d9=Bp,xg={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},nt={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;nt.getBCHDigit(t)-nt.getBCHDigit(nt.G15)>=0;)t^=nt.G15<<nt.getBCHDigit(t)-nt.getBCHDigit(nt.G15);return(e<<10|t)^nt.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;nt.getBCHDigit(t)-nt.getBCHDigit(nt.G18)>=0;)t^=nt.G18<<nt.getBCHDigit(t)-nt.getBCHDigit(nt.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return nt.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,g){switch(e){case xg.PATTERN000:return(t+g)%2==0;case xg.PATTERN001:return t%2==0;case xg.PATTERN010:return g%3==0;case xg.PATTERN011:return(t+g)%3==0;case xg.PATTERN100:return(Math.floor(t/2)+Math.floor(g/3))%2==0;case xg.PATTERN101:return t*g%2+t*g%3==0;case xg.PATTERN110:return(t*g%2+t*g%3)%2==0;case xg.PATTERN111:return(t*g%3+(t+g)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new aA([1],0),g=0;g<e;g++)t=t.multiply(new aA([1,d9.gexp(g)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Ht.MODE_NUMBER:return 10;case Ht.MODE_ALPHA_NUM:return 9;case Ht.MODE_8BIT_BYTE:return 8;case Ht.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Ht.MODE_NUMBER:return 12;case Ht.MODE_ALPHA_NUM:return 11;case Ht.MODE_8BIT_BYTE:return 16;case Ht.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Ht.MODE_NUMBER:return 14;case Ht.MODE_ALPHA_NUM:return 13;case Ht.MODE_8BIT_BYTE:return 16;case Ht.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),g=0,l=0;l<t;l++)for(var n=0;n<t;n++){for(var I=0,i=e.isDark(l,n),o=-1;o<=1;o++)if(!(l+o<0||t<=l+o))for(var r=-1;r<=1;r++)n+r<0||t<=n+r||o==0&&r==0||i==e.isDark(l+o,n+r)&&I++;I>5&&(g+=3+I-5)}for(var l=0;l<t-1;l++)for(var n=0;n<t-1;n++){var a=0;e.isDark(l,n)&&a++,e.isDark(l+1,n)&&a++,e.isDark(l,n+1)&&a++,e.isDark(l+1,n+1)&&a++,(a==0||a==4)&&(g+=3)}for(var l=0;l<t;l++)for(var n=0;n<t-6;n++)e.isDark(l,n)&&!e.isDark(l,n+1)&&e.isDark(l,n+2)&&e.isDark(l,n+3)&&e.isDark(l,n+4)&&!e.isDark(l,n+5)&&e.isDark(l,n+6)&&(g+=40);for(var n=0;n<t;n++)for(var l=0;l<t-6;l++)e.isDark(l,n)&&!e.isDark(l+1,n)&&e.isDark(l+2,n)&&e.isDark(l+3,n)&&e.isDark(l+4,n)&&!e.isDark(l+5,n)&&e.isDark(l+6,n)&&(g+=40);for(var c=0,n=0;n<t;n++)for(var l=0;l<t;l++)e.isDark(l,n)&&c++;var s=Math.abs(100*c/t/t-50)/5;return g+=s*10,g}},u9=nt,A9=C9,Sp=s9,Vp=c9,ml=u9,m9=vp;function Ag(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Yt=Ag.prototype;Yt.addData=function(e){var t=new A9(e);this.dataList.push(t),this.dataCache=null};Yt.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};Yt.getModuleCount=function(){return this.moduleCount};Yt.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=Sp.getRSBlocks(e,this.errorCorrectLevel),g=new Vp,l=0,n=0;n<t.length;n++)l+=t[n].dataCount;for(var n=0;n<this.dataList.length;n++){var I=this.dataList[n];g.put(I.mode,4),g.put(I.getLength(),ml.getLengthInBits(I.mode,e)),I.write(g)}if(g.getLengthInBits()<=l*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};Yt.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var g=0;g<this.moduleCount;g++){this.modules[g]=new Array(this.moduleCount);for(var l=0;l<this.moduleCount;l++)this.modules[g][l]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Ag.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};Yt.setupPositionProbePattern=function(e,t){for(var g=-1;g<=7;g++)if(!(e+g<=-1||this.moduleCount<=e+g))for(var l=-1;l<=7;l++)t+l<=-1||this.moduleCount<=t+l||(0<=g&&g<=6&&(l==0||l==6)||0<=l&&l<=6&&(g==0||g==6)||2<=g&&g<=4&&2<=l&&l<=4?this.modules[e+g][t+l]=!0:this.modules[e+g][t+l]=!1)};Yt.getBestMaskPattern=function(){for(var e=0,t=0,g=0;g<8;g++){this.makeImpl(!0,g);var l=ml.getLostPoint(this);(g==0||e>l)&&(e=l,t=g)}return t};Yt.createMovieClip=function(e,t,g){var l=e.createEmptyMovieClip(t,g),n=1;this.make();for(var I=0;I<this.modules.length;I++)for(var i=I*n,o=0;o<this.modules[I].length;o++){var r=o*n,a=this.modules[I][o];a&&(l.beginFill(0,100),l.moveTo(r,i),l.lineTo(r+n,i),l.lineTo(r+n,i+n),l.lineTo(r,i+n),l.endFill())}return l};Yt.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};Yt.setupPositionAdjustPattern=function(){for(var e=ml.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var g=0;g<e.length;g++){var l=e[t],n=e[g];if(this.modules[l][n]==null)for(var I=-2;I<=2;I++)for(var i=-2;i<=2;i++)I==-2||I==2||i==-2||i==2||I==0&&i==0?this.modules[l+I][n+i]=!0:this.modules[l+I][n+i]=!1}};Yt.setupTypeNumber=function(e){for(var t=ml.getBCHTypeNumber(this.typeNumber),g=0;g<18;g++){var l=!e&&(t>>g&1)==1;this.modules[Math.floor(g/3)][g%3+this.moduleCount-8-3]=l}for(var g=0;g<18;g++){var l=!e&&(t>>g&1)==1;this.modules[g%3+this.moduleCount-8-3][Math.floor(g/3)]=l}};Yt.setupTypeInfo=function(e,t){for(var g=this.errorCorrectLevel<<3|t,l=ml.getBCHTypeInfo(g),n=0;n<15;n++){var I=!e&&(l>>n&1)==1;n<6?this.modules[n][8]=I:n<8?this.modules[n+1][8]=I:this.modules[this.moduleCount-15+n][8]=I}for(var n=0;n<15;n++){var I=!e&&(l>>n&1)==1;n<8?this.modules[8][this.moduleCount-n-1]=I:n<9?this.modules[8][15-n-1+1]=I:this.modules[8][15-n-1]=I}this.modules[this.moduleCount-8][8]=!e};Yt.mapData=function(e,t){for(var g=-1,l=this.moduleCount-1,n=7,I=0,i=this.moduleCount-1;i>0;i-=2)for(i==6&&i--;;){for(var o=0;o<2;o++)if(this.modules[l][i-o]==null){var r=!1;I<e.length&&(r=(e[I]>>>n&1)==1);var a=ml.getMask(t,l,i-o);a&&(r=!r),this.modules[l][i-o]=r,n--,n==-1&&(I++,n=7)}if(l+=g,l<0||this.moduleCount<=l){l-=g,g=-g;break}}};Ag.PAD0=236;Ag.PAD1=17;Ag.createData=function(e,t,g){for(var l=Sp.getRSBlocks(e,t),n=new Vp,I=0;I<g.length;I++){var i=g[I];n.put(i.mode,4),n.put(i.getLength(),ml.getLengthInBits(i.mode,e)),i.write(n)}for(var o=0,I=0;I<l.length;I++)o+=l[I].dataCount;if(n.getLengthInBits()>o*8)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+o*8+")");for(n.getLengthInBits()+4<=o*8&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=o*8||(n.put(Ag.PAD0,8),n.getLengthInBits()>=o*8));)n.put(Ag.PAD1,8);return Ag.createBytes(n,l)};Ag.createBytes=function(e,t){for(var g=0,l=0,n=0,I=new Array(t.length),i=new Array(t.length),o=0;o<t.length;o++){var r=t[o].dataCount,a=t[o].totalCount-r;l=Math.max(l,r),n=Math.max(n,a),I[o]=new Array(r);for(var c=0;c<I[o].length;c++)I[o][c]=255&e.buffer[c+g];g+=r;var s=ml.getErrorCorrectPolynomial(a),d=new m9(I[o],s.getLength()-1),A=d.mod(s);i[o]=new Array(s.getLength()-1);for(var c=0;c<i[o].length;c++){var f=c+A.getLength()-i[o].length;i[o][c]=f>=0?A.get(f):0}}for(var p=0,c=0;c<t.length;c++)p+=t[c].totalCount;for(var Z=new Array(p),m=0,c=0;c<l;c++)for(var o=0;o<t.length;o++)c<I[o].length&&(Z[m++]=I[o][c]);for(var c=0;c<n;c++)for(var o=0;o<t.length;o++)c<i[o].length&&(Z[m++]=i[o][c]);return Z};var h9=Ag,vc={};Object.defineProperty(vc,"__esModule",{value:!0});var b9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l])}return e},p9=Ue,Nt=Rp(p9),Wp=k,Xi=Rp(Wp);function Rp(e){return e&&e.__esModule?e:{default:e}}function f9(e,t){var g={};for(var l in e)t.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(e,l)&&(g[l]=e[l]);return g}var Z9={bgColor:Nt.default.oneOfType([Nt.default.object,Nt.default.string]).isRequired,bgD:Nt.default.string.isRequired,fgColor:Nt.default.oneOfType([Nt.default.object,Nt.default.string]).isRequired,fgD:Nt.default.string.isRequired,size:Nt.default.number.isRequired,title:Nt.default.string,viewBoxSize:Nt.default.number.isRequired,xmlns:Nt.default.string},y9={title:void 0,xmlns:"http://www.w3.org/2000/svg"},Sr=(0,Wp.forwardRef)(function(e,t){var g=e.bgColor,l=e.bgD,n=e.fgD,I=e.fgColor,i=e.size,o=e.title,r=e.viewBoxSize,a=f9(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize"]);return Xi.default.createElement("svg",b9({},a,{height:i,ref:t,viewBox:"0 0 "+r+" "+r,width:i}),o?Xi.default.createElement("title",null,o):null,Xi.default.createElement("path",{d:l,fill:g}),Xi.default.createElement("path",{d:n,fill:I}))});Sr.displayName="QRCodeSvg";Sr.propTypes=Z9;Sr.defaultProps=y9;vc.default=Sr;Object.defineProperty(vr,"__esModule",{value:!0});vr.QRCode=void 0;var G9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l])}return e},B9=h9,v9=li(B9),S9=yp,V9=li(S9),W9=Ue,fg=li(W9),Xp=k,R9=li(Xp),X9=vc,k9=li(X9);function li(e){return e&&e.__esModule?e:{default:e}}function J9(e,t){var g={};for(var l in e)t.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(e,l)&&(g[l]=e[l]);return g}var Y9={bgColor:fg.default.oneOfType([fg.default.object,fg.default.string]),fgColor:fg.default.oneOfType([fg.default.object,fg.default.string]),level:fg.default.string,size:fg.default.number,value:fg.default.string.isRequired},w9={bgColor:"#FFFFFF",fgColor:"#000000",level:"L",size:256},ni=(0,Xp.forwardRef)(function(e,t){var g=e.bgColor,l=e.fgColor,n=e.level,I=e.size,i=e.value,o=J9(e,["bgColor","fgColor","level","size","value"]),r=new v9.default(-1,V9.default[n]);r.addData(i),r.make();var a=r.modules;return R9.default.createElement(k9.default,G9({},o,{bgColor:g,bgD:a.map(function(c,s){return c.map(function(d,A){return d?"":"M "+A+" "+s+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:l,fgD:a.map(function(c,s){return c.map(function(d,A){return d?"M "+A+" "+s+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:I,viewBoxSize:a.length}))});vr.QRCode=ni;ni.displayName="QRCode";ni.propTypes=Y9;ni.defaultProps=w9;var H9=vr.default=ni;const CA=()=>{const{user:e}=k.useContext(Qt),t=ul(),[g,l]=k.useState();k.useState("");const n=window.location.origin+`/card?username=${e.username}&id=${e.id}`,[I,i]=k.useState(!1),o=async()=>{const{data:c}=await t.getProfile();l({...c})},r=async()=>{try{navigator.share?await navigator.share({title:"KnowMe",text:`Conecta con ${g.username} en KnowMe!`,url:n}):alert("Ocurrio un error :(")}catch(c){console.error("Error sharing:",c)}},a=()=>{navigator.clipboard.writeText(n),i(!0),setTimeout(()=>{i(!1)},2e3)};return k.useEffect(()=>{o()},[]),g==null?C.jsx(Al,{}):C.jsxs(C.Fragment,{children:[C.jsx(Tg,{to:"/home/",className:"back-icon-container",children:C.jsx(Jv,{className:"back-icon"})}),C.jsxs("div",{className:"share-container lg:mx-28",children:[C.jsx("div",{className:"share-avatar",children:C.jsx(rl,{name:g.title_profile,size:"130",src:g.profile_img_url})}),C.jsxs("div",{className:"share-qr-container border-solid border-4 border-white/10 rounded-lg ",children:[C.jsxs("div",{className:"share-header",children:[C.jsx("h1",{children:g.title_profile}),C.jsx("h4",{children:g.ocupation_role})]}),C.jsx("div",{className:"share-qr-code flex justify-center",children:C.jsx(H9,{size:256,style:{height:"auto",maxWidth:"100%",width:"90%"},bgColor:"#ffffff",fgColor:"#000000",value:n,viewBox:"0 0 256 256"})}),C.jsxs("div",{className:"mt-4",children:[C.jsx("button",{type:"button",className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 m-1",onClick:r,children:"Compartir Tarjeta"}),C.jsx("button",{type:"button",className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 m-1",onClick:a,children:I?"Copiado! ":"Copiar URL"})]})]})]})]})};function N9({searchActive:e}){const t=ul(),[g,l]=k.useState({}),{email:n,title_profile:I,username:i}=g,[o,r]=k.useState("");return k.useEffect(()=>{(async()=>{try{const c=await t.getProfile();l(c.data),r(c.data.profile_img_url)}catch(c){console.error("Error fetching profile:",c)}})()},[]),C.jsxs("div",{className:"relative z-0 isolate px-6 pt-14 lg:px-8",children:[C.jsx("div",{className:"absolute inset-x-0 top-[calc(100%-13rem)] transform-gpu overflow-hidden blur-3xl sm:top-[calc(30%-30rem)]","aria-hidden":"true",children:C.jsx("div",{className:"relative left-[calc(50%+3rem)] aspect-[1155/678] w-[1.125rem] -translate-x-1/2 bg-gradient-to-tr from-[#fde68a] to-[#9a3412] opacity-20 sm:left-[calc(40%+5rem)] sm:w-[70.1875rem]",style:{clipPath:"polygon(90.76% 75.84%, 100% 66%, 85.5% 36.72%, 85.5% 0%, 75.14% 15.81%, 38.66% 15.81%, 65.1% 45.92%, 61.5% 85.83%, 20% 27.29%, 0% 35.42%, 29.3% 73.96%, 0% 89%, 20% 100%, 32.79% 91.48%, 76.1% 102%, 78% 48%)"}})}),C.jsx("div",{className:"flex justify-center items-center",children:C.jsxs("div",{className:"max-w-md w-full backdrop-blur-sm bg-blue-950/30 rounded-lg overflow-hidden shadow-lg pb-4",children:[C.jsxs("div",{className:"px-6 py-4",children:[C.jsx("div",{className:"flex justify-center",children:C.jsx(rl,{name:i,size:"100",src:o})}),C.jsxs("div",{className:"text-center m-2",children:[C.jsxs("h3",{className:"text-xl font-semibold",children:["Hola, ",I,"!"]}),C.jsx("p",{className:"text-sm m-1 text-white",children:n}),C.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10 m-1",children:localStorage.getItem("id_plan")=="9"?"PLAN BUSINESS":"PLAN BSICO"})]})]}),C.jsx("div",{className:"px-2 flex justify-center",children:C.jsxs(Tg,{type:"button",to:"/share/",className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:[C.jsx(Aw,{className:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),"Compartir QR"]})})]})}),e&&C.jsxs("div",{className:"px-2 py-4 flex max-w-sm",children:[C.jsx("span",{className:"flex items-center justify-center",children:C.jsx(nw,{className:"-ml-0.5 mr-1.5 h-5 w-5 text-white","aria-hidden":"true"})}),C.jsx("input",{type:"text",className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"Busqueda en Know Me"})]})]})}function F9(e){return de({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.917 7A6.002 6.002 0 0 0 2.083 7H1.071a7.002 7.002 0 0 1 13.858 0h-1.012z"},child:[]}]})(e)}function K9({selectedCategory:e}){const t=ul(),[g,l]=k.useState([]),[n,I]=k.useState(!0);k.useEffect(()=>{(async()=>{if(e==null||e==="todos")try{const r=await t.getProfiles();l(r.data.profiles)}catch(r){console.error("Error fetching user cards:",r)}else try{const r=await t.getFilterCategories(e);console.log(r.data),l(r.data.profiles)}catch(r){console.error("Error fetching user cards:",r)}I(!1)})()},[e]);const i=(o,r)=>{const a=`${window.location.origin}/card?username=${o}&id=${r}`;window.open(a,"_blank","noreferrer")};return C.jsx(C.Fragment,{children:g.length===0?C.jsx(C.Fragment,{children:n?C.jsx("div",{className:"",children:C.jsxs("button",{type:"button",class:" flex mx-auto my-5 lg:my-20 rounded-md bg-gray-600 px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 cursor-not-allowed",disabled:!0,children:[C.jsx(F9,{className:"animate-spin h-5 w-5 text-white mr-4","aria-hidden":"true"}),"Cargando"]})}):C.jsx("div",{className:"no-card",children:C.jsx("p",{children:"No hay usuarios que hagan match con este filtro "})})}):C.jsx(C.Fragment,{children:C.jsx("div",{className:"flex flex-wrap items-center",children:g==null?void 0:g.map(o=>C.jsxs("div",{class:"relative h-52 flex w-full max-w-[26rem] flex-col lg:flex-grow rounded-xl backdrop-blur-sm bg-blue-950/10 m-2 px-4 text-white shadow-none border-1 border-white/10 hover:border-white/30 hover:cursor-pointer",onClick:()=>i(o.username,o.social_media.id_user),children:[C.jsxs("div",{className:"relative flex items-center gap-4 pt-0 mx-0 mt-4 overflow-hidden text-white bg-transparent shadow-none rounded-xl bg-clip-border",children:[C.jsx("div",{className:"h-[58px] w-[70px]",children:C.jsx(rl,{name:o.title_profile,size:"58",src:o.profile_img_url})}),C.jsxs("div",{className:"flex w-full flex-col gap-0.5",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h4",{className:"block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-orange-500 text-ellipsis overflow-hidden max-w-[9rem]",children:o.title_profile}),C.jsx("div",{className:"flex items-center gap-0.5",children:C.jsxs("div",{className:"mt-1 flex items-center gap-x-1.5",children:[C.jsx("div",{className:"flex-none rounded-full bg-emerald-500/20 p-1",children:C.jsx("div",{className:o.availability_status=="Disponible"?"h-1.5 w-1.5 rounded-full bg-emerald-500":"h-1.5 w-1.5 rounded-full bg-gray-500"})}),C.jsx("p",{className:"text-xs leading-5 text-white",children:o.availability_status})]})})]}),C.jsx("p",{className:"block font-sans text-base antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[10rem]",children:o.ocupation_role}),C.jsx("div",{className:"flex flex-row",children:Object.entries(fc(o.social_media)).map(r=>{if(console.log(o,r[0]),o.social_media&&o.social_media[r[0]]!=="")return C.jsx("div",{className:"text-orange-500 text-2xl m-2",children:r[1]},r[0])})})]})]}),C.jsx("div",{className:"flex flex-row items-end pb-2 justify-end absolute bottom-2 right-5",children:o.categories&&C.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-blue-900 ring-1 ring-inset m-1",children:o.categories.name})})]}))})})})}const x9="/assets/banner-knowme-f9e342ef.png";function sA(){const e=ul(),[t,g]=k.useState([]),[l,n]=k.useState("todos"),I=Ut(),[i,o]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const c=await e.getCategories();g(c.data.categories)}catch(c){console.error("Error fetching profile:",c)}o(!1)})()},[I]);const r=a=>{n(a)};return i?C.jsx(Al,{fullScreen:!0}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"z-0 mx-auto mt-6 max-w-2xl sm:px-6 lg:grid lg:max-w-7xl lg:grid-cols-3 lg:gap-x-8 lg:px-8",children:[C.jsx("div",{className:"lg:col-span-1",children:C.jsx(N9,{searchActive:!0})}),C.jsx("div",{className:"hidden overflow-hidden rounded-lg lg:block w-full lg:w-auto lg:col-span-2 m-8",children:C.jsx("img",{src:x9,alt:"Walnut card tray with white powder coated steel divider and 3 punchout holes.",className:"aspect-h-2 aspect-w-3 overflow-hidden rounded-lg h-full object-contain"})})]}),C.jsxs("div",{className:"categories-container z-40",children:[C.jsx("div",{className:`categories-slider ${l==="todos"?"selected":""}`,onClick:()=>r("todos"),children:C.jsx("p",{children:"Todos"})},"todos"),t.map(a=>C.jsx("div",{className:`categories-slider ${l===a.id_categorie?"selected":""}`,onClick:()=>r(a.id_categorie),children:C.jsx("p",{children:a.name})},a.id_categorie))]}),C.jsx("div",{className:"mb-32 md:mx-14 lg:mx-4",children:C.jsx(K9,{selectedCategory:l})})]})}function ag(){const e=Ut(),t=g=>e.pathname===g;return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"navbar-container",children:[C.jsx(Tg,{to:"/home/",className:`navbar-link ${t("/home")?"active":""}`,children:C.jsxs("div",{className:"navbar-icon-container",children:[C.jsx(jV,{className:"navbar-icon"}),t("/home")||t("/home/")&&C.jsx("div",{className:"active-dot"})]})}),C.jsx(Tg,{to:"/perfil/",className:`navbar-link ${t("/profile")?"active":""}`,children:C.jsxs("div",{className:"navbar-icon-container",children:[C.jsx(Tv,{className:"navbar-icon"}),t("/perfil/")&&C.jsx("div",{className:"active-dot"})]})}),C.jsx(Tg,{to:"/scanner/",className:`navbar-link ${t("/scanner")?"active":""}`,children:C.jsx("div",{className:"navbar-icon-container",children:C.jsxs("div",{className:"navbar-scanner",children:[C.jsx(DV,{className:"navbar-icon"}),t("/scanner/")&&C.jsx("div",{className:"active-dot"})]})})}),localStorage.getItem("id_plan")=="9"?C.jsx(Tg,{to:"/business/",className:`navbar-link ${t("/business/")?"active":""}`,children:C.jsxs("div",{className:"navbar-icon-container",children:[C.jsx(Nv,{className:"navbar-icon"}),t("/business/")&&C.jsx("div",{className:"active-dot"})]})}):C.jsx(Tg,{to:"/contacts/",className:`navbar-link ${t("/contacts/")?"active":""}`,children:C.jsxs("div",{className:"navbar-icon-container",children:[C.jsx(gb,{className:"navbar-icon"}),t("/contacts/")&&C.jsx("div",{className:"active-dot"})]})}),C.jsx(Tg,{to:"/settings/",className:`navbar-link ${t("/settings/")?"active":""}`,children:C.jsxs("div",{className:"navbar-icon-container",children:[C.jsx(Hv,{className:"navbar-icon"}),t("/settings/")&&C.jsx("div",{className:"active-dot"})]})})]})})}function jI(e){"@babel/helpers - typeof";return jI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jI(e)}function E9(e,t){if(jI(e)!="object"||!e)return e;var g=e[Symbol.toPrimitive];if(g!==void 0){var l=g.call(e,t||"default");if(jI(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z9(e){var t=E9(e,"string");return jI(t)=="symbol"?t:String(t)}function T9(e,t,g){return t=z9(t),t in e?Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}):e[t]=g,e}function M9(e){if(Array.isArray(e))return e}function L9(e,t){var g=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(g!=null){var l,n,I,i,o=[],r=!0,a=!1;try{if(I=(g=g.call(e)).next,t===0){if(Object(g)!==g)return;r=!1}else for(;!(r=(l=I.call(g)).done)&&(o.push(l.value),o.length!==t);r=!0);}catch(c){a=!0,n=c}finally{try{if(!r&&g.return!=null&&(i=g.return(),Object(i)!==i))return}finally{if(a)throw n}}return o}}function cA(e,t){(t==null||t>e.length)&&(t=e.length);for(var g=0,l=new Array(t);g<t;g++)l[g]=e[g];return l}function U9(e,t){if(e){if(typeof e=="string")return cA(e,t);var g=Object.prototype.toString.call(e).slice(8,-1);if(g==="Object"&&e.constructor&&(g=e.constructor.name),g==="Map"||g==="Set")return Array.from(e);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return cA(e,t)}}function Q9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j9(e,t){return M9(e)||L9(e,t)||U9(e,t)||Q9()}function D9(e,t){if(e==null)return{};var g=or(e,t),l,n;if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);for(n=0;n<I.length;n++)l=I[n],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(g[l]=e[l])}return g}var kp={exports:{}},Re={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lt=typeof Symbol=="function"&&Symbol.for,Sc=lt?Symbol.for("react.element"):60103,Vc=lt?Symbol.for("react.portal"):60106,Vr=lt?Symbol.for("react.fragment"):60107,Wr=lt?Symbol.for("react.strict_mode"):60108,Rr=lt?Symbol.for("react.profiler"):60114,Xr=lt?Symbol.for("react.provider"):60109,kr=lt?Symbol.for("react.context"):60110,Wc=lt?Symbol.for("react.async_mode"):60111,Jr=lt?Symbol.for("react.concurrent_mode"):60111,Yr=lt?Symbol.for("react.forward_ref"):60112,wr=lt?Symbol.for("react.suspense"):60113,O9=lt?Symbol.for("react.suspense_list"):60120,Hr=lt?Symbol.for("react.memo"):60115,Nr=lt?Symbol.for("react.lazy"):60116,P9=lt?Symbol.for("react.block"):60121,_9=lt?Symbol.for("react.fundamental"):60117,q9=lt?Symbol.for("react.responder"):60118,$9=lt?Symbol.for("react.scope"):60119;function wt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Sc:switch(e=e.type,e){case Wc:case Jr:case Vr:case Rr:case Wr:case wr:return e;default:switch(e=e&&e.$$typeof,e){case kr:case Yr:case Nr:case Hr:case Xr:return e;default:return t}}case Vc:return t}}}function Jp(e){return wt(e)===Jr}Re.AsyncMode=Wc;Re.ConcurrentMode=Jr;Re.ContextConsumer=kr;Re.ContextProvider=Xr;Re.Element=Sc;Re.ForwardRef=Yr;Re.Fragment=Vr;Re.Lazy=Nr;Re.Memo=Hr;Re.Portal=Vc;Re.Profiler=Rr;Re.StrictMode=Wr;Re.Suspense=wr;Re.isAsyncMode=function(e){return Jp(e)||wt(e)===Wc};Re.isConcurrentMode=Jp;Re.isContextConsumer=function(e){return wt(e)===kr};Re.isContextProvider=function(e){return wt(e)===Xr};Re.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sc};Re.isForwardRef=function(e){return wt(e)===Yr};Re.isFragment=function(e){return wt(e)===Vr};Re.isLazy=function(e){return wt(e)===Nr};Re.isMemo=function(e){return wt(e)===Hr};Re.isPortal=function(e){return wt(e)===Vc};Re.isProfiler=function(e){return wt(e)===Rr};Re.isStrictMode=function(e){return wt(e)===Wr};Re.isSuspense=function(e){return wt(e)===wr};Re.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Vr||e===Jr||e===Rr||e===Wr||e===wr||e===O9||typeof e=="object"&&e!==null&&(e.$$typeof===Nr||e.$$typeof===Hr||e.$$typeof===Xr||e.$$typeof===kr||e.$$typeof===Yr||e.$$typeof===_9||e.$$typeof===q9||e.$$typeof===$9||e.$$typeof===P9)};Re.typeOf=wt;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var dA=Object.getOwnPropertySymbols,eH=Object.prototype.hasOwnProperty,tH=Object.prototype.propertyIsEnumerable;function gH(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function lH(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},g=0;g<10;g++)t["_"+String.fromCharCode(g)]=g;var l=Object.getOwnPropertyNames(t).map(function(I){return t[I]});if(l.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(I){n[I]=I}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}lH();var nH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",IH=nH;Function.call.bind(Object.prototype.hasOwnProperty);var iH=IH;function Yp(){}function wp(){}wp.resetWarningCache=Yp;var oH=function(){function e(l,n,I,i,o,r){if(r!==iH){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}e.isRequired=e;function t(){return e}var g={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wp,resetWarningCache:Yp};return g.PropTypes=g,g};kp.exports=oH();var _l=kp.exports;function rH(e,t){var g=atob(e);if(t){for(var l=new Uint8Array(g.length),n=0,I=g.length;n<I;++n)l[n]=g.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(l.buffer))}return g}function aH(e,t,g){var l=t===void 0?null:t,n=g===void 0?!1:g,I=rH(e,n),i=I.indexOf(`
`,10)+1,o=I.substring(i)+(l?"//# sourceMappingURL="+l:""),r=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(r)}function CH(e,t,g){var l;return function(I){return l=l||aH(e,t,g),new Worker(l,I)}}var sH=CH("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),cH=["constraints","onError","onLoad","onScan","resolution","qrArea"];function uA(e,t){var g=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),g.push.apply(g,l)}return g}function AA(e){for(var t=1;t<arguments.length;t++){var g=arguments[t]!=null?arguments[t]:{};t%2?uA(Object(g),!0).forEach(function(l){T9(e,l,g[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(g)):uA(Object(g)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(g,l))})}return e}var dH=function(){return new sH},mA=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(g){t.removeTrack(g),g.stop()}),t.getAudioTracks().forEach(function(g){t.removeTrack(g),g.stop()})):t.stop())},Rc=function(t){var g=t.constraints,l=t.onError,n=t.onLoad,I=t.onScan,i=t.resolution,o=t.qrArea,r=D9(t,cH),a=k.useRef(null),c=k.useRef(null),s=k.useRef(document.createElement("canvas")),d=k.useRef(null),A=k.useRef(),f=k.useState(null),p=j9(f,2),Z=p[0],m=p[1],u=k.useRef(!1),h=k.useRef();k.useEffect(function(){h.current=dH();var v=h.current;return v.onmessage=function(S){I&&I(S.data?AA(AA({},S.data),{},{canvas:s.current}):null),u.current=!1},function(){v.terminate()}},[I]);var b=JSON.stringify(o),y=k.useCallback(function(){var v=JSON.parse(b),S=h.current,X=c.current&&c.current.readyState===c.current.HAVE_ENOUGH_DATA;if(!u.current&&X){u.current=!0;var G=c.current.videoWidth,B=c.current.videoHeight,W=G>B?G:B,R=Math.floor(i/W*100)/100;B=Math.floor(R*B),G=Math.floor(R*G),s.current.width=G,s.current.height=B,d.current=s.current.getContext("2d"),d.current.drawImage(c.current,0,0,G,B);var Y;v&&v.length===2&&v[0]>0&&v[1]>0?Y=d.current.getImageData(Math.floor((G-v[0])/2),Math.floor((B-v[1])/2),v[0],v[1]):Y=d.current.getImageData(0,0,G,B),S.postMessage(Y)}A.current=requestAnimationFrame(y)},[i,b]),V=JSON.stringify(g);return k.useEffect(function(){var v=JSON.parse(V),S=!0;return navigator.mediaDevices.getUserMedia(v).then(function(X){if(!S)mA(X);else{a.current=X;try{c.current&&(c.current.srcObject=X,c.current.setAttribute("playsinline",!0))}catch{m(window.URL.createObjectURL(X))}n&&n(),A.current=requestAnimationFrame(y)}}).catch(function(X){return S?l(X):null}),function(){cancelAnimationFrame(A.current),S=!1,mA(a.current),Z&&window.URL.revokeObjectURL(Z)}},[y,V,l,n,Z]),k.createElement("video",Wn({autoPlay:!0,playsInline:!0,src:Z,ref:c},r))};Rc.propTypes={constraints:_l.object,onError:_l.func.isRequired,onLoad:_l.func,onScan:_l.func.isRequired,resolution:_l.number,qrArea:_l.array};Rc.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};function ki(){const e=g=>{g&&(window.location.href=g.text),console.log(`Enlace QR: ${JSON.stringify(g)}`)},t=g=>{console.error(g)};return C.jsxs("div",{className:"scanner-container",children:[C.jsx("h2",{children:"Escanea el QR"}),C.jsx(Rc,{onScan:e,onError:t,style:{width:"100%",height:"95%",borderStyle:"dotted",borderColor:"rgba(255, 255, 255, 0.5)",borderWidth:"2px"}})]})}function hA(){const e=_e(),t=()=>{e("/contacts")},g=()=>{localStorage.removeItem("token"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),localStorage.removeItem("id_plan"),e("/login")};return C.jsxs("div",{className:"setting-container",children:[C.jsxs("div",{className:"setting-link",children:[C.jsx("div",{className:"setting-icon",children:C.jsx(xv,{})}),C.jsxs("div",{className:"setting-name",children:[C.jsx("h4",{children:"Notificaciones"}),C.jsx("p",{children:"Lo ultimo que pasa en Know Me"})]}),C.jsx("div",{className:"setting-goto",children:C.jsx(gI,{})})]}),C.jsx("div",{className:"separador"}),C.jsxs("div",{className:"setting-link",onClick:t,children:[C.jsx("div",{className:"setting-icon",children:C.jsx(Kv,{})}),C.jsxs("div",{className:"setting-name",children:[C.jsx("h4",{children:"Contactos"}),C.jsx("p",{children:"Visualiza tus contactos"})]}),C.jsx("div",{className:"setting-goto",children:C.jsx(gI,{})})]}),C.jsx("div",{className:"separador"}),C.jsxs("div",{className:"setting-link",children:[C.jsx("div",{className:"setting-icon",children:C.jsx(wv,{})}),C.jsxs("div",{className:"setting-name",children:[C.jsx("h4",{children:"Apariencia"}),C.jsx("p",{children:"Cambia el tema de la app"})]}),C.jsx("div",{className:"setting-goto",children:C.jsx(gI,{})})]}),C.jsx("div",{className:"separador"}),C.jsxs("div",{className:"setting-link",children:[C.jsx("div",{className:"setting-icon",children:C.jsx(x2,{})}),C.jsxs("div",{className:"setting-name",children:[C.jsx("h4",{children:"Subscripcin"}),C.jsx("p",{children:"Administra tu subscripcin"})]}),C.jsx("div",{className:"setting-goto",children:C.jsx(gI,{})})]}),C.jsx("div",{className:"separador"}),C.jsxs("div",{className:"setting-link",onClick:g,children:[C.jsx("div",{className:"setting-icon",children:C.jsx(Qb,{})}),C.jsxs("div",{className:"setting-name",children:[C.jsx("h4",{children:"Cerrar Sesin"}),C.jsx("p",{children:"Te vamos a extraar "})]}),C.jsx("div",{className:"setting-goto",children:C.jsx(gI,{})})]})]})}const Hp="/assets/contactIcon-7010a161.png";function bA(){const e="https://api.knowmeapp.com",{user:t}=k.useContext(Qt),g=localStorage.getItem("token"),[l,n]=k.useState({id_user_fk:parseInt(t.id),name:"",email:"",phone:"",company:"",position:"",url_web_company:"",notes:""}),I=o=>{const{name:r,value:a}=o.target;n({...l,[r]:a})},i=async o=>{o.preventDefault();try{await Be.post(`${e}/api/contact`,{id_user_fk:parseInt(t.id),name:l.name,email:l.email,phone:l.phone,company:l.company,position:l.position,url_web_company:l.url_web_company,notes:l.notes},{headers:{"x-token":g}}),At.success("Contacto guardado exitosamente"),n({id_user_fk:parseInt(t.id),name:"",email:"",phone:"",company:"",position:"",url_web_company:"",notes:""})}catch(r){At.error("Error al crear contacto, por favor intenta de nuevo"),console.error("Error al enviar el formulario:",r)}};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"contact-container",children:[C.jsx(Tl,{richColors:!0,position:"top-right"}),C.jsx("div",{className:"contact-icon-container",children:C.jsx(rl,{src:Hp,size:100})}),C.jsx("h3",{children:"Crea un nuevo contacto"}),C.jsx("p",{children:"Aade un nuevo contacto y descubre la mejor forma de mantener tu agenda en lnea siempre actualizada y a mano!"}),C.jsxs("div",{className:"contact-form-container",children:[C.jsx("div",{className:"title-contact-data",children:C.jsx("p",{children:"Datos de contacto "})}),C.jsx("div",{className:"contact-form",children:C.jsxs("form",{onSubmit:i,children:[C.jsx("div",{children:C.jsx("label",{children:"Nombre:"})}),C.jsx("input",{type:"text",name:"name",className:"contact-input",value:l.name,onChange:I}),C.jsx("div",{children:C.jsx("label",{children:"Correo:"})}),C.jsx("input",{type:"email",name:"email",className:"contact-input",value:l.email,onChange:I}),C.jsx("div",{children:C.jsx("label",{children:"Tlefono:"})}),C.jsx("input",{type:"tel",name:"phone",className:"contact-input",value:l.phone,onChange:I}),C.jsx("div",{children:C.jsx("label",{children:"Empresa:"})}),C.jsx("input",{type:"text",name:"company",className:"contact-input",value:l.company,onChange:I}),C.jsx("div",{children:C.jsx("label",{children:"Cargo:"})}),C.jsx("input",{type:"text",name:"position",className:"contact-input",value:l.position,onChange:I}),C.jsx("div",{children:C.jsx("label",{children:"Sitio Web:"})}),C.jsx("input",{type:"text",name:"url_web_company",className:"contact-input",value:l.url_web_company,onChange:I}),C.jsx("div",{children:C.jsx("label",{children:"Notas:"})}),C.jsx("textarea",{name:"notes",className:"contact-input",value:l.notes,onChange:I}),C.jsx("div",{className:"perfil-guardar",children:C.jsx(et,{variant:"primary",size:"lg",type:"submit",children:"Guardar cambios"})})]})})]})]})})}function pA(){const[e,t]=k.useState([]),g="https://api.knowmeapp.com",l=localStorage.getItem("token"),{user:n}=k.useContext(Qt),I=_e(),[i,o]=k.useState(null),[r,a]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const f=await Be.get(`${g}/api/contact/user/${n.id}`,{headers:{"x-token":l}});console.log(f.data.contacts),t(f.data.contacts)}catch(f){console.error("Error fetching contacts:",f)}})()},[]);const c=()=>{I("/addContact")},s=A=>{o(A),a(!0)},d=()=>{a(!1)};return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"agenda-container",children:[C.jsxs("div",{className:"agenda-header",children:[C.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Bienvenid@ a tu agenda de contactos"}),C.jsx("div",{className:"my-4",children:C.jsx(et,{variant:"primary",size:"sm",onClick:c,className:"inline-flex items-center rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500",children:"Agregar Contacto"})})]}),C.jsx("div",{children:e.length===0?C.jsx(C.Fragment,{children:C.jsxs("div",{className:"relative flex items-center gap-x-4 mt-10 bg-blue-500/10 rounded-md p-10 w-96 border-dashed",children:[C.jsx("img",{src:Hp,alt:"",className:"h-10 w-10 rounded-full bg-gray-50"}),C.jsx("div",{className:"text-sm leading-6",children:C.jsx("p",{className:"text-white",children:"Aun no tienes contactos agregados"})})]})}):C.jsx(C.Fragment,{children:C.jsx("div",{className:"flex flex-wrap items-center",children:e==null?void 0:e.map(A=>C.jsx("div",{class:"relative flex w-full max-w-[26rem] flex-col lg:flex-grow rounded-xl backdrop-blur-sm bg-blue-950/10 m-2 px-4 text-white shadow-none border-1 border-white/10 hover:border-white/30 hover:cursor-pointer pb-4 min-h-40",onClick:()=>s(A),children:C.jsxs("div",{className:"relative flex items-center gap-4 pt-0 mx-0 mt-4 overflow-hidden text-white bg-transparent shadow-none rounded-xl bg-clip-border",children:[C.jsx("div",{className:"h-[58px] w-[70px]",children:C.jsx(rl,{name:A.title_profile,size:"58",src:A.profile_img_url})}),C.jsxs("div",{className:"flex w-full flex-col gap-0.5",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h4",{className:"block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-orange-500 text-ellipsis overflow-hidden max-w-[9rem]",children:A.name}),C.jsx("div",{className:"flex items-center gap-0.5",children:C.jsxs("div",{className:"mt-1 flex items-center gap-x-1.5",children:[C.jsx("div",{className:"flex-none rounded-full bg-emerald-500/20 p-1",children:C.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"})}),C.jsx("p",{className:"text-xs leading-5 text-white",children:"Contacto"})]})})]}),C.jsx("p",{className:"block font-sans text-base antialiased font-light leading-relaxed text-blue-gray-900 text-ellipsis overflow-hidden max-w-[10rem]",children:A.position})]})]})}))})})})]}),C.jsxs(ru,{show:r,onHide:d,centered:!0,scrollable:!0,children:[C.jsx(O0,{closeButton:!0,closeVariant:"white",className:"bg-[#151f3e]"}),C.jsx(ru.Body,{className:"contact-modal-card",children:i&&C.jsxs("div",{className:"m-4",children:[C.jsxs("div",{className:"modal-contact-header",children:[C.jsx("div",{className:"user-avatar-card",children:C.jsx(rl,{name:i.name,size:"100",src:""})}),C.jsx("div",{className:"my-2",children:C.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:i.name})})]}),C.jsxs("div",{children:[C.jsx("p",{className:"text-base font-semibold text-white",children:"Correo electrnico"}),C.jsxs("div",{className:"flex m-2",children:[C.jsx(Bc,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),C.jsx("a",{href:`mailto:${i.email}`,className:"contact-modal-content-a",children:i.email})]})]}),C.jsx("div",{className:"contact-modal-separador"}),C.jsxs("div",{children:[C.jsx("p",{className:"text-base font-semibold text-white",children:"Telfono"}),C.jsxs("div",{className:"flex m-2",children:[C.jsx(dp,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),C.jsx("a",{href:`tel:${i.phone}`,className:"contact-modal-content-a",children:i.phone})]})]}),C.jsx("div",{className:"contact-modal-separador"}),C.jsx("p",{className:"text-base font-semibold text-white",children:"Empresa"}),C.jsxs("div",{className:"flex m-2",children:[C.jsx(sp,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),C.jsx("p",{className:"contact-modal-content",children:i.company})]}),C.jsx("div",{className:"contact-modal-separador"}),C.jsxs("div",{children:[C.jsx("p",{className:"text-base font-semibold text-white",children:"Cargo"}),C.jsxs("div",{className:"flex m-2",children:[C.jsx(MY,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),C.jsx("p",{className:"contact-modal-content",children:i.position})]})]}),C.jsx("div",{className:"contact-modal-separador"}),C.jsxs("div",{children:[C.jsx("p",{className:"text-base font-semibold text-white",children:"Sitio Web"}),C.jsxs("div",{className:"flex m-2",children:[C.jsx(cp,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),C.jsx("p",{className:"contact-modal-content",children:i.url_web_company!=""?C.jsx(C.Fragment,{children:C.jsx("a",{href:`https://${i.url_web_company}`,className:"contact-modal-content-a",target:"_blank",rel:"noopener noreferrer",children:i.url_web_company})}):C.jsxs(C.Fragment,{children:[" ",C.jsx("p",{children:"No hay web registrada"})]})})]})]}),C.jsx("div",{className:"contact-modal-separador"}),C.jsxs("div",{children:[C.jsx("p",{className:"text-base font-semibold text-white",children:"Notas"}),C.jsxs("div",{className:"flex m-2",children:[C.jsx(DY,{className:"-ml-0.5 mr-4 h-5 w-5 ","aria-hidden":"true"}),C.jsxs("p",{className:"contact-modal-content",children:[" ",i.notes!=""?C.jsx(C.Fragment,{children:C.jsx("p",{children:i.notes})}):C.jsxs(C.Fragment,{children:[" ",C.jsx("p",{children:"No hay nota registrada"})]})]})]})]}),C.jsx("div",{className:"contact-modal-separador"})]})})]})]})}const Np=()=>{const e="https://api.knowmeapp.com",t=localStorage.getItem("token"),{user:g}=k.useContext(Qt);return{getOrgUser:async()=>{let i;if(i=await Be.get(`${e}/api/org_users_detail/owner/${g.id}`,{headers:{"x-token":t}}),i.data.ok){const{orgUsersDetail:o}=i.data;return i=await Be.get(`${e}/api/organization/${o.id_organization_fk}`,{headers:{"x-token":t}}),i={owner:o.owner,...i},i}else return i},createOrg:async i=>{let o;if(o=await Be.post(`${e}/api/organization`,i,{headers:{"x-token":t}}),o.data.ok){const{organization:r}=o.data,a={id_organization_fk:r.id_organization,id_user_fk:g.id,owner:!0};return o=await Be.post(`${e}/api/org_users_detail`,a,{headers:{"x-token":t}}),o}return o},updateOrg:async i=>await Be.put(`${e}/api/organization/${i.id_organization}`,i,{headers:{"x-token":t}})}},uH=e=>{const{userOrg:t}=e,[g,l]=k.useState(null),n=_e(),I=()=>{n("/info_org",{state:{userOrg:t}})};return k.useEffect(()=>{l(t.logo_url??null)},[]),C.jsxs("div",{className:"bg-gray-900/50 rounded-lg mt-2 pt-6",children:[C.jsxs("div",{className:"mt-2 flex items-center gap-x-3 ml-8",children:[g?C.jsx("img",{src:g,alt:"Selected",className:"h-16 w-16 rounded-full border-white border-2 object-cover"}):C.jsx(up,{className:"h-16 w-16 text-white","aria-hidden":"true"}),C.jsxs("div",{className:"px-4 sm:px-0",children:[C.jsx("h3",{className:"text-base font-semibold leading-7 text-white",children:t.name}),C.jsx("p",{className:"mt-1 max-w-2xl text-sm leading-6 text-white",children:t.industry})]})]}),C.jsxs("div",{className:"mt-6 border-t border-blue-100/20",children:[C.jsxs("dl",{className:"divide-y divide-blue-100/20",children:[C.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[C.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Razn social"}),C.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.business_name})]}),C.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[C.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Domicilio fiscal"}),C.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.fiscal_address})]}),C.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[C.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Telfono"}),C.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.phone})]}),C.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[C.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Correo"}),C.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.email})]}),C.jsxs("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[C.jsx("dt",{className:"text-sm font-medium leading-6 text-white",children:"Web"}),C.jsx("dd",{className:"mt-1 text-sm leading-6 text-white sm:col-span-2 sm:mt-0",children:t.website})]})]}),C.jsx("div",{className:" p-4",children:C.jsx("button",{type:"button",onClick:I,disabled:!t.owner,className:`inline-flex items-center rounded-md  px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${t.owner??!1?"bg-orange-500 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500 hover:bg-orange-600 cursor-pointer":"bg-gray-500 focus-visible:outline-gray-600 border-gray-600 hover:border-gray-500 hover:bg-gray-600 cursor-not-allowed"}`,children:"Actualizar informacin"})})]})]})};function fA(){const[e,t]=k.useState({});localStorage.getItem("token"),k.useContext(Qt);const[g,l]=k.useState(!0),n=_e(),I=Np();k.useEffect(()=>{i()},[]);const i=async()=>{const{data:a,owner:c}=await I.getOrgUser();a.ok?t({...a.organization,owner:c}):t({}),l(!1)},o=()=>{n("/team_org")},r=()=>{n("/info_org")};return g?C.jsx(C.Fragment,{children:C.jsx(Al,{fullScreen:!0})}):C.jsx(C.Fragment,{children:C.jsxs("div",{className:"agenda-container",children:[C.jsxs("div",{className:"agenda-header",children:[C.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Business Home"}),e.name?C.jsxs("div",{className:"my-4",children:[C.jsx(uH,{userOrg:e}),C.jsx("div",{className:"my-4",children:C.jsxs("div",{className:"bg-gray-900/50 rounded-lg mt-2 pt-6",children:[C.jsxs("div",{className:"px-4 sm:px-0",children:[C.jsxs("h3",{className:"text-base font-semibold leading-7 text-white",children:["Team: ",e.name]}),C.jsx("p",{className:"mt-1 max-w-2xl text-sm leading-6 text-white",children:"Gestiona los miembros de tu organizacin."})]}),C.jsx("div",{className:" p-4",children:C.jsx("button",{type:"button",onClick:o,disabled:!e.owner,className:`inline-flex items-center rounded-md  px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${e.owner??!1?"bg-orange-500 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500 hover:bg-orange-600 cursor-pointer":"bg-gray-500 focus-visible:outline-gray-600 border-gray-600 hover:border-gray-500 hover:bg-gray-600 cursor-not-allowed"}`,children:"Gestionar usuarios"})})]})})]}):C.jsx("div",{className:"my-4",children:C.jsxs("div",{className:"bg-gray-900/50 rounded-lg mt-2 pt-6",children:[C.jsxs("div",{className:"px-4 sm:px-0",children:[C.jsx("h3",{className:"text-base font-semibold leading-7 text-white",children:"No tienes una organizacin an "}),C.jsx("p",{className:"mt-1 max-w-2xl text-sm leading-6 text-white",children:"Completa los datos para tu organizacin y empieza a crear usuarios."})]}),C.jsx("div",{className:" p-4",children:C.jsx("button",{type:"button",onClick:r,disabled:localStorage.getItem(!1),className:`inline-flex items-center rounded-md  px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${localStorage.getItem("id_plan")==="9"?"bg-orange-500 focus-visible:outline-orange-600 border-orange-600 hover:border-orange-500 hover:bg-orange-600 cursor-pointer":"bg-gray-500 focus-visible:outline-gray-600 border-gray-600 hover:border-gray-500 hover:bg-gray-600 cursor-not-allowed"}`,children:"Completa el registro de tu organizacin"})})]})})]}),C.jsx("div",{className:"h-40"})]})})}function AH(){const e="https://api.knowmeapp.com",[t,g]=k.useState({email:""}),l=_e(),[n,I]=k.useState(""),i=r=>{g({...t,[r.target.name]:r.target.value})},o=async r=>{r.preventDefault(),I("");try{const a=await Be.post(`${e}/api/auth/request-reset`,t);I(""),a.status===200&&l("/emailSent")}catch(a){console.error("Error al enviar el formulario:",a),I(`El email ${t.email} no esta registrado`)}};return C.jsxs(C.Fragment,{children:[C.jsx(ac,{className:"registro-back",size:33,color:"#FD6202",onClick:()=>{l("/login")}}),C.jsxs("div",{className:"forgot-container max-w-5xl mx-auto",children:[C.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Recupera tu cuenta"}),C.jsx("p",{children:"Cul es tu correo electrnico?"}),C.jsx("form",{onSubmit:o,className:"form-forget",children:C.jsxs("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-3",children:[C.jsxs("div",{className:"col-span-full",children:[C.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Correo:"}),C.jsx("input",{type:"email",name:"email",id:"email",className:"block w-full rounded-md border-0 p-2 bg-white text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-orange-600 sm:text-sm sm:leading-6",value:t.email,onChange:i,placeholder:"correo electrnico"}),C.jsx("div",{className:"error-mail",children:n})]}),C.jsx("div",{className:"sm:col-span-3 flex items-end justify-end",children:C.jsx("button",{type:"submit",className:"inline-flex items-center rounded-md bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Restablecer Contrasea"})})]})})]})]})}function mH(){const e=_e();return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"emailSent-container max-w-5xl mx-auto",children:[C.jsx("h3",{className:"text-base font-semibold leading-7 text-white ",children:"Se envi el correo electrnico"}),C.jsx("p",{className:"py-2",children:"Enviamos un correo electrnico. Si este correo est vinculado a una cuenta Know Me, podrs restablecer tu contrasea."}),C.jsx("div",{className:"backtohome hover:text-orange-500",onClick:()=>{e("/login/")},children:"Volver al inicio"})]})})}function hH(){const e="https://api.knowmeapp.com",[t,g]=k.useState(!1),[l,n]=k.useState({newPassword:"",token:""}),I=_e(),[i,o]=k.useState(""),r=26,a=Ut();k.useEffect(()=>{const f=new URLSearchParams(a.search).get("token");f&&n({...l,token:f})},[a.search]);const c=()=>{g(!t)},s=A=>{n({...l,[A.target.name]:A.target.value})},d=async A=>{if(A.preventDefault(),o(""),l.newPassword!==l.confirmPassword){o("Las contraseas no coinciden");return}try{const f=await Be.post(`${e}/api/auth/reset`,l);o(""),f.status===200&&I("/login")}catch(f){console.error("Error al enviar el formulario:",f),o("Ocurrio un problema por favor intenta de nuevo")}};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"forgot-container",children:[C.jsx("h3",{children:"Ingresa tu nueva contrasea"}),C.jsx("p",{}),C.jsxs("form",{onSubmit:d,className:"form-forget",children:[C.jsxs("div",{children:[C.jsx("div",{children:C.jsx("label",{children:"Contrasea:"})}),C.jsxs("div",{className:"login-password",children:[C.jsx("input",{type:t?"text":"password",className:"contact-input-recover",placeholder:"******",value:l.newPassword,name:"newPassword",onChange:s}),t?C.jsx(LI,{size:r,color:"#fff",className:"eye-icon",onClick:c}):C.jsx(MI,{size:r,color:"#fff",className:"eye-icon",onClick:c})]})]}),C.jsxs("div",{className:"mt-5",children:[C.jsx("div",{children:C.jsx("label",{children:"Reingresa Contrasea:"})}),C.jsxs("div",{className:"login-password",children:[C.jsx("input",{type:t?"text":"password",className:"contact-input-recover",placeholder:"******",name:"confirmPassword",onChange:s}),t?C.jsx(LI,{size:r,color:"#fff",className:"eye-icon",onClick:c}):C.jsx(MI,{size:r,color:"#fff",className:"eye-icon",onClick:c})]})]}),C.jsx("div",{className:"error-mail",children:i}),C.jsx("div",{children:C.jsx("button",{type:"submit",className:"forgot-btn",children:"Restablecer Contrasea"})})]})]})})}const bH=()=>C.jsxs("div",{className:"landing-container",children:[C.jsx(j2,{}),C.jsx(Q2,{}),C.jsx(z2,{}),C.jsx(L2,{}),C.jsx(_2,{}),C.jsx(mc,{})]}),ZA=()=>{const e=Ut(),[t,g]=k.useState({id_organization:0,name:"",logo_url:"",business_name:"",rfc:"",fiscal_address:"",industry:"",phone:"",email:"",website:""}),l=e.state?e.state.userOrg:t,[n,I]=k.useState(null),[i,o]=k.useState(!0),r=Np(),a=ul(),c=_e(),{user:s}=k.useContext(Qt),d=m=>{const u=m.target.files[0];I(URL.createObjectURL(u))},A=m=>{const{name:u,value:h}=m.target;g({...t,[u]:h})};k.useEffect(()=>{f()},[]);const f=async()=>{I(l.logo_url??null),g({...l}),o(!1)},p=async m=>{o(!0);const u=At.loading("Guardando cambios");m.preventDefault();try{const b=document.getElementById("photo").files[0];if(b!=null){const y=new FormData;y.append("recfile",b),y.append("username",localStorage.getItem("token"));const V=await a.updateProfilePhoto(y);t.logo_url=V.data.dataLocationResponse}if(console.log(t),t.id_organization!=0){const{data:y}=await r.updateOrg(t);console.log(y),y.ok?(At.success(y.msg,{id:u}),setTimeout(()=>{c("/business"),o(!1)},2e3)):At.error(y.msg,{id:u})}else{const{data:y}=await r.createOrg(t);y.ok?(At.success(y.msg,{id:u}),setTimeout(()=>{c("/business"),o(!1)},2e3)):At.error(y.msg,{id:u}),o(!1)}}catch(h){At.error("Error al crear contacto, por favor intenta de nuevo",{id:u}),o(!1),console.error("Error al enviar el formulario:",h)}},Z=()=>{console.log(s),g({name:"",logo_url:"",business_name:"",rfc:"",fiscal_address:"",industry:"",phone:"",email:"",website:""}),c("/business")};return C.jsxs(C.Fragment,{children:[C.jsx(Tl,{position:"top-right",richColors:!0}),C.jsx("div",{className:"m-10",children:C.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Editar o agregar datos de organizacin"})}),C.jsx("div",{className:"m-3 p-3 bg-gray-800/30 rounded-lg",children:C.jsxs("form",{onSubmit:p,className:"md:m-16",children:[C.jsxs("div",{className:"space-y-12",children:[C.jsxs("div",{className:"border-b border-gray-900/10 pb-12 ",children:[C.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Informacin general de tu organizacin"}),C.jsx("p",{className:"mt-1 text-sm leading-6 text-white",children:"Esta informacin de la organizacin formar parte de la carpeta de presentacin de tus usuarios miembros."}),C.jsxs("div",{className:"col-span-full mt-4",children:[C.jsx("label",{htmlFor:"photo",className:"block text-sm font-medium leading-6 text-white",children:"Logo organizacin"}),C.jsxs("div",{className:"mt-2 flex items-center gap-x-3",children:[n?C.jsx("img",{src:n,alt:"Selected",className:"h-28 w-28 rounded-full border-white border-2 object-cover"}):C.jsx(up,{className:"h-12 w-12 text-white","aria-hidden":"true"}),C.jsx("input",{type:"file",id:"photo",accept:"image/*",className:"hidden",onChange:d}),C.jsx("button",{type:"button",className:"rounded-md bg-orange-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white hover:bg-orange-600",onClick:()=>{document.getElementById("photo").click()},children:"Cambiar"})]})]}),C.jsx("div",{className:"mt-2 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:C.jsxs("div",{className:"sm:col-span-4",children:[C.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white",children:"Nombre de la organizacin"}),C.jsx("div",{className:"mt-2",children:C.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[C.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:C.jsx(sp,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),C.jsx("input",{type:"text",name:"name",id:"name",autoComplete:"name",value:t.name,onChange:A,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),C.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Industria a la que pertenece la organizacin"}),C.jsx("div",{className:"mt-2",children:C.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[C.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:C.jsx(tw,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),C.jsx("input",{type:"text",name:"industry",id:"industry",autoComplete:"industry",value:t.industry,onChange:A,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),C.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Razn Social"}),C.jsx("div",{className:"mt-2",children:C.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[C.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:C.jsx(Cw,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),C.jsx("input",{type:"text",name:"business_name",id:"business_name",autoComplete:"business_name",value:t.business_name,onChange:A,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),C.jsx("div",{className:"mt-2",children:C.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[C.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:"RFC:"}),C.jsx("input",{type:"text",name:"rfc",id:"rfc",autoComplete:"rfc",value:t.rfc,onChange:A,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),C.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Domicilio Fiscal:"}),C.jsx("div",{className:"mt-2",children:C.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[C.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:C.jsx(ow,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),C.jsx("input",{type:"text",name:"fiscal_address",id:"fiscal_address",autoComplete:"fiscal_address",value:t.fiscal_address,onChange:A,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),C.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Telfono de la empresa"}),C.jsx("div",{className:"mt-2",children:C.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[C.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:"+52"}),C.jsx("input",{type:"number",name:"phone",id:"phone",autoComplete:"phone",value:t.phone,onChange:A,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),C.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Correo electrnico de la empresa"}),C.jsx("div",{className:"mt-2",children:C.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[C.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:C.jsx(Bc,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),C.jsx("input",{type:"email",name:"email",id:"email",autoComplete:"email",value:t.email,onChange:A,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})}),C.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-white mt-2",children:"Sitio web empresa"}),C.jsx("div",{className:"mt-2",children:C.jsxs("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-white focus-within:ring-2 focus-within:ring-inset focus-within:ring-orange-600 sm:max-w-md border-1 border-white",children:[C.jsx("span",{className:"flex pr-2 select-none items-center pl-3 text-white sm:text-sm",children:C.jsx(cp,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),C.jsx("input",{type:"text",name:"website",id:"website",autoComplete:"website",value:t.website,onChange:A,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-white focus:ring-0 sm:text-sm sm:leading-6 bg-white p-2"})]})})]})})]}),C.jsxs("div",{className:"border-b border-white/10 pb-12",children:[C.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Para qu necesitamos estos datos?"}),C.jsx("p",{className:"mt-1 text-sm leading-6 text-white",children:"La informacin proporcionada aqu ser utilizada para crear y mantener el perfil de tu organizacin. Esto incluye la presentacin de tu empresa ante los usuarios miembros, as como para fines de comunicacin y contacto relacionados con los servicios ofrecidos."})]})]}),C.jsxs("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[C.jsx("button",{type:"button",disabled:i,onClick:Z,className:"text-sm font-semibold leading-6 text-white",children:"Cancelar"}),C.jsx("button",{type:"submit",disabled:i,className:"rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:"Guardar"})]})]})}),C.jsx("div",{className:"h-24 lg:h-0"})]})},yA=()=>{const e=_e(),t=()=>{e("/business")};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"flex flex-col justify-center items-center h-full mx-2 my-5",children:[C.jsx("h2",{className:"text-base font-semibold leading-7 text-white",children:"Business Team"}),C.jsx("p",{className:"mt-1 text-sm leading-6 text-white text-center mx-5",children:"Nos encontramos en un breve proceso de mantenimiento para mejorar tu experiencia. Gracias por tu apoyo!"}),C.jsx("img",{src:"https://techzaa.getappui.com/wrap/assets/images/maintenance/hse.svg",alt:"maintenance",className:"inline-block w-96 object-cover"}),C.jsx("button",{type:"button",onClick:t,className:"text-sm font-semibold leading-6 text-orange-400 hover:text-orange-500",children:"Regresar"})]})})},pH=()=>{const e=window.innerWidth,t=e>1300?2:3,g=3,l=4;return C.jsx(C.Fragment,{children:C.jsxs(qy,{children:[C.jsx(je,{path:"/",element:C.jsx(pl,{children:C.jsx(bH,{})})}),C.jsx(je,{path:"/login/*",element:C.jsx(pl,{children:C.jsx($2,{})})}),C.jsx(je,{path:"/forgot/*",element:C.jsx(pl,{children:C.jsx(AH,{})})}),C.jsx(je,{path:"/emailSent/*",element:C.jsx(pl,{children:C.jsx(mH,{})})}),C.jsx(je,{path:"/reset-password/*",element:C.jsx(pl,{children:C.jsx(hH,{})})}),C.jsx(je,{path:"/registro/*",element:C.jsx(pl,{children:C.jsx(t1,{})})}),C.jsx(je,{path:"/plan/*",element:C.jsx(pl,{children:C.jsx(MV,{})})}),C.jsx(je,{path:"/card/*",element:C.jsx(r9,{})}),C.jsx(je,{path:"/perfil/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(lA,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(lA,{})]})}),C.jsx(je,{path:"/business/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(fA,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(fA,{})]})}),C.jsx(je,{path:"/info_org/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(ZA,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(ZA,{})]})}),C.jsx(je,{path:"/team_org/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(yA,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(yA,{})]})}),C.jsx(je,{path:"/contacts/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(pA,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(pA,{})]})}),C.jsx(je,{path:"/addContact/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(bA,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(bA,{})]})}),C.jsx(je,{path:"/share/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(CA,{})})]})}):C.jsx(Le,{children:C.jsx(CA,{})})}),C.jsx(je,{path:"/scanner/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(ki,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(ki,{})]})}),C.jsx(je,{path:"/settings/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(hA,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(hA,{})]})}),C.jsx(je,{path:"/scanner/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:4,md:3,lg:2,children:C.jsx(Dt,{})}),C.jsx(re,{children:C.jsx(ki,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(ki,{})]})}),C.jsx(je,{path:"/home/*",element:e>576?C.jsx(Le,{children:C.jsxs(ke,{children:[C.jsx(re,{sm:l,md:g,lg:t,children:C.jsx(Dt,{})}),C.jsx(re,{sm:12-l,md:12-g,lg:12-t,children:C.jsx(sA,{})})]})}):C.jsxs(Le,{children:[C.jsx(ag,{}),C.jsx(sA,{})]})}),C.jsx(je,{path:"/*",element:C.jsx($s,{to:"/login/"})})]})})};function fH(){return C.jsx(C.Fragment,{children:C.jsx(IG,{children:C.jsx(pH,{})})})}Ja.createRoot(document.getElementById("root")).render(C.jsx(q.StrictMode,{children:C.jsx(fH,{})}));
